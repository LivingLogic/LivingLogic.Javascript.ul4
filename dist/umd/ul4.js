!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).ul4={})}(this,(function(e){"use strict";function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,_toPropertyKey(i.key),i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _defineProperty(e,t,n){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _getPrototypeOf(e){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)},_getPrototypeOf(e)}function _setPrototypeOf(e,t){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(e,t){return e.__proto__=t,e},_setPrototypeOf(e,t)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _construct(e,t,n){return _construct=_isNativeReflectConstruct()?Reflect.construct.bind():function _construct(e,t,n){var i=[null];i.push.apply(i,t);var o=new(Function.bind.apply(e,i));return n&&_setPrototypeOf(o,n.prototype),o},_construct.apply(null,arguments)}function _possibleConstructorReturn(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _createSuper(e){var t=_isNativeReflectConstruct();return function _createSuperInternal(){var n,i=_getPrototypeOf(e);if(t){var o=_getPrototypeOf(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _get$1(){return _get$1="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(e,t,n){var i=function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},_get$1.apply(this,arguments)}function _slicedToArray(e,t){return function _arrayWithHoles(e){if(Array.isArray(e))return e}(e)||function _iterableToArrayLimit(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,o,s,u,l=[],c=!0,p=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=s.call(n)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(e){p=!0,o=e}finally{try{if(!c&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(p)throw o}}return l}}(e,t)||_unsupportedIterableToArray(e,t)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _toConsumableArray(e){return function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}(e)||function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_unsupportedIterableToArray(e)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _createForOfIteratorHelper(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,F=function(){};return{s:F,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}}function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var t="1.16.0",n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},i={};!function(e){!function(t){function safeAdd(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function md5cmn(e,t,n,i,o,s){return safeAdd(function bitRotateLeft(e,t){return e<<t|e>>>32-t}(safeAdd(safeAdd(t,e),safeAdd(i,s)),o),n)}function md5ff(e,t,n,i,o,s,u){return md5cmn(t&n|~t&i,e,t,o,s,u)}function md5gg(e,t,n,i,o,s,u){return md5cmn(t&i|n&~i,e,t,o,s,u)}function md5hh(e,t,n,i,o,s,u){return md5cmn(t^n^i,e,t,o,s,u)}function md5ii(e,t,n,i,o,s,u){return md5cmn(n^(t|~i),e,t,o,s,u)}function binlMD5(e,t){var n,i,o,s,u;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var l=1732584193,c=-271733879,p=-1732584194,f=271733878;for(n=0;n<e.length;n+=16)i=l,o=c,s=p,u=f,l=md5ff(l,c,p,f,e[n],7,-680876936),f=md5ff(f,l,c,p,e[n+1],12,-389564586),p=md5ff(p,f,l,c,e[n+2],17,606105819),c=md5ff(c,p,f,l,e[n+3],22,-1044525330),l=md5ff(l,c,p,f,e[n+4],7,-176418897),f=md5ff(f,l,c,p,e[n+5],12,1200080426),p=md5ff(p,f,l,c,e[n+6],17,-1473231341),c=md5ff(c,p,f,l,e[n+7],22,-45705983),l=md5ff(l,c,p,f,e[n+8],7,1770035416),f=md5ff(f,l,c,p,e[n+9],12,-1958414417),p=md5ff(p,f,l,c,e[n+10],17,-42063),c=md5ff(c,p,f,l,e[n+11],22,-1990404162),l=md5ff(l,c,p,f,e[n+12],7,1804603682),f=md5ff(f,l,c,p,e[n+13],12,-40341101),p=md5ff(p,f,l,c,e[n+14],17,-1502002290),l=md5gg(l,c=md5ff(c,p,f,l,e[n+15],22,1236535329),p,f,e[n+1],5,-165796510),f=md5gg(f,l,c,p,e[n+6],9,-1069501632),p=md5gg(p,f,l,c,e[n+11],14,643717713),c=md5gg(c,p,f,l,e[n],20,-373897302),l=md5gg(l,c,p,f,e[n+5],5,-701558691),f=md5gg(f,l,c,p,e[n+10],9,38016083),p=md5gg(p,f,l,c,e[n+15],14,-660478335),c=md5gg(c,p,f,l,e[n+4],20,-405537848),l=md5gg(l,c,p,f,e[n+9],5,568446438),f=md5gg(f,l,c,p,e[n+14],9,-1019803690),p=md5gg(p,f,l,c,e[n+3],14,-187363961),c=md5gg(c,p,f,l,e[n+8],20,1163531501),l=md5gg(l,c,p,f,e[n+13],5,-1444681467),f=md5gg(f,l,c,p,e[n+2],9,-51403784),p=md5gg(p,f,l,c,e[n+7],14,1735328473),l=md5hh(l,c=md5gg(c,p,f,l,e[n+12],20,-1926607734),p,f,e[n+5],4,-378558),f=md5hh(f,l,c,p,e[n+8],11,-2022574463),p=md5hh(p,f,l,c,e[n+11],16,1839030562),c=md5hh(c,p,f,l,e[n+14],23,-35309556),l=md5hh(l,c,p,f,e[n+1],4,-1530992060),f=md5hh(f,l,c,p,e[n+4],11,1272893353),p=md5hh(p,f,l,c,e[n+7],16,-155497632),c=md5hh(c,p,f,l,e[n+10],23,-1094730640),l=md5hh(l,c,p,f,e[n+13],4,681279174),f=md5hh(f,l,c,p,e[n],11,-358537222),p=md5hh(p,f,l,c,e[n+3],16,-722521979),c=md5hh(c,p,f,l,e[n+6],23,76029189),l=md5hh(l,c,p,f,e[n+9],4,-640364487),f=md5hh(f,l,c,p,e[n+12],11,-421815835),p=md5hh(p,f,l,c,e[n+15],16,530742520),l=md5ii(l,c=md5hh(c,p,f,l,e[n+2],23,-995338651),p,f,e[n],6,-198630844),f=md5ii(f,l,c,p,e[n+7],10,1126891415),p=md5ii(p,f,l,c,e[n+14],15,-1416354905),c=md5ii(c,p,f,l,e[n+5],21,-57434055),l=md5ii(l,c,p,f,e[n+12],6,1700485571),f=md5ii(f,l,c,p,e[n+3],10,-1894986606),p=md5ii(p,f,l,c,e[n+10],15,-1051523),c=md5ii(c,p,f,l,e[n+1],21,-2054922799),l=md5ii(l,c,p,f,e[n+8],6,1873313359),f=md5ii(f,l,c,p,e[n+15],10,-30611744),p=md5ii(p,f,l,c,e[n+6],15,-1560198380),c=md5ii(c,p,f,l,e[n+13],21,1309151649),l=md5ii(l,c,p,f,e[n+4],6,-145523070),f=md5ii(f,l,c,p,e[n+11],10,-1120210379),p=md5ii(p,f,l,c,e[n+2],15,718787259),c=md5ii(c,p,f,l,e[n+9],21,-343485551),l=safeAdd(l,i),c=safeAdd(c,o),p=safeAdd(p,s),f=safeAdd(f,u);return[l,c,p,f]}function binl2rstr(e){var t,n="",i=32*e.length;for(t=0;t<i;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function rstr2binl(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;var i=8*e.length;for(t=0;t<i;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function rstr2hex(e){var t,n,i="0123456789abcdef",o="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),o+=i.charAt(t>>>4&15)+i.charAt(15&t);return o}function str2rstrUTF8(e){return unescape(encodeURIComponent(e))}function rawMD5(e){return function rstrMD5(e){return binl2rstr(binlMD5(rstr2binl(e),8*e.length))}(str2rstrUTF8(e))}function rawHMACMD5(e,t){return function rstrHMACMD5(e,t){var n,i,o=rstr2binl(e),s=[],u=[];for(s[15]=u[15]=void 0,o.length>16&&(o=binlMD5(o,8*e.length)),n=0;n<16;n+=1)s[n]=909522486^o[n],u[n]=1549556828^o[n];return i=binlMD5(s.concat(rstr2binl(t)),512+8*t.length),binl2rstr(binlMD5(u.concat(i),640))}(str2rstrUTF8(e),str2rstrUTF8(t))}function md5(e,t,n){return t?n?rawHMACMD5(t,e):function hexHMACMD5(e,t){return rstr2hex(rawHMACMD5(e,t))}(t,e):n?rawMD5(e):function hexMD5(e){return rstr2hex(rawMD5(e))}(e)}e.exports?e.exports=md5:t.md5=md5}(n)}({get exports(){return i},set exports(e){i=e}});var o,s,u,l,c,p,f,_,h,d,v,y,m,k,S,T,A,w,x,C,j,O,P,M,D,I,E,B,H,V,R,q,L,N,X,U,Y,z,G,J,W,$,K=i,Q=t,Z="52",ee={str:Symbol.for("ul4.str"),repr:Symbol.for("ul4.repr"),bool:Symbol.for("ul4.bool"),call:Symbol.for("ul4.call"),render:Symbol.for("ul4.render"),contains:Symbol.for("ul4.contains"),eq:Symbol.for("ul4.eq"),ne:Symbol.for("ul4.ne"),lt:Symbol.for("ul4.lt"),le:Symbol.for("ul4.le"),gt:Symbol.for("ul4.gt"),ge:Symbol.for("ul4.ge"),neg:Symbol.for("ul4.neg"),abs:Symbol.for("ul4.abs"),add:Symbol.for("ul4.add"),radd:Symbol.for("ul4.radd"),sub:Symbol.for("ul4.sub"),rsub:Symbol.for("ul4.rsub"),mul:Symbol.for("ul4.mul"),rmul:Symbol.for("ul4.rmul"),truediv:Symbol.for("ul4.truediv"),rtruediv:Symbol.for("ul4.rtruediv"),floordiv:Symbol.for("ul4.floordiv"),rfloordiv:Symbol.for("ul4.rfloordiv"),getattr:Symbol.for("ul4.getattr"),setattr:Symbol.for("ul4.setattr"),getitem:Symbol.for("ul4.getitem"),setitem:Symbol.for("ul4.setitem"),type:Symbol.for("ul4.type")};function expose(e,t,n){return(n=n||{}).name&&(e._ul4_name=n.name),"[object Array]"===Object.prototype.toString.call(t)&&(t=_construct(re,_toConsumableArray(t))),e._ul4_signature=t,e._ul4_needsobject=n.needsobject||!1,e._ul4_needscontext=n.needscontext||!1,e}var te=function(e,t,n,i){function Proto(){_classCallCheck(this,Proto)}return _createClass(Proto,[{key:e,value:function value(e){return this===e}},{key:t,value:function value(e){return!this[ee.eq](e)}},{key:n,value:function value(){return!0}},{key:i,value:function value(){return"<"+this.constructor.name+">"}},{key:"toString",value:function toString(){return this[ee.repr]()}}]),Proto}(ee.eq,ee.ne,ee.bool,ee.repr),re=function(e,t,n){_inherits(Signature,e);var i=_createSuper(Signature);function Signature(){var e;_classCallCheck(this,Signature),(e=i.call(this)).paramsByPos=[],e.paramsByName={},e.countpos=0,e.countposdef=0,e.countposkw=0,e.countposkwdef=0,e.countkw=0,e.countkwdef=0,e.varpos=null,e.varkw=null;for(var t=0,n=null,o=null,s=arguments.length,u=new Array(s),l=0;l<s;l++)u[l]=arguments[l];for(var c=0,p=u;c<p.length;c++){var f=p[c];0==t?(n=f,t=1):1==t?(o=f).endsWith("=")?t=2:(e.add(n,o,null),t=0):(e.add(n,o,f),t=0)}return e}return _createClass(Signature,[{key:"add",value:function add(e,t,n){var i=this.paramsByPos.length;null!==this.varpos&&++i,null!==this.varkw&&++i;var o={name:e,pos:i,type:t,defaultValue:n};switch(t){case"p":if(this.countposdef>0||this.countposkwdef>0||this.countkwdef>0)throw new Qe("parameter without default after parameter with default");if(this.countposkw>0||this.countposkwdef>0)throw new Qe("positional-only parameter after positional/keyword parameter");if(this.countkw>0||this.countkwdef>0)throw new Qe("positional-only parameter after keyword-only parameter");if(null!==this.varpos)throw new Qe("positional-only parameter after * parameter");if(null!==this.varkw)throw new Qe("positional-only parameter after ** parameter");this.paramsByPos.push(o),this.paramsByName[e]=o,++this.countpos;break;case"p=":if(this.countposkw>0||this.countposkwdef>0)throw new Qe("positional-only parameter after positional/keyword parameter");if(this.countkw>0||this.countkwdef>0)throw new Qe("positional-only parameter after keyword-only parameter");if(null!==this.varpos)throw new Qe("positional-only parameter after * parameter");if(null!==this.varkw)throw new Qe("positional-only parameter after ** parameter");this.paramsByPos.push(o),this.paramsByName[e]=o,++this.countposdef;break;case"pk":if(this.countposdef>0||this.countposkwdef>0||this.countkwdef>0)throw new Qe("parameter without default after parameter with default");if(this.countkw>0||this.countkwdef>0)throw new Qe("positional/keyword parameter after keyword-only parameter");if(null!==this.varpos)throw new Qe("positional/keyword parameter after * parameter");if(null!==this.varkw)throw new Qe("positional/keyword parameter after ** parameter");this.paramsByPos.push(o),this.paramsByName[e]=o,++this.countposkw;break;case"pk=":if(this.countkw>0||this.countkwdef>0)throw new Qe("positional/keyword parameter after keyword-only parameter");if(null!==this.varpos)throw new Qe("positional/keyword parameter after * parameter");if(null!==this.varkw)throw new Qe("positional/keyword parameter after ** parameter");this.paramsByPos.push(o),this.paramsByName[e]=o,++this.countposkwdef;break;case"k":if(this.countposdef>0||this.countposkwdef>0||this.countkwdef>0)throw new Qe("parameter without default after parameter with default");if(null!==this.varpos)throw new Qe("keyword-only parameter after * parameter");if(null!==this.varkw)throw new Qe("keyword-only parameter after ** parameter");this.paramsByPos.push(o),this.paramsByName[e]=o,++this.countkw;break;case"k=":if(null!==this.varpos)throw new Qe("keyword-only parameter after * parameter");if(null!==this.varkw)throw new Qe("keyword-only parameter after ** parameter");this.paramsByPos.push(o),this.paramsByName[e]=o,++this.countkwdef;break;case"*":if(null!==this.varpos)throw new Qe("* parameter specified twice!");if(null!==this.varkw)throw new Qe("* parameter can come after ** parameter!");this.varpos=o;break;case"**":if(null!==this.varkw)throw new Qe("** parameter specified twice!");this.varkw=o}}},{key:"bindArray",value:function bindArray(e,t,n){var i=null!=this.varpos?[]:null,o=null!=this.varkw?new Map:null,s=this.countpos+this.countposdef+this.countposkw+this.countposkwdef+this.countkw+this.countkwdef,u=Array(s).fill(null),l=Array(s).fill(!1);if(null!==t){var c,p=0,f=_createForOfIteratorHelper(t);try{for(f.s();!(c=f.n()).done;){var _=c.value,h=this.paramsByPos[p];if(void 0!==h&&h.type.indexOf("p")>=0)u[p]=_,l[p]=!0;else{if(null===i){var d=this.countpos+this.countposkw,v=this.countposdef+this.countposkwdef;throw new Ke(0==v?e+"() takes exactly "+d+" positional argument"+(1!=d?"s":"")+", "+t.length+" given":e+"() takes at most "+(d+v)+" positional argument"+(d+v!=1?"s":"")+", "+t.length+" given")}i.push(_)}++p}}catch(e){f.e(e)}finally{f.f()}}if(null!==n)for(var y=0,m=Object.entries(n);y<m.length;y++){var k=_slicedToArray(m[y],2),S=k[0],T=k[1],A=this.paramsByName[S];if(void 0!==A&&A.type.indexOf("k")>=0){if(l[A.pos])throw new Ke("Duplicate keyword argument "+_repr2(S)+" for "+e+"()");u[A.pos]=T,l[A.pos]=!0}else{if(null===o)throw new Ke(e+"() doesn't support an argument named "+_repr2(S));if(o.has(S))throw new Ke("Duplicate keyword argument "+_repr2(S)+" for "+e+"()");o.set(S,T)}}var w,x=0,C=_createForOfIteratorHelper(this.paramsByPos);try{for(C.s();!(w=C.n()).done;){var j=w.value;if(!l[x]){if(!j.type.endsWith("="))throw new Ke("Required "+e+"() argument "+j.name+" (position "+j.pos+") missing");u[x]=j.defaultValue,l[x]=!0}++x}}catch(e){C.e(e)}finally{C.f()}return null!==i&&u.push(i),null!==o&&u.push(o),u}},{key:"bindObject",value:function bindObject(e,t,n){t=this.bindArray(e,t,n);var i,o={},s=0,u=_createForOfIteratorHelper(this.paramsByPos);try{for(u.s();!(i=u.n()).done;){o[i.value.name]=t[s++]}}catch(e){u.e(e)}finally{u.f()}return null!==this.varpos&&(o[this.varpos.name]=t[s++]),null!==this.varkw&&(o[this.varkw.name]=t[s++]),o}},{key:t,value:function value(){return"<Signature "+this.toString()+">"}},{key:n,value:function value(){return this.toString()}},{key:"_appendParam",value:function _appendParam(e,t,n){var i;i=null===t?["k","k="].includes(n.type)?"*, ":"":["pk","pk="].includes(t)?["k","k="].includes(n.type)?", *, ":", ":["p","p="].includes(t)?["pk","pk="].includes(n.type)?", /, ":["k","k="].includes(n.type)?", /, *, ":", ":", ",t=n.type,e.push(i),["*","**"].includes(n.type)&&e.push(n.type),e.push(n.name),n.type.endsWith("=")&&e.push("=",_repr2(n.defaultValue))}},{key:"toString",value:function toString(){var e,t=[],n=null,i=_createForOfIteratorHelper(this.paramsByPos);try{for(i.s();!(e=i.n()).done;){var o=e.value;this._appendParam(t,n,o),n=o.type}}catch(e){i.e(e)}finally{i.f()}return null!==this.varpos&&(this._appendParam(t,n,this.varpos),n=this.varpos.type),null!==this.varkw&&(this._appendParam(t,n,this.varkw),n=this.varkw.type),"("+t.join("")+")"}}]),Signature}(te,ee.repr,ee.str),ne=function(e,t){function Type(e,t,n){_classCallCheck(this,Type),this.module=e,this.name=t,this.doc=n,this._constructor=constructor}return _createClass(Type,[{key:e,value:function value(e){switch(e){case"__module__":return this.module;case"__name__":return this.name;case"__doc__":return this.doc;default:throw new rt(this,e)}}},{key:t,value:function value(){return this.toString()}},{key:"toString",value:function toString(){return"<type "+this.fullname()+">"}},{key:"fullname",value:function fullname(){return null===this.module?this.name:this.module+"."+this.name}},{key:"dir",value:function dir(){return this.attrs}},{key:"getattr",value:function getattr(e,t){if(null!==e&&"object"===_typeof(e)&&"function"==typeof e[ee.getattr])return e[ee.getattr](t);if(this.attrs.has(t)){var n=this[t],i=function realattr(){for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return n.apply(this,[e].concat(i))};return i._ul4_name=n._ul4_name||n.name,i._ul4_signature=n._ul4_signature,i._ul4_needsobject=n._ul4_needsobject,i._ul4_needscontext=n._ul4_needscontext,i}throw new rt(e,t)}},{key:"hasattr",value:function hasattr(e,t){if(null===e||"object"!==_typeof(e)||"function"!=typeof e[ee.getattr])return this.attrs.has(t);try{return e[ee.getattr](t),!0}catch(e){if(e instanceof rt&&e.obj===object)return!1;throw e}}}]),Type}(ee.getattr,ee.repr);ne.prototype.attrs=new Set;var ae={};function register(e,t){t.prototype.ul4onname=e,ae[e]=t}function dumps(e){var t=[];return new se(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null).dump(e,t),t.join("")}function _loads2(e){return new ce(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null).loads(e)}var ie=function(e,t){_inherits(EncoderType,e);var n=_createSuper(EncoderType);function EncoderType(){return _classCallCheck(this,EncoderType),n.apply(this,arguments)}return _createClass(EncoderType,[{key:t,value:function value(){return new se(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)}},{key:"instancecheck",value:function instancecheck(e){return e instanceof se}}]),EncoderType}(ne,ee.call);expose(ie.prototype,["indent","pk=",null],{name:"Encoder"});var oe=new ie("ul4on","Encoder","An UL4ON encoder"),se=function(e,t){function Encoder(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;_classCallCheck(this,Encoder),this.indent=e,this.output=null,this._level=0,this._strings2index={},this._objects2index=new Map,this._backrefs=0}return _createClass(Encoder,[{key:e,value:function value(){return oe}},{key:"_line",value:function _line(e){if(null!==this.indent)for(var t=0;t<this._level;++t)this.output.push(this.indent);else this.output.length&&this.output.push(" ");this.output.push(e);for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];if(i.length){var s=this.indent;this.indent=null;var u,l=_createForOfIteratorHelper(i);try{for(l.s();!(u=l.n()).done;){var c=u.value;this.dump(c)}}catch(e){l.e(e)}finally{l.f()}this.indent=s}null!==this.indent&&this.output.push("\n")}},{key:"dumps",value:function dumps(e){var t=[];return this.dump(e,t),t.join("")}},{key:"dump",value:function dump(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null!==t&&(this._level=0,this.output=t),null===e)this._line("n");else if("boolean"==typeof e)this._line(e?"bT":"bF");else if("number"==typeof e){var n=Math.round(e)==e?"i":"f";this._line(n+e)}else if("string"==typeof e){var i=this._strings2index[e];if(void 0!==i)this._line("^"+i);else{this._strings2index[e]=this._backrefs++;var dump=_str_repr(e).replace("<","\\x3c");this._line("S"+dump)}}else if(_iscolor(e))this._line("c",e.r(),e.g(),e.b(),e.a());else if(_isdate(e))this._line("x",e.year(),e.month(),e.day());else if(_isdatetime(e))this._line("z",e.getFullYear(),e.getMonth()+1,e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),1e3*e.getMilliseconds());else if(_istimedelta(e))this._line("t",e.days(),e.seconds(),e.microseconds());else if(_ismonthdelta(e))this._line("m",e.months());else if(e instanceof mr)this._line("r",e.start,e.stop);else if(e.ul4onname&&e.ul4ondump){var o=this._objects2index.get(e);if(void 0!==o)return void this._line("^"+o);this._objects2index.set(e,this._backrefs++),e.ul4onid?this._line("P",e.ul4onname,e.ul4onid):this._line("O",e.ul4onname),++this._level,e.ul4ondump(this),--this._level,this._line(")")}else if(_islist(e)){this._line("l"),++this._level;var s,u=_createForOfIteratorHelper(e);try{for(u.s();!(s=u.n()).done;){var l=s.value;this.dump(l)}}catch(e){u.e(e)}finally{u.f()}--this._level,this._line("]")}else if(_ismap(e)){this._line("e"),++this._level;var c,p=_createForOfIteratorHelper(e);try{for(p.s();!(c=p.n()).done;){var f=_slicedToArray(c.value,2),_=f[0],h=f[1];this.dump(_),this.dump(h)}}catch(e){p.e(e)}finally{p.f()}--this._level,this._line("}")}else if(_isdict(e)){for(var d in this._line("d"),++this._level,e)this.dump(d),this.dump(e[d]);--this._level,this._line("}")}else{if(!_isset(e))throw new $e("can't create UL4ON dump of object "+_repr2(e));this._line("y"),++this._level;var v,y=_createForOfIteratorHelper(e);try{for(y.s();!(v=y.n()).done;){var m=v.value;this.dump(m)}}catch(e){y.e(e)}finally{y.f()}--this._level,this._line("}")}null!==t&&(this.output=null)}},{key:t,value:function value(e){if("dumps"===e){var t=this.dumps.bind(this);return expose(t,["obj","pk"]),t}throw new ul4.AttributeError(this,e)}}]),Encoder}(ee.type,ee.getattr),ue=function(e,t){_inherits(DecoderType,e);var n=_createSuper(DecoderType);function DecoderType(){return _classCallCheck(this,DecoderType),n.apply(this,arguments)}return _createClass(DecoderType,[{key:t,value:function value(){return new ce}},{key:"instancecheck",value:function instancecheck(e){return e instanceof ce}}]),DecoderType}(ne,ee.call);expose(ue.prototype,[],{name:"Decoder"});var le=new ue("ul4on","Decoder","An UL4ON decoder"),ce=function(e,t){function Decoder(e){_classCallCheck(this,Decoder),this.input=null,this.pos=0,this.backrefs=[],this.registry=void 0===e?null:e,this.persistent_objects={},this.stack=null}return _createClass(Decoder,[{key:e,value:function value(){return le}},{key:"readchar",value:function readchar(){if(this.pos>=this.input.length)throw new $e("UL4 decoder at EOF");return this.input.charAt(this.pos++)}},{key:"readcharoreof",value:function readcharoreof(){return this.pos>=this.input.length?null:this.input.charAt(this.pos++)}},{key:"readblackchar",value:function readblackchar(){for(var e=/\s/;;){if(this.pos>=this.input.length)throw new $e("UL4 decoder at EOF at position "+this.pos+" with path "+this.stack.join("/"));var t=this.input.charAt(this.pos++);if(!t.match(e))return t}}},{key:"read",value:function read(e){this.pos+e>this.input.length&&(e=this.input.length-this.pos);var t=this.input.substring(this.pos,this.pos+e);return this.pos+=e,t}},{key:"backup",value:function backup(){--this.pos}},{key:"readnumber",value:function readnumber(){for(var e=/[-+0123456789.eE]/,t="";;){var n=this.readcharoreof();if(null===n||!n.match(e)){var i=parseFloat(t);if(isNaN(i))throw new $e("invalid number, got "+_repr2("value")+" at position "+this.pos+" with path "+this.stack.join("/"));return i}t+=n}}},{key:"_beginfakeloading",value:function _beginfakeloading(){var e=this.backrefs.length;return this.backrefs.push(null),e}},{key:"_endfakeloading",value:function _endfakeloading(e,t){this.backrefs[e]=t}},{key:"_readescape",value:function _readescape(e,t){var n=this.read(t);if(n.length!=t)throw new $e("broken escape "+_repr2("\\"+e+n)+" at position "+this.pos+" with path "+this.stack.join("/"));var i=parseInt(n,16);if(isNaN(i))throw new $e("broken escape "+_repr2("\\"+e+n)+" at position "+this.pos+" with path "+this.stack.join("/"));return String.fromCharCode(i)}},{key:"reset",value:function reset(){this.pos=0,this.stack=[],this.backrefs=[]}},{key:"loads",value:function loads(e){return this.load(e)}},{key:"load",value:function load(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null!==e&&(this.input=e,this.pos=0,this.stack=[]);var t,n=this.readblackchar();switch(n){case"^":return this.backrefs[this.readnumber()];case"n":case"N":"N"===n&&this.backrefs.push(null),t=null;break;case"b":case"B":if("T"===(t=this.readchar()))t=!0;else{if("F"!==t)throw new $e("wrong value for boolean, expected 'T' or 'F', got "+_repr2(t)+" at position "+this.pos+" with path "+this.stack.join("/"));t=!1}"B"===n&&this.backrefs.push(t);break;case"i":case"I":case"f":case"F":t=this.readnumber(),"I"!==n&&"F"!==n||this.backrefs.push(t);break;case"s":case"S":t=[];for(var i=this.readblackchar();;){var o=this.readchar();if(o==i)break;if("\\"==o){var s=this.readchar();"\\"==s?t.push("\\"):"n"==s?t.push("\n"):"r"==s?t.push("\r"):"t"==s?t.push("\t"):"f"==s?t.push("\f"):"b"==s?t.push("\b"):"a"==s?t.push(""):"'"==s?t.push("'"):'"'==s?t.push('"'):"x"==s?t.push(this._readescape("x",2)):"u"==s?t.push(this._readescape("u",4)):"U"==s?t.push(this._readescape("U",8)):t.push("\\"+s)}else t.push(o)}t=t.join(""),"S"===n&&this.backrefs.push(t);break;case"c":case"C":t=new Zr,"C"===n&&this.backrefs.push(t),t._r=this.load(),t._g=this.load(),t._b=this.load(),t._a=this.load();break;case"x":case"X":var u=this.load(),l=this.load(),c=this.load();t=new en(u,l,c),"X"===n&&this.backrefs.push(t);break;case"z":case"Z":(t=new Date).setFullYear(this.load()),t.setDate(1),t.setMonth(this.load()-1),t.setDate(this.load()),t.setHours(this.load()),t.setMinutes(this.load()),t.setSeconds(this.load()),t.setMilliseconds(this.load()/1e3),"Z"===n&&this.backrefs.push(t);break;case"t":case"T":(t=new nn)._days=this.load(),t._seconds=this.load(),t._microseconds=this.load(),"T"===n&&this.backrefs.push(t);break;case"r":case"R":t=new mr,"R"===n&&this.backrefs.push(t),t.start=this.load(),t.stop=this.load();break;case"m":case"M":t=new sn,"M"===n&&this.backrefs.push(t),t._months=this.load();break;case"l":case"L":for(this.stack.push("list"),t=[],"L"===n&&this.backrefs.push(t);"]"!==(n=this.readblackchar());)this.backup(),t.push(this.load());this.stack.pop();break;case"d":case"D":case"e":case"E":for(t=new Map,this.stack.push("d"===n||"D"===n?"dict":"odict"),"D"!==n&&"E"!==n||this.backrefs.push(t);"}"!==(n=this.readblackchar());){this.backup();var p=this.load(),f=this.load();t.set(p,f)}this.stack.pop();break;case"y":case"Y":for(this.stack.push("set"),t=new Set,"Y"===n&&this.backrefs.push(t);"}"!==(n=this.readblackchar());)this.backup(),t.add(this.load());this.stack.pop();break;case"o":case"O":var _;"O"===n&&(_=this._beginfakeloading());var h,d=this.load();if(this.stack.push(d),null!==this.registry?void 0===(h=this.registry[d])&&(h=ae[d]):h=ae[d],void 0===h)throw new $e("can't load object of type "+_repr2(d)+" at position "+this.pos+" with path "+this.stack.join("/"));if(t=new h,"O"===n&&this._endfakeloading(_,t),t.ul4onload(this),")"!==(n=this.readblackchar()))throw new $e("object terminator ')' for object of type '"+d+"' expected, got "+_repr2(n)+" at position "+this.pos+" with path "+this.stack.join("/"));this.stack.pop();break;case"p":case"P":var v;"P"===n&&(v=this._beginfakeloading());var y=this.load(),m=this.load();this.stack.push(y);var k=y+"="+m;if(void 0===(t=this.persistent_objects[k])){var S;if(null!==this.registry?void 0===(S=this.registry[y])&&(S=ae[y]):S=ae[y],void 0===S)throw new $e("can't load object of type "+_repr2(y)+" with id "+_repr2(m)+" at position "+this.pos+" with path "+this.stack.join("/"));t=new S(m),this.persistent_objects[k]=t}if("P"===n&&this._endfakeloading(v,t),t.ul4onload(this),")"!==(n=this.readblackchar()))throw new $e("object terminator ')' for object of type "+_repr2(y)+" with id "+_repr2(m)+" expected, got "+_repr2(n)+" at position "+this.pos+" with path "+this.stack.join("/"));this.stack.pop();break;default:throw new $e("unknown typecode "+_repr2(n)+" at position "+this.pos+" with path "+this.stack.join("/"))}return null!==e&&(this.input=null,this.pos=0,this.stack=null),t}},{key:"loadcontent",value:function loadcontent(){var e=this;return{next:function next(){var t=e.readblackchar();return e.backup(),")"==t?{done:!0}:{done:!1,value:e.load()}}}}},{key:t,value:function value(e){if("loads"===e){var t=this.loads.bind(this);return expose(t,["dump","p"]),t}throw new ul4.AttributeError(this,e)}}]),Decoder}(ee.type,ee.getattr),pe=/^[\],:{}\s]*$/,fe=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,_e=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,he=/(?:^|:|,)(?:\s*\[)+/g;function _bound(e,t){return e<0?0:e>t?t:e}function _internal_call(e,t,n,i,o,s,u,l,c){var p;if(u)if(null===o){if(l.length)throw new Ke(_repr2(t)+" doesn't support positional arguments!");p=[c]}else p=[o.bindObject(n,l,c)];else{if(null===o)throw new Ke(_repr2(t)+" doesn't support positional arguments!");p=o.bindArray(n,l,c)}return s&&p.unshift(e),t.apply(i,p)}function _function_is_callable(e){return!(!e||void 0===e._ul4_signature||void 0===e._ul4_needsobject||void 0===e._ul4_needscontext)}function _object_is_callable(e){return!(!_function_is_callable(e)||"function"!=typeof e[ee.call])}function _object_is_renderable(e){return!(!_function_is_callable(e)||"function"!=typeof e[ee.render])}function _callfunction(e,t,n,i){if(!_function_is_callable(t))throw new We(_repr2(t)+" is not callable by UL4");return _internal_call(e,t,t._ul4_name||t.name,null,t._ul4_signature,t._ul4_needscontext,t._ul4_needsobject,n,i)}function _callobject(e,t,n,i){if(!_object_is_callable(t))throw new We(_repr2(t)+" is not callable by UL4");return _internal_call(e,t[ee.call],t.name,t,t._ul4_signature,t._ul4_needscontext,t._ul4_needsobject,n,i)}function _callrender(e,t,n,i){if(!_object_is_renderable(t))throw new We(_repr2(t)+" is not renderable by UL4");return _internal_call(e,t[ee.render],t.name,t,t._ul4_signature,t._ul4_needscontext,t._ul4_needsobject,n,i)}function _call(e,t,n,i){if("function"==typeof t)return _callfunction(e,t,n,i);if(t&&"function"==typeof t[ee.call])return _callobject(e,t,n,i);throw new We(_type(t).fullname()+" is not callable")}function _unpackvar(e,t){if(_islist(e)){for(var n=[],i=_iter(t),o=0;;++o){var s=i.next();if(s.done){if(o===e.length)break;throw new $e("need "+e.length+" value"+(1===e.length?"":"s")+" to unpack, got "+o)}if(!(o<e.length))throw new $e("too many values to unpack (expected "+e.length+")");n=n.concat(_unpackvar(e[o],s.value))}return n}return[[e,t]]}function _formatsource(e){var t,n=[],i=0,o=!1,s=_createForOfIteratorHelper(e);try{for(s.s();!(t=s.n()).done;){var u=t.value;if("number"==typeof u)i+=u,o=!0;else{if(o){n.push("\n");for(var l=0;l<i;++l)n.push("\t");o=!1}n.push(u)}}}catch(e){s.e(e)}finally{s.f()}return o&&n.push("\n"),n.join("")}function _sourceprefix(e,t){for(var n=t,i=n,o=40,s="…";o>0;){if(0===n){s="";break}if("\n"===e.charAt(n-1)){s="";break}--o,--n}return s+e.substring(n,i)}function _sourcesuffix(e,t){for(var n=t,i=n,o=40,s="…";o>0;){if(n>=e.length){s="";break}if("\n"===e.charAt(n)){s="";break}--o,++n}return e.substring(i,n)+s}function _lineColFromPos(e,t){for(var n=1,i=1,o=t,s=0;s<o;++s)"\n"===e[s]?(++n,i=1):++i;return[n,i]}function _eq(e,t){var n=["boolean","number"];if(e&&"function"==typeof e[ee.eq])return e[ee.eq](t);if(t&&"function"==typeof t[ee.eq])return t[ee.eq](e);if(null===e)return null===t;if(-1!=n.indexOf(_typeof(e)))return-1!=n.indexOf(_typeof(t))&&e==t;if("string"==typeof e)return"string"==typeof t&&e==t;if(_isdatetime(e))return!!_isdatetime(t)&&e.getTime()==t.getTime();if(_islist(e)){if(_islist(t)){if(e===t)return!0;if(e.length!=t.length)return!1;for(var i=0;i<e.length;++i)if(!_eq(e[i],t[i]))return!1;return!0}return!1}if(_isobject(e)){if(_isobject(t)){if(e===t)return!0;for(var o in e){if(!t.hasOwnProperty(o))return!1;if(!_eq(e[o],t[o]))return!1}for(var s in t)if(!e.hasOwnProperty(s))return!1;return!0}if(_ismap(t)){for(var u in e){if(!t.has(u))return!1;if(!_eq(e[u],t.get(u)))return!1}var l,c=_createForOfIteratorHelper(t);try{for(c.s();!(l=c.n()).done;){var p=_slicedToArray(l.value,2);p[0],p[1];if(!e.hasOwnProperty(key))return!1}}catch(e){c.e(e)}finally{c.f()}return!0}return!1}if(_ismap(e)){if(_isobject(t)){var f,_=_createForOfIteratorHelper(e);try{for(_.s();!(f=_.n()).done;){var h=_slicedToArray(f.value,2),d=h[0];h[1];if(!t.hasOwnProperty(d))return!1;if(!_eq(e.get(d),t[d]))return!1}}catch(e){_.e(e)}finally{_.f()}for(var v in t)if(!e.has(v))return!1;return!0}if(_ismap(t)){if(e===t)return!0;if(e.size!=t.size)return!1;var y,m=!0,k=_createForOfIteratorHelper(e);try{for(k.s();!(y=k.n()).done;){var S=_slicedToArray(y.value,2),T=S[0];S[1];t.has(T)&&_eq(e.get(T),t.get(T))||(m=!1)}}catch(e){k.e(e)}finally{k.f()}return m}return!1}if(_isset(e)){if(_isset(t)){if(e===t)return!0;if(e.size!=t.size)return!1;var A,w=!0,x=_createForOfIteratorHelper(e);try{for(x.s();!(A=x.n()).done;){var C=A.value;t.has(C)||(w=!1)}}catch(e){x.e(e)}finally{x.f()}return w}return!1}return e===t}function _ne(e,t){return e&&"function"==typeof e[ee.ne]?e[ee.ne](t):t&&"function"==typeof t[ee.ne]?t[ee.ne](e):!_eq(e,t)}function _unorderable(e,t,n){throw new We("unorderable types: "+_type(t).fullname()+" "+e+" "+_type(n).fullname())}function _cmp(e,t,n){var i=["boolean","number"];if(-1!=i.indexOf(_typeof(t))){if(-1!=i.indexOf(_typeof(n)))return(t>n)-(t<n)}else if("string"==typeof t){if("string"==typeof n)return(t>n)-(t<n)}else if(_isdatetime(t)){if(_isdatetime(n)){var o=t.getTime(),s=n.getTime();return(o>s)-(o<s)}}else if(_islist(t)){if(_islist(n)){if(t===n)return 0;for(var u=0;u<t.length;++u){if(u>=n.length)return 1;var l=_cmp(e,t[u],n[u]);if(l)return l}return n.length>t.length?-1:0}}else if(_isset(t)&&_isset(n)){for(var c=!1,p=!1,f=_iter(t);;){var _=f.next();if(_.done)break;if(!n.has(_.value)){c=!0;break}}for(var h=_iter(n);;){var d=h.next();if(d.done)break;if(!t.has(d.value)){p=!0;break}}return c?p?null:1:p?-1:0}return _unorderable(e,t,n)}function _lt(e,t){var n=["boolean","number"];if(e&&"function"==typeof e[ee.lt])return e[ee.lt](t);if(-1!=n.indexOf(_typeof(e))){if(-1!=n.indexOf(_typeof(t)))return e<t}else if("string"==typeof e){if("string"==typeof t)return e<t}else if(_isdatetime(e)){if(_isdatetime(t))return e.getTime()<t.getTime()}else if(_islist(e)){if(_islist(t)){if(e===t)return!1;for(var i=0;i<e.length;++i){if(i>=t.length)return!1;if(!_eq(e[i],t[i]))return _lt(e[i],t[i])}return e.length<t.length}}else if(_isset(e)){if(_isset(t)){for(var o in e)t.has(e[o])||(in1only=!0);for(var s in t)e.has(t[s])||(in2only=!0)}else _unorderable(operator,e,t);return in1only?in2only?null:1:in2only?-1:0}_unorderable("<",e,t)}function _le(e,t){var n=["boolean","number"];if(e&&"function"==typeof e[ee.le])return e[ee.le](t);if(-1!=n.indexOf(_typeof(e))){if(-1!=n.indexOf(_typeof(t)))return e<=t}else if("string"==typeof e){if("string"==typeof t)return e<=t}else if(_isdatetime(e)){if(_isdatetime(t))return e.getTime()<=t.getTime()}else if(_islist(e)){if(_islist(t)){if(e===t)return!0;for(var i=0;i<e.length;++i){if(i>=t.length)return!1;if(!_eq(e[i],t[i]))return _lt(e[i],t[i])}return e.length<=t.length}}else if(_isset(e)){var o=!1,s=!1;if(_isset(t))if(_isset(t)){var u,l=_createForOfIteratorHelper(e);try{for(l.s();!(u=l.n()).done;){var c=u.value;t.has(c)||(o=!0)}}catch(e){l.e(e)}finally{l.f()}var p,f=_createForOfIteratorHelper(t);try{for(f.s();!(p=f.n()).done;){var _=p.value;e.has(_)||(s=!0)}}catch(e){f.e(e)}finally{f.f()}}else _unorderable(operator,e,t);else _unorderable(operator,e,t);return o?s?null:1:s?-1:0}_unorderable("<=",e,t)}function _gt(e,t){var n=["boolean","number"];if(e&&"function"==typeof e[ee.gt])return e[ee.gt](t);if(-1!=n.indexOf(_typeof(e))){if(-1!=n.indexOf(_typeof(t)))return e>t}else if("string"==typeof e){if("string"==typeof t)return e>t}else if(_isdatetime(e)){if(_isdatetime(t))return e.getTime()>t.getTime()}else if(_islist(e)){if(_islist(t)){if(e===t)return!1;for(var i=0;i<e.length;++i){if(i>=t.length)return!0;if(!_eq(e[i],t[i]))return _gt(e[i],t[i])}return e.length>t.length}}else if(_isset(e)){var o=!1,s=!1;if(_isset(t))if(_isset(t)){var u,l=_createForOfIteratorHelper(e);try{for(l.s();!(u=l.n()).done;){var c=u.value;t.has(c)||(o=!0)}}catch(e){l.e(e)}finally{l.f()}var p,f=_createForOfIteratorHelper(t);try{for(f.s();!(p=f.n()).done;){var _=p.value;e.has(_)||(s=!0)}}catch(e){f.e(e)}finally{f.f()}}else _unorderable(operator,e,t);else _unorderable(operator,e,t);return o?s?null:1:s?-1:0}_unorderable(">",e,t)}function _ge(e,t){var n=["boolean","number"];if(e&&"function"==typeof e[ee.ge])return e[ee.ge](t);if(-1!=n.indexOf(_typeof(e))){if(-1!=n.indexOf(_typeof(t)))return e>=t}else if("string"==typeof e){if("string"==typeof t)return e>=t}else if(_isdatetime(e)){if(_isdatetime(t))return e.getTime()>=t.getTime()}else if(_islist(e)){if(_islist(t)){if(e===t)return!0;for(var i=0;i<e.length;++i){if(i>=t.length)return!0;if(!_eq(e[i],t[i]))return _gt(e[i],t[i])}return e.length>=t.length}}else if(_isset(e)){var o=!1,s=!1;if(_isset(t))if(_isset(t)){var u,l=_createForOfIteratorHelper(e);try{for(l.s();!(u=l.n()).done;){var c=u.value;t.has(c)||(o=!0)}}catch(e){l.e(e)}finally{l.f()}var p,f=_createForOfIteratorHelper(t);try{for(f.s();!(p=f.n()).done;){var _=p.value;e.has(_)||(s=!0)}}catch(e){f.e(e)}finally{f.f()}}else _unorderable(operator,e,t);else _unorderable(operator,e,t);return o?s?null:1:s?-1:0}_unorderable(">=",e,t)}function _iter(e){if("string"==typeof e||_islist(e))return{index:0,next:function next(){return this.index<e.length?{value:e[this.index++],done:!1}:{done:!0}}};if(_isiter(e))return e;if(_ismap(e)){var t,n=[],i=_createForOfIteratorHelper(e);try{for(i.s();!(t=i.n()).done;){var o=_slicedToArray(t.value,2),s=o[0];o[1];n.push(s)}}catch(e){i.e(e)}finally{i.f()}return{index:0,next:function next(){return this.index>=n.length?{done:!0}:{value:n[this.index++],done:!1}}}}if(_isset(e)){var u,l=[],c=_createForOfIteratorHelper(e);try{for(c.s();!(u=c.n()).done;){var p=u.value;l.push(p)}}catch(e){c.e(e)}finally{c.f()}return{index:0,next:function next(){return this.index>=l.length?{done:!0}:{value:l[this.index++],done:!1}}}}if(_isobject(e)){var f=[];for(var _ in e)f.push(_);return{index:0,next:function next(){return this.index>=f.length?{done:!0}:{value:f[this.index++],done:!1}}}}if(null!==e&&"function"==typeof e[Symbol.iterator])return e[Symbol.iterator]();throw new We(_type(e).fullname()+" object is not iterable")}function _str_repr(e,t){var n,i="",o=!1,s=!1,u=_createForOfIteratorHelper(e);try{for(u.s();!(n=u.n()).done;){var l=n.value;if('"'==l){if(s=!0,o)break}else if("'"==l&&(o=!0,s))break}}catch(e){u.e(e)}finally{u.f()}var c,p=o&&!s?'"':"'",f=_createForOfIteratorHelper(e);try{for(f.s();!(c=f.n()).done;){var _=c.value;switch(_){case'"':i+=p==_?'\\"':_;break;case"'":i+=p==_?"\\'":_;break;case"\\":i+="\\\\";break;case"\t":i+="\\t";break;case"\n":i+="\\n";break;case"\r":i+="\\r";break;default:var h=_.charCodeAt(0),d=void 0;i+=0===(d=h<32?2:h<127?0:t||/[\u007f-\u00a0\u00ad\u0378-\u0379\u0380-\u0383\u038b\u038d\u03a2\u0530\u0557-\u0558\u0560\u0588\u058b-\u058c\u0590\u05c8-\u05cf\u05eb-\u05ef\u05f5-\u0605\u061c-\u061d\u06dd\u070e-\u070f\u074b-\u074c\u07b2-\u07bf\u07fb-\u07ff\u082e-\u082f\u083f\u085c-\u085d\u085f-\u089f\u08b5-\u08e2\u0984\u098d-\u098e\u0991-\u0992\u09a9\u09b1\u09b3-\u09b5\u09ba-\u09bb\u09c5-\u09c6\u09c9-\u09ca\u09cf-\u09d6\u09d8-\u09db\u09de\u09e4-\u09e5\u09fc-\u0a00\u0a04\u0a0b-\u0a0e\u0a11-\u0a12\u0a29\u0a31\u0a34\u0a37\u0a3a-\u0a3b\u0a3d\u0a43-\u0a46\u0a49-\u0a4a\u0a4e-\u0a50\u0a52-\u0a58\u0a5d\u0a5f-\u0a65\u0a76-\u0a80\u0a84\u0a8e\u0a92\u0aa9\u0ab1\u0ab4\u0aba-\u0abb\u0ac6\u0aca\u0ace-\u0acf\u0ad1-\u0adf\u0ae4-\u0ae5\u0af2-\u0af8\u0afa-\u0b00\u0b04\u0b0d-\u0b0e\u0b11-\u0b12\u0b29\u0b31\u0b34\u0b3a-\u0b3b\u0b45-\u0b46\u0b49-\u0b4a\u0b4e-\u0b55\u0b58-\u0b5b\u0b5e\u0b64-\u0b65\u0b78-\u0b81\u0b84\u0b8b-\u0b8d\u0b91\u0b96-\u0b98\u0b9b\u0b9d\u0ba0-\u0ba2\u0ba5-\u0ba7\u0bab-\u0bad\u0bba-\u0bbd\u0bc3-\u0bc5\u0bc9\u0bce-\u0bcf\u0bd1-\u0bd6\u0bd8-\u0be5\u0bfb-\u0bff\u0c04\u0c0d\u0c11\u0c29\u0c3a-\u0c3c\u0c45\u0c49\u0c4e-\u0c54\u0c57\u0c5b-\u0c5f\u0c64-\u0c65\u0c70-\u0c77\u0c80\u0c84\u0c8d\u0c91\u0ca9\u0cb4\u0cba-\u0cbb\u0cc5\u0cc9\u0cce-\u0cd4\u0cd7-\u0cdd\u0cdf\u0ce4-\u0ce5\u0cf0\u0cf3-\u0d00\u0d04\u0d0d\u0d11\u0d3b-\u0d3c\u0d45\u0d49\u0d4f-\u0d56\u0d58-\u0d5e\u0d64-\u0d65\u0d76-\u0d78\u0d80-\u0d81\u0d84\u0d97-\u0d99\u0db2\u0dbc\u0dbe-\u0dbf\u0dc7-\u0dc9\u0dcb-\u0dce\u0dd5\u0dd7\u0de0-\u0de5\u0df0-\u0df1\u0df5-\u0e00\u0e3b-\u0e3e\u0e5c-\u0e80\u0e83\u0e85-\u0e86\u0e89\u0e8b-\u0e8c\u0e8e-\u0e93\u0e98\u0ea0\u0ea4\u0ea6\u0ea8-\u0ea9\u0eac\u0eba\u0ebe-\u0ebf\u0ec5\u0ec7\u0ece-\u0ecf\u0eda-\u0edb\u0ee0-\u0eff\u0f48\u0f6d-\u0f70\u0f98\u0fbd\u0fcd\u0fdb-\u0fff\u10c6\u10c8-\u10cc\u10ce-\u10cf\u1249\u124e-\u124f\u1257\u1259\u125e-\u125f\u1289\u128e-\u128f\u12b1\u12b6-\u12b7\u12bf\u12c1\u12c6-\u12c7\u12d7\u1311\u1316-\u1317\u135b-\u135c\u137d-\u137f\u139a-\u139f\u13f6-\u13f7\u13fe-\u13ff\u1680\u169d-\u169f\u16f9-\u16ff\u170d\u1715-\u171f\u1737-\u173f\u1754-\u175f\u176d\u1771\u1774-\u177f\u17de-\u17df\u17ea-\u17ef\u17fa-\u17ff\u180e-\u180f\u181a-\u181f\u1878-\u187f\u18ab-\u18af\u18f6-\u18ff\u191f\u192c-\u192f\u193c-\u193f\u1941-\u1943\u196e-\u196f\u1975-\u197f\u19ac-\u19af\u19ca-\u19cf\u19db-\u19dd\u1a1c-\u1a1d\u1a5f\u1a7d-\u1a7e\u1a8a-\u1a8f\u1a9a-\u1a9f\u1aae-\u1aaf\u1abf-\u1aff\u1b4c-\u1b4f\u1b7d-\u1b7f\u1bf4-\u1bfb\u1c38-\u1c3a\u1c4a-\u1c4c\u1c80-\u1cbf\u1cc8-\u1ccf\u1cf7\u1cfa-\u1cff\u1df6-\u1dfb\u1f16-\u1f17\u1f1e-\u1f1f\u1f46-\u1f47\u1f4e-\u1f4f\u1f58\u1f5a\u1f5c\u1f5e\u1f7e-\u1f7f\u1fb5\u1fc5\u1fd4-\u1fd5\u1fdc\u1ff0-\u1ff1\u1ff5\u1fff-\u200f\u2028-\u202f\u205f-\u206f\u2072-\u2073\u208f\u209d-\u209f\u20bf-\u20cf\u20f1-\u20ff\u218c-\u218f\u23fb-\u23ff\u2427-\u243f\u244b-\u245f\u2b74-\u2b75\u2b96-\u2b97\u2bba-\u2bbc\u2bc9\u2bd2-\u2beb\u2bf0-\u2bff\u2c2f\u2c5f\u2cf4-\u2cf8\u2d26\u2d28-\u2d2c\u2d2e-\u2d2f\u2d68-\u2d6e\u2d71-\u2d7e\u2d97-\u2d9f\u2da7\u2daf\u2db7\u2dbf\u2dc7\u2dcf\u2dd7\u2ddf\u2e43-\u2e7f\u2e9a\u2ef4-\u2eff\u2fd6-\u2fef\u2ffc-\u3000\u3040\u3097-\u3098\u3100-\u3104\u312e-\u3130\u318f\u31bb-\u31bf\u31e4-\u31ef\u321f\u32ff\u4db6-\u4dbf\u9fd6-\u9fff\ua48d-\ua48f\ua4c7-\ua4cf\ua62c-\ua63f\ua6f8-\ua6ff\ua7ae-\ua7af\ua7b8-\ua7f6\ua82c-\ua82f\ua83a-\ua83f\ua878-\ua87f\ua8c5-\ua8cd\ua8da-\ua8df\ua8fe-\ua8ff\ua954-\ua95e\ua97d-\ua97f\ua9ce\ua9da-\ua9dd\ua9ff\uaa37-\uaa3f\uaa4e-\uaa4f\uaa5a-\uaa5b\uaac3-\uaada\uaaf7-\uab00\uab07-\uab08\uab0f-\uab10\uab17-\uab1f\uab27\uab2f\uab66-\uab6f\uabee-\uabef\uabfa-\uabff\ud7a4-\ud7af\ud7c7-\ud7ca\ud7fc-\uf8ff\ufa6e-\ufa6f\ufada-\ufaff\ufb07-\ufb12\ufb18-\ufb1c\ufb37\ufb3d\ufb3f\ufb42\ufb45\ufbc2-\ufbd2\ufd40-\ufd4f\ufd90-\ufd91\ufdc8-\ufdef\ufdfe-\ufdff\ufe1a-\ufe1f\ufe53\ufe67\ufe6c-\ufe6f\ufe75\ufefd-\uff00\uffbf-\uffc1\uffc8-\uffc9\uffd0-\uffd1\uffd8-\uffd9\uffdd-\uffdf\uffe7\uffef-\ufffb\ufffe-\uffff]/.test(_)?h<=255?2:h<=65535?4:8:0)?_:2===d?"\\x"+_lpad(h.toString(16),"0",2):4===d?"\\u"+_lpad(h.toString(16),"0",4):"\\U"+_lpad(h.toString(16),"0",8)}}}catch(e){f.e(e)}finally{f.f()}return p+i+p}function _map_repr(e,t){var n=[];n.push("{");var i,o=0,s=_createForOfIteratorHelper(e);try{for(s.s();!(i=s.n()).done;){var u=_slicedToArray(i.value,2),l=u[0],c=u[1];o++&&n.push(", "),n.push(_repr_internal(l,t),": ",_repr_internal(c,t))}}catch(e){s.e(e)}finally{s.f()}return n.push("}"),n.join("")}function _list_repr(e,t){var n=[];n.push("[");var i,o=!0,s=_createForOfIteratorHelper(e);try{for(s.s();!(i=s.n()).done;){var u=i.value;o?o=!1:n.push(", "),n.push(_repr_internal(u,t))}}catch(e){s.e(e)}finally{s.f()}return n.push("]"),n.join("")}function _set_repr(e,t){var n=[];if(n.push("{"),e.size){var i,o=0,s=_createForOfIteratorHelper(e);try{for(s.s();!(i=s.n()).done;){var u=i.value;o++&&n.push(", "),n.push(_repr_internal(u,t))}}catch(e){s.e(e)}finally{s.f()}}else n.push("/");return n.push("}"),n.join("")}function _object_repr(e,t){var n=[];n.push("{");var i=0;for(var o in e)e.hasOwnProperty(o)&&(i++&&n.push(", "),n.push(_repr_internal(o,t),": ",_repr_internal(e[o],t)));return n.push("}"),n.join("")}function _repr_internal(e,t){return null===e?"None":void 0===e?"<undefined>":!1===e?"False":!0===e?"True":"string"==typeof e?_str_repr(e,t):"number"==typeof e?""+e:"function"==typeof e?void 0!==e.prototype?"<class "+e.name+">":e._ul4_name||e.name?"<function "+(e._ul4_name||e.name)+">":"<anonymous function>":_isdate(e)?function _date_repr(e,t){var n=e._date.getFullYear(),i=e._date.getMonth()+1,o=e._date.getDate();return"@("+n+"-"+_lpad(i.toString(),"0",2)+"-"+_lpad(o.toString(),"0",2)+")"}(e):_isdatetime(e)?function _datetime_repr(e,t){var n=e.getFullYear(),i=e.getMonth()+1,o=e.getDate(),s=e.getHours(),u=e.getMinutes(),l=e.getSeconds(),c=e.getMilliseconds(),p="@("+n+"-"+_lpad(i.toString(),"0",2)+"-"+_lpad(o.toString(),"0",2)+"T";return(s||u||l||c)&&(p+=_lpad(s.toString(),"0",2)+":"+_lpad(u.toString(),"0",2),(l||c)&&(p+=":"+_lpad(l.toString(),"0",2),c&&(p+="."+_lpad(c.toString(),"0",3)+"000"))),p+")"}(e):"object"===_typeof(e)&&"function"==typeof e[ee.repr]?e[ee.repr]():_islist(e)?_list_repr(e,t):_ismap(e)?_map_repr(e,t):_isset(e)?_set_repr(e,t):_isobject(e)?_object_repr(e,t):"?"}function _repr2(e){return _repr_internal(e,!1)}function _ascii(e){return _repr_internal(e,!0)}function _str(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return je[ee.call](e)}function _bool(e){return Se[ee.call](e)}function _list(e){return Pe[ee.call](e)}function _len(e){if("string"==typeof e||_islist(e))return e.length;if(_ismap(e)||_isset(e))return e.size;if(_isobject(e)){var t=0;for(var n in e)++t;return t}throw new We("object of type '"+_type(e).fullname()+"' has no len()")}var de=new Map;function _maketype(e){var t=new Le(e);return de.set(e,t),t}function _type(e){if(null===e)return me;if(void 0===e)return be;if("function"==typeof e[ee.type])return e[ee.type]();if(_isbool(e))return Se;if(_isint(e))return Ae;if(_isfloat(e))return xe;if(_isstr(e))return je;if(_islist(e))return Pe;if(_isset(e))return Ee;if(_isdict(e))return De;if(_isdatetime(e))return Ve;if("function"==typeof e)return qe;var t=e.constructor,n=de.get(t);return void 0===n&&(n=_maketype(t)),n}function _mod(e,t){if(null==e||null==t)throw new We(_type(e).fullname()+" % "+_type(t).fullname()+" is not supported");var n=Math.floor(e/t),i=e-n*t;return 0!==i&&(t<0&&i>0||t>0&&i<0)&&(i+=t,--n),e-n*t}function _getattr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{return _type(e).getattr(e,t)}catch(t){if(t instanceof rt&&t.obj===e)return n;throw t}}function _hasattr(e,t){return _type(e).hasattr(e,t)}function _dir(e){return _type(e).dir()}function _any(e){if("string"==typeof e){var t,n=_createForOfIteratorHelper(e);try{for(n.s();!(t=n.n()).done;){if("\0"!==t.value)return!0}}catch(e){n.e(e)}finally{n.f()}return!1}for(var i=_iter(e);;){var o=i.next();if(o.done)return!1;if(_bool(o.value))return!0}}function _all(e){if("string"==typeof e){var t,n=_createForOfIteratorHelper(e);try{for(n.s();!(t=n.n()).done;){if("\0"===t.value)return!1}}catch(e){n.e(e)}finally{n.f()}return!0}for(var i=_iter(e);;){var o=i.next();if(o.done)return!0;if(!_bool(o.value))return!1}}function _isundefined(e){return void 0===e}function _isdefined(e){return void 0!==e}function _isnone(e){return me.instancecheck(e)}function _isbool(e){return Se.instancecheck(e)}function _isint(e){return Ae.instancecheck(e)}function _isfloat(e){return xe.instancecheck(e)}function _isstr(e){return je.instancecheck(e)}function _isdatetime(e){return Ve.instancecheck(e)}function _isdate(e){return Fe.instancecheck(e)}function _iscolor(e){return Qr.instancecheck(e)}function _istimedelta(e){return rn.instancecheck(e)}function _ismonthdelta(e){return on.instancecheck(e)}function _istemplate(e){return null!==e&&e instanceof Ur||e instanceof zr}function _isfunction(e){return qe.instancecheck(e)}function _islist(e){return Pe.instancecheck(e)}function _isset(e){return Ee.instancecheck(e)}function _isexception(e){return e instanceof Exception}function _isiter(e){return null!==e&&"object"===_typeof(e)&&"function"==typeof e.next}function _isobject(e){return De._isobject(e)}function _ismap(e){return De._ismap(e)}function _isdict(e){return De.instancecheck(e)}function _isinstance(e,t){return t.instancecheck(e)}function _str_repeat(e,t){for(var n="";t>0;--t)n+=e;return n}function _list_repeat(e,t){for(var n=[];t>0;--t){var i,o=_createForOfIteratorHelper(e);try{for(o.s();!(i=o.n()).done;){var s=i.value;n.push(s)}}catch(e){o.e(e)}finally{o.f()}}return n}function _asjson(e){if(null===e)return"null";if(void 0===e)return"undefined";if(!1===e)return"false";if(!0===e)return"true";if("string"==typeof e)return function _str_json(e){var t,n="",i=_createForOfIteratorHelper(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;switch(o){case"\r":n+="\\r";break;case"\n":n+="\\n";break;case"\t":n+="\\t";break;case"\\":n+="\\\\";break;case'"':n+='\\"';break;case"<":n+="\\u003c";break;default:var s=o.charCodeAt(0);n+=s>=32&&s<128?o:"\\u"+_lpad(s.toString(16),"0",4)}}}catch(e){i.e(e)}finally{i.f()}return'"'+n+'"'}(e);if("number"==typeof e)return""+e;if(_islist(e)){var t=[];t.push("[");var n,i=!0,o=_createForOfIteratorHelper(e);try{for(o.s();!(n=o.n()).done;){var s=n.value;i?i=!1:t.push(", "),t.push(_asjson(s))}}catch(e){o.e(e)}finally{o.f()}return t.push("]"),t.join("")}if(_ismap(e)){var u=[];u.push("{");var l,c=!0,p=_createForOfIteratorHelper(e);try{for(p.s();!(l=p.n()).done;){var f=_slicedToArray(l.value,2),_=f[0],h=f[1];c?c=!1:u.push(", "),u.push(_asjson(_),": ",_asjson(h))}}catch(e){p.e(e)}finally{p.f()}return u.push("}"),u.join("")}if(_isobject(e)){var d=[];d.push("{");var v=!0;for(var y in e)v?v=!1:d.push(", "),d.push(_asjson(y),": ",_asjson(e[y]));return d.push("}"),d.join("")}if(_isdate(e))return"new ul4.Date_("+e._date.getFullYear()+", "+(e._date.getMonth()+1)+", "+e._date.getDate()+")";if(_isdatetime(e))return"new Date("+e.getFullYear()+", "+e.getMonth()+", "+e.getDate()+", "+e.getHours()+", "+e.getMinutes()+", "+e.getSeconds()+", "+e.getMilliseconds()+")";if(_istimedelta(e))return"new ul4.TimeDelta("+e._days+", "+e._seconds+", "+e._microseconds+")";if(_ismonthdelta(e))return"new ul4.MonthDelta("+e._months+")";if(_iscolor(e))return"new ul4.Color("+e._r+", "+e._g+", "+e._b+", "+e._a+")";if(_istemplate(e))return"ul4.Template.loads("+_repr2(e.dumps())+")";throw new We("asjson() requires a serializable object")}function _fromjson(e){if(e=je.strip(e),JSON&&JSON.parse)return JSON.parse(e);if(pe.test(e.replace(fe,"@").replace(_e,"]").replace(he,"")))return new Function("return "+e)();throw new We("invalid JSON")}function _asul4on(e){return dumps(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)}function _fromul4on(e){return _loads2(e)}function _format_datetime(e,t,n){var i,o={de:{ms:["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],ml:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],ws:["So","Mo","Di","Mi","Do","Fr","Sa"],wl:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],xf:"%d.%m.%Y",Xf:"%H:%M:%S",cf:"%a %d %b %Y %H:%M:%S"},en:{ms:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ml:["January","February","March","April","May","June","July","August","September","October","November","December"],ws:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wl:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],xf:"%m/%d/%Y",Xf:"%H:%M:%S",cf:"%a %d %b %Y %I:%M:%S %p"},fr:{ms:["janv.","févr.","mars","avril","mai","juin","juil.","août","sept.","oct.","nov.","déc."],ml:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],ws:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wl:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],xf:"%d/%m/%Y",Xf:"%H:%M:%S",cf:"%a %d %b %Y %H:%M:%S"},es:{ms:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],ml:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],ws:["dom","lun","mar","mié","jue","vie","sáb"],wl:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],xf:"%d/%m/%y",Xf:"%H:%M:%S",cf:"%a %d %b %Y %H:%M:%S"},it:{ms:["gen","feb","mar","apr","mag","giu","lug","ago","set","ott","nov","dic"],ml:["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre"],ws:["dom","lun","mar","mer","gio","ven","sab"],wl:["domenica","lunedì","martedì","mercoledì","giovedì","venerdì","sabato"],xf:"%d/%m/%Y",Xf:"%H:%M:%S",cf:"%a %d %b %Y %H:%M:%S"},da:{ms:["jan","feb","mar","apr","maj","jun","jul","aug","sep","okt","nov","dec"],ml:["januar","februar","marts","april","maj","juni","juli","august","september","oktober","november","december"],ws:["søn","man","tir","ons","tor","fre","lør"],wl:["søndag","mandag","tirsdag","onsdag","torsdag","fredag","lørdag"],xf:"%d-%m-%Y",Xf:"%H:%M:%S",cf:"%a %d %b %Y %H:%M:%S"},sv:{ms:["jan","feb","mar","apr","maj","jun","jul","aug","sep","okt","nov","dec"],ml:["januari","februari","mars","april","maj","juni","juli","augusti","september","oktober","november","december"],ws:["sön","mån","tis","ons","tor","fre","lör"],wl:["söndag","måndag","tisdag","onsdag","torsdag","fredag","lördag"],xf:"%Y-%m-%d",Xf:"%H.%M.%S",cf:"%a %d %b %Y %H.%M.%S"},nl:{ms:["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec"],ml:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],ws:["zo","ma","di","wo","do","vr","za"],wl:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],xf:"%d-%m-%y",Xf:"%H:%M:%S",cf:"%a %d %b %Y %H:%M:%S"},pt:{ms:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],ml:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],ws:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],wl:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"],xf:"%d-%m-%Y",Xf:"%H:%M:%S",cf:"%a %d %b %Y %H:%M:%S"},cs:{ms:["led","úno","bře","dub","kvě","čen","čec","srp","zář","říj","lis","pro"],ml:["leden","únor","březen","duben","květen","červen","červenec","srpen","září","říjen","listopad","prosinec"],ws:["Ne","Po","Út","St","Čt","Pá","So"],wl:["Neděle","Pondělí","Úterý","Středa","Čtvrtek","Pátek","Sobota"],xf:"%d.%m.%Y",Xf:"%H:%M:%S",cf:"%a %d. %B %Y, %H:%M:%S"},sk:{ms:["jan","feb","mar","apr","máj","jún","júl","aug","sep","okt","nov","dec"],ml:["január","február","marec","apríl","máj","jún","júl","august","september","október","november","december"],ws:["Ne","Po","Ut","St","Št","Pi","So"],wl:["Nedeľa","Pondelok","Utorok","Streda","Štvrtok","Piatok","Sobota"],xf:"%d.%m.%Y",Xf:"%H:%M:%S",cf:"%a %d. %B %Y, %H:%M:%S"},pl:{ms:["sty","lut","mar","kwi","maj","cze","lip","sie","wrz","paź","lis","gru"],ml:["styczeń","luty","marzec","kwiecień","maj","czerwiec","lipiec","sierpień","wrzesień","październik","listopad","grudzień"],ws:["nie","pon","wto","śro","czw","pią","sob"],wl:["niedziela","poniedziałek","wtorek","środa","czwartek","piątek","sobota"],xf:"%d.%m.%Y",Xf:"%H:%M:%S",cf:"%a, %d %b %Y, %H:%M:%S"},hr:{ms:["Sij","Vel","Ožu","Tra","Svi","Lip","Srp","Kol","Ruj","Lis","Stu","Pro"],ml:["Siječanj","Veljača","Ožujak","Travanj","Svibanj","Lipanj","Srpanj","Kolovoz","Rujan","Listopad","Studeni","Prosinac"],ws:["Ned","Pon","Uto","Sri","Čet","Pet","Sub"],wl:["Nedjelja","Ponedjeljak","Utorak","Srijeda","Četvrtak","Petak","Subota"],xf:"%d.%m.%Y",Xf:"%H:%M:%S",cf:"%a %d %b %Y %H:%M:%S"},sr:{ms:["јан","феб","мар","апр","мај","јун","јул","авг","сеп","окт","нов","дец"],ml:["јануар","фебруар","март","април","мај","јун","јул","август","септембар","октобар","новембар","децембар"],ws:["нед","пон","уто","сре","чет","пет","суб"],wl:["недеља","понедељак","уторак","среда","четвртак","петак","субота"],xf:"%d.%m.%Y.",Xf:"%H:%M:%S",cf:"%A, %d. %B %Y. %H:%M:%S"},ro:{ms:["ian","feb","mar","apr","mai","iun","iul","aug","sep","oct","nov","dec"],ml:["ianuarie","februarie","martie","aprilie","mai","iunie","iulie","august","septembrie","octombrie","noiembrie","decembrie"],ws:["Du","Lu","Ma","Mi","Jo","Vi","Sb"],wl:["duminică","luni","marţi","miercuri","joi","vineri","sâmbătă"],xf:"%d.%m.%Y",Xf:"%H:%M:%S",cf:"%a %d %b %Y %H:%M:%S"},hu:{ms:["jan","febr","márc","ápr","máj","jún","júl","aug","szept","okt","nov","dec"],ml:["január","február","március","április","május","június","július","augusztus","szeptember","október","november","december"],ws:["v","h","k","sze","cs","p","szo"],wl:["vasárnap","hétfő","kedd","szerda","csütörtök","péntek","szombat"],xf:"%Y-%m-%d",Xf:"%H.%M.%S",cf:"%Y. %b. %d., %A, %H.%M.%S"},tr:{ms:["Oca","Şub","Mar","Nis","May","Haz","Tem","Ağu","Eyl","Eki","Kas","Ara"],ml:["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"],ws:["Paz","Pzt","Sal","Çrş","Prş","Cum","Cts"],wl:["Pazar","Pazartesi","Salı","Çarşamba","Perşembe","Cuma","Cumartesi"],xf:"%d-%m-%Y",Xf:"%H:%M:%S",cf:"%a %d %b %Y %H:%M:%S"},ru:{ms:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],ml:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],ws:["Вск","Пнд","Втр","Срд","Чтв","Птн","Сбт"],wl:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],xf:"%d.%m.%Y",Xf:"%H:%M:%S",cf:"%a %d %b %Y %H:%M:%S"},zh:{ms:[" 1月"," 2月"," 3月"," 4月"," 5月"," 6月"," 7月"," 8月"," 9月","10月","11月","12月"],ml:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],ws:["日","一","二","三","四","五","六"],wl:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],xf:"%Y年%b%d日",Xf:"%H时%M分%S秒",cf:"%Y年%b%d日 %A %H时%M分%S秒"},ko:{ms:[" 1월"," 2월"," 3월"," 4월"," 5월"," 6월"," 7월"," 8월"," 9월","10월","11월","12월"],ml:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],ws:["일","월","화","수","목","금","토"],wl:["일요일","월요일","화요일","수요일","목요일","금요일","토요일"],xf:"%Y년 %B %d일",Xf:"%H시 %M분 %S초",cf:"%Y년 %B %d일 (%a) %p %I시 %M분 %S초"},ja:{ms:[" 1月"," 2月"," 3月"," 4月"," 5月"," 6月"," 7月"," 8月"," 9月","10月","11月","12月"],ml:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],ws:["日","月","火","水","木","金","土"],wl:["日曜日","月曜日","火曜日","水曜日","木曜日","金曜日","土曜日"],xf:"%Y年%B%d日",Xf:"%H時%M分%S秒",cf:"%Y年%B%d日 %H時%M分%S秒"}}[n],s=[],u=!1,l=_createForOfIteratorHelper(t);try{for(l.s();!(i=l.n()).done;){var c=i.value;if(u){switch(c){case"a":c=o.ws[e.getDay()];break;case"A":c=o.wl[e.getDay()];break;case"b":c=o.ms[e.getMonth()];break;case"B":c=o.ml[e.getMonth()];break;case"c":c=_format(e,o.cf,n);break;case"d":c=_lpad(e.getDate(),"0",2);break;case"f":c=_lpad(e.getMilliseconds(),"0",3)+"000";break;case"H":c=_lpad(e.getHours(),"0",2);break;case"I":c=_lpad((e.getHours()-1)%12+1,"0",2);break;case"j":c=_lpad(Ve.yearday(e),"0",3);break;case"m":c=_lpad(e.getMonth()+1,"0",2);break;case"M":c=_lpad(e.getMinutes(),"0",2);break;case"p":c=e.getHours()<12?"AM":"PM";break;case"S":c=_lpad(e.getSeconds(),"0",2);break;case"U":c=_lpad(_week4format(e,6),"0",2);break;case"w":c=e.getDay();break;case"W":c=_lpad(_week4format(e,0),"0",2);break;case"x":c=_format(e,o.xf,n);break;case"X":c=_format(e,o.Xf,n);break;case"y":c=(e.getFullYear()%100).toString();break;case"Y":c=e.getFullYear().toString();break;case"z":case"Z":c=""}s.push(c),u=!1}else"%"==c?u=!0:s.push(c)}}catch(e){l.e(e)}finally{l.f()}return s.join("")}var ve=function(){function Format(e){_classCallCheck(this,Format);var t=e;if(this.fill=" ",this.align=">",this.sign="-",this.alternate=!1,this.minimumwidth=0,this.precision=6,this.type="d",/[bcdeEfFoxXn]$/.test(t)&&(this.type=t.substring(t.length-1),t=t.substring(0,t.length-1)),/\.\d+$/.test(t)){var n=t.lastIndexOf(".");this.precision=Number(t.substring(n).substring(1)),t=t.substring(0,n)}if(/\d+$/.test(t)){var i=/\d+$/.exec(t);t=t.replace(/\d+$/,""),/^0/.test(i)&&(this.align="=",this.fill="0"),this.minimumwidth=parseInt(i)}if(/#$/.test(t)&&(this.alternate=!0,t=t.substring(0,t.length-1)),/[+ -]$/.test(t)){if("c"==this.type)throw new $e("sign not allowed for integer format type 'c'");this.sign=t.substring(t.length-1),t=t.substring(0,t.length-1)}if(t.length>=3)throw new $e("illegal integer format string "+_repr2(e));if(2==t.length){if(!/[<>=^]$/.test(t))throw new $e("illegal integer format string "+_repr2(e));this.align=t[1],this.fill=t[0]}else if(1==t.length){if(!/^[<>=^]$/.test(t))throw new $e("illegal integer format string "+_repr2(e));this.align=t}}return _createClass(Format,[{key:"is_integer_type",value:function is_integer_type(){return Format.integer_types.includes(this.type)}},{key:"get_integer_type_or_default",value:function get_integer_type_or_default(){return this.is_integer_type()?this.type:"d"}},{key:"is_float_type",value:function is_float_type(){return Format.float_types.includes(this.type)}},{key:"get_float_type_or_default",value:function get_float_type_or_default(){return this.is_float_type()?this.type:"f"}}]),Format}();function _format_int(e,t,n){var i,o=t.fill,s=t.align,u=t.sign,l=t.alternate,c=t.minimumwidth,p=t.get_integer_type_or_default(),f=e<0;switch(f&&(e=-e),p){case"b":i=e.toString(2);break;case"c":if(f||e>65535)throw new $e("value out of bounds for c format");i=String.fromCharCode(e);break;case"d":case"n":i=e.toString();break;case"o":i=e.toString(8);break;case"x":i=e.toString(16);break;case"X":i=e.toString(16).toUpperCase()}if("="===s)(f||"-"!==u)&&--c,!l||"b"!==p&&"o"!==p&&"x"!==p&&"X"!==p||(c-=2),i.length<c&&(i=_str_repeat(o,c-i.length)+i),!l||"b"!==p&&"o"!==p&&"x"!==p&&"X"!==p||(i="0"+p+i),f?i="-"+i:"-"!=u&&(i=u+i);else if(!l||"b"!=p&&"o"!=p&&"x"!=p&&"X"!=p||(i="0"+p+i),f?i="-"+i:"-"!=u&&(i=u+i),i.length<c)if("<"==s)i+=_str_repeat(o,c-i.length);else if(">"==s)i=_str_repeat(o,c-i.length)+i;else{var _=c-i.length,h=Math.floor(_/2),d=_-h;i=_str_repeat(o,h)+i+_str_repeat(o,d)}return i}function _format(e,t,n){if(null==n)n="en";else{var i={de:null,en:null,fr:null,es:null,it:null,da:null,sv:null,nl:null,pt:null,cs:null,sk:null,pl:null,hr:null,sr:null,ro:null,hu:null,tr:null,ru:null,zh:null,ko:null,ja:null};void 0===i[n=n.toLowerCase()]&&void 0===i[n=n.split(/_/)[0]]&&(n="en")}if(_isdate(e))return _format_datetime(e._date,t,n);if(_isdatetime(e))return _format_datetime(e,t,n);if("number"==typeof e){var o=new ve(t);return _isfloat(e)||o.is_float_type()?function _format_float(e,t,n){var i,o=t.fill,s=t.align,u=t.sign,l=t.alternate,c=t.minimumwidth,p=t.precision,f=t.get_float_type_or_default(),_=e<0;if(_&&(e=-e),"e"===f||"E"===f?(i=e.toExponential(p),"E"===f&&(i=i.replace("e","E"))):(i=e.toFixed(p),0===p&&l&&(i+=".")),"="===s)(_||"-"!==u)&&--c,i.length<c&&(i=_str_repeat(o,c-i.length)+i),_?i="-"+i:"-"!=u&&(i=u+i);else if(_?i="-"+i:"-"!=u&&(i=u+i),i.length<c)if("<"==s)i+=_str_repeat(o,c-i.length);else if(">"==s)i=_str_repeat(o,c-i.length)+i;else{var h=c-i.length,d=Math.floor(h/2),v=h-d;i=_str_repeat(o,d)+i+_str_repeat(o,v)}return["de","fr","it","es","nl","no","pl","ru","sv"].includes(n)&&(i=i.replace(".",",")),i}(e,o,n):_format_int(e,o)}return!0===e?_format_int(1,new ve(t)):!1===e?_format_int(0,new ve(t)):void 0}function _lpad(e,t,n){for("number"==typeof e&&(e=e.toString());e.length<n;)e=t+e;return e}function _extend(e,t){return Object.assign(Object.create(e),t)}_defineProperty(ve,"integer_types",["b","c","d","o","x","X","n"]),_defineProperty(ve,"float_types",["e","E","f","F"]);var ye=function(e){_inherits(NoneType,e);var t=_createSuper(NoneType);function NoneType(){return _classCallCheck(this,NoneType),t.apply(this,arguments)}return _createClass(NoneType,[{key:"instancecheck",value:function instancecheck(e){return null===e}}]),NoneType}(ne),me=new ye(null,"None","The constant `None`."),ge=function(e){_inherits(UndefinedType,e);var t=_createSuper(UndefinedType);function UndefinedType(){return _classCallCheck(this,UndefinedType),t.apply(this,arguments)}return _createClass(UndefinedType,[{key:"instancecheck",value:function instancecheck(e){return void 0===e}}]),UndefinedType}(ne),be=new ge(null,"undefined","An undefined variable or object attribute."),ke=function(e,t){_inherits(BoolType,e);var n=_createSuper(BoolType);function BoolType(){return _classCallCheck(this,BoolType),n.apply(this,arguments)}return _createClass(BoolType,[{key:t,value:function value(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(null==e||!1===e||0===e||""===e)return!1;if("object"===_typeof(e)&&"function"==typeof e[ee.bool])return e[ee.bool]();if(_islist(e))return 0!==e.length;if(_ismap(e)||_isset(e))return 0!=e.size;if(_isobject(e)){for(var t in e)if(e.hasOwnProperty(t))return!0;return!1}return!0}},{key:"instancecheck",value:function instancecheck(e){return"boolean"==typeof e}}]),BoolType}(ne,ee.call);expose(ke.prototype,["obj","p=",!1],{name:"bool"});var Se=new ke(null,"bool","An boolean value"),Te=function(e,t){_inherits(IntType,e);var n=_createSuper(IntType);function IntType(){return _classCallCheck(this,IntType),n.apply(this,arguments)}return _createClass(IntType,[{key:t,value:function value(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null!==n){if("string"!=typeof t||!_isint(n))throw new We("int() requires a string and an integer");if("NaN"==(e=parseInt(t,n)).toString())throw new We("invalid literal for int()");return e}if("string"==typeof t){if("NaN"==(e=parseInt(t)).toString())throw new We("invalid literal for int()");return e}if("number"==typeof t)return Math.floor(t);if(!0===t)return 1;if(!1===t)return 0;throw new We("int() argument must be a string or a number")}},{key:"instancecheck",value:function instancecheck(e){return"number"==typeof e&&Math.round(e)==e}}]),IntType}(ne,ee.call);expose(Te.prototype,["obj","p=",0,"base","pk=",null],{name:"int"});var Ae=new Te(null,"int","An integer"),we=function(e,t){_inherits(FloatType,e);var n=_createSuper(FloatType);function FloatType(){return _classCallCheck(this,FloatType),n.apply(this,arguments)}return _createClass(FloatType,[{key:t,value:function value(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if("string"==typeof e)return parseFloat(e);if("number"==typeof e)return e;if(!0===e)return 1;if(!1===e)return 0;throw new We("float() argument must be a string or a number")}},{key:"instancecheck",value:function instancecheck(e){return"number"==typeof e&&Math.round(e)!=e}}]),FloatType}(ne,ee.call);expose(we.prototype,["obj","p=",0],{name:"float"});var xe=new we(null,"float","A floating point number"),Ce=function(e,t){_inherits(StrType,e);var n=_createSuper(StrType);function StrType(){return _classCallCheck(this,StrType),n.apply(this,arguments)}return _createClass(StrType,[{key:t,value:function value(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return null==e?"":!1===e?"False":!0===e?"True":"string"==typeof e?e:"number"==typeof e?e.toString():_isdate(e)?function _date_str(e){var t=e._date.getFullYear(),n=e._date.getMonth()+1,i=e._date.getDate();return t+"-"+_lpad(n.toString(),"0",2)+"-"+_lpad(i.toString(),"0",2)}(e):_isdatetime(e)?function _datetime_str(e){var t=e.getFullYear(),n=e.getMonth()+1,i=e.getDate(),o=e.getHours(),s=e.getMinutes(),u=e.getSeconds(),l=e.getMilliseconds(),c=t+"-"+_lpad(n.toString(),"0",2)+"-"+_lpad(i.toString(),"0",2)+" "+_lpad(o.toString(),"0",2)+":"+_lpad(s.toString(),"0",2);return(u||l)&&(c+=":"+_lpad(u.toString(),"0",2),l&&(c+="."+_lpad(l.toString(),"0",3)+"000")),c}(e):_islist(e)?_list_repr(e):_isset(e)?_set_repr(e):_ismap(e)?_map_repr(e):"object"===_typeof(e)&&"function"==typeof e[ee.str]?e[ee.str]():"object"===_typeof(e)&&"function"==typeof e[ee.repr]?e[ee.repr]():_isobject(e)?_object_repr(e):_repr2(e)}},{key:"instancecheck",value:function instancecheck(e){return"string"==typeof e}},{key:"count",value:function count(e,t){return _count(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null)}},{key:"find",value:function find(e,t){return _find(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null)}},{key:"rfind",value:function rfind(e,t){return _rfind(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null)}},{key:"replace",value:function replace(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;null===i&&(i=e.length);for(var o=[];e.length;){var s=e.indexOf(t);if(-1===s||!i--){o.push(e);break}o.push(e.substr(0,s),n),e=e.substr(s+t.length)}return o.join("")}},{key:"strip",value:function strip(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"!=typeof(t=t||" \r\n\t"))throw new We("strip() requires a string argument");for(;e&&t.indexOf(e[0])>=0;)e=e.substr(1);for(;e&&t.indexOf(e[e.length-1])>=0;)e=e.substr(0,e.length-1);return e}},{key:"lstrip",value:function lstrip(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"!=typeof(t=t||" \r\n\t"))throw new We("lstrip() requires a string argument");for(;e&&t.indexOf(e[0])>=0;)e=e.substr(1);return e}},{key:"rstrip",value:function rstrip(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"!=typeof(t=t||" \r\n\t"))throw new We("rstrip() requires a string argument");for(;e&&t.indexOf(e[e.length-1])>=0;)e=e.substr(0,e.length-1);return e}},{key:"split",value:function split(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null!==t&&"string"!=typeof t)throw new We("split() requires a string");if(null===n){var i=e.split(null!==t?t:/[ \n\r\t]+/);return null===t&&(i.length&&!i[0].length&&i.splice(0,1),i.length&&!i[i.length-1].length&&i.splice(-1)),i}if(null!==t){for(var o=[];e.length;){var s=e.indexOf(t);if(-1===s||!n--){o.push(e);break}o.push(e.substr(0,s)),e=e.substr(s+t.length)}return o}for(var u=[];e.length;){e=je.lstrip(e,null);var l=void 0;(l=n--?e.split(/[ \n\r\t]+/,1)[0]:e).length&&u.push(l),e=e.substr(l.length)}return u}},{key:"rsplit",value:function rsplit(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null!==t&&"string"!=typeof t)throw new We("rsplit() requires a string as second argument");if(null===n){var i=e.split(null!==t?t:/[ \n\r\t]+/);return null===t&&(i.length&&!i[0].length&&i.splice(0,1),i.length&&!i[i.length-1].length&&i.splice(-1)),i}if(null!==t){for(var o=[];e.length;){var s=e.lastIndexOf(t);if(-1===s||!n--){o.unshift(e);break}o.unshift(e.substr(s+t.length)),e=e.substr(0,s)}return o}for(var u=[];e.length;){e=je.rstrip(e);var l=void 0;(l=n--?(l=e.split(/[ \n\r\t]+/))[l.length-1]:e).length&&u.unshift(l),e=e.substr(0,e.length-l.length)}return u}},{key:"splitlines",value:function splitlines(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=0,o=function lookingAtLineEnd(){var t=e[i];return"\n"===t||"\v"==t||"\f"==t||""==t||""==t||""==t||""==t||"\u2028"==t||"\u2029"==t?1:"\r"===t?i==u-1?1:"\n"===e[i+1]?2:1:0},s=[],u=e.length;for(i=0,t=0;;){if(i>=u)return t!=i&&s.push(e.substring(t)),s;var l=o();if(l){var c=i+(n?l:0);s.push(e.substring(t,c)),t=i+=l}else++i}}},{key:"lower",value:function lower(e){return e.toLowerCase()}},{key:"upper",value:function upper(e){return e.toUpperCase()}},{key:"capitalize",value:function capitalize(e){return e.length&&(e=e[0].toUpperCase()+e.slice(1).toLowerCase()),e}},{key:"join",value:function join(e,t){for(var n=[],i=_iter(t);;){var o=i.next();if(o.done)break;n.push(o.value)}return n.join(e)}},{key:"startswith",value:function startswith(e,t){if("string"==typeof t)return e.substr(0,t.length)===t;if(_islist(t)){var n,i=_createForOfIteratorHelper(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(e.substr(0,o.length)===o)return!0}}catch(e){i.e(e)}finally{i.f()}return!1}throw new We("startswith() argument must be string")}},{key:"endswith",value:function endswith(e,t){if("string"==typeof t)return e.substr(e.length-t.length)===t;if(_islist(t)){var n,i=_createForOfIteratorHelper(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(e.substr(e.length-o.length)===o)return!0}}catch(e){i.e(e)}finally{i.f()}return!1}throw new We("endswith() argument must be string or list of strings")}}]),StrType}(ne,ee.call);Ce.prototype.attrs=new Set(["split","rsplit","splitlines","strip","lstrip","rstrip","upper","lower","capitalize","startswith","endswith","replace","count","find","rfind","join"]),expose(Ce.prototype.count,["sub","p","start","p=",null,"end","p=",null]),expose(Ce.prototype.find,["sub","p","start","p=",null,"end","p=",null]),expose(Ce.prototype.rfind,["sub","p","start","p=",null,"end","p=",null]),expose(Ce.prototype.replace,["old","p","new","p","count","p=",null]),expose(Ce.prototype.strip,["chars","p=",null]),expose(Ce.prototype.lstrip,["chars","p=",null]),expose(Ce.prototype.rstrip,["chars","p=",null]),expose(Ce.prototype.split,["sep","pk=",null,"maxsplit","pk=",null]),expose(Ce.prototype.rsplit,["sep","pk=",null,"maxsplit","pk=",null]),expose(Ce.prototype.splitlines,["keepends","pk=",!1]),expose(Ce.prototype.lower,[]),expose(Ce.prototype.upper,[]),expose(Ce.prototype.capitalize,[]),expose(Ce.prototype.join,["iterable","p"]),expose(Ce.prototype.startswith,["prefix","p"]),expose(Ce.prototype.endswith,["suffix","p"]),expose(Ce.prototype,["obj","p=",""],{name:"str"});var je=new Ce(null,"str","A string."),Oe=function(e,t){_inherits(ListType,e);var n=_createSuper(ListType);function ListType(){return _classCallCheck(this,ListType),n.apply(this,arguments)}return _createClass(ListType,[{key:t,value:function value(e){for(var t=_iter(e),n=[];;){var value=t.next();if(value.done)return n;n.push(value.value)}}},{key:"instancecheck",value:function instancecheck(e){return"[object Array]"===Object.prototype.toString.call(e)}},{key:"append",value:function append(e,t){var n,i=_createForOfIteratorHelper(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;e.push(o)}}catch(e){i.e(e)}finally{i.f()}return null}},{key:"insert",value:function insert(e,t,n){t<0&&(t+=e.length);var i,o=_createForOfIteratorHelper(n);try{for(o.s();!(i=o.n()).done;){var s=i.value;e.splice(t++,0,s)}}catch(e){o.e(e)}finally{o.f()}return null}},{key:"pop",value:function pop(e,t){t<0&&(t+=e.length);var n=e[t];return e.splice(t,1),n}},{key:"count",value:function count(e,t){return _count(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null)}},{key:"find",value:function find(e,t){return _find(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null)}},{key:"rfind",value:function rfind(e,t){return _rfind(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null)}}]),ListType}(ne,ee.call);Oe.prototype.attrs=new Set(["append","insert","pop","count","find","rfind"]),expose(Oe.prototype.append,["items","*"]),expose(Oe.prototype.insert,["pos","p","items","*"]),expose(Oe.prototype.pop,["pos","p=",-1]),expose(Oe.prototype.count,["sub","p","start","p=",null,"end","p=",null]),expose(Oe.prototype.find,["sub","p","start","p=",null,"end","p=",null]),expose(Oe.prototype.rfind,["sub","p","start","p=",null,"end","p=",null]),expose(Oe.prototype,["iterable","p=",[]],{name:"list"});var Pe=new Oe(null,"list","A list."),Me=function(e,t){_inherits(DictType,e);var n=_createSuper(DictType);function DictType(){return _classCallCheck(this,DictType),n.apply(this,arguments)}return _createClass(DictType,[{key:t,value:function value(e,t){var n=new Map;return this.update(n,e,t),n}},{key:"_ismap",value:function _ismap(e){return null!==e&&"object"===_typeof(e)&&"object"===_typeof(e.__proto__)&&e.__proto__===Map.prototype}},{key:"_isobject",value:function _isobject(e){return"[object Object]"===Object.prototype.toString.call(e)&&!(e instanceof te)}},{key:"instancecheck",value:function instancecheck(e){return De._ismap(e)||De._isobject(e)}},{key:"getattr",value:function getattr(e,t){if(_ismap(e)){if(this.attrs.has(t)){var n=this[t],i=function realattr(){for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return n.apply(this,[e].concat(i))};return i._ul4_name=n._ul4_name||n.name,i._ul4_signature=n._ul4_signature,i._ul4_needsobject=n._ul4_needsobject,i._ul4_needscontext=n._ul4_needscontext,i}return e.get(t)}var o;if("function"!=typeof(o=e&&"function"==typeof e[ee.getattr]?e[ee.getattr](t):e[t]))return o;var s=function realresult(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return o.apply(e,n)};return s._ul4_name=o._ul4_name||o.name,s._ul4_signature=o._ul4_signature,s._ul4_needsobject=o._ul4_needsobject,s._ul4_needscontext=o._ul4_needscontext,s}},{key:"get",value:function get(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(_ismap(e))return e.has(t)?e.get(t):n;var i=e[t];return void 0!==i||e.hasOwnProperty(t)?i:n}},{key:"keys",value:function keys(e){var t=[];if(_ismap(e)){var n,i=_createForOfIteratorHelper(e);try{for(i.s();!(n=i.n()).done;){var o=_slicedToArray(n.value,2),s=o[0];o[1];t.push(s)}}catch(e){i.e(e)}finally{i.f()}}else for(var u in e)t.push(u);return _iter(t)}},{key:"items",value:function items(e){var t=[];if(_ismap(e)){var n,i=_createForOfIteratorHelper(e);try{for(i.s();!(n=i.n()).done;){var o=_slicedToArray(n.value,2),s=o[0],u=o[1];t.push([s,u])}}catch(e){i.e(e)}finally{i.f()}}else for(var l in e)t.push([l,e[l]]);return _iter(t)}},{key:"values",value:function values(e){var t=[];if(_ismap(e)){var n,i=_createForOfIteratorHelper(e);try{for(i.s();!(n=i.n()).done;){var o=_slicedToArray(n.value,2),s=(o[0],o[1]);t.push(s)}}catch(e){i.e(e)}finally{i.f()}}else for(var u in e)t.push(e[u]);return _iter(t)}},{key:"_set",value:function _set(e,t,n){_ismap(e)?e.set(t,n):e[t]=n}},{key:"update",value:function update(e,t,n){var i,o=_createForOfIteratorHelper(t);try{for(o.s();!(i=o.n()).done;){var s=i.value;if(_ismap(s)){var u,l=_createForOfIteratorHelper(s);try{for(l.s();!(u=l.n()).done;){var c=_slicedToArray(u.value,2),p=c[0],f=c[1];De._set(e,p,f)}}catch(e){l.e(e)}finally{l.f()}}else if(_isobject(s))for(var _ in s)De._set(e,_,s[_]);else{if(!_islist(s))throw new We("update() requires a dict or a list of (key, value) pairs");var h,d=_createForOfIteratorHelper(s);try{for(d.s();!(h=d.n()).done;){var v=h.value;if(!_islist(v)||2!=v.length)throw new We("update() requires a dict or a list of (key, value) pairs");De._set(e,v[0],v[1])}}catch(e){d.e(e)}finally{d.f()}}}}catch(e){o.e(e)}finally{o.f()}var y,m=_createForOfIteratorHelper(n);try{for(m.s();!(y=m.n()).done;){var k=_slicedToArray(y.value,2),S=k[0],T=k[1];De._set(e,S,T)}}catch(e){m.e(e)}finally{m.f()}return null}},{key:"clear",value:function clear(e){if(_ismap(e))e.clear();else for(var t in e)delete e[t];return null}},{key:"pop",value:function pop(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object;if(_ismap(e)){if(e.has(t)){var i=e.get(t);return e.delete(t),i}}else for(var o=0,s=Object.entries(e);o<s.length;o++){var u=_slicedToArray(s[o],2),l=u[0],c=u[1];return delete e[l],c}if(n===Object)throw new nt(e,t);return n}}]),DictType}(ne,ee.call);Me.prototype.attrs=new Set(["get","keys","items","values","update","clear","pop"]),expose(Me.prototype,["args","*","kwargs","**"],{name:"dict"}),expose(Me.prototype.get,["key","p","default","p=",null]),expose(Me.prototype.keys,[]),expose(Me.prototype.items,[]),expose(Me.prototype.values,[]),expose(Me.prototype.update,["others","*","kwargs","**"]),expose(Me.prototype.clear,[]),expose(Me.prototype.pop,["key","p","default","p=",Object]);var De=new Me(null,"dict","An object that maps keys to values."),Ie=function(e,t){_inherits(SetType,e);var n=_createSuper(SetType);function SetType(){return _classCallCheck(this,SetType),n.apply(this,arguments)}return _createClass(SetType,[{key:t,value:function value(){for(var e=_iter(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),t=new Set;;){var value=e.next();if(value.done)return t;t.add(value.value)}}},{key:"instancecheck",value:function instancecheck(e){return"[object Set]"===Object.prototype.toString.call(e)}},{key:"add",value:function add(e,t){var n,i=_createForOfIteratorHelper(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;e.add(o)}}catch(e){i.e(e)}finally{i.f()}}},{key:"clear",value:function clear(e){return e.clear(),null}}]),SetType}(ne,ee.call);Ie.prototype.attrs=new Set(["add","clear"]),expose(Ie.prototype.add,["items","*"]),expose(Ie.prototype.clear,[]),expose(Ie.prototype,["iterable","p=",[]],{name:"set"});var Ee=new Ie(null,"set","A set."),Be=function(e,t){_inherits(DateType,e);var n=_createSuper(DateType);function DateType(){return _classCallCheck(this,DateType),n.apply(this,arguments)}return _createClass(DateType,[{key:t,value:function value(e,t,n){return new en(e,t,n)}},{key:"instancecheck",value:function instancecheck(e){return e instanceof en}},{key:"weekday",value:function weekday(e){return Ve.weekday(e._date)}},{key:"calendar",value:function calendar(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4;return Ve.calendar(e._date,t,n)}},{key:"week",value:function week(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4;return Ve.calendar(e._date,t,n)[1]}},{key:"day",value:function day(e){return e._date.getDate()}},{key:"month",value:function month(e){return e._date.getMonth()+1}},{key:"year",value:function year(e){return e._date.getFullYear()}},{key:"date",value:function date(e){return e}},{key:"mimeformat",value:function mimeformat(e){var t=e._date;return["Mon","Tue","Wed","Thu","Fri","Sat","Sun"][Ve.weekday(t)]+", "+_lpad(t.getDate(),"0",2)+" "+["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()]+" "+t.getFullYear()}},{key:"isoformat",value:function isoformat(e){var t=e._date;return t.getFullYear()+"-"+_lpad((t.getMonth()+1).toString(),"0",2)+"-"+_lpad(t.getDate().toString(),"0",2)}},{key:"yearday",value:function yearday(e){return Ve.yearday(e._date)}}]),DateType}(ne,ee.call);Be.prototype.attrs=new Set(["weekday","week","calendar","day","month","year","date","mimeformat","isoformat","yearday"]),expose(Be.prototype.weekday,[]),expose(Be.prototype.calendar,["firstweekday","pk=",0,"mindaysinfirstweek","pk=",4]),expose(Be.prototype.week,["firstweekday","pk=",0,"mindaysinfirstweek","pk=",4]),expose(Be.prototype.day,[]),expose(Be.prototype.month,[]),expose(Be.prototype.year,[]),expose(Be.prototype.date,[]),expose(Be.prototype.mimeformat,[]),expose(Be.prototype.isoformat,[]),expose(Be.prototype.yearday,[]),expose(Be.prototype,["year","pk","month","pk","day","pk"],{name:"date"});var Fe=new Be(null,"date","A date"),He=function(e,t){_inherits(DateTimeType,e);var n=_createSuper(DateTimeType);function DateTimeType(){return _classCallCheck(this,DateTimeType),n.apply(this,arguments)}return _createClass(DateTimeType,[{key:t,value:function value(e,t,n){return new Date(e,t-1,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,(arguments.length>6&&void 0!==arguments[6]?arguments[6]:0)/1e3)}},{key:"instancecheck",value:function instancecheck(e){return"[object Date]"==Object.prototype.toString.call(e)}},{key:"weekday",value:function weekday(e){var t=e.getDay();return t?t-1:6}},{key:"calendar",value:function calendar(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4;t=_mod(t,7),n<1?n=1:n>7&&(n=7);for(var i=1;i>=-1;--i){var o=e.getFullYear()+i,s=new Date(o,0,n),u=_mod(this.weekday(s)-t,7),l=s.getFullYear(),c=s.getMonth(),p=s.getDate()-u,f=new Date(l,c,p);if(e.getTime()>=f.getTime()){var _=$t.prototype._do(e,f);return[o,Math.floor(_.days()/7)+1,this.weekday(e)]}}}},{key:"week",value:function week(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4;return this.calendar(e,t,n)[1]}},{key:"day",value:function day(e){return e.getDate()}},{key:"month",value:function month(e){return e.getMonth()+1}},{key:"year",value:function year(e){return e.getFullYear()}},{key:"hour",value:function hour(e){return e.getHours()}},{key:"minute",value:function minute(e){return e.getMinutes()}},{key:"second",value:function second(e){return e.getSeconds()}},{key:"microsecond",value:function microsecond(e){return 1e3*e.getMilliseconds()}},{key:"date",value:function date(e){return new en(Ve.year(e),Ve.month(e),Ve.day(e))}},{key:"mimeformat",value:function mimeformat(e){return["Mon","Tue","Wed","Thu","Fri","Sat","Sun"][Ve.weekday(e)]+", "+_lpad(e.getDate(),"0",2)+" "+["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()]+" "+e.getFullYear()+" "+_lpad(e.getHours(),"0",2)+":"+_lpad(e.getMinutes(),"0",2)+":"+_lpad(e.getSeconds(),"0",2)+" GMT"}},{key:"isoformat",value:function isoformat(e){var t=e.getFullYear(),n=e.getMonth()+1,i=e.getDate(),o=e.getHours(),s=e.getMinutes(),u=e.getSeconds(),l=e.getMilliseconds(),c=t+"-"+_lpad(n.toString(),"0",2)+"-"+_lpad(i.toString(),"0",2)+"T"+_lpad(o.toString(),"0",2)+":"+_lpad(s.toString(),"0",2)+":"+_lpad(u.toString(),"0",2);return l&&(c+="."+_lpad(l.toString(),"0",3)+"000"),c}},{key:"yearday",value:function yearday(e){var t=_isleap(e)?1:0,n=e.getDate();switch(e.getMonth()){case 0:return n;case 1:return 31+n;case 2:return 59+t+n;case 3:return 59+t+31+n;case 4:return 59+t+31+30+n;case 5:return 59+t+31+30+31+n;case 6:return 59+t+31+30+31+30+n;case 7:return 59+t+31+30+31+30+31+n;case 8:return 59+t+31+30+31+30+31+31+n;case 9:return 59+t+31+30+31+30+31+31+30+n;case 10:return 59+t+31+30+31+30+31+31+30+31+n;case 11:return 59+t+31+30+31+30+31+31+30+31+30+n}}},{key:"timestamp",value:function timestamp(e){return e.getTime()/1e3}}]),DateTimeType}(ne,ee.call);He.prototype.attrs=new Set(["weekday","week","calendar","day","month","year","hour","minute","second","microsecond","date","mimeformat","isoformat","yearday","timestamp"]),expose(He.prototype.weekday,[]),expose(He.prototype.calendar,["firstweekday","pk=",0,"mindaysinfirstweek","pk=",4]),expose(He.prototype.week,["firstweekday","pk=",0,"mindaysinfirstweek","pk=",4]),expose(He.prototype.day,[]),expose(He.prototype.month,[]),expose(He.prototype.year,[]),expose(He.prototype.hour,[]),expose(He.prototype.minute,[]),expose(He.prototype.second,[]),expose(He.prototype.microsecond,[]),expose(He.prototype.date,[]),expose(He.prototype.mimeformat,[]),expose(He.prototype.isoformat,[]),expose(He.prototype.yearday,[]),expose(He.prototype.timestamp,[]),expose(He.prototype,["year","pk","month","pk","day","pk","hour","pk=",0,"minute","pk=",0,"second","pk=",0,"microsecond","pk=",0],{name:"datetime"});var Ve=new He(null,"datetime","A datetime"),Re=function(e){_inherits(FunctionType,e);var t=_createSuper(FunctionType);function FunctionType(){return _classCallCheck(this,FunctionType),t.apply(this,arguments)}return _createClass(FunctionType,[{key:"instancecheck",value:function instancecheck(e){return"function"==typeof e||_istemplate(e)}}]),FunctionType}(ne),qe=new Re(null,"function","A callable function"),Le=function(e){_inherits(GenericType,e);var t=_createSuper(GenericType);function GenericType(e){var n;return _classCallCheck(this,GenericType),(n=t.call(this,e.classmodule||null,e.classname||e.name,e.classdoc||null))._constructor=e,n}return _createClass(GenericType,[{key:"getattr",value:function getattr(e,t){if("function"==typeof e[ee.getattr])return e[ee.getattr](t);throw new rt(e,t)}},{key:"hasattr",value:function hasattr(e,t){if("function"!=typeof e[ee.getattr])return!1;try{return e[ee.getattr](t),!0}catch(e){if(e instanceof rt&&e.obj===object)return!1;throw e}}},{key:"instancecheck",value:function instancecheck(e){return e instanceof this._constructor}}]),GenericType}(ne),Ne=function(){function Context(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;_classCallCheck(this,Context),this.vars=e||{},this.globals=_extend(_n,t||{}),this.indents=[],this.escapes=[],this._output=[]}return _createClass(Context,[{key:"inheritvars",value:function inheritvars(){var e=Object.create(this);return e.vars=Object.create(this.vars),e}},{key:"withindent",value:function withindent(e){var t=Object.create(this);return null!==e&&(t.indents=this.indents.slice(),t.indents.push(e)),t}},{key:"replaceoutput",value:function replaceoutput(){var e=Object.create(this);return e._output=[],e}},{key:"replacevars",value:function replacevars(e){var t=Object.create(this);return t.vars=e,t}},{key:"output",value:function output(e){var t,n=_createForOfIteratorHelper(this.escapes);try{for(n.s();!(t=n.n()).done;){e=(0,t.value)(e)}}catch(e){n.e(e)}finally{n.f()}this._output.push(e)}},{key:"getoutput",value:function getoutput(){return this._output.join("")}},{key:"get",value:function get(e){var t=this.vars[e];return void 0===t&&(t=this.globals[e]),t}},{key:"set",value:function set(e,t){this.vars[e]=t}}]),Context}();function Exception(e,t,n){var i=new Error(e,t,n);return Object.setPrototypeOf?Object.setPrototypeOf(i,Object.getPrototypeOf(this)):i.__proto__=this,i.context=null,i}Exception.prototype=Object.create(Error.prototype,{constructor:{value:Error,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(Exception,Error):Exception.__proto__=Error,Exception.prototype[ee.getattr]=function getattr(e){if("context"===e)return this.context;throw new rt(this,e)};var Xe=function(e){_inherits(InternalException,e);var t=_createSuper(InternalException);function InternalException(){return _classCallCheck(this,InternalException),t.apply(this,arguments)}return _createClass(InternalException)}(Exception),Ue=function(e){_inherits(ReturnException,e);var t=_createSuper(ReturnException);function ReturnException(e){var n;return _classCallCheck(this,ReturnException),(n=t.call(this,"return")).result=e,n}return _createClass(ReturnException)}(Xe),Ye=function(e){_inherits(BreakException,e);var t=_createSuper(BreakException);function BreakException(){return _classCallCheck(this,BreakException),t.call(this,"break")}return _createClass(BreakException)}(Xe),ze=function(e){_inherits(ContinueException,e);var t=_createSuper(ContinueException);function ContinueException(){return _classCallCheck(this,ContinueException),t.call(this,"continue")}return _createClass(ContinueException)}(Xe),Ge=function(e){_inherits(SyntaxError,e);var t=_createSuper(SyntaxError);function SyntaxError(){return _classCallCheck(this,SyntaxError),t.apply(this,arguments)}return _createClass(SyntaxError)}(Exception),Je=function(e){_inherits(LValueRequiredError,e);var t=_createSuper(LValueRequiredError);function LValueRequiredError(){return _classCallCheck(this,LValueRequiredError),t.call(this,"lvalue required")}return _createClass(LValueRequiredError)}(Ge),We=function(e){_inherits(TypeError,e);var t=_createSuper(TypeError);function TypeError(){return _classCallCheck(this,TypeError),t.apply(this,arguments)}return _createClass(TypeError)}(Exception),$e=function(e){_inherits(ValueError,e);var t=_createSuper(ValueError);function ValueError(){return _classCallCheck(this,ValueError),t.apply(this,arguments)}return _createClass(ValueError)}(Exception),Ke=function(e){_inherits(ArgumentError,e);var t=_createSuper(ArgumentError);function ArgumentError(){return _classCallCheck(this,ArgumentError),t.apply(this,arguments)}return _createClass(ArgumentError)}(Exception),Qe=function(e){_inherits(ParameterError,e);var t=_createSuper(ParameterError);function ParameterError(){return _classCallCheck(this,ParameterError),t.apply(this,arguments)}return _createClass(ParameterError)}(Exception),Ze=function(e){_inherits(NotSubscriptableError,e);var t=_createSuper(NotSubscriptableError);function NotSubscriptableError(e){var n;return _classCallCheck(this,NotSubscriptableError),(n=t.call(this,"Object of type "+_type(e).fullname()+" is not subscriptable")).obj=e,n}return _createClass(NotSubscriptableError,[{key:"toString",value:function toString(){return"Object of type "+_type(this.obj).fullname()+" is not subscriptable"}}]),NotSubscriptableError}(Exception),et=function(e){_inherits(ZeroDivisionError,e);var t=_createSuper(ZeroDivisionError);function ZeroDivisionError(){return _classCallCheck(this,ZeroDivisionError),t.call(this,"division by zero")}return _createClass(ZeroDivisionError)}(Exception),tt=function(e){_inherits(IndexError,e);var t=_createSuper(IndexError);function IndexError(e,n){var i;return _classCallCheck(this,IndexError),(i=t.call(this,"index "+_repr2(n)+" out of range")).obj=e,i.index=n,i}return _createClass(IndexError,[{key:"toString",value:function toString(){return"index "+this.index+" out of range for "+_type(this.obj).fullname()}}]),IndexError}(Exception),rt=function(e){_inherits(AttributeError,e);var t=_createSuper(AttributeError);function AttributeError(e,n){var i;return _classCallCheck(this,AttributeError),(i=t.call(this,"object of type "+_type(e).fullname()+" has no attribute "+_repr2(n))).obj=e,i.attrname=n,i}return _createClass(AttributeError)}(Exception),nt=function(e){_inherits(KeyError,e);var t=_createSuper(KeyError);function KeyError(e,n){var i;return _classCallCheck(this,KeyError),(i=t.call(this,"key "+_repr2(n)+" not found in object of type "+_type(e).fullname())).obj=e,i.key=n,i}return _createClass(KeyError)}(Exception),at=function(e){_inherits(NotImplementedError,e);var t=_createSuper(NotImplementedError);function NotImplementedError(){return _classCallCheck(this,NotImplementedError),t.apply(this,arguments)}return _createClass(NotImplementedError)}(Exception),it=function(e,t){_inherits(LocationError,e);var n=_createSuper(LocationError);function LocationError(e){var t;return _classCallCheck(this,LocationError),(t=n.call(this,"nested exception in "+_repr2(e))).location=e,t}return _createClass(LocationError,[{key:"_templateprefix",value:function _templateprefix(){var e=this.location.template,t=[];null!==e.parenttemplate?t.push("in local template "):t.push("in template ");for(var n=!0;null!=e;)n?n=!1:t.push(" in "),t.push(e.name?_repr2(e.name):"(unnamed)"),e=e.parenttemplate;return t.join("")}},{key:"toString",value:function toString(){this.location.template;var e=this._templateprefix(),t=this.location.startsourceprefix,n=this.location.startsource,i=this.location.startsourcesuffix,o=(t=_repr2(t).slice(1,-1))+(n=_repr2(n).slice(1,-1))+(i=_repr2(i).slice(1,-1)),s=_str_repeat(" ",t.length)+_str_repeat("~",n.length);return e+": "+("offset "+this.location.pos.start+":"+this.location.pos.stop+"; line "+this.location.startline+"; col "+this.location.startcol)+"\n"+o+"\n"+s}},{key:t,value:function value(e){switch(e){case"context":return this.context;case"location":return this.location;default:throw new rt(this,e)}}}]),LocationError}(Exception,ee.getattr);o=ee.getattr,s=ee.setitem,u=ee.str,l=ee.repr;var ot=function(e){_inherits(AST,e);var t=_createSuper(AST);function AST(e,n,i){var o,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1;return _classCallCheck(this,AST),(o=t.call(this)).template=e,o.startposstart=n,o.startposstop=i,o._startline=null,o._startcol=null,o.stopposstart=s,o.stopposstop=u,o._stopline=null,o._stopcol=null,o}return _createClass(AST,[{key:"startline",get:function get(){if(null===this._startline){var e=_slicedToArray(_lineColFromPos(this.template._source,this.startposstart),2);this._startline=e[0],this._startcol=e[1]}return this._startline}},{key:"startcol",get:function get(){if(null===this._startcol){var e=_slicedToArray(_lineColFromPos(this.template._source,this.startposstart),2);this._startline=e[0],this._startcol=e[1]}return this._startcol}},{key:"startsource",get:function get(){return this.template._source.slice(this.startposstart,this.startposstop)}},{key:"startsourceprefix",get:function get(){return _sourceprefix(this.template._source,this.startposstart)}},{key:"startsourcesuffix",get:function get(){return _sourcesuffix(this.template._source,this.startposstop)}},{key:"fullsource",get:function get(){return this.template._source}},{key:"startpos",get:function get(){return new mr(this.startposstart,this.startposstop)}},{key:"stoppos",get:function get(){return-1==this.stopposstart?null:new mr(this.stopposstart,this.stopposstop)}},{key:"pos",get:function get(){return new mr(this.startposstart,-1===this.stopposstop?this.startposstop:this.stopposstop)}},{key:"source",get:function get(){return this.template._source.slice(this.startposstart,-1===this.stopposstop?this.startposstop:this.stopposstop)}},{key:"sourceprefix",get:function get(){return _sourceprefix(this.template._source,this.startposstart)}},{key:"sourcesuffix",get:function get(){return _sourcesuffix(this.template._source,-1===this.stopposstop?this.startposstop:this.stopposstop)}},{key:"stopline",get:function get(){if(null===this._stopline){var e=_slicedToArray(_lineColFromPos(this.template._source,this.stopposstop),2);this._stopline=e[0],this._stopcol=e[1]}return this._stopline}},{key:"stopcol",get:function get(){if(null===this._stopcol){var e=_slicedToArray(_lineColFromPos(this.template._source,this.stopposstop),2);this._stopline=e[0],this._stopcol=e[1]}return this._stopcol}},{key:"stopsource",get:function get(){return null!=this.stoppos?this.template._source.slice(this.stopposstart,this.stopposstop):null}},{key:"stopsourceprefix",get:function get(){return null!=this.stoppos?_sourceprefix(this.template._source,this.stopposstart):null}},{key:"stopsourcesuffix",get:function get(){return null!=this.stoppos?_sourcesuffix(this.template._source,this.stopposstop):null}},{key:o,value:function value(e){if("type"===e||"startpos"===e||"startline"===e||"startcol"===e||"startsource"===e||"startsourceprefix"===e||"startsourcesuffix"===e||"pos"===e||"source"===e||"sourceprefix"===e||"sourcesuffix"===e||"fullsource"===e)return this[e];if(this._ul4onattrs.indexOf(e)>=0)return this[e];throw new rt(this,e)}},{key:s,value:function value(e,t){throw new We("object is immutable")}},{key:u,value:function value(){var e=[];return this._str(e),_formatsource(e)}},{key:l,value:function value(){var e=[];return this._repr(e),_formatsource(e)}},{key:"_decorate_exception",value:function _decorate_exception(e){for(;void 0!==e.context&&null!==e.context;)e=e.context;e.context=new it(this)}},{key:"_handle_eval",value:function _handle_eval(e){try{return this._eval(e)}catch(e){throw e.context||this._decorate_exception(e),e}}},{key:"_handle_eval_set",value:function _handle_eval_set(e,t){try{return this._eval_set(e,t)}catch(e){throw e instanceof it||this._decorate_exception(e),e}}},{key:"_eval_set",value:function _eval_set(e,t){throw new Je}},{key:"_handle_eval_modify",value:function _handle_eval_modify(e,t,n){try{return this._eval_modify(e,t,n)}catch(e){throw e instanceof it||this._decorate_exception(e),e}}},{key:"_eval_modify",value:function _eval_modify(e,t,n){throw new Je}},{key:"_repr",value:function _repr(e){}},{key:"_str",value:function _str(e){e.push(this.source.replace(/\r?\n/g," "))}},{key:"ul4ondump",value:function ul4ondump(e){var t,n=_createForOfIteratorHelper(this._ul4onattrs);try{for(n.s();!(t=n.n()).done;){var i=t.value;e.dump(this[i])}}catch(e){n.e(e)}finally{n.f()}}},{key:"ul4onload",value:function ul4onload(e){var t,n=_createForOfIteratorHelper(this._ul4onattrs);try{for(n.s();!(t=n.n()).done;){this[t.value]=e.load()}}catch(e){n.e(e)}finally{n.f()}}}]),AST}(te);_defineProperty(ot,"classmodule","ul4"),_defineProperty(ot,"classdoc","Base class for all UL4 syntax tree nodes."),ot.prototype._ul4onattrs=["template","startposstart","startposstop"];var st=function(e){_inherits(TextAST,e);var t=_createSuper(TextAST);function TextAST(e,n,i,o){var s;return _classCallCheck(this,TextAST),(s=t.call(this,e,n,i)).text=o,s}return _createClass(TextAST,[{key:"_eval",value:function _eval(e){e.output(this.text)}},{key:"_str",value:function _str(e){e.push("text ",_repr2(this.text))}},{key:"_repr",value:function _repr(e){e.push("<",this.constructor.name," ",_repr2(this.text),">")}}]),TextAST}(ot);_defineProperty(st,"classdoc","AST node for literal text (i.e. the stuff between tags)."),st.prototype._ul4onattrs=ot.prototype._ul4onattrs.concat(["text"]);var ut=function(e){_inherits(IndentAST,e);var t=_createSuper(IndentAST);function IndentAST(){return _classCallCheck(this,IndentAST),t.apply(this,arguments)}return _createClass(IndentAST,[{key:"_eval",value:function _eval(e){var t,n=_createForOfIteratorHelper(e.indents);try{for(n.s();!(t=n.n()).done;){var i=t.value;e.output(i)}}catch(e){n.e(e)}finally{n.f()}e.output(this.text)}},{key:"_str",value:function _str(e){e.push("indent ",_repr2(this.text))}}]),IndentAST}(st);_defineProperty(ut,"classdoc","AST node for literal text that is an indentation at the start of the line.");var lt=function(e){_inherits(LineEndAST,e);var t=_createSuper(LineEndAST);function LineEndAST(){return _classCallCheck(this,LineEndAST),t.apply(this,arguments)}return _createClass(LineEndAST,[{key:"_str",value:function _str(e){e.push("lineend ",_repr2(this.text))}}]),LineEndAST}(st);_defineProperty(lt,"classdoc","AST node for literal text that is the end of a line.");var ct=function(e){_inherits(CodeAST,e);var t=_createSuper(CodeAST);function CodeAST(){return _classCallCheck(this,CodeAST),t.apply(this,arguments)}return _createClass(CodeAST)}(ot);_defineProperty(ct,"classdoc","The base class of all AST nodes that are not literal text.");var pt=function(e){_inherits(ConstAST,e);var t=_createSuper(ConstAST);function ConstAST(e,n,i,o){var s;return _classCallCheck(this,ConstAST),(s=t.call(this,e,n,i)).value=o,s}return _createClass(ConstAST,[{key:"_repr",value:function _repr(e){e.push("<",this.constructor.name," ",_repr2(this.value),">")}},{key:"_eval",value:function _eval(e){return this.value}}]),ConstAST}(ct);_defineProperty(pt,"classdoc","AST node for a constant value."),pt.prototype._ul4onattrs=ct.prototype._ul4onattrs.concat(["value"]);var ft=function(e){_inherits(ItemArgBase,e);var t=_createSuper(ItemArgBase);function ItemArgBase(){return _classCallCheck(this,ItemArgBase),t.apply(this,arguments)}return _createClass(ItemArgBase,[{key:"_handle_eval_list",value:function _handle_eval_list(e,t){try{return this._eval_list(e,t)}catch(e){throw e instanceof Xe||e instanceof it||this._decorate_exception(e),e}}},{key:"_handle_eval_set",value:function _handle_eval_set(e,t){try{return this._eval_set(e,t)}catch(e){throw e instanceof Xe||e instanceof it||this._decorate_exception(e),e}}},{key:"_handle_eval_dict",value:function _handle_eval_dict(e,t){try{return this._eval_dict(e,t)}catch(e){throw e instanceof Xe||e instanceof it||this._decorate_exception(e),e}}},{key:"_handle_eval_call",value:function _handle_eval_call(e,t,n){try{return this._eval_call(e,t,n)}catch(e){throw e instanceof Xe||e instanceof it||this._decorate_exception(e),e}}}]),ItemArgBase}(ct),_t=function(e){_inherits(SeqItemAST,e);var t=_createSuper(SeqItemAST);function SeqItemAST(e,n,i,o){var s;return _classCallCheck(this,SeqItemAST),(s=t.call(this,e,n,i)).value=o,s}return _createClass(SeqItemAST,[{key:"_repr",value:function _repr(e){e.push("<",this.constructor.name," value=",_repr2(this.value),">")}},{key:"_eval_list",value:function _eval_list(e,t){var n=this.value._handle_eval(e);t.push(n)}},{key:"_eval_set",value:function _eval_set(e,t){var n=this.value._handle_eval(e);t.add(n)}}]),SeqItemAST}(ft);_defineProperty(_t,"classdoc",'AST node for an item in a list/set "literal" (e.g. ``{x, y}`` or ``[x, y]``)'),_t.prototype._ul4onattrs=ft.prototype._ul4onattrs.concat(["value"]);var ht=function(e){_inherits(UnpackSeqItemAST,e);var t=_createSuper(UnpackSeqItemAST);function UnpackSeqItemAST(e,n,i,o){var s;return _classCallCheck(this,UnpackSeqItemAST),(s=t.call(this,e,n,i)).value=o,s}return _createClass(UnpackSeqItemAST,[{key:"_repr",value:function _repr(e){e.push("<",this.constructor.name," value=",_repr2(this.value),">")}},{key:"_eval_list",value:function _eval_list(e,t){for(var n=_iter(this.value._handle_eval(e));;){var i=n.next();if(i.done)break;t.push(i.value)}}},{key:"_eval_set",value:function _eval_set(e,t){for(var n=_iter(this.value._handle_eval(e));;){var i=n.next();if(i.done)break;t.add(i.value)}}}]),UnpackSeqItemAST}(ft);_defineProperty(ht,"classdoc",'AST node for an ``*`` unpacking expression in a list/set "literal"\n(e.g. the ``y`` in ``{x, *y}`` or ``[x, *y]``)'),ht.prototype._ul4onattrs=ft.prototype._ul4onattrs.concat(["value"]);var dt=function(e){_inherits(DictItemAST,e);var t=_createSuper(DictItemAST);function DictItemAST(e,n,i,o,s){var u;return _classCallCheck(this,DictItemAST),(u=t.call(this,e,n,i)).key=o,u.value=s,u}return _createClass(DictItemAST,[{key:"_repr",value:function _repr(e){e.push("<",this.constructor.name," key=",_repr2(this.key)," value=",_repr2(this.value),">")}},{key:"_eval_dict",value:function _eval_dict(e,t){var n=this.key._handle_eval(e),i=this.value._handle_eval(e);t.set(n,i)}}]),DictItemAST}(ft);_defineProperty(dt,"classdoc","AST node for a dictionary entry in a dict expression (:class:`DictAST`)."),dt.prototype._ul4onattrs=ft.prototype._ul4onattrs.concat(["key","value"]);var vt=function(e){_inherits(UnpackDictItemAST,e);var t=_createSuper(UnpackDictItemAST);function UnpackDictItemAST(e,n,i,o){var s;return _classCallCheck(this,UnpackDictItemAST),(s=t.call(this,e,n,i)).item=o,s}return _createClass(UnpackDictItemAST,[{key:"_repr",value:function _repr(e){e.push("<",this.constructor.name," item=",_repr2(this.item),">")}},{key:"_eval_dict",value:function _eval_dict(e,t){var n=this.item._handle_eval(e);if(_isiter(n))for(;;){var i=n.next();if(i.done)break;if(!_islist(i.value)||2!=i.value.length)throw new Ke("** requires an iterable of (key, value) pairs");t.set(i.value[0],i.value[1])}else if(_islist(n)){var o,s=_createForOfIteratorHelper(n);try{for(s.s();!(o=s.n()).done;){var u=o.value;if(!_islist(u)||2!=u.length)throw new Ke("** requires a list of (key, value) pairs");t.set(u[0],u[1])}}catch(e){s.e(e)}finally{s.f()}}else if(_ismap(n)){var l,c=_createForOfIteratorHelper(n);try{for(c.s();!(l=c.n()).done;){var p=_slicedToArray(l.value,2),f=p[0],_=p[1];t.set(f,_)}}catch(e){c.e(e)}finally{c.f()}}else if(_isobject(n))for(var h in n)t.set(h,n[h])}}]),UnpackDictItemAST}(ft);_defineProperty(vt,"classdoc",'AST node for ``**`` unpacking expressions in dict "literal"\n(e.g. the ``**u`` in ``{k: v, **u}``).'),vt.prototype._ul4onattrs=ft.prototype._ul4onattrs.concat(["item"]);var yt=function(e){_inherits(PositionalArgumentAST,e);var t=_createSuper(PositionalArgumentAST);function PositionalArgumentAST(e,n,i,o){var s;return _classCallCheck(this,PositionalArgumentAST),(s=t.call(this,e,n,i)).value=o,s}return _createClass(PositionalArgumentAST,[{key:"_repr",value:function _repr(e){e.push("<",this.constructor.name," value=",_repr2(this.value),">")}},{key:"_eval_call",value:function _eval_call(e,t,n){var i=this.value._handle_eval(e);t.push(i)}}]),PositionalArgumentAST}(ft);_defineProperty(yt,"classdoc","AST node for a positional argument. (e.g. the ``x`` in ``f(x)``)."),yt.prototype._ul4onattrs=ft.prototype._ul4onattrs.concat(["value"]);var mt=function(e){_inherits(KeywordArgumentAST,e);var t=_createSuper(KeywordArgumentAST);function KeywordArgumentAST(e,n,i,o,s){var u;return _classCallCheck(this,KeywordArgumentAST),(u=t.call(this,e,n,i)).name=o,u.value=s,u}return _createClass(KeywordArgumentAST,[{key:"_repr",value:function _repr(e){e.push("<",this.constructor.name," name=",_repr2(this.name)," value=",_repr2(this.value),">")}},{key:"_eval_call",value:function _eval_call(e,t,n){if(n.hasOwnProperty(this.name))throw new Ke("duplicate keyword argument "+this.name);var i=this.value._handle_eval(e);n[this.name]=i}}]),KeywordArgumentAST}(ft);_defineProperty(mt,"classdoc","AST node for a keyword argument in a :class:`CallAST` (e.g. the ``x=y``\nin the function call ``f(x=y)``)."),mt.prototype._ul4onattrs=ft.prototype._ul4onattrs.concat(["name","value"]);var gt=function(e){_inherits(UnpackListArgumentAST,e);var t=_createSuper(UnpackListArgumentAST);function UnpackListArgumentAST(e,n,i,o){var s;return _classCallCheck(this,UnpackListArgumentAST),(s=t.call(this,e,n,i)).item=o,s}return _createClass(UnpackListArgumentAST,[{key:"_repr",value:function _repr(e){e.push("<",this.constructor.name," item=",_repr2(this.item),">")}},{key:"_eval_call",value:function _eval_call(e,t,n){var i=this.item._handle_eval(e);t.push.apply(t,_toConsumableArray(i))}}]),UnpackListArgumentAST}(ft);_defineProperty(gt,"classdoc","AST node for an ``*`` unpacking expressions in a :class:`CallAST`\n(e.g. the ``*x`` in ``f(*x)``)."),gt.prototype._ul4onattrs=ft.prototype._ul4onattrs.concat(["item"]);var bt=function(e){_inherits(UnpackDictArgumentAST,e);var t=_createSuper(UnpackDictArgumentAST);function UnpackDictArgumentAST(e,n,i,o){var s;return _classCallCheck(this,UnpackDictArgumentAST),(s=t.call(this,e,n,i)).item=o,s}return _createClass(UnpackDictArgumentAST,[{key:"_repr",value:function _repr(e){e.push("<",this.constructor.name," item=",_repr2(this.item),">")}},{key:"_eval_call",value:function _eval_call(e,t,n){var i=this.item._handle_eval(e);if(_islist(i)){var o,s=_createForOfIteratorHelper(i);try{for(s.s();!(o=s.n()).done;){var u=o.value;if(!_islist(u)||2!=u.length)throw new Ke("** requires a list of (key, value) pairs");var l=_slicedToArray(u,2),c=l[0],p=l[1];if(n.hasOwnProperty(c))throw new Ke("duplicate keyword argument "+c);n[c]=p}}catch(e){s.e(e)}finally{s.f()}}else if(_ismap(i)){var f,_=_createForOfIteratorHelper(i);try{for(_.s();!(f=_.n()).done;){var h=_slicedToArray(f.value,2),d=h[0],v=h[1];if(n.hasOwnProperty(d))throw new Ke("duplicate keyword argument "+d);n[d]=v}}catch(e){_.e(e)}finally{_.f()}}else if(_isobject(i))for(var y in i){if(n.hasOwnProperty(y))throw new Ke("duplicate keyword argument "+y);n[y]=i[y]}}}]),UnpackDictArgumentAST}(ft);_defineProperty(bt,"classdoc","AST node for an ``**`` unpacking expressions in a :class:`CallAST`\n(e.g. the ``**x`` in ``f(**x)``)."),bt.prototype._ul4onattrs=ft.prototype._ul4onattrs.concat(["item"]);var kt=function(e){_inherits(ListAST,e);var t=_createSuper(ListAST);function ListAST(e,n,i){var o;return _classCallCheck(this,ListAST),(o=t.call(this,e,n,i)).items=[],o}return _createClass(ListAST,[{key:"_repr",value:function _repr(e){e.push("<",this.constructor.name);var t,n=_createForOfIteratorHelper(this.items);try{for(n.s();!(t=n.n()).done;){var i=t.value;e.push(" "),i._repr(e)}}catch(e){n.e(e)}finally{n.f()}e.push(">")}},{key:"_eval",value:function _eval(e){var t,n=[],i=_createForOfIteratorHelper(this.items);try{for(i.s();!(t=i.n()).done;){t.value._handle_eval_list(e,n)}}catch(e){i.e(e)}finally{i.f()}return n}}]),ListAST}(ct);_defineProperty(kt,"classdoc","AST node for creating a list object (e.g. ``[x, y, *z]``)."),kt.prototype._ul4onattrs=ct.prototype._ul4onattrs.concat(["items"]);var St=function(e){_inherits(ListComprehensionAST,e);var t=_createSuper(ListComprehensionAST);function ListComprehensionAST(e,n,i,o,s,u,l){var c;return _classCallCheck(this,ListComprehensionAST),(c=t.call(this,e,n,i)).item=o,c.varname=s,c.container=u,c.condition=l,c}return _createClass(ListComprehensionAST,[{key:"_repr",value:function _repr(e){e.push("<",this.constructor.name," item="),this.item._repr(e),e.push(" varname=",_repr2(this.varname)," container="),this.container._repr(e),null!==this.condition&&(e.push(" condition="),this.condition._repr(e)),e.push(">")}},{key:"_eval",value:function _eval(e){for(var t=this.container._handle_eval(e),n=e.inheritvars(),i=[],o=_iter(t);;){var s=o.next();if(s.done)break;var u,l=_createForOfIteratorHelper(_unpackvar(this.varname,s.value));try{for(l.s();!(u=l.n()).done;){var c=_slicedToArray(u.value,2),p=c[0],f=c[1];p._handle_eval_set(n,f)}}catch(e){l.e(e)}finally{l.f()}(null===this.condition||_bool(this.condition._handle_eval(n)))&&i.push(this.item._handle_eval(n))}return i}}]),ListComprehensionAST}(ct);_defineProperty(St,"classdoc","AST node for a list comprehension (e.g. ``[v for (a, b) in w if c]``."),St.prototype._ul4onattrs=ct.prototype._ul4onattrs.concat(["item","varname","container","condition"]);var Tt=function(e){_inherits(SetAST,e);var t=_createSuper(SetAST);function SetAST(e,n,i){var o;return _classCallCheck(this,SetAST),(o=t.call(this,e,n,i)).items=[],o}return _createClass(SetAST,[{key:"_repr",value:function _repr(e){e.push("<",this.constructor.name);var t,n=_createForOfIteratorHelper(this.items);try{for(n.s();!(t=n.n()).done;){var i=t.value;e.push(" "),i._repr(e)}}catch(e){n.e(e)}finally{n.f()}e.push(">")}},{key:"_eval",value:function _eval(e){var t,n=new Set,i=_createForOfIteratorHelper(this.items);try{for(i.s();!(t=i.n()).done;){t.value._handle_eval_set(e,n)}}catch(e){i.e(e)}finally{i.f()}return n}}]),SetAST}(ct);_defineProperty(Tt,"classdoc","AST node for creating a set object (e.g. ``{x, y, *z}``."),Tt.prototype._ul4onattrs=ct.prototype._ul4onattrs.concat(["items"]),c=ee.getattr;var At=function(e){_inherits(SetComprehensionAST,e);var t=_createSuper(SetComprehensionAST);function SetComprehensionAST(e,n,i,o,s,u,l){var c;return _classCallCheck(this,SetComprehensionAST),(c=t.call(this,e,n,i)).item=o,c.varname=s,c.container=u,c.condition=l,c}return _createClass(SetComprehensionAST,[{key:c,value:function value(e){switch(e){case"item":return this.item;case"varname":return this.varname;case"container":return this.container;case"condition":return this.condition;default:return _get$1(_getPrototypeOf(SetComprehensionAST.prototype),ee.getattr,this).call(this,e)}}},{key:"_repr",value:function _repr(e){e.push("<",this.constructor.name," item="),this.item._repr(e),e.push(" varname="),this.varname._repr(e),e.push(" container="),this.container._repr(e),null!==this.condition&&(e.push(" condition="),this.condition._repr(e)),e.push(">")}},{key:"_eval",value:function _eval(e){for(var t=this.container._handle_eval(e),n=e.inheritvars(),i=new Set,o=_iter(t);;){var s=o.next();if(s.done)break;var u,l=_createForOfIteratorHelper(_unpackvar(this.varname,s.value));try{for(l.s();!(u=l.n()).done;){var c=_slicedToArray(u.value,2),p=c[0],f=c[1];p._handle_eval_set(n,f)}}catch(e){l.e(e)}finally{l.f()}(null===this.condition||_bool(this.condition._handle_eval(n)))&&i.add(this.item._handle_eval(n))}return i}}]),SetComprehensionAST}(ct);_defineProperty(At,"classdoc","AST node for a set comprehension (e.g. ``{v for (a, b) in w if c}``."),At.prototype._ul4onattrs=ct.prototype._ul4onattrs.concat(["item","varname","container","condition"]),p=ee.getattr;var wt=function(e){_inherits(DictAST,e);var t=_createSuper(DictAST);function DictAST(e,n,i){var o;return _classCallCheck(this,DictAST),(o=t.call(this,e,n,i)).items=[],o}return _createClass(DictAST,[{key:p,value:function value(e){return"items"===e?this.items:_get$1(_getPrototypeOf(DictAST.prototype),ee.getattr,this).call(this,e)}},{key:"_repr",value:function _repr(e){e.push("<",this.constructor.name);var t,n=_createForOfIteratorHelper(this.items);try{for(n.s();!(t=n.n()).done;){var i=t.value;e.push(" "),i._repr(e)}}catch(e){n.e(e)}finally{n.f()}e.push(">")}},{key:"_eval",value:function _eval(e){var t,n=new Map,i=_createForOfIteratorHelper(this.items);try{for(i.s();!(t=i.n()).done;){t.value._handle_eval_dict(e,n)}}catch(e){i.e(e)}finally{i.f()}return n}}]),DictAST}(ct);_defineProperty(wt,"classdoc","AST node for creating a dict object (e.g. `{k: v, **u}`."),wt.prototype._ul4onattrs=ct.prototype._ul4onattrs.concat(["items"]);var xt=function(e){_inherits(DictComprehensionAST,e);var t=_createSuper(DictComprehensionAST);function DictComprehensionAST(e,n,i,o,s,u,l,c){var p;return _classCallCheck(this,DictComprehensionAST),(p=t.call(this,e,n,i)).key=o,p.value=s,p.varname=u,p.container=l,p.condition=c,p}return _createClass(DictComprehensionAST,[{key:"_repr",value:function _repr(e){e.push("<",this.constructor.name," key="),this.key._repr(e),e.push(" value="),this.value._repr(e),e.push(" varname="),this.varname._repr(e),e.push(" container="),this.container._repr(e),null!==this.condition&&(e.push(" condition="),this.condition._repr(e)),e.push(">")}},{key:"_eval",value:function _eval(e){for(var t=this.container._handle_eval(e),n=e.inheritvars(),i=new Map,o=_iter(t);;){var s=o.next();if(s.done)break;var u,l=_createForOfIteratorHelper(_unpackvar(this.varname,s.value));try{for(l.s();!(u=l.n()).done;){var c=_slicedToArray(u.value,2),p=c[0],f=c[1];p._handle_eval_set(n,f)}}catch(e){l.e(e)}finally{l.f()}if(null===this.condition||_bool(this.condition._handle_eval(n))){var _=this.key._handle_eval(n),h=this.value._handle_eval(n);i.set(_,h)}}return i}}]),DictComprehensionAST}(ct);_defineProperty(xt,"classdoc","AST node for a dictionary comprehension (e.g. ``{k: v for (a, b) in w if c}``."),xt.prototype._ul4onattrs=ct.prototype._ul4onattrs.concat(["key","value","varname","container","condition"]);var Ct=function(e){_inherits(GeneratorExpressionAST,e);var t=_createSuper(GeneratorExpressionAST);function GeneratorExpressionAST(e,n,i,o,s,u,l){var c;return _classCallCheck(this,GeneratorExpressionAST),(c=t.call(this,e,n,i)).item=o,c.varname=s,c.container=u,c.condition=l,c}return _createClass(GeneratorExpressionAST,[{key:"_repr",value:function _repr(e){e.push("<",this.constructor.name," item="),this.item._repr(e),e.push(" varname="),this.varname._repr(e),e.push(" container="),this.container._repr(e),null!==this.condition&&(e.push(" condition="),this.condition._repr(e)),e.push(">")}},{key:"_eval",value:function _eval(e){var t=_iter(this.container._handle_eval(e)),n=e.inheritvars(),i=this;return{next:function next(){for(;;){var e=t.next();if(e.done)return e;var o,s=_createForOfIteratorHelper(_unpackvar(i.varname,e.value));try{for(s.s();!(o=s.n()).done;){var u=_slicedToArray(o.value,2),l=u[0],c=u[1];l._handle_eval_set(n,c)}}catch(e){s.e(e)}finally{s.f()}if(null===i.condition||_bool(i.condition._handle_eval(n)))return{value:i.item._handle_eval(n),done:!1}}}}}}]),GeneratorExpressionAST}(ct);_defineProperty(Ct,"classdoc","AST node for a generator expression (e.g. ``(x for (a, b) in w if c)``)."),Ct.prototype._ul4onattrs=ct.prototype._ul4onattrs.concat(["item","varname","container","condition"]);var jt=function(e){_inherits(VarAST,e);var t=_createSuper(VarAST);function VarAST(e,n,i,o){var s;return _classCallCheck(this,VarAST),(s=t.call(this,e,n,i)).name=o,s}return _createClass(VarAST,[{key:"_repr",value:function _repr(e){e.push("<",this.constructor.name," name=",_repr2(this.name),">")}},{key:"_eval",value:function _eval(e){return this._get(e,this.name)}},{key:"_eval_set",value:function _eval_set(e,t){this._set(e,this.name,t)}},{key:"_eval_modify",value:function _eval_modify(e,t,n){this._modify(e,t,this.name,n)}},{key:"_get",value:function _get(e,t){return e.get(t)}},{key:"_set",value:function _set(e,t,n){e.set(t,n)}},{key:"_modify",value:function _modify(e,t,n,i){var o=t._ido(e.get(n),i);e.set(n,o)}}]),VarAST}(ct);_defineProperty(jt,"classdoc","AST node for getting a variable."),jt.prototype._ul4onattrs=ct.prototype._ul4onattrs.concat(["name"]);var Ot=function(e){_inherits(UnaryAST,e);var t=_createSuper(UnaryAST);function UnaryAST(e,n,i,o){var s;return _classCallCheck(this,UnaryAST),(s=t.call(this,e,n,i)).obj=o,s}return _createClass(UnaryAST,[{key:"_repr",value:function _repr(e){e.push("<",this.constructor.name," obj="),this.obj._repr(e),e.push(">")}},{key:"_eval",value:function _eval(e){var t=this.obj._handle_eval(e);return this._do(t)}}]),UnaryAST}(ct);_defineProperty(Ot,"classdoc","Base class for all AST nodes implementing unary expressions\n(i.e. operators with one operand)."),Ot.prototype._ul4onattrs=ct.prototype._ul4onattrs.concat(["obj"]);var Pt=function(e){_inherits(NegAST,e);var t=_createSuper(NegAST);function NegAST(){return _classCallCheck(this,NegAST),t.apply(this,arguments)}return _createClass(NegAST,[{key:"_do",value:function _do(e){return null!==e&&"function"==typeof e[ee.neg]?e[ee.neg]():-e}}]),NegAST}(Ot);_defineProperty(Pt,"classdoc","AST node for a unary negation expression (e.g. ``-x``).");var Mt=function(e){_inherits(BitNotAST,e);var t=_createSuper(BitNotAST);function BitNotAST(){return _classCallCheck(this,BitNotAST),t.apply(this,arguments)}return _createClass(BitNotAST,[{key:"_do",value:function _do(e){return-e-1}}]),BitNotAST}(Ot);_defineProperty(Mt,"classdoc",'AST node for a bitwise unary "not" expression that returns its operand\nwith its bits inverted (e.g. ``~x``).');var Dt=function(e){_inherits(NotAST,e);var t=_createSuper(NotAST);function NotAST(){return _classCallCheck(this,NotAST),t.apply(this,arguments)}return _createClass(NotAST,[{key:"_do",value:function _do(e){return!_bool(e)}}]),NotAST}(Ot);_defineProperty(Dt,"classdoc",'AST node for a unary "not" expression (e.g. ``not x``).');var It=function(e){_inherits(IfAST,e);var t=_createSuper(IfAST);function IfAST(e,n,i,o,s,u){var l;return _classCallCheck(this,IfAST),(l=t.call(this,e,n,i)).objif=o,l.objcond=s,l.objelse=u,l}return _createClass(IfAST,[{key:"_repr",value:function _repr(e){e.push("<",this.constructor.name,1,"objif="),this.objif._repr(e),e.push(0,"objcond="),this.objcond._repr(e),e.push(0,"objelse="),this.objelse._repr(e),e.push(-1,">")}},{key:"_eval",value:function _eval(e){return _bool(this.objcond._handle_eval(e))?this.objif._handle_eval(e):this.objelse._handle_eval(e)}}]),IfAST}(ct);_defineProperty(It,"classdoc","AST node for the ternary inline ``if/else`` operator (e.g. ``x if y else z``)."),It.prototype._ul4onattrs=ct.prototype._ul4onattrs.concat(["objif","objcond","objelse"]);var Et=function(e){_inherits(ReturnAST,e);var t=_createSuper(ReturnAST);function ReturnAST(){return _classCallCheck(this,ReturnAST),t.apply(this,arguments)}return _createClass(ReturnAST,[{key:"_eval",value:function _eval(e){var t=this.obj._handle_eval(e);throw new Ue(t)}},{key:"_str",value:function _str(e){e.push("return "),this.obj._str(e)}}]),ReturnAST}(Ot);_defineProperty(Et,"classdoc","AST node for a ``<?return?>`` tag (e.g. ``<?return x?>``).");var Bt=function(e){_inherits(PrintAST,e);var t=_createSuper(PrintAST);function PrintAST(){return _classCallCheck(this,PrintAST),t.apply(this,arguments)}return _createClass(PrintAST,[{key:"_eval",value:function _eval(e){var t=_str(this.obj._handle_eval(e));e.output(t)}},{key:"_str",value:function _str(e){e.push("print "),this.obj._str(e)}}]),PrintAST}(Ot);_defineProperty(Bt,"classdoc","AST node for a ``<?print?>`` tag (e.g. ``<?print x?>``).");var Ft=function(e){_inherits(PrintXAST,e);var t=_createSuper(PrintXAST);function PrintXAST(){return _classCallCheck(this,PrintXAST),t.apply(this,arguments)}return _createClass(PrintXAST,[{key:"_eval",value:function _eval(e){var t=_xmlescape(this.obj._handle_eval(e));e.output(t)}},{key:"_str",value:function _str(e){e.push("printx "),this.obj._str(e)}}]),PrintXAST}(Ot);_defineProperty(Ft,"classdoc","AST node for a ``<?printx?>`` tag (e.g. ``<?printx x?>``).");var Ht=function(e){_inherits(BinaryAST,e);var t=_createSuper(BinaryAST);function BinaryAST(e,n,i,o,s){var u;return _classCallCheck(this,BinaryAST),(u=t.call(this,e,n,i)).obj1=o,u.obj2=s,u}return _createClass(BinaryAST,[{key:"_repr",value:function _repr(e){e.push("<",this.constructor.name," obj1="),this.obj1._repr(e),e.push(" obj2="),this.obj2._repr(e),e.push(">")}},{key:"_eval",value:function _eval(e){var t=this.obj1._handle_eval(e),n=this.obj2._handle_eval(e);return this._do(t,n)}}]),BinaryAST}(ct);_defineProperty(Ht,"classdoc","Base class for all UL4 AST nodes implementing binary expressions\n(i.e. operators with two operands)."),Ht.prototype._ul4onattrs=ct.prototype._ul4onattrs.concat(["obj1","obj2"]);var Vt=function(e){_inherits(ItemAST,e);var t=_createSuper(ItemAST);function ItemAST(){return _classCallCheck(this,ItemAST),t.apply(this,arguments)}return _createClass(ItemAST,[{key:"_do",value:function _do(e,t){return this._get(e,t)}},{key:"_eval_set",value:function _eval_set(e,t){var n=this.obj1._handle_eval(e),i=this.obj2._handle_eval(e);this._set(n,i,t)}},{key:"_eval_modify",value:function _eval_modify(e,t,n){var i=this.obj1._handle_eval(e),o=this.obj2._handle_eval(e);this._modify(t,i,o,n)}},{key:"_get",value:function _get(e,t){if("string"==typeof e||_islist(e)){if(t instanceof mr){var n=t.start,i=t.stop;return null==n&&(n=0),null==i&&(i=e.length),e.slice(n,i)}var o=t;if(t<0&&(t+=e.length),t<0||t>=e.length)throw new tt(e,o);return e[t]}if(e&&"function"==typeof e[ee.getitem])return e[ee.getitem](t);if(_ismap(e))return e.get(t);if(_isobject(e))return e[t];throw new We(_type(e).fullname()+" object is not subscriptable")}},{key:"_set",value:function _set(e,t,n){if(_islist(e))if(t instanceof mr){var i=t.start,o=t.stop;null===i?i=0:i<0&&(i+=e.length),i<0?i=0:i>e.length&&(i=e.length),null===o?o=e.length:o<0&&(o+=e.length),o<0?o=0:o>e.length&&(o=e.length),o<i&&(o=i),e.splice(i,o-i);for(var s=_iter(n);;){var u=s.next();if(u.done)break;e.splice(i++,0,u.value)}}else{var l=t;if(t<0&&(t+=e.length),t<0||t>=e.length)throw new tt(e,l);e[t]=n}else if(e&&"function"==typeof e[ee.setitem])e[ee.setitem](t,n);else if(_ismap(e))e.set(t,n);else{if(!_isobject(e))throw new Ze(e);e[t]=n}}},{key:"_modify",value:function _modify(e,t,n,i){this._set(t,n,e._ido(this._get(t,n),i))}}]),ItemAST}(Ht);_defineProperty(Vt,"classdoc","AST node for subscripting expression (e.g. ``x[y]``).");var Rt=function(e){_inherits(IsAST,e);var t=_createSuper(IsAST);function IsAST(){return _classCallCheck(this,IsAST),t.apply(this,arguments)}return _createClass(IsAST,[{key:"_do",value:function _do(e,t){return e===t}}]),IsAST}(Ht);_defineProperty(Rt,"classdoc","AST node for a binary ``is`` comparison expression (e.g. ``x is y``).");var qt=function(e){_inherits(IsNotAST,e);var t=_createSuper(IsNotAST);function IsNotAST(){return _classCallCheck(this,IsNotAST),t.apply(this,arguments)}return _createClass(IsNotAST,[{key:"_do",value:function _do(e,t){return e!==t}}]),IsNotAST}(Ht);_defineProperty(qt,"classdoc","AST node for a binary ``is not`` comparison expression (e.g. ``x is not y``).");var Lt=function(e){_inherits(EQAST,e);var t=_createSuper(EQAST);function EQAST(){return _classCallCheck(this,EQAST),t.apply(this,arguments)}return _createClass(EQAST,[{key:"_do",value:function _do(e,t){return _eq(e,t)}}]),EQAST}(Ht);_defineProperty(Lt,"classdoc","AST node for the binary equality comparison (e.g. ``x == y``.");var Nt=function(e){_inherits(NEAST,e);var t=_createSuper(NEAST);function NEAST(){return _classCallCheck(this,NEAST),t.apply(this,arguments)}return _createClass(NEAST,[{key:"_do",value:function _do(e,t){return _ne(e,t)}}]),NEAST}(Ht);_defineProperty(Nt,"classdoc","AST node for a binary inequality comparison (e.g. ``x != y``).");var Xt=function(e){_inherits(LTAST,e);var t=_createSuper(LTAST);function LTAST(){return _classCallCheck(this,LTAST),t.apply(this,arguments)}return _createClass(LTAST,[{key:"_do",value:function _do(e,t){return _lt(e,t)}}]),LTAST}(Ht);_defineProperty(Xt,"classdoc",'AST node for the binary "less than" comparison (e.g. ``x < y``).');var Ut=function(e){_inherits(LEAST,e);var t=_createSuper(LEAST);function LEAST(){return _classCallCheck(this,LEAST),t.apply(this,arguments)}return _createClass(LEAST,[{key:"_do",value:function _do(e,t){return _le(e,t)}}]),LEAST}(Ht);_defineProperty(Ut,"classdoc",'AST node for the binary "less than or equal" comparison (e.g. ``x <= y``).');var Yt=function(e){_inherits(GTAST,e);var t=_createSuper(GTAST);function GTAST(){return _classCallCheck(this,GTAST),t.apply(this,arguments)}return _createClass(GTAST,[{key:"_do",value:function _do(e,t){return _gt(e,t)}}]),GTAST}(Ht);_defineProperty(Yt,"classdoc",'AST node for the binary "greater than" comparison (e.g. ``x > y``).');var zt=function(e){_inherits(GEAST,e);var t=_createSuper(GEAST);function GEAST(){return _classCallCheck(this,GEAST),t.apply(this,arguments)}return _createClass(GEAST,[{key:"_do",value:function _do(e,t){return _ge(e,t)}}]),GEAST}(Ht);_defineProperty(zt,"classdoc",'AST node for the binary "greater than or equal" comparison (e.g. ``x >= y``).');var Gt=function(e){_inherits(ContainsAST,e);var t=_createSuper(ContainsAST);function ContainsAST(){return _classCallCheck(this,ContainsAST),t.apply(this,arguments)}return _createClass(ContainsAST,[{key:"_do",value:function _do(e,t){if("string"==typeof e&&"string"==typeof t)return-1!==t.indexOf(e);if(_islist(t))return-1!==t.indexOf(e);if(t&&"function"==typeof t[ee.contains])return t[ee.contains](e);if(_ismap(t)||_isset(t))return t.has(e);if(_isobject(t)){for(var n in t)if(n===e)return!0;return!1}if(_iscolor(t))return t._r===e||t._g===e||t._b===e||t._a===e;throw new We(_type(t).fullname()+" object is not iterable")}}]),ContainsAST}(Ht);_defineProperty(Gt,"classdoc","AST node for the binary containment testing operator (e.g. ``x in y``).");var Jt=function(e){_inherits(NotContainsAST,e);var t=_createSuper(NotContainsAST);function NotContainsAST(){return _classCallCheck(this,NotContainsAST),t.apply(this,arguments)}return _createClass(NotContainsAST,[{key:"_do",value:function _do(e,t){return!Gt.prototype._do(e,t)}}]),NotContainsAST}(Ht);_defineProperty(Jt,"classdoc","AST node for an inverted containment testing expression (e.g. ``x not in y``).");var Wt=function(e){_inherits(AddAST,e);var t=_createSuper(AddAST);function AddAST(){return _classCallCheck(this,AddAST),t.apply(this,arguments)}return _createClass(AddAST,[{key:"_do",value:function _do(e,t){if(e&&"function"==typeof e[ee.add])return e[ee.add](t);if(t&&"function"==typeof t[ee.radd])return t[ee.radd](e);if(null==e||null==t)throw new We(_type(e).fullname()+" + "+_type(t).fullname()+" is not supported");return _islist(e)&&_islist(t)?[].concat(_toConsumableArray(e),_toConsumableArray(t)):e+t}},{key:"_ido",value:function _ido(e,t){return _islist(e)&&_islist(t)?(Pe.append(e,t),e):this._do(e,t)}}]),AddAST}(Ht);_defineProperty(Wt,"classdoc","AST node for a binary addition expression (e.g. ``x + y``).");var $t=function(e){_inherits(SubAST,e);var t=_createSuper(SubAST);function SubAST(){return _classCallCheck(this,SubAST),t.apply(this,arguments)}return _createClass(SubAST,[{key:"_do",value:function _do(e,t){if(e&&"function"==typeof e[ee.sub])return e[ee.sub](t);if(t&&"function"==typeof t[ee.rsub])return t[ee.rsub](e);if(_isdate(e)&&_isdate(t))return this._date_sub(e,t);if(_isdatetime(e)&&_isdatetime(t))return this._datetime_sub(e,t);if(null==e||null==t)throw new We(_type(e).fullname()+" - "+_type(t).fullname()+" is not supported");return e-t}},{key:"_date_sub",value:function _date_sub(e,t){return this._datetime_sub(e._date,t._date)}},{key:"_datetime_sub",value:function _datetime_sub(e,t){var n=t>e;if(n){var i=e;e=t,t=i}for(var o=e.getFullYear(),s=Ve.yearday(e),u=t.getFullYear(),l=Ve.yearday(t),c=0;o>u;)c+=Fe.yearday(_date(u,12,31)),++u;c+=s-l;var p=e.getHours(),f=e.getMinutes(),_=e.getSeconds(),h=t.getHours(),d=t.getMinutes(),v=_-t.getSeconds()+60*(f-d+60*(p-h)),y=e.getMilliseconds()-t.getMilliseconds();return n&&(c=-c,v=-v,y=-y),new nn(c,v,1e3*y)}},{key:"_ido",value:function _ido(e,t){return this._do(e,t)}}]),SubAST}(Ht);_defineProperty($t,"classdoc","AST node for the binary subtraction expression (e.g. ``x - y``).");var Kt=function(e){_inherits(MulAST,e);var t=_createSuper(MulAST);function MulAST(){return _classCallCheck(this,MulAST),t.apply(this,arguments)}return _createClass(MulAST,[{key:"_do",value:function _do(e,t){if(e&&"function"==typeof e[ee.mul])return e[ee.mul](t);if(t&&"function"==typeof t[ee.rmul])return t[ee.rmul](e);if(null==e||null==t)throw new We(e+" * "+t+" not supported");if(_isint(e)||_isbool(e)){if("string"==typeof t){if(e<0)throw new $e("repetition counter must be positive");return _str_repeat(t,e)}if(_islist(t)){if(e<0)throw new $e("repetition counter must be positive");return _list_repeat(t,e)}}else if(_isint(t)||_isbool(t)){if("string"==typeof e){if(t<0)throw new $e("repetition counter must be positive");return _str_repeat(e,t)}if(_islist(e)){if(t<0)throw new $e("repetition counter must be positive");return _list_repeat(e,t)}}return e*t}},{key:"_ido",value:function _ido(e,t){if(_islist(e)&&_isint(t)){if(t>0)for(var n=0,i=e.length*t;e.length<i;)e.push(e[n++]);else e.splice(0,e.length);return e}return this._do(e,t)}}]),MulAST}(Ht);_defineProperty(Kt,"classdoc","AST node for the binary multiplication expression (e.g. ``x * y``).");var Qt=function(e){_inherits(FloorDivAST,e);var t=_createSuper(FloorDivAST);function FloorDivAST(){return _classCallCheck(this,FloorDivAST),t.apply(this,arguments)}return _createClass(FloorDivAST,[{key:"_do",value:function _do(e,t){if(e&&"function"==typeof e[ee.floordiv])return e[ee.floordiv](t);if(t&&"function"==typeof t[ee.rfloordiv])return t[ee.rfloordiv](e);if(null==e||null==t)throw new We(_type(e).fullname()+" // "+_type(t).fullname()+" not supported");if(!("number"!=typeof e&&"boolean"!=typeof e||"number"!=typeof t&&"boolean"!=typeof t||0!=t))throw new et;return Math.floor(e/t)}},{key:"_ido",value:function _ido(e,t){return this._do(e,t)}}]),FloorDivAST}(Ht);_defineProperty(Qt,"classdoc","AST node for a binary truncating division expression (e.g. ``x // y``).");var Zt=function(e){_inherits(TrueDivAST,e);var t=_createSuper(TrueDivAST);function TrueDivAST(){return _classCallCheck(this,TrueDivAST),t.apply(this,arguments)}return _createClass(TrueDivAST,[{key:"_do",value:function _do(e,t){if(e&&"function"==typeof e[ee.truediv])return e[ee.truediv](t);if(t&&"function"==typeof t[ee.rtruediv])return t[ee.rtruediv](e);if(null==e||null==t)throw new We(_type(e).fullname()+" / "+_type(t).fullname()+" not supported");if(!("number"!=typeof e&&"boolean"!=typeof e||"number"!=typeof t&&"boolean"!=typeof t||0!=t))throw new et;return e/t}},{key:"_ido",value:function _ido(e,t){return this._do(e,t)}}]),TrueDivAST}(Ht);_defineProperty(Zt,"classdoc","AST node for a binary true division expression (e.g. ``x / y``).");var er=function(e){_inherits(ModAST,e);var t=_createSuper(ModAST);function ModAST(){return _classCallCheck(this,ModAST),t.apply(this,arguments)}return _createClass(ModAST,[{key:"_do",value:function _do(e,t){return _mod(e,t)}},{key:"_ido",value:function _ido(e,t){return this._do(e,t)}}]),ModAST}(Ht);_defineProperty(er,"classdoc","AST node for a binary modulo expression (e.g. ``x % y``).");var tr=function(e){_inherits(ShiftLeftAST,e);var t=_createSuper(ShiftLeftAST);function ShiftLeftAST(){return _classCallCheck(this,ShiftLeftAST),t.apply(this,arguments)}return _createClass(ShiftLeftAST,[{key:"_do",value:function _do(e,t){if(!1===t?t=0:!0===t&&(t=1),t<0)return rr.prototype._do(e,-t);for(!1===e?e=0:!0===e&&(e=1);t--;)e*=2;return e}},{key:"_ido",value:function _ido(e,t){return this._do(e,t)}}]),ShiftLeftAST}(Ht);_defineProperty(tr,"classdoc","AST node for a bitwise left shift expression (e.g. ``x << y``).");var rr=function(e){_inherits(ShiftRightAST,e);var t=_createSuper(ShiftRightAST);function ShiftRightAST(){return _classCallCheck(this,ShiftRightAST),t.apply(this,arguments)}return _createClass(ShiftRightAST,[{key:"_do",value:function _do(e,t){if(!1===t?t=0:!0===t&&(t=1),t<0)return tr.prototype._do(e,-t);for(!1===e?e=0:!0===e&&(e=1);t--;)e/=2;return Math.floor(e)}},{key:"_ido",value:function _ido(e,t){return this._do(e,t)}}]),ShiftRightAST}(Ht);_defineProperty(rr,"classdoc","AST node for a bitwise right shift expression (e.g. ``x >> y``).");var nr=function(e){_inherits(BitAndAST,e);var t=_createSuper(BitAndAST);function BitAndAST(){return _classCallCheck(this,BitAndAST),t.apply(this,arguments)}return _createClass(BitAndAST,[{key:"_do",value:function _do(e,t){return!1===t?t=0:!0===t&&(t=1),e&t}},{key:"_ido",value:function _ido(e,t){return this._do(e,t)}}]),BitAndAST}(Ht);_defineProperty(nr,"classdoc",'AST node for a binary bitwise "and" expression (e.g ``x & y``).');var ar=function(e){_inherits(BitXOrAST,e);var t=_createSuper(BitXOrAST);function BitXOrAST(){return _classCallCheck(this,BitXOrAST),t.apply(this,arguments)}return _createClass(BitXOrAST,[{key:"_do",value:function _do(e,t){return!1===t?t=0:!0===t&&(t=1),e^t}},{key:"_ido",value:function _ido(e,t){return this._do(e,t)}}]),BitXOrAST}(Ht);_defineProperty(ar,"classdoc",'AST node for the binary bitwise "exclusive or" expression (e.g. ``x ^ y``).');var ir=function(e){_inherits(BitOrAST,e);var t=_createSuper(BitOrAST);function BitOrAST(){return _classCallCheck(this,BitOrAST),t.apply(this,arguments)}return _createClass(BitOrAST,[{key:"_do",value:function _do(e,t){return!1===t?t=0:!0===t&&(t=1),e|t}},{key:"_ido",value:function _ido(e,t){return this._do(e,t)}}]),BitOrAST}(Ht);_defineProperty(ir,"classdoc",'AST node for a binary bitwise "or" expression (e.g. ``x | y``).');var or=function(e){_inherits(AndAST,e);var t=_createSuper(AndAST);function AndAST(){return _classCallCheck(this,AndAST),t.apply(this,arguments)}return _createClass(AndAST,[{key:"_eval",value:function _eval(e){var t=this.obj1._handle_eval(e);return _bool(t)?this.obj2._handle_eval(e):t}}]),AndAST}(Ht);_defineProperty(or,"classdoc",'AST node for the binary "and" expression (i.e. ``x and y``).');var sr=function(e){_inherits(OrAST,e);var t=_createSuper(OrAST);function OrAST(){return _classCallCheck(this,OrAST),t.apply(this,arguments)}return _createClass(OrAST,[{key:"_eval",value:function _eval(e){var t=this.obj1._handle_eval(e);return _bool(t)?t:this.obj2._handle_eval(e)}}]),OrAST}(Ht);_defineProperty(sr,"classdoc",'AST node for a binary "or" expression (e.g. ``x or y``).');var ur=function(e){_inherits(AttrAST,e);var t=_createSuper(AttrAST);function AttrAST(e,n,i,o,s){var u;return _classCallCheck(this,AttrAST),(u=t.call(this,e,n,i)).obj=o,u.attrname=s,u}return _createClass(AttrAST,[{key:"_repr",value:function _repr(e){e.push("<",this.constructor.name," obj="),this.obj._repr(e),e.push(" attrname=",_repr2(this.attrname),">")}},{key:"_eval",value:function _eval(e){var t=this.obj._handle_eval(e);return this._get(t,this.attrname)}},{key:"_eval_set",value:function _eval_set(e,t){var n=this.obj._handle_eval(e);this._set(n,this.attrname,t)}},{key:"_eval_modify",value:function _eval_modify(e,t,n){var i=this.obj._handle_eval(e);this._modify(t,i,this.attrname,n)}},{key:"_get",value:function _get(e,t){var n=_type(e);try{return n.getattr(e,t)}catch(t){if(t instanceof rt&&t.obj===e)return;throw t}}},{key:"_set",value:function _set(e,t,n){if("object"===_typeof(e)&&"function"==typeof e[ee.setattr])e[ee.setattr](t,n);else if(_ismap(e))e.set(t,n);else{if(!_isobject(e))throw new We(_type(e).fullname()+" object has no writable attributes");e[t]=n}}},{key:"_modify",value:function _modify(e,t,n,i){var o=this._get(t,n),s=e._ido(o,i);this._set(t,n,s)}}]),AttrAST}(ct);_defineProperty(ur,"classdoc","AST node for an expression that gets or sets an attribute of an object.\n(e.g. ``x.y``)."),ur.prototype._ul4onattrs=ct.prototype._ul4onattrs.concat(["obj","attrname"]);var lr=function(e){_inherits(CallAST,e);var t=_createSuper(CallAST);function CallAST(e,n,i,o,s){var u;return _classCallCheck(this,CallAST),(u=t.call(this,e,n,i)).obj=o,u.args=s,u}return _createClass(CallAST,[{key:"_repr",value:function _repr(e){e.push("<",this.constructor.name," obj="),this.obj._repr(e);var t,n=_createForOfIteratorHelper(this.args);try{for(n.s();!(t=n.n()).done;){var i=t.value;e.push(" "),i._repr(e)}}catch(e){n.e(e)}finally{n.f()}e.push(">")}},{key:"_makeargs",value:function _makeargs(e){var t,n=[],i={},o=_createForOfIteratorHelper(this.args);try{for(o.s();!(t=o.n()).done;){t.value._handle_eval_call(e,n,i)}}catch(e){o.e(e)}finally{o.f()}return[n,i]}},{key:"_handle_eval",value:function _handle_eval(e){try{return this._eval(e)}catch(e){throw this._decorate_exception(e),e}}},{key:"_eval",value:function _eval(e){var t=this.obj._handle_eval(e),n=_slicedToArray(this._makeargs(e),2);return _call(e,t,n[0],n[1])}}]),CallAST}(ct);_defineProperty(lr,"classdoc","AST node for calling an object (e.g. ``f(x, y)``)."),lr.prototype._ul4onattrs=ct.prototype._ul4onattrs.concat(["obj","args"]);var cr=function(e){_inherits(RenderAST,e);var t=_createSuper(RenderAST);function RenderAST(e,n,i,o,s){var u;return _classCallCheck(this,RenderAST),(u=t.call(this,e,n,i,o,s)).indent=null,u}return _createClass(RenderAST,[{key:"_repr",value:function _repr(e){e.push("<",this.constructor.name),null!==this.indent&&e.push(" indent=",_repr2(this.indent.text)),e.push(" obj="),this.obj._repr(e),e.push(0);var t,n=_createForOfIteratorHelper(this.args);try{for(n.s();!(t=n.n()).done;){var i=t.value;e.push(" "),i._repr(e),e.push(0)}}catch(e){n.e(e)}finally{n.f()}e.push(-1,">")}},{key:"_str",value:function _str(e){e.push("render ",this.source.replace(/\r?\n/g," ")),null!==this.indent&&e.push(" with indent ",_repr2(this.indent.text))}},{key:"_render_object",value:function _render_object(e,t,n,i){return _callrender(e,t,n,i)}},{key:"_renderx_object",value:function _renderx_object(e,t,n,i){e.escapes.push(_xmlescape);var o=null;try{o=_callrender(e,t,n,i)}finally{e.escapes.splice(e.escapes.length-1,1)}return o}},{key:"_real_render_object",value:function _real_render_object(e,t,n,i){this._render_object(e,t,n,i)}},{key:"_print_object",value:function _print_object(e,t,n,i){var o=_str(t);e.output(o)}},{key:"_printx_object",value:function _printx_object(e,t){var n=_xmlescape(t);e.output(n)}},{key:"_dont_print_object",value:function _dont_print_object(e,t){throw new We(_repr2(t)+" is not renderable by UL4")}},{key:"_real_print_object",value:function _real_print_object(e,t){this._dont_print_object(e,t)}},{key:"_handle_eval",value:function _handle_eval(e){var t=e.withindent(null!==this.indent?this.indent.text:null),n=this.obj._handle_eval(t),i=_slicedToArray(this._makeargs(t),2),o=i[0],s=i[1];this._handle_additional_arguments(t,o,s);try{return _object_is_renderable(n)?this._real_render_object(t,n,o,s):this._real_print_object(t,n),null}catch(e){throw this._decorate_exception(e),e}}},{key:"_handle_additional_arguments",value:function _handle_additional_arguments(e,t){}}]),RenderAST}(lr);_defineProperty(cr,"classdoc","AST node for rendering a template (e.g. ``<?render t(x)?>``."),cr.prototype._ul4onattrs=lr.prototype._ul4onattrs.concat(["indent"]);var pr=function(e){_inherits(RenderXAST,e);var t=_createSuper(RenderXAST);function RenderXAST(){return _classCallCheck(this,RenderXAST),t.apply(this,arguments)}return _createClass(RenderXAST,[{key:"_real_render_object",value:function _real_render_object(e,t,n,i){this._renderx_object(e,t,n,i)}}]),RenderXAST}(cr);_defineProperty(pr,"classdoc","AST node for rendering a template and XML-escaping the output\n(e.g. ``<?renderx t(x)?>``.");var fr=function(e){_inherits(RenderOrPrintAST,e);var t=_createSuper(RenderOrPrintAST);function RenderOrPrintAST(){return _classCallCheck(this,RenderOrPrintAST),t.apply(this,arguments)}return _createClass(RenderOrPrintAST,[{key:"_real_print_object",value:function _real_print_object(e,t){this._print_object(e,t)}}]),RenderOrPrintAST}(cr);_defineProperty(fr,"classdoc","AST node for rendering a template or printing an object.");var _r=function(e){_inherits(RenderOrPrintXAST,e);var t=_createSuper(RenderOrPrintXAST);function RenderOrPrintXAST(){return _classCallCheck(this,RenderOrPrintXAST),t.apply(this,arguments)}return _createClass(RenderOrPrintXAST,[{key:"_real_print_object",value:function _real_print_object(e,t){this._printx_object(e,t)}}]),RenderOrPrintXAST}(cr);_defineProperty(_r,"classdoc","AST node for rendering a template or printing an object\n(e.g. ``<?render_or_printx t(x)?>``.");var hr=function(e){_inherits(RenderXOrPrintAST,e);var t=_createSuper(RenderXOrPrintAST);function RenderXOrPrintAST(){return _classCallCheck(this,RenderXOrPrintAST),t.apply(this,arguments)}return _createClass(RenderXOrPrintAST,[{key:"_real_render_object",value:function _real_render_object(e,t,n,i){this._renderx_object(e,t,n,i)}},{key:"_real_print_object",value:function _real_print_object(e,t){this._print_object(e,t)}}]),RenderXOrPrintAST}(cr);_defineProperty(hr,"classdoc","AST node for rendering a template or printing an object\n(e.g. ``<?renderx_or_print t(x)?>``.");var dr=function(e){_inherits(RenderXOrPrintXAST,e);var t=_createSuper(RenderXOrPrintXAST);function RenderXOrPrintXAST(){return _classCallCheck(this,RenderXOrPrintXAST),t.apply(this,arguments)}return _createClass(RenderXOrPrintXAST,[{key:"_real_render_object",value:function _real_render_object(e,t,n,i){this._renderx_object(e,t,n,i)}},{key:"_real_print_object",value:function _real_print_object(e,t){this._printx_object(e,t)}}]),RenderXOrPrintXAST}(cr);_defineProperty(dr,"classdoc","AST node for rendering a template or printing an object\n(e.g. ``<?renderx_or_printx t(x)?>``."),f=ee.getattr;var vr=function(e){_inherits(RenderBlockAST,e);var t=_createSuper(RenderBlockAST);function RenderBlockAST(){return _classCallCheck(this,RenderBlockAST),t.apply(this,arguments)}return _createClass(RenderBlockAST,[{key:"_repr",value:function _repr(e){e.push("<",this.constructor.name,1,"obj="),this.obj._repr(e);var t,n=_createForOfIteratorHelper(this.args);try{for(n.s();!(t=n.n()).done;){var i=t.value;e.push(0),i._repr(e)}}catch(e){n.e(e)}finally{n.f()}e.push(0,"content="),this.content._repr(e),e.push(-1,">")}},{key:"_handle_additional_arguments",value:function _handle_additional_arguments(e,t,n){if(n.hasOwnProperty("content"))throw new Ke("duplicate keyword argument content");var i=new zr(this.content,this.content.signature,e.vars);n.content=i}},{key:f,value:function value(e){return"stoppos"===e||"stopsource"===e||"stopsourceprefix"===e||"stopsourcesuffix"===e?this[e]:_get$1(_getPrototypeOf(RenderBlockAST.prototype),ee.getattr,this).call(this,e)}}]),RenderBlockAST}(cr);_defineProperty(vr,"classdoc","AST node for rendering a template via a ``<?renderblock?>`` block and\npassing the content of the block as one additional keyword argument named\n``content``."),vr.prototype._ul4onattrs=cr.prototype._ul4onattrs.concat(["stopposstart","stopposstop","content"]),_=ee.getattr;var yr=function(e){_inherits(RenderBlocksAST,e);var t=_createSuper(RenderBlocksAST);function RenderBlocksAST(){return _classCallCheck(this,RenderBlocksAST),t.apply(this,arguments)}return _createClass(RenderBlocksAST,[{key:"_repr",value:function _repr(e){e.push("<",this.constructor.name,1,"obj="),this.obj._repr(e);var t,n=_createForOfIteratorHelper(this.args);try{for(n.s();!(t=n.n()).done;){var i=t.value;e.push(0),i._repr(e)}}catch(e){n.e(e)}finally{n.f()}var o,s=_createForOfIteratorHelper(this.content);try{for(s.s();!(o=s.n()).done;){var u=o.value;e.push(0),u._repr(e)}}catch(e){s.e(e)}finally{s.f()}e.push(-1,">")}},{key:"_handle_additional_arguments",value:function _handle_additional_arguments(e,t,n){var i=e.inheritvars();for(var o in Er.prototype._eval.call(this,i),i.vars)if(i.vars.hasOwnProperty(o)){if(o in n)throw new Ke("duplicate keyword argument "+o);n[o]=i.get(o)}}},{key:_,value:function value(e){return"stoppos"===e||"stopsource"===e||"stopsourceprefix"===e||"stopsourcesuffix"===e?this[e]:_get$1(_getPrototypeOf(RenderBlocksAST.prototype),ee.getattr,this).call(this,e)}}]),RenderBlocksAST}(cr);_defineProperty(yr,"classdoc","AST node for rendering a template and passing additional arguments via\nnested variable definitions, e.g.::"),yr.prototype._ul4onattrs=cr.prototype._ul4onattrs.concat(["stopposstart","stopposstop","content"]);var mr=function(e,t,n,i){_inherits(slice,e);var o=_createSuper(slice);function slice(e,t){var n;return _classCallCheck(this,slice),(n=o.call(this)).start=e,n.stop=t,n}return _createClass(slice,[{key:t,value:function value(){return this.type}},{key:"of",value:function of(e){var t=this.start||0,n=null===this.stop?e.length:this.stop;return e.slice(t,n)}},{key:n,value:function value(){return"slice("+_repr2(this.start)+", "+_repr2(this.stop)+", None)"}},{key:i,value:function value(e){switch(e){case"start":return this.start;case"stop":return this.stop;default:throw new rt(this,e)}}}]),slice}(te,ee.type,ee.repr,ee.getattr);mr.prototype.type=new ne(null,"slice","A slice specification.");var gr=function(e){_inherits(SliceAST,e);var t=_createSuper(SliceAST);function SliceAST(e,n,i,o,s){var u;return _classCallCheck(this,SliceAST),(u=t.call(this,e,n,i)).index1=o,u.index2=s,u}return _createClass(SliceAST,[{key:"_repr",value:function _repr(e){e.push("<",this.constructor.name),null!==this.index1&&(e.push(" index1="),this.index1._repr(e)),null!==this.index2&&(e.push(" index2="),this.index2._repr(e)),e.push(">")}},{key:"_eval",value:function _eval(e){var t=null!==this.index1?this.index1._handle_eval(e):null,n=null!==this.index2?this.index2._handle_eval(e):null;return new mr(t,n)}}]),SliceAST}(ct);_defineProperty(gr,"classdoc","AST node for creating a slice object (used in ``obj[index1:index2]``)."),gr.prototype._ul4onattrs=ct.prototype._ul4onattrs.concat(["index1","index2"]);var br=function(e){_inherits(ChangeVarAST,e);var t=_createSuper(ChangeVarAST);function ChangeVarAST(e,n,i,o,s){var u;return _classCallCheck(this,ChangeVarAST),(u=t.call(this,e,n,i)).lvalue=o,u.value=s,u}return _createClass(ChangeVarAST,[{key:"_repr",value:function _repr(e){e.push("<",this.constructor.name," lvalue=",_repr2(this.lvalue)," value="),this.value._repr(e),e.push(">")}}]),ChangeVarAST}(ct);_defineProperty(br,"classdoc","Base class for all AST nodes that are assignment operators, i.e. that\nset or modify a variable/attribute or item."),br.prototype._ul4onattrs=ct.prototype._ul4onattrs.concat(["lvalue","value"]);var kr=function(e){_inherits(SetVarAST,e);var t=_createSuper(SetVarAST);function SetVarAST(){return _classCallCheck(this,SetVarAST),t.apply(this,arguments)}return _createClass(SetVarAST,[{key:"_eval",value:function _eval(e){var t,n=this.value._handle_eval(e),i=_createForOfIteratorHelper(_unpackvar(this.lvalue,n));try{for(i.s();!(t=i.n()).done;){var o=_slicedToArray(t.value,2),s=o[0],u=o[1];s._handle_eval_set(e,u)}}catch(e){i.e(e)}finally{i.f()}}}]),SetVarAST}(br);_defineProperty(kr,"classdoc","AST node for setting a variable, attribute or item to a value (e.g.\n``x = y``).");var Sr=function(e){_inherits(ModifyVarAST,e);var t=_createSuper(ModifyVarAST);function ModifyVarAST(){return _classCallCheck(this,ModifyVarAST),t.apply(this,arguments)}return _createClass(ModifyVarAST,[{key:"_eval",value:function _eval(e){var t,n=this.value._handle_eval(e),i=_createForOfIteratorHelper(_unpackvar(this.lvalue,n));try{for(i.s();!(t=i.n()).done;){var o=_slicedToArray(t.value,2),s=o[0],u=o[1];s._handle_eval_modify(e,this._operator,u)}}catch(e){i.e(e)}finally{i.f()}}}]),ModifyVarAST}(br),Tr=function(e){_inherits(AddVarAST,e);var t=_createSuper(AddVarAST);function AddVarAST(){return _classCallCheck(this,AddVarAST),t.apply(this,arguments)}return _createClass(AddVarAST)}(Sr);_defineProperty(Tr,"classdoc","AST node for an augmented assignment expression that adds a value to a\nvariable (e.g. ``x += y``)."),Tr.prototype._operator=Wt.prototype;var Ar=function(e){_inherits(SubVarAST,e);var t=_createSuper(SubVarAST);function SubVarAST(){return _classCallCheck(this,SubVarAST),t.apply(this,arguments)}return _createClass(SubVarAST)}(Sr);_defineProperty(Ar,"classdoc","AST node for an augmented assignment expression that subtracts a value from\na variable/attribute/item. (e.g. ``x -= y``)."),Ar.prototype._operator=$t.prototype;var wr=function(e){_inherits(MulVarAST,e);var t=_createSuper(MulVarAST);function MulVarAST(){return _classCallCheck(this,MulVarAST),t.apply(this,arguments)}return _createClass(MulVarAST)}(Sr);_defineProperty(wr,"classdoc","AST node for an augmented assignment expression that assigns the result\nof a multiplication to its left operand. (e.g. ``x *= y``)."),wr.prototype._operator=Kt.prototype;var xr=function(e){_inherits(TrueDivVarAST,e);var t=_createSuper(TrueDivVarAST);function TrueDivVarAST(){return _classCallCheck(this,TrueDivVarAST),t.apply(this,arguments)}return _createClass(TrueDivVarAST)}(Sr);_defineProperty(xr,"classdoc","AST node for an augmented assignment expression that assigns the result\nof a truncation division to its left operand. (e.g. ``x //= y``)."),xr.prototype._operator=Zt.prototype;var Cr=function(e){_inherits(FloorDivVarAST,e);var t=_createSuper(FloorDivVarAST);function FloorDivVarAST(){return _classCallCheck(this,FloorDivVarAST),t.apply(this,arguments)}return _createClass(FloorDivVarAST)}(Sr);_defineProperty(Cr,"classdoc","AST node for augmented assignment expression that divides a variable by a\nvalue, truncating to an integer value (e.g. ``x //= y``)."),Cr.prototype._operator=Qt.prototype;var jr=function(e){_inherits(ModVarAST,e);var t=_createSuper(ModVarAST);function ModVarAST(){return _classCallCheck(this,ModVarAST),t.apply(this,arguments)}return _createClass(ModVarAST)}(Sr);_defineProperty(jr,"classdoc","AST node for an augmented assignment expression that assigns the result\nof a modulo expression to its left operand. (e.g. ``x %= y``)."),jr.prototype._operator=er.prototype;var Or=function(e){_inherits(ShiftLeftVarAST,e);var t=_createSuper(ShiftLeftVarAST);function ShiftLeftVarAST(){return _classCallCheck(this,ShiftLeftVarAST),t.apply(this,arguments)}return _createClass(ShiftLeftVarAST)}(Sr);_defineProperty(Or,"classdoc",'AST node for an augmented assignment expression that assigns the result\nof a "shift left" expression to its left operand. (e.g. ``x <<= y``).'),Or.prototype._operator=tr.prototype;var Pr=function(e){_inherits(ShiftRightVarAST,e);var t=_createSuper(ShiftRightVarAST);function ShiftRightVarAST(){return _classCallCheck(this,ShiftRightVarAST),t.apply(this,arguments)}return _createClass(ShiftRightVarAST)}(Sr);_defineProperty(Pr,"classdoc",'AST node for an augmented assignment expression that assigns the result\nof a "shift right" expression to its left operand. (e.g. ``x >>= y``).'),Pr.prototype._operator=rr.prototype;var Mr=function(e){_inherits(BitAndVarAST,e);var t=_createSuper(BitAndVarAST);function BitAndVarAST(){return _classCallCheck(this,BitAndVarAST),t.apply(this,arguments)}return _createClass(BitAndVarAST)}(Sr);_defineProperty(Mr,"classdoc",'AST node for an augmented assignment expression that assigns the result\nof a binary bitwise "and" expression to its left operand.\n(e.g. ``x &= y``).'),Mr.prototype._operator=nr.prototype;var Dr=function(e){_inherits(BitXOrVarAST,e);var t=_createSuper(BitXOrVarAST);function BitXOrVarAST(){return _classCallCheck(this,BitXOrVarAST),t.apply(this,arguments)}return _createClass(BitXOrVarAST)}(Sr);_defineProperty(Dr,"classdoc",'AST node for an augmented assignment expression that assigns the result\nof a binary bitwise "exclusive or" expression to its left operand.\n(e.g. ``x ^= y``).'),Dr.prototype._operator=ar.prototype;var Ir=function(e){_inherits(BitOrVarAST,e);var t=_createSuper(BitOrVarAST);function BitOrVarAST(){return _classCallCheck(this,BitOrVarAST),t.apply(this,arguments)}return _createClass(BitOrVarAST)}(Sr);_defineProperty(Ir,"classdoc",'AST node for an augmented assignment expression that assigns the result\nof a binary bitwise "or" expression to its left operand.\n(e.g. ``x |= y``).'),Ir.prototype._operator=ir.prototype,h=ee.getattr;var Er=function(e){_inherits(BlockAST,e);var t=_createSuper(BlockAST);function BlockAST(e,n,i,o,s){var u;return _classCallCheck(this,BlockAST),(u=t.call(this,e,n,i,o,s)).content=[],u}return _createClass(BlockAST,[{key:"_eval",value:function _eval(e){var t,n=_createForOfIteratorHelper(this.content);try{for(n.s();!(t=n.n()).done;){t.value._handle_eval(e)}}catch(e){n.e(e)}finally{n.f()}}},{key:"_str",value:function _str(e){if(this.content.length){var t,n=_createForOfIteratorHelper(this.content);try{for(n.s();!(t=n.n()).done;){t.value._str(e),e.push(0)}}catch(e){n.e(e)}finally{n.f()}}else e.push("pass",0)}},{key:h,value:function value(e){return"stoppos"===e||"stopsource"===e||"stopsourceprefix"===e||"stopsourcesuffix"===e?this[e]:_get$1(_getPrototypeOf(BlockAST.prototype),ee.getattr,this).call(this,e)}}]),BlockAST}(ct);_defineProperty(Er,"classdoc","Base class for all AST nodes that are blocks."),Er.prototype._ul4onattrs=ct.prototype._ul4onattrs.concat(["stopposstart","stopposstop","content"]);var Br=function(e){_inherits(ForBlockAST,e);var t=_createSuper(ForBlockAST);function ForBlockAST(e,n,i,o,s){var u;return _classCallCheck(this,ForBlockAST),(u=t.call(this,e,n,i)).varname=o,u.container=s,u}return _createClass(ForBlockAST,[{key:"_repr",value:function _repr(e){e.push("<",this.constructor.name," varname=",_repr2(this.varname)," container="),this.container._repr(e),e.push(">")}},{key:"_str_varname",value:function _str_varname(e,t){if(_islist(t)){e.push("(");var n,i=truel,o=_createForOfIteratorHelper(t);try{for(o.s();!(n=o.n()).done;){var s=n.value;i?i=!1:e.push(", "),this._str_varname(e,s)}}catch(e){o.e(e)}finally{o.f()}1==t.length&&e.push(","),e.push(")")}else t._str(e)}},{key:"_eval",value:function _eval(e){for(var t=_iter(this.container._handle_eval(e));;){var n=t.next();if(n.done)break;var i,o=_createForOfIteratorHelper(_unpackvar(this.varname,n.value));try{for(o.s();!(i=o.n()).done;){var s=_slicedToArray(i.value,2),u=s[0],l=s[1];u._handle_eval_set(e,l)}}catch(e){o.e(e)}finally{o.f()}try{_get$1(_getPrototypeOf(ForBlockAST.prototype),"_eval",this).call(this,e)}catch(e){if(e instanceof Ye)break;if(!(e instanceof ze))throw e}}}},{key:"_str",value:function _str(e){e.push("for "),this._str_varname(e,this.varname),e.push(" in "),this.container._str(e),e.push(":",1),Er.prototype._str.call(this,e),e.push(-1)}}]),ForBlockAST}(Er);_defineProperty(Br,"classdoc","AST node for a ``<?for?>`` loop."),Br.prototype._ul4onattrs=Er.prototype._ul4onattrs.concat(["varname","container"]);var Fr=function(e){_inherits(WhileBlockAST,e);var t=_createSuper(WhileBlockAST);function WhileBlockAST(e,n,i,o){var s;return _classCallCheck(this,WhileBlockAST),(s=t.call(this,e,n,i)).condition=o,s}return _createClass(WhileBlockAST,[{key:"_repr",value:function _repr(e){e.push("<",this.constructor.name," condition="),this.condition._repr(e),e.push(">")}},{key:"_str",value:function _str(e){e.push("while "),this.condition._repr(e),e.push(":",1),Er.prototype._str.call(this,e),e.push(-1)}},{key:"_eval",value:function _eval(e){for(;;){if(!_bool(this.condition._handle_eval(e)))break;try{_get$1(_getPrototypeOf(WhileBlockAST.prototype),"_eval",this).call(this,e)}catch(e){if(e instanceof Ye)break;if(!(e instanceof ze))throw e}}}}]),WhileBlockAST}(Er);_defineProperty(Fr,"classdoc","AST node for a ``<?while?>`` loop."),Fr.prototype._ul4onattrs=Er.prototype._ul4onattrs.concat(["condition"]);var Hr=function(e){_inherits(BreakAST,e);var t=_createSuper(BreakAST);function BreakAST(){return _classCallCheck(this,BreakAST),t.apply(this,arguments)}return _createClass(BreakAST,[{key:"_eval",value:function _eval(e){throw new Ye}},{key:"_str",value:function _str(e){e.push("break",0)}},{key:"_repr",value:function _repr(e){e.push("<",this.constructor.name,">")}}]),BreakAST}(ct);_defineProperty(Hr,"classdoc","AST node for a ``<?break?>`` tag inside a ``<?for?>`` loop.");var Vr=function(e){_inherits(ContinueAST,e);var t=_createSuper(ContinueAST);function ContinueAST(){return _classCallCheck(this,ContinueAST),t.apply(this,arguments)}return _createClass(ContinueAST,[{key:"_eval",value:function _eval(e){throw new ze}},{key:"_str",value:function _str(e){e.push("continue",0)}},{key:"_repr",value:function _repr(e){e.push("<",this.constructor.name,">")}}]),ContinueAST}(ct);_defineProperty(Vr,"classdoc","AST node for a ``<?continue?>`` tag inside a ``<?for?>`` block.");var Rr=function(e){_inherits(ConditionalBlocksAST,e);var t=_createSuper(ConditionalBlocksAST);function ConditionalBlocksAST(){return _classCallCheck(this,ConditionalBlocksAST),t.apply(this,arguments)}return _createClass(ConditionalBlocksAST,[{key:"_eval",value:function _eval(e){var t,n=_createForOfIteratorHelper(this.content);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(i._execute(e)){i._handle_eval(e);break}}}catch(e){n.e(e)}finally{n.f()}}}]),ConditionalBlocksAST}(Er);_defineProperty(Rr,"classdoc","AST node for a conditional ``<?if?>/<?elif?>/<?else?>`` block.");var qr=function(e){_inherits(ConditionalBlockAST,e);var t=_createSuper(ConditionalBlockAST);function ConditionalBlockAST(e,n,i,o){var s;return _classCallCheck(this,ConditionalBlockAST),(s=t.call(this,e,n,i)).condition=o,s}return _createClass(ConditionalBlockAST,[{key:"_repr",value:function _repr(e){e.push("<",this.constructor.name," condition="),this.condition._repr(e),e.push(">")}},{key:"_str",value:function _str(e){e.push(this._strname," "),this.condition._str(e),e.push(":",1),Er.prototype._str.call(this,e),e.push(-1)}},{key:"_execute",value:function _execute(e){return _bool(this.condition._handle_eval(e))}}]),ConditionalBlockAST}(Er);qr.prototype._ul4onattrs=Er.prototype._ul4onattrs.concat(["condition"]);var Lr=function(e){_inherits(IfBlockAST,e);var t=_createSuper(IfBlockAST);function IfBlockAST(){return _classCallCheck(this,IfBlockAST),t.apply(this,arguments)}return _createClass(IfBlockAST)}(qr);_defineProperty(Lr,"classdoc","AST node for an ``<?if?>`` block in an ``<?if?>/<?elif?>/<?else?>`` block."),Lr.prototype._strname="if";var Nr=function(e){_inherits(ElIfBlockAST,e);var t=_createSuper(ElIfBlockAST);function ElIfBlockAST(){return _classCallCheck(this,ElIfBlockAST),t.apply(this,arguments)}return _createClass(ElIfBlockAST)}(qr);_defineProperty(Nr,"classdoc","AST node for an ``<?elif?>`` block."),Nr.prototype._strname="else if";var Xr=function(e){_inherits(ElseBlockAST,e);var t=_createSuper(ElseBlockAST);function ElseBlockAST(){return _classCallCheck(this,ElseBlockAST),t.apply(this,arguments)}return _createClass(ElseBlockAST,[{key:"_repr",value:function _repr(e){e.push("<",this.constructor.name,">")}},{key:"_str",value:function _str(e){e.push("else:",1),Er.prototype._str.call(this,e),e.push(-1)}},{key:"_execute",value:function _execute(e){return!0}}]),ElseBlockAST}(Er);_defineProperty(Xr,"classdoc","AST node for an ``<?else?>`` block."),d=ee.getattr,v=ee.render,y=ee.call;var Ur=function(e){_inherits(Template,e);var t=_createSuper(Template);function Template(e,n,i,o,s,u,l,c){var p;return _classCallCheck(this,Template),(p=t.call(this,e,n,i))._source=o,p.name=s,p.namespace=u,p.whitespace=l,p.docposstart=-1,p.docposstop=-1,p.signature=c,p._asts=null,p._ul4_signature=c,p.parenttemplate=null,p}return _createClass(Template,[{key:d,value:function value(e){var t=this;switch(e){case"content":return this.content;case"source":return this.source;case"name":return this.name;case"namespace":return this.namespace;case"fullname":return this.fullname;case"whitespace":return this.whitespace;case"doc":return this.doc();case"signature":return this.signature;case"parenttemplate":return this.parenttemplate;case"render":var n=function render(e,n){t._renderbound(e,n)};return expose(n,this.signature,{needscontext:!0,needsobject:!0}),n;case"renders":var i=function renders(e,n){return t._rendersbound(e,n)};return expose(i,this.signature,{needscontext:!0,needsobject:!0}),i;default:return _get$1(_getPrototypeOf(Template.prototype),ee.getattr,this).call(this,e)}}},{key:"ul4ondump",value:function ul4ondump(e){var t;if(e.dump(Z),e.dump(this.name),e.dump(this.namespace),e.dump(this._source),e.dump(this.whitespace),e.dump(this.docposstart),e.dump(this.docposstop),e.dump(this.parenttemplate),null===this.signature||this.signature instanceof Yr)t=this.signature;else{t=[];var n,i=_createForOfIteratorHelper(this.signature.params);try{for(i.s();!(n=i.n()).done;){var o=n.value;t.push(o.name,o.type),o.type.endsWith("=")&&t.push(o.defaultValue)}}catch(e){i.e(e)}finally{i.f()}}e.dump(t),_get$1(_getPrototypeOf(Template.prototype),"ul4ondump",this).call(this,e)}},{key:"ul4onload",value:function ul4onload(e){var t,n=e.load();if(null===n)throw new $e("UL4ON doesn't support templates in 'source' format in Javascript implementation");if(n!==Z)throw new $e("Invalid UL4 version, expected 52, got "+n);this.name=e.load(),this.namespace=e.load(),this._source=e.load(),this.whitespace=e.load(),this.docposstart=e.load(),this.docposstop=e.load(),this.parenttemplate=e.load(),_islist(t=e.load())&&(t=_construct(re,_toConsumableArray(t))),this.signature=t,this._ul4_signature=t,_get$1(_getPrototypeOf(Template.prototype),"ul4onload",this).call(this,e)}},{key:"fullname",get:function get(){return null==this.name?null:null!=this.namespace?this.namespace+"."+this.name:this.name}},{key:"loads",value:function loads(e){return _loads2(e)}},{key:"_eval",value:function _eval(e){var t=null;null!==this.signature&&(t=this.signature._handle_eval(e));var n=new zr(this,t,e.vars);e.set(this.name,n)}},{key:"_repr",value:function _repr(e){e.push("<",this.constructor.name),null!==this.name&&e.push(" fullname=",this.fullname),e.push(" whitespace=",_repr2(this.whitespace),">")}},{key:"_str",value:function _str(e){e.push("def ",this.fullname||"unnamed",":",1),Er.prototype._str.call(this,e),e.push(-1)}},{key:"_renderbound",value:function _renderbound(e,t){var n=e.replacevars(t);try{Er.prototype._eval.call(this,n)}catch(e){if(!(e instanceof Ue))throw e}}},{key:v,value:function value(e,t){this._renderbound(e,t)}},{key:"render",value:function render(e,t){this._renderbound(e,t)}},{key:"_rendersbound",value:function _rendersbound(e,t){var n=e.replaceoutput();return this._renderbound(n,t),n.getoutput()}},{key:"renders",value:function renders(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=new Ne({},arguments.length>1&&void 0!==arguments[1]?arguments[1]:null);return e=e||{},null!==this.signature&&(e=this.signature.bindObject(this.name,[],e)),this._rendersbound(t,e)}},{key:"doc",value:function doc(){return-1!==this.docposstart?this._source.slice(this.docposstart,this.docposstop):null}},{key:"_callbound",value:function _callbound(e,t){var n=e.replacevars(t);try{Er.prototype._eval.call(this,n)}catch(e){if(e instanceof Ue)return e.result;throw e}return null}},{key:"call",value:function call(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=new Ne({},arguments.length>1&&void 0!==arguments[1]?arguments[1]:null);return e=e||{},null!==this.signature&&(e=this.signature.bindObject(this.name,[],e)),this._callbound(t,e)}},{key:y,value:function value(e,t){return this._callbound(e,t)}},{key:"ul4type",value:function ul4type(){return"template"}}]),Template}(Er);_defineProperty(Ur,"classdoc","An UL4 template"),Ur.prototype._ul4_needsobject=!0,Ur.prototype._ul4_needscontext=!0;var Yr=function(e){_inherits(SignatureAST,e);var t=_createSuper(SignatureAST);function SignatureAST(e,n,i){var o;return _classCallCheck(this,SignatureAST),(o=t.call(this,e,n,i)).params=[],o}return _createClass(SignatureAST,[{key:"ul4ondump",value:function ul4ondump(e){_get$1(_getPrototypeOf(SignatureAST.prototype),"ul4ondump",this).call(this,e);var t,n=[],i=_createForOfIteratorHelper(this.params);try{for(i.s();!(t=i.n()).done;){var o=t.value;n.push(o[0],o[1]),o[1].endsWith("=")&&n.push(o[2])}}catch(e){i.e(e)}finally{i.f()}e.dump(n)}},{key:"ul4onload",value:function ul4onload(e){_get$1(_getPrototypeOf(SignatureAST.prototype),"ul4onload",this).call(this,e);var t,n,i=e.load();this.params=[];var o,s=0,u=_createForOfIteratorHelper(i);try{for(u.s();!(o=u.n()).done;){var l=o.value;0==s?(t=l,s=1):1==s?(n=l).endsWith("=")?s=2:(this.params.push({name:t,type:n,defaultValue:null}),s=0):(this.params.push({name:t,type:n,defaultValue:l}),s=0)}}catch(e){u.e(e)}finally{u.f()}}},{key:"_eval",value:function _eval(e){var t,n=[],i=_createForOfIteratorHelper(this.params);try{for(i.s();!(t=i.n()).done;){var o=t.value;n.push(o.name,o.type),o.type.endsWith("=")&&n.push(o.defaultValue._handle_eval(e))}}catch(e){i.e(e)}finally{i.f()}return _construct(re,n)}},{key:"_repr",value:function _repr(e){e.push("<",this.constructor.name," params="),this.params._repr(e),e.push(">")}}]),SignatureAST}(ct);_defineProperty(Yr,"classdoc","AST node for the signature of a locally defined subtemplate."),m=ee.render,k=ee.call,S=ee.getattr;var zr=function(e){_inherits(TemplateClosure,e);var t=_createSuper(TemplateClosure);function TemplateClosure(e,n,i){var o;return _classCallCheck(this,TemplateClosure),(o=t.call(this)).template=e,o.signature=n,o.vars=i,o._ul4_signature=n,o.name=e.name,o.namespace=e.namespace,o.tag=e.tag,o.endtag=e.endtag,o._source=e._source,o.docpos=e.docpos,o.content=e.content,o}return _createClass(TemplateClosure,[{key:m,value:function value(e,t){this.template._renderbound(e,_extend(this.vars,t))}},{key:"render",value:function render(e,t){this.template._renderbound(e,_extend(this.vars,t))}},{key:k,value:function value(e,t){return this.template._callbound(e,_extend(this.vars,t))}},{key:"_renderbound",value:function _renderbound(e,t){this.template._renderbound(e,_extend(this.vars,t))}},{key:"_rendersbound",value:function _rendersbound(e,t){return this.template._rendersbound(e,_extend(this.vars,t))}},{key:S,value:function value(e){var t=this;switch(e){case"render":var n=function render(e,n){t._renderbound(e,n)};return expose(n,this.signature,{needscontext:!0,needsobject:!0}),n;case"renders":var i=function renders(e,n){return t._rendersbound(e,n)};return expose(i,this.signature,{needscontext:!0,needsobject:!0}),i;case"signature":return this.signature;default:return this.template[ee.getattr](e)}}},{key:"ul4type",value:function ul4type(){return"template"}}]),TemplateClosure}(te);function _rgb(e,t,n,i){return new Zr(255*e,255*t,255*n,255*i)}function _xmlescape(e){return e=(e=(e=(e=(e=(e=_str(e)).replace(/&/g,"&amp;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;")).replace(/'/g,"&#39;")).replace(/"/g,"&quot;")}function _csv(e){return null===e?"":("string"!=typeof e&&(e=_repr2(e)),-1===e.indexOf(",")&&-1===e.indexOf('"')&&-1===e.indexOf("\n")||(e='"'+e.replace(/"/g,'""')+'"'),e)}function _chr(e){if("number"!=typeof e)throw new We("chr() requires an int");return String.fromCharCode(e)}function _ord(e){if("string"!=typeof e||1!=e.length)throw new We("ord() requires a string of length 1");return e.charCodeAt(0)}function _hex(e){if("number"!=typeof e)throw new We("hex() requires an int");return e<0?"-0x"+e.toString(16).substr(1):"0x"+e.toString(16)}function _oct(e){if("number"!=typeof e)throw new We("oct() requires an int");return e<0?"-0o"+e.toString(8).substr(1):"0o"+e.toString(8)}function _bin(e){if("number"!=typeof e)throw new We("bin() requires an int");return e<0?"-0b"+e.toString(2).substr(1):"0b"+e.toString(2)}function _min(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(0==i.length)throw new Ke("min() requires at least 1 argument, 0 given");1==i.length&&(i=i[0]);for(var o,s,u=_iter(i),l=!0;;){var c=u.next();if(c.done){if(l){if(t===Object)throw new $e("min() argument is an empty sequence!");return t}return o}var p=c.value;null!==n&&(p=_call(e,n,[p],{})),(l||p<s)&&(o=c.value,s=p),l=!1}}function _max(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(0==i.length)throw new Ke("max() requires at least 1 argument, 0 given");1==i.length&&(i=i[0]);for(var o,s,u=_iter(i),l=!0;;){var c=u.next();if(c.done){if(l){if(t===Object)throw new $e("max() argument is an empty sequence!");return t}return o}var p=c.value;null!==n&&(p=_call(e,n,[p],{})),(l||p>s)&&(o=c.value,s=p),l=!1}}function _sum(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=_iter(e);;){var i=n.next();if(i.done)break;t+=i.value}return t}function _first(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=_iter(e).next();return n.done?t:n.value}function _last(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=_iter(e);;){var i=n.next();if(i.done)break;t=i.value}return t}function _sorted(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(null===n){var o=i?function cmp(e,t){return-_cmp("<=>",e,t)}:function cmp(e,t){return _cmp("<=>",e,t)},s=_list(t);return s.sort(o),s}for(var u=[],l=0,c=_iter(t);;++l){var p=c.next();if(p.done)break;var f=_call(e,n,[p.value],{});u.push([f,i?-l:l,p.value])}u.sort((function _cmp2(e,t){var n=_cmp("<=>",e[0],t[0]);return n||(n=_cmp("<=>",e[1],t[1])),i?-n:n}));for(var _=[],h=0,d=u;h<d.length;h++){var v=d[h];_.push(v[2])}return _}function _range(e){var t,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object;if(o===Object&&(o=1),i===Object&&(i=e,e=0),0===o)throw new $e("range() requires a step argument != 0");o>0?(t=e,n=i):(t=i,n=e);var s=t<n?Math.floor((n-t-1)/Math.abs(o))+1:0;return{index:0,next:function next(){return this.index>=s?{done:!0}:{value:e+this.index++*o,done:!1}}}}function _slice(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Object;if(i===Object&&(i=1),n===Object&&(n=t,t=0),t<0)throw new $e("slice() requires a start argument >= 0");if(n<0)throw new $e("slice() requires a stop argument >= 0");if(i<=0)throw new $e("slice() requires a step argument > 0");var o=t,s=0,u=_iter(e);return{next:function next(){for(var e;s<o;){if((e=u.next()).done)return e;++s}return null!==n&&s>=n?{done:!0}:((e=u.next()).done||(++s,o+=i,null!==n&&o>n&&(o=n)),e)}}}function _urlquote(e){return encodeURIComponent(e)}function _urlunquote(e){return decodeURIComponent(e)}function _reversed(e){return"string"==typeof e||_islist(e)||(e=_list(e)),{index:e.length-1,next:function next(){return this.index>=0?{value:e[this.index--],done:!1}:{done:!0}}}}function _random(){return Math.random()}function _randrange(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object;n===Object&&(n=1),t===Object&&(t=e,e=0);var i,o=t-e,s=Math.random();if(n>0)i=Math.floor((o+n-1)/n);else{if(!(n<0))throw new $e("randrange() requires a step argument != 0");i=Math.floor((o+n+1)/n)}return e+n*Math.floor(s*i)}function _randchoice(e){var t=_iscolor(e);if("string"!=typeof e&&!_islist(e)&&!t)throw new We("randchoice() requires a string or list");return t&&(e=_list(e)),e[Math.floor(Math.random()*e.length)]}function _round(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(t){var n=Math.pow(10,t);return Math.round(e*n)/n}return Math.round(e)}function _floor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(t){var n=Math.pow(10,t);return Math.floor(e*n)/n}return Math.floor(e)}function _ceil(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(t){var n=Math.pow(10,t);return Math.ceil(e*n)/n}return Math.ceil(e)}function _md5(e){return K(e)}function _scrypt(e,t){throw new at("scrypt() is not implemented")}function _css(e,t){if(e.startsWith("#")){if(4==e.length)return new Zr(17*parseInt(e[1],16),17*parseInt(e[2],16),17*parseInt(e[3],16));if(5==e.length)return new Zr(17*parseInt(e[1],16),17*parseInt(e[2],16),17*parseInt(e[3],16),17*parseInt(e[4],16));if(7==e.length)return new Zr(parseInt(e.substring(1,3),16),parseInt(e.substring(3,5),16),parseInt(e.substring(5,7),16));if(9==e.length)return new Zr(parseInt(e.substring(1,3),16),parseInt(e.substring(3,5),16),parseInt(e.substring(5,7),16),parseInt(e.substring(7,9),16))}else if(e.startsWith("rgb(")&&e.endsWith(")")){var n=e.slice(4,-1).split(",");if(3==n.length){for(var i=0;i<3;++i){var o=n[i];o.endsWith("%")?n[i]=255*parseInt(o.slice(0,-1),"10")/100:n[i]=parseInt(o,"10")}return _construct(Zr,_toConsumableArray(n))}}else if(e.startsWith("rgba(")&&e.endsWith(")")){var s=e.slice(5,-1).split(",");if(4==s.length){for(var u=0;u<4;++u){var l=s[u];l.endsWith("%")?s[u]=255*parseInt(l.slice(0,-1),"10")/100:s[u]=3==u?255*parseFloat(l):parseInt(l,"10")}return _construct(Zr,_toConsumableArray(s))}}else{var c=Zr.cssColors[e];if(void 0!==c)return c}if(void 0===t)throw new $e("css() can't interpret "+_repr2(e)+" as a CSS color value");return t}function _mix(e){var t,n=0,i=0,o=0,s=0,u=1,l=0,c=_createForOfIteratorHelper(e);try{for(c.s();!(t=c.n()).done;){var p=t.value;if(p instanceof Zr)l+=u,n+=u*p._r,i+=u*p._g,o+=u*p._b,s+=u*(255-p._a);else{if("number"!=typeof p)throw new Ke("color.mix() arguments msut be numbers or colors, not "+_type(p).fullname());u=p}}}catch(e){c.e(e)}finally{c.f()}if(0==l)throw new $e("at least one of the arguments must be a color and at least one of the weights must be >0");return new Zr(n/l,i/l,o/l,255-s/l)}function _enumerate(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{iter:_iter(e),index:t,next:function next(){var e=this.iter.next();return e.done?e:{value:[this.index++,e.value],done:!1}}}}function _isfirst(e){var t=_iter(e),n=!0;return{next:function next(){var e=t.next(),i=e.done?e:{value:[n,e.value],done:!1};return n=!1,i}}}function _islast(e){var t=_iter(e),n=t.next();return{next:function next(){if(n.done)return n;var e=t.next(),i={value:[e.done,n.value],done:!1};return n=e,i}}}function _isfirstlast(e){var t=_iter(e),n=!0,i=t.next();return{next:function next(){if(i.done)return i;var e=t.next(),o={value:[n,e.done,i.value],done:!1};return i=e,n=!1,o}}}function _enumfl(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=_iter(e),i=t,o=!0,s=n.next();return{next:function next(){if(s.done)return s;var e=n.next(),t={value:[i++,o,e.done,s.value],done:!1};return s=e,o=!1,t}}}function _zip(e){if(e.length){var t,n=[],i=_createForOfIteratorHelper(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;n.push(_iter(o))}}catch(e){i.e(e)}finally{i.f()}return{next:function next(){for(var e=[],t=0,i=n;t<i.length;t++){var o=i[t].next();if(o.done)return o;e.push(o.value)}return{value:e,done:!1}}}}return{next:function next(){return{done:!0}}}}function _abs(e){return null!==e&&"function"==typeof e[ee.abs]?e[ee.abs]():Math.abs(e)}function _date(e,t,n){return Fe[ee.call](e,t,n)}function _hls(e,t,n,i){var o,s,u=function _v(e,t,n){return(n%=1)<1/6?e+(t-e)*n*6:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e};return void 0===i&&(i=1),0===n?_rgb(t,t,t,i):_rgb(u(o=2*t-(s=t<=.5?t*(1+n):t+n-t*n),s,e+1/3),u(o,s,e),u(o,s,e-1/3),i)}function _hsv(e,t,n,i){if(0===t)return _rgb(n,n,n,i);var o=Math.floor(6*e),s=6*e-o,u=n*(1-t),l=n*(1-t*s),c=n*(1-t*(1-s));switch(o%6){case 0:return _rgb(n,c,u,i);case 1:return _rgb(l,n,u,i);case 2:return _rgb(u,n,c,i);case 3:return _rgb(u,l,n,i);case 4:return _rgb(c,u,n,i);case 5:return _rgb(n,u,l,i)}}function now(){return new Date}function utcnow(){var e=new Date;return new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())}function today(){var e=new Date;return new en(e.getFullYear(),e.getMonth()+1,e.getDate())}_defineProperty(zr,"classmodule","ul4"),_defineProperty(zr,"classdoc","A locally defined UL4 template"),zr.prototype._ul4_needsobject=!0,zr.prototype._ul4_needscontext=!0;var Gr=function(e,t){function Module(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_classCallCheck(this,Module),this.__name__=e,this.__doc__=t;for(var i=0,o=Object.entries(n);i<o.length;i++){var s=_slicedToArray(o[i],2),u=s[0],l=s[1];this[u]=l}}return _createClass(Module,[{key:e,value:function value(e){if(this.hasOwnProperty(e))return this[e];throw new ul4.AttributeError(this,e)}},{key:t,value:function value(){return"<module "+this.__name__+">"}}]),Module}(ee.getattr,ee.repr);function _ul4on_loads(e){return _loads2(e)}function _ul4on_dumps(e){return dumps(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)}function isclose(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-9,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(e===t)return!0;if(e===1/0||e===-1/0||t===1/0||t===-1/0)return!1;var o=Math.abs(t-e);return o<=Math.abs(n*e)||(o<=Math.abs(n*t)||o<=i)}expose(_ul4on_loads,["dump","p"],{name:"loads"}),expose(_ul4on_dumps,["obj","p","indent","pk=",null],{name:"dumps"}),expose(Math.cos,["x","p"]),expose(Math.sin,["x","p"]),expose(Math.tan,["x","p"]),expose(Math.sqrt,["x","p"]),expose(isclose,["a","pk","b","pk","rel_tol","k=",1e-9,"abs_tol","k=",0]);var Jr=function(e,t){_inherits(AttrGetterType,e);var n=_createSuper(AttrGetterType);function AttrGetterType(){return _classCallCheck(this,AttrGetterType),n.apply(this,arguments)}return _createClass(AttrGetterType,[{key:t,value:function value(e){return new $r(e)}},{key:"instancecheck",value:function instancecheck(e){return e instanceof $r}}]),AttrGetterType}(ne,ee.call);expose(Jr.prototype,["attrs","*"],{name:"attrgetter"});var Wr=new Jr("operator","attrgetter","A callable object that fetches the given attribute(s) from its operand."),$r=function(e,t){function AttrGetter(e){_classCallCheck(this,AttrGetter),this.attrs=e}return _createClass(AttrGetter,[{key:e,value:function value(){return Wr}},{key:"_getone",value:function _getone(e,t){var n,i=_createForOfIteratorHelper(t.split("."));try{for(i.s();!(n=i.n()).done;){var o=n.value;e=_type(e).getattr(e,o)}}catch(e){i.e(e)}finally{i.f()}return e}},{key:t,value:function value(e){if(1===this.attrs.length)return this._getone(e,this.attrs[0]);var t,n=[],i=_createForOfIteratorHelper(this.attrs);try{for(i.s();!(t=i.n()).done;){var o=t.value;n.push(this._getone(e,o))}}catch(e){i.e(e)}finally{i.f()}return n}}]),AttrGetter}(ee.type,ee.call);function _attrgetter(e){function getone(e,t){var n,i=e,o=_createForOfIteratorHelper(t.split("."));try{for(o.s();!(n=o.n()).done;){var s=n.value;i=ur.prototype._get(i,s)}}catch(e){o.e(e)}finally{o.f()}return i}function get(t){if(1===e.length)return getone(t,e[0]);var n,i=[],o=_createForOfIteratorHelper(e);try{for(o.s();!(n=o.n()).done;){var s=n.value;i.push(getone(t,s))}}catch(e){o.e(e)}finally{o.f()}return i}return expose(get,["obj","p"]),get}function _count(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(n<0&&(n+=e.length),null===n&&(n=0),i<0&&(i+=e.length),null===i&&(i=e.length),_isstr(e)&&!t.length){if(i<0||n>e.length||n>i)return 0;var o=i-n+1;return o>e.length+1&&(o=e.length+1),o}n=_bound(n,e.length),i=_bound(i,e.length);var s=0;if(_islist(e)){for(var u=n;u<i;++u)_eq(e[u],t)&&++s;return s}for(var l=n;-1!=(l=e.indexOf(t,l))&&!(l+t.length>i);)++s,l+=t.length;return s}function _find(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;n<0&&(n+=e.length),null===n&&(n=0),i<0&&(i+=e.length),null===i&&(i=e.length),n=_bound(n,e.length),i=_bound(i,e.length),0===n&&i===e.length||(e="string"==typeof e?e.substring(n,i):e.slice(n,i));var o=e.indexOf(t);return-1!==o&&(o+=n),o}function _rfind(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;n<0&&(n+=e.length),null===n&&(n=0),i<0&&(i+=e.length),null===i&&(i=e.length),n=_bound(n,e.length),i=_bound(i,e.length),0===n&&i===e.length||(e="string"==typeof e?e.substring(n,i):e.slice(n,i));var o=e.lastIndexOf(t);return-1!==o&&(o+=n),o}function _week4format(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null===t?t=0:t%=7;var n=Ve.yearday(e)+6,i=new Date(e.getFullYear(),0,1).getDay();for(--i<0&&(i=6);i!=t;)--n,7==++i&&(i=0);return Math.floor(n/7)}function _isleap(e){return 1===new Date(e.getFullYear(),1,29).getMonth()}expose($r.prototype,["obj","p"],{name:"attrgetter"}),expose(_attrgetter,["attrs","*"]),expose(_repr2,["obj","p"],{name:"repr"}),expose(_ascii,["obj","p"],{name:"ascii"}),expose(_len,["sequence","p"],{name:"len"}),expose(_type,["obj","p"],{name:"type"}),expose(_format,["obj","pk","fmt","pk","lang","pk=",null],{name:"format"}),expose(_any,["iterable","p"],{name:"any"}),expose(_all,["iterable","p"],{name:"all"}),expose(_zip,["iterables","*"],{name:"zip"}),expose(_getattr,["obj","p","attrname","p","default","p=",null],{name:"getattr"}),expose(_hasattr,["obj","p","attrname","p"],{name:"hasattr"}),expose(_dir,["obj","p"],{name:"dir"}),expose(_isundefined,["obj","p"],{name:"isundefined"}),expose(_isdefined,["obj","p"],{name:"isdefined"}),expose(_isnone,["obj","p"],{name:"isnone"}),expose(_isbool,["obj","p"],{name:"isbool"}),expose(_isint,["obj","p"],{name:"isint"}),expose(_isfloat,["obj","p"],{name:"isfloat"}),expose(_isstr,["obj","p"],{name:"isstr"}),expose(_isdate,["obj","p"],{name:"isdate"}),expose(_isdatetime,["obj","p"],{name:"isdatetime"}),expose(_iscolor,["obj","p"],{name:"iscolor"}),expose(_istimedelta,["obj","p"],{name:"istimedelta"}),expose(_ismonthdelta,["obj","p"],{name:"ismonthdelta"}),expose(_istemplate,["obj","p"],{name:"istemplate"}),expose(_isfunction,["obj","p"],{name:"isfunction"}),expose(_islist,["obj","p"],{name:"islist"}),expose(_isset,["obj","p"],{name:"isset"}),expose(_isdict,["obj","p"],{name:"isdict"}),expose(_isexception,["obj","p"],{name:"isexception"}),expose(_isinstance,["obj","p","type","p"],{name:"isinstance"}),expose(_asjson,["obj","p"],{name:"asjson"}),expose(_fromjson,["string","p"],{name:"fromjson"}),expose(_asul4on,["obj","p","indent","pk=",null],{name:"asul4on"}),expose(_fromul4on,["dump","p"],{name:"fromul4on"}),expose(now,[]),expose(utcnow,[]),expose(today,[]),expose(_enumerate,["iterable","pk","start","pk=",0],{name:"enumerate"}),expose(_isfirst,["iterable","p"],{name:"isfirst"}),expose(_islast,["iterable","p"],{name:"islast"}),expose(_isfirstlast,["iterable","p"],{name:"isfirstlast"}),expose(_enumfl,["iterable","p","start","pk=",0],{name:"enumfl"}),expose(_abs,["number","p"],{name:"abs"}),expose(_rgb,["r","pk","g","pk","b","pk","a","pk=",1],{name:"rgb"}),expose(_hls,["h","pk","l","pk","s","pk","a","pk=",1],{name:"hls"}),expose(_hsv,["h","pk","s","pk","v","pk","a","pk=",1],{name:"hsv"}),expose(_xmlescape,["obj","p"],{name:"xmlescape"}),expose(_csv,["obj","p"],{name:"csv"}),expose(_chr,["i","p"],{name:"chr"}),expose(_ord,["c","p"],{name:"ord"}),expose(_hex,["number","p"],{name:"hex"}),expose(_oct,["number","p"],{name:"oct"}),expose(_bin,["number","p"],{name:"bin"}),expose(_min,["default","k=",Object,"key","k=",null,"args","*"],{name:"min",needscontext:!0}),expose(_max,["default","k=",Object,"key","k=",null,"args","*"],{name:"max",needscontext:!0}),expose(_sum,["iterable","p","start","pk=",0],{name:"sum"}),expose(_first,["iterable","p","default","pk=",null],{name:"first"}),expose(_last,["iterable","p","default","pk=",null],{name:"last"}),expose(_sorted,["iterable","p","key","pk=",null,"reverse","pk=",!1],{name:"sorted",needscontext:!0}),expose(_range,["start","p","stop","p=",Object,"step","p=",Object],{name:"range"}),expose(_slice,["iterable","p","start","p","stop","p=",Object,"step","p=",Object],{name:"slice"}),expose(_urlquote,["string","pk"],{name:"urlquote"}),expose(_urlunquote,["string","pk"],{name:"urlunquote"}),expose(_reversed,["sequence","p"],{name:"reversed"}),expose(_random,[],{name:"random"}),expose(_randrange,["start","p","stop","p=",Object,"step","p=",Object],{name:"randrange"}),expose(_randchoice,["seq","pk"],{name:"randchoice"}),expose(_round,["x","p","digits","pk=",0],{name:"round"}),expose(_floor,["x","p","digits","pk=",0],{name:"floor"}),expose(_ceil,["x","p","digits","pk=",0],{name:"ceil"}),expose(_md5,["string","p"],{name:"md5"}),expose(_scrypt,["string","p","salt","pk"],{name:"scrypt"}),expose(_css,["value","p","default","p=",void 0],{name:"css"}),expose(_mix,["values","*"],{name:"mix"});var Kr=function(e,t){_inherits(ColorType,e);var n=_createSuper(ColorType);function ColorType(){return _classCallCheck(this,ColorType),n.apply(this,arguments)}return _createClass(ColorType,[{key:t,value:function value(){return new Zr(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:255)}},{key:"instancecheck",value:function instancecheck(e){return e instanceof Zr}}]),ColorType}(ne,ee.call);expose(Kr.prototype,["r","pk=",0,"g","pk=",0,"b","pk=",0,"a","pk=",255],{name:"color"}),Kr.prototype.attrs=new Set(["a","abslight","abslum","b","combine","g","hls","hlsa","hsv","hsva","hue","invert","light","lum","r","rellight","rellum","sat","witha","withhue","withlight","withlum","withsat"]);var Qr=new Kr("color","Color","An RGBA color (with 8-bit red, green, blue and alpha values).");T=ee.type,A=ee.repr,w=ee.str,x=Symbol.iterator,C=ee.getattr,j=ee.getitem,O=ee.eq;var Zr=function(e){_inherits(Color,e);var t=_createSuper(Color);function Color(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:255;return _classCallCheck(this,Color),(e=t.call(this))._r=_bound(_round(n),255),e._g=_bound(_round(i),255),e._b=_bound(_round(o),255),e._a=_bound(_round(s),255),e}return _createClass(Color,[{key:T,value:function value(){return Qr}},{key:A,value:function value(){var e=_lpad(this._r.toString(16),"0",2),t=_lpad(this._g.toString(16),"0",2),n=_lpad(this._b.toString(16),"0",2),i=_lpad(this._a.toString(16),"0",2);return 255!==this._a?e[0]===e[1]&&t[0]===t[1]&&n[0]===n[1]&&i[0]===i[1]?"#"+e[0]+t[0]+n[0]+i[0]:"#"+e+t+n+i:e[0]===e[1]&&t[0]===t[1]&&n[0]===n[1]?"#"+e[0]+t[0]+n[0]:"#"+e+t+n}},{key:w,value:function value(){if(255!==this._a)return"rgba("+this._r+", "+this._g+", "+this._b+", "+this._a/255+")";var e=_lpad(this._r.toString(16),"0",2),t=_lpad(this._g.toString(16),"0",2),n=_lpad(this._b.toString(16),"0",2);return e[0]===e[1]&&t[0]===t[1]&&n[0]===n[1]?"#"+e[0]+t[0]+n[0]:"#"+e+t+n}},{key:x,value:function value(){return{obj:this,index:0,next:function next(){return 0==this.index?(++this.index,{value:this.obj._r,done:!1}):1==this.index?(++this.index,{value:this.obj._g,done:!1}):2==this.index?(++this.index,{value:this.obj._b,done:!1}):3==this.index?(++this.index,{value:this.obj._a,done:!1}):{done:!0}}}}},{key:C,value:function value(e){var t=this;switch(e){case"r":var n=function r(){return t._r};return expose(n,[]),n;case"g":var i=function g(){return t._g};return expose(i,[]),i;case"b":var o=function b(){return t._b};return expose(o,[]),o;case"a":var s=function a(){return t._a};return expose(s,[]),s;case"hue":return expose(this.hue.bind(this),[]);case"light":return expose(this.light.bind(this),[]);case"sat":return expose(this.sat.bind(this),[]);case"lum":return expose(this.lum.bind(this),[]);case"hls":return expose(this.hls.bind(this),[]);case"hlsa":return expose(this.hlsa.bind(this),[]);case"hsv":return expose(this.hsv.bind(this),[]);case"hsva":return expose(this.hsva.bind(this),[]);case"withhue":return expose(this.withhue.bind(this),["hue","pk"]);case"witha":return expose(this.witha.bind(this),["a","pk"]);case"withlight":return expose(this.withlight.bind(this),["light","pk"]);case"abslight":return expose(this.abslight.bind(this),["f","pk"]);case"rellight":return expose(this.rellight.bind(this),["f","pk"]);case"withsat":return expose(this.withsat.bind(this),["sat","pk"]);case"withlum":return expose(this.withlum.bind(this),["lum","pk"]);case"abslum":return expose(this.abslum.bind(this),["f","pk"]);case"rellum":return expose(this.rellum.bind(this),["f","pk"]);case"invert":return expose(this.invert.bind(this),["f","pk=",1]);case"combine":return expose(this.combine.bind(this),["r","pk=",null,"g","pk=",null,"b","pk=",null,"a","pk=",null]);default:throw new rt(this,e)}}},{key:j,value:function value(e){var t=e;switch(e<0&&(e+=4),e){case 0:return this._r;case 1:return this._g;case 2:return this._b;case 3:return this._a;default:throw new tt(this,t)}}},{key:O,value:function value(e){return e instanceof Color&&(this._r==e._r&&this._g==e._g&&this._b==e._b&&this._a==e._a)}},{key:"r",value:function r(){return this._r}},{key:"g",value:function g(){return this._g}},{key:"b",value:function b(){return this._b}},{key:"a",value:function a(){return this._a}},{key:"hue",value:function hue(){return this.hls()[0]}},{key:"light",value:function light(){return this.hls()[1]}},{key:"sat",value:function sat(){return this.hls()[2]}},{key:"lum",value:function lum(){return(.2126*this._r+.7152*this._g+.0722*this._b)/255}},{key:"hls",value:function hls(){var e,t,n,i,o=this._r/255,s=this._g/255,u=this._b/255,l=Math.max(o,s,u),c=Math.min(o,s,u);return e=(c+l)/2,c==l?[0,e,0]:(t=(l-o)/(l-c),n=(l-s)/(l-c),i=(l-u)/(l-c),[(o==l?i-n:s==l?2+t-i:4+n-t)/6%1,e,e<=.5?(l-c)/(l+c):(l-c)/(2-l-c)])}},{key:"hlsa",value:function hlsa(){return this.hls().concat(this._a/255)}},{key:"hsv",value:function hsv(){var e=this._r/255,t=this._g/255,n=this._b/255,i=Math.max(e,t,n),o=Math.min(e,t,n);if(o==i)return[0,0,i];var s=(i-e)/(i-o),u=(i-t)/(i-o),l=(i-n)/(i-o);return[(e==i?l-u:t==i?2+s-l:4+u-s)/6%1,(i-o)/i,i]}},{key:"hsva",value:function hsva(){return this.hsv().concat(this._a/255)}},{key:"withhue",value:function withhue(e){if("number"!=typeof e)throw new We("withhue() requires a number");var t=this.hlsa();return _hls(e,t[1],t[2],t[3])}},{key:"witha",value:function witha(e){if("number"!=typeof e)throw new We("witha() requires a number");return new Color(this._r,this._g,this._b,e)}},{key:"_interpolate",value:function _interpolate(e,t,n){return n*t+(1-n)*e}},{key:"withlight",value:function withlight(e){if("number"!=typeof e)throw new We("withlight() requires a number");var t=this.hlsa();return _hls(t[0],e,t[2],t[3])}},{key:"abslight",value:function abslight(e){if("number"!=typeof e)throw new We("abslight() requires a number");var t=this.hlsa();return _hls(t[0],t[1]+e,t[2],t[3])}},{key:"rellight",value:function rellight(e){if("number"!=typeof e)throw new We("rellum() requires a number");var t=this.hlsa(),n=t[1];return e>0?n+=(1-n)*e:e<0&&(n+=n*e),_hls(t[0],n,t[2],t[3])}},{key:"withsat",value:function withsat(e){if("number"!=typeof e)throw new We("withsat() requires a number");var t=this.hlsa();return _hls(t[0],t[1],e,t[3])}},{key:"withlum",value:function withlum(e){if("number"!=typeof e)throw new We("withlum() requires a number");var t=this.lum();if(0==t||1==t){var n=255*e;return new Color(n,n,n,this._a)}if(e>t){var i=(e-t)/(1-t);return new Color(this._interpolate(this._r,255,i),this._interpolate(this._g,255,i),this._interpolate(this._b,255,i),this._a)}if(e<t){var o=e/t;return new Color(this._interpolate(0,this._r,o),this._interpolate(0,this._g,o),this._interpolate(0,this._b,o),this._a)}return this}},{key:"abslum",value:function abslum(e){if("number"!=typeof e)throw new We("abslum() requires a number");return this.withlum(this.lum()+e)}},{key:"rellum",value:function rellum(e){if("number"!=typeof e)throw new We("rellum() requires a number");var t=this.lum();return e>0?t+=(1-t)*e:e<0&&(t+=t*e),this.withlum(t)}},{key:"invert",value:function invert(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if("number"!=typeof e)throw new We("invert() requires a number");var t=1-e;return new Color(t*this._r+e*(255-this._r),t*this._g+e*(255-this._g),t*this._b+e*(255-this._b),this._a)}},{key:"combine",value:function combine(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return new Color(null!=e?e:this._r,null!=t?t:this._g,null!=n?n:this._b,null!=i?i:this._a)}},{key:"ul4type",value:function ul4type(){return"color"}}]),Color}(te);_defineProperty(Zr,"maroon",new Zr(128,0,0)),_defineProperty(Zr,"red",new Zr(255,0,0)),_defineProperty(Zr,"orange",new Zr(255,165,0)),_defineProperty(Zr,"yellow",new Zr(255,255,0)),_defineProperty(Zr,"olive",new Zr(128,128,0)),_defineProperty(Zr,"purple",new Zr(128,0,128)),_defineProperty(Zr,"fuchsia",new Zr(255,0,255)),_defineProperty(Zr,"white",new Zr(255,255,255)),_defineProperty(Zr,"lime",new Zr(0,255,0)),_defineProperty(Zr,"green",new Zr(0,128,0)),_defineProperty(Zr,"navy",new Zr(0,0,128)),_defineProperty(Zr,"blue",new Zr(0,0,255)),_defineProperty(Zr,"aqua",new Zr(0,255,255)),_defineProperty(Zr,"teal",new Zr(0,128,128)),_defineProperty(Zr,"black",new Zr(0,0,0)),_defineProperty(Zr,"silver",new Zr(192,192,192)),_defineProperty(Zr,"gray",new Zr(128,128,128)),_defineProperty(Zr,"magenta",Zr.purple),_defineProperty(Zr,"cyan",Zr.aqua),_defineProperty(Zr,"cssColors",{maroon:Zr.maroon,red:Zr.red,orange:Zr.orange,yellow:Zr.yellow,olive:Zr.olive,purple:Zr.purple,fuchsia:Zr.fuchsia,white:Zr.white,lime:Zr.lime,green:Zr.green,navy:Zr.navy,blue:Zr.blue,aqua:Zr.aqua,teal:Zr.teal,black:Zr.black,silver:Zr.silver,gray:Zr.gray,magenta:Zr.magenta,cyan:Zr.cyan}),expose(Zr.prototype.r,[]),expose(Zr.prototype.g,[]),expose(Zr.prototype.b,[]),expose(Zr.prototype.a,[]),expose(Zr.prototype.hue,[]),expose(Zr.prototype.lum,[]),expose(Zr.prototype.sat,[]),expose(Zr.prototype.hls,[]),expose(Zr.prototype.hlsa,[]),expose(Zr.prototype.hsv,[]),expose(Zr.prototype.hsva,[]),expose(Zr.prototype.withhue,["hue","pk"]),expose(Zr.prototype.withlight,["light","pk"]),expose(Zr.prototype.abslight,["f","pk"]),expose(Zr.prototype.rellight,["f","pk"]),expose(Zr.prototype.withsat,["sat","pk"]),expose(Zr.prototype.witha,["a","pk"]),expose(Zr.prototype.withlum,["lum","pk"]),expose(Zr.prototype.abslum,["f","pk"]),expose(Zr.prototype.rellum,["f","pk"]),expose(Zr.prototype.invert,["f","pk=",1]),expose(Zr.prototype.combine,["r","pk=",null,"g","pk=",null,"b","pk=",null,"a","pk=",null]);var en=function(e,t,n,i,o,s,u,l,c){_inherits(Date_,e);var p=_createSuper(Date_);function Date_(e,t,n){var i;return _classCallCheck(this,Date_),(i=p.call(this))._date=new Date(e,t-1,n),i}return _createClass(Date_,[{key:t,value:function value(){return Fe}},{key:n,value:function value(){return"@("+this[ee.str]()+")"}},{key:i,value:function value(){return _lpad(this._date.getFullYear(),"0",4)+"-"+_lpad(this._date.getMonth()+1,"0",2)+"-"+_lpad(this._date.getDate(),"0",2)}},{key:o,value:function value(e){return e instanceof Date_&&this._date.getTime()===e._date.getTime()}},{key:s,value:function value(e){if(e instanceof Date_)return this._date<e._date;_unorderable("<",this,e)}},{key:u,value:function value(e){if(e instanceof Date_)return this._date<=e._date;_unorderable("<=",this,e)}},{key:l,value:function value(e){if(e instanceof Date_)return this._date>e._date;_unorderable(">",this,e)}},{key:c,value:function value(e){if(e instanceof Date_)return this._date>=e._date;_unorderable(">=",this,e)}},{key:"year",value:function year(){return this._date.getFullYear()}},{key:"month",value:function month(){return this._date.getMonth()+1}},{key:"day",value:function day(){return this._date.getDate()}},{key:"ul4type",value:function ul4type(){return"date"}}]),Date_}(te,ee.type,ee.repr,ee.str,ee.eq,ee.lt,ee.le,ee.gt,ee.ge),tn=function(e,t){_inherits(TimeDeltaType,e);var n=_createSuper(TimeDeltaType);function TimeDeltaType(){return _classCallCheck(this,TimeDeltaType),n.apply(this,arguments)}return _createClass(TimeDeltaType,[{key:t,value:function value(){return new nn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0)}},{key:"instancecheck",value:function instancecheck(e){return e instanceof nn}}]),TimeDeltaType}(ne,ee.call);expose(tn.prototype,["days","pk=",0,"seconds","pk=",0,"microseconds","pk=",0],{name:"timedelta"});var rn=new tn(null,"timedelta","A time span (days/seconds/microseconds)."),nn=function(e,t,n,i,o,s,u,l,c,p,f,_,h,d,v,y,m,k,S,T,A){_inherits(TimeDelta,e);var w=_createSuper(TimeDelta);function TimeDelta(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;_classCallCheck(this,TimeDelta),e=w.call(this);var o=Math.floor(1e6*(86400*t+n)+i);i=er.prototype._do(o,1e6);var s=Math.floor(o/1e6);return n=er.prototype._do(s,86400),t=Math.floor(s/86400),n<0&&(n+=86400,--t),e._microseconds=i,e._seconds=n,e._days=t,e}return _createClass(TimeDelta,[{key:t,value:function value(){return rn}},{key:"total_seconds",value:function total_seconds(){return 24*this._days*60*60+this._seconds}},{key:n,value:function value(){var e=[],t=!0;return e.push("timedelta("),this._days&&(e.push("days="+this._days),t=!1),this._seconds&&(t||e.push(", "),e.push("seconds="+this._seconds),t=!1),this._microseconds&&(t||e.push(", "),e.push("microseconds="+this._microseconds)),e.push(")"),e.join("")}},{key:i,value:function value(){var e=[];this._days&&(e.push(this._days+" day"),-1!==this._days&&1!==this._days&&e.push("s"),e.push(", "));var t=this._seconds%60,n=Math.floor(this._seconds/60),i=Math.floor(n/60);return n%=60,e.push(""+i,":",_lpad(n.toString(),"0",2),":",_lpad(t.toString(),"0",2)),this._microseconds&&e.push(".",_lpad(this._microseconds.toString(),"0",6)),e.join("")}},{key:o,value:function value(){return 0!==this._days||0!==this._seconds||0!==this._microseconds}},{key:s,value:function value(){return this._days<0?new TimeDelta(-this._days,-this._seconds,-this._microseconds):this}},{key:u,value:function value(e){return e instanceof TimeDelta&&(this._days===e._days&&this._seconds===e._seconds&&this._microseconds===e._microseconds)}},{key:l,value:function value(e){if(e instanceof TimeDelta)return this._days!=e._days?this._days<e._days:this._seconds!=e._seconds?this._seconds<e._seconds:this._microseconds<e._microseconds;_unorderable("<",this,e)}},{key:c,value:function value(e){if(e instanceof TimeDelta)return this._days!=e._days?this._days<e._days:this._seconds!=e._seconds?this._seconds<e._seconds:this._microseconds<=e._microseconds;_unorderable("<=",this,e)}},{key:p,value:function value(e){if(e instanceof TimeDelta)return this._days!=e._days?this._days>e._days:this._seconds!=e._seconds?this._seconds>e._seconds:this._microseconds>e._microseconds;_unorderable(">",this,e)}},{key:f,value:function value(e){if(e instanceof TimeDelta)return this._days!=e._days?this._days>e._days:this._seconds!=e._seconds?this._seconds>e._seconds:this._microseconds>=e._microseconds;_unorderable(">=",this,e)}},{key:_,value:function value(){return new TimeDelta(-this._days,-this._seconds,-this._microseconds)}},{key:"_adddate",value:function _adddate(e,t){var n=e._date.getFullYear(),i=e._date.getMonth(),o=e._date.getDate()+t;return new Date(n,i,o)}},{key:"_adddatetime",value:function _adddatetime(e,t,n,i){var o=e.getFullYear(),s=e.getMonth(),u=e.getDate()+t,l=e.getHours(),c=e.getMinutes(),p=e.getSeconds()+n,f=e.getMilliseconds()+i/1e3;return new Date(o,s,u,l,c,p,f)}},{key:h,value:function value(e){if(e instanceof TimeDelta)return new TimeDelta(this._days+e._days,this._seconds+e._seconds,this._microseconds+e._microseconds);if(_isdate(e))return this._adddate(e,this._days);if(_isdatetime(e))return this._adddatetime(e,this._days,this._seconds,this._microseconds);throw new We(_type(this).fullname()+" + "+_type(e).fullname()+" not supported")}},{key:d,value:function value(e){if(_isdate(e))return this._adddate(e,this._days);if(_isdatetime(e))return this._adddatetime(e,this._days,this._seconds,this._microseconds);throw new We(_type(this).fullname()+" + "+_type(e).fullname()+" not supported")}},{key:v,value:function value(e){if(e instanceof TimeDelta)return new TimeDelta(this._days-e._days,this._seconds-e._seconds,this._microseconds-e._microseconds);throw new We(_type(this).fullname()+" - "+_type(e).fullname()+" not supported")}},{key:y,value:function value(e){if(_isdate(e))return this._adddate(e,-this._days);if(_isdatetime(e))return this._adddatetime(e,-this._days,-this._seconds,-this._microseconds);throw new We(_type(this).fullname()+" - "+_type(e).fullname()+" not supported")}},{key:m,value:function value(e){if("number"==typeof e)return new TimeDelta(this._days*e,this._seconds*e,this._microseconds*e);throw new We(_type(this).fullname()+" * "+_type(e).fullname()+" not supported")}},{key:k,value:function value(e){if("number"==typeof e)return new TimeDelta(this._days*e,this._seconds*e,this._microseconds*e);throw new We(_type(this).fullname()+" * "+_type(e).fullname()+" not supported")}},{key:S,value:function value(e){if("number"==typeof e||"boolean"==typeof e){if(0==e)throw new et;return new TimeDelta(this._days/e,this._seconds/e,this._microseconds/e)}if(e instanceof TimeDelta){var t=this._days,n=e._days,i=this._seconds||e._seconds,o=this._microseconds||e._microseconds;if((i||o)&&(t=86400*t+this._seconds,n=86400*n+e._seconds,o&&(t=1e6*t+this._microseconds,n=1e6*n+e._microseconds)),0==n)throw new et;return t/n}throw new We(_type(this).fullname()+" / "+_type(e).fullname()+" not supported")}},{key:T,value:function value(e){if("number"==typeof e||"boolean"==typeof e){if(0==e)throw new et;if(_isint(e))return new TimeDelta(this._days/e,this._seconds/e,this._microseconds/e)}else if(e instanceof TimeDelta){var t=this[ee.truediv](e);return Math.floor(t)}}},{key:A,value:function value(e){var t=this;switch(e){case"days":var n=function days(){return t._days};return expose(n,[]),n;case"seconds":var i=function seconds(){return t._seconds};return expose(i,[]),i;case"microseconds":var o=function microseconds(){return t._microseconds};return expose(o,[]),o;default:throw new rt(this,e)}}},{key:"days",value:function days(){return this._days}},{key:"seconds",value:function seconds(){return this._seconds}},{key:"microseconds",value:function microseconds(){return this._microseconds}},{key:"ul4type",value:function ul4type(){return"timedelta"}}]),TimeDelta}(te,ee.type,ee.repr,ee.str,ee.bool,ee.abs,ee.eq,ee.lt,ee.le,ee.gt,ee.ge,ee.neg,ee.add,ee.radd,ee.sub,ee.rsub,ee.mul,ee.rmul,ee.truediv,ee.floordiv,ee.getattr),an=function(e,t){_inherits(MonthDeltaType,e);var n=_createSuper(MonthDeltaType);function MonthDeltaType(){return _classCallCheck(this,MonthDeltaType),n.apply(this,arguments)}return _createClass(MonthDeltaType,[{key:t,value:function value(){return new sn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)}},{key:"instancecheck",value:function instancecheck(e){return e instanceof sn}}]),MonthDeltaType}(ne,ee.call),on=new an(null,"monthdelta","A time span of a number of months.");expose(an.prototype,["months","p=",0],{name:"monthdelta"}),P=ee.type,M=ee.repr,D=ee.str,I=ee.bool,E=ee.abs,B=ee.eq,H=ee.lt,V=ee.le,R=ee.gt,q=ee.ge,L=ee.neg,N=ee.add,X=ee.radd,U=ee.sub,Y=ee.rsub,z=ee.mul,G=ee.rmul,J=ee.truediv,W=ee.floordiv,$=ee.getattr;var sn=function(e){_inherits(MonthDelta,e);var t=_createSuper(MonthDelta);function MonthDelta(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return _classCallCheck(this,MonthDelta),(e=t.call(this))._months=n,e}return _createClass(MonthDelta,[{key:P,value:function value(){return on}},{key:M,value:function value(){return this._months?"monthdelta("+this._months+")":"monthdelta()"}},{key:D,value:function value(){return this._months?-1!==this._months&&1!==this._months?this._months+" months":this._months+" month":"0 months"}},{key:"toString",value:function toString(){return this[ee.str]()}},{key:I,value:function value(){return 0!==this._months}},{key:E,value:function value(){return this._months<0?new MonthDelta(-this._months):this}},{key:B,value:function value(e){return e instanceof MonthDelta&&this._months===e._months}},{key:H,value:function value(e){if(e instanceof MonthDelta)return this._months<e._months;_unorderable("<",this,e)}},{key:V,value:function value(e){if(e instanceof MonthDelta)return this._months<=e._months;_unorderable("<=",this,e)}},{key:R,value:function value(e){if(e instanceof MonthDelta)return this._months>e._months;_unorderable(">",this,e)}},{key:q,value:function value(e){if(e instanceof MonthDelta)return this._months>=e._months;_unorderable(">=",this,e)}},{key:L,value:function value(){return new MonthDelta(-this._months)}},{key:"_adddate",value:function _adddate(e,t){var n=this._adddatetime(e._date,t);return new en(n.getFullYear(),n.getMonth()+1,n.getDate())}},{key:"_adddatetime",value:function _adddatetime(e,t){for(var n=e.getFullYear(),i=e.getMonth()+t,o=e.getDate(),s=e.getHours(),u=e.getMinutes(),l=e.getSeconds(),c=e.getMilliseconds();;){var p=new Date(n,i,1,s,u,l,c).getMonth(),f=new Date(n,i,o,s,u,l,c);if(f.getMonth()===p)return f;--o}}},{key:N,value:function value(e){if(_ismonthdelta(e))return new MonthDelta(this._months+e._months);if(_isdate(e))return this._adddate(e,this._months);if(_isdatetime(e))return this._adddatetime(e,this._months);throw new Ke(_type(this).fullname()+" + "+_type(e).fullname()+" not supported")}},{key:X,value:function value(e){if(_isdate(e))return this._adddate(e,this._months);if(_isdatetime(e))return this._adddatetime(e,this._months);throw new Ke(_type(this).fullname()+" + "+_type(e).fullname()+" not supported")}},{key:U,value:function value(e){if(_ismonthdelta(e))return new MonthDelta(this._months-e._months);throw new Ke(_type(this).fullname()+" - "+_type(e).fullname()+" not supported")}},{key:Y,value:function value(e){if(_isdate(e))return this._adddate(e,-this._months);if(_isdatetime(e))return this._adddatetime(e,-this._months);throw new Ke(_type(this).fullname()+" - "+_type(e).fullname()+" not supported")}},{key:z,value:function value(e){if("number"==typeof e||"boolean"==typeof e)return new MonthDelta(this._months*Math.floor(e));throw new Ke(_type(this).fullname()+" * "+_type(e).fullname()+" not supported")}},{key:G,value:function value(e){if("number"==typeof e||"boolean"==typeof e)return new MonthDelta(this._months*Math.floor(e));throw new Ke(_type(this).fullname()+" * "+_type(e).fullname()+" not supported")}},{key:J,value:function value(e){if(_ismonthdelta(e))return this._months/e._months;throw new Ke(_type(this).fullname()+" / "+_type(e).fullname()+" not supported")}},{key:W,value:function value(e){if("number"==typeof e||"boolean"==typeof e){if(0==e)throw new et;if(_isint(e))return new MonthDelta(Math.floor(this._months/e))}else if(_ismonthdelta(e)){if(0==e._months)throw new et;return Math.floor(this._months/e._months)}throw new Ke(_type(this).fullname()+" // "+_type(e).fullname()+" not supported")}},{key:$,value:function value(e){var t=this;if("months"===e){var n=function months(){return t._months};return expose(n,[]),n}throw new rt(this,e)}},{key:"months",value:function months(){return this._months}}]),MonthDelta}(te);_defineProperty(sn,"classname","monthdelta"),_defineProperty(sn,"classdoc","A time span of a number of months.");for(var un=new Gr("math","Math related functions and constants",{pi:Math.PI,e:Math.E,tau:2*Math.PI,cos:Math.cos,sin:Math.sin,tan:Math.tan,sqrt:Math.sqrt,isclose:isclose}),ln=new Gr("operator","Various operators as functions",{attrgetter:Wr}),cn=new Gr("ul4","UL4 - A templating language",{AST:_maketype(ot),TextAST:_maketype(st),IndentAST:_maketype(ut),LineEndAST:_maketype(lt),CodeAST:_maketype(ct),ConstAST:_maketype(pt),SeqItemAST:_maketype(_t),UnpackSeqItemAST:_maketype(ht),ListAST:_maketype(kt),ListComprehensionAST:_maketype(St),SetAST:_maketype(Tt),SetComprehensionAST:_maketype(At),DictItemAST:_maketype(dt),UnpackDictItemAST:_maketype(vt),DictAST:_maketype(wt),DictComprehensionAST:_maketype(xt),GeneratorExpressionAST:_maketype(Ct),VarAST:_maketype(jt),BlockAST:_maketype(Er),ConditionalBlocksAST:_maketype(Rr),IfBlockAST:_maketype(Lr),ElIfBlockAST:_maketype(Nr),ElseBlockAST:_maketype(Xr),ForBlockAST:_maketype(Br),WhileBlockAST:_maketype(Fr),BreakAST:_maketype(Hr),ContinueAST:_maketype(Vr),AttrAST:_maketype(ur),SliceAST:_maketype(gr),UnaryAST:_maketype(Ot),NotAST:_maketype(Dt),IfAST:_maketype(It),NegAST:_maketype(Pt),BitNotAST:_maketype(Mt),PrintAST:_maketype(Bt),PrintXAST:_maketype(Ft),ReturnAST:_maketype(Et),BinaryAST:_maketype(Ht),ItemAST:_maketype(Vt),ShiftLeftAST:_maketype(tr),ShiftRightAST:_maketype(rr),BitAndAST:_maketype(nr),BitXOrAST:_maketype(ar),BitOrAST:_maketype(ir),IsAST:_maketype(Rt),IsNotAST:_maketype(qt),EQAST:_maketype(Lt),NEAST:_maketype(Nt),LTAST:_maketype(Xt),LEAST:_maketype(Ut),GTAST:_maketype(Yt),GEAST:_maketype(zt),ContainsAST:_maketype(Gt),NotContainsAST:_maketype(Jt),AddAST:_maketype(Wt),SubAST:_maketype($t),MulAST:_maketype(Kt),FloorDivAST:_maketype(Qt),TrueDivAST:_maketype(Zt),OrAST:_maketype(sr),AndAST:_maketype(or),ModAST:_maketype(er),ChangeVarAST:_maketype(br),SetVarAST:_maketype(kr),AddVarAST:_maketype(Tr),SubVarAST:_maketype(Ar),MulVarAST:_maketype(wr),FloorDivVarAST:_maketype(Cr),TrueDivVarAST:_maketype(xr),ModVarAST:_maketype(jr),ShiftLeftVarAST:_maketype(Or),ShiftRightVarAST:_maketype(Pr),BitAndVarAST:_maketype(Mr),BitXOrVarAST:_maketype(Dr),BitOrVarAST:_maketype(Ir),PositionalArgumentAST:_maketype(yt),KeywordArgumentAST:_maketype(mt),UnpackListArgumentAST:_maketype(gt),UnpackDictArgumentAST:_maketype(bt),CallAST:_maketype(lr),RenderAST:_maketype(cr),RenderXAST:_maketype(pr),RenderOrPrintAST:_maketype(fr),RenderOrPrintXAST:_maketype(_r),RenderXOrPrintAST:_maketype(hr),RenderXOrPrintXAST:_maketype(dr),RenderBlockAST:_maketype(vr),RenderBlocksAST:_maketype(yr),SignatureAST:_maketype(Yr),Template:_maketype(Ur),TemplateClosure:_maketype(zr)}),pn=new Gr("ul4on","Object serialization",{loads:_ul4on_loads,dumps:_ul4on_dumps,Encoder:oe,Decoder:le}),fn=new Gr("color","Types and functions for handling RGBA colors",{Color:Qr,css:_css,mix:_mix}),_n={repr:_repr2,ascii:_ascii,str:je,int:Ae,float:xe,list:Pe,set:Ee,dict:De,bool:Se,len:_len,type:_type,format:_format,any:_any,all:_all,zip:_zip,getattr:_getattr,hasattr:_hasattr,dir:_dir,isundefined:_isundefined,isdefined:_isdefined,isnone:_isnone,isbool:_isbool,isint:_isint,isfloat:_isfloat,isstr:_isstr,isdate:_isdate,isdatetime:_isdatetime,iscolor:_iscolor,istimedelta:_istimedelta,ismonthdelta:_ismonthdelta,istemplate:_istemplate,isfunction:_isfunction,islist:_islist,isset:_isset,isdict:_isdict,isexception:_isexception,isinstance:_isinstance,asjson:_asjson,fromjson:_fromjson,asul4on:_asul4on,fromul4on:_fromul4on,now:now,utcnow:utcnow,today:today,enumerate:_enumerate,isfirst:_isfirst,islast:_islast,isfirstlast:_isfirstlast,enumfl:_enumfl,abs:_abs,date:Fe,datetime:Ve,timedelta:rn,monthdelta:on,rgb:_rgb,hls:_hls,hsv:_hsv,xmlescape:_xmlescape,csv:_csv,chr:_chr,ord:_ord,hex:_hex,oct:_oct,bin:_bin,min:_min,max:_max,sum:_sum,first:_first,last:_last,sorted:_sorted,range:_range,slice:_slice,urlquote:_urlquote,urlunquote:_urlunquote,reversed:_reversed,random:_random,randrange:_randrange,randchoice:_randchoice,round:_round,floor:_floor,ceil:_ceil,md5:_md5,scrypt:_scrypt,ul4on:pn,ul4:cn,math:un,operator:ln,color:fn},hn=0,dn=[[st,"text"],[ut,"indent"],[lt,"lineend"],[pt,"const"],[_t,"seqitem"],[ht,"unpackseqitem"],[dt,"dictitem"],[vt,"unpackdictitem"],[yt,"posarg"],[mt,"keywordarg"],[gt,"unpacklistarg"],[bt,"unpackdictarg"],[kt,"list"],[St,"listcomp"],[wt,"dict"],[xt,"dictcomp"],[Tt,"set"],[At,"setcomp"],[Ct,"genexpr"],[jt,"var"],[Dt,"not"],[Pt,"neg"],[Mt,"bitnot"],[It,"if"],[Et,"return"],[Bt,"print"],[Ft,"printx"],[Vt,"item"],[Rt,"is"],[qt,"isnot"],[Lt,"eq"],[Nt,"ne"],[Xt,"lt"],[Ut,"le"],[Yt,"gt"],[zt,"ge"],[Jt,"notcontains"],[Gt,"contains"],[Wt,"add"],[$t,"sub"],[Kt,"mul"],[Qt,"floordiv"],[Zt,"truediv"],[er,"mod"],[tr,"shiftleft"],[rr,"shiftright"],[nr,"bitand"],[ar,"bitxor"],[ir,"bitor"],[or,"and"],[sr,"or"],[gr,"slice"],[ur,"attr"],[lr,"call"],[cr,"render"],[pr,"renderx"],[fr,"render_or_print"],[_r,"render_or_printx"],[hr,"renderx_or_print"],[dr,"renderx_or_printx"],[vr,"renderblock"],[yr,"renderblocks"],[kr,"setvar"],[Tr,"addvar"],[Ar,"subvar"],[wr,"mulvar"],[xr,"truedivvar"],[Cr,"floordivvar"],[jr,"modvar"],[Or,"shiftleftvar"],[Pr,"shiftrightvar"],[Mr,"bitandvar"],[Dr,"bitxorvar"],[Ir,"bitorvar"],[Br,"forblock"],[Fr,"whileblock"],[Hr,"break"],[Vr,"continue"],[Rr,"condblock"],[Lr,"ifblock"],[Nr,"elifblock"],[Xr,"elseblock"],[Yr,"signature"],[Ur,"template"]];hn<dn.length;hn++){var vn=_slicedToArray(dn[hn],2),yn=vn[0],mn=vn[1];yn.prototype.type=mn,register("de.livinglogic.ul4."+mn,yn)}e.AST=ot,e.AddAST=Wt,e.AddVarAST=Tr,e.AndAST=or,e.ArgumentError=Ke,e.AttrAST=ur,e.AttrGetter=$r,e.AttrGetterType=Jr,e.AttributeError=rt,e.BinaryAST=Ht,e.BitAndAST=nr,e.BitAndVarAST=Mr,e.BitNotAST=Mt,e.BitOrAST=ir,e.BitOrVarAST=Ir,e.BitXOrAST=ar,e.BitXOrVarAST=Dr,e.BlockAST=Er,e.BreakAST=Hr,e.BreakException=Ye,e.CallAST=lr,e.ChangeVarAST=br,e.CodeAST=ct,e.Color=Zr,e.ColorType=Kr,e.ConditionalBlockAST=qr,e.ConditionalBlocksAST=Rr,e.ConstAST=pt,e.ContainsAST=Gt,e.Context=Ne,e.ContinueAST=Vr,e.ContinueException=ze,e.DateTimeType=He,e.DateType=Be,e.Date_=en,e.Decoder=ce,e.DecoderType=ue,e.DictAST=wt,e.DictComprehensionAST=xt,e.DictItemAST=dt,e.EQAST=Lt,e.ElIfBlockAST=Nr,e.ElseBlockAST=Xr,e.Encoder=se,e.EncoderType=ie,e.Exception=Exception,e.FloorDivAST=Qt,e.FloorDivVarAST=Cr,e.ForBlockAST=Br,e.FunctionType=Re,e.GEAST=zt,e.GTAST=Yt,e.GeneratorExpressionAST=Ct,e.GenericType=Le,e.IfAST=It,e.IfBlockAST=Lr,e.IndentAST=ut,e.IndexError=tt,e.InternalException=Xe,e.IsAST=Rt,e.IsNotAST=qt,e.ItemAST=Vt,e.ItemArgBase=ft,e.KeyError=nt,e.KeywordArgumentAST=mt,e.LEAST=Ut,e.LTAST=Xt,e.LValueRequiredError=Je,e.LineEndAST=lt,e.ListAST=kt,e.ListComprehensionAST=St,e.ListType=Oe,e.LocationError=it,e.ModAST=er,e.ModVarAST=jr,e.ModifyVarAST=Sr,e.Module=Gr,e.MonthDelta=sn,e.MonthDeltaType=an,e.MulAST=Kt,e.MulVarAST=wr,e.NEAST=Nt,e.NegAST=Pt,e.NotAST=Dt,e.NotContainsAST=Jt,e.NotImplementedError=at,e.NotSubscriptableError=Ze,e.OrAST=sr,e.ParameterError=Qe,e.PositionalArgumentAST=yt,e.PrintAST=Bt,e.PrintXAST=Ft,e.Proto=te,e.RenderAST=cr,e.RenderBlockAST=vr,e.RenderBlocksAST=yr,e.RenderOrPrintAST=fr,e.RenderOrPrintXAST=_r,e.RenderXAST=pr,e.RenderXOrPrintAST=hr,e.RenderXOrPrintXAST=dr,e.ReturnAST=Et,e.ReturnException=Ue,e.SeqItemAST=_t,e.SetAST=Tt,e.SetComprehensionAST=At,e.SetType=Ie,e.SetVarAST=kr,e.ShiftLeftAST=tr,e.ShiftLeftVarAST=Or,e.ShiftRightAST=rr,e.ShiftRightVarAST=Pr,e.Signature=re,e.SignatureAST=Yr,e.SliceAST=gr,e.StrType=Ce,e.SubAST=$t,e.SubVarAST=Ar,e.SyntaxError=Ge,e.Template=Ur,e.TemplateClosure=zr,e.TextAST=st,e.TimeDelta=nn,e.TimeDeltaType=tn,e.TrueDivAST=Zt,e.TrueDivVarAST=xr,e.Type=ne,e.TypeError=We,e.UnaryAST=Ot,e.UnpackDictArgumentAST=bt,e.UnpackDictItemAST=vt,e.UnpackListArgumentAST=gt,e.UnpackSeqItemAST=ht,e.ValueError=$e,e.VarAST=jt,e.WhileBlockAST=Fr,e.ZeroDivisionError=et,e._abs=_abs,e._all=_all,e._any=_any,e._ascii=_ascii,e._asjson=_asjson,e._asul4on=_asul4on,e._attrgetter=_attrgetter,e._bin=_bin,e._bool=_bool,e._bound=_bound,e._call=_call,e._callfunction=_callfunction,e._callobject=_callobject,e._callrender=_callrender,e._ceil=_ceil,e._chr=_chr,e._cmp=_cmp,e._color=fn,e._count=_count,e._css=_css,e._csv=_csv,e._date=_date,e._datetime=function _datetime(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;return Ve[ee.call](e,t,n,i,o,s,u)},e._dir=_dir,e._enumerate=_enumerate,e._enumfl=_enumfl,e._eq=_eq,e._extend=_extend,e._find=_find,e._first=_first,e._float=function _float(e){return xe[ee.call](e)},e._floor=_floor,e._format=_format,e._formatsource=_formatsource,e._fromjson=_fromjson,e._fromul4on=_fromul4on,e._function_is_callable=_function_is_callable,e._ge=_ge,e._get=function _get(e,t,n){if(_ismap(e))return e.has(t)?e.get(t):n;if(_isobject(e)){var i=e[t];return void 0===i?n:i}throw new We("get() requires a dict")},e._getattr=_getattr,e._gt=_gt,e._hasattr=_hasattr,e._hex=_hex,e._hls=_hls,e._hsv=_hsv,e._int=function _int(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Ae[ee.call](e,t)},e._internal_call=_internal_call,e._isbool=_isbool,e._iscolor=_iscolor,e._isdate=_isdate,e._isdatetime=_isdatetime,e._isdefined=_isdefined,e._isdict=_isdict,e._isexception=_isexception,e._isfirst=_isfirst,e._isfirstlast=_isfirstlast,e._isfloat=_isfloat,e._isfunction=_isfunction,e._isinstance=_isinstance,e._isint=_isint,e._isiter=_isiter,e._islast=_islast,e._isleap=_isleap,e._islist=_islist,e._ismap=_ismap,e._ismonthdelta=_ismonthdelta,e._isnone=_isnone,e._isobject=_isobject,e._isset=_isset,e._isstr=_isstr,e._istemplate=_istemplate,e._istimedelta=_istimedelta,e._isundefined=_isundefined,e._iter=_iter,e._last=_last,e._le=_le,e._len=_len,e._list=_list,e._list_repeat=_list_repeat,e._lpad=_lpad,e._lt=_lt,e._map2object=function _map2object(e){if(_ismap(e)){var t,n={},i=_createForOfIteratorHelper(e);try{for(i.s();!(t=i.n()).done;){var o=_slicedToArray(t.value,2),s=o[0],u=o[1];if("string"!=typeof s)throw new We("keys must be strings");n[s]=u}}catch(e){i.e(e)}finally{i.f()}return n}return e},e._math=un,e._max=_max,e._md5=_md5,e._min=_min,e._mix=_mix,e._mod=_mod,e._monthdelta=function _monthdelta(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return sn.type[ee.call](e)},e._ne=_ne,e._object_is_callable=_object_is_callable,e._object_is_renderable=_object_is_renderable,e._oct=_oct,e._operator=ln,e._ord=_ord,e._randchoice=_randchoice,e._random=_random,e._randrange=_randrange,e._range=_range,e._repr=_repr2,e._reversed=_reversed,e._rfind=_rfind,e._rgb=_rgb,e._round=_round,e._rpad=function _rpad(e,t,n){for("number"==typeof e&&(e=e.toString());e.length<n;)e+=t;return e},e._scrypt=_scrypt,e._set=function _set(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Ee[ee.call](e)},e._slice=_slice,e._sorted=_sorted,e._stacktrace=function _stacktrace(e){var t=(e instanceof Exception?e.constructor.name+": ":"")+e.toString();return e.context&&(t=_stacktrace(e.context)+"\n\n"+t),t},e._str=_str,e._str_repeat=_str_repeat,e._sum=_sum,e._timedelta=function _timedelta(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return nn.type[ee.call](e,t,n)},e._type=_type,e._ul4=cn,e._ul4on=pn,e._unorderable=_unorderable,e._unpackvar=_unpackvar,e._urlquote=_urlquote,e._urlunquote=_urlunquote,e._week4format=_week4format,e._xmlescape=_xmlescape,e._zip=_zip,e.api_version=Z,e.booltype=Se,e.builtins=_n,e.constructors2types=de,e.datetimetype=Ve,e.datetype=Fe,e.dicttype=De,e.dumps=dumps,e.expose=expose,e.floattype=xe,e.functiontype=qe,e.inttype=Ae,e.listtype=Pe,e.loads=_loads2,e.monthdeltatype=on,e.nonetype=me,e.now=now,e.register=register,e.report_exc=function report_exc(e){if(console&&console.error){for(var t,n=function text(e){l.push(e)},i=function css(e,t){l.push("%c",e,"%c"),c.push(t,"")},o=function em(e){i(e,"font-weight: bold")},s=function focus(e){i(e,"border-bottom: 2px solid #b22")},u=[];u.unshift(e),void 0!==e.context&&null!==e.context;)e=e.context;for(var l=[],c=[],p=0,f=u;p<f.length;p++){var _=f[p];if(l.length&&n("\n\n"),_ instanceof ul4.LocationError){var h=_.location.template;null!==h.parenttemplate?n("in local template "):n("in template ");for(var d=!0;null!=h;)d?d=!1:n(" in "),o(h.name?_repr2(h.name):"(unnamed)"),h=h.parenttemplate;n(" offset "),o(_.location.pos.start+""),n(":"),o(_.location.pos.stop+""),n("; line "),o(_.location.startline+""),n("; column "),o(_.location.startcol+""),n("\n"),n(_.location.startsourceprefix),s(_.location.startsource),n(_.location.startsourcesuffix)}else o(_.constructor.name),n(": "),n(_.message)}(t=console).error.apply(t,[l.join("")].concat(c))}},e.settype=Ee,e.slice=mr,e.strtype=je,e.symbols=ee,e.timedeltatype=rn,e.today=today,e.undefinedtype=be,e.utcnow=utcnow,e.version=Q}));
//# sourceMappingURL=ul4.js.map
