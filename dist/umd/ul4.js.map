<<<<<<< HEAD
{"version":3,"file":"ul4.js","sources":["../../node_modules/blueimp-md5/js/md5.js","../../src/ul4.js"],"sourcesContent":["/*\n * JavaScript MD5\n * https://github.com/blueimp/JavaScript-MD5\n *\n * Copyright 2011, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n *\n * Based on\n * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message\n * Digest Algorithm, as defined in RFC 1321.\n * Version 2.2 Copyright (C) Paul Johnston 1999 - 2009\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n * Distributed under the BSD License\n * See http://pajhome.org.uk/crypt/md5 for more info.\n */\n\n/* global define */\n\n/* eslint-disable strict */\n\n;(function($) {\n  'use strict'\n\n  /**\n   * Add integers, wrapping at 2^32.\n   * This uses 16-bit operations internally to work around bugs in interpreters.\n   *\n   * @param {number} x First integer\n   * @param {number} y Second integer\n   * @returns {number} Sum\n   */\n  function safeAdd(x, y) {\n    var lsw = (x & 0xffff) + (y & 0xffff)\n    var msw = (x >> 16) + (y >> 16) + (lsw >> 16)\n    return (msw << 16) | (lsw & 0xffff)\n  }\n\n  /**\n   * Bitwise rotate a 32-bit number to the left.\n   *\n   * @param {number} num 32-bit number\n   * @param {number} cnt Rotation count\n   * @returns {number} Rotated number\n   */\n  function bitRotateLeft(num, cnt) {\n    return (num << cnt) | (num >>> (32 - cnt))\n  }\n\n  /**\n   * Basic operation the algorithm uses.\n   *\n   * @param {number} q q\n   * @param {number} a a\n   * @param {number} b b\n   * @param {number} x x\n   * @param {number} s s\n   * @param {number} t t\n   * @returns {number} Result\n   */\n  function md5cmn(q, a, b, x, s, t) {\n    return safeAdd(bitRotateLeft(safeAdd(safeAdd(a, q), safeAdd(x, t)), s), b)\n  }\n  /**\n   * Basic operation the algorithm uses.\n   *\n   * @param {number} a a\n   * @param {number} b b\n   * @param {number} c c\n   * @param {number} d d\n   * @param {number} x x\n   * @param {number} s s\n   * @param {number} t t\n   * @returns {number} Result\n   */\n  function md5ff(a, b, c, d, x, s, t) {\n    return md5cmn((b & c) | (~b & d), a, b, x, s, t)\n  }\n  /**\n   * Basic operation the algorithm uses.\n   *\n   * @param {number} a a\n   * @param {number} b b\n   * @param {number} c c\n   * @param {number} d d\n   * @param {number} x x\n   * @param {number} s s\n   * @param {number} t t\n   * @returns {number} Result\n   */\n  function md5gg(a, b, c, d, x, s, t) {\n    return md5cmn((b & d) | (c & ~d), a, b, x, s, t)\n  }\n  /**\n   * Basic operation the algorithm uses.\n   *\n   * @param {number} a a\n   * @param {number} b b\n   * @param {number} c c\n   * @param {number} d d\n   * @param {number} x x\n   * @param {number} s s\n   * @param {number} t t\n   * @returns {number} Result\n   */\n  function md5hh(a, b, c, d, x, s, t) {\n    return md5cmn(b ^ c ^ d, a, b, x, s, t)\n  }\n  /**\n   * Basic operation the algorithm uses.\n   *\n   * @param {number} a a\n   * @param {number} b b\n   * @param {number} c c\n   * @param {number} d d\n   * @param {number} x x\n   * @param {number} s s\n   * @param {number} t t\n   * @returns {number} Result\n   */\n  function md5ii(a, b, c, d, x, s, t) {\n    return md5cmn(c ^ (b | ~d), a, b, x, s, t)\n  }\n\n  /**\n   * Calculate the MD5 of an array of little-endian words, and a bit length.\n   *\n   * @param {Array} x Array of little-endian words\n   * @param {number} len Bit length\n   * @returns {Array<number>} MD5 Array\n   */\n  function binlMD5(x, len) {\n    /* append padding */\n    x[len >> 5] |= 0x80 << len % 32\n    x[(((len + 64) >>> 9) << 4) + 14] = len\n\n    var i\n    var olda\n    var oldb\n    var oldc\n    var oldd\n    var a = 1732584193\n    var b = -271733879\n    var c = -1732584194\n    var d = 271733878\n\n    for (i = 0; i < x.length; i += 16) {\n      olda = a\n      oldb = b\n      oldc = c\n      oldd = d\n\n      a = md5ff(a, b, c, d, x[i], 7, -680876936)\n      d = md5ff(d, a, b, c, x[i + 1], 12, -389564586)\n      c = md5ff(c, d, a, b, x[i + 2], 17, 606105819)\n      b = md5ff(b, c, d, a, x[i + 3], 22, -1044525330)\n      a = md5ff(a, b, c, d, x[i + 4], 7, -176418897)\n      d = md5ff(d, a, b, c, x[i + 5], 12, 1200080426)\n      c = md5ff(c, d, a, b, x[i + 6], 17, -1473231341)\n      b = md5ff(b, c, d, a, x[i + 7], 22, -45705983)\n      a = md5ff(a, b, c, d, x[i + 8], 7, 1770035416)\n      d = md5ff(d, a, b, c, x[i + 9], 12, -1958414417)\n      c = md5ff(c, d, a, b, x[i + 10], 17, -42063)\n      b = md5ff(b, c, d, a, x[i + 11], 22, -1990404162)\n      a = md5ff(a, b, c, d, x[i + 12], 7, 1804603682)\n      d = md5ff(d, a, b, c, x[i + 13], 12, -40341101)\n      c = md5ff(c, d, a, b, x[i + 14], 17, -1502002290)\n      b = md5ff(b, c, d, a, x[i + 15], 22, 1236535329)\n\n      a = md5gg(a, b, c, d, x[i + 1], 5, -165796510)\n      d = md5gg(d, a, b, c, x[i + 6], 9, -1069501632)\n      c = md5gg(c, d, a, b, x[i + 11], 14, 643717713)\n      b = md5gg(b, c, d, a, x[i], 20, -373897302)\n      a = md5gg(a, b, c, d, x[i + 5], 5, -701558691)\n      d = md5gg(d, a, b, c, x[i + 10], 9, 38016083)\n      c = md5gg(c, d, a, b, x[i + 15], 14, -660478335)\n      b = md5gg(b, c, d, a, x[i + 4], 20, -405537848)\n      a = md5gg(a, b, c, d, x[i + 9], 5, 568446438)\n      d = md5gg(d, a, b, c, x[i + 14], 9, -1019803690)\n      c = md5gg(c, d, a, b, x[i + 3], 14, -187363961)\n      b = md5gg(b, c, d, a, x[i + 8], 20, 1163531501)\n      a = md5gg(a, b, c, d, x[i + 13], 5, -1444681467)\n      d = md5gg(d, a, b, c, x[i + 2], 9, -51403784)\n      c = md5gg(c, d, a, b, x[i + 7], 14, 1735328473)\n      b = md5gg(b, c, d, a, x[i + 12], 20, -1926607734)\n\n      a = md5hh(a, b, c, d, x[i + 5], 4, -378558)\n      d = md5hh(d, a, b, c, x[i + 8], 11, -2022574463)\n      c = md5hh(c, d, a, b, x[i + 11], 16, 1839030562)\n      b = md5hh(b, c, d, a, x[i + 14], 23, -35309556)\n      a = md5hh(a, b, c, d, x[i + 1], 4, -1530992060)\n      d = md5hh(d, a, b, c, x[i + 4], 11, 1272893353)\n      c = md5hh(c, d, a, b, x[i + 7], 16, -155497632)\n      b = md5hh(b, c, d, a, x[i + 10], 23, -1094730640)\n      a = md5hh(a, b, c, d, x[i + 13], 4, 681279174)\n      d = md5hh(d, a, b, c, x[i], 11, -358537222)\n      c = md5hh(c, d, a, b, x[i + 3], 16, -722521979)\n      b = md5hh(b, c, d, a, x[i + 6], 23, 76029189)\n      a = md5hh(a, b, c, d, x[i + 9], 4, -640364487)\n      d = md5hh(d, a, b, c, x[i + 12], 11, -421815835)\n      c = md5hh(c, d, a, b, x[i + 15], 16, 530742520)\n      b = md5hh(b, c, d, a, x[i + 2], 23, -995338651)\n\n      a = md5ii(a, b, c, d, x[i], 6, -198630844)\n      d = md5ii(d, a, b, c, x[i + 7], 10, 1126891415)\n      c = md5ii(c, d, a, b, x[i + 14], 15, -1416354905)\n      b = md5ii(b, c, d, a, x[i + 5], 21, -57434055)\n      a = md5ii(a, b, c, d, x[i + 12], 6, 1700485571)\n      d = md5ii(d, a, b, c, x[i + 3], 10, -1894986606)\n      c = md5ii(c, d, a, b, x[i + 10], 15, -1051523)\n      b = md5ii(b, c, d, a, x[i + 1], 21, -2054922799)\n      a = md5ii(a, b, c, d, x[i + 8], 6, 1873313359)\n      d = md5ii(d, a, b, c, x[i + 15], 10, -30611744)\n      c = md5ii(c, d, a, b, x[i + 6], 15, -1560198380)\n      b = md5ii(b, c, d, a, x[i + 13], 21, 1309151649)\n      a = md5ii(a, b, c, d, x[i + 4], 6, -145523070)\n      d = md5ii(d, a, b, c, x[i + 11], 10, -1120210379)\n      c = md5ii(c, d, a, b, x[i + 2], 15, 718787259)\n      b = md5ii(b, c, d, a, x[i + 9], 21, -343485551)\n\n      a = safeAdd(a, olda)\n      b = safeAdd(b, oldb)\n      c = safeAdd(c, oldc)\n      d = safeAdd(d, oldd)\n    }\n    return [a, b, c, d]\n  }\n\n  /**\n   * Convert an array of little-endian words to a string\n   *\n   * @param {Array<number>} input MD5 Array\n   * @returns {string} MD5 string\n   */\n  function binl2rstr(input) {\n    var i\n    var output = ''\n    var length32 = input.length * 32\n    for (i = 0; i < length32; i += 8) {\n      output += String.fromCharCode((input[i >> 5] >>> i % 32) & 0xff)\n    }\n    return output\n  }\n\n  /**\n   * Convert a raw string to an array of little-endian words\n   * Characters >255 have their high-byte silently ignored.\n   *\n   * @param {string} input Raw input string\n   * @returns {Array<number>} Array of little-endian words\n   */\n  function rstr2binl(input) {\n    var i\n    var output = []\n    output[(input.length >> 2) - 1] = undefined\n    for (i = 0; i < output.length; i += 1) {\n      output[i] = 0\n    }\n    var length8 = input.length * 8\n    for (i = 0; i < length8; i += 8) {\n      output[i >> 5] |= (input.charCodeAt(i / 8) & 0xff) << i % 32\n    }\n    return output\n  }\n\n  /**\n   * Calculate the MD5 of a raw string\n   *\n   * @param {string} s Input string\n   * @returns {string} Raw MD5 string\n   */\n  function rstrMD5(s) {\n    return binl2rstr(binlMD5(rstr2binl(s), s.length * 8))\n  }\n\n  /**\n   * Calculates the HMAC-MD5 of a key and some data (raw strings)\n   *\n   * @param {string} key HMAC key\n   * @param {string} data Raw input string\n   * @returns {string} Raw MD5 string\n   */\n  function rstrHMACMD5(key, data) {\n    var i\n    var bkey = rstr2binl(key)\n    var ipad = []\n    var opad = []\n    var hash\n    ipad[15] = opad[15] = undefined\n    if (bkey.length > 16) {\n      bkey = binlMD5(bkey, key.length * 8)\n    }\n    for (i = 0; i < 16; i += 1) {\n      ipad[i] = bkey[i] ^ 0x36363636\n      opad[i] = bkey[i] ^ 0x5c5c5c5c\n    }\n    hash = binlMD5(ipad.concat(rstr2binl(data)), 512 + data.length * 8)\n    return binl2rstr(binlMD5(opad.concat(hash), 512 + 128))\n  }\n\n  /**\n   * Convert a raw string to a hex string\n   *\n   * @param {string} input Raw input string\n   * @returns {string} Hex encoded string\n   */\n  function rstr2hex(input) {\n    var hexTab = '0123456789abcdef'\n    var output = ''\n    var x\n    var i\n    for (i = 0; i < input.length; i += 1) {\n      x = input.charCodeAt(i)\n      output += hexTab.charAt((x >>> 4) & 0x0f) + hexTab.charAt(x & 0x0f)\n    }\n    return output\n  }\n\n  /**\n   * Encode a string as UTF-8\n   *\n   * @param {string} input Input string\n   * @returns {string} UTF8 string\n   */\n  function str2rstrUTF8(input) {\n    return unescape(encodeURIComponent(input))\n  }\n\n  /**\n   * Encodes input string as raw MD5 string\n   *\n   * @param {string} s Input string\n   * @returns {string} Raw MD5 string\n   */\n  function rawMD5(s) {\n    return rstrMD5(str2rstrUTF8(s))\n  }\n  /**\n   * Encodes input string as Hex encoded string\n   *\n   * @param {string} s Input string\n   * @returns {string} Hex encoded string\n   */\n  function hexMD5(s) {\n    return rstr2hex(rawMD5(s))\n  }\n  /**\n   * Calculates the raw HMAC-MD5 for the given key and data\n   *\n   * @param {string} k HMAC key\n   * @param {string} d Input string\n   * @returns {string} Raw MD5 string\n   */\n  function rawHMACMD5(k, d) {\n    return rstrHMACMD5(str2rstrUTF8(k), str2rstrUTF8(d))\n  }\n  /**\n   * Calculates the Hex encoded HMAC-MD5 for the given key and data\n   *\n   * @param {string} k HMAC key\n   * @param {string} d Input string\n   * @returns {string} Raw MD5 string\n   */\n  function hexHMACMD5(k, d) {\n    return rstr2hex(rawHMACMD5(k, d))\n  }\n\n  /**\n   * Calculates MD5 value for a given string.\n   * If a key is provided, calculates the HMAC-MD5 value.\n   * Returns a Hex encoded string unless the raw argument is given.\n   *\n   * @param {string} string Input string\n   * @param {string} [key] HMAC key\n   * @param {boolean} [raw] Raw output switch\n   * @returns {string} MD5 output\n   */\n  function md5(string, key, raw) {\n    if (!key) {\n      if (!raw) {\n        return hexMD5(string)\n      }\n      return rawMD5(string)\n    }\n    if (!raw) {\n      return hexHMACMD5(key, string)\n    }\n    return rawHMACMD5(key, string)\n  }\n\n  if (typeof define === 'function' && define.amd) {\n    define(function() {\n      return md5\n    })\n  } else if (typeof module === 'object' && module.exports) {\n    module.exports = md5\n  } else {\n    $.md5 = md5\n  }\n})(this)\n","/*!\n * UL4/UL4ON JavaScript Library\n * http://www.livinglogic.de/Python/ul4c/\n * http://www.livinglogic.de/Python/ul4on/\n *\n * Copyright 2011-2019 by LivingLogic AG, Bayreuth/Germany\n * Copyright 2011-2019 by Walter DÃ¶rwald\n *\n * All Rights Reserved\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\n/*jslint vars: true */\n\n// Version of this Javascript package\nimport { version } from '../package.json';\n\nexport { version };\n\n// Version of the UL4 API\n// I.e. this version should be compatible with the Python and Java\n// implementations that support the same API version.\nexport const api_version = \"49\";\n\n\n//\n// UL4ON\n//\n\nconst _registry = {};\n\nexport const _havemap = (typeof(Map) === \"function\" && typeof(Map.prototype.forEach) === \"function\");\n\nconst _havemapconstructor = (function ()\n{\n\tif (_havemap)\n\t{\n\t\ttry\n\t\t{\n\t\t\tif (new Map([[1, 2]]).size == 1)\n\t\t\t\treturn true;\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t}\n\t}\n\treturn false;\n})();\n\nconst _haveset = (typeof(Set) === \"function\" && typeof(Set.prototype.forEach) === \"function\");\n\nconst _havesetconstructor = (function ()\n{\n\tif (_haveset)\n\t{\n\t\ttry\n\t\t{\n\t\t\tif (new Set([1, 2]).size == 2)\n\t\t\t\treturn true;\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t}\n\t\treturn false;\n\t}\n\telse\n\t\treturn false;\n})();\n\nexport let _makemap;\nexport let _setmap;\nexport let _emptymap;\nexport let _getmap;\n\n// helper functions that work with Maps and objects\nif (_havemap)\n{\n\t_makemap = function _makemap(...items)\n\t{\n\t\tlet map = new Map();\n\n\t\tfor (let [key, value] of items)\n\t\t\tmap.set(key, value);\n\t\treturn map;\n\t};\n\n\t_setmap = function _setmap(map, key, value)\n\t{\n\t\tif (map.__proto__ === Map.prototype)\n\t\t\tmap.set(key, value);\n\t\telse\n\t\t\tmap[key] = value;\n\t};\n\n\t_emptymap = function _emptymap()\n\t{\n\t\treturn new Map();\n\t};\n\n\t_getmap = function _getmap(map, key, value)\n\t{\n\t\tif (map.__proto__ === Map.prototype)\n\t\t\treturn map.get(key);\n\t\telse\n\t\t\treturn map[key];\n\t};\n}\nelse\n{\n\t_makemap = function _makemap(...items)\n\t{\n\t\tlet map = {};\n\n\t\tfor (let [key, value] of items)\n\t\t\tmap[key] = value;\n\t\treturn map;\n\t};\n\n\t_setmap = function _setmap(map, key, value)\n\t{\n\t\tmap[key] = value;\n\t};\n\n\t_emptymap = function _emptymap()\n\t{\n\t\treturn {};\n\t};\n\n\t_getmap = function _getmap(map, key, value)\n\t{\n\t\treturn map[key];\n\t};\n}\n\nexport let _emptyset;\n\n// Function used for making sets, when the Set constructor doesn't work (or we don't have sets)\nif (_haveset)\n{\n\t_emptyset = function _emptyset()\n\t{\n\t\treturn new Set();\n\t};\n}\nelse\n{\n\t_emptyset = function _emptyset()\n\t{\n\t\treturn new _Set();\n\t};\n}\n\nexport let _makeset = function _makeset(...items)\n{\n\tlet set = _emptyset();\n\n\tfor (let item of items)\n\t\tset.add(item);\n\treturn set;\n};\n\n// Register the constructor function ``f`` under the name ``name`` with the UL4ON machinery\nexport function register(name, f)\n{\n\tf.prototype.ul4onname = name;\n\t_registry[name] = f;\n};\n\n// Return a string that contains the object ``obj`` in the UL4ON serialization format\nexport function dumps(obj, indent)\n{\n\tlet encoder = new Encoder(indent);\n\tencoder.dump(obj);\n\treturn encoder.finish();\n};\n\n// Load an object from the string ``data``.\n// ``data`` must contain the object in the UL4ON serialization format\n// ``registry`` may be null or a dictionary mapping type names to constructor functions\nexport function loads(data, registry)\n{\n\tlet decoder = new Decoder(data, registry);\n\treturn decoder.load();\n};\n\n// Helper class for encoding\nexport class Encoder\n{\n\t// Create a new Encoder object\n\tconstructor(indent=null)\n\t{\n\t\tthis.indent = indent;\n\t\tthis.data = [];\n\t\tthis._level = 0;\n\t\tthis._strings2index = {};\n\t\tthis._ids2index = {};\n\t\tthis._backrefs = 0;\n\t}\n\n\t_line(line, ...args)\n\t{\n\t\tif (this.indent !== null)\n\t\t{\n\t\t\tfor (let i = 0; i < this._level; ++i)\n\t\t\t\tthis.data.push(this.indent);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (this.data.length)\n\t\t\t\tthis.data.push(\" \");\n\t\t}\n\t\tthis.data.push(line);\n\n\t\tif (args.length)\n\t\t{\n\t\t\tlet oldindent = this.indent;\n\t\t\tthis.indent = null;\n\t\t\tfor (let arg of args)\n\t\t\t\tthis.dump(arg);\n\t\t\tthis.indent = oldindent;\n\t\t}\n\n\t\tif (this.indent !== null)\n\t\t\tthis.data.push(\"\\n\");\n\t}\n\n\t// Return the complete string written to the buffer\n\tfinish()\n\t{\n\t\treturn this.data.join(\"\");\n\t}\n\n\tdump(obj)\n\t{\n\t\tif (obj === null)\n\t\t\tthis._line(\"n\");\n\t\telse if (typeof(obj) === \"boolean\")\n\t\t\tthis._line(obj ? \"bT\" : \"bF\");\n\t\telse if (typeof(obj) === \"number\")\n\t\t{\n\t\t\tlet type = (Math.round(obj) == obj) ? \"i\" : \"f\";\n\t\t\tthis._line(type + obj);\n\t\t}\n\t\telse if (typeof(obj) === \"string\")\n\t\t{\n\t\t\tlet index = this._strings2index[obj];\n\t\t\tif (index !== undefined)\n\t\t\t{\n\t\t\t\tthis._line(\"^\" + index);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis._strings2index[obj] = this._backrefs++;\n\t\t\t\tlet dump = _str_repr(obj).replace(\"<\", \"\\\\x3c\");\n\t\t\t\tthis._line(\"S\" + dump);\n\t\t\t}\n\t\t}\n\t\telse if (_iscolor(obj))\n\t\t\tthis._line(\"c\", obj.r(), obj.g(), obj.b(), obj.a());\n\t\telse if (_isdate(obj))\n\t\t\tthis._line(\"x\", obj.year(), obj.month(), obj.day());\n\t\telse if (_isdatetime(obj))\n\t\t\tthis._line(\"z\", obj.getFullYear(), obj.getMonth()+1, obj.getDate(), obj.getHours(), obj.getMinutes(), obj.getSeconds(), obj.getMilliseconds() * 1000);\n\t\telse if (_istimedelta(obj))\n\t\t\tthis._line(\"t\", obj.days(), obj.seconds(), obj.microseconds());\n\t\telse if (_ismonthdelta(obj))\n\t\t\tthis._line(\"m\", obj.months());\n\t\telse if (obj instanceof slice)\n\t\t\tthis._line(\"r\", obj.start, obj.stop);\n\t\telse if (obj.ul4onname && obj.ul4ondump)\n\t\t{\n\t\t\tif (obj.__id__)\n\t\t\t{\n\t\t\t\tlet index = this._ids2index[obj.__id__];\n\t\t\t\tif (index !== undefined)\n\t\t\t\t{\n\t\t\t\t\tthis._line(\"^\" + index);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis._ids2index[obj.__id__] = this._backrefs++;\n\t\t\t}\n\t\t\tthis._line(\"O\", obj.ul4onname);\n\t\t\t++this._level;\n\t\t\tobj.ul4ondump(this);\n\t\t\t--this._level;\n\t\t\tthis._line(\")\");\n\t\t}\n\t\telse if (_islist(obj))\n\t\t{\n\t\t\tthis._line(\"l\");\n\t\t\t++this._level;\n\t\t\tfor (let item of obj)\n\t\t\t\tthis.dump(item);\n\t\t\t--this._level;\n\t\t\tthis._line(\"]\");\n\t\t}\n\t\telse if (_ismap(obj))\n\t\t{\n\t\t\tthis._line(\"e\");\n\t\t\t++this._level;\n\t\t\tobj.forEach(function(value, key) {\n\t\t\t\tthis.dump(key);\n\t\t\t\tthis.dump(value);\n\t\t\t}, this);\n\t\t\t--this._level;\n\t\t\tthis._line(\"}\");\n\t\t}\n\t\telse if (_isdict(obj))\n\t\t{\n\t\t\tthis._line(\"d\");\n\t\t\t++this._level;\n\t\t\tfor (let key in obj)\n\t\t\t{\n\t\t\t\tthis.dump(key);\n\t\t\t\tthis.dump(obj[key]);\n\t\t\t}\n\t\t\t--this._level;\n\t\t\tthis._line(\"}\");\n\t\t}\n\t\telse if (_isset(obj))\n\t\t{\n\t\t\tthis._line(\"y\");\n\t\t\t++this._level;\n\t\t\tobj.forEach(function(value) {\n\t\t\t\tthis.dump(value);\n\t\t\t}, this);\n\t\t\t--this._level;\n\t\t\tthis._line(\"}\");\n\t\t}\n\t\telse\n\t\t\tthrow new ValueError(\"can't create UL4ON dump of object \" + _repr(obj));\n\t}\n};\n\n// Helper class for decoding\nexport class Decoder\n{\n\t// Creates a new decoder for reading from the string ``data``\n\tconstructor(data, registry)\n\t{\n\t\tthis.data = data;\n\t\tthis.pos = 0;\n\t\tthis.backrefs = [];\n\t\tthis.registry = registry === undefined ? null : registry;\n\t\tthis.stack = []; // Use for informative error messages\n\t}\n\n\t// Read a character from the buffer\n\treadchar()\n\t{\n\t\tif (this.pos >= this.data.length)\n\t\t\tthrow new ValueError(\"UL4 decoder at EOF\");\n\t\treturn this.data.charAt(this.pos++);\n\t}\n\n\t// Read a character from the buffer (return null on eof)\n\treadcharoreof()\n\t{\n\t\tif (this.pos >= this.data.length)\n\t\t\treturn null;\n\t\treturn this.data.charAt(this.pos++);\n\t}\n\n\t// Read next not-whitespace character from the buffer\n\treadblackchar()\n\t{\n\t\tlet re_white = /\\s/;\n\n\t\tfor (;;)\n\t\t{\n\t\t\tif (this.pos >= this.data.length)\n\t\t\t\tthrow new ValueError(\"UL4 decoder at EOF at position \" + this.pos + \" with path \" + this.stack.join(\"/\"));\n\t\t\tlet c = this.data.charAt(this.pos++);\n\t\t\tif (!c.match(re_white))\n\t\t\t\treturn c;\n\t\t}\n\t}\n\n\t// Read ``size`` characters from the buffer\n\tread(size)\n\t{\n\t\tif (this.pos+size > this.length)\n\t\t\tsize = this.length-this.pos;\n\t\tlet result = this.data.substring(this.pos, this.pos+size);\n\t\tthis.pos += size;\n\t\treturn result;\n\t}\n\n\t// \"unread\" one character\n\tbackup()\n\t{\n\t\t--this.pos;\n\t}\n\n\t// Read a number from the buffer\n\treadnumber()\n\t{\n\t\tlet re_digits = /[-+0123456789.eE]/, value = \"\";\n\t\tfor (;;)\n\t\t{\n\t\t\tlet c = this.readcharoreof();\n\t\t\tif (c !== null && c.match(re_digits))\n\t\t\t\tvalue += c;\n\t\t\telse\n\t\t\t{\n\t\t\t\tlet result = parseFloat(value);\n\t\t\t\tif (isNaN(result))\n\t\t\t\t\tthrow new ValueError(\"invalid number, got \" + _repr(\"value\") + \" at position \" + this.pos + \" with path \" + this.stack.join(\"/\"));\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}\n\t}\n\n\t_beginfakeloading()\n\t{\n\t\tlet oldpos = this.backrefs.length;\n\t\tthis.backrefs.push(null);\n\t\treturn oldpos;\n\t}\n\n\t_endfakeloading(oldpos, value)\n\t{\n\t\tthis.backrefs[oldpos] = value;\n\t}\n\n\t_readescape(escapechar, length)\n\t{\n\t\tlet chars = this.read(length);\n\t\tif (chars.length != length)\n\t\t\tthrow new ValueError(\"broken escape \" + _repr(\"\\\\\" + escapechar + chars) + \" at position \" + this.pos + \" with path \" + this.stack.join(\"/\"));\n\t\tlet codepoint = parseInt(chars, 16);\n\t\tif (isNaN(codepoint))\n\t\t\tthrow new ValueError(\"broken escape \" + _repr(\"\\\\\" + escapechar + chars) + \" at position \" + this.pos + \" with path \" + this.stack.join(\"/\"));\n\t\treturn String.fromCharCode(codepoint);\n\t}\n\n\t// Load the next object from the buffer\n\tload()\n\t{\n\t\tlet typecode = this.readblackchar();\n\t\tlet result;\n\t\tswitch (typecode)\n\t\t{\n\t\t\tcase \"^\":\n\t\t\t\treturn this.backrefs[this.readnumber()];\n\t\t\tcase \"n\":\n\t\t\tcase \"N\":\n\t\t\t\tif (typecode === \"N\")\n\t\t\t\t\tthis.backrefs.push(null);\n\t\t\t\treturn null;\n\t\t\tcase \"b\":\n\t\t\tcase \"B\":\n\t\t\t\tresult = this.readchar();\n\t\t\t\tif (result === \"T\")\n\t\t\t\t\tresult = true;\n\t\t\t\telse if (result === \"F\")\n\t\t\t\t\tresult = false;\n\t\t\t\telse\n\t\t\t\t\tthrow new ValueError(\"wrong value for boolean, expected 'T' or 'F', got \" + _repr(result) + \" at position \" + this.pos + \" with path \" + this.stack.join(\"/\"));\n\t\t\t\tif (typecode === \"B\")\n\t\t\t\t\tthis.backrefs.push(result);\n\t\t\t\treturn result;\n\t\t\tcase \"i\":\n\t\t\tcase \"I\":\n\t\t\tcase \"f\":\n\t\t\tcase \"F\":\n\t\t\t\tresult = this.readnumber();\n\t\t\t\tif (typecode === \"I\" || typecode === \"F\")\n\t\t\t\t\tthis.backrefs.push(result);\n\t\t\t\treturn result;\n\t\t\tcase \"s\":\n\t\t\tcase \"S\":\n\t\t\t\tresult = [];\n\t\t\t\tlet delimiter = this.readblackchar();\n\t\t\t\tfor (;;)\n\t\t\t\t{\n\t\t\t\t\tlet c = this.readchar();\n\t\t\t\t\tif (c == delimiter)\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tif (c == \"\\\\\")\n\t\t\t\t\t{\n\t\t\t\t\t\tlet c2 = this.readchar();\n\t\t\t\t\t\tif (c2 == \"\\\\\")\n\t\t\t\t\t\t\tresult.push(\"\\\\\");\n\t\t\t\t\t\telse if (c2 == \"n\")\n\t\t\t\t\t\t\tresult.push(\"\\n\");\n\t\t\t\t\t\telse if (c2 == \"r\")\n\t\t\t\t\t\t\tresult.push(\"\\r\");\n\t\t\t\t\t\telse if (c2 == \"t\")\n\t\t\t\t\t\t\tresult.push(\"\\t\");\n\t\t\t\t\t\telse if (c2 == \"f\")\n\t\t\t\t\t\t\tresult.push(\"\\u000c\");\n\t\t\t\t\t\telse if (c2 == \"b\")\n\t\t\t\t\t\t\tresult.push(\"\\u0008\");\n\t\t\t\t\t\telse if (c2 == \"a\")\n\t\t\t\t\t\t\tresult.push(\"\\u0007\");\n\t\t\t\t\t\telse if (c2 == \"'\")\n\t\t\t\t\t\t\tresult.push(\"'\");\n\t\t\t\t\t\telse if (c2 == '\"')\n\t\t\t\t\t\t\tresult.push('\"');\n\t\t\t\t\t\telse if (c2 == \"x\")\n\t\t\t\t\t\t\tresult.push(this._readescape(\"x\", 2));\n\t\t\t\t\t\telse if (c2 == \"u\")\n\t\t\t\t\t\t\tresult.push(this._readescape(\"u\", 4));\n\t\t\t\t\t\telse if (c2 == \"U\")\n\t\t\t\t\t\t\tresult.push(this._readescape(\"U\", 8));\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tresult.push(\"\\\\\" + c2);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\tresult.push(c);\n\t\t\t\t}\n\t\t\t\tresult = result.join(\"\");\n\t\t\t\tif (typecode === \"S\")\n\t\t\t\t\tthis.backrefs.push(result);\n\t\t\t\treturn result;\n\t\t\tcase \"c\":\n\t\t\tcase \"C\":\n\t\t\t\tresult = new Color();\n\t\t\t\tif (typecode === \"C\")\n\t\t\t\t\tthis.backrefs.push(result);\n\t\t\t\tresult._r = this.load();\n\t\t\t\tresult._g = this.load();\n\t\t\t\tresult._b = this.load();\n\t\t\t\tresult._a = this.load();\n\t\t\t\treturn result;\n\t\t\tcase \"x\":\n\t\t\tcase \"X\":\n\t\t\t{\n\t\t\t\tlet year = this.load();\n\t\t\t\tlet month = this.load();\n\t\t\t\tlet day = this.load();\n\t\t\t\tresult = new Date_(year, month, day);\n\t\t\t\tif (typecode === \"X\")\n\t\t\t\t\tthis.backrefs.push(result);\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\tcase \"z\":\n\t\t\tcase \"Z\":\n\t\t\t\tresult = new Date();\n\t\t\t\tresult.setFullYear(this.load());\n\t\t\t\tresult.setDate(1);\n\t\t\t\tresult.setMonth(this.load() - 1);\n\t\t\t\tresult.setDate(this.load());\n\t\t\t\tresult.setHours(this.load());\n\t\t\t\tresult.setMinutes(this.load());\n\t\t\t\tresult.setSeconds(this.load());\n\t\t\t\tresult.setMilliseconds(this.load()/1000);\n\t\t\t\tif (typecode === \"Z\")\n\t\t\t\t\tthis.backrefs.push(result);\n\t\t\t\treturn result;\n\t\t\tcase \"t\":\n\t\t\tcase \"T\":\n\t\t\t\tresult = new TimeDelta();\n\t\t\t\tresult._days = this.load();\n\t\t\t\tresult._seconds = this.load();\n\t\t\t\tresult._microseconds = this.load();\n\t\t\t\tif (typecode === \"T\")\n\t\t\t\t\tthis.backrefs.push(result);\n\t\t\t\treturn result;\n\t\t\tcase \"r\":\n\t\t\tcase \"R\":\n\t\t\t\tresult = new slice();\n\t\t\t\tif (typecode === \"R\")\n\t\t\t\t\tthis.backrefs.push(result);\n\t\t\t\tresult.start = this.load();\n\t\t\t\tresult.stop = this.load();\n\t\t\t\treturn result;\n\t\t\tcase \"m\":\n\t\t\tcase \"M\":\n\t\t\t\tresult = new MonthDelta();\n\t\t\t\tif (typecode === \"M\")\n\t\t\t\t\tthis.backrefs.push(result);\n\t\t\t\tresult._months = this.load();\n\t\t\t\treturn result;\n\t\t\tcase \"l\":\n\t\t\tcase \"L\":\n\t\t\t\tthis.stack.push(\"list\");\n\t\t\t\tresult = [];\n\t\t\t\tif (typecode === \"L\")\n\t\t\t\t\tthis.backrefs.push(result);\n\t\t\t\tfor (;;)\n\t\t\t\t{\n\t\t\t\t\ttypecode = this.readblackchar();\n\t\t\t\t\tif (typecode === \"]\")\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tthis.backup();\n\t\t\t\t\tresult.push(this.load());\n\t\t\t\t}\n\t\t\t\tthis.stack.pop();\n\t\t\t\treturn result;\n\t\t\tcase \"d\":\n\t\t\tcase \"D\":\n\t\t\tcase \"e\":\n\t\t\tcase \"E\":\n\t\t\t\tif (!_havemap && (typecode == \"e\" || typecode == \"E\"))\n\t\t\t\t\tthrow new ValueError(\"ordered dictionaries are not supported at position \" + this.pos + \" with path \" + this.stack.join(\"/\"));\n\t\t\t\tresult = _emptymap();\n\t\t\t\tthis.stack.push(typecode === \"d\" || typecode === \"D\" ? \"dict\" : \"odict\");\n\t\t\t\tif (typecode === \"D\" || typecode === \"E\")\n\t\t\t\t\tthis.backrefs.push(result);\n\t\t\t\tfor (;;)\n\t\t\t\t{\n\t\t\t\t\ttypecode = this.readblackchar();\n\t\t\t\t\tif (typecode === \"}\")\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tthis.backup();\n\t\t\t\t\tlet key = this.load();\n\t\t\t\t\tlet value = this.load();\n\t\t\t\t\t_setmap(result, key, value);\n\t\t\t\t}\n\t\t\t\tthis.stack.pop();\n\t\t\t\treturn result;\n\t\t\tcase \"y\":\n\t\t\tcase \"Y\":\n\t\t\t\tthis.stack.push(\"set\");\n\t\t\t\tresult = _makeset();\n\t\t\t\tif (typecode === \"Y\")\n\t\t\t\t\tthis.backrefs.push(result);\n\t\t\t\tfor (;;)\n\t\t\t\t{\n\t\t\t\t\ttypecode = this.readblackchar();\n\t\t\t\t\tif (typecode === \"}\")\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tthis.backup();\n\t\t\t\t\tresult.add(this.load());\n\t\t\t\t}\n\t\t\t\tthis.stack.pop();\n\t\t\t\treturn result;\n\t\t\tcase \"o\":\n\t\t\tcase \"O\":\n\t\t\t{\n\t\t\t\tlet oldpos;\n\t\t\t\tif (typecode === \"O\")\n\t\t\t\t\toldpos = this._beginfakeloading();\n\t\t\t\tlet name = this.load();\n\t\t\t\tthis.stack.push(name);\n\t\t\t\tlet constructor;\n\t\t\t\tif (this.registry !== null)\n\t\t\t\t{\n\t\t\t\t\tconstructor = this.registry[name];\n\t\t\t\t\tif (constructor === undefined)\n\t\t\t\t\t\tconstructor = _registry[name];\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tconstructor = _registry[name];\n\t\t\t\tif (constructor === undefined)\n\t\t\t\t\tthrow new ValueError(\"can't load object of type \" + _repr(name) + \" at position \" + this.pos + \" with path \" + this.stack.join(\"/\"));\n\t\t\t\tresult = new constructor();\n\t\t\t\tif (typecode === \"O\")\n\t\t\t\t\tthis._endfakeloading(oldpos, result);\n\t\t\t\tresult.ul4onload(this);\n\t\t\t\ttypecode = this.readblackchar();\n\t\t\t\tif (typecode !== \")\")\n\t\t\t\t\tthrow new ValueError(\"object terminator ')' for object of type '\" + name + \"' expected, got \" + _repr(typecode) + \" at position \" + this.pos + \" with path \" + this.stack.join(\"/\"));\n\t\t\t\tthis.stack.pop();\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\tdefault:\n\t\t\t\tthrow new ValueError(\"unknown typecode \" + _repr(typecode) + \" at position \" + this.pos + \" with path \" + this.stack.join(\"/\"));\n\t\t}\n\t}\n\n\t// Return an iterator for loading the content of a object\n\tloadcontent()\n\t{\n\t\tlet self = this;\n\t\treturn {\n\t\t\tnext: function()\n\t\t\t{\n\t\t\t\tlet typecode = self.readblackchar();\n\t\t\t\t// Always \"unread\" the typecode even at the end\n\t\t\t\t// so that at the end of a call to ul4onload()\n\t\t\t\t// the next input is the \"end of object\" marker\n\t\t\t\t// no matter whether ul4onload() uses loadcontent() or not.\n\t\t\t\tself.backup();\n\t\t\t\tif (typecode == \")\")\n\t\t\t\t\treturn {done: true};\n\t\t\t\telse\n\t\t\t\t\treturn {done: false, value: self.load()};\n\t\t\t}\n\t\t};\n\t}\n};\n\n//\n// UL4\n//\n\n// REs for parsing JSON\nconst _rvalidchars = /^[\\],:{}\\s]*$/;\nconst _rvalidescape = /\\\\(?:[\"\\\\\\/bfnrt]|u[0-9a-fA-F]{4})/g;\nconst _rvalidtokens = /\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g;\nconst _rvalidbraces = /(?:^|:|,)(?:\\s*\\[)+/g;\n\n/// Helper functions\n\n// Convert a map to an object\nexport function _map2object(obj)\n{\n\tif (_ismap(obj))\n\t{\n\t\tlet newobj = {};\n\t\tobj.forEach(function(value, key){\n\t\t\tif (typeof(key) !== \"string\")\n\t\t\t\tthrow new TypeError(\"keys must be strings\");\n\t\t\tnewobj[key] = value;\n\t\t});\n\t\treturn newobj;\n\t}\n\treturn obj;\n};\n\n// Clip a number to the range [0;max)\nexport function _bound(value, upper)\n{\n\tif (value < 0)\n\t\treturn 0;\n\telse if (value > upper)\n\t\treturn upper;\n\telse\n\t\treturn value;\n};\n\n// Create a pretty stacktrace from an exception\nexport function _stacktrace(exc)\n{\n\tlet output = (exc instanceof Exception ? exc.constructor.name + \": \" : \"\") + exc.toString();\n\tif (exc.context)\n\t\toutput = _stacktrace(exc.context) + \"\\n\\n\" + output;\n\treturn output;\n};\n\n// Call a function ``f`` with UL4 argument handling\nexport function _internal_call(context, f, name, functioncontext, signature, needscontext, needsobject, args, kwargs)\n{\n\tlet finalargs;\n\tif (needsobject)\n\t{\n\t\tif (signature === null)\n\t\t{\n\t\t\tif (args.length)\n\t\t\t\tthrow new ArgumentError(_repr(f) + \" doesn't support positional arguments!\");\n\t\t\tfinalargs = [kwargs];\n\t\t}\n\t\telse\n\t\t\tfinalargs = [signature.bindObject(name, args, kwargs)];\n\t}\n\telse\n\t{\n\t\tif (signature === null)\n\t\t\tthrow new ArgumentError(_repr(f) + \" doesn't support positional arguments!\");\n\t\tfinalargs = signature.bindArray(name, args, kwargs);\n\t}\n\tif (needscontext)\n\t\tfinalargs.unshift(context);\n\treturn f.apply(functioncontext, finalargs);\n};\n\nexport function _callfunction(context, f, args, kwargs)\n{\n\tlet name = f._ul4_name || f.name;\n\tif (f._ul4_signature === undefined || f._ul4_needsobject === undefined || f._ul4_needscontext === undefined)\n\t\tthrow new TypeError(_repr(f) + \" is not callable by UL4\");\n\treturn _internal_call(context, f, name, null, f._ul4_signature, f._ul4_needscontext, f._ul4_needsobject, args, kwargs);\n};\n\nexport function _callobject(context, obj, args, kwargs)\n{\n\tif (obj._ul4_callsignature === undefined || obj._ul4_callneedsobject === undefined || obj._ul4_callneedscontext === undefined)\n\t\tthrow new TypeError(_repr(obj) + \" is not callable by UL4\");\n\treturn _internal_call(context, obj.__call__, obj.name, obj, obj._ul4_callsignature, obj._ul4_callneedscontext, obj._ul4_callneedsobject, args, kwargs);\n};\n\nexport function _callrender(context, obj, args, kwargs)\n{\n\tif (obj._ul4_rendersignature === undefined || obj._ul4_renderneedsobject === undefined || obj._ul4_renderneedscontext === undefined)\n\t\tthrow new TypeError(_repr(obj) + \" is not renderable by UL4\");\n\treturn _internal_call(context, obj.__render__, obj.name, obj, obj._ul4_rendersignature, obj._ul4_renderneedscontext, obj._ul4_renderneedsobject, args, kwargs);\n};\n\nexport function _call(context, f, args, kwargs)\n{\n\tif (typeof(f) === \"function\")\n\t\treturn _callfunction(context, f, args, kwargs);\n\telse if (f && typeof(f.__call__) === \"function\")\n\t\treturn _callobject(context, f, args, kwargs);\n\telse\n\t\tthrow new TypeError(_type(f) + \" is not callable\");\n};\n\nexport function _unpackvar(lvalue, value)\n{\n\tif (!_islist(lvalue))\n\t\treturn [[lvalue, value]];\n\telse\n\t{\n\t\tlet newvalue = [];\n\t\tlet iter = _iter(value);\n\n\t\tfor (let i = 0;;++i)\n\t\t{\n\t\t\tlet item = iter.next();\n\n\t\t\tif (item.done)\n\t\t\t{\n\t\t\t\tif (i === lvalue.length)\n\t\t\t\t\tbreak;\n\t\t\t\telse\n\t\t\t\t\tthrow new ValueError(\"need \" + lvalue.length + \" value\" + (lvalue.length === 1 ? \"\" : \"s\") + \" to unpack, got \" + i);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (i < lvalue.length)\n\t\t\t\t\tnewvalue = newvalue.concat(_unpackvar(lvalue[i], item.value));\n\t\t\t\telse\n\t\t\t\t\tthrow new ValueError(\"too many values to unpack (expected \" + lvalue.length + \")\");\n\t\t\t}\n\t\t}\n\t\treturn newvalue;\n\t}\n};\n\nexport function _formatsource(out)\n{\n\tlet finalout = [];\n\tlet level = 0, needlf = false;\n\tfor (let part of out)\n\t{\n\t\tif (typeof(part) === \"number\")\n\t\t{\n\t\t\tlevel += part;\n\t\t\tneedlf = true;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (needlf)\n\t\t\t{\n\t\t\t\tfinalout.push(\"\\n\");\n\t\t\t\tfor (let j = 0; j < level; ++j)\n\t\t\t\t\tfinalout.push(\"\\t\");\n\t\t\t\tneedlf = false;\n\t\t\t}\n\t\t\tfinalout.push(part);\n\t\t}\n\t}\n\tif (needlf)\n\t\tfinalout.push(\"\\n\");\n\treturn finalout.join(\"\");\n};\n\n// Return a prefix of a location in source code\nfunction _sourceprefix(source, pos)\n{\n\tlet outerstartpos = pos;\n\tlet innerstartpos = outerstartpos;\n\n\tlet maxprefix = 40;\n\tlet preprefix = \"\\u2026\";\n\twhile (maxprefix > 0)\n\t{\n\t\t// We arrived at the start of the source code\n\t\tif (outerstartpos === 0)\n\t\t{\n\t\t\tpreprefix = \"\";\n\t\t\tbreak;\n\t\t}\n\t\t// We arrived at the start of the line\n\t\tif (source.charAt(outerstartpos-1) === \"\\n\")\n\t\t{\n\t\t\tpreprefix = \"\";\n\t\t\tbreak;\n\t\t}\n\t\t--maxprefix;\n\t\t--outerstartpos;\n\t}\n\treturn preprefix + source.substring(outerstartpos, innerstartpos);\n}\n\n// Return a suffix of a location in source code\nfunction _sourcesuffix(source, pos)\n{\n\tlet outerstoppos = pos;\n\tlet innerstoppos = outerstoppos;\n\n\tlet maxsuffix = 40;\n\tlet postsuffix = \"\\u2026\";\n\twhile (maxsuffix > 0)\n\t{\n\t\t// We arrived at the ed of the source code\n\t\tif (outerstoppos >= source.length)\n\t\t{\n\t\t\tpostsuffix = \"\";\n\t\t\tbreak;\n\t\t}\n\t\t// We arrived at the end of the line\n\t\tif (source.charAt(outerstoppos) === \"\\n\")\n\t\t{\n\t\t\tpostsuffix = \"\";\n\t\t\tbreak;\n\t\t}\n\t\t--maxsuffix;\n\t\t++outerstoppos;\n\t}\n\treturn source.substring(innerstoppos, outerstoppos) + postsuffix;\n}\n\n// Return line and column number of a location in source code\nfunction _lineColFromPos(source, pos)\n{\n\tlet line = 1\n\tlet col = 1;\n\tlet stop = pos;\n\tfor (let i = 0; i < stop; ++i)\n\t{\n\t\tif (source[i] === \"\\n\")\n\t\t{\n\t\t\t++line;\n\t\t\tcol = 1;\n\t\t}\n\t\telse\n\t\t\t++col;\n\t}\n\treturn [line, col];\n}\n\n// Compare ``obj1`` and ``obj2`` if they have the same value\nexport function _eq(obj1, obj2)\n{\n\tlet numbertypes = [\"boolean\", \"number\"];\n\n\tif (obj1 && typeof(obj1.__eq__) === \"function\")\n\t\treturn obj1.__eq__(obj2);\n\telse if (obj2 && typeof(obj2.__eq__) === \"function\")\n\t\treturn obj2.__eq__(obj1);\n\telse if (obj1 === null)\n\t\treturn obj2 === null;\n\telse if (numbertypes.indexOf(typeof(obj1)) != -1)\n\t{\n\t\tif (numbertypes.indexOf(typeof(obj2)) != -1)\n\t\t\treturn obj1 == obj2;\n\t\telse\n\t\t\treturn false;\n\t}\n\telse if (typeof(obj1) === \"string\")\n\t{\n\t\tif (typeof(obj2) === \"string\")\n\t\t\treturn obj1 == obj2;\n\t\telse\n\t\t\treturn false;\n\t}\n\telse if (_isdatetime(obj1))\n\t{\n\t\tif (_isdatetime(obj2))\n\t\t\treturn obj1.getTime() == obj2.getTime();\n\t\telse\n\t\t\treturn false;\n\t}\n\telse if (_islist(obj1))\n\t{\n\t\tif (_islist(obj2))\n\t\t{\n\t\t\t// Shortcut, if it's the same object\n\t\t\tif (obj1 === obj2)\n\t\t\t\treturn true;\n\t\t\tif (obj1.length != obj2.length)\n\t\t\t\treturn false;\n\t\t\tfor (let i = 0; i < obj1.length; ++i)\n\t\t\t{\n\t\t\t\tif (!_eq(obj1[i], obj2[i])) // This might lead to infinite recursion and a stackoverflow, but it does in all implementations\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\telse\n\t\t\treturn false;\n\t}\n\telse if (_isobject(obj1))\n\t{\n\t\tif (_isobject(obj2))\n\t\t{\n\t\t\t// Shortcut, if it's the same object\n\t\t\tif (obj1 === obj2)\n\t\t\t\treturn true;\n\t\t\t// Test that each attribute of ``obj1`` can also be found in ``obj2`` and has the same value\n\t\t\tfor (let key in obj1)\n\t\t\t{\n\t\t\t\tif (obj2.hasOwnProperty(key))\n\t\t\t\t{\n\t\t\t\t\tif (!_eq(obj1[key], obj2[key]))\n\t\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t\t// Test that each attribute of ``obj2`` is also in ``obj1`` (the value has been tested before)\n\t\t\tfor (let key in obj2)\n\t\t\t{\n\t\t\t\tif (!obj1.hasOwnProperty(key))\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\telse if (_ismap(obj2))\n\t\t{\n\t\t\t// Test that each attribute of ``obj1`` can also be found in ``obj2`` and has the same value\n\t\t\tfor (let key in obj1)\n\t\t\t{\n\t\t\t\tif (obj2.has(key))\n\t\t\t\t{\n\t\t\t\t\tif (!_eq(obj1[key], obj2.get(key)))\n\t\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t\t// Test that each attribute of ``obj2`` is also in ``obj1`` (the value has been tested before)\n\t\t\tlet result = true;\n\t\t\tobj2.forEach(function(value, key) {\n\t\t\t\tif (!obj1.hasOwnProperty(key))\n\t\t\t\t\tresult = false;\n\t\t\t}, this);\n\t\t\treturn result;\n\t\t}\n\t\telse\n\t\t\treturn false;\n\t}\n\telse if (_ismap(obj1))\n\t{\n\t\tif (_isobject(obj2))\n\t\t{\n\t\t\t// Test that each attribute of ``obj1`` can also be found in ``obj2`` and has the same value\n\t\t\tobj1.forEach(function(value, key) {\n\t\t\t\tif (!obj2.hasOwnProperty(key))\n\t\t\t\t\treturn false;\n\t\t\t\telse if (!_eq(obj1.get(key), obj2[key]))\n\t\t\t\t\treturn false;\n\t\t\t}, this);\n\t\t\t// Test that each attribute of ``obj2`` is also in ``obj1`` (the value has been tested before)\n\t\t\tfor (let key in obj2)\n\t\t\t{\n\t\t\t\tif (!obj1.has(key))\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\telse if (_ismap(obj2))\n\t\t{\n\t\t\t// Shortcut, if it's the same object\n\t\t\tif (obj1 === obj2)\n\t\t\t\treturn true;\n\t\t\tif (obj1.size != obj2.size)\n\t\t\t\treturn false;\n\t\t\tlet result = true;\n\t\t\t// Test that each attribute of ``obj1`` can also be found in ``obj2`` and has the same value\n\t\t\tobj1.forEach(function(value, key) {\n\t\t\t\tif (!obj2.has(key))\n\t\t\t\t\tresult = false;\n\t\t\t\telse if (!_eq(obj1.get(key), obj2.get(key)))\n\t\t\t\t\tresult = false;\n\t\t\t});\n\t\t\treturn result;\n\t\t}\n\t\telse\n\t\t\treturn false;\n\t}\n\telse if (_isset(obj1))\n\t{\n\t\t// We don't have to test for ``_Set`` as ``_Set`` implements ``__eq__``\n\t\tif (_isset(obj2))\n\t\t{\n\t\t\t// Shortcut, if it's the same object\n\t\t\tif (obj1 === obj2)\n\t\t\t\treturn true;\n\t\t\tif (obj1.size != obj2.size)\n\t\t\t\treturn false;\n\t\t\tlet result = true;\n\t\t\tobj1.forEach(function(value) {\n\t\t\t\tif (!obj2.has(value))\n\t\t\t\t\tresult = false;\n\t\t\t});\n\t\t\treturn result;\n\t\t}\n\t\telse\n\t\t\treturn false;\n\t}\n\telse\n\t\treturn obj1 === obj2;\n};\n\n// Compare ``obj1`` and ``obj2`` if they don't have the same value\nexport function _ne(obj1, obj2)\n{\n\tif (obj1 && typeof(obj1.__ne__) === \"function\")\n\t\treturn obj1.__ne__(obj2);\n\telse if (obj2 && typeof(obj2.__ne__) === \"function\")\n\t\treturn obj2.__ne__(obj1);\n\telse\n\t\treturn !_eq(obj1, obj2);\n};\n\nexport function _unorderable(operator, obj1, obj2)\n{\n\tthrow new TypeError(\"unorderable types: \" + _type(obj1) + \" \" + operator + \" \" + _type(obj2));\n};\n\n// Return:\n// -1 when ``obj1 < obj2``,\n//  0 when ``obj1 == obj2``,\n//  1 when ``obj1 > obj2``,\n//  null when ``obj1`` and ``obj2`` are comparable, but neither of the previous cases holds (only for sets)\n// raise TypeError if objects are uncomparable\n// This the purpose of ``_cmp`` is to support implementation of <, <=, > and >=\n// and dicts/maps are not comparable with the operator ``_cmp`` does not support dicts/maps\n\nexport function _cmp(operator, obj1, obj2)\n{\n\tlet numbertypes = [\"boolean\", \"number\"];\n\n\tif (numbertypes.indexOf(typeof(obj1)) != -1)\n\t{\n\t\tif (numbertypes.indexOf(typeof(obj2)) != -1)\n\t\t\treturn (obj1 > obj2) - (obj1 < obj2);\n\t}\n\telse if (typeof(obj1) === \"string\")\n\t{\n\t\tif (typeof(obj2) === \"string\")\n\t\t\treturn (obj1 > obj2) - (obj1 < obj2);\n\t}\n\telse if (_isdatetime(obj1))\n\t{\n\t\tif (_isdatetime(obj2))\n\t\t{\n\t\t\tlet v1 = obj1.getTime(), v2 = obj2.getTime();\n\t\t\treturn (v1 > v2) - (v1 < v2);\n\t\t}\n\t}\n\telse if (_islist(obj1))\n\t{\n\t\tif (_islist(obj2))\n\t\t{\n\t\t\tif (obj1 === obj2)\n\t\t\t\treturn 0;\n\t\t\tfor (let i = 0; i < obj1.length; ++i)\n\t\t\t{\n\t\t\t\tif (i >= obj2.length)\n\t\t\t\t\treturn 1;\n\t\t\t\tlet res = _cmp(operator, obj1[i], obj2[i]);\n\t\t\t\tif (res)\n\t\t\t\t\treturn res;\n\t\t\t}\n\t\t\treturn obj2.length > obj1.length ? -1 : 0;\n\t\t}\n\t}\n\telse if (_isset(obj1) || _isul4set(obj1))\n\t{\n\t\tif (_isset(obj2) || _isul4set(obj2))\n\t\t{\n\t\t\tlet in1only = false;\n\t\t\tlet in2only = false;\n\n\t\t\tfor (let iter = _iter(obj1);;)\n\t\t\t{\n\t\t\t\tlet item = iter.next();\n\t\t\t\tif (item.done)\n\t\t\t\t\tbreak;\n\t\t\t\tif (!obj2.has(item.value))\n\t\t\t\t{\n\t\t\t\t\tin1only = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (let iter = _iter(obj2);;)\n\t\t\t{\n\t\t\t\tlet item = iter.next();\n\t\t\t\tif (item.done)\n\t\t\t\t\tbreak;\n\t\t\t\tif (!obj1.has(item.value))\n\t\t\t\t{\n\t\t\t\t\tin2only = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (in1only)\n\t\t\t{\n\t\t\t\tif (in2only)\n\t\t\t\t\treturn null;\n\t\t\t\telse\n\t\t\t\t\treturn 1;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (in2only)\n\t\t\t\t\treturn -1;\n\t\t\t\telse\n\t\t\t\t\treturn 0;\n\t\t\t}\n\t\t}\n\t}\n\treturn _unorderable(operator, obj1, obj2);\n};\n\n// Return whether ``obj1 < obj2``\nexport function _lt(obj1, obj2)\n{\n\tlet numbertypes = [\"boolean\", \"number\"];\n\n\tif (obj1 && typeof(obj1.__lt__) === \"function\")\n\t\treturn obj1.__lt__(obj2);\n\telse if (numbertypes.indexOf(typeof(obj1)) != -1)\n\t{\n\t\tif (numbertypes.indexOf(typeof(obj2)) != -1)\n\t\t\treturn obj1 < obj2;\n\t}\n\telse if (typeof(obj1) === \"string\")\n\t{\n\t\tif (typeof(obj2) === \"string\")\n\t\t\treturn obj1 < obj2;\n\t}\n\telse if (_isdatetime(obj1))\n\t{\n\t\tif (_isdatetime(obj2))\n\t\t\treturn obj1.getTime() < obj2.getTime();\n\t}\n\telse if (_islist(obj1))\n\t{\n\t\tif (_islist(obj2))\n\t\t{\n\t\t\tif (obj1 === obj2)\n\t\t\t\treturn false;\n\t\t\tfor (let i = 0; i < obj1.length; ++i)\n\t\t\t{\n\t\t\t\tif (i >= obj2.length)\n\t\t\t\t\treturn false;\n\t\t\t\tlet eq = _eq(obj1[i], obj2[i]);\n\t\t\t\tif (!eq)\n\t\t\t\t\treturn _lt(obj1[i], obj2[i]);\n\t\t\t}\n\t\t\treturn obj1.length < obj2.length;\n\t\t}\n\t}\n\t// FIXME: Set comparison\n\telse if (_isset(obj1))\n\t{\n\t\tif (_isset(obj2))\n\t\t{\n\t\t\tif (_isset(obj2))\n\t\t\t{\n\t\t\t\tfor (let key in obj1)\n\t\t\t\t{\n\t\t\t\t\tif (!obj2.has(obj1[key]))\n\t\t\t\t\t\tin1only = true;\n\t\t\t\t}\n\t\t\t\tfor (let key in obj2)\n\t\t\t\t{\n\t\t\t\t\tif (!obj1.has(obj2[key]))\n\t\t\t\t\t\tin2only = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (_isul4set(obj2))\n\t\t\t{\n\t\t\t\tfor (let key in obj1)\n\t\t\t\t{\n\t\t\t\t\tif (!obj2.items[obj1[key]])\n\t\t\t\t\t\tin1only = true;\n\t\t\t\t}\n\t\t\t\tfor (let value in obj2.items)\n\t\t\t\t{\n\t\t\t\t\tif (!obj1.has(value))\n\t\t\t\t\t{\n\t\t\t\t\t\tin2only = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if (_isul4set(obj2))\n\t\t{\n\t\t\tif (_isset(obj2))\n\t\t\t{\n\t\t\t\tfor (let value in obj1.items)\n\t\t\t\t{\n\t\t\t\t\tif (!obj2.has(value))\n\t\t\t\t\t{\n\t\t\t\t\t\tin1only = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (let key in obj2)\n\t\t\t\t{\n\t\t\t\t\tif (!obj1.items[obj2[key]])\n\t\t\t\t\t\tin2only = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (_isul4set(obj2))\n\t\t\t{\n\t\t\t\tfor (let value in obj1.items)\n\t\t\t\t{\n\t\t\t\t\tif (!obj2.items[value])\n\t\t\t\t\t{\n\t\t\t\t\t\tin1only = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (let value in obj2.items)\n\t\t\t\t{\n\t\t\t\t\tif (!obj1.items[value])\n\t\t\t\t\t{\n\t\t\t\t\t\tin2only = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\t_unorderable(operator, obj1, obj2);\n\n\t\tif (in1only)\n\t\t{\n\t\t\tif (in2only)\n\t\t\t\treturn null;\n\t\t\telse\n\t\t\t\treturn 1;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (in2only)\n\t\t\t\treturn -1;\n\t\t\telse\n\t\t\t\treturn 0;\n\t\t}\n\t}\n\t_unorderable(\"<\", obj1, obj2);\n};\n\n// Return whether ``obj1 <= obj2``\nexport function _le(obj1, obj2)\n{\n\tlet numbertypes = [\"boolean\", \"number\"];\n\n\tif (obj1 && typeof(obj1.__le__) === \"function\")\n\t\treturn obj1.__le__(obj2);\n\tif (numbertypes.indexOf(typeof(obj1)) != -1)\n\t{\n\t\tif (numbertypes.indexOf(typeof(obj2)) != -1)\n\t\t\treturn obj1 <= obj2;\n\t}\n\telse if (typeof(obj1) === \"string\")\n\t{\n\t\tif (typeof(obj2) === \"string\")\n\t\t\treturn obj1 <= obj2;\n\t}\n\telse if (_isdatetime(obj1))\n\t{\n\t\tif (_isdatetime(obj2))\n\t\t\treturn obj1.getTime() <= obj2.getTime();\n\t}\n\telse if (_islist(obj1))\n\t{\n\t\tif (_islist(obj2))\n\t\t{\n\t\t\tif (obj1 === obj2)\n\t\t\t\treturn true;\n\t\t\tfor (let i = 0; i < obj1.length; ++i)\n\t\t\t{\n\t\t\t\tif (i >= obj2.length)\n\t\t\t\t\treturn false;\n\t\t\t\tlet eq = _eq(obj1[i], obj2[i]);\n\t\t\t\tif (!eq)\n\t\t\t\t\treturn _lt(obj1[i], obj2[i]);\n\t\t\t}\n\t\t\treturn obj1.length <= obj2.length;\n\t\t}\n\t}\n\t// FIXME: Set comparison\n\telse if (_isset(obj1) || _isul4set(obj1))\n\t{\n\t\tlet in1only = false;\n\t\tlet in2only = false;\n\n\t\tif (_isset(obj2))\n\t\t{\n\t\t\tif (_isset(obj2))\n\t\t\t{\n\t\t\t\tobj1.forEach(function(value) {\n\t\t\t\t\tif (!obj2.has(value))\n\t\t\t\t\t\tin1only = true;\n\t\t\t\t});\n\t\t\t\tobj2.forEach(function(value) {\n\t\t\t\t\tif (!obj1.has(value))\n\t\t\t\t\t\tin2only = true;\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if (_isul4set(obj2))\n\t\t\t{\n\t\t\t\tobj1.forEach(function(value) {\n\t\t\t\t\tif (!obj2.items[value])\n\t\t\t\t\t\tin1only = true;\n\t\t\t\t});\n\t\t\t\tfor (let value in obj2.items)\n\t\t\t\t{\n\t\t\t\t\tif (!obj1.has(value))\n\t\t\t\t\t{\n\t\t\t\t\t\tin2only = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if (_isul4set(obj2))\n\t\t{\n\t\t\tif (_isset(obj2))\n\t\t\t{\n\t\t\t\tfor (let value in obj1.items)\n\t\t\t\t{\n\t\t\t\t\tif (!obj2.has(value))\n\t\t\t\t\t{\n\t\t\t\t\t\tin1only = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tobj2.forEach(function(value) {\n\t\t\t\t\tif (!obj1.items[value])\n\t\t\t\t\t\tin2only = true;\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if (_isul4set(obj2))\n\t\t\t{\n\t\t\t\tfor (let value in obj1.items)\n\t\t\t\t{\n\t\t\t\t\tif (!obj2.items[value])\n\t\t\t\t\t{\n\t\t\t\t\t\tin1only = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (let value in obj2.items)\n\t\t\t\t{\n\t\t\t\t\tif (!obj1.items[value])\n\t\t\t\t\t{\n\t\t\t\t\t\tin2only = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\t_unorderable(operator, obj1, obj2);\n\n\t\tif (in1only)\n\t\t{\n\t\t\tif (in2only)\n\t\t\t\treturn null;\n\t\t\telse\n\t\t\t\treturn 1;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (in2only)\n\t\t\t\treturn -1;\n\t\t\telse\n\t\t\t\treturn 0;\n\t\t}\n\t}\n\t_unorderable(\"<=\", obj1, obj2);\n};\n\n// Return whether ``obj1 > obj2``\nexport function _gt(obj1, obj2)\n{\n\tlet numbertypes = [\"boolean\", \"number\"];\n\n\tif (obj1 && typeof(obj1.__gt__) === \"function\")\n\t\treturn obj1.__gt__(obj2);\n\tif (numbertypes.indexOf(typeof(obj1)) != -1)\n\t{\n\t\tif (numbertypes.indexOf(typeof(obj2)) != -1)\n\t\t\treturn obj1 > obj2;\n\t}\n\telse if (typeof(obj1) === \"string\")\n\t{\n\t\tif (typeof(obj2) === \"string\")\n\t\t\treturn obj1 > obj2;\n\t}\n\telse if (_isdatetime(obj1))\n\t{\n\t\tif (_isdatetime(obj2))\n\t\t\treturn obj1.getTime() > obj2.getTime();\n\t}\n\telse if (_islist(obj1))\n\t{\n\t\tif (_islist(obj2))\n\t\t{\n\t\t\tif (obj1 === obj2)\n\t\t\t\treturn false;\n\t\t\tfor (let i = 0; i < obj1.length; ++i)\n\t\t\t{\n\t\t\t\tif (i >= obj2.length)\n\t\t\t\t\treturn true;\n\t\t\t\tlet eq = _eq(obj1[i], obj2[i]);\n\t\t\t\tif (!eq)\n\t\t\t\t\treturn _gt(obj1[i], obj2[i]);\n\t\t\t}\n\t\t\treturn obj1.length > obj2.length;\n\t\t}\n\t}\n\t// FIXME: Set comparison\n\telse if (_isset(obj1) || _isul4set(obj1))\n\t{\n\t\tlet in1only = false;\n\t\tlet in2only = false;\n\n\t\tif (_isset(obj2))\n\t\t{\n\t\t\tif (_isset(obj2))\n\t\t\t{\n\t\t\t\tobj1.forEach(function(value) {\n\t\t\t\t\tif (!obj2.has(value))\n\t\t\t\t\t\tin1only = true;\n\t\t\t\t});\n\t\t\t\tobj2.forEach(function(value) {\n\t\t\t\t\tif (!obj1.has(value))\n\t\t\t\t\t\tin2only = true;\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if (_isul4set(obj2))\n\t\t\t{\n\t\t\t\tobj1.forEach(function(value) {\n\t\t\t\t\tif (!obj2.items[value])\n\t\t\t\t\t\tin1only = true;\n\t\t\t\t});\n\t\t\t\tobj2.forEach(function(value) {\n\t\t\t\t\tif (!obj1.has(value))\n\t\t\t\t\t{\n\t\t\t\t\t\tin2only = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\telse if (_isul4set(obj2))\n\t\t{\n\t\t\tif (_isset(obj2))\n\t\t\t{\n\t\t\t\tfor (let value in obj1.items)\n\t\t\t\t{\n\t\t\t\t\tif (!obj2.has(value))\n\t\t\t\t\t{\n\t\t\t\t\t\tin1only = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tobj2.forEach(function(value) {\n\t\t\t\t\tif (!obj1.items[value])\n\t\t\t\t\t\tin2only = true;\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if (_isul4set(obj2))\n\t\t\t{\n\t\t\t\tfor (let value in obj1.items)\n\t\t\t\t{\n\t\t\t\t\tif (!obj2.items[value])\n\t\t\t\t\t{\n\t\t\t\t\t\tin1only = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (let value in obj2.items)\n\t\t\t\t{\n\t\t\t\t\tif (!obj1.items[value])\n\t\t\t\t\t{\n\t\t\t\t\t\tin2only = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\t_unorderable(operator, obj1, obj2);\n\n\t\tif (in1only)\n\t\t{\n\t\t\tif (in2only)\n\t\t\t\treturn null;\n\t\t\telse\n\t\t\t\treturn 1;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (in2only)\n\t\t\t\treturn -1;\n\t\t\telse\n\t\t\t\treturn 0;\n\t\t}\n\t}\n\t_unorderable(\">\", obj1, obj2);\n};\n\n// Return whether ``obj1 >= obj2``\nexport function _ge(obj1, obj2)\n{\n\tlet numbertypes = [\"boolean\", \"number\"];\n\n\tif (obj1 && typeof(obj1.__ge__) === \"function\")\n\t\treturn obj1.__ge__(obj2);\n\telse if (numbertypes.indexOf(typeof(obj1)) != -1)\n\t{\n\t\tif (numbertypes.indexOf(typeof(obj2)) != -1)\n\t\t\treturn obj1 >= obj2;\n\t}\n\telse if (typeof(obj1) === \"string\")\n\t{\n\t\tif (typeof(obj2) === \"string\")\n\t\t\treturn obj1 >= obj2;\n\t}\n\telse if (_isdatetime(obj1))\n\t{\n\t\tif (_isdatetime(obj2))\n\t\t\treturn obj1.getTime() >= obj2.getTime();\n\t}\n\telse if (_islist(obj1))\n\t{\n\t\tif (_islist(obj2))\n\t\t{\n\t\t\tif (obj1 === obj2)\n\t\t\t\treturn true;\n\t\t\tfor (let i = 0; i < obj1.length; ++i)\n\t\t\t{\n\t\t\t\tif (i >= obj2.length)\n\t\t\t\t\treturn true;\n\t\t\t\tlet eq = _eq(obj1[i], obj2[i]);\n\t\t\t\tif (!eq)\n\t\t\t\t\treturn _gt(obj1[i], obj2[i]);\n\t\t\t}\n\t\t\treturn obj1.length >= obj2.length;\n\t\t}\n\t}\n\t// FIXME: Set comparison\n\telse if (_isset(obj1) || _isul4set(obj1))\n\t{\n\t\tlet in1only = false;\n\t\tlet in2only = false;\n\n\t\tif (_isset(obj2))\n\t\t{\n\t\t\tif (_isset(obj2))\n\t\t\t{\n\t\t\t\tobj1.forEach(function(value) {\n\t\t\t\t\tif (!obj2.has(value))\n\t\t\t\t\t\tin1only = true;\n\t\t\t\t});\n\t\t\t\tobj2.forEach(function(value) {\n\t\t\t\t\tif (!obj1.has(value))\n\t\t\t\t\t\tin2only = true;\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if (_isul4set(obj2))\n\t\t\t{\n\t\t\t\tobj1.forEach(function(value) {\n\t\t\t\t\tif (!obj2.items[value])\n\t\t\t\t\t\tin1only = true;\n\t\t\t\t});\n\t\t\t\tfor (let value in obj2.items)\n\t\t\t\t{\n\t\t\t\t\tif (!obj1.has(value))\n\t\t\t\t\t{\n\t\t\t\t\t\tin2only = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if (_isul4set(obj2))\n\t\t{\n\t\t\tif (_isset(obj2))\n\t\t\t{\n\t\t\t\tfor (let value in obj1.items)\n\t\t\t\t{\n\t\t\t\t\tif (!obj2.has(value))\n\t\t\t\t\t{\n\t\t\t\t\t\tin1only = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tobj2.forEach(function(value, key) {\n\t\t\t\t\tif (!obj1.items[value])\n\t\t\t\t\t\tin2only = true;\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if (_isul4set(obj2))\n\t\t\t{\n\t\t\t\tfor (let value in obj1.items)\n\t\t\t\t{\n\t\t\t\t\tif (!obj2.items[value])\n\t\t\t\t\t{\n\t\t\t\t\t\tin1only = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (let value in obj2.items)\n\t\t\t\t{\n\t\t\t\t\tif (!obj1.items[value])\n\t\t\t\t\t{\n\t\t\t\t\t\tin2only = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\t_unorderable(operator, obj1, obj2);\n\n\t\tif (in1only)\n\t\t{\n\t\t\tif (in2only)\n\t\t\t\treturn null;\n\t\t\telse\n\t\t\t\treturn 1;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (in2only)\n\t\t\t\treturn -1;\n\t\t\telse\n\t\t\t\treturn 0;\n\t\t}\n\t}\n\t_unorderable(\">=\", obj1, obj2);\n};\n\n// Return an iterator for ``obj``\nexport function _iter(obj)\n{\n\tif (typeof(obj) === \"string\" || _islist(obj))\n\t{\n\t\treturn {\n\t\t\tindex: 0,\n\t\t\tnext: function()\n\t\t\t{\n\t\t\t\tif (this.index < obj.length)\n\t\t\t\t\treturn {value: obj[this.index++], done: false};\n\t\t\t\telse\n\t\t\t\t\treturn {done: true};\n\t\t\t}\n\t\t};\n\t}\n\telse if (_isiter(obj))\n\t\treturn obj;\n\telse if (obj !== null && typeof(obj.__iter__) === \"function\")\n\t\treturn obj.__iter__();\n\telse if (_ismap(obj))\n\t{\n\t\tlet keys = [];\n\t\tobj.forEach(function(value, key) {\n\t\t\tkeys.push(key);\n\t\t});\n\t\treturn {\n\t\t\tindex: 0,\n\t\t\tnext: function()\n\t\t\t{\n\t\t\t\tif (this.index >= keys.length)\n\t\t\t\t\treturn {done: true};\n\t\t\t\treturn {value: keys[this.index++], done: false};\n\t\t\t}\n\t\t};\n\t}\n\telse if (_isset(obj))\n\t{\n\t\tlet values = [];\n\t\tobj.forEach(function(item) {\n\t\t\tvalues.push(item);\n\t\t});\n\t\treturn {\n\t\t\tindex: 0,\n\t\t\tnext: function()\n\t\t\t{\n\t\t\t\tif (this.index >= values.length)\n\t\t\t\t\treturn {done: true};\n\t\t\t\treturn {value: values[this.index++], done: false};\n\t\t\t}\n\t\t};\n\t}\n\telse if (_isul4set(obj))\n\t{\n\t\treturn _iter(obj.items);\n\t}\n\telse if (_isobject(obj))\n\t{\n\t\tlet keys = [];\n\t\tfor (let key in obj)\n\t\t\tkeys.push(key);\n\t\treturn {\n\t\t\tindex: 0,\n\t\t\tnext: function()\n\t\t\t{\n\t\t\t\tif (this.index >= keys.length)\n\t\t\t\t\treturn {done: true};\n\t\t\t\treturn {value: keys[this.index++], done: false};\n\t\t\t}\n\t\t};\n\t}\n\tthrow new TypeError(_type(obj) + \" object is not iterable\");\n};\n\nfunction _str_repr(str, ascii)\n{\n\tlet result = \"\";\n\tlet squote = false, dquote = false;\n\n\tfor (let c of str)\n\t{\n\t\tif (c == '\"')\n\t\t{\n\t\t\tdquote = true;\n\t\t\tif (squote)\n\t\t\t\tbreak;\n\t\t}\n\t\telse if (c == \"'\")\n\t\t{\n\t\t\tsquote = true;\n\t\t\tif (dquote)\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t// Prefer single quotes: Only use double quotes if the string contains single quotes, but no double quotes\n\tlet quote = (squote && !dquote) ? '\"' : \"'\";\n\n\tfor (let c of str)\n\t{\n\t\tswitch (c)\n\t\t{\n\t\t\tcase '\"':\n\t\t\t\tresult += (quote == c) ? '\\\\\"' : c;\n\t\t\t\tbreak;\n\t\t\tcase \"'\":\n\t\t\t\tresult += (quote == c) ? \"\\\\'\" : c;\n\t\t\t\tbreak;\n\t\t\tcase \"\\\\\":\n\t\t\t\tresult += \"\\\\\\\\\";\n\t\t\t\tbreak;\n\t\t\tcase \"\\t\":\n\t\t\t\tresult += \"\\\\t\";\n\t\t\t\tbreak;\n\t\t\tcase \"\\n\":\n\t\t\t\tresult += \"\\\\n\";\n\t\t\t\tbreak;\n\t\t\tcase \"\\r\":\n\t\t\t\tresult += \"\\\\r\";\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tlet code = c.charCodeAt(0);\n\t\t\t\tlet escape;\n\t\t\t\tif (code < 32)\n\t\t\t\t\tescape = 2;\n\t\t\t\telse if (code < 0x7f)\n\t\t\t\t\tescape = 0;\n\t\t\t\telse if (!ascii && !/[\\u007f-\\u00a0\\u00ad\\u0378-\\u0379\\u0380-\\u0383\\u038b\\u038d\\u03a2\\u0530\\u0557-\\u0558\\u0560\\u0588\\u058b-\\u058c\\u0590\\u05c8-\\u05cf\\u05eb-\\u05ef\\u05f5-\\u0605\\u061c-\\u061d\\u06dd\\u070e-\\u070f\\u074b-\\u074c\\u07b2-\\u07bf\\u07fb-\\u07ff\\u082e-\\u082f\\u083f\\u085c-\\u085d\\u085f-\\u089f\\u08b5-\\u08e2\\u0984\\u098d-\\u098e\\u0991-\\u0992\\u09a9\\u09b1\\u09b3-\\u09b5\\u09ba-\\u09bb\\u09c5-\\u09c6\\u09c9-\\u09ca\\u09cf-\\u09d6\\u09d8-\\u09db\\u09de\\u09e4-\\u09e5\\u09fc-\\u0a00\\u0a04\\u0a0b-\\u0a0e\\u0a11-\\u0a12\\u0a29\\u0a31\\u0a34\\u0a37\\u0a3a-\\u0a3b\\u0a3d\\u0a43-\\u0a46\\u0a49-\\u0a4a\\u0a4e-\\u0a50\\u0a52-\\u0a58\\u0a5d\\u0a5f-\\u0a65\\u0a76-\\u0a80\\u0a84\\u0a8e\\u0a92\\u0aa9\\u0ab1\\u0ab4\\u0aba-\\u0abb\\u0ac6\\u0aca\\u0ace-\\u0acf\\u0ad1-\\u0adf\\u0ae4-\\u0ae5\\u0af2-\\u0af8\\u0afa-\\u0b00\\u0b04\\u0b0d-\\u0b0e\\u0b11-\\u0b12\\u0b29\\u0b31\\u0b34\\u0b3a-\\u0b3b\\u0b45-\\u0b46\\u0b49-\\u0b4a\\u0b4e-\\u0b55\\u0b58-\\u0b5b\\u0b5e\\u0b64-\\u0b65\\u0b78-\\u0b81\\u0b84\\u0b8b-\\u0b8d\\u0b91\\u0b96-\\u0b98\\u0b9b\\u0b9d\\u0ba0-\\u0ba2\\u0ba5-\\u0ba7\\u0bab-\\u0bad\\u0bba-\\u0bbd\\u0bc3-\\u0bc5\\u0bc9\\u0bce-\\u0bcf\\u0bd1-\\u0bd6\\u0bd8-\\u0be5\\u0bfb-\\u0bff\\u0c04\\u0c0d\\u0c11\\u0c29\\u0c3a-\\u0c3c\\u0c45\\u0c49\\u0c4e-\\u0c54\\u0c57\\u0c5b-\\u0c5f\\u0c64-\\u0c65\\u0c70-\\u0c77\\u0c80\\u0c84\\u0c8d\\u0c91\\u0ca9\\u0cb4\\u0cba-\\u0cbb\\u0cc5\\u0cc9\\u0cce-\\u0cd4\\u0cd7-\\u0cdd\\u0cdf\\u0ce4-\\u0ce5\\u0cf0\\u0cf3-\\u0d00\\u0d04\\u0d0d\\u0d11\\u0d3b-\\u0d3c\\u0d45\\u0d49\\u0d4f-\\u0d56\\u0d58-\\u0d5e\\u0d64-\\u0d65\\u0d76-\\u0d78\\u0d80-\\u0d81\\u0d84\\u0d97-\\u0d99\\u0db2\\u0dbc\\u0dbe-\\u0dbf\\u0dc7-\\u0dc9\\u0dcb-\\u0dce\\u0dd5\\u0dd7\\u0de0-\\u0de5\\u0df0-\\u0df1\\u0df5-\\u0e00\\u0e3b-\\u0e3e\\u0e5c-\\u0e80\\u0e83\\u0e85-\\u0e86\\u0e89\\u0e8b-\\u0e8c\\u0e8e-\\u0e93\\u0e98\\u0ea0\\u0ea4\\u0ea6\\u0ea8-\\u0ea9\\u0eac\\u0eba\\u0ebe-\\u0ebf\\u0ec5\\u0ec7\\u0ece-\\u0ecf\\u0eda-\\u0edb\\u0ee0-\\u0eff\\u0f48\\u0f6d-\\u0f70\\u0f98\\u0fbd\\u0fcd\\u0fdb-\\u0fff\\u10c6\\u10c8-\\u10cc\\u10ce-\\u10cf\\u1249\\u124e-\\u124f\\u1257\\u1259\\u125e-\\u125f\\u1289\\u128e-\\u128f\\u12b1\\u12b6-\\u12b7\\u12bf\\u12c1\\u12c6-\\u12c7\\u12d7\\u1311\\u1316-\\u1317\\u135b-\\u135c\\u137d-\\u137f\\u139a-\\u139f\\u13f6-\\u13f7\\u13fe-\\u13ff\\u1680\\u169d-\\u169f\\u16f9-\\u16ff\\u170d\\u1715-\\u171f\\u1737-\\u173f\\u1754-\\u175f\\u176d\\u1771\\u1774-\\u177f\\u17de-\\u17df\\u17ea-\\u17ef\\u17fa-\\u17ff\\u180e-\\u180f\\u181a-\\u181f\\u1878-\\u187f\\u18ab-\\u18af\\u18f6-\\u18ff\\u191f\\u192c-\\u192f\\u193c-\\u193f\\u1941-\\u1943\\u196e-\\u196f\\u1975-\\u197f\\u19ac-\\u19af\\u19ca-\\u19cf\\u19db-\\u19dd\\u1a1c-\\u1a1d\\u1a5f\\u1a7d-\\u1a7e\\u1a8a-\\u1a8f\\u1a9a-\\u1a9f\\u1aae-\\u1aaf\\u1abf-\\u1aff\\u1b4c-\\u1b4f\\u1b7d-\\u1b7f\\u1bf4-\\u1bfb\\u1c38-\\u1c3a\\u1c4a-\\u1c4c\\u1c80-\\u1cbf\\u1cc8-\\u1ccf\\u1cf7\\u1cfa-\\u1cff\\u1df6-\\u1dfb\\u1f16-\\u1f17\\u1f1e-\\u1f1f\\u1f46-\\u1f47\\u1f4e-\\u1f4f\\u1f58\\u1f5a\\u1f5c\\u1f5e\\u1f7e-\\u1f7f\\u1fb5\\u1fc5\\u1fd4-\\u1fd5\\u1fdc\\u1ff0-\\u1ff1\\u1ff5\\u1fff-\\u200f\\u2028-\\u202f\\u205f-\\u206f\\u2072-\\u2073\\u208f\\u209d-\\u209f\\u20bf-\\u20cf\\u20f1-\\u20ff\\u218c-\\u218f\\u23fb-\\u23ff\\u2427-\\u243f\\u244b-\\u245f\\u2b74-\\u2b75\\u2b96-\\u2b97\\u2bba-\\u2bbc\\u2bc9\\u2bd2-\\u2beb\\u2bf0-\\u2bff\\u2c2f\\u2c5f\\u2cf4-\\u2cf8\\u2d26\\u2d28-\\u2d2c\\u2d2e-\\u2d2f\\u2d68-\\u2d6e\\u2d71-\\u2d7e\\u2d97-\\u2d9f\\u2da7\\u2daf\\u2db7\\u2dbf\\u2dc7\\u2dcf\\u2dd7\\u2ddf\\u2e43-\\u2e7f\\u2e9a\\u2ef4-\\u2eff\\u2fd6-\\u2fef\\u2ffc-\\u3000\\u3040\\u3097-\\u3098\\u3100-\\u3104\\u312e-\\u3130\\u318f\\u31bb-\\u31bf\\u31e4-\\u31ef\\u321f\\u32ff\\u4db6-\\u4dbf\\u9fd6-\\u9fff\\ua48d-\\ua48f\\ua4c7-\\ua4cf\\ua62c-\\ua63f\\ua6f8-\\ua6ff\\ua7ae-\\ua7af\\ua7b8-\\ua7f6\\ua82c-\\ua82f\\ua83a-\\ua83f\\ua878-\\ua87f\\ua8c5-\\ua8cd\\ua8da-\\ua8df\\ua8fe-\\ua8ff\\ua954-\\ua95e\\ua97d-\\ua97f\\ua9ce\\ua9da-\\ua9dd\\ua9ff\\uaa37-\\uaa3f\\uaa4e-\\uaa4f\\uaa5a-\\uaa5b\\uaac3-\\uaada\\uaaf7-\\uab00\\uab07-\\uab08\\uab0f-\\uab10\\uab17-\\uab1f\\uab27\\uab2f\\uab66-\\uab6f\\uabee-\\uabef\\uabfa-\\uabff\\ud7a4-\\ud7af\\ud7c7-\\ud7ca\\ud7fc-\\uf8ff\\ufa6e-\\ufa6f\\ufada-\\ufaff\\ufb07-\\ufb12\\ufb18-\\ufb1c\\ufb37\\ufb3d\\ufb3f\\ufb42\\ufb45\\ufbc2-\\ufbd2\\ufd40-\\ufd4f\\ufd90-\\ufd91\\ufdc8-\\ufdef\\ufdfe-\\ufdff\\ufe1a-\\ufe1f\\ufe53\\ufe67\\ufe6c-\\ufe6f\\ufe75\\ufefd-\\uff00\\uffbf-\\uffc1\\uffc8-\\uffc9\\uffd0-\\uffd1\\uffd8-\\uffd9\\uffdd-\\uffdf\\uffe7\\uffef-\\ufffb\\ufffe-\\uffff]/.test(c))\n\t\t\t\t\tescape = 0;\n\t\t\t\telse if (code <= 0xff)\n\t\t\t\t\tescape = 2;\n\t\t\t\telse if (code <= 0xffff)\n\t\t\t\t\tescape = 4;\n\t\t\t\telse\n\t\t\t\t\tescape = 8;\n\n\t\t\t\tif (escape === 0)\n\t\t\t\t\tresult += c;\n\t\t\t\telse if (escape === 2)\n\t\t\t\t\tresult += \"\\\\x\" + _lpad(code.toString(16), \"0\", 2);\n\t\t\t\telse if (escape === 4)\n\t\t\t\t\tresult += \"\\\\u\" + _lpad(code.toString(16), \"0\", 4);\n\t\t\t\telse\n\t\t\t\t\tresult += \"\\\\U\" + _lpad(code.toString(16), \"0\", 8);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\treturn quote + result + quote;\n};\n\nfunction _date_repr(obj, ascii)\n{\n\tlet year = obj._date.getFullYear();\n\tlet month = obj._date.getMonth()+1;\n\tlet day = obj._date.getDate();\n\tlet result = \"@(\" + year + \"-\" + _lpad(month.toString(), \"0\", 2) + \"-\" + _lpad(day.toString(), \"0\", 2) + \")\";\n\treturn result;\n};\n\nfunction _datetime_repr(obj, ascii)\n{\n\tlet year = obj.getFullYear();\n\tlet month = obj.getMonth()+1;\n\tlet day = obj.getDate();\n\tlet hour = obj.getHours();\n\tlet minute = obj.getMinutes();\n\tlet second = obj.getSeconds();\n\tlet ms = obj.getMilliseconds();\n\tlet result = \"@(\" + year + \"-\" + _lpad(month.toString(), \"0\", 2) + \"-\" + _lpad(day.toString(), \"0\", 2) + \"T\";\n\n\tif (hour || minute || second || ms)\n\t{\n\t\tresult += _lpad(hour.toString(), \"0\", 2) + \":\" + _lpad(minute.toString(), \"0\", 2);\n\t\tif (second || ms)\n\t\t{\n\t\t\tresult += \":\" + _lpad(second.toString(), \"0\", 2);\n\t\t\tif (ms)\n\t\t\t\tresult += \".\" + _lpad(ms.toString(), \"0\", 3) + \"000\";\n\t\t}\n\t}\n\tresult += \")\";\n\n\treturn result;\n};\n\nfunction _map_repr(obj, ascii)\n{\n\tlet v = [];\n\tv.push(\"{\");\n\n\tlet i = 0;\n\tobj.forEach(function(value, key) {\n\t\tif (i++)\n\t\t\tv.push(\", \");\n\t\tv.push(_repr_internal(key, ascii));\n\t\tv.push(\": \");\n\t\tv.push(_repr_internal(value, ascii));\n\t});\n\n\tv.push(\"}\");\n\treturn v.join(\"\");\n};\n\nfunction _list_repr(obj, ascii)\n{\n\tlet v = [];\n\tv.push(\"[\");\n\tlet first = true;\n\tfor (let item of obj)\n\t{\n\t\tif (first)\n\t\t\tfirst = false;\n\t\telse\n\t\t\tv.push(\", \");\n\t\tv.push(_repr_internal(item, ascii));\n\t}\n\tv.push(\"]\");\n\treturn v.join(\"\");\n};\n\nfunction _set_repr(obj, ascii)\n{\n\tlet v = [];\n\tv.push(\"{\");\n\tif (!obj.size)\n\t\tv.push(\"/\");\n\telse\n\t{\n\t\tlet i = 0;\n\t\tobj.forEach(function(value) {\n\t\t\tif (i++)\n\t\t\t\tv.push(\", \");\n\t\t\tv.push(_repr_internal(value, ascii));\n\t\t});\n\t}\n\tv.push(\"}\");\n\treturn v.join(\"\");\n};\n\nfunction _object_repr(obj, ascii)\n{\n\tlet v = [];\n\tv.push(\"{\");\n\tlet i = 0;\n\tfor (let key in obj)\n\t{\n\t\tif (!obj.hasOwnProperty(key))\n\t\t\tcontinue;\n\t\tif (i++)\n\t\t\tv.push(\", \");\n\t\tv.push(_repr_internal(key, ascii));\n\t\tv.push(\": \");\n\t\tv.push(_repr_internal(obj[key], ascii));\n\t}\n\tv.push(\"}\");\n\treturn v.join(\"\");\n};\n\nfunction _repr_internal(obj, ascii)\n{\n\tif (obj === null)\n\t\treturn \"None\";\n\telse if (obj === undefined)\n\t\treturn \"<undefined>\";\n\telse if (obj === false)\n\t\treturn \"False\";\n\telse if (obj === true)\n\t\treturn \"True\";\n\telse if (typeof(obj) === \"string\")\n\t\treturn _str_repr(obj, ascii);\n\telse if (typeof(obj) === \"number\")\n\t\treturn \"\" + obj;\n\telse if (typeof(obj) === \"function\")\n\t\tif (obj._ul4_name || obj.name)\n\t\t\treturn \"<function \" + (obj._ul4_name || obj.name) + \">\";\n\t\telse\n\t\t\treturn \"<anonymous function>\";\n\telse if (_isdate(obj))\n\t\treturn _date_repr(obj, ascii);\n\telse if (_isdatetime(obj))\n\t\treturn _datetime_repr(obj, ascii);\n\telse if (typeof(obj) === \"object\" && typeof(obj.__repr__) === \"function\")\n\t\treturn obj.__repr__();\n\telse if (_islist(obj))\n\t\treturn _list_repr(obj, ascii);\n\telse if (_ismap(obj))\n\t\treturn _map_repr(obj, ascii);\n\telse if (_isset(obj))\n\t\treturn _set_repr(obj, ascii);\n\telse if (_isobject(obj))\n\t\treturn _object_repr(obj, ascii);\n\treturn \"?\";\n};\n\n// Return a string representation of ``obj``: If possible this should be an object literal supported by UL4, otherwise the output should be bracketed with ``<`` and ``>``\nexport function _repr(obj)\n{\n\treturn _repr_internal(obj, false);\n};\n\nexport function _ascii(obj)\n{\n\treturn _repr_internal(obj, true);\n};\n\nfunction _date_str(obj)\n{\n\tlet year = obj._date.getFullYear();\n\tlet month = obj._date.getMonth()+1;\n\tlet day = obj._date.getDate();\n\n\treturn year + \"-\" + _lpad(month.toString(), \"0\", 2) + \"-\" + _lpad(day.toString(), \"0\", 2);\n};\n\nfunction _datetime_str(obj)\n{\n\tlet year = obj.getFullYear();\n\tlet month = obj.getMonth()+1;\n\tlet day = obj.getDate();\n\tlet hour = obj.getHours();\n\tlet minute = obj.getMinutes();\n\tlet second = obj.getSeconds();\n\tlet ms = obj.getMilliseconds();\n\n\tlet result = year + \"-\" + _lpad(month.toString(), \"0\", 2) + \"-\" + _lpad(day.toString(), \"0\", 2) + \" \" + _lpad(hour.toString(), \"0\", 2) + \":\" + _lpad(minute.toString(), \"0\", 2);\n\tif (second || ms)\n\t{\n\t\tresult += \":\" + _lpad(second.toString(), \"0\", 2);\n\t\tif (ms)\n\t\t\tresult += \".\" + _lpad(ms.toString(), \"0\", 3) + \"000\";\n\t}\n\treturn result;\n};\n\nexport function _str(obj)\n{\n\tif (obj === undefined)\n\t\treturn \"\";\n\telse if (obj === null)\n\t\treturn \"\";\n\telse if (obj === false)\n\t\treturn \"False\";\n\telse if (obj === true)\n\t\treturn \"True\";\n\telse if (typeof(obj) === \"string\")\n\t\treturn obj;\n\telse if (typeof(obj) === \"number\")\n\t\treturn obj.toString();\n\telse if (_isdate(obj))\n\t\treturn _date_str(obj);\n\telse if (_isdatetime(obj))\n\t\treturn _datetime_str(obj);\n\telse if (_islist(obj))\n\t\treturn _list_repr(obj);\n\telse if (_isset(obj))\n\t\treturn _set_repr(obj);\n\telse if (_ismap(obj))\n\t\treturn _map_repr(obj);\n\telse if (typeof(obj) === \"object\" && typeof(obj.__str__) === \"function\")\n\t\treturn obj.__str__();\n\telse if (typeof(obj) === \"object\" && typeof(obj.__repr__) === \"function\")\n\t\treturn obj.__repr__();\n\telse if (_isobject(obj))\n\t\treturn _object_repr(obj);\n\telse\n\t\treturn _repr(obj);\n};\n\n// Convert ``obj`` to bool, according to its \"truth value\"\nexport function _bool(obj)\n{\n\tif (obj === undefined || obj === null || obj === false || obj === 0 || obj === \"\")\n\t\treturn false;\n\telse\n\t{\n\t\tif (typeof(obj) === \"object\" && typeof(obj.__bool__) === \"function\")\n\t\t\treturn obj.__bool__();\n\t\tif (_islist(obj))\n\t\t\treturn obj.length !== 0;\n\t\telse if (_ismap(obj) || _isset(obj))\n\t\t\treturn obj.size != 0;\n\t\telse if (_isobject(obj))\n\t\t{\n\t\t\tfor (let key in obj)\n\t\t\t{\n\t\t\t\tif (!obj.hasOwnProperty(key))\n\t\t\t\t\tcontinue;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n};\n\n// Convert ``obj`` to an integer (if ``base`` is given ``obj`` must be a string and ``base`` is the base for the conversion (default is 10))\nexport function _int(obj, base)\n{\n\tlet result;\n\tif (base !== null)\n\t{\n\t\tif (typeof(obj) !== \"string\" || !_isint(base))\n\t\t\tthrow new TypeError(\"int() requires a string and an integer\");\n\t\tresult = parseInt(obj, base);\n\t\tif (result.toString() == \"NaN\")\n\t\t\tthrow new TypeError(\"invalid literal for int()\");\n\t\treturn result;\n\t}\n\telse\n\t{\n\t\tif (typeof(obj) === \"string\")\n\t\t{\n\t\t\tresult = parseInt(obj);\n\t\t\tif (result.toString() == \"NaN\")\n\t\t\tthrow new TypeError(\"invalid literal for int()\");\n\t\t\treturn result;\n\t\t}\n\t\telse if (typeof(obj) === \"number\")\n\t\t\treturn Math.floor(obj);\n\t\telse if (obj === true)\n\t\t\treturn 1;\n\t\telse if (obj === false)\n\t\t\treturn 0;\n\t\tthrow new TypeError(\"int() argument must be a string or a number\");\n\t}\n};\n\n// Convert ``obj`` to a float\nexport function _float(obj)\n{\n\tif (typeof(obj) === \"string\")\n\t\treturn parseFloat(obj);\n\telse if (typeof(obj) === \"number\")\n\t\treturn obj;\n\telse if (obj === true)\n\t\treturn 1.0;\n\telse if (obj === false)\n\t\treturn 0.0;\n\tthrow new TypeError(\"float() argument must be a string or a number\");\n};\n\n// Convert ``obj`` to a list\nexport function _list(obj)\n{\n\tlet iter = _iter(obj);\n\n\tlet result = [];\n\tfor (;;)\n\t{\n\t\tlet value = iter.next();\n\t\tif (value.done)\n\t\t\treturn result;\n\t\tresult.push(value.value);\n\t}\n};\n\n// Convert ``obj`` to a set\nexport function _set(obj)\n{\n\tlet iter = _iter(obj);\n\n\tlet result = _emptyset();\n\tfor (;;)\n\t{\n\t\tlet value = iter.next();\n\t\tif (value.done)\n\t\t\treturn result;\n\t\tresult.add(value.value);\n\t}\n};\n\n// Return the length of ``sequence``\nexport function _len(sequence)\n{\n\tif (typeof(sequence) === \"string\" || _islist(sequence))\n\t\treturn sequence.length;\n\telse if (_ismap(sequence) || _isset(sequence))\n\t\treturn sequence.size;\n\telse if (_isobject(sequence))\n\t{\n\t\tlet i = 0;\n\t\tfor (let key in sequence)\n\t\t\t++i;\n\t\treturn i;\n\t}\n\tthrow new TypeError(\"object of type '\" + _type(sequence) + \"' has no len()\");\n};\n\nexport function _type(obj)\n{\n\tif (obj === null)\n\t\treturn \"none\";\n\telse if (obj === false || obj === true)\n\t\treturn \"bool\";\n\telse if (obj === undefined)\n\t\treturn \"undefined\";\n\telse if (typeof(obj) === \"number\")\n\t\treturn Math.round(obj) == obj ? \"int\" : \"float\";\n\telse if (typeof(obj) === \"function\")\n\t\treturn \"function\";\n\telse\n\t{\n\t\tif (typeof(obj.ul4type) === \"function\")\n\t\t\treturn obj.ul4type();\n\t\telse\n\t\t\treturn Protocol.get(obj).ul4type(obj);\n\t}\n};\n\n// (this is non-trivial, because it follows the Python semantic of ``-5 % 2`` being ``1``)\nexport function _mod(obj1, obj2)\n{\n\tlet div = Math.floor(obj1 / obj2);\n\tlet mod = obj1 - div * obj2;\n\n\tif (mod !== 0 && ((obj2 < 0 && mod > 0) || (obj2 > 0 && mod < 0)))\n\t{\n\t\tmod += obj2;\n\t\t--div;\n\t}\n\treturn obj1 - div * obj2;\n};\n\n// Return the attribute with the name ``attrname`` of the object ``obj``\n// If ``obj`` doesn't have such an attribute, return ``default_``\nexport function _getattr(obj, attrname, default_=null)\n{\n\tlet proto = Protocol.get(obj);\n\ttry\n\t{\n\t\treturn proto.getattr(obj, attrname);\n\t}\n\tcatch (exc)\n\t{\n\t\tif (exc instanceof AttributeError && exc.obj === obj)\n\t\t\treturn default_;\n\t\telse\n\t\t\tthrow exc;\n\t}\n};\n\n// Return wether the object ``obj`` has an attribute with the name ``attrname``\nexport function _hasattr(obj, attrname)\n{\n\tlet proto = Protocol.get(obj);\n\treturn proto.hasattr(obj, attrname);\n};\n\n// Return the names of the attributes of the object ``obj`` as a set.\nexport function _dir(obj)\n{\n\tlet proto = Protocol.get(obj);\n\treturn proto.dir();\n};\n\n// Return whether any of the items in ``iterable`` are true\nexport function _any(iterable)\n{\n\tif (typeof(iterable) === \"string\")\n\t{\n\t\tfor (let c of iterable)\n\t\t{\n\t\t\tif (c !== '\\x00')\n\t\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\telse\n\t{\n\t\tfor (let iter = _iter(iterable);;)\n\t\t{\n\t\t\tlet item = iter.next();\n\t\t\tif (item.done)\n\t\t\t\treturn false;\n\t\t\tif (_bool(item.value))\n\t\t\t\treturn true;\n\t\t}\n\t}\n};\n\n// Return whether all of the items in ``iterable`` are true\nexport function _all(iterable)\n{\n\tif (typeof(iterable) === \"string\")\n\t{\n\t\tfor (let c of iterable)\n\t\t{\n\t\t\tif (c === '\\x00')\n\t\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\telse\n\t{\n\t\tfor (let iter = _iter(iterable);;)\n\t\t{\n\t\t\tlet item = iter.next();\n\t\t\tif (item.done)\n\t\t\t\treturn true;\n\t\t\tif (!_bool(item.value))\n\t\t\t\treturn false;\n\t\t}\n\t}\n};\n\n// Check if ``obj`` is undefined\nexport function _isundefined(obj)\n{\n\treturn obj === undefined;\n};\n\n\n// Check if ``obj`` is *not* undefined\nexport function _isdefined(obj)\n{\n\treturn obj !== undefined;\n};\n\n// Check if ``obj`` is ``None``\nexport function _isnone(obj)\n{\n\treturn obj === null;\n};\n\n// Check if ``obj`` is a boolean\nexport function _isbool(obj)\n{\n\treturn typeof(obj) === \"boolean\";\n};\n\n// Check if ``obj`` is a int\nexport function _isint(obj)\n{\n\treturn (typeof(obj) === \"number\") && Math.round(obj) == obj;\n};\n\n// Check if ``obj`` is a float\nexport function _isfloat(obj)\n{\n\treturn (typeof(obj) === \"number\") && Math.round(obj) != obj;\n};\n\n// Check if ``obj`` is a string\nexport function _isstr(obj)\n{\n\treturn typeof(obj) === \"string\";\n};\n\n// Check if ``obj`` is a datetime\nexport function _isdatetime(obj)\n{\n\treturn Object.prototype.toString.call(obj) == \"[object Date]\";\n};\n\nexport function _isdate(obj)\n{\n\treturn (obj instanceof Date_);\n};\n\n// Check if ``obj`` is a color\nexport function _iscolor(obj)\n{\n\treturn (obj instanceof Color);\n};\n\n// Check if ``obj`` is a timedelta object\nexport function _istimedelta(obj)\n{\n\treturn (obj instanceof TimeDelta);\n};\n\n// Check if ``obj`` is a monthdelta object\nexport function _ismonthdelta(obj)\n{\n\treturn (obj instanceof MonthDelta);\n};\n\n// Check if ``obj`` is a template\nexport function _istemplate(obj)\n{\n\treturn (obj instanceof Template || obj instanceof TemplateClosure);\n};\n\n// Check if ``obj`` is a function\nexport function _isfunction(obj)\n{\n\treturn typeof(obj) === \"function\" || (Object.prototype.toString.call(obj) === \"[object Object]\" && (obj instanceof Template || obj instanceof TemplateClosure));\n};\n\n// Check if ``obj`` is a list\nexport function _islist(obj)\n{\n\treturn Object.prototype.toString.call(obj) === \"[object Array]\";\n};\n\n// Check if ``obj`` is a set\nexport function _isset(obj)\n{\n\treturn Object.prototype.toString.call(obj) === \"[object Set]\";\n};\n\n// Check if ``obj`` is an exception (at least a UL4 exception)\nexport function _isexception(obj)\n{\n\treturn (obj instanceof Exception);\n};\n\nexport function _isul4set(obj)\n{\n\treturn (obj instanceof _Set);\n};\n\nexport function _isanyset(obj)\n{\n\treturn (_isset(obj) || _isul4set(obj));\n};\n\n// Check if ``obj`` is an iterator\nexport function _isiter(obj)\n{\n\treturn obj !== null && typeof(obj) === \"object\" && typeof(obj.next) === \"function\";\n};\n\n// Check if ``obj`` is a JS object\nexport function _isobject(obj)\n{\n\treturn Object.prototype.toString.call(obj) === \"[object Object]\" && obj.__type__ === undefined && !(obj instanceof Proto);\n};\n\n// Check if ``obj`` is a ``Map``\nexport let _ismap = _havemap ? function _ismap(obj)\n\t{\n\t\treturn obj !== null && typeof(obj) === \"object\" && typeof(obj.__proto__) === \"object\" && obj.__proto__ === Map.prototype;\n\t}\n:\n\tfunction _ismap(obj)\n\t{\n\t\treturn false;\n\t}\n;\n\n\t// Check if ``obj`` is a dict (i.e. a normal Javascript object or a ``Map``)\nexport let _isdict = _havemap ? function _isdict(obj)\n\t{\n\t\treturn _isobject(obj) || _ismap(obj);\n\t}\n:\n\tfunction _isdict(obj)\n\t{\n\t\treturn _isobject(obj);\n\t}\n;\n\n// Repeat string ``str`` ``rep`` times\nexport function _str_repeat(str, rep)\n{\n\tlet result = \"\";\n\tfor (; rep>0; --rep)\n\t\tresult += str;\n\treturn result;\n};\n\nexport function _list_repeat(list, rep)\n{\n\tlet result = [];\n\tfor (; rep>0; --rep)\n\t\tfor (let item of list)\n\t\t\tresult.push(item);\n\treturn result;\n};\n\nfunction _str_json(str)\n{\n\tlet result = \"\";\n\tfor (let c of str)\n\t{\n\t\tswitch (c)\n\t\t{\n\t\t\tcase \"\\r\":\n\t\t\t\tresult += \"\\\\r\";\n\t\t\t\tbreak;\n\t\t\tcase \"\\n\":\n\t\t\t\tresult += \"\\\\n\";\n\t\t\t\tbreak;\n\t\t\tcase \"\\t\":\n\t\t\t\tresult += \"\\\\t\";\n\t\t\t\tbreak;\n\t\t\tcase \"\\\\\":\n\t\t\t\tresult += \"\\\\\\\\\";\n\t\t\t\tbreak;\n\t\t\tcase '\"':\n\t\t\t\tresult += '\\\\\"';\n\t\t\t\tbreak;\n\t\t\tcase '<':\n\t\t\t\tresult += '\\\\u003c';\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tlet code = c.charCodeAt(0);\n\t\t\t\tif (code >= 32 && code < 128)\n\t\t\t\t\tresult += c;\n\t\t\t\telse\n\t\t\t\t\tresult += \"\\\\u\" + _lpad(code.toString(16), \"0\", 4);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\treturn '\"' + result + '\"';\n};\n\n// Encodes ``obj`` in the Javascript Object Notation (see http://json.org/; with support for dates, colors and templates)\nexport function _asjson(obj)\n{\n\tif (obj === null)\n\t\treturn \"null\";\n\telse if (obj === undefined)\n\t\treturn \"undefined\";\n\telse if (obj === false)\n\t\treturn \"false\";\n\telse if (obj === true)\n\t\treturn \"true\";\n\telse if (typeof(obj) === \"string\")\n\t\treturn _str_json(obj);\n\telse if (typeof(obj) === \"number\")\n\t{\n\t\treturn \"\" + obj;\n\t}\n\telse if (_islist(obj))\n\t{\n\t\tlet v = [];\n\t\tv.push(\"[\");\n\t\tlet first = true;\n\t\tfor (let item of obj)\n\t\t{\n\t\t\tif (first)\n\t\t\t\tfirst = false;\n\t\t\telse\n\t\t\t\tv.push(\", \");\n\t\t\tv.push(_asjson(item));\n\t\t}\n\t\tv.push(\"]\");\n\t\treturn v.join(\"\");\n\t}\n\telse if (_ismap(obj))\n\t{\n\t\tlet v = [];\n\t\tv.push(\"{\");\n\t\tlet first = true;\n\t\tobj.forEach(function(value, key) {\n\t\t\tif (first)\n\t\t\t\tfirst = false;\n\t\t\telse\n\t\t\t\tv.push(\", \");\n\t\t\tv.push(_asjson(key));\n\t\t\tv.push(\": \");\n\t\t\tv.push(_asjson(value));\n\t\t});\n\t\tv.push(\"}\");\n\t\treturn v.join(\"\");\n\t}\n\telse if (_isobject(obj))\n\t{\n\t\tlet v = [];\n\t\tv.push(\"{\");\n\t\tlet first = true;\n\t\tfor (let key in obj)\n\t\t{\n\t\t\tif (first)\n\t\t\t\tfirst = false;\n\t\t\telse\n\t\t\t\tv.push(\", \");\n\t\t\tv.push(_asjson(key));\n\t\t\tv.push(\": \");\n\t\t\tv.push(_asjson(obj[key]));\n\t\t}\n\t\tv.push(\"}\");\n\t\treturn v.join(\"\");\n\t}\n\telse if (_isdate(obj))\n\t{\n\t\treturn \"new ul4.Date_(\" + obj._date.getFullYear() + \", \" + (obj._date.getMonth()+1) + \", \" + obj._date.getDate() + \")\";\n\t}\n\telse if (_isdatetime(obj))\n\t{\n\t\treturn \"new Date(\" + obj.getFullYear() + \", \" + obj.getMonth() + \", \" + obj.getDate() + \", \" + obj.getHours() + \", \" + obj.getMinutes() + \", \" + obj.getSeconds() + \", \" + obj.getMilliseconds() + \")\";\n\t}\n\telse if (_istimedelta(obj))\n\t{\n\t\treturn \"new ul4.TimeDelta(\" + obj._days + \", \" + obj._seconds + \", \" + obj._microseconds + \")\";\n\t}\n\telse if (_ismonthdelta(obj))\n\t{\n\t\treturn \"new ul4.MonthDelta(\" + obj._months + \")\";\n\t}\n\telse if (_iscolor(obj))\n\t{\n\t\treturn \"new ul4.Color(\" + obj._r + \", \" + obj._g + \", \" + obj._b + \", \" + obj._a + \")\";\n\t}\n\telse if (_istemplate(obj))\n\t{\n\t\treturn \"ul4.Template.loads(\" + _repr(obj.dumps()) + \")\";\n\t}\n\tthrow new TypeError(\"asjson() requires a serializable object\");\n};\n\n// Decodes the string ``string`` from the Javascript Object Notation (see http://json.org/) and returns the resulting object\nexport function _fromjson(string)\n{\n\t// The following is from jQuery's parseJSON function\n\tstring = StrProtocol.strip(string);\n\tif (JSON && JSON.parse)\n\t\treturn JSON.parse(string);\n\tif (_rvalidchars.test(string.replace(_rvalidescape, \"@\").replace(_rvalidtokens, \"]\").replace(_rvalidbraces, \"\")))\n\t\treturn (new Function(\"return \" + string))();\n\tthrow new TypeError(\"invalid JSON\");\n};\n\n// Encodes ``obj`` in the UL4 Object Notation format\nexport function _asul4on(obj)\n{\n\treturn dumps(obj);\n};\n\n// Decodes the string ``string`` from the UL4 Object Notation format and returns the resulting decoded object\nexport function _fromul4on(string)\n{\n\treturn loads(string);\n};\n\nfunction _format_datetime(obj, fmt, lang)\n{\n\tlet translations = {\n\t\tde: {\n\t\t\tms: [\"Jan\", \"Feb\", \"M\\u00e4r\", \"Apr\", \"Mai\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Dez\"],\n\t\t\tml: [\"Januar\", \"Februar\", \"M\\u00e4rz\", \"April\", \"Mai\", \"Juni\", \"Juli\", \"August\", \"September\", \"Oktober\", \"November\", \"Dezember\"],\n\t\t\tws: [\"So\", \"Mo\", \"Di\", \"Mi\", \"Do\", \"Fr\", \"Sa\"],\n\t\t\twl: [\"Sonntag\", \"Montag\", \"Dienstag\", \"Mittwoch\", \"Donnerstag\", \"Freitag\", \"Samstag\"],\n\t\t\txf: \"%d.%m.%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a %d %b %Y %H:%M:%S\"\n\t\t},\n\t\ten: {\n\t\t\tms: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"],\n\t\t\tml: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n\t\t\tws: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n\t\t\twl: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\n\t\t\txf: \"%m/%d/%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a %d %b %Y %I:%M:%S %p\"\n\t\t},\n\t\tfr: {\n\t\t\tms: [\"janv.\", \"f\\u00e9vr.\", \"mars\", \"avril\", \"mai\", \"juin\", \"juil.\", \"ao\\u00fbt\", \"sept.\", \"oct.\", \"nov.\", \"d\\u00e9c.\"],\n\t\t\tml: [\"janvier\", \"f\\u00e9vrier\", \"mars\", \"avril\", \"mai\", \"juin\", \"juillet\", \"ao\\u00fbt\", \"septembre\", \"octobre\", \"novembre\", \"d\\u00e9cembre\"],\n\t\t\tws: [\"dim.\", \"lun.\", \"mar.\", \"mer.\", \"jeu.\", \"ven.\", \"sam.\"],\n\t\t\twl: [\"dimanche\", \"lundi\", \"mardi\", \"mercredi\", \"jeudi\", \"vendredi\", \"samedi\"],\n\t\t\txf: \"%d/%m/%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a %d %b %Y %H:%M:%S\"\n\t\t},\n\t\tes: {\n\t\t\tms: [\"ene\", \"feb\", \"mar\", \"abr\", \"may\", \"jun\", \"jul\", \"ago\", \"sep\", \"oct\", \"nov\", \"dic\"],\n\t\t\tml: [\"enero\", \"febrero\", \"marzo\", \"abril\", \"mayo\", \"junio\", \"julio\", \"agosto\", \"septiembre\", \"octubre\", \"noviembre\", \"diciembre\"],\n\t\t\tws: [\"dom\", \"lun\", \"mar\", \"mi\\u00e9\", \"jue\", \"vie\", \"s\\u00e1b\"],\n\t\t\twl: [\"domingo\", \"lunes\", \"martes\", \"mi\\u00e9rcoles\", \"jueves\", \"viernes\", \"s\\u00e1bado\"],\n\t\t\txf: \"%d/%m/%y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a %d %b %Y %H:%M:%S\"\n\t\t},\n\t\tit: {\n\t\t\tms: [\"gen\", \"feb\", \"mar\", \"apr\", \"mag\", \"giu\", \"lug\", \"ago\", \"set\", \"ott\", \"nov\", \"dic\"],\n\t\t\tml: [\"gennaio\", \"febbraio\", \"marzo\", \"aprile\", \"maggio\", \"giugno\", \"luglio\", \"agosto\", \"settembre\", \"ottobre\", \"novembre\", \"dicembre\"],\n\t\t\tws: [\"dom\", \"lun\", \"mar\", \"mer\", \"gio\", \"ven\", \"sab\"],\n\t\t\twl: [\"domenica\", \"luned\\u00ec\", \"marted\\u00ec\", \"mercoled\\u00ec\", \"gioved\\u00ec\", \"venerd\\u00ec\", \"sabato\"],\n\t\t\txf: \"%d/%m/%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a %d %b %Y %H:%M:%S\"\n\t\t},\n\t\tda: {\n\t\t\tms: [\"jan\", \"feb\", \"mar\", \"apr\", \"maj\", \"jun\", \"jul\", \"aug\", \"sep\", \"okt\", \"nov\", \"dec\"],\n\t\t\tml: [\"januar\", \"februar\", \"marts\", \"april\", \"maj\", \"juni\", \"juli\", \"august\", \"september\", \"oktober\", \"november\", \"december\"],\n\t\t\tws: [\"s\\u00f8n\", \"man\", \"tir\", \"ons\", \"tor\", \"fre\", \"l\\u00f8r\"],\n\t\t\twl: [\"s\\u00f8ndag\", \"mandag\", \"tirsdag\", \"onsdag\", \"torsdag\", \"fredag\", \"l\\u00f8rdag\"],\n\t\t\txf: \"%d-%m-%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a %d %b %Y %H:%M:%S\"\n\t\t},\n\t\tsv: {\n\t\t\tms: [\"jan\", \"feb\", \"mar\", \"apr\", \"maj\", \"jun\", \"jul\", \"aug\", \"sep\", \"okt\", \"nov\", \"dec\"],\n\t\t\tml: [\"januari\", \"februari\", \"mars\", \"april\", \"maj\", \"juni\", \"juli\", \"augusti\", \"september\", \"oktober\", \"november\", \"december\"],\n\t\t\tws: [\"s\\u00f6n\", \"m\\u00e5n\", \"tis\", \"ons\", \"tor\", \"fre\", \"l\\u00f6r\"],\n\t\t\twl: [\"s\\u00f6ndag\", \"m\\u00e5ndag\", \"tisdag\", \"onsdag\", \"torsdag\", \"fredag\", \"l\\u00f6rdag\"],\n\t\t\txf: \"%Y-%m-%d\",\n\t\t\tXf: \"%H.%M.%S\",\n\t\t\tcf: \"%a %d %b %Y %H.%M.%S\"\n\t\t},\n\t\tnl: {\n\t\t\tms: [\"jan\", \"feb\", \"mrt\", \"apr\", \"mei\", \"jun\", \"jul\", \"aug\", \"sep\", \"okt\", \"nov\", \"dec\"],\n\t\t\tml: [\"januari\", \"februari\", \"maart\", \"april\", \"mei\", \"juni\", \"juli\", \"augustus\", \"september\", \"oktober\", \"november\", \"december\"],\n\t\t\tws: [\"zo\", \"ma\", \"di\", \"wo\", \"do\", \"vr\", \"za\"],\n\t\t\twl: [\"zondag\", \"maandag\", \"dinsdag\", \"woensdag\", \"donderdag\", \"vrijdag\", \"zaterdag\"],\n\t\t\txf: \"%d-%m-%y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a %d %b %Y %H:%M:%S\"\n\t\t},\n\t\tpt: {\n\t\t\tms: [\"Jan\", \"Fev\", \"Mar\", \"Abr\", \"Mai\", \"Jun\", \"Jul\", \"Ago\", \"Set\", \"Out\", \"Nov\", \"Dez\"],\n\t\t\tml: [\"Janeiro\", \"Fevereiro\", \"Mar\\u00e7o\", \"Abril\", \"Maio\", \"Junho\", \"Julho\", \"Agosto\", \"Setembro\", \"Outubro\", \"Novembro\", \"Dezembro\"],\n\t\t\tws: [\"Dom\", \"Seg\", \"Ter\", \"Qua\", \"Qui\", \"Sex\", \"S\\u00e1b\"],\n\t\t\twl: [\"Domingo\", \"Segunda\", \"Ter\\u00e7a\", \"Quarta\", \"Quinta\", \"Sexta\", \"S\\u00e1bado\"],\n\t\t\txf: \"%d-%m-%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a %d %b %Y %H:%M:%S\"\n\t\t},\n\t\tcs: {\n\t\t\tms: [\"led\", \"\\u00fano\", \"b\\u0159e\", \"dub\", \"kv\\u011b\", \"\\u010den\", \"\\u010dec\", \"srp\", \"z\\u00e1\\u0159\", \"\\u0159\\u00edj\", \"lis\", \"pro\"],\n\t\t\tml: [\"leden\", \"\\u00fanor\", \"b\\u0159ezen\", \"duben\", \"kv\\u011bten\", \"\\u010derven\", \"\\u010dervenec\", \"srpen\", \"z\\u00e1\\u0159\\u00ed\", \"\\u0159\\u00edjen\", \"listopad\", \"prosinec\"],\n\t\t\tws: [\"Ne\", \"Po\", \"\\u00dat\", \"St\", \"\\u010ct\", \"P\\u00e1\", \"So\"],\n\t\t\twl: [\"Ned\\u011ble\", \"Pond\\u011bl\\u00ed\", \"\\u00dater\\u00fd\", \"St\\u0159eda\", \"\\u010ctvrtek\", \"P\\u00e1tek\", \"Sobota\"],\n\t\t\txf: \"%d.%m.%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a\\u00a0%d.\\u00a0%B\\u00a0%Y,\\u00a0%H:%M:%S\"\n\t\t},\n\t\tsk: {\n\t\t\tms: [\"jan\", \"feb\", \"mar\", \"apr\", \"m\\u00e1j\", \"j\\u00fan\", \"j\\u00fal\", \"aug\", \"sep\", \"okt\", \"nov\", \"dec\"],\n\t\t\tml: [\"janu\\u00e1r\", \"febru\\u00e1r\", \"marec\", \"apr\\u00edl\", \"m\\u00e1j\", \"j\\u00fan\", \"j\\u00fal\", \"august\", \"september\", \"okt\\u00f3ber\", \"november\", \"december\"],\n\t\t\tws: [\"Ne\", \"Po\", \"Ut\", \"St\", \"\\u0160t\", \"Pi\", \"So\"],\n\t\t\twl: [\"Nede\\u013ea\", \"Pondelok\", \"Utorok\", \"Streda\", \"\\u0160tvrtok\", \"Piatok\", \"Sobota\"],\n\t\t\txf: \"%d.%m.%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a\\u00a0%d.\\u00a0%B\\u00a0%Y,\\u00a0%H:%M:%S\"\n\t\t},\n\t\tpl: {\n\t\t\tms: [\"sty\", \"lut\", \"mar\", \"kwi\", \"maj\", \"cze\", \"lip\", \"sie\", \"wrz\", \"pa\\u017a\", \"lis\", \"gru\"],\n\t\t\tml: [\"stycze\\u0144\", \"luty\", \"marzec\", \"kwiecie\\u0144\", \"maj\", \"czerwiec\", \"lipiec\", \"sierpie\\u0144\", \"wrzesie\\u0144\", \"pa\\u017adziernik\", \"listopad\", \"grudzie\\u0144\"],\n\t\t\tws: [\"nie\", \"pon\", \"wto\", \"\\u015bro\", \"czw\", \"pi\\u0105\", \"sob\"],\n\t\t\twl: [\"niedziela\", \"poniedzia\\u0142ek\", \"wtorek\", \"\\u015broda\", \"czwartek\", \"pi\\u0105tek\", \"sobota\"],\n\t\t\txf: \"%d.%m.%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a, %d %b %Y, %H:%M:%S\"\n\t\t},\n\t\thr: {\n\t\t\tms: [\"Sij\", \"Vel\", \"O\\u017eu\", \"Tra\", \"Svi\", \"Lip\", \"Srp\", \"Kol\", \"Ruj\", \"Lis\", \"Stu\", \"Pro\"],\n\t\t\tml: [\"Sije\\u010danj\", \"Velja\\u010da\", \"O\\u017eujak\", \"Travanj\", \"Svibanj\", \"Lipanj\", \"Srpanj\", \"Kolovoz\", \"Rujan\", \"Listopad\", \"Studeni\", \"Prosinac\"],\n\t\t\tws: [\"Ned\", \"Pon\", \"Uto\", \"Sri\", \"\\u010cet\", \"Pet\", \"Sub\"],\n\t\t\twl: [\"Nedjelja\", \"Ponedjeljak\", \"Utorak\", \"Srijeda\", \"\\u010cetvrtak\", \"Petak\", \"Subota\"],\n\t\t\txf: \"%d.%m.%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a %d %b %Y %H:%M:%S\"\n\t\t},\n\t\tsr: {\n\t\t\tms: [\"\\u0458\\u0430\\u043d\", \"\\u0444\\u0435\\u0431\", \"\\u043c\\u0430\\u0440\", \"\\u0430\\u043f\\u0440\", \"\\u043c\\u0430\\u0458\", \"\\u0458\\u0443\\u043d\", \"\\u0458\\u0443\\u043b\", \"\\u0430\\u0432\\u0433\", \"\\u0441\\u0435\\u043f\", \"\\u043e\\u043a\\u0442\", \"\\u043d\\u043e\\u0432\", \"\\u0434\\u0435\\u0446\"],\n\t\t\tml: [\"\\u0458\\u0430\\u043d\\u0443\\u0430\\u0440\", \"\\u0444\\u0435\\u0431\\u0440\\u0443\\u0430\\u0440\", \"\\u043c\\u0430\\u0440\\u0442\", \"\\u0430\\u043f\\u0440\\u0438\\u043b\", \"\\u043c\\u0430\\u0458\", \"\\u0458\\u0443\\u043d\", \"\\u0458\\u0443\\u043b\", \"\\u0430\\u0432\\u0433\\u0443\\u0441\\u0442\", \"\\u0441\\u0435\\u043f\\u0442\\u0435\\u043c\\u0431\\u0430\\u0440\", \"\\u043e\\u043a\\u0442\\u043e\\u0431\\u0430\\u0440\", \"\\u043d\\u043e\\u0432\\u0435\\u043c\\u0431\\u0430\\u0440\", \"\\u0434\\u0435\\u0446\\u0435\\u043c\\u0431\\u0430\\u0440\"],\n\t\t\tws: [\"\\u043d\\u0435\\u0434\", \"\\u043f\\u043e\\u043d\", \"\\u0443\\u0442\\u043e\", \"\\u0441\\u0440\\u0435\", \"\\u0447\\u0435\\u0442\", \"\\u043f\\u0435\\u0442\", \"\\u0441\\u0443\\u0431\"],\n\t\t\twl: [\"\\u043d\\u0435\\u0434\\u0435\\u0459\\u0430\", \"\\u043f\\u043e\\u043d\\u0435\\u0434\\u0435\\u0459\\u0430\\u043a\", \"\\u0443\\u0442\\u043e\\u0440\\u0430\\u043a\", \"\\u0441\\u0440\\u0435\\u0434\\u0430\", \"\\u0447\\u0435\\u0442\\u0432\\u0440\\u0442\\u0430\\u043a\", \"\\u043f\\u0435\\u0442\\u0430\\u043a\", \"\\u0441\\u0443\\u0431\\u043e\\u0442\\u0430\"],\n\t\t\txf: \"%d.%m.%Y.\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%A, %d. %B %Y. %H:%M:%S\"\n\t\t},\n\t\tro: {\n\t\t\tms: [\"ian\", \"feb\", \"mar\", \"apr\", \"mai\", \"iun\", \"iul\", \"aug\", \"sep\", \"oct\", \"nov\", \"dec\"],\n\t\t\tml: [\"ianuarie\", \"februarie\", \"martie\", \"aprilie\", \"mai\", \"iunie\", \"iulie\", \"august\", \"septembrie\", \"octombrie\", \"noiembrie\", \"decembrie\"],\n\t\t\tws: [\"Du\", \"Lu\", \"Ma\", \"Mi\", \"Jo\", \"Vi\", \"Sb\"],\n\t\t\twl: [\"duminic\\u0103\", \"luni\", \"mar\\u0163i\", \"miercuri\", \"joi\", \"vineri\", \"s\\u00e2mb\\u0103t\\u0103\"],\n\t\t\txf: \"%d.%m.%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a %d %b %Y %H:%M:%S\"\n\t\t},\n\t\thu: {\n\t\t\tms: [\"jan\", \"febr\", \"m\\u00e1rc\", \"\\u00e1pr\", \"m\\u00e1j\", \"j\\u00fan\", \"j\\u00fal\", \"aug\", \"szept\", \"okt\", \"nov\", \"dec\"],\n\t\t\tml: [\"janu\\u00e1r\", \"febru\\u00e1r\", \"m\\u00e1rcius\", \"\\u00e1prilis\", \"m\\u00e1jus\", \"j\\u00fanius\", \"j\\u00falius\", \"augusztus\", \"szeptember\", \"okt\\u00f3ber\", \"november\", \"december\"],\n\t\t\tws: [\"v\", \"h\", \"k\", \"sze\", \"cs\", \"p\", \"szo\"],\n\t\t\twl: [\"vas\\u00e1rnap\", \"h\\u00e9tf\\u0151\", \"kedd\", \"szerda\", \"cs\\u00fct\\u00f6rt\\u00f6k\", \"p\\u00e9ntek\", \"szombat\"],\n\t\t\txf: \"%Y-%m-%d\",\n\t\t\tXf: \"%H.%M.%S\",\n\t\t\tcf: \"%Y. %b. %d., %A, %H.%M.%S\"\n\t\t},\n\t\ttr: {\n\t\t\tms: [\"Oca\", \"\\u015eub\", \"Mar\", \"Nis\", \"May\", \"Haz\", \"Tem\", \"A\\u011fu\", \"Eyl\", \"Eki\", \"Kas\", \"Ara\"],\n\t\t\tml: [\"Ocak\", \"\\u015eubat\", \"Mart\", \"Nisan\", \"May\\u0131s\", \"Haziran\", \"Temmuz\", \"A\\u011fustos\", \"Eyl\\u00fcl\", \"Ekim\", \"Kas\\u0131m\", \"Aral\\u0131k\"],\n\t\t\tws: [\"Paz\", \"Pzt\", \"Sal\", \"\\u00c7r\\u015f\", \"Pr\\u015f\", \"Cum\", \"Cts\"],\n\t\t\twl: [\"Pazar\", \"Pazartesi\", \"Sal\\u0131\", \"\\u00c7ar\\u015famba\", \"Per\\u015fembe\", \"Cuma\", \"Cumartesi\"],\n\t\t\txf: \"%d-%m-%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a %d %b %Y %H:%M:%S\"\n\t\t},\n\t\tru: {\n\t\t\tms: [\"\\u042f\\u043d\\u0432\", \"\\u0424\\u0435\\u0432\", \"\\u041c\\u0430\\u0440\", \"\\u0410\\u043f\\u0440\", \"\\u041c\\u0430\\u0439\", \"\\u0418\\u044e\\u043d\", \"\\u0418\\u044e\\u043b\", \"\\u0410\\u0432\\u0433\", \"\\u0421\\u0435\\u043d\", \"\\u041e\\u043a\\u0442\", \"\\u041d\\u043e\\u044f\", \"\\u0414\\u0435\\u043a\"],\n\t\t\tml: [\"\\u042f\\u043d\\u0432\\u0430\\u0440\\u044c\", \"\\u0424\\u0435\\u0432\\u0440\\u0430\\u043b\\u044c\", \"\\u041c\\u0430\\u0440\\u0442\", \"\\u0410\\u043f\\u0440\\u0435\\u043b\\u044c\", \"\\u041c\\u0430\\u0439\", \"\\u0418\\u044e\\u043d\\u044c\", \"\\u0418\\u044e\\u043b\\u044c\", \"\\u0410\\u0432\\u0433\\u0443\\u0441\\u0442\", \"\\u0421\\u0435\\u043d\\u0442\\u044f\\u0431\\u0440\\u044c\", \"\\u041e\\u043a\\u0442\\u044f\\u0431\\u0440\\u044c\", \"\\u041d\\u043e\\u044f\\u0431\\u0440\\u044c\", \"\\u0414\\u0435\\u043a\\u0430\\u0431\\u0440\\u044c\"],\n\t\t\tws: [\"\\u0412\\u0441\\u043a\", \"\\u041f\\u043d\\u0434\", \"\\u0412\\u0442\\u0440\", \"\\u0421\\u0440\\u0434\", \"\\u0427\\u0442\\u0432\", \"\\u041f\\u0442\\u043d\", \"\\u0421\\u0431\\u0442\"],\n\t\t\twl: [\"\\u0412\\u043e\\u0441\\u043a\\u0440\\u0435\\u0441\\u0435\\u043d\\u044c\\u0435\", \"\\u041f\\u043e\\u043d\\u0435\\u0434\\u0435\\u043b\\u044c\\u043d\\u0438\\u043a\", \"\\u0412\\u0442\\u043e\\u0440\\u043d\\u0438\\u043a\", \"\\u0421\\u0440\\u0435\\u0434\\u0430\", \"\\u0427\\u0435\\u0442\\u0432\\u0435\\u0440\\u0433\", \"\\u041f\\u044f\\u0442\\u043d\\u0438\\u0446\\u0430\", \"\\u0421\\u0443\\u0431\\u0431\\u043e\\u0442\\u0430\"],\n\t\t\txf: \"%d.%m.%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a %d %b %Y %H:%M:%S\"\n\t\t},\n\t\tzh: {\n\t\t\tms: [\" 1\\u6708\", \" 2\\u6708\", \" 3\\u6708\", \" 4\\u6708\", \" 5\\u6708\", \" 6\\u6708\", \" 7\\u6708\", \" 8\\u6708\", \" 9\\u6708\", \"10\\u6708\", \"11\\u6708\", \"12\\u6708\"],\n\t\t\tml: [\"\\u4e00\\u6708\", \"\\u4e8c\\u6708\", \"\\u4e09\\u6708\", \"\\u56db\\u6708\", \"\\u4e94\\u6708\", \"\\u516d\\u6708\", \"\\u4e03\\u6708\", \"\\u516b\\u6708\", \"\\u4e5d\\u6708\", \"\\u5341\\u6708\", \"\\u5341\\u4e00\\u6708\", \"\\u5341\\u4e8c\\u6708\"],\n\t\t\tws: [\"\\u65e5\", \"\\u4e00\", \"\\u4e8c\", \"\\u4e09\", \"\\u56db\", \"\\u4e94\", \"\\u516d\"],\n\t\t\twl: [\"\\u661f\\u671f\\u65e5\", \"\\u661f\\u671f\\u4e00\", \"\\u661f\\u671f\\u4e8c\", \"\\u661f\\u671f\\u4e09\", \"\\u661f\\u671f\\u56db\", \"\\u661f\\u671f\\u4e94\", \"\\u661f\\u671f\\u516d\"],\n\t\t\txf: \"%Y\\u5e74%b%d\\u65e5\",\n\t\t\tXf: \"%H\\u65f6%M\\u5206%S\\u79d2\",\n\t\t\tcf: \"%Y\\u5e74%b%d\\u65e5 %A %H\\u65f6%M\\u5206%S\\u79d2\"\n\t\t},\n\t\tko: {\n\t\t\tms: [\" 1\\uc6d4\", \" 2\\uc6d4\", \" 3\\uc6d4\", \" 4\\uc6d4\", \" 5\\uc6d4\", \" 6\\uc6d4\", \" 7\\uc6d4\", \" 8\\uc6d4\", \" 9\\uc6d4\", \"10\\uc6d4\", \"11\\uc6d4\", \"12\\uc6d4\"],\n\t\t\tml: [\"1\\uc6d4\", \"2\\uc6d4\", \"3\\uc6d4\", \"4\\uc6d4\", \"5\\uc6d4\", \"6\\uc6d4\", \"7\\uc6d4\", \"8\\uc6d4\", \"9\\uc6d4\", \"10\\uc6d4\", \"11\\uc6d4\", \"12\\uc6d4\"],\n\t\t\tws: [\"\\uc77c\", \"\\uc6d4\", \"\\ud654\", \"\\uc218\", \"\\ubaa9\", \"\\uae08\", \"\\ud1a0\"],\n\t\t\twl: [\"\\uc77c\\uc694\\uc77c\", \"\\uc6d4\\uc694\\uc77c\", \"\\ud654\\uc694\\uc77c\", \"\\uc218\\uc694\\uc77c\", \"\\ubaa9\\uc694\\uc77c\", \"\\uae08\\uc694\\uc77c\", \"\\ud1a0\\uc694\\uc77c\"],\n\t\t\txf: \"%Y\\ub144 %B %d\\uc77c\",\n\t\t\tXf: \"%H\\uc2dc %M\\ubd84 %S\\ucd08\",\n\t\t\tcf: \"%Y\\ub144 %B %d\\uc77c (%a) %p %I\\uc2dc %M\\ubd84 %S\\ucd08\"\n\t\t},\n\t\tja: {\n\t\t\tms: [\" 1\\u6708\", \" 2\\u6708\", \" 3\\u6708\", \" 4\\u6708\", \" 5\\u6708\", \" 6\\u6708\", \" 7\\u6708\", \" 8\\u6708\", \" 9\\u6708\", \"10\\u6708\", \"11\\u6708\", \"12\\u6708\"],\n\t\t\tml: [\"1\\u6708\", \"2\\u6708\", \"3\\u6708\", \"4\\u6708\", \"5\\u6708\", \"6\\u6708\", \"7\\u6708\", \"8\\u6708\", \"9\\u6708\", \"10\\u6708\", \"11\\u6708\", \"12\\u6708\"],\n\t\t\tws: [\"\\u65e5\", \"\\u6708\", \"\\u706b\", \"\\u6c34\", \"\\u6728\", \"\\u91d1\", \"\\u571f\"],\n\t\t\twl: [\"\\u65e5\\u66dc\\u65e5\", \"\\u6708\\u66dc\\u65e5\", \"\\u706b\\u66dc\\u65e5\", \"\\u6c34\\u66dc\\u65e5\", \"\\u6728\\u66dc\\u65e5\", \"\\u91d1\\u66dc\\u65e5\", \"\\u571f\\u66dc\\u65e5\"],\n\t\t\txf: \"%Y\\u5e74%B%d\\u65e5\",\n\t\t\tXf: \"%H\\u6642%M\\u5206%S\\u79d2\",\n\t\t\tcf: \"%Y\\u5e74%B%d\\u65e5 %H\\u6642%M\\u5206%S\\u79d2\"\n\t\t}\n\t};\n\n\tlet translation = translations[lang];\n\n\tlet result = [];\n\tlet inspec = false;\n\tfor (let c of fmt)\n\t{\n\t\tif (inspec)\n\t\t{\n\t\t\tswitch (c)\n\t\t\t{\n\t\t\t\tcase \"a\":\n\t\t\t\t\tc = translation.ws[obj.getDay()];\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"A\":\n\t\t\t\t\tc = translation.wl[obj.getDay()];\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"b\":\n\t\t\t\t\tc = translation.ms[obj.getMonth()];\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"B\":\n\t\t\t\t\tc = translation.ml[obj.getMonth()];\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"c\":\n\t\t\t\t\tc = _format(obj, translation.cf, lang);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"d\":\n\t\t\t\t\tc = _lpad(obj.getDate(), \"0\", 2);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"f\":\n\t\t\t\t\tc = _lpad(obj.getMilliseconds(), \"0\", 3) + \"000\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"H\":\n\t\t\t\t\tc = _lpad(obj.getHours(), \"0\", 2);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"I\":\n\t\t\t\t\tc = _lpad(((obj.getHours()-1) % 12)+1, \"0\", 2);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"j\":\n\t\t\t\t\tc = _lpad(DateTimeProtocol.yearday(obj), \"0\", 3);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"m\":\n\t\t\t\t\tc = _lpad(obj.getMonth()+1, \"0\", 2);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"M\":\n\t\t\t\t\tc = _lpad(obj.getMinutes(), \"0\", 2);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"p\":\n\t\t\t\t\tc = obj.getHours() < 12 ? \"AM\" : \"PM\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"S\":\n\t\t\t\t\tc = _lpad(obj.getSeconds(), \"0\", 2);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"U\":\n\t\t\t\t\tc = _lpad(_week4format(obj, 6), \"0\", 2);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"w\":\n\t\t\t\t\tc = obj.getDay();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"W\":\n\t\t\t\t\tc = _lpad(_week4format(obj, 0), \"0\", 2);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"x\":\n\t\t\t\t\tc = _format(obj, translation.xf, lang);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"X\":\n\t\t\t\t\tc = _format(obj, translation.Xf, lang);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"y\":\n\t\t\t\t\tc = (obj.getFullYear() % 100).toString();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"Y\":\n\t\t\t\t\tc = obj.getFullYear().toString();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"z\":\n\t\t\t\t\t// UTC offset in the form +HHMM or -HHMM\n\t\t\t\t\tc = \"\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"Z\":\n\t\t\t\t\t// Time zone name\n\t\t\t\t\tc = \"\";\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tresult.push(c);\n\t\t\tinspec = false;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (c == \"%\")\n\t\t\t\tinspec = true;\n\t\t\telse\n\t\t\t\tresult.push(c);\n\t\t}\n\t}\n\treturn result.join(\"\");\n};\n\nfunction _format_int(obj, fmt, lang)\n{\n\tlet work = fmt;\n\n\t// Defaults\n\tlet fill = ' ';\n\tlet align = '>'; // '<', '>', '=' or '^'\n\tlet sign = '-'; // '+', '-' or ' '\n\tlet alternate = false;\n\tlet minimumwidth = 0;\n\tlet type = 'd'; // 'b', 'c', 'd', 'o', 'x', 'X' or 'n'\n\n\t// Determine output type\n\tif (/[bcdoxXn]$/.test(work))\n\t{\n\t\ttype = work.substring(work.length-1);\n\t\twork = work.substring(0, work.length-1);\n\t}\n\n\t// Extract minimum width\n\tif (/\\d+$/.test(work))\n\t{\n\t\tlet minimumwidthStr = /\\d+$/.exec(work);\n\t\twork = work.replace(/\\d+$/, \"\");\n\t\tif (/^0/.test(minimumwidthStr))\n\t\t{\n\t\t\talign = '=';\n\t\t\tfill = '0';\n\t\t}\n\t\tminimumwidth = parseInt(minimumwidthStr);\n\t}\n\n\t// Alternate form?\n\tif (/#$/.test(work))\n\t{\n\t\talternate = true;\n\t\twork = work.substring(0, work.length-1);\n\t}\n\n\t// Determine sign\n\tif (/[+ -]$/.test(work))\n\t{\n\t\tif (type == 'c')\n\t\t\tthrow new ValueError(\"sign not allowed for integer format type 'c'\");\n\t\tsign = work.substring(work.length-1);\n\t\twork = work.substring(0, work.length-1);\n\t}\n\n\t// Extract fill and align char\n\tif (work.length >= 3)\n\t\tthrow new ValueError(\"illegal integer format string \" + _repr(fmt));\n\telse if (work.length == 2)\n\t{\n\t\tif (/[<>=^]$/.test(work))\n\t\t{\n\t\t\talign = work[1];\n\t\t\tfill = work[0];\n\t\t}\n\t\telse\n\t\t\tthrow new ValueError(\"illegal integer format string \" + _repr(fmt));\n\t}\n\telse if (work.length == 1)\n\t{\n\t\tif (/^[<>=^]$/.test(work))\n\t\t\talign = work;\n\t\telse\n\t\t\tthrow new ValueError(\"illegal integer format string \" + _repr(fmt));\n\t}\n\n\t// Basic number formatting\n\tlet neg = obj < 0;\n\n\tif (neg)\n\t\tobj = -obj;\n\n\tlet output;\n\tswitch (type)\n\t{\n\t\tcase 'b':\n\t\t\toutput = obj.toString(2);\n\t\t\tbreak;\n\t\tcase 'c':\n\t\t\tif (neg || obj > 65535)\n\t\t\t\tthrow new ValueError(\"value out of bounds for c format\");\n\t\t\toutput = String.fromCharCode(obj);\n\t\t\tbreak;\n\t\tcase 'd':\n\t\t\toutput = obj.toString();\n\t\t\tbreak;\n\t\tcase 'o':\n\t\t\toutput = obj.toString(8);\n\t\t\tbreak;\n\t\tcase 'x':\n\t\t\toutput = obj.toString(16);\n\t\t\tbreak;\n\t\tcase 'X':\n\t\t\toutput = obj.toString(16).toUpperCase();\n\t\t\tbreak;\n\t\tcase 'n':\n\t\t\t// FIXME: locale formatting\n\t\t\toutput = obj.toString();\n\t\t\tbreak;\n\t}\n\n\t// The rest of the formatting\n\tif (align === '=')\n\t{\n\t\tif (neg || sign !== '-')\n\t\t\t--minimumwidth;\n\t\tif (alternate && (type === 'b' || type === 'o' || type === 'x' || type === 'X'))\n\t\t\tminimumwidth -= 2;\n\n\t\tif (output.length < minimumwidth)\n\t\t\toutput = _str_repeat(fill, minimumwidth-output.length) + output;\n\n\t\tif (alternate && (type === 'b' || type === 'o' || type === 'x' || type === 'X'))\n\t\t\toutput = \"0\" + type + output;\n\n\t\tif (neg)\n\t\t\toutput = \"-\" + output;\n\t\telse if (sign != '-')\n\t\t\toutput = sign + output;\n\t}\n\telse\n\t{\n\t\tif (alternate && (type == 'b' || type == 'o' || type == 'x' || type == 'X'))\n\t\t\toutput = \"0\" + type + output;\n\t\tif (neg)\n\t\t\toutput = \"-\" + output;\n\t\telse if (sign != '-')\n\t\t\toutput = sign + output;\n\t\tif (output.length < minimumwidth)\n\t\t{\n\t\t\tif (align == '<')\n\t\t\t\toutput = output + _str_repeat(fill, minimumwidth-output.length);\n\t\t\telse if (align == '>')\n\t\t\t\toutput = _str_repeat(fill, minimumwidth-output.length) + output;\n\t\t\telse // if (align == '^')\n\t\t\t{\n\t\t\t\tlet pad = minimumwidth - output.length;\n\t\t\t\tlet padBefore = Math.floor(pad/2);\n\t\t\t\tlet padAfter = pad-padBefore;\n\t\t\t\toutput = _str_repeat(fill, padBefore) + output + _str_repeat(fill, padAfter);\n\t\t\t}\n\t\t}\n\t}\n\treturn output;\n};\n\n// Format ``obj`` using the format string ``fmt`` in the language ``lang``\nexport function _format(obj, fmt, lang)\n{\n\tif (lang === undefined || lang === null)\n\t\tlang = \"en\";\n\telse\n\t{\n\t\tlet translations = {de: null, en: null, fr: null, es: null, it: null, da: null, sv: null, nl: null, pt: null, cs: null, sk: null, pl: null, hr: null, sr: null, ro: null, hu: null, tr: null, ru: null, zh: null, ko: null, ja: null};\n\t\tlang = lang.toLowerCase();\n\t\tif (translations[lang] === undefined)\n\t\t{\n\t\t\tlang = lang.split(/_/)[0];\n\t\t\tif (translations[lang] === undefined)\n\t\t\t\tlang = \"en\";\n\t\t}\n\t}\n\tif (_isdate(obj))\n\t\treturn _format_datetime(obj._date, fmt, lang);\n\tif (_isdatetime(obj))\n\t\treturn _format_datetime(obj, fmt, lang);\n\telse if (_isint(obj))\n\t\treturn _format_int(obj, fmt, lang);\n\telse if (obj === true)\n\t\treturn _format_int(1, fmt, lang);\n\telse if (obj === false)\n\t\treturn _format_int(0, fmt, lang);\n};\n\nexport function _lpad(string, pad, len)\n{\n\tif (typeof(string) === \"number\")\n\t\tstring = string.toString();\n\twhile (string.length < len)\n\t\tstring = pad + string;\n\treturn string;\n};\n\nexport function _rpad(string, pad, len)\n{\n\tif (typeof(string) === \"number\")\n\t\tstring = string.toString();\n\twhile (string.length < len)\n\t\tstring = string + pad;\n\treturn string;\n};\n\n// This is outside of ``Proto`` on purpose\n// This way reactive frameworks like ``Vue.js`` don't get to see it\n// and complain about mutating render functions when those create new objects.\nlet _nextid = 1;\n\nexport class Proto\n{\n\tconstructor()\n\t{\n\t\tthis.__id__ = _nextid++;\n\t}\n\n\tul4type()\n\t{\n\t\treturn this.constructor.name;\n\t}\n\n\t// equality comparison of objects defaults to identity comparison\n\t__eq__(other)\n\t{\n\t\treturn this === other;\n\t}\n\n\t// To overwrite equality comparison, you only have to overwrite ``__eq__``,\n\t// ``__ne__`` will be synthesized from that\n\t__ne__(other)\n\t{\n\t\treturn !this.__eq__(other);\n\t}\n\n\t// For other comparison operators, each method has to be implemented:\n\t// ``<`` calls ``__lt__``, ``<=`` calls ``__le__``, ``>`` calls ``__gt__`` and\n\t// ``>=`` calls ``__ge__``\n\n\t__bool__()\n\t{\n\t\treturn true;\n\t}\n};\n\nexport class Signature extends Proto\n{\n\tconstructor(...args)\n\t{\n\t\tsuper();\n\t\tthis.args = [];\n\t\tthis.argNames = {};\n\t\tthis.remargs = null;\n\t\tthis.remkwargs = null;\n\n\t\tlet nextDefault = false;\n\t\tlet lastArgname = null;\n\t\tfor (let argName of args)\n\t\t{\n\t\t\tif (nextDefault)\n\t\t\t{\n\t\t\t\tthis.args.push({name: lastArgname, defaultValue: argName});\n\t\t\t\tthis.argNames[lastArgname] = true;\n\t\t\t\tnextDefault = false;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (argName.substr(argName.length-1) === \"=\")\n\t\t\t\t{\n\t\t\t\t\tlastArgname = argName.substr(0, argName.length-1);\n\t\t\t\t\tnextDefault = true;\n\t\t\t\t}\n\t\t\t\telse if (argName.substr(0, 2) === \"**\")\n\t\t\t\t\tthis.remkwargs = argName.substr(2);\n\t\t\t\telse if (argName.substr(0, 1) === \"*\")\n\t\t\t\t\tthis.remargs = argName.substr(1);\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.args.push({name: argName});\n\t\t\t\t\tthis.argNames[argName] = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Create the argument array for calling a function with this signature with the arguments available from ``args``\n\tbindArray(name, args, kwargs)\n\t{\n\t\tlet finalargs = [];\n\t\tlet decname = name !== null ? name + \"() \" : \"\";\n\n\t\tlet i = 0;\n\t\tfor (let arg of this.args)\n\t\t{\n\t\t\tif (i < args.length)\n\t\t\t{\n\t\t\t\tif (kwargs.hasOwnProperty(arg.name))\n\t\t\t\t\tthrow new ArgumentError(decname + \"argument \" + _repr(arg.name) + \" (position \" + i + \") specified multiple times\");\n\t\t\t\tfinalargs.push(args[i]);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (kwargs.hasOwnProperty(arg.name))\n\t\t\t\t\tfinalargs.push(kwargs[arg.name]);\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (arg.hasOwnProperty(\"defaultValue\"))\n\t\t\t\t\t\tfinalargs.push(arg.defaultValue);\n\t\t\t\t\telse\n\t\t\t\t\t\tthrow new ArgumentError(\"required \" + decname + \"argument \" + _repr(arg.name) + \" (position \" + i + \") missing\");\n\t\t\t\t}\n\t\t\t}\n\t\t\t++i;\n\t\t}\n\n\t\t// Do we accept additional positional arguments?\n\t\tif (this.remargs === null)\n\t\t{\n\t\t\t// No, but we have them -> complain\n\t\t\tif (args.length > this.args.length)\n\t\t\t{\n\t\t\t\tlet prefix = name === null ? \"expected\" : name + \"() expects\";\n\t\t\t\tthrow new ArgumentError(prefix + \" at most \" + this.args.length + \" positional argument\" + (this.args.length != 1 ? \"s\" : \"\") + \", \" + args.length + \" given\");\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// Put additional positional arguments in the call into the ``*`` argument (if there are none, this pushes an empty list)\n\t\t\tfinalargs.push(args.slice(this.args.length));\n\t\t}\n\n\t\t// Do we accept arbitrary keyword arguments?\n\t\tif (this.remkwargs === null)\n\t\t{\n\t\t\t// No => complain about unknown ones\n\t\t\tfor (let key in kwargs)\n\t\t\t{\n\t\t\t\tif (!this.argNames[key])\n\t\t\t\t{\n\t\t\t\t\tif (name === null)\n\t\t\t\t\t\tthrow new ArgumentError(\"an argument named \" + _repr(key) + \" isn't supported\");\n\t\t\t\t\telse\n\t\t\t\t\t\tthrow new ArgumentError(name + \"() doesn't support an argument named \" + _repr(key));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// Yes => Put the unknown ones into an object and add that to the arguments array\n\t\t\tlet remkwargs = _emptymap();\n\t\t\tfor (let key in kwargs)\n\t\t\t{\n\t\t\t\tif (!this.argNames[key])\n\t\t\t\t\t_setmap(remkwargs, key, kwargs[key]);\n\t\t\t}\n\t\t\tfinalargs.push(remkwargs);\n\t\t}\n\n\t\treturn finalargs;\n\t}\n\n\t// Create the argument object for calling a function with this signature with the arguments available from ``args``\n\tbindObject(name, args, kwargs)\n\t{\n\t\targs = this.bindArray(name, args, kwargs);\n\t\tlet argObject = {};\n\t\tlet i;\n\t\tfor (i = 0; i < this.args.length; ++i)\n\t\t\targObject[this.args[i].name] = args[i];\n\t\tif (this.remargs !== null)\n\t\t\targObject[this.remargs] = args[i++];\n\t\tif (this.remkwargs !== null)\n\t\t\targObject[this.remkwargs] = args[i++];\n\t\treturn argObject;\n\t}\n\n\t__repr__()\n\t{\n\t\treturn \"<Signature \" + this.toString() + \">\";\n\t}\n\n\t__str__()\n\t{\n\t\treturn this.toString();\n\t}\n\n\ttoString()\n\t{\n\t\tlet v = [];\n\t\tfor (let arg of this.args)\n\t\t{\n\t\t\tif (arg.hasOwnProperty(\"defaultValue\"))\n\t\t\t\tv.push(arg.name + \"=\" + _repr(arg.defaultValue));\n\t\t\telse\n\t\t\t\tv.push(arg.name);\n\t\t}\n\t\tif (this.remargs !== null)\n\t\t\tv.push(\"*\" + this.remargs);\n\t\tif (this.remkwargs !== null)\n\t\t\tv.push(\"**\" + this.remkwargs);\n\t\treturn \"(\" + v.join(\", \") + \")\";\n\t}\n};\n\n// When we don't have a real ``Set`` type, emulate one that supports strings\nexport class _Set\n{\n\tconstructor(...items)\n\t{\n\t\tthis.items = {};\n\t\tthis.add(...items);\n\t}\n\n\tadd(...items)\n\t{\n\t\tfor (let item of items)\n\t\t\tthis.items[item] = true;\n\t}\n\n\tclear()\n\t{\n\t\tthis.items = {};\n\t}\n\n\t__getattr__(attrname)\n\t{\n\t\tlet self = this;\n\t\tswitch (attrname)\n\t\t{\n\t\t\tcase \"add\":\n\t\t\t\treturn expose(function add(items){ self.add(...items); }, [\"*items\"]);\n\t\t\tdefault:\n\t\t\t\tthrow new AttributeError(this, attrname);\n\t\t}\n\t}\n\n\t__contains__(item)\n\t{\n\t\treturn this.items[item] || false;\n\t}\n\n\thas(item)\n\t{\n\t\treturn this.items[item] || false;\n\t}\n\n\t__bool__()\n\t{\n\t\tfor (let item in this.items)\n\t\t{\n\t\t\tif (!this.items.hasOwnProperty(item))\n\t\t\t\tcontinue;\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\t__repr__()\n\t{\n\t\tlet v = [];\n\t\tv.push(\"{\");\n\t\tlet i = 0;\n\t\tfor (let item in this.items)\n\t\t{\n\t\t\tif (!this.items.hasOwnProperty(item))\n\t\t\t\tcontinue;\n\t\t\tif (i++)\n\t\t\t\tv.push(\", \");\n\t\t\tv.push(_repr(item));\n\t\t}\n\t\tif (!i)\n\t\t\tv.push(\"/\");\n\t\tv.push(\"}\");\n\t\treturn v.join(\"\");\n\t}\n\n\t__eq__(other)\n\t{\n\t\t// We'll check that everything in ``this`` is in ``other``\n\t\t// and if both have the same number of items they are equal\n\t\tif (_isset(other))\n\t\t{\n\t\t\tlet count = 0;\n\t\t\tfor (let item in this.items)\n\t\t\t{\n\t\t\t\tif (!other.has(item))\n\t\t\t\t\treturn false;\n\t\t\t\t// count the number of items we have\n\t\t\t\t++count;\n\t\t\t}\n\t\t\treturn other.size == count;\n\t\t}\n\t\telse if (_isul4set(other))\n\t\t{\n\t\t\tlet count = 0;\n\t\t\tfor (let item in this.items)\n\t\t\t{\n\t\t\t\tif (!other[item])\n\t\t\t\t\treturn false;\n\t\t\t\t// count the number of items we have\n\t\t\t\t++count;\n\t\t\t}\n\t\t\t// Subtract the number of items that ``other`` has\n\t\t\tfor (let item in other.items)\n\t\t\t\t--count;\n\t\t\treturn count == 0;\n\t\t}\n\t\telse\n\t\t\treturn false;\n\t}\n\n\t__le__(other)\n\t{\n\t\t// check that ``this`` is a subset of ``other``,\n\t\t// i.e. everything in ``this`` is also in ``other``\n\t\tif (_isset(other))\n\t\t{\n\t\t\tlet count = 0;\n\t\t\tfor (let item in this.items)\n\t\t\t{\n\t\t\t\tif (!other.has(item))\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\telse if (_isul4set(other))\n\t\t{\n\t\t\tlet count = 0;\n\t\t\tfor (let item in this.items)\n\t\t\t{\n\t\t\t\tif (!other.items[item])\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\telse\n\t\t\t_unorderable(\"<\", this, other);\n\t}\n\n\t__ge__(other)\n\t{\n\t\t// check that ``this`` is a superset of ``other``,\n\t\t// i.e. everything in ``other`` is also in ``this``\n\t\tif (_isset(other))\n\t\t{\n\t\t\tother.forEach(function(value) {\n\t\t\t\tif (!this.items[value])\n\t\t\t\t\treturn false;\n\t\t\t}, this);\n\t\t\treturn true;\n\t\t}\n\t\telse if (_isul4set(other))\n\t\t{\n\t\t\tlet count = 0;\n\t\t\tfor (let key in other.items)\n\t\t\t{\n\t\t\t\tif (!this.items[key])\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\telse\n\t\t\t_unorderable(\"<=\", this, other);\n\t}\n};\n\n_Set.prototype.__type__ = \"set\";\n\n// Adds name and signature to a function/method and makes the method callable in templates\nexport function expose(f, signature, options)\n{\n\toptions = options || {};\n\tif (options.name)\n\t\tf._ul4_name = options.name;\n\tif (_islist(signature))\n\t\tsignature = new Signature(...signature);\n\tf._ul4_signature = signature;\n\tf._ul4_needsobject = options.needsobject || false;\n\tf._ul4_needscontext = options.needscontext || false;\n};\n\n// Clone an object and extend it\nexport function _extend(baseobj, attrs)\n{\n\treturn Object.assign(Object.create(baseobj), attrs);\n};\n\n// Protocol objects for all builtin types\nexport let Protocol = {\n\tattrs: _emptyset(),\n\n\tul4type: function ul4type()\n\t{\n\t\treturn \"Protocol\";\n\t},\n\n\tdir: function dir()\n\t{\n\t\treturn this.attrs;\n\t},\n\n\tget: function get(obj)\n\t{\n\t\tif (_isstr(obj))\n\t\t\treturn StrProtocol;\n\t\telse if (_islist(obj))\n\t\t\treturn ListProtocol;\n\t\telse if (_isdate(obj))\n\t\t\treturn DateProtocol;\n\t\telse if (_isset(obj))\n\t\t\treturn SetProtocol;\n\t\telse if (_ismap(obj))\n\t\t\treturn MapProtocol;\n\t\telse if (_isdatetime(obj))\n\t\t\treturn DateTimeProtocol;\n\t\telse if (_isobject(obj))\n\t\t\treturn ObjectProtocol;\n\t\telse\n\t\t\treturn Protocol;\n\t},\n\n\tgetattr: function getattr(obj, attrname)\n\t{\n\t\tif (obj === null || obj === undefined)\n\t\t\tthrow new AttributeError(obj, attrname);\n\t\telse if (typeof(obj.__getattr__) === \"function\")\n\t\t\treturn obj.__getattr__(attrname);\n\t\telse if (this.attrs.has(attrname))\n\t\t{\n\t\t\tlet attr = this[attrname];\n\t\t\tlet realattr = function realattr(...args) {\n\t\t\t\treturn attr.apply(this, [obj, ...args]);\n\t\t\t};\n\t\t\t// Unfortunately we can't set ``realattr.name``;\n\t\t\trealattr._ul4_name = attr._ul4_name || attr.name;\n\t\t\trealattr._ul4_signature = attr._ul4_signature;\n\t\t\trealattr._ul4_needsobject = attr._ul4_needsobject;\n\t\t\trealattr._ul4_needscontext = attr._ul4_needscontext;\n\t\t\treturn realattr;\n\t\t}\n\t\telse\n\t\t\tthrow new AttributeError(obj, attrname);\n\t},\n\n\thasattr: function hasattr(obj, attrname)\n\t{\n\t\tif (obj === null || obj === undefined)\n\t\t\treturn false;\n\t\telse if (typeof(obj.__getattr__) === \"function\")\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tobj.__getattr__(attrname);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tcatch (exc)\n\t\t\t{\n\t\t\t\tif (exc instanceof AttributeError && exc.obj === object)\n\t\t\t\t\treturn false;\n\t\t\t\telse\n\t\t\t\t\tthrow exc;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\treturn this.attrs.has(attrname);\n\t}\n};\n\n\nexport let StrProtocol = _extend(Protocol,\n{\n\tattrs: _makeset(\n\t\t\"split\",\n\t\t\"rsplit\",\n\t\t\"splitlines\",\n\t\t\"strip\",\n\t\t\"lstrip\",\n\t\t\"rstrip\",\n\t\t\"upper\",\n\t\t\"lower\",\n\t\t\"capitalize\",\n\t\t\"startswith\",\n\t\t\"endswith\",\n\t\t\"replace\",\n\t\t\"count\",\n\t\t\"find\",\n\t\t\"rfind\",\n\t\t\"join\"\n\t),\n\n\tul4type: function ul4type(obj)\n\t{\n\t\treturn \"str\";\n\t},\n\n\tcount: function count(obj, sub, start=null, end=null)\n\t{\n\t\treturn _count(obj, sub, start, end);\n\t},\n\n\tfind: function find(obj, sub, start=null, end=null)\n\t{\n\t\treturn _find(obj, sub, start, end);\n\t},\n\n\trfind: function rfind(obj, sub, start=null, end=null)\n\t{\n\t\treturn _rfind(obj, sub, start, end);\n\t},\n\n\treplace: function replace(obj, old, new_, count=null)\n\t{\n\t\tif (count === null)\n\t\t\tcount = obj.length;\n\n\t\tlet result = [];\n\t\twhile (obj.length)\n\t\t{\n\t\t\tlet pos = obj.indexOf(old);\n\t\t\tif (pos === -1 || !count--)\n\t\t\t{\n\t\t\t\tresult.push(obj);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tresult.push(obj.substr(0, pos));\n\t\t\tresult.push(new_);\n\t\t\tobj = obj.substr(pos + old.length);\n\t\t}\n\t\treturn result.join(\"\");\n\t},\n\n\tstrip: function strip(obj, chars=null)\n\t{\n\t\tchars = chars || \" \\r\\n\\t\";\n\t\tif (typeof(chars) !== \"string\")\n\t\t\tthrow new TypeError(\"strip() requires a string argument\");\n\n\t\twhile (obj && chars.indexOf(obj[0]) >= 0)\n\t\t\tobj = obj.substr(1);\n\t\twhile (obj && chars.indexOf(obj[obj.length-1]) >= 0)\n\t\t\tobj = obj.substr(0, obj.length-1);\n\t\treturn obj;\n\t},\n\n\tlstrip: function lstrip(obj, chars=null)\n\t{\n\t\tchars = chars || \" \\r\\n\\t\";\n\t\tif (typeof(chars) !== \"string\")\n\t\t\tthrow new TypeError(\"lstrip() requires a string argument\");\n\n\t\twhile (obj && chars.indexOf(obj[0]) >= 0)\n\t\t\tobj = obj.substr(1);\n\t\treturn obj;\n\t},\n\n\trstrip: function rstrip(obj, chars=null)\n\t{\n\t\tchars = chars || \" \\r\\n\\t\";\n\t\tif (typeof(chars) !== \"string\")\n\t\t\tthrow new TypeError(\"rstrip() requires a string argument\");\n\n\t\twhile (obj && chars.indexOf(obj[obj.length-1]) >= 0)\n\t\t\tobj = obj.substr(0, obj.length-1);\n\t\treturn obj;\n\t},\n\n\tsplit: function split(obj, sep=null, count=null)\n\t{\n\t\tif (sep !== null && typeof(sep) !== \"string\")\n\t\t\tthrow new TypeError(\"split() requires a string\");\n\n\t\tif (count === null)\n\t\t{\n\t\t\tlet result = obj.split(sep !== null ? sep : /[ \\n\\r\\t]+/);\n\t\t\tif (sep === null)\n\t\t\t{\n\t\t\t\tif (result.length && !result[0].length)\n\t\t\t\t\tresult.splice(0, 1);\n\t\t\t\tif (result.length && !result[result.length-1].length)\n\t\t\t\t\tresult.splice(-1);\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (sep !== null)\n\t\t\t{\n\t\t\t\tlet result = [];\n\t\t\t\twhile (obj.length)\n\t\t\t\t{\n\t\t\t\t\tlet pos = obj.indexOf(sep);\n\t\t\t\t\tif (pos === -1 || !count--)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.push(obj);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tresult.push(obj.substr(0, pos));\n\t\t\t\t\tobj = obj.substr(pos + sep.length);\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlet result = [];\n\t\t\t\twhile (obj.length)\n\t\t\t\t{\n\t\t\t\t\tobj = StrProtocol.lstrip(obj, null);\n\t\t\t\t\tlet part;\n\t\t\t\t\tif (!count--)\n\t\t\t\t\t\t part = obj; // Take the rest of the string\n\t\t\t\t\telse\n\t\t\t\t\t\tpart = obj.split(/[ \\n\\r\\t]+/, 1)[0];\n\t\t\t\t\tif (part.length)\n\t\t\t\t\t\tresult.push(part);\n\t\t\t\t\tobj = obj.substr(part.length);\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}\n\t},\n\n\trsplit: function rsplit(obj, sep=null, count=null)\n\t{\n\t\tif (sep !== null && typeof(sep) !== \"string\")\n\t\t\tthrow new TypeError(\"rsplit() requires a string as second argument\");\n\n\t\tif (count === null)\n\t\t{\n\t\t\tlet result = obj.split(sep !== null ? sep : /[ \\n\\r\\t]+/);\n\t\t\tif (sep === null)\n\t\t\t{\n\t\t\t\tif (result.length && !result[0].length)\n\t\t\t\t\tresult.splice(0, 1);\n\t\t\t\tif (result.length && !result[result.length-1].length)\n\t\t\t\t\tresult.splice(-1);\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (sep !== null)\n\t\t\t{\n\t\t\t\tlet result = [];\n\t\t\t\twhile (obj.length)\n\t\t\t\t{\n\t\t\t\t\tlet pos = obj.lastIndexOf(sep);\n\t\t\t\t\tif (pos === -1 || !count--)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.unshift(obj);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tresult.unshift(obj.substr(pos+sep.length));\n\t\t\t\t\tobj = obj.substr(0, pos);\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlet result = [];\n\t\t\t\twhile (obj.length)\n\t\t\t\t{\n\t\t\t\t\tobj = StrProtocol.rstrip(obj);\n\t\t\t\t\tlet part;\n\t\t\t\t\tif (!count--)\n\t\t\t\t\t\t part = obj; // Take the rest of the string\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tpart = obj.split(/[ \\n\\r\\t]+/);\n\t\t\t\t\t\tpart = part[part.length-1];\n\t\t\t\t\t}\n\t\t\t\t\tif (part.length)\n\t\t\t\t\t\tresult.unshift(part);\n\t\t\t\t\tobj = obj.substr(0, obj.length-part.length);\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}\n\t},\n\n\tsplitlines: function splitlines(obj, keepends=false)\n\t{\n\t\tlet pos = 0;\n\t\tlet startpos;\n\t\tlet lookingAtLineEnd = function lookingAtLineEnd()\n\t\t{\n\t\t\tlet c = obj[pos];\n\t\t\tif (c === '\\n' || c == '\\u000B' || c == '\\u000C' || c == '\\u001C' || c == '\\u001D' || c == '\\u001E' || c == '\\u0085' || c == '\\u2028' || c == '\\u2029')\n\t\t\t\treturn 1;\n\t\t\tif (c === '\\r')\n\t\t\t{\n\t\t\t\tif (pos == length-1)\n\t\t\t\t\treturn 1;\n\t\t\t\tif (obj[pos+1] === '\\n')\n\t\t\t\t\treturn 2;\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\treturn 0;\n\t\t};\n\n\t\tlet result = [], length = obj.length;\n\n\t\tfor (pos = 0, startpos = 0;;)\n\t\t{\n\t\t\tif (pos >= length)\n\t\t\t{\n\t\t\t\tif (startpos != pos)\n\t\t\t\t\tresult.push(obj.substring(startpos));\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\tlet lineendlen = lookingAtLineEnd();\n\t\t\tif (!lineendlen)\n\t\t\t\t++pos;\n\t\t\telse\n\t\t\t{\n\t\t\t\tlet endpos = pos + (keepends ? lineendlen : 0);\n\t\t\t\tresult.push(obj.substring(startpos, endpos));\n\t\t\t\tpos += lineendlen;\n\t\t\t\tstartpos = pos;\n\t\t\t}\n\t\t}\n\t},\n\n\tlower: function lower(obj)\n\t{\n\t\treturn obj.toLowerCase();\n\t},\n\n\tupper: function upper(obj)\n\t{\n\t\treturn obj.toUpperCase();\n\t},\n\n\tcapitalize: function capitalize(obj)\n\t{\n\t\tif (obj.length)\n\t\t\tobj = obj[0].toUpperCase() + obj.slice(1).toLowerCase();\n\t\treturn obj;\n\t},\n\n\tjoin: function join(obj, iterable)\n\t{\n\t\tlet resultlist = [];\n\t\tfor (let iter = _iter(iterable);;)\n\t\t{\n\t\t\tlet item = iter.next();\n\t\t\tif (item.done)\n\t\t\t\tbreak;\n\t\t\tresultlist.push(item.value);\n\t\t}\n\t\treturn resultlist.join(obj);\n\t},\n\n\tstartswith: function startswith(obj, prefix)\n\t{\n\t\tif (typeof(prefix) === \"string\")\n\t\t\treturn obj.substr(0, prefix.length) === prefix;\n\t\telse if (_islist(prefix))\n\t\t{\n\t\t\tfor (let singlepre of prefix)\n\t\t\t{\n\t\t\t\tif (obj.substr(0, singlepre.length) === singlepre)\n\t\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\telse\n\t\t\tthrow new TypeError(\"startswith() argument must be string\");\n\t},\n\n\tendswith: function endswith(obj, suffix)\n\t{\n\t\tif (typeof(suffix) === \"string\")\n\t\t\treturn obj.substr(obj.length-suffix.length) === suffix;\n\t\telse if (_islist(suffix))\n\t\t{\n\t\t\tfor (let singlesuf of suffix)\n\t\t\t{\n\t\t\t\tif (obj.substr(obj.length-singlesuf.length) === singlesuf)\n\t\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\telse\n\t\t\tthrow new TypeError(\"endswith() argument must be string or list of strings\");\n\t}\n});\n\nexpose(StrProtocol.count, [\"sub\", \"start=\", null, \"end=\", null]);\nexpose(StrProtocol.find, [\"sub\", \"start=\", null, \"end=\", null]);\nexpose(StrProtocol.rfind, [\"sub\", \"start=\", null, \"end=\", null]);\nexpose(StrProtocol.replace, [\"old\", \"new\", \"count=\", null]);\nexpose(StrProtocol.strip, [\"chars=\", null]);\nexpose(StrProtocol.lstrip, [\"chars=\", null]);\nexpose(StrProtocol.rstrip, [\"chars=\", null]);\nexpose(StrProtocol.split, [\"sep=\", null, \"count=\", null]);\nexpose(StrProtocol.rsplit, [\"sep=\", null, \"count=\", null]);\nexpose(StrProtocol.splitlines, [\"keepends=\", false]);\nexpose(StrProtocol.lower, []);\nexpose(StrProtocol.upper, []);\nexpose(StrProtocol.capitalize, []);\nexpose(StrProtocol.join, [\"iterable\"]);\nexpose(StrProtocol.startswith, [\"prefix\"]);\nexpose(StrProtocol.endswith, [\"suffix\"]);\n\n\nexport let ListProtocol = _extend(Protocol,\n{\n\tattrs: _makeset(\n\t\t\"append\",\n\t\t\"insert\",\n\t\t\"pop\",\n\t\t\"count\",\n\t\t\"find\",\n\t\t\"rfind\"\n\t),\n\n\tul4type: function ul4type(obj)\n\t{\n\t\treturn \"list\";\n\t},\n\n\tappend: function append(obj, items)\n\t{\n\t\tfor (let item of items)\n\t\t\tobj.push(item);\n\t\treturn null;\n\t},\n\n\tinsert: function insert(obj, pos, items)\n\t{\n\t\tif (pos < 0)\n\t\t\tpos += obj.length;\n\n\t\tfor (let item of items)\n\t\t\tobj.splice(pos++, 0, item);\n\t\treturn null;\n\t},\n\n\tpop: function pop(obj, pos)\n\t{\n\t\tif (pos < 0)\n\t\t\tpos += obj.length;\n\n\t\tlet result = obj[pos];\n\t\tobj.splice(pos, 1);\n\t\treturn result;\n\t},\n\n\tcount: function count(obj, sub, start=null, end=null)\n\t{\n\t\treturn _count(obj, sub, start, end);\n\t},\n\n\tfind: function find(obj, sub, start=null, end=null)\n\t{\n\t\treturn _find(obj, sub, start, end);\n\t},\n\n\trfind: function rfind(obj, sub, start=null, end=null)\n\t{\n\t\treturn _rfind(obj, sub, start, end);\n\t}\n});\n\nexpose(ListProtocol.append, [\"*items\"]);\nexpose(ListProtocol.insert, [\"pos\", \"*items\"]);\nexpose(ListProtocol.pop, [\"pos=\", -1]);\nexpose(ListProtocol.count, [\"sub\", \"start=\", null, \"end=\", null]);\nexpose(ListProtocol.find, [\"sub\", \"start=\", null, \"end=\", null]);\nexpose(ListProtocol.rfind, [\"sub\", \"start=\", null, \"end=\", null]);\n\n\nexport let MapProtocol = _extend(Protocol,\n{\n\tattrs: _makeset(\"get\", \"items\", \"values\", \"update\", \"clear\", \"pop\"),\n\n\tul4type: function ul4type(obj)\n\t{\n\t\treturn \"dict\";\n\t},\n\n\tgetattr: function getattr(obj, attrname)\n\t{\n\t\tif (this.attrs.has(attrname))\n\t\t{\n\t\t\tlet attr = this[attrname];\n\t\t\tlet realattr = function realattr(...args) {\n\t\t\t\treturn attr.apply(this, [obj, ...args]);\n\t\t\t};\n\t\t\t// Unfortunately we can't set ``realattr.name``;\n\t\t\trealattr._ul4_name = attr._ul4_name || attr.name;\n\t\t\trealattr._ul4_signature = attr._ul4_signature;\n\t\t\trealattr._ul4_needsobject = attr._ul4_needsobject;\n\t\t\trealattr._ul4_needscontext = attr._ul4_needscontext;\n\t\t\treturn realattr;\n\t\t}\n\t\telse\n\t\t\treturn obj.get(attrname);\n\t},\n\n\tget: function get(obj, key, default_=null)\n\t{\n\t\tif (obj.has(key))\n\t\t\treturn obj.get(key);\n\t\treturn default_;\n\t},\n\n\titems: function items(obj)\n\t{\n\t\tlet result = [];\n\t\tobj.forEach(function(value, key) {\n\t\t\tresult.push([key, value]);\n\t\t});\n\t\treturn result;\n\t},\n\n\tvalues: function values(obj)\n\t{\n\t\tlet result = [];\n\t\tobj.forEach(function(value, key) {\n\t\t\tresult.push(value);\n\t\t});\n\t\treturn result;\n\t},\n\n\tupdate: function update(obj, other, kwargs)\n\t{\n\t\treturn _update(obj, other, kwargs);\n\t},\n\n\tclear: function clear(obj)\n\t{\n\t\tobj.clear();\n\t\treturn null;\n\t},\n\n\tpop: function pop(obj, key, default_=Object)\n\t{\n\t\tif (!obj.has(key))\n\t\t{\n\t\t\tif (default_ === Object)\n\t\t\t\tthrow new KeyError(obj, key);\n\t\t\telse\n\t\t\t\treturn default_;\n\t\t}\n\t\tlet result = obj.get(key);\n\t\tobj.delete(key);\n\t\treturn result;\n\t}\n});\n\nexpose(MapProtocol.get, [\"key\", \"default=\", null]);\nexpose(MapProtocol.items, []);\nexpose(MapProtocol.values, []);\nexpose(MapProtocol.update, [\"*other\", \"**kwargs\"]);\nexpose(MapProtocol.clear, []);\nexpose(MapProtocol.pop, [\"key\", \"default=\", Object]);\n\nexport let SetProtocol = _extend(Protocol,\n{\n\tattrs: _makeset(\"add\", \"clear\"),\n\n\tul4type: function ul4type(obj)\n\t{\n\t\treturn \"set\";\n\t},\n\n\tadd: function add(obj, items)\n\t{\n\t\tfor (let item of items)\n\t\t\tobj.add(item);\n\t},\n\n\tclear: function clear(obj)\n\t{\n\t\tobj.clear();\n\t\treturn null;\n\t}\n});\n\nexpose(SetProtocol.add, [\"*items\"]);\nexpose(SetProtocol.clear, []);\n\nexport let DateProtocol = _extend(Protocol,\n{\n\tattrs: _makeset(\n\t\t\"weekday\",\n\t\t\"week\",\n\t\t\"calendar\",\n\t\t\"day\",\n\t\t\"month\",\n\t\t\"year\",\n\t\t\"mimeformat\",\n\t\t\"isoformat\",\n\t\t\"yearday\"\n\t),\n\n\tul4type: function ul4type(obj)\n\t{\n\t\treturn \"date\";\n\t},\n\n\tweekday: function weekday(obj)\n\t{\n\t\treturn DateTimeProtocol.weekday(obj._date);\n\t},\n\n\tcalendar: function calendar(obj, firstweekday=0, mindaysinfirstweek=4)\n\t{\n\t\treturn DateTimeProtocol.calendar(obj._date, firstweekday, mindaysinfirstweek);\n\t},\n\n\tweek: function week(obj, firstweekday=0, mindaysinfirstweek=4)\n\t{\n\t\treturn DateTimeProtocol.calendar(obj._date, firstweekday, mindaysinfirstweek)[1];\n\t},\n\n\tday: function day(obj)\n\t{\n\t\treturn obj._date.getDate();\n\t},\n\n\tmonth: function month(obj)\n\t{\n\t\treturn obj._date.getMonth()+1;\n\t},\n\n\tyear: function year(obj)\n\t{\n\t\treturn obj._date.getFullYear();\n\t},\n\n\tmimeformat: function mimeformat(obj)\n\t{\n\t\tlet weekdayname = [\"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\"];\n\t\tlet monthname = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\n\t\tlet d = obj._date;\n\n\t\treturn weekdayname[DateTimeProtocol.weekday(d)] + \", \" + _lpad(d.getDate(), \"0\", 2) + \" \" + monthname[d.getMonth()] + \" \" + d.getFullYear();\n\t},\n\n\tisoformat: function isoformat(obj)\n\t{\n\t\tlet d = obj._date;\n\t\treturn d.getFullYear() + \"-\" + _lpad((d.getMonth()+1).toString(), \"0\", 2) + \"-\" + _lpad(d.getDate().toString(), \"0\", 2);\n\t},\n\n\tyearday: function yearday(obj)\n\t{\n\t\treturn DateTimeProtocol.yearday(obj._date);\n\t}\n});\n\nexpose(DateProtocol.weekday, []);\nexpose(DateProtocol.calendar, [\"firstweekday=\", 0, \"mindaysinfirstweek=\", 4]);\nexpose(DateProtocol.week, [\"firstweekday=\", 0, \"mindaysinfirstweek=\", 4]);\nexpose(DateProtocol.day, []);\nexpose(DateProtocol.month, []);\nexpose(DateProtocol.year, []);\nexpose(DateProtocol.mimeformat, []);\nexpose(DateProtocol.isoformat, []);\nexpose(DateProtocol.yearday, []);\n\n\nexport let DateTimeProtocol = _extend(Protocol,\n{\n\tattrs: _makeset(\n\t\t\"weekday\",\n\t\t\"week\",\n\t\t\"calendar\",\n\t\t\"day\",\n\t\t\"month\",\n\t\t\"year\",\n\t\t\"hour\",\n\t\t\"minute\",\n\t\t\"second\",\n\t\t\"microsecond\",\n\t\t\"mimeformat\",\n\t\t\"isoformat\",\n\t\t\"yearday\"\n\t),\n\n\tul4type: function ul4type(obj)\n\t{\n\t\treturn \"datetime\";\n\t},\n\n\tweekday: function weekday(obj)\n\t{\n\t\tlet d = obj.getDay();\n\t\treturn d ? d-1 : 6;\n\t},\n\n\tcalendar: function calendar(obj, firstweekday=0, mindaysinfirstweek=4)\n\t{\n\t\t// Normalize parameters\n\t\tfirstweekday = _mod(firstweekday, 7);\n\t\tif (mindaysinfirstweek < 1)\n\t\t\tmindaysinfirstweek = 1;\n\t\telse if (mindaysinfirstweek > 7)\n\t\t\tmindaysinfirstweek = 7;\n\n\t\t// ``obj`` might be in the first week of the next year, or last week of\n\t\t// the previous year, so we might have to try those too.\n\t\tfor (let offset = +1; offset >= -1; --offset)\n\t\t{\n\t\t\tlet year = obj.getFullYear() + offset;\n\t\t\t// ``refdate`` will always be in week 1\n\t\t\tlet refDate = new Date(year, 0, mindaysinfirstweek);\n\t\t\t// Go back to the start of ``refdate``s week (i.e. day 1 of week 1)\n\t\t\tlet weekDayDiff = _mod(DateTimeProtocol.weekday(refDate) - firstweekday, 7);\n\t\t\tlet weekStartYear = refDate.getFullYear();\n\t\t\tlet weekStartMonth = refDate.getMonth();\n\t\t\tlet weekStartDay = refDate.getDate() - weekDayDiff;\n\t\t\tlet weekStart = new Date(weekStartYear, weekStartMonth, weekStartDay);\n\t\t\t// Is our date ``obj`` at or after day 1 of week 1?\n\t\t\tif (obj.getTime() >= weekStart.getTime())\n\t\t\t{\n\t\t\t\tlet diff = SubAST.prototype._do(obj, weekStart);\n\t\t\t\t// Add 1, because the first week is week 1, not week 0\n\t\t\t\tlet week = Math.floor(diff.days()/7) + 1;\n\t\t\t\treturn [year, week, DateTimeProtocol.weekday(obj)];\n\t\t\t}\n\t\t}\n\t},\n\n\tweek: function week(obj, firstweekday=0, mindaysinfirstweek=4)\n\t{\n\t\treturn DateTimeProtocol.calendar(obj, firstweekday, mindaysinfirstweek)[1];\n\t},\n\n\tday: function day(obj)\n\t{\n\t\treturn obj.getDate();\n\t},\n\n\tmonth: function month(obj)\n\t{\n\t\treturn obj.getMonth()+1;\n\t},\n\n\tyear: function year(obj)\n\t{\n\t\treturn obj.getFullYear();\n\t},\n\n\thour: function hour(obj)\n\t{\n\t\treturn obj.getHours();\n\t},\n\n\tminute: function minute(obj)\n\t{\n\t\treturn obj.getMinutes();\n\t},\n\n\tsecond: function second(obj)\n\t{\n\t\treturn obj.getSeconds();\n\t},\n\n\tmicrosecond: function microsecond(obj)\n\t{\n\t\treturn obj.getMilliseconds() * 1000;\n\t},\n\n\tmimeformat: function mimeformat(obj)\n\t{\n\t\tlet weekdayname = [\"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\"];\n\t\tlet monthname = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\n\n\t\treturn weekdayname[DateTimeProtocol.weekday(obj)] + \", \" + _lpad(obj.getDate(), \"0\", 2) + \" \" + monthname[obj.getMonth()] + \" \" + obj.getFullYear() + \" \" + _lpad(obj.getHours(), \"0\", 2) + \":\" + _lpad(obj.getMinutes(), \"0\", 2) + \":\" + _lpad(obj.getSeconds(), \"0\", 2) + \" GMT\";\n\t},\n\n\tisoformat: function isoformat(obj)\n\t{\n\t\tlet year = obj.getFullYear();\n\t\tlet month = obj.getMonth()+1;\n\t\tlet day = obj.getDate();\n\t\tlet hour = obj.getHours();\n\t\tlet minute = obj.getMinutes();\n\t\tlet second = obj.getSeconds();\n\t\tlet ms = obj.getMilliseconds();\n\t\tlet result = year + \"-\" + _lpad(month.toString(), \"0\", 2) + \"-\" + _lpad(day.toString(), \"0\", 2) + \"T\" + _lpad(hour.toString(), \"0\", 2) + \":\" + _lpad(minute.toString(), \"0\", 2) + \":\" + _lpad(second.toString(), \"0\", 2);\n\t\tif (ms)\n\t\t\tresult += \".\" + _lpad(ms.toString(), \"0\", 3) + \"000\";\n\t\treturn result;\n\t},\n\n\tyearday: function yearday(obj)\n\t{\n\t\tlet leap = _isleap(obj) ? 1 : 0;\n\t\tlet day = obj.getDate();\n\t\tswitch (obj.getMonth())\n\t\t{\n\t\t\tcase 0:\n\t\t\t\treturn day;\n\t\t\tcase 1:\n\t\t\t\treturn 31 + day;\n\t\t\tcase 2:\n\t\t\t\treturn 31 + 28 + leap + day;\n\t\t\tcase 3:\n\t\t\t\treturn 31 + 28 + leap + 31 + day;\n\t\t\tcase 4:\n\t\t\t\treturn 31 + 28 + leap + 31 + 30 + day;\n\t\t\tcase 5:\n\t\t\t\treturn 31 + 28 + leap + 31 + 30 + 31 + day;\n\t\t\tcase 6:\n\t\t\t\treturn 31 + 28 + leap + 31 + 30 + 31 + 30 + day;\n\t\t\tcase 7:\n\t\t\t\treturn 31 + 28 + leap + 31 + 30 + 31 + 30 + 31 + day;\n\t\t\tcase 8:\n\t\t\t\treturn 31 + 28 + leap + 31 + 30 + 31 + 30 + 31 + 31 + day;\n\t\t\tcase 9:\n\t\t\t\treturn 31 + 28 + leap + 31 + 30 + 31 + 30 + 31 + 31 + 30 + day;\n\t\t\tcase 10:\n\t\t\t\treturn 31 + 28 + leap + 31 + 30 + 31 + 30 + 31 + 31 + 30 + 31 + day;\n\t\t\tcase 11:\n\t\t\t\treturn 31 + 28 + leap + 31 + 30 + 31 + 30 + 31 + 31 + 30 + 31 + 30 + day;\n\t\t}\n\t}\n});\n\nexpose(DateTimeProtocol.weekday, []);\nexpose(DateTimeProtocol.calendar, [\"firstweekday=\", 0, \"mindaysinfirstweek=\", 4]);\nexpose(DateTimeProtocol.week, [\"firstweekday=\", 0, \"mindaysinfirstweek=\", 4]);\nexpose(DateTimeProtocol.day, []);\nexpose(DateTimeProtocol.month, []);\nexpose(DateTimeProtocol.year, []);\nexpose(DateTimeProtocol.hour, []);\nexpose(DateTimeProtocol.minute, []);\nexpose(DateTimeProtocol.second, []);\nexpose(DateTimeProtocol.microsecond, []);\nexpose(DateTimeProtocol.mimeformat, []);\nexpose(DateTimeProtocol.isoformat, []);\nexpose(DateTimeProtocol.yearday, []);\n\n\nexport let ObjectProtocol = _extend(Protocol,\n{\n\tattrs: _makeset(\"get\", \"items\", \"values\", \"update\", \"clear\"),\n\n\tul4type: function ul4type(obj)\n\t{\n\t\treturn \"dict\";\n\t},\n\n\tgetattr: function getattr(obj, attrname)\n\t{\n\t\tlet result;\n\t\tif (obj && typeof(obj.__getattr__) === \"function\") // test this before the generic object test\n\t\t\tresult = obj.__getattr__(attrname);\n\t\telse\n\t\t\tresult = obj[attrname];\n\t\tif (typeof(result) !== \"function\")\n\t\t\treturn result;\n\t\tlet realresult = function(...args) {\n\t\t\t// We can use ``apply`` here, as we know that ``obj`` is a real object.\n\t\t\treturn result.apply(obj, args);\n\t\t};\n\t\trealresult._ul4_name = result._ul4_name || result.name;\n\t\trealresult._ul4_signature = result._ul4_signature;\n\t\trealresult._ul4_needsobject = result._ul4_needsobject;\n\t\trealresult._ul4_needscontext = result._ul4_needscontext;\n\t\treturn realresult;\n\t},\n\n\tget: function get(obj, key, default_=null)\n\t{\n\t\tlet result = obj[key];\n\t\tif (result === undefined)\n\t\t\treturn default_;\n\t\treturn result;\n\t},\n\n\titems: function items(obj)\n\t{\n\t\tlet result = [];\n\t\tfor (let key in obj)\n\t\t\tresult.push([key, obj[key]]);\n\t\treturn result;\n\t},\n\n\tvalues: function values(obj)\n\t{\n\t\tlet result = [];\n\t\tfor (let key in obj)\n\t\t\tresult.push(obj[key]);\n\t\treturn result;\n\t},\n\n\tclear: function clear(obj)\n\t{\n\t\tfor (let key in obj)\n\t\t\tdelete obj[key];\n\t}\n});\n\nexpose(ObjectProtocol.get, [\"key\", \"default=\", null]);\nexpose(ObjectProtocol.items, []);\nexpose(ObjectProtocol.values, []);\nexpose(ObjectProtocol.clear, []);\n\n\nexport class Context\n{\n\tconstructor(vars, globals)\n\t{\n\t\tthis.vars = vars || {};\n\t\tthis.globals = _extend(functions, globals);\n\t\tthis.indents = [];\n\t\tthis.escapes = [];\n\t\tthis._output = [];\n\t}\n\n\t/* Return a clone of the ``Context``, but with a fresh empty ``vars`` objects that inherits from the previous one.\n\t * This is used by the various comprehensions to avoid leaking loop variables.\n\t */\n\tinheritvars()\n\t{\n\t\tlet context = Object.create(this);\n\t\tcontext.vars = Object.create(this.vars);\n\t\treturn context;\n\t}\n\n\t/* Return a clone of the ``Context`` with one additional indentation (this is used by ``RenderAST``) */\n\twithindent(indent)\n\t{\n\t\tlet context = Object.create(this);\n\t\tif (indent !== null)\n\t\t{\n\t\t\tcontext.indents = this.indents.slice();\n\t\t\tcontext.indents.push(indent);\n\t\t}\n\t\treturn context;\n\t}\n\n\t/* Return a clone of the ``Context`` with the output buffer replaced (this is used by ``renders`` to collect the output in a separate buffer) */\n\treplaceoutput()\n\t{\n\t\tlet context = Object.create(this);\n\t\tcontext._output = [];\n\t\treturn context;\n\t}\n\n\treplacevars(vars)\n\t{\n\t\tlet context = Object.create(this);\n\t\tcontext.vars = vars;\n\t\treturn context;\n\t}\n\n\toutput(value)\n\t{\n\t\tfor (let escape of this.escapes)\n\t\t\tvalue = escape(value);\n\t\tthis._output.push(value);\n\t}\n\n\tgetoutput()\n\t{\n\t\treturn this._output.join(\"\");\n\t}\n\n\tget(name)\n\t{\n\t\tlet result = this.vars[name];\n\t\tif (result === undefined)\n\t\t\tresult = this.globals[name];\n\t\treturn result;\n\t}\n\n\tset(name, value)\n\t{\n\t\tthis.vars[name] = value;\n\t}\n};\n\n/// Exceptions\n\n// Note that extending ``Error`` doesn't work, so we do it the \"classic\" way\nexport function Exception(message, fileName, lineNumber)\n{\n\tlet instance = new Error(message, fileName, lineNumber);\n\tif (Object.setPrototypeOf)\n\t\tObject.setPrototypeOf(instance, Object.getPrototypeOf(this));\n\telse\n\t\tinstance.__proto = this;\n\tinstance.__id__ = _nextid++;\n\tinstance.context = null;\n\treturn instance;\n};\n\nException.prototype = Object.create(Error.prototype, {\n\tconstructor: {\n\t\tvalue: Error,\n\t\tenumerable: false,\n\t\twritable: true,\n\t\tconfigurable: true\n\t}\n});\n\nif (Object.setPrototypeOf)\n\tObject.setPrototypeOf(Exception, Error);\nelse\n\tException.__proto__ = Error;\n\nException.prototype.__getattr__ = function __getattr__(attrname)\n{\n\tswitch (attrname)\n\t{\n\t\tcase \"context\":\n\t\t\treturn this.context;\n\t\tdefault:\n\t\t\tthrow new AttributeError(this, attrname);\n\t}\n};\n\n// Exceptions used internally by UL4 for flow control\nexport class InternalException extends Exception\n{\n};\n\n// Control flow exceptions\nexport class ReturnException extends InternalException\n{\n\tconstructor(result)\n\t{\n\t\tsuper(\"return\");\n\t\tthis.result = result;\n\t}\n};\n\nexport class BreakException extends InternalException\n{\n\tconstructor()\n\t{\n\t\tsuper(\"break\");\n\t}\n};\n\nexport class ContinueException extends InternalException\n{\n\tconstructor()\n\t{\n\t\tsuper(\"continue\");\n\t}\n};\n\n// Real exceptions raised by various parts of UL4\nexport class SyntaxError extends Exception\n{\n};\n\nexport class LValueRequiredError extends SyntaxError\n{\n\tconstructor()\n\t{\n\t\tsuper(\"lvalue required\");\n\t}\n};\n\nexport class TypeError extends Exception\n{\n};\n\nexport class ValueError extends Exception\n{\n};\n\nexport class ArgumentError extends Exception\n{\n};\n\nexport class NotSubscriptableError extends Exception\n{\n\tconstructor(obj)\n\t{\n\t\tsuper(\"Object of type \" + _type(obj) + \" is not subscriptable\");\n\t\tthis.obj = obj;\n\t}\n\n\ttoString()\n\t{\n\t\treturn \"Object of type \" + _type(this.obj) + \" is not subscriptable\";\n\t}\n};\n\nexport class ZeroDivisionError extends Exception\n{\n\tconstructor()\n\t{\n\t\tsuper(\"division by zero\");\n\t}\n};\n\nexport class IndexError extends Exception\n{\n\tconstructor(obj, index)\n\t{\n\t\tsuper(\"index \" + _repr(index) + \" out of range\");\n\t\tthis.obj = obj;\n\t\tthis.index = index;\n\t}\n\n\ttoString()\n\t{\n\t\treturn \"index \" + this.index + \" out of range for \" + _type(this.obj);\n\t}\n};\n\nexport class AttributeError extends Exception\n{\n\tconstructor(obj, attrname)\n\t{\n\t\tsuper(\"object of type \" + _type(obj) + \" has no attribute \" + _repr(attrname));\n\t\tthis.obj = obj;\n\t\tthis.attrname = attrname;\n\t}\n};\n\nexport class KeyError extends Exception\n{\n\tconstructor(obj, key)\n\t{\n\t\tsuper(\"key \"  + _repr(key) + \" not found in object of type \" + _type(obj));\n\t\tthis.obj = obj;\n\t\tthis.key = key;\n\t}\n};\n\nexport class NotImplementedError extends Exception\n{\n};\n\n/// Exception that wraps other exceptions while they bubble up the stack\nexport class LocationError extends Exception\n{\n\tconstructor(location)\n\t{\n\t\tsuper(\"nested exception in \" + _repr(location));\n\t\tthis.location = location;\n\t}\n\n\t_templateprefix()\n\t{\n\t\tlet template = this.location.template;\n\t\tlet out = [];\n\t\tif (template.parenttemplate !== null)\n\t\t\tout.push(\"in local template \");\n\t\telse\n\t\t\tout.push(\"in template \");\n\t\tlet first = true;\n\t\twhile (template != null)\n\t\t{\n\t\t\tif (first)\n\t\t\t\tfirst = false;\n\t\t\telse\n\t\t\t\tout.push(\" in \");\n\t\t\tout.push(template.name ? _repr(template.name) : \"(unnamed)\");\n\t\t\ttemplate = template.parenttemplate;\n\t\t}\n\t\treturn out.join(\"\");\n\t}\n\n\ttoString()\n\t{\n\t\tlet template = this.location.template;\n\t\tlet templateprefix = this._templateprefix();\n\n\t\tlet prefix = this.location.startsourceprefix;\n\t\tlet code = this.location.startsource;\n\t\tlet suffix = this.location.startsourcesuffix;\n\t\tprefix = _repr(prefix).slice(1, -1);\n\t\tcode = _repr(code).slice(1, -1);\n\t\tsuffix = _repr(suffix).slice(1, -1);\n\n\t\tlet text = prefix + code + suffix;\n\t\tlet underline = _str_repeat(\"\\u00a0\", prefix.length) + _str_repeat(\"~\", code.length);\n\n\t\tlet pos = \"offset \" + this.location.pos.start + \":\" + this.location.pos.stop + \"; line \" + this.location.startline + \"; col \" + this.location.startcol;\n\n\t\tlet message = templateprefix + \": \" + pos + \"\\n\" + text + \"\\n\" + underline;\n\t\treturn message;\n\t}\n\n\t__getattr__(attrname)\n\t{\n\t\tswitch (attrname)\n\t\t{\n\t\t\tcase \"context\":\n\t\t\t\treturn this.context;\n\t\t\tcase \"location\":\n\t\t\t\treturn this.location;\n\t\t\tdefault:\n\t\t\t\tthrow new AttributeError(this, attrname);\n\t\t}\n\t}\n};\n\n/// Classes for the syntax tree\nexport class AST extends Proto\n{\n\tconstructor(template, startpos, stoppos=null)\n\t{\n\t\tsuper();\n\t\tthis.template = template;\n\t\tthis.startpos = startpos;\n\t\tthis._startline = null;\n\t\tthis._startcol = null;\n\t\tthis.stoppos = stoppos;\n\t\tthis._stopline = null;\n\t\tthis._stopcol = null;\n\t}\n\n\tget startline()\n\t{\n\t\tif (this._startline === null)\n\t\t\t[this._startline, this._startcol] = _lineColFromPos(this.template._source, this.startpos.start);\n\t\treturn this._startline;\n\t}\n\n\tget startcol()\n\t{\n\t\tif (this._startcol === null)\n\t\t\t[this._startline, this._startcol] = _lineColFromPos(this.template._source, this.startpos.start);\n\t\treturn this._startcol;\n\t}\n\n\tget startsource()\n\t{\n\t\treturn this.startpos.of(this.template._source);\n\t}\n\n\tget startsourceprefix()\n\t{\n\t\treturn _sourceprefix(this.template._source, this.startpos.start);\n\t}\n\n\tget startsourcesuffix()\n\t{\n\t\treturn _sourcesuffix(this.template._source, this.startpos.stop);\n\t}\n\n\tget fullsource()\n\t{\n\t\treturn this.template._source;\n\t}\n\n\tget pos()\n\t{\n\t\tif (this.stoppos === null)\n\t\t\treturn this.startpos;\n\t\telse\n\t\t\treturn new slice(this.startpos.start, this.stoppos.stop);\n\t}\n\n\tget source()\n\t{\n\t\treturn this.pos.of(this.template._source);\n\t}\n\n\tget sourceprefix()\n\t{\n\t\treturn _sourceprefix(this.template._source, this.pos.start);\n\t}\n\n\tget sourcesuffix()\n\t{\n\t\treturn _sourcesuffix(this.template._source, this.pos.stop);\n\t}\n\n\tget stopline()\n\t{\n\t\tif (this._stopline === null)\n\t\t\t[this._stopline, this._stopcol] = _lineColFromPos(this.template._source, this.stoppos.stop);\n\t\treturn this._stopline;\n\t}\n\n\tget stopcol()\n\t{\n\t\tif (this._stopcol === null)\n\t\t\t[this._stopline, this._stopcol] = _lineColFromPos(this.template._source, this.stoppos.stop);\n\t\treturn this._stopcol;\n\t}\n\n\tget stopsource()\n\t{\n\t\treturn this.stoppos != null ? this.stoppos.of(this.template._source) : null;\n\t}\n\n\tget stopsourceprefix()\n\t{\n\t\treturn this.stoppos != null ? _sourceprefix(this.template._source, this.stoppos.start) : null;\n\t}\n\n\tget stopsourcesuffix()\n\t{\n\t\treturn this.stoppos != null ? _sourcesuffix(this.template._source, this.stoppos.stop) : null;\n\t}\n\n\t__getattr__(attrname)\n\t{\n\t\tif (\n\t\t\tattrname === \"type\" ||\n\t\t\tattrname === \"startpos\" ||\n\t\t\tattrname === \"startline\" ||\n\t\t\tattrname === \"startcol\" ||\n\t\t\tattrname === \"startsource\" ||\n\t\t\tattrname === \"startsourceprefix\" ||\n\t\t\tattrname === \"startsourcesuffix\" ||\n\t\t\tattrname === \"pos\" ||\n\t\t\tattrname === \"source\" ||\n\t\t\tattrname === \"sourceprefix\" ||\n\t\t\tattrname === \"sourcesuffix\" ||\n\t\t\tattrname === \"fullsource\"\n\t\t)\n\t\t\treturn this[attrname];\n\t\telse if (this._ul4onattrs.indexOf(attrname) >= 0)\n\t\t\treturn this[attrname];\n\t\tthrow new AttributeError(this, attrname);\n\t}\n\n\t__setitem__(attrname, value)\n\t{\n\t\tthrow new TypeError(\"object is immutable\");\n\t}\n\n\t__str__()\n\t{\n\t\tlet out = [];\n\t\tthis._str(out);\n\t\treturn _formatsource(out);\n\t}\n\n\t__repr__()\n\t{\n\t\tlet out = [];\n\t\tthis._repr(out);\n\t\treturn _formatsource(out);\n\t}\n\n\t_decorate_exception(exc)\n\t{\n\t\twhile (exc.context !== undefined && exc.context !== null)\n\t\t\texc = exc.context;\n\t\texc.context = new LocationError(this);\n\t}\n\n\t_handle_eval(context)\n\t{\n\t\ttry\n\t\t{\n\t\t\treturn this._eval(context);\n\t\t}\n\t\tcatch (exc)\n\t\t{\n\t\t\tif (!(exc instanceof InternalException) && !(exc instanceof LocationError))\n\t\t\t\tthis._decorate_exception(exc);\n\t\t\tthrow exc;\n\t\t}\n\t}\n\n\t_handle_eval_set(context, value)\n\t{\n\t\ttry\n\t\t{\n\t\t\treturn this._eval_set(context, value);\n\t\t}\n\t\tcatch (exc)\n\t\t{\n\t\t\tif (!(exc instanceof LocationError))\n\t\t\t\tthis._decorate_exception(exc);\n\t\t\tthrow exc;\n\t\t}\n\t}\n\n\t_eval_set(context, value)\n\t{\n\t\tthrow new LValueRequiredError();\n\t}\n\n\t_handle_eval_modify(context, operator, value)\n\t{\n\t\ttry\n\t\t{\n\t\t\treturn this._eval_modify(context, operator, value);\n\t\t}\n\t\tcatch (exc)\n\t\t{\n\t\t\tif (!(exc instanceof LocationError))\n\t\t\t\tthis._decorate_exception(exc);\n\t\t\tthrow exc;\n\t\t}\n\t}\n\n\t_eval_modify(context, operator, value)\n\t{\n\t\tthrow new LValueRequiredError();\n\t}\n\n\t_repr(out)\n\t{\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(this.source.replace(/\\r?\\n/g, ' '));\n\t}\n\n\tul4ondump(encoder)\n\t{\n\t\tfor (let attrname of this._ul4onattrs)\n\t\t\tencoder.dump(this[attrname]);\n\t}\n\n\tul4onload(decoder)\n\t{\n\t\tfor (let attrname of this._ul4onattrs)\n\t\t\tthis[attrname] = decoder.load();\n\t}\n};\n\n// used in ul4ondump/ul4ondump to automatically dump these attributes\nAST.prototype._ul4onattrs = [\"template\", \"startpos\"];\n\nexport class TextAST extends AST\n{\n\tconstructor(template, pos)\n\t{\n\t\tsuper(template, pos);\n\t}\n\n\tget text()\n\t{\n\t\treturn this.source;\n\t}\n\n\t_eval(context)\n\t{\n\t\tcontext.output(this.text);\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(\"text \");\n\t\tout.push(_repr(this.text));\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<TextAST \");\n\t\tout.push(_repr(this.text));\n\t\tout.push(\">\");\n\t}\n};\n\nexport class IndentAST extends TextAST\n{\n\tconstructor(template, pos, text)\n\t{\n\t\tsuper(template, pos);\n\t\tthis._text = text;\n\t}\n\n\tget text()\n\t{\n\t\tif (this.template !== undefined)\n\t\t\treturn this._text === null ? this.source : this._text;\n\t\telse\n\t\t\treturn null;\n\t}\n\n\t_eval(context)\n\t{\n\t\tfor (let indent of context.indents)\n\t\t\tcontext.output(indent);\n\t\tcontext.output(this.text);\n\t}\n\n\tul4ondump(encoder)\n\t{\n\t\tsuper.ul4ondump(encoder);\n\n\t\tif (this._text === this.source)\n\t\t\tencoder.dump(null);\n\t\telse\n\t\t\tencoder.dump(this._text);\n\t}\n\n\tul4onload(decoder)\n\t{\n\t\tsuper.ul4onload(decoder);\n\t\tthis._text = decoder.load();\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(\"indent \");\n\t\tout.push(_repr(this.text));\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<IndentAST \");\n\t\tout.push(_repr(this.text));\n\t\tout.push(\">\");\n\t}\n};\n\nexport class LineEndAST extends TextAST\n{\n\t_str(out)\n\t{\n\t\tout.push(\"lineend \");\n\t\tout.push(_repr(this.text));\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<LineEndAST \");\n\t\tout.push(_repr(this.text));\n\t\tout.push(\">\");\n\t}\n};\n\nexport class CodeAST extends AST\n{\n};\n\nexport class ConstAST extends CodeAST\n{\n\tconstructor(template, pos, value)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.value = value;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<ConstAST value=\");\n\t\tout.push(_repr(this.value));\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\treturn this.value;\n\t}\n};\n\nConstAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"value\"]);\n\nexport class ItemArgBase extends CodeAST\n{\n\t_handle_eval_list(context, result)\n\t{\n\t\ttry\n\t\t{\n\t\t\treturn this._eval_list(context, result);\n\t\t}\n\t\tcatch (exc)\n\t\t{\n\t\t\tif (!(exc instanceof InternalException) && !(exc instanceof LocationError))\n\t\t\t\tthis._decorate_exception(exc);\n\t\t\tthrow exc;\n\t\t}\n\t}\n\n\t_handle_eval_set(context, result)\n\t{\n\t\ttry\n\t\t{\n\t\t\treturn this._eval_set(context, result);\n\t\t}\n\t\tcatch (exc)\n\t\t{\n\t\t\tif (!(exc instanceof InternalException) && !(exc instanceof LocationError))\n\t\t\t\tthis._decorate_exception(exc);\n\t\t\tthrow exc;\n\t\t}\n\t}\n\n\t_handle_eval_dict(context, result)\n\t{\n\t\ttry\n\t\t{\n\t\t\treturn this._eval_dict(context, result);\n\t\t}\n\t\tcatch (exc)\n\t\t{\n\t\t\tif (!(exc instanceof InternalException) && !(exc instanceof LocationError))\n\t\t\t\tthis._decorate_exception(exc);\n\t\t\tthrow exc;\n\t\t}\n\t}\n\n\t_handle_eval_call(context, args, kwargs)\n\t{\n\t\ttry\n\t\t{\n\t\t\treturn this._eval_call(context, args, kwargs);\n\t\t}\n\t\tcatch (exc)\n\t\t{\n\t\t\tif (!(exc instanceof InternalException) && !(exc instanceof LocationError))\n\t\t\t\tthis._decorate_exception(exc);\n\t\t\tthrow exc;\n\t\t}\n\t}\n};\n\nexport class SeqItemAST extends ItemArgBase\n{\n\tconstructor(template, pos, value)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.value = value;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<SeqItemAST value=\");\n\t\tout.push(_repr(this.value));\n\t\tout.push(\">\");\n\t}\n\n\t_eval_list(context, result)\n\t{\n\t\tlet value = this.value._handle_eval(context);\n\t\tresult.push(value);\n\t}\n\n\t_eval_set(context, result)\n\t{\n\t\tlet value = this.value._handle_eval(context);\n\t\tresult.add(value);\n\t}\n};\n\nSeqItemAST.prototype._ul4onattrs = ItemArgBase.prototype._ul4onattrs.concat([\"value\"]);\n\nexport class UnpackSeqItemAST extends ItemArgBase\n{\n\tconstructor(template, pos, value)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.value = value;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<UnpackSeqItemAST value=\");\n\t\tout.push(_repr(this.value));\n\t\tout.push(\">\");\n\t}\n\n\t_eval_list(context, result)\n\t{\n\t\tlet value = this.value._handle_eval(context);\n\t\tfor (let iter = _iter(value);;)\n\t\t{\n\t\t\tlet item = iter.next();\n\t\t\tif (item.done)\n\t\t\t\tbreak;\n\t\t\tresult.push(item.value);\n\t\t}\n\t}\n\n\t_eval_set(context, result)\n\t{\n\t\tlet value = this.value._handle_eval(context);\n\t\tfor (let iter = _iter(value);;)\n\t\t{\n\t\t\tlet item = iter.next();\n\t\t\tif (item.done)\n\t\t\t\tbreak;\n\t\t\tresult.add(item.value);\n\t\t}\n\t}\n};\n\nUnpackSeqItemAST.prototype._ul4onattrs = ItemArgBase.prototype._ul4onattrs.concat([\"value\"]);\n\nexport class DictItemAST extends ItemArgBase\n{\n\tconstructor(template, pos, key, value)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.key = key;\n\t\tthis.value = value;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<DictItemAST key=\");\n\t\tout.push(_repr(this.key));\n\t\tout.push(\" value=\");\n\t\tout.push(_repr(this.value));\n\t\tout.push(\">\");\n\t}\n\n\t_eval_dict(context, result)\n\t{\n\t\tlet key = this.key._handle_eval(context);\n\t\tlet value = this.value._handle_eval(context);\n\t\t_setmap(result, key, value);\n\t}\n};\n\nDictItemAST.prototype._ul4onattrs = ItemArgBase.prototype._ul4onattrs.concat([\"key\", \"value\"]);\n\nexport class UnpackDictItemAST extends ItemArgBase\n{\n\tconstructor(template, pos, item)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.item = item;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<UnpackDictItemAST item=\");\n\t\tout.push(_repr(this.item));\n\t\tout.push(\">\");\n\t}\n\n\t_eval_dict(context, result)\n\t{\n\t\tlet item = this.item._handle_eval(context);\n\t\tif (_islist(item))\n\t\t{\n\t\t\tfor (let subitem of item)\n\t\t\t{\n\t\t\t\tif (!_islist(subitem) || subitem.length != 2)\n\t\t\t\t\tthrow new ArgumentError(\"** requires a list of (key, value) pairs\");\n\t\t\t\t_setmap(result, subitem[0], subitem[1]);\n\t\t\t}\n\t\t}\n\t\telse if (_ismap(item))\n\t\t{\n\t\t\titem.forEach(function(value, key) {\n\t\t\t\t_setmap(result, key, value);\n\t\t\t});\n\t\t}\n\t\telse if (_isobject(item))\n\t\t{\n\t\t\tfor (let key in item)\n\t\t\t\t_setmap(result, key, item[key]);\n\t\t}\n\t}\n};\n\nUnpackDictItemAST.prototype._ul4onattrs = ItemArgBase.prototype._ul4onattrs.concat([\"item\"]);\n\nexport class PosArgAST extends ItemArgBase\n{\n\tconstructor(template, pos, value)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.value = value;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<PosArgAST value=\");\n\t\tthis.value._repr(out);\n\t\tout.push(\">\");\n\t}\n\n\t_eval_call(context, args, kwargs)\n\t{\n\t\tlet value = this.value._handle_eval(context);\n\t\targs.push(value);\n\t}\n};\n\nPosArgAST.prototype._ul4onattrs = ItemArgBase.prototype._ul4onattrs.concat([\"value\"]);\n\nexport class KeywordArgAST extends ItemArgBase\n{\n\tconstructor(template, pos, name, value)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.name = name;\n\t\tthis.value = value;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<KeywordArgAST name=\");\n\t\tout.push(_repr(this.name));\n\t\tout.push(\" value=\");\n\t\tthis.value._repr(out);\n\t\tout.push(\">\");\n\t}\n\n\t_eval_call(context, args, kwargs)\n\t{\n\t\tif (kwargs.hasOwnProperty(this.name))\n\t\t\tthrow new ArgumentError(\"duplicate keyword argument \" + this.name);\n\t\tlet value = this.value._handle_eval(context);\n\t\tkwargs[this.name] = value;\n\t}\n};\n\nKeywordArgAST.prototype._ul4onattrs = ItemArgBase.prototype._ul4onattrs.concat([\"name\", \"value\"]);\n\nexport class UnpackListArgAST extends ItemArgBase\n{\n\tconstructor(template, pos, item)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.item = item;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<UnpackListArgAST item=\");\n\t\tthis.item._repr(out);\n\t\tout.push(\">\");\n\t}\n\n\t_eval_call(context, args, kwargs)\n\t{\n\t\tlet item = this.item._handle_eval(context);\n\t\targs.push(...item);\n\t}\n};\n\nUnpackListArgAST.prototype._ul4onattrs = ItemArgBase.prototype._ul4onattrs.concat([\"item\"]);\n\nexport class UnpackDictArgAST extends ItemArgBase\n{\n\tconstructor(template, pos, item)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.item = item;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<UnpackDictArgAST item=\");\n\t\tthis.item._repr(out);\n\t\tout.push(\">\");\n\t}\n\n\t_eval_call(context, args, kwargs)\n\t{\n\t\tlet item = this.item._handle_eval(context);\n\t\tif (_islist(item))\n\t\t{\n\t\t\tfor (let subitem of item)\n\t\t\t{\n\t\t\t\tif (!_islist(subitem) || subitem.length != 2)\n\t\t\t\t\tthrow new ArgumentError(\"** requires a list of (key, value) pairs\");\n\t\t\t\tlet [key, value] = subitem;\n\t\t\t\tif (kwargs.hasOwnProperty(key))\n\t\t\t\t\tthrow new ArgumentError(\"duplicate keyword argument \" + key);\n\t\t\t\tkwargs[key] = value;\n\t\t\t}\n\t\t}\n\t\telse if (_ismap(item))\n\t\t{\n\t\t\titem.forEach(function(value, key) {\n\t\t\t\tif (kwargs.hasOwnProperty(key))\n\t\t\t\t\tthrow new ArgumentError(\"duplicate keyword argument \" + key);\n\t\t\t\tkwargs[key] = value;\n\t\t\t});\n\t\t}\n\t\telse if (_isobject(item))\n\t\t{\n\t\t\tfor (let key in item)\n\t\t\t{\n\t\t\t\tif (kwargs.hasOwnProperty(key))\n\t\t\t\t\tthrow new ArgumentError(\"duplicate keyword argument \" + key);\n\t\t\t\tkwargs[key] = item[key];\n\t\t\t}\n\t\t}\n\t}\n};\n\nUnpackDictArgAST.prototype._ul4onattrs = ItemArgBase.prototype._ul4onattrs.concat([\"item\"]);\n\nexport class ListAST extends CodeAST\n{\n\tconstructor(template, pos)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.items = [];\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<ListAST\");\n\t\tfor (let item of this.items)\n\t\t{\n\t\t\tout.push(\" \");\n\t\t\titem._repr(out);\n\t\t}\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet result = [];\n\t\tfor (let item of this.items)\n\t\t\titem._handle_eval_list(context, result);\n\t\treturn result;\n\t}\n};\n\nListAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"items\"]);\n\nexport class ListCompAST extends CodeAST\n{\n\tconstructor(template, pos, item, varname, container, condition)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.item = item;\n\t\tthis.varname = varname;\n\t\tthis.container = container;\n\t\tthis.condition = condition;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<ListCompAST\");\n\t\tout.push(\" item=\");\n\t\tthis.item._repr(out);\n\t\tout.push(\" varname=\");\n\t\tout.push(_repr(this.varname));\n\t\tout.push(\" container=\");\n\t\tthis.container._repr(out);\n\t\tif (this.condition !== null)\n\t\t{\n\t\t\tout.push(\" condition=\");\n\t\t\tthis.condition._repr(out);\n\t\t}\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet container = this.container._handle_eval(context);\n\n\t\tlet localcontext = context.inheritvars();\n\n\t\tlet result = [];\n\t\tfor (let iter = _iter(container);;)\n\t\t{\n\t\t\tlet item = iter.next();\n\t\t\tif (item.done)\n\t\t\t\tbreak;\n\t\t\tlet varitems = _unpackvar(this.varname, item.value);\n\t\t\tfor (let [lvalue, value] of varitems)\n\t\t\t\tlvalue._handle_eval_set(localcontext, value);\n\t\t\tif (this.condition === null || _bool(this.condition._handle_eval(localcontext)))\n\t\t\t\tresult.push(this.item._handle_eval(localcontext));\n\t\t}\n\t\treturn result;\n\t}\n};\n\nListCompAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"item\", \"varname\", \"container\", \"condition\"]);\n\nexport class SetAST extends CodeAST\n{\n\tconstructor(template, pos)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.items = [];\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<SetAST\");\n\t\tfor (let item of this.items)\n\t\t{\n\t\t\tout.push(\" \");\n\t\t\titem._repr(out);\n\t\t}\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet result = _emptyset();\n\n\t\tfor (let item of this.items)\n\t\t\titem._handle_eval_set(context, result);\n\n\t\treturn result;\n\t}\n};\n\nSetAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"items\"]);\n\nexport class SetCompAST extends CodeAST\n{\n\tconstructor(template, pos, item, varname, container, condition)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.item = item;\n\t\tthis.varname = varname;\n\t\tthis.container = container;\n\t\tthis.condition = condition;\n\t}\n\n\t__getattr__(attrname)\n\t{\n\t\tswitch (attrname)\n\t\t{\n\t\t\tcase \"item\":\n\t\t\t\treturn this.item;\n\t\t\tcase \"varname\":\n\t\t\t\treturn this.varname;\n\t\t\tcase \"container\":\n\t\t\t\treturn this.container;\n\t\t\tcase \"condition\":\n\t\t\t\treturn this.condition;\n\t\t\tdefault:\n\t\t\t\treturn super.__getattr__(attrname);\n\t\t}\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<SetCompAST\");\n\t\tout.push(\" item=\");\n\t\tthis.item._repr(out);\n\t\tout.push(\" varname=\");\n\t\tthis.varname._repr(out);\n\t\tout.push(\" container=\");\n\t\tthis.container._repr(out);\n\t\tif (this.condition !== null)\n\t\t{\n\t\t\tout.push(\" condition=\");\n\t\t\tthis.condition._repr(out);\n\t\t}\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet container = this.container._handle_eval(context);\n\n\t\tlet localcontext = context.inheritvars();\n\n\t\tlet result = _emptyset();\n\t\tfor (let iter = _iter(container);;)\n\t\t{\n\t\t\tlet item = iter.next();\n\t\t\tif (item.done)\n\t\t\t\tbreak;\n\t\t\tlet varitems = _unpackvar(this.varname, item.value);\n\t\t\tfor (let [lvalue, value] of varitems)\n\t\t\t\tlvalue._handle_eval_set(localcontext, value);\n\t\t\tif (this.condition === null || _bool(this.condition._handle_eval(localcontext)))\n\t\t\t\tresult.add(this.item._handle_eval(localcontext));\n\t\t}\n\n\t\treturn result;\n\t}\n};\n\nSetCompAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"item\", \"varname\", \"container\", \"condition\"]);\n\nexport class DictAST extends CodeAST\n{\n\tconstructor(template, pos)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.items = [];\n\t}\n\n\t__getattr__(attrname)\n\t{\n\t\tswitch (attrname)\n\t\t{\n\t\t\tcase \"items\":\n\t\t\t\treturn this.items;\n\t\t\tdefault:\n\t\t\t\treturn super.__getattr__(attrname);\n\t\t}\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<DictAST\");\n\t\tfor (let item of this.items)\n\t\t{\n\t\t\tout.push(\" \");\n\t\t\titem._repr(out);\n\t\t}\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet result = _emptymap();\n\t\tfor (let item of this.items)\n\t\t\titem._handle_eval_dict(context, result);\n\t\treturn result;\n\t}\n};\n\nDictAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"items\"]);\n\nexport class DictCompAST extends CodeAST\n{\n\tconstructor(template, pos, key, value, varname, container, condition)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.key = key;\n\t\tthis.value = value;\n\t\tthis.varname = varname;\n\t\tthis.container = container;\n\t\tthis.condition = condition;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<DictCompAST\");\n\t\tout.push(\" key=\");\n\t\tthis.key._repr(out);\n\t\tout.push(\" value=\");\n\t\tthis.value._repr(out);\n\t\tout.push(\" varname=\");\n\t\tthis.varname._repr(out);\n\t\tout.push(\" container=\");\n\t\tthis.container._repr(out);\n\t\tif (this.condition !== null)\n\t\t{\n\t\t\tout.push(\" condition=\");\n\t\t\tthis.condition._repr(out);\n\t\t}\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet container = this.container._handle_eval(context);\n\n\t\tlet localcontext = context.inheritvars();\n\n\t\tlet result = _emptymap();\n\n\t\tfor (let iter = _iter(container);;)\n\t\t{\n\t\t\tlet item = iter.next();\n\t\t\tif (item.done)\n\t\t\t\tbreak;\n\t\t\tlet varitems = _unpackvar(this.varname, item.value);\n\t\t\tfor (let [lvalue, value] of varitems)\n\t\t\t\tlvalue._handle_eval_set(localcontext, value);\n\t\t\tif (this.condition === null || _bool(this.condition._handle_eval(localcontext)))\n\t\t\t{\n\t\t\t\tlet key = this.key._handle_eval(localcontext);\n\t\t\t\tlet value = this.value._handle_eval(localcontext);\n\t\t\t\t_setmap(result, key, value);\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n};\n\nDictCompAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"key\", \"value\", \"varname\", \"container\", \"condition\"]);\n\nexport class GenExprAST extends CodeAST\n{\n\tconstructor(template, pos, item, varname, container, condition)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.item = item;\n\t\tthis.varname = varname;\n\t\tthis.container = container;\n\t\tthis.condition = condition;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<GenExprAST\");\n\t\tout.push(\" item=\");\n\t\tthis.item._repr(out);\n\t\tout.push(\" varname=\");\n\t\tthis.varname._repr(out);\n\t\tout.push(\" container=\");\n\t\tthis.container._repr(out);\n\t\tif (this.condition !== null)\n\t\t{\n\t\t\tout.push(\" condition=\");\n\t\t\tthis.condition._repr(out);\n\t\t}\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet container = this.container._handle_eval(context);\n\t\tlet iter = _iter(container);\n\n\t\tlet localcontext = context.inheritvars();\n\n\t\tlet self = this;\n\n\t\tlet result = {\n\t\t\tnext: function(){\n\t\t\t\twhile (true)\n\t\t\t\t{\n\t\t\t\t\tlet item = iter.next();\n\t\t\t\t\tif (item.done)\n\t\t\t\t\t\treturn item;\n\t\t\t\t\tlet varitems = _unpackvar(self.varname, item.value);\n\t\t\t\t\tfor (let [lvalue, value] of varitems)\n\t\t\t\t\t\tlvalue._handle_eval_set(localcontext, value);\n\t\t\t\t\tif (self.condition === null || _bool(self.condition._handle_eval(localcontext)))\n\t\t\t\t\t{\n\t\t\t\t\t\tlet value = self.item._handle_eval(localcontext);\n\t\t\t\t\t\treturn {value: value, done: false};\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\treturn result;\n\t}\n};\n\nGenExprAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"item\", \"varname\", \"container\", \"condition\"]);\n\nexport class VarAST extends CodeAST\n{\n\tconstructor(template, pos, name)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.name = name;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<VarAST name=\");\n\t\tout.push(_repr(this.name));\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\treturn this._get(context, this.name);\n\t}\n\n\t_eval_set(context, value)\n\t{\n\t\tthis._set(context, this.name, value);\n\t}\n\n\t_eval_modify(context, operator, value)\n\t{\n\t\tthis._modify(context, operator, this.name, value);\n\t}\n\n\t_get(context, name)\n\t{\n\t\treturn context.get(name);\n\t}\n\n\t_set(context, name, value)\n\t{\n\t\tcontext.set(name, value);\n\t}\n\n\t_modify(context, operator, name, value)\n\t{\n\t\tlet newvalue = operator._ido(context.get(name), value);\n\t\tcontext.set(name, newvalue);\n\t}\n};\n\nVarAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"name\"]);\n\nexport class UnaryAST extends CodeAST\n{\n\tconstructor(template, pos, obj)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.obj = obj;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<\");\n\t\tout.push(this.constructor.name);\n\t\tout.push(\" obj=\");\n\t\tthis.obj._repr(out);\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet obj = this.obj._handle_eval(context);\n\t\treturn this._do(obj);\n\t}\n};\n\nUnaryAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"obj\"]);\n\n// Negation\nexport class NegAST extends UnaryAST\n{\n\t_do(obj)\n\t{\n\t\tif (obj !== null && typeof(obj.__neg__) === \"function\")\n\t\t\treturn obj.__neg__();\n\t\treturn -obj;\n\t}\n};\n\n// Bitwise not\nexport class BitNotAST extends UnaryAST\n{\n\t_do(obj)\n\t{\n\t\treturn -obj-1;\n\t}\n};\n\n// Not\nexport class NotAST extends UnaryAST\n{\n\t_do(obj)\n\t{\n\t\treturn !_bool(obj);\n\t}\n};\n\n// If expression\nexport class IfAST extends CodeAST\n{\n\tconstructor(template, pos, objif, objcond, objelse)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.objif = objif;\n\t\tthis.objcond = objcond;\n\t\tthis.objelse = objelse;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<\");\n\t\tout.push(this.constructor.name);\n\t\tout.push(+1);\n\t\tout.push(\"objif=\");\n\t\tthis.objif._repr(out);\n\t\tout.push(0);\n\t\tout.push(\"objcond=\");\n\t\tthis.objcond._repr(out);\n\t\tout.push(0);\n\t\tout.push(\"objelse=\");\n\t\tthis.objelse._repr(out);\n\t\tout.push(-1);\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet result;\n\t\tlet condvalue = this.objcond._handle_eval(context);\n\t\tif (_bool(condvalue))\n\t\t\tresult = this.objif._handle_eval(context);\n\t\telse\n\t\t\tresult = this.objelse._handle_eval(context);\n\t\treturn result;\n\t}\n};\n\nIfAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"objif\", \"objcond\", \"objelse\"]);\n\nexport class ReturnAST extends UnaryAST\n{\n\t_eval(context)\n\t{\n\t\tlet result = this.obj._handle_eval(context);\n\t\tthrow new ReturnException(result);\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(\"return \");\n\t\tthis.obj._str(out);\n\t}\n};\n\nexport class PrintAST extends UnaryAST\n{\n\t_eval(context)\n\t{\n\t\tlet obj = this.obj._handle_eval(context);\n\t\tlet output = _str(obj);\n\t\tcontext.output(output);\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(\"print \");\n\t\tthis.obj._str(out);\n\t}\n};\n\nexport class PrintXAST extends UnaryAST\n{\n\t_eval(context)\n\t{\n\t\tlet obj = this.obj._handle_eval(context);\n\t\tlet output = _xmlescape(obj);\n\t\tcontext.output(output);\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(\"printx \");\n\t\tthis.obj._str(out);\n\t}\n};\n\nexport class BinaryAST extends CodeAST\n{\n\tconstructor(template, pos, obj1, obj2)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.obj1 = obj1;\n\t\tthis.obj2 = obj2;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<\");\n\t\tout.push(this.constructor.name);\n\t\tout.push(\" obj1=\");\n\t\tthis.obj1._repr(out);\n\t\tout.push(\" obj2=\");\n\t\tthis.obj2._repr(out);\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet obj1 = this.obj1._handle_eval(context);\n\t\tlet obj2 = this.obj2._handle_eval(context);\n\t\treturn this._do(obj1, obj2);\n\t}\n};\n\nBinaryAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"obj1\", \"obj2\"]);\n\n// Item access and assignment: dict[key], list[index], string[index], color[index]\nexport class ItemAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\tlet result = this._get(obj1, obj2);\n\t\treturn result;\n\t}\n\n\t_eval_set(context, value)\n\t{\n\t\tlet obj1 = this.obj1._handle_eval(context);\n\t\tlet obj2 = this.obj2._handle_eval(context);\n\t\tthis._set(obj1, obj2, value);\n\t}\n\n\t_eval_modify(context, operator, value)\n\t{\n\t\tlet obj1 = this.obj1._handle_eval(context);\n\t\tlet obj2 = this.obj2._handle_eval(context);\n\t\tthis._modify(operator, obj1, obj2, value);\n\t}\n\n\t_get(container, key)\n\t{\n\t\tif (typeof(container) === \"string\" || _islist(container))\n\t\t{\n\t\t\tif (key instanceof slice)\n\t\t\t{\n\t\t\t\tlet start = key.start, stop = key.stop;\n\t\t\t\tif (start === undefined || start === null)\n\t\t\t\t\tstart = 0;\n\t\t\t\tif (stop === undefined || stop === null)\n\t\t\t\t\tstop = container.length;\n\t\t\t\treturn container.slice(start, stop);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlet orgkey = key;\n\t\t\t\tif (key < 0)\n\t\t\t\t\tkey += container.length;\n\t\t\t\tif (key < 0 || key >= container.length)\n\t\t\t\t\tthrow new IndexError(container, orgkey);\n\t\t\t\treturn container[key];\n\t\t\t}\n\t\t}\n\t\telse if (container && typeof(container.__getitem__) === \"function\") // objects without ``_getitem__`` don't support item access\n\t\t\treturn container.__getitem__(key);\n\t\telse if (_ismap(container))\n\t\t\treturn container.get(key);\n\t\telse\n\t\t\tthrow new TypeError(_type(container) + \" object is not subscriptable\");\n\t}\n\n\t_set(container, key, value)\n\t{\n\t\tif (_islist(container))\n\t\t{\n\t\t\tif (key instanceof slice)\n\t\t\t{\n\t\t\t\tlet start = key.start, stop = key.stop;\n\t\t\t\tif (start === null)\n\t\t\t\t\tstart = 0;\n\t\t\t\telse if (start < 0)\n\t\t\t\t\tstart += container.length;\n\t\t\t\tif (start < 0)\n\t\t\t\t\tstart = 0;\n\t\t\t\telse if (start > container.length)\n\t\t\t\t\tstart = container.length;\n\t\t\t\tif (stop === null)\n\t\t\t\t\tstop = container.length;\n\t\t\t\telse if (stop < 0)\n\t\t\t\t\tstop += container.length;\n\t\t\t\tif (stop < 0)\n\t\t\t\t\tstop = 0;\n\t\t\t\telse if (stop > container.length)\n\t\t\t\t\tstop = container.length;\n\t\t\t\tif (stop < start)\n\t\t\t\t\tstop = start;\n\t\t\t\tcontainer.splice(start, stop-start); // Remove old element\n\t\t\t\tfor (let iter = _iter(value);;)\n\t\t\t\t{\n\t\t\t\t\tlet item = iter.next();\n\t\t\t\t\tif (item.done)\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcontainer.splice(start++, 0, item.value);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlet orgkey = key;\n\t\t\t\tif (key < 0)\n\t\t\t\t\tkey += container.length;\n\t\t\t\tif (key < 0 || key >= container.length)\n\t\t\t\t\tthrow new IndexError(container, orgkey);\n\t\t\t\tcontainer[key] = value;\n\t\t\t}\n\t\t}\n\t\telse if (container && typeof(container.__setitem__) === \"function\") // test this before the generic object test\n\t\t\tcontainer.__setitem__(key, value);\n\t\telse if (_ismap(container))\n\t\t\tcontainer.set(key, value);\n\t\telse if (_isobject(container))\n\t\t\tcontainer[key] = value;\n\t\telse\n\t\t\tthrow new NotSubscriptableError(container);\n\t}\n\n\t_modify(operator, container, key, value)\n\t{\n\t\tthis._set(container, key, operator._ido(this._get(container, key), value));\n\t}\n};\n\n// Identifty test operator ``is``\nexport class IsAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\treturn obj1 === obj2;\n\t}\n};\n\n// Inverted identity test operator ``is not``\nexport class IsNotAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\treturn obj1 !== obj2;\n\t}\n};\n\n// Comparison operator ==\nexport class EQAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\treturn _eq(obj1, obj2);\n\t}\n};\n\n// Comparison operator !=\nexport class NEAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\treturn _ne(obj1, obj2);\n\t}\n};\n\n// Comparison operator <\nexport class LTAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\treturn _lt(obj1, obj2);\n\t}\n};\n\n// Comparison operator <=\nexport class LEAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\treturn _le(obj1, obj2);\n\t}\n};\n\n// Comparison operator >\nexport class GTAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\treturn _gt(obj1, obj2);\n\t}\n};\n\n// Comparison operator >=\nexport class GEAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\treturn _ge(obj1, obj2);\n\t}\n};\n\n// Containment test: string in string, obj in list, key in dict, value in rgb\nexport class ContainsAST extends BinaryAST\n{\n\t_do(obj, container)\n\t{\n\t\tif (typeof(obj) === \"string\" && typeof(container) === \"string\")\n\t\t{\n\t\t\treturn container.indexOf(obj) !== -1;\n\t\t}\n\t\telse if (_islist(container))\n\t\t{\n\t\t\treturn container.indexOf(obj) !== -1;\n\t\t}\n\t\telse if (container && typeof(container.__contains__) === \"function\") // test this before the generic object test\n\t\t\treturn container.__contains__(obj);\n\t\telse if (_ismap(container) || _isset(container))\n\t\t\treturn container.has(obj);\n\t\telse if (_isobject(container))\n\t\t{\n\t\t\tfor (let key in container)\n\t\t\t{\n\t\t\t\tif (key === obj)\n\t\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\telse if (_iscolor(container))\n\t\t{\n\t\t\treturn container._r === obj || container._g === obj || container._b === obj || container._a === obj;\n\t\t}\n\t\tthrow new TypeError(_type(container) + \" object is not iterable\");\n\t}\n};\n\n// Inverted containment test\nexport class NotContainsAST extends BinaryAST\n{\n\t_do(obj, container)\n\t{\n\t\treturn !ContainsAST.prototype._do(obj, container);\n\t}\n};\n\n// Addition: num + num, string + string\nexport class AddAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\tif (obj1 && typeof(obj1.__add__) === \"function\")\n\t\t\treturn obj1.__add__(obj2);\n\t\telse if (obj2 && typeof(obj2.__radd__) === \"function\")\n\t\t\treturn obj2.__radd__(obj1);\n\t\tif (obj1 === null || obj2 === null)\n\t\t\tthrow new TypeError(_type(this.obj1) + \" + \" + _type(this.obj2) + \" is not supported\");\n\t\tif (_islist(obj1) && _islist(obj2))\n\t\t\treturn [...obj1, ...obj2];\n\t\telse\n\t\t\treturn obj1 + obj2;\n\t}\n\n\t_ido(obj1, obj2)\n\t{\n\t\tif (_islist(obj1) && _islist(obj2))\n\t\t{\n\t\t\tListProtocol.append(obj1, obj2);\n\t\t\treturn obj1;\n\t\t}\n\t\telse\n\t\t\treturn this._do(obj1, obj2);\n\t}\n};\n\n// Substraction: num - num\nexport class SubAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\tif (obj1 && typeof(obj1.__sub__) === \"function\")\n\t\t\treturn obj1.__sub__(obj2);\n\t\telse if (obj2 && typeof(obj2.__rsub__) === \"function\")\n\t\t\treturn obj2.__rsub__(obj1);\n\t\telse if (_isdate(obj1) && _isdate(obj2))\n\t\t\treturn this._date_sub(obj1, obj2);\n\t\telse if (_isdatetime(obj1) && _isdatetime(obj2))\n\t\t\treturn this._datetime_sub(obj1, obj2);\n\t\tif (obj1 === null || obj2 === null)\n\t\t\tthrow new TypeError(_type(this.obj1) + \" - \" + _type(this.obj2) + \" is not supported\");\n\t\treturn obj1 - obj2;\n\t}\n\n\t_date_sub(obj1, obj2)\n\t{\n\t\treturn this._datetime_sub(obj1._date, obj2._date);\n\t}\n\n\t_datetime_sub(obj1, obj2)\n\t{\n\t\tlet swap = (obj2 > obj1);\n\n\t\tif (swap)\n\t\t{\n\t\t\tlet t = obj1;\n\t\t\tobj1 = obj2;\n\t\t\tobj2 = t;\n\t\t}\n\t\t// From now on obj1 is > than obj2\n\n\t\tlet year1 = obj1.getFullYear();\n\t\tlet yearday1 = DateTimeProtocol.yearday(obj1);\n\t\tlet year2 = obj2.getFullYear();\n\t\tlet yearday2 = DateTimeProtocol.yearday(obj2);\n\n\t\tlet diffdays = 0;\n\n\t\twhile (year1 > year2)\n\t\t{\n\t\t\tdiffdays += DateProtocol.yearday(_date(year2, 12, 31));\n\t\t\t++year2;\n\t\t}\n\t\tdiffdays += yearday1 - yearday2;\n\n\t\tlet hours1 = obj1.getHours();\n\t\tlet minutes1 = obj1.getMinutes();\n\t\tlet seconds1 = obj1.getSeconds();\n\t\tlet hours2 = obj2.getHours();\n\t\tlet minutes2 = obj2.getMinutes();\n\t\tlet seconds2 = obj2.getSeconds();\n\n\t\tlet diffseconds = (seconds1 - seconds2) + 60 * ((minutes1 - minutes2) + 60 * (hours1 - hours2));\n\n\t\tlet diffmilliseconds = obj1.getMilliseconds() - obj2.getMilliseconds();\n\n\t\tif (swap)\n\t\t{\n\t\t\tdiffdays = -diffdays;\n\t\t\tdiffseconds = -diffseconds;\n\t\t\tdiffmilliseconds = -diffmilliseconds;\n\t\t}\n\t\treturn new TimeDelta(diffdays, diffseconds, 1000*diffmilliseconds);\n\t}\n\n\t_ido(obj1, obj2)\n\t{\n\t\treturn this._do(obj1, obj2);\n\t}\n};\n\n\n// Multiplication: num * num, int * str, str * int, int * list, list * int\nexport class MulAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\tif (obj1 && typeof(obj1.__mul__) === \"function\")\n\t\t\treturn obj1.__mul__(obj2);\n\t\telse if (obj2 && typeof(obj2.__rmul__) === \"function\")\n\t\t\treturn obj2.__rmul__(obj1);\n\t\tif (obj1 === null || obj2 === null)\n\t\t\tthrow new TypeError(_type(obj1) + \" * \" + _type(obj2) + \" not supported\");\n\t\telse if (_isint(obj1) || _isbool(obj1))\n\t\t{\n\t\t\tif (typeof(obj2) === \"string\")\n\t\t\t{\n\t\t\t\tif (obj1 < 0)\n\t\t\t\t\tthrow new ValueError(\"repetition counter must be positive\");\n\t\t\t\treturn _str_repeat(obj2, obj1);\n\t\t\t}\n\t\t\telse if (_islist(obj2))\n\t\t\t{\n\t\t\t\tif (obj1 < 0)\n\t\t\t\t\tthrow new ValueError(\"repetition counter must be positive\");\n\t\t\t\treturn _list_repeat(obj2, obj1);\n\t\t\t}\n\t\t}\n\t\telse if (_isint(obj2) || _isbool(obj2))\n\t\t{\n\t\t\tif (typeof(obj1) === \"string\")\n\t\t\t{\n\t\t\t\tif (obj2 < 0)\n\t\t\t\t\tthrow new ValueError(\"repetition counter must be positive\");\n\t\t\t\treturn _str_repeat(obj1, obj2);\n\t\t\t}\n\t\t\telse if (_islist(obj1))\n\t\t\t{\n\t\t\t\tif (obj2 < 0)\n\t\t\t\t\tthrow new ValueError(\"repetition counter must be positive\");\n\t\t\t\treturn _list_repeat(obj1, obj2);\n\t\t\t}\n\t\t}\n\t\treturn obj1 * obj2;\n\t}\n\n\t_ido(obj1, obj2)\n\t{\n\t\tif (_islist(obj1) && _isint(obj2))\n\t\t{\n\t\t\tif (obj2 > 0)\n\t\t\t{\n\t\t\t\tlet i = 0;\n\t\t\t\tlet targetsize = obj1.length * obj2;\n\t\t\t\twhile (obj1.length < targetsize)\n\t\t\t\t\tobj1.push(obj1[i++]);\n\t\t\t}\n\t\t\telse\n\t\t\t\tobj1.splice(0, obj1.length);\n\t\t\treturn obj1;\n\t\t}\n\t\telse\n\t\t\treturn this._do(obj1, obj2);\n\t}\n};\n\n// Truncating division\nexport class FloorDivAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\tif (obj1 && typeof(obj1.__floordiv__) === \"function\")\n\t\t\treturn obj1.__floordiv__(obj2);\n\t\telse if (obj2 && typeof(obj2.__rfloordiv__) === \"function\")\n\t\t\treturn obj2.__rfloordiv__(obj1);\n\t\tif (obj1 === null || obj2 === null)\n\t\t\tthrow new TypeError(_type(obj1) + \" // \" + _type(obj2) + \" not supported\");\n\t\telse if (typeof(obj1) === \"number\" && typeof(obj2) === \"number\" && obj2 === 0)\n\t\t\tthrow new ZeroDivisionError();\n\t\treturn Math.floor(obj1 / obj2);\n\t}\n\n\t_ido(obj1, obj2)\n\t{\n\t\treturn this._do(obj1, obj2);\n\t}\n};\n\n// \"Real\" division\nexport class TrueDivAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\tif (obj1 && typeof(obj1.__truediv__) === \"function\")\n\t\t\treturn obj1.__truediv__(obj2);\n\t\telse if (obj2 && typeof(obj2.__rtruediv__) === \"function\")\n\t\t\treturn obj2.__rtruediv__(obj1);\n\t\tif (obj1 === null || obj2 === null)\n\t\t\tthrow new TypeError(_type(obj1) + \" / \" + _type(obj2) + \" not supported\");\n\t\telse if (typeof(obj1) === \"number\" && typeof(obj2) === \"number\" && obj2 === 0)\n\t\t\tthrow new ZeroDivisionError();\n\t\treturn obj1 / obj2;\n\t}\n\n\t_ido(obj1, obj2)\n\t{\n\t\treturn this._do(obj1, obj2);\n\t}\n};\n\n// Modulo\nexport class ModAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\treturn _mod(obj1, obj2);\n\t}\n\n\t_ido(obj1, obj2)\n\t{\n\t\treturn this._do(obj1, obj2);\n\t}\n};\n\n// Bitwise left shift\nexport class ShiftLeftAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\tif (obj2 === false)\n\t\t\tobj2 = 0;\n\t\telse if (obj2 === true)\n\t\t\tobj2 = 1;\n\t\tif (obj2 < 0)\n\t\t\treturn ShiftRightAST.prototype._do(obj1, -obj2);\n\t\tif (obj1 === false)\n\t\t\tobj1 = 0;\n\t\telse if (obj1 === true)\n\t\t\tobj1 = 1;\n\t\twhile (obj2--)\n\t\t\tobj1 *= 2;\n\t\treturn obj1;\n\t}\n\n\t_ido(obj1, obj2)\n\t{\n\t\treturn this._do(obj1, obj2);\n\t}\n};\n\n// Bitwise right shift\nexport class ShiftRightAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\tif (obj2 === false)\n\t\t\tobj2 = 0;\n\t\telse if (obj2 === true)\n\t\t\tobj2 = 1;\n\t\tif (obj2 < 0)\n\t\t\treturn ShiftLeftAST.prototype._do(obj1, -obj2);\n\t\tif (obj1 === false)\n\t\t\tobj1 = 0;\n\t\telse if (obj1 === true)\n\t\t\tobj1 = 1;\n\t\twhile (obj2--)\n\t\t\tobj1 /= 2;\n\t\treturn Math.floor(obj1);\n\t}\n\n\t_ido(obj1, obj2)\n\t{\n\t\treturn this._do(obj1, obj2);\n\t}\n};\n\n// Bitwise and\nexport class BitAndAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\tif (obj2 === false)\n\t\t\tobj2 = 0;\n\t\telse if (obj2 === true)\n\t\t\tobj2 = 1;\n\t\treturn obj1 & obj2;\n\t}\n\n\t_ido(obj1, obj2)\n\t{\n\t\treturn this._do(obj1, obj2);\n\t}\n};\n\n// Bitwise exclusive or\nexport class BitXOrAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\tif (obj2 === false)\n\t\t\tobj2 = 0;\n\t\telse if (obj2 === true)\n\t\t\tobj2 = 1;\n\t\treturn obj1 ^ obj2;\n\t}\n\n\t_ido(obj1, obj2)\n\t{\n\t\treturn this._do(obj1, obj2);\n\t}\n};\n\n// Bitwise or\nexport class BitOrAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\tif (obj2 === false)\n\t\t\tobj2 = 0;\n\t\telse if (obj2 === true)\n\t\t\tobj2 = 1;\n\t\treturn obj1 | obj2;\n\t}\n\n\t_ido(obj1, obj2)\n\t{\n\t\treturn this._do(obj1, obj2);\n\t}\n};\n\nexport class AndAST extends BinaryAST\n{\n\t_eval(context)\n\t{\n\t\tlet obj1 = this.obj1._handle_eval(context);\n\t\tif (!_bool(obj1))\n\t\t\treturn obj1;\n\t\tlet obj2 = this.obj2._handle_eval(context);\n\t\treturn obj2;\n\t}\n};\n\nexport class OrAST extends BinaryAST\n{\n\t_eval(context)\n\t{\n\t\tlet obj1 = this.obj1._handle_eval(context);\n\t\tif (_bool(obj1))\n\t\t\treturn obj1;\n\t\tlet obj2 = this.obj2._handle_eval(context);\n\t\treturn obj2;\n\t}\n};\n\nexport class AttrAST extends CodeAST\n{\n\tconstructor(template, pos, obj, attrname)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.obj = obj;\n\t\tthis.attrname = attrname;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<AttrAST\");\n\t\tout.push(\" obj=\");\n\t\tthis.obj._repr(out);\n\t\tout.push(\" attrname=\");\n\t\tout.push(_repr(this.attrname));\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet obj = this.obj._handle_eval(context);\n\t\tlet result = this._get(obj, this.attrname);\n\t\treturn result;\n\t}\n\n\t_eval_set(context, value)\n\t{\n\t\tlet obj = this.obj._handle_eval(context);\n\t\tthis._set(obj, this.attrname, value);\n\t}\n\n\t_eval_modify(context, operator, value)\n\t{\n\t\tlet obj = this.obj._handle_eval(context);\n\t\tthis._modify(operator, obj, this.attrname, value);\n\t}\n\n\t_get(object, attrname)\n\t{\n\t\tlet proto = Protocol.get(object);\n\t\ttry\n\t\t{\n\t\t\treturn proto.getattr(object, attrname);\n\t\t}\n\t\tcatch (exc)\n\t\t{\n\t\t\tif (exc instanceof AttributeError && exc.obj === object)\n\t\t\t\treturn undefined;\n\t\t\telse\n\t\t\t\tthrow exc;\n\t\t}\n\t}\n\n\t_set(object, attrname, value)\n\t{\n\t\tif (typeof(object) === \"object\" && typeof(object.__setattr__) === \"function\")\n\t\t\tobject.__setattr__(attrname, value);\n\t\telse if (_ismap(object))\n\t\t\tobject.set(attrname, value);\n\t\telse if (_isobject(object))\n\t\t\tobject[attrname] = value;\n\t\telse\n\t\t\tthrow new TypeError(_type(object) + \" object has no writable attributes\");\n\t}\n\n\t_modify(operator, object, attrname, value)\n\t{\n\t\tlet oldvalue = this._get(object, attrname);\n\t\tlet newvalue = operator._ido(oldvalue, value);\n\t\tthis._set(object, attrname, newvalue);\n\t}\n};\n\nAttrAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"obj\", \"attrname\"]);\n\nexport class CallAST extends CodeAST\n{\n\tconstructor(template, pos, obj, args)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.obj = obj;\n\t\tthis.args = args;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<CallAST\");\n\t\tout.push(\" obj=\");\n\t\tthis.obj._repr(out);\n\t\tfor (let arg of this.args)\n\t\t{\n\t\t\tout.push(\" \");\n\t\t\targ._repr(out);\n\t\t}\n\t\tout.push(\">\");\n\t}\n\n\t_makeargs(context)\n\t{\n\t\tlet args = [], kwargs = {};\n\t\tfor (let arg of this.args)\n\t\t\targ._handle_eval_call(context, args, kwargs);\n\t\treturn {args: args, kwargs: kwargs};\n\t}\n\n\t_handle_eval(context)\n\t{\n\t\ttry\n\t\t{\n\t\t\treturn this._eval(context);\n\t\t}\n\t\tcatch (exc)\n\t\t{\n\t\t\tthis._decorate_exception(exc);\n\t\t\tthrow exc;\n\t\t}\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet obj = this.obj._handle_eval(context);\n\t\tlet args = this._makeargs(context);\n\t\tlet result = _call(context, obj, args.args, args.kwargs);\n\t\treturn result;\n\t}\n};\n\nCallAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"obj\", \"args\"]);\n\nexport class RenderAST extends CallAST\n{\n\tconstructor(template, pos, obj, args)\n\t{\n\t\tsuper(template, pos, obj, args);\n\t\tthis.indent = null;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<\");\n\t\tout.push(this._reprname);\n\t\tout.push(\"<RenderAST\");\n\t\tout.push(\" indent=\");\n\t\tout.push(_repr(this.indent));\n\t\tout.push(\" obj=\");\n\t\tthis.obj._repr(out);\n\t\tout.push(0);\n\t\tfor (let arg of this.args)\n\t\t{\n\t\t\tout.push(\" \");\n\t\t\targ._repr(out);\n\t\t\tout.push(0);\n\t\t}\n\t\tout.push(-1);\n\t\tout.push(\">\");\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(\"render \");\n\t\tout.push(this.tag.code.replace(/\\r?\\n/g, ' '));\n\t\tif (this.indent !== null)\n\t\t{\n\t\t\tout.push(\" with indent \");\n\t\t\tout.push(_repr(this.indent.text));\n\t\t}\n\t}\n\n\t_handle_eval(context)\n\t{\n\t\tlet localcontext = context.withindent(this.indent !== null ? this.indent.text : null);\n\t\tlet obj = this.obj._handle_eval(localcontext);\n\t\tlet args = this._makeargs(localcontext);\n\t\tthis._handle_additional_arguments(localcontext, args);\n\n\t\ttry\n\t\t{\n\t\t\tlet result = _callrender(localcontext, obj, args.args, args.kwargs);\n\t\t\treturn result;\n\t\t}\n\t\tcatch (exc)\n\t\t{\n\t\t\tthis._decorate_exception(exc);\n\t\t\tthrow exc;\n\t\t}\n\t}\n\n\t_handle_additional_arguments(context, args)\n\t{\n\t}\n};\n\nRenderAST.prototype._ul4onattrs = CallAST.prototype._ul4onattrs.concat([\"indent\"]);\nRenderAST.prototype._reprname = \"RenderAST\";\n\nexport class RenderXAST extends RenderAST\n{\n\t_handle_eval(context)\n\t{\n\t\tcontext.escapes.push(_xmlescape);\n\n\t\tlet result = null;\n\t\ttry\n\t\t{\n\t\t\tresult = super._handle_eval(context);\n\t\t}\n\t\tfinally\n\t\t{\n\t\t\tcontext.escapes.splice(context.escapes.length-1, 1);\n\t\t}\n\t\treturn result;\n\t}\n};\n\nexport class RenderBlockAST extends RenderAST\n{\n\t_handle_additional_arguments(context, args)\n\t{\n\t\tif (args.kwargs.hasOwnProperty(\"content\"))\n\t\t\tthrow new ArgumentError(\"duplicate keyword argument content\");\n\t\tlet closure = new TemplateClosure(this.content, this.content.signature, context.vars);\n\t\targs.kwargs.content = closure;\n\t}\n\n\t__getattr__(attrname)\n\t{\n\t\tif (\n\t\t\tattrname === \"stoppos\" ||\n\t\t\tattrname === \"stopsource\" ||\n\t\t\tattrname === \"stopsourceprefix\" ||\n\t\t\tattrname === \"stopsourcesuffix\"\n\t\t)\n\t\t\treturn this[attrname];\n\t\telse\n\t\t\treturn super.__getattr__(attrname);\n\t}\n};\n\nRenderBlockAST.prototype._ul4onattrs = RenderAST.prototype._ul4onattrs.concat([\"stoppos\", \"content\"]);\n\nexport class RenderBlocksAST extends RenderAST\n{\n\t_handle_additional_arguments(context, args)\n\t{\n\t\tlet localcontext = context.inheritvars();\n\t\tBlockAST.prototype._eval.call(this, localcontext);\n\n\t\tfor (let key in localcontext.vars)\n\t\t{\n\t\t\tif (localcontext.vars.hasOwnProperty(key))\n\t\t\t{\n\t\t\t\tif (key in args.kwargs)\n\t\t\t\t\tthrow new ArgumentError(\"duplicate keyword argument \" + key);\n\t\t\t\targs.kwargs[key] = localcontext.get(key);\n\t\t\t}\n\t\t}\n\t}\n\n\t__getattr__(attrname)\n\t{\n\t\tif (\n\t\t\tattrname === \"stoppos\" ||\n\t\t\tattrname === \"stopsource\" ||\n\t\t\tattrname === \"stopsourceprefix\" ||\n\t\t\tattrname === \"stopsourcesuffix\"\n\t\t)\n\t\t\treturn this[attrname];\n\t\telse\n\t\t\treturn super.__getattr__(attrname);\n\t}\n};\n\nRenderBlocksAST.prototype._ul4onattrs = RenderAST.prototype._ul4onattrs.concat([\"stoppos\", \"content\"]);\n\n// Slice object\nexport class slice extends Proto\n{\n\tconstructor(start, stop)\n\t{\n\t\tsuper();\n\t\tthis.start = start;\n\t\tthis.stop = stop;\n\t}\n\n\tof(string)\n\t{\n\t\tlet start = this.start || 0;\n\t\tlet stop = this.stop === null ? string.length : this.stop;\n\t\treturn string.slice(start, stop);\n\t}\n\n\t__repr__()\n\t{\n\t\treturn \"slice(\" + _repr(this.start) + \", \" + _repr(this.stop) + \", None)\";\n\t}\n\n\t__getattr__(attrname)\n\t{\n\t\tswitch (attrname)\n\t\t{\n\t\t\tcase \"start\":\n\t\t\t\treturn this.start;\n\t\t\tcase \"stop\":\n\t\t\t\treturn this.stop;\n\t\t\tdefault:\n\t\t\t\tthrow new AttributeError(this, attrname);\n\t\t}\n\t}\n};\n\n\n// List/String slice\nexport class SliceAST extends CodeAST\n{\n\tconstructor(template, pos, index1, index2)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.index1 = index1;\n\t\tthis.index2 = index2;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<SliceAST\");\n\t\tif (this.index1 !== null)\n\t\t{\n\t\t\tout.push(\" index1=\");\n\t\t\tthis.index1._repr(out);\n\t\t}\n\t\tif (this.index2 !== null)\n\t\t{\n\t\t\tout.push(\" index2=\");\n\t\t\tthis.index2._repr(out);\n\t\t}\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet index1 = this.index1 !== null ? this.index1._handle_eval(context) : null;\n\t\tlet index2 = this.index2 !== null ? this.index2._handle_eval(context) : null;\n\t\treturn new slice(index1, index2);\n\t}\n};\n\nSliceAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"index1\", \"index2\"]);\n\nexport class SetVarAST extends CodeAST\n{\n\tconstructor(template, pos, lvalue, value)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.lvalue = lvalue;\n\t\tthis.value = value;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<\");\n\t\tout.push(this.constructor.name);\n\t\tout.push(\" lvalue=\");\n\t\tout.push(_repr(this.lvalue));\n\t\tout.push(\" value=\");\n\t\tthis.value._repr(out);\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet value = this.value._handle_eval(context);\n\t\tlet items = _unpackvar(this.lvalue, value);\n\t\tfor (let [lvalue, value] of items)\n\t\t\tlvalue._handle_eval_set(context, value);\n\t}\n};\n\nSetVarAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"lvalue\", \"value\"]);\n\nexport class ModifyVarAST extends SetVarAST\n{\n\t_eval(context)\n\t{\n\t\tlet value = this.value._handle_eval(context);\n\t\tlet items = _unpackvar(this.lvalue, value);\n\t\tfor (let [lvalue, value] of items)\n\t\t\tlvalue._handle_eval_modify(context, this._operator, value);\n\t}\n};\n\nexport class AddVarAST extends ModifyVarAST\n{\n};\n\nAddVarAST.prototype._operator = AddAST.prototype;\n\nexport class SubVarAST extends ModifyVarAST\n{\n};\n\nSubVarAST.prototype._operator = SubAST.prototype;\n\nexport class MulVarAST extends ModifyVarAST\n{\n};\n\nMulVarAST.prototype._operator = MulAST.prototype;\n\nexport class TrueDivVarAST extends ModifyVarAST\n{\n};\n\nTrueDivVarAST.prototype._operator = TrueDivAST.prototype;\n\nexport class FloorDivVarAST extends ModifyVarAST\n{\n};\n\nFloorDivVarAST.prototype._operator = FloorDivAST.prototype;\n\nexport class ModVarAST extends ModifyVarAST\n{\n};\n\nModVarAST.prototype._operator = ModAST.prototype;\n\nexport class ShiftLeftVarAST extends ModifyVarAST\n{\n};\n\nShiftLeftVarAST.prototype._operator = ShiftLeftAST.prototype;\n\nexport class ShiftRightVarAST extends ModifyVarAST\n{\n};\n\nShiftRightVarAST.prototype._operator = ShiftRightAST.prototype;\n\nexport class BitAndVarAST extends ModifyVarAST\n{\n};\n\nBitAndVarAST.prototype._operator = BitAndAST.prototype;\n\nexport class BitXOrVarAST extends ModifyVarAST\n{\n};\n\nBitXOrVarAST.prototype._operator = BitXOrAST.prototype;\n\nexport class BitOrVarAST extends ModifyVarAST\n{\n};\n\nBitOrVarAST.prototype._operator = BitOrAST.prototype;\n\nexport class BlockAST extends CodeAST\n{\n\tconstructor(template, startpos, stoppos)\n\t{\n\t\tsuper(template, startpos, stoppos);\n\t\tthis.content = [];\n\t}\n\n\t_eval(context)\n\t{\n\t\tfor (let item of this.content)\n\t\t\titem._handle_eval(context);\n\t}\n\n\t_str(out)\n\t{\n\t\tif (this.content.length)\n\t\t{\n\t\t\tfor (let item of this.content)\n\t\t\t{\n\t\t\t\titem._str(out);\n\t\t\t\tout.push(0);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tout.push(\"pass\");\n\t\t\tout.push(0);\n\t\t}\n\t}\n\n\t__getattr__(attrname)\n\t{\n\t\tif (\n\t\t\tattrname === \"stoppos\" ||\n\t\t\tattrname === \"stopsource\" ||\n\t\t\tattrname === \"stopsourceprefix\" ||\n\t\t\tattrname === \"stopsourcesuffix\"\n\t\t)\n\t\t\treturn this[attrname];\n\t\telse\n\t\t\treturn super.__getattr__(attrname);\n\t}\n};\n\nBlockAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"stoppos\", \"content\"]);\n\nexport class ForBlockAST extends BlockAST\n{\n\tconstructor(template, pos, varname, container)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.varname = varname;\n\t\tthis.container = container;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<ForBlockAST\");\n\t\tout.push(\" varname=\");\n\t\tout.push(_repr(this.varname));\n\t\tout.push(\" container=\");\n\t\tthis.container._repr(out);\n\t\tout.push(\">\");\n\t}\n\n\t_str_varname(out, varname)\n\t{\n\t\tif (_islist(varname))\n\t\t{\n\t\t\tout.push(\"(\");\n\t\t\tlet first = truel\n\t\t\tfor (let subname of varname)\n\t\t\t{\n\t\t\t\tif (first)\n\t\t\t\t\tfirst = false;\n\t\t\t\telse\n\t\t\t\t\tout.push(\", \");\n\t\t\t\tthis._str_varname(out, subname);\n\t\t\t}\n\t\t\tif (varname.length == 1)\n\t\t\t\tout.push(\",\");\n\t\t\tout.push(\")\");\n\t\t}\n\t\telse\n\t\t\tvarname._str(out);\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet container = this.container._handle_eval(context);\n\n\t\tfor (let iter = _iter(container);;)\n\t\t{\n\t\t\tlet value = iter.next();\n\t\t\tif (value.done)\n\t\t\t\tbreak;\n\t\t\tlet varitems = _unpackvar(this.varname, value.value);\n\t\t\tfor (let [lvalue, value] of varitems)\n\t\t\t\tlvalue._handle_eval_set(context, value);\n\t\t\ttry\n\t\t\t{\n\t\t\t\t// We can't call _handle_eval() here, as this would in turn call this function again, leading to infinite recursion\n\t\t\t\t// But we don't have to, as wrapping original exception in ``Error`` has already been done by the lower levels\n\t\t\t\tsuper._eval(context);\n\t\t\t}\n\t\t\tcatch (exc)\n\t\t\t{\n\t\t\t\tif (exc instanceof BreakException)\n\t\t\t\t\tbreak;\n\t\t\t\telse if (exc instanceof ContinueException)\n\t\t\t\t\t;\n\t\t\t\telse\n\t\t\t\t\tthrow exc;\n\t\t\t}\n\t\t}\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(\"for \");\n\t\tthis._str_varname(out, this.varname);\n\t\tout.push(\" in \");\n\t\tthis.container._str(out);\n\t\tout.push(\":\");\n\t\tout.push(+1);\n\t\tBlockAST.prototype._str.call(this, out);\n\t\tout.push(-1);\n\t}\n};\n\nForBlockAST.prototype._ul4onattrs = BlockAST.prototype._ul4onattrs.concat([\"varname\", \"container\"]);\n\nexport class WhileBlockAST extends BlockAST\n{\n\tconstructor(template, pos, condition)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.condition = condition;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<WhileAST\");\n\t\tout.push(\" condition=\");\n\t\tthis.condition._repr(out);\n\t\tout.push(\">\");\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(\"while \");\n\t\tthis.condition._repr(out);\n\t\tout.push(\":\");\n\t\tout.push(+1);\n\t\tBlockAST.prototype._str.call(this, out);\n\t\tout.push(-1);\n\t}\n\n\t_eval(context)\n\t{\n\t\twhile (true)\n\t\t{\n\t\t\tlet cond = this.condition._handle_eval(context);\n\t\t\tif (!_bool(cond))\n\t\t\t\tbreak;\n\t\t\ttry\n\t\t\t{\n\t\t\t\t// We can't call _handle_eval() here, as this would in turn call this function again, leading to infinite recursion\n\t\t\t\t// But we don't have to, as wrapping the original exception in ``Error`` has already been done by the lower levels\n\t\t\t\tsuper._eval(context);\n\t\t\t}\n\t\t\tcatch (exc)\n\t\t\t{\n\t\t\t\tif (exc instanceof BreakException)\n\t\t\t\t\tbreak;\n\t\t\t\telse if (exc instanceof ContinueException)\n\t\t\t\t\t;\n\t\t\t\telse\n\t\t\t\t\tthrow exc;\n\t\t\t}\n\t\t}\n\t}\n};\n\nWhileBlockAST.prototype._ul4onattrs = BlockAST.prototype._ul4onattrs.concat([\"condition\"]);\n\nexport class BreakAST extends CodeAST\n{\n\t_eval(context)\n\t{\n\t\tthrow new BreakException();\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(\"break\");\n\t\tout.push(0);\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<BreakAST>\");\n\t}\n};\n\nexport class ContinueAST extends CodeAST\n{\n\t_eval(context)\n\t{\n\t\tthrow new ContinueException();\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(\"continue\");\n\t\tout.push(0);\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<ContinueAST>\");\n\t}\n};\n\nexport class CondBlockAST extends BlockAST\n{\n\t_eval(context)\n\t{\n\t\tfor (let block of this.content)\n\t\t{\n\t\t\tlet execute = block._execute(context);\n\t\t\tif (execute)\n\t\t\t{\n\t\t\t\tblock._handle_eval(context);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n};\n\nexport class ConditionalBlockAST extends  BlockAST\n{\n\tconstructor(template, pos, condition)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.condition = condition;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<\");\n\t\tout.push(this.constructor.name);\n\t\tout.push(\" condition=\");\n\t\tthis.condition._repr(out);\n\t\tout.push(\">\");\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(this._strname);\n\t\tout.push(\" \");\n\t\tthis.condition._str(out);\n\t\tout.push(\":\");\n\t\tout.push(+1);\n\t\tBlockAST.prototype._str.call(this, out);\n\t\tout.push(-1);\n\t}\n\n\t_execute(context)\n\t{\n\t\tlet cond = this.condition._handle_eval(context);\n\t\tlet result = _bool(cond);\n\t\treturn result;\n\t}\n};\n\nConditionalBlockAST.prototype._ul4onattrs = BlockAST.prototype._ul4onattrs.concat([\"condition\"]);\n\nexport class IfBlockAST extends ConditionalBlockAST\n{\n};\n\nIfBlockAST.prototype._strname = \"if\";\n\nexport class ElIfBlockAST extends ConditionalBlockAST\n{\n};\n\nElIfBlockAST.prototype._strname = \"else if\";\n\nexport class ElseBlockAST extends BlockAST\n{\n\t_repr(out)\n\t{\n\t\tout.push(\"<ElseAST\");\n\t\tout.push(\">\");\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(\"else:\");\n\t\tout.push(+1);\n\t\tBlockAST.prototype._str.call(this, out);\n\t\tout.push(-1);\n\t}\n\n\t_execute(context)\n\t{\n\t\treturn true;\n\t}\n};\n\nexport class Template extends BlockAST\n{\n\tconstructor(template, pos, source, name, whitespace, startdelim, enddelim, signature)\n\t{\n\t\tsuper(template, pos);\n\t\tthis._source = source;\n\t\tthis.name = name;\n\t\tthis.whitespace = whitespace;\n\t\tthis.startdelim = startdelim;\n\t\tthis.enddelim = enddelim;\n\t\tthis.docpos = null;\n\t\tthis.signature = signature;\n\t\tthis._asts = null;\n\t\tthis._ul4_callsignature = signature;\n\t\tthis._ul4_rendersignature = signature;\n\t\tthis.parenttemplate = null;\n\t}\n\n\t__getattr__(attrname)\n\t{\n\t\tlet self = this;\n\t\tswitch (attrname)\n\t\t{\n\t\t\tcase \"content\":\n\t\t\t\treturn this.content;\n\t\t\tcase \"source\":\n\t\t\t\treturn this.source;\n\t\t\tcase \"name\":\n\t\t\t\treturn this.name;\n\t\t\tcase \"whitespace\":\n\t\t\t\treturn this.whitespace;\n\t\t\tcase \"startdelim\":\n\t\t\t\treturn this.startdelim;\n\t\t\tcase \"enddelim\":\n\t\t\t\treturn this.enddelim;\n\t\t\tcase \"doc\":\n\t\t\t\treturn this.doc();\n\t\t\tcase \"signature\":\n\t\t\t\treturn this.signature;\n\t\t\tcase \"parenttemplate\":\n\t\t\t\treturn this.parenttemplate;\n\t\t\tcase \"render\":\n\t\t\t\tlet render = function render(context, vars){ self._renderbound(context, vars); };\n\t\t\t\texpose(render, this.signature, {needscontext: true, needsobject: true});\n\t\t\t\treturn render;\n\t\t\tcase \"renders\":\n\t\t\t\tlet renders = function renders(context, vars){ return self._rendersbound(context, vars); };\n\t\t\t\texpose(renders, this.signature, {needscontext: true, needsobject: true});\n\t\t\t\treturn renders;\n\t\t\tdefault:\n\t\t\t\treturn super.__getattr__(attrname);\n\t\t}\n\t}\n\n\tul4ondump(encoder)\n\t{\n\t\tlet signature;\n\t\tencoder.dump(api_version);\n\t\tencoder.dump(this.name);\n\t\tencoder.dump(this._source);\n\t\tencoder.dump(this.whitespace);\n\t\tencoder.dump(this.startdelim);\n\t\tencoder.dump(this.enddelim);\n\t\tencoder.dump(this.docpos);\n\t\tencoder.dump(this.parenttemplate);\n\t\tif (this.signature === null || this.signature instanceof SignatureAST)\n\t\t\tsignature = this.signature;\n\t\telse\n\t\t{\n\t\t\tsignature = [];\n\t\t\tfor (let arg of this.signature.args)\n\t\t\t{\n\t\t\t\tif (arg.defaultValue === undefined)\n\t\t\t\t\tsignature.push(arg.name);\n\t\t\t\telse\n\t\t\t\t\tsignature.push(arg.name+\"=\", arg.defaultValue);\n\t\t\t}\n\t\t\tif (this.signature.remargs !== null)\n\t\t\t\tsignature.push(\"*\" + this.signature.remargs);\n\t\t\tif (this.signature.remkwargs !== null)\n\t\t\t\tsignature.push(\"**\" + this.signature.remkwargs);\n\t\t}\n\t\tencoder.dump(signature);\n\t\tsuper.ul4ondump(encoder);\n\t}\n\n\tul4onload(decoder)\n\t{\n\t\tlet loaded_api_version = decoder.load();\n\t\tlet signature;\n\n\t\tif (loaded_api_version === null)\n\t\t\tthrow new ValueError(\"UL4ON doesn't support templates in 'source' format in Javascript implementation\");\n\n\t\tif (loaded_api_version !== api_version)\n\t\t\tthrow new ValueError(\"invalid version, expected \" + api_version + \", got \" + loaded_api_version);\n\n\t\tthis.name = decoder.load();\n\t\tthis._source = decoder.load();\n\t\tthis.whitespace = decoder.load();\n\t\tthis.startdelim = decoder.load();\n\t\tthis.enddelim = decoder.load();\n\t\tthis.docpos = decoder.load();\n\t\tthis.parenttemplate = decoder.load();\n\t\tsignature = decoder.load();\n\t\tif (_islist(signature))\n\t\t\tsignature = new Signature(...signature);\n\t\tthis.signature = signature;\n\t\tthis._ul4_callsignature = signature;\n\t\tthis._ul4_rendersignature = signature;\n\t\tsuper.ul4onload(decoder);\n\t}\n\n\tloads(string)\n\t{\n\t\treturn loads(string);\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet signature = null;\n\t\tif (this.signature !== null)\n\t\t\tsignature = this.signature._handle_eval(context);\n\t\tlet closure = new TemplateClosure(this, signature, context.vars);\n\t\tcontext.set(this.name, closure);\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<Template\");\n\t\tif (this.name !== null)\n\t\t{\n\t\t\tout.push(\" name=\");\n\t\t\tout.push(_repr(this.name));\n\t\t}\n\t\tout.push(\" whitespace=\");\n\t\tout.push(_repr(this.whitespace));\n\t\tif (this.startdelim !== \"<?\")\n\t\t{\n\t\t\tout.push(\" startdelim=\");\n\t\t\tout.push(_repr(this.startdelim));\n\t\t}\n\t\tif (this.enddelim !== \"?>\")\n\t\t{\n\t\t\tout.push(\" enddelim=\");\n\t\t\tout.push(_repr(this.enddelim));\n\t\t}\n\t\tout.push(\">\");\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(\"def \");\n\t\tout.push(this.name ? this.name : \"unnamed\");\n\t\tout.push(\":\");\n\t\tout.push(+1);\n\t\tBlockAST.prototype._str.call(this, out);\n\t\tout.push(-1);\n\t}\n\n\t_renderbound(context, vars)\n\t{\n\t\tlet localcontext = context.replacevars(vars);\n\t\ttry\n\t\t{\n\t\t\tBlockAST.prototype._eval.call(this, localcontext);\n\t\t}\n\t\tcatch (exc)\n\t\t{\n\t\t\tif (!(exc instanceof ReturnException))\n\t\t\t\tthrow exc;\n\t\t}\n\t}\n\n\t__render__(context, vars)\n\t{\n\t\tthis._renderbound(context, vars);\n\t}\n\n\trender(context, vars)\n\t{\n\t\tthis._renderbound(context, vars);\n\t}\n\n\t_rendersbound(context, vars)\n\t{\n\t\tlet localcontext = context.replaceoutput();\n\t\tthis._renderbound(localcontext, vars);\n\t\treturn localcontext.getoutput();\n\t}\n\n\trenders(vars, globals)\n\t{\n\t\tlet context = new Context({}, globals);\n\t\tvars = vars || {};\n\t\tif (this.signature !== null)\n\t\t\tvars = this.signature.bindObject(this.name, [], vars);\n\t\treturn this._rendersbound(context, vars);\n\t}\n\n\tdoc()\n\t{\n\t\treturn this.docpos != null ? this.docpos.of(this._source) : null;\n\t}\n\n\t_callbound(context, vars)\n\t{\n\t\tlet localcontext = context.replacevars(vars);\n\t\ttry\n\t\t{\n\t\t\tBlockAST.prototype._eval.call(this, localcontext);\n\t\t}\n\t\tcatch (exc)\n\t\t{\n\t\t\tif (exc instanceof ReturnException)\n\t\t\t\treturn exc.result;\n\t\t\telse\n\t\t\t\tthrow exc;\n\t\t}\n\t\treturn null;\n\t}\n\n\tcall(vars, globals)\n\t{\n\t\tlet context = new Context({}, globals);\n\t\tvars = vars || {};\n\t\tif (this.signature !== null)\n\t\t\tvars = this.signature.bindObject(this.name, [], vars);\n\t\treturn this._callbound(context, vars);\n\t}\n\n\t__call__(context, vars)\n\t{\n\t\treturn this._callbound(context, vars);\n\t}\n\n\tul4type()\n\t{\n\t\treturn \"template\";\n\t}\n};\n\nTemplate.prototype._ul4_callneedsobject = true;\nTemplate.prototype._ul4_callneedscontext = true;\nTemplate.prototype._ul4_renderneedsobject = true;\nTemplate.prototype._ul4_renderneedscontext = true;\n\nexport class SignatureAST extends CodeAST\n{\n\tconstructor(template, pos)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.params = [];\n\t}\n\n\tul4ondump(encoder)\n\t{\n\t\tsuper.ul4ondump(encoder);\n\n\t\tlet dump = [];\n\n\t\tfor (let param of this.params)\n\t\t{\n\t\t\tif (param[1] === null)\n\t\t\t\tdump.push(param[0]);\n\t\t\telse\n\t\t\t\tdump.push(param);\n\t\t}\n\t\tencoder.dump(dump);\n\t}\n\n\tul4onload(decoder)\n\t{\n\t\tsuper.ul4onload(decoder);\n\t\tlet dump = decoder.load();\n\t\tthis.params = [];\n\t\tfor (let param of dump)\n\t\t{\n\t\t\tif (typeof(param) === \"string\")\n\t\t\t\tthis.params.push([param, null]);\n\t\t\telse\n\t\t\t\tthis.params.push(param);\n\t\t}\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet args = [];\n\t\tfor (let param of this.params)\n\t\t{\n\t\t\tif (param[1] === null)\n\t\t\t\targs.push(param[0]);\n\t\t\telse\n\t\t\t{\n\t\t\t\targs.push(param[0] + \"=\");\n\t\t\t\targs.push(param[1]._handle_eval(context));\n\t\t\t}\n\t\t}\n\t\treturn new Signature(...args);\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<\");\n\t\tout.push(this.constructor.name);\n\t\tout.push(\" params=\");\n\t\tthis.params._repr(out);\n\t\tout.push(\">\");\n\t}\n};\n\nexport class TemplateClosure extends Proto\n{\n\tconstructor(template, signature, vars)\n\t{\n\t\tsuper();\n\t\tthis.template = template;\n\t\tthis.signature = signature;\n\t\tthis.vars = vars;\n\t\tthis._ul4_callsignature = signature;\n\t\tthis._ul4_rendersignature = signature;\n\t\t// Copy over the required attribute from the template\n\t\tthis.name = template.name;\n\t\tthis.tag = template.tag;\n\t\tthis.endtag = template.endtag;\n\t\tthis._source = template._source;\n\t\tthis.startdelim = template.startdelim;\n\t\tthis.enddelim = template.enddelim;\n\t\tthis.docpos = template.docpos;\n\t\tthis.content = template.content;\n\t}\n\n\t__render__(context, vars)\n\t{\n\t\tthis.template._renderbound(context, _extend(this.vars, vars));\n\t}\n\n\trender(context, vars)\n\t{\n\t\tthis.template._renderbound(context, _extend(this.vars, vars));\n\t}\n\n\t__call__(context, vars)\n\t{\n\t\treturn this.template._callbound(context, _extend(this.vars, vars));\n\t}\n\n\t_renderbound(context, vars)\n\t{\n\t\tthis.template._renderbound(context, _extend(this.vars, vars));\n\t}\n\n\t_rendersbound(context, vars)\n\t{\n\t\treturn this.template._rendersbound(context, _extend(this.vars, vars));\n\t}\n\n\t__getattr__(attrname)\n\t{\n\t\tlet self = this;\n\t\tswitch (attrname)\n\t\t{\n\t\t\tcase \"render\":\n\t\t\t\tlet render = function render(context, vars){ self._renderbound(context, vars); };\n\t\t\t\texpose(render, this.signature, {needscontext: true, needsobject: true});\n\t\t\t\treturn render;\n\t\t\tcase \"renders\":\n\t\t\t\tlet renders = function renders(context, vars){ return self._rendersbound(context, vars); };\n\t\t\t\texpose(renders, this.signature, {needscontext: true, needsobject: true});\n\t\t\t\treturn renders;\n\t\t\tcase \"signature\":\n\t\t\t\treturn this.signature;\n\t\t\tdefault:\n\t\t\t\treturn this.template.__getattr__(attrname);\n\t\t}\n\t}\n\n\tul4type()\n\t{\n\t\treturn \"template\";\n\t}\n};\n\nTemplateClosure.prototype._ul4_callneedsobject = true;\nTemplateClosure.prototype._ul4_callneedscontext = true;\nTemplateClosure.prototype._ul4_renderneedsobject = true;\nTemplateClosure.prototype._ul4_renderneedscontext = true;\n\n// Create a color object from the red, green, blue and alpha values ``r``, ``g``, ``b`` and ``b``\nexport function _rgb(r, g, b, a)\n{\n\treturn new Color(255*r, 255*g, 255*b, 255*a);\n};\n\n// Convert ``obj`` to a string and escape the characters ``&``, ``<``, ``>``, ``'`` and ``\"`` with their XML character/entity reference\nexport function _xmlescape(obj)\n{\n\tobj = _str(obj);\n\tobj = obj.replace(/&/g, \"&amp;\");\n\tobj = obj.replace(/</g, \"&lt;\");\n\tobj = obj.replace(/>/g, \"&gt;\");\n\tobj = obj.replace(/'/g, \"&#39;\");\n\tobj = obj.replace(/\"/g, \"&quot;\");\n\treturn obj;\n};\n\n// Convert ``obj`` to a string suitable for output into a CSV file\nexport function _csv(obj)\n{\n\tif (obj === null)\n\t\treturn \"\";\n\telse if (typeof(obj) !== \"string\")\n\t\tobj = _repr(obj);\n\tif (obj.indexOf(\",\") !== -1 || obj.indexOf('\"') !== -1 || obj.indexOf(\"\\n\") !== -1)\n\t\tobj = '\"' + obj.replace(/\"/g, '\"\"') + '\"';\n\treturn obj;\n};\n\n// Return a string containing one character with the codepoint ``i``\nexport function _chr(i)\n{\n\tif (typeof(i) !== \"number\")\n\t\tthrow new TypeError(\"chr() requires an int\");\n\treturn String.fromCharCode(i);\n};\n\n// Return the codepoint for the one and only character in the string ``c``\nexport function _ord(c)\n{\n\tif (typeof(c) !== \"string\" || c.length != 1)\n\t\tthrow new TypeError(\"ord() requires a string of length 1\");\n\treturn c.charCodeAt(0);\n};\n\n// Convert an integer to a hexadecimal string\nexport function _hex(number)\n{\n\tif (typeof(number) !== \"number\")\n\t\tthrow new TypeError(\"hex() requires an int\");\n\tif (number < 0)\n\t\treturn \"-0x\" + number.toString(16).substr(1);\n\telse\n\t\treturn \"0x\" + number.toString(16);\n};\n\n// Convert an integer to a octal string\nexport function _oct(number)\n{\n\tif (typeof(number) !== \"number\")\n\t\tthrow new TypeError(\"oct() requires an int\");\n\tif (number < 0)\n\t\treturn \"-0o\" + number.toString(8).substr(1);\n\telse\n\t\treturn \"0o\" + number.toString(8);\n};\n\n// Convert an integer to a binary string\nexport function _bin(number)\n{\n\tif (typeof(number) !== \"number\")\n\t\tthrow new TypeError(\"bin() requires an int\");\n\tif (number < 0)\n\t\treturn \"-0b\" + number.toString(2).substr(1);\n\telse\n\t\treturn \"0b\" + number.toString(2);\n};\n\n// Return the minimum value\nexport function _min(obj)\n{\n\tif (obj.length == 0)\n\t\tthrow new ArgumentError(\"min() requires at least 1 argument, 0 given\");\n\telse if (obj.length == 1)\n\t\tobj = obj[0];\n\tlet iter = _iter(obj);\n\tlet result;\n\tlet first = true;\n\twhile (true)\n\t{\n\t\tlet item = iter.next();\n\t\tif (item.done)\n\t\t{\n\t\t\tif (first)\n\t\t\t\tthrow new ValueError(\"min() argument is an empty sequence!\");\n\t\t\treturn result;\n\t\t}\n\t\tif (first || (item.value < result))\n\t\t\tresult = item.value;\n\t\tfirst = false;\n\t}\n};\n\n// Return the maximum value\nexport function _max(obj)\n{\n\tif (obj.length == 0)\n\t\tthrow new ArgumentError(\"max() requires at least 1 argument, 0 given\");\n\telse if (obj.length == 1)\n\t\tobj = obj[0];\n\tlet iter = _iter(obj);\n\tlet result;\n\tlet first = true;\n\twhile (true)\n\t{\n\t\tlet item = iter.next();\n\t\tif (item.done)\n\t\t{\n\t\t\tif (first)\n\t\t\t\tthrow new ValueError(\"max() argument is an empty sequence!\");\n\t\t\treturn result;\n\t\t}\n\t\tif (first || (item.value > result))\n\t\t\tresult = item.value;\n\t\tfirst = false;\n\t}\n};\n\n// Return the of the values from the iterable starting with ``start`` (default ``0``)\nexport function _sum(iterable, start=0)\n{\n\tfor (let iter = _iter(iterable);;)\n\t{\n\t\tlet item = iter.next();\n\t\tif (item.done)\n\t\t\tbreak;\n\t\tstart += item.value;\n\t}\n\treturn start;\n};\n\n// Return the first value produced by iterating through ``iterable`` (defaulting to ``defaultValue`` if the iterator is empty)\nexport function _first(iterable, defaultValue=null)\n{\n\tlet item = _iter(iterable).next();\n\treturn item.done ? defaultValue : item.value;\n};\n\n// Return the last value produced by iterating through ``iterable`` (defaulting to ``defaultValue`` if the iterator is empty)\nexport function _last(iterable, defaultValue=null)\n{\n\tlet value = defaultValue;\n\n\tfor (let iter = _iter(iterable);;)\n\t{\n\t\tlet item = iter.next();\n\t\tif (item.done)\n\t\t\tbreak;\n\t\tvalue = item.value;\n\t}\n\treturn value;\n};\n\n// Return a sorted version of ``iterable``\nexport function _sorted(context, iterable, key=null, reverse=false)\n{\n\tif (key === null)\n\t{\n\t\t// FIXME: stability\n\t\tlet cmp = reverse ? function cmp(a, b)\n\t\t{\n\t\t\treturn -_cmp(\"<=>\", a, b);\n\t\t} : function cmp(a, b)\n\t\t{\n\t\t\treturn _cmp(\"<=>\", a, b);\n\t\t};\n\t\tlet result = _list(iterable);\n\t\tresult.sort(cmp);\n\t\treturn result;\n\t}\n\telse\n\t{\n\t\tlet sort = [];\n\n\t\tfor (let i = 0, iter = _iter(iterable);;++i)\n\t\t{\n\t\t\tlet item = iter.next();\n\t\t\tif (item.done)\n\t\t\t\tbreak;\n\t\t\tlet keyvalue = _call(context, key, [item.value], {});\n\t\t\t// For a stable sorting we have to use the negative index if\n\t\t\t// reverse sorting is specified\n\t\t\tsort.push([keyvalue, reverse ? -i : i, item.value]);\n\t\t}\n\t\tfunction cmp(s1, s2)\n\t\t{\n\t\t\tlet res = _cmp(\"<=>\", s1[0], s2[0]);\n\t\t\tif (res)\n\t\t\t\treturn reverse ? -res : res;\n\t\t\tres = _cmp(\"<=>\", s1[1], s2[1]);\n\t\t\treturn reverse ? -res : res;\n\t\t};\n\n\t\tsort.sort(cmp);\n\n\t\tlet result = [];\n\t\tfor (let item of sort)\n\t\t\tresult.push(item[2]);\n\t\treturn result;\n\t}\n};\n\n// Return a iterable object iterating from ``start`` up to (but not including) ``stop`` with a step size of ``step``\nexport function _range(args)\n{\n\tlet start, stop, step;\n\tif (args.length < 1)\n\t\tthrow new ArgumentError(\"required range() argument missing\");\n\telse if (args.length > 3)\n\t\tthrow new ArgumentError(\"range() expects at most 3 positional arguments, \" + args.length + \" given\");\n\telse if (args.length == 1)\n\t{\n\t\tstart = 0;\n\t\tstop = args[0];\n\t\tstep = 1;\n\t}\n\telse if (args.length == 2)\n\t{\n\t\tstart = args[0];\n\t\tstop = args[1];\n\t\tstep = 1;\n\t}\n\telse if (args.length == 3)\n\t{\n\t\tstart = args[0];\n\t\tstop = args[1];\n\t\tstep = args[2];\n\t}\n\tlet lower, higher;\n\tif (step === 0)\n\t\tthrow new ValueError(\"range() requires a step argument != 0\");\n\telse if (step > 0)\n\t{\n\t\tlower = start;\n\t\thigher = stop;\n\t}\n\telse\n\t{\n\t\tlower = stop;\n\t\thigher = start;\n\t}\n\tlet length = (lower < higher) ? Math.floor((higher - lower - 1)/Math.abs(step)) + 1 : 0;\n\n\treturn {\n\t\tindex: 0,\n\t\tnext: function()\n\t\t{\n\t\t\tif (this.index >= length)\n\t\t\t\treturn {done: true};\n\t\t\treturn {value: start + (this.index++) * step, done: false};\n\t\t}\n\t};\n};\n\n// Return a iterable object returning a slice from the argument\nexport function _slice(args)\n{\n\tlet iterable, start, stop, step;\n\tif (args.length < 2)\n\t\tthrow new ArgumentError(\"required slice() argument missing\");\n\telse if (args.length > 4)\n\t\tthrow new ArgumentError(\"slice() expects at most 4 positional arguments, \" + args.length + \" given\");\n\telse if (args.length == 2)\n\t{\n\t\titerable = args[0];\n\t\tstart = 0;\n\t\tstop = args[1];\n\t\tstep = 1;\n\t}\n\telse if (args.length == 3)\n\t{\n\t\titerable = args[0];\n\t\tstart = args[1] !== null ? args[1] : 0;\n\t\tstop = args[2];\n\t\tstep = 1;\n\t}\n\telse if (args.length == 4)\n\t{\n\t\titerable = args[0];\n\t\tstart = args[1] !== null ? args[1] : 0;\n\t\tstop = args[2];\n\t\tstep = args[3] !== null ? args[3] : 1;\n\t}\n\tif (start < 0)\n\t\tthrow new ValueError(\"slice() requires a start argument >= 0\");\n\tif (stop < 0)\n\t\tthrow new ValueError(\"slice() requires a stop argument >= 0\");\n\tif (step <= 0)\n\t\tthrow new ValueError(\"slice() requires a step argument > 0\");\n\n\tlet next = start, count = 0;\n\tlet iter = _iter(iterable);\n\treturn {\n\t\tnext: function() {\n\t\t\tlet result;\n\t\t\twhile (count < next)\n\t\t\t{\n\t\t\t\tresult = iter.next();\n\t\t\t\tif (result.done)\n\t\t\t\t\treturn result;\n\t\t\t\t++count;\n\t\t\t}\n\t\t\tif (stop !== null && count >= stop)\n\t\t\t\treturn {done: true};\n\t\t\tresult = iter.next();\n\t\t\tif (result.done)\n\t\t\t\treturn result;\n\t\t\t++count;\n\t\t\tnext += step;\n\t\t\tif (stop !== null && next > stop)\n\t\t\t\tnext = stop;\n\t\t\treturn result;\n\t\t}\n\t};\n};\n\n// ``%`` escape unsafe characters in the string ``string``\nexport function _urlquote(string)\n{\n\treturn encodeURIComponent(string);\n};\n\n// The inverse function of ``urlquote``\nexport function _urlunquote(string)\n{\n\treturn decodeURIComponent(string);\n};\n\n// Return a reverse iterator over ``sequence``\nexport function _reversed(sequence)\n{\n\tif (typeof(sequence) !== \"string\" && !_islist(sequence)) // We don't have to materialize strings or lists\n\t\tsequence = _list(sequence);\n\treturn {\n\t\tindex: sequence.length-1,\n\t\tnext: function() {\n\t\t\treturn this.index >= 0 ? {value: sequence[this.index--], done: false} : {done: true};\n\t\t}\n\t};\n};\n\n// Returns a random number in the interval ``[0;1[``\nexport function _random()\n{\n\treturn Math.random();\n};\n\n// Return a randomly select item from ``range(start, stop, step)``\nexport function _randrange(args)\n{\n\tlet start, stop, step;\n\tif (args.length < 1)\n\t\tthrow new ArgumentError(\"required randrange() argument missing\");\n\telse if (args.length > 3)\n\t\tthrow new ArgumentError(\"randrange() expects at most 3 positional arguments, \" + args.length + \" given\");\n\telse if (args.length == 1)\n\t{\n\t\tstart = 0;\n\t\tstop = args[0];\n\t\tstep = 1;\n\t}\n\telse if (args.length == 2)\n\t{\n\t\tstart = args[0];\n\t\tstop = args[1];\n\t\tstep = 1;\n\t}\n\telse if (args.length == 3)\n\t{\n\t\tstart = args[0];\n\t\tstop = args[1];\n\t\tstep = args[2];\n\t}\n\tlet width = stop-start;\n\n\tlet value = Math.random();\n\n\tlet n;\n\tif (step > 0)\n\t\tn = Math.floor((width + step - 1) / step);\n\telse if (step < 0)\n\t\tn = Math.floor((width + step + 1) / step);\n\telse\n\t\tthrow new ValueError(\"randrange() requires a step argument != 0\");\n\treturn start + step*Math.floor(value * n);\n};\n\n// Return a random item/char from the list/string ``sequence``\nexport function _randchoice(sequence)\n{\n\tlet iscolor = _iscolor(sequence);\n\tif (typeof(sequence) !== \"string\" && !_islist(sequence) && !iscolor)\n\t\tthrow new TypeError(\"randchoice() requires a string or list\");\n\tif (iscolor)\n\t\tsequence = _list(sequence);\n\treturn sequence[Math.floor(Math.random() * sequence.length)];\n};\n\n// Round a number ``x`` to ``digits`` decimal places (may be negative)\nexport function _round(x, digits=0)\n{\n\tif (digits)\n\t{\n\t\tlet threshold = Math.pow(10, digits);\n\t\treturn Math.round(x*threshold)/threshold;\n\t}\n\telse\n\t\treturn Math.round(x);\n};\n\n// Return a hex-encode MD5 hash of the argument\n// This uses the md5 function from https://github.com/blueimp/JavaScript-MD5\nimport md5 from 'blueimp-md5';\n\nexport function _md5(string)\n{\n\treturn md5(string);\n}\n\nexport function _scrypt(string, salt)\n{\n\tthrow new NotImplementedError(\"scrypt() is not implemented\");\n}\n\n// Return an iterator over ``[index, item]`` lists from the iterable object ``iterable``. ``index`` starts at ``start`` (defaulting to 0)\nexport function _enumerate(iterable, start=0)\n{\n\treturn {\n\t\titer: _iter(iterable),\n\t\tindex: start,\n\t\tnext: function() {\n\t\t\tlet item = this.iter.next();\n\t\t\treturn item.done ? item : {value: [this.index++, item.value], done: false};\n\t\t}\n\t};\n};\n\n// Return an iterator over ``[isfirst, item]`` lists from the iterable object ``iterable`` (``isfirst`` is true for the first item, false otherwise)\nexport function _isfirst(iterable)\n{\n\tlet iter = _iter(iterable);\n\tlet isfirst = true;\n\treturn {\n\t\tnext: function() {\n\t\t\tlet item = iter.next();\n\t\t\tlet result = item.done ? item : {value: [isfirst, item.value], done: false};\n\t\t\tisfirst = false;\n\t\t\treturn result;\n\t\t}\n\t};\n};\n\n// Return an iterator over ``[islast, item]`` lists from the iterable object ``iterable`` (``islast`` is true for the last item, false otherwise)\nexport function _islast(iterable)\n{\n\tlet iter = _iter(iterable);\n\tlet lastitem = iter.next();\n\treturn {\n\t\tnext: function() {\n\t\t\tif (lastitem.done)\n\t\t\t\treturn lastitem;\n\t\t\tlet item = iter.next();\n\t\t\tlet result = {value: [item.done, lastitem.value], done: false};\n\t\t\tlastitem = item;\n\t\t\treturn result;\n\t\t}\n\t};\n};\n\n// Return an iterator over ``[isfirst, islast, item]`` lists from the iterable object ``iterable`` (``isfirst`` is true for the first item, ``islast`` is true for the last item. Both are false otherwise)\nexport function _isfirstlast(iterable)\n{\n\tlet iter = _iter(iterable);\n\tlet isfirst = true;\n\tlet lastitem = iter.next();\n\treturn {\n\t\tnext: function() {\n\t\t\tif (lastitem.done)\n\t\t\t\treturn lastitem;\n\t\t\tlet item = iter.next();\n\t\t\tlet result = {value: [isfirst, item.done, lastitem.value], done: false};\n\t\t\tlastitem = item;\n\t\t\tisfirst = false;\n\t\t\treturn result;\n\t\t}\n\t};\n};\n\n// Return an iterator over ``[index, isfirst, islast, item]`` lists from the iterable object ``iterable`` (``isfirst`` is true for the first item, ``islast`` is true for the last item. Both are false otherwise)\nexport function _enumfl(iterable, start=0)\n{\n\tlet iter = _iter(iterable);\n\tlet i = start;\n\tlet isfirst = true;\n\tlet lastitem = iter.next();\n\treturn {\n\t\tnext: function() {\n\t\t\tif (lastitem.done)\n\t\t\t\treturn lastitem;\n\t\t\tlet item = iter.next();\n\t\t\tlet result = {value: [i++, isfirst, item.done, lastitem.value], done: false};\n\t\t\tlastitem = item;\n\t\t\tisfirst = false;\n\t\t\treturn result;\n\t\t}\n\t};\n};\n\n// Return an iterator over lists, where the i'th list consists of all i'th items from the arguments (terminating when the shortest argument ends)\nexport function _zip(iterables)\n{\n\tlet result;\n\tif (iterables.length)\n\t{\n\t\tlet iters = [];\n\t\tfor (let iterable of iterables)\n\t\t\titers.push(_iter(iterable));\n\n\t\treturn {\n\t\t\tnext: function() {\n\t\t\t\tlet items = [];\n\t\t\t\tfor (let iter of iters)\n\t\t\t\t{\n\t\t\t\t\tlet item = iter.next();\n\t\t\t\t\tif (item.done)\n\t\t\t\t\t\treturn item;\n\t\t\t\t\titems.push(item.value);\n\t\t\t\t}\n\t\t\t\treturn {value: items, done: false};\n\t\t\t}\n\t\t};\n\t}\n\telse\n\t{\n\t\treturn {\n\t\t\tnext: function() {\n\t\t\t\treturn {done: true};\n\t\t\t}\n\t\t};\n\t}\n};\n\n// Return the absolute value for the number ``number``\nexport function _abs(number)\n{\n\tif (number !== null && typeof(number.__abs__) === \"function\")\n\t\treturn number.__abs__();\n\treturn Math.abs(number);\n};\n\n// Return a ``Date`` object from the arguments passed in\nexport function _date(year, month, day)\n{\n\treturn new Date_(year, month, day);\n};\n\nexport function _datetime(year, month, day, hour=0, minute=0, second=0, microsecond=0)\n{\n\treturn new Date(year, month-1, day, hour, minute, second, microsecond/1000);\n};\n\n// Return a ``TimeDelta`` object from the arguments passed in\nexport function _timedelta(days=0, seconds=0, microseconds=0)\n{\n\treturn new TimeDelta(days, seconds, microseconds);\n};\n\n// Return a ``MonthDelta`` object from the arguments passed in\nexport function _monthdelta(months=0)\n{\n\treturn new MonthDelta(months);\n};\n\n// Return a ``Color`` object from the hue, luminescence, saturation and alpha values ``h``, ``l``, ``s`` and ``a`` (i.e. using the HLS color model)\nexport function _hls(h, l, s, a)\n{\n\tlet _v = function _v(m1, m2, hue)\n\t{\n\t\thue = hue % 1.0;\n\t\tif (hue < 1/6)\n\t\t\treturn m1 + (m2-m1)*hue*6.0;\n\t\telse if (hue < 0.5)\n\t\t\treturn m2;\n\t\telse if (hue < 2/3)\n\t\t\treturn m1 + (m2-m1)*(2/3-hue)*6.0;\n\t\treturn m1;\n\t};\n\n\tlet m1, m2;\n\tif (a === undefined)\n\t\ta = 1;\n\tif (s === 0.0)\n\t\treturn _rgb(l, l, l, a);\n\tif (l <= 0.5)\n\t\tm2 = l * (1.0+s);\n\telse\n\t\tm2 = l+s-(l*s);\n\tm1 = 2.0*l - m2;\n\treturn _rgb(_v(m1, m2, h+1/3), _v(m1, m2, h), _v(m1, m2, h-1/3), a);\n};\n\n// Return a ``Color`` object from the hue, saturation, value and alpha values ``h``, ``s``, ``v`` and ``a`` (i.e. using the HSV color model)\nexport function _hsv(h, s, v, a)\n{\n\tif (s === 0.0)\n\t\treturn _rgb(v, v, v, a);\n\tlet i = Math.floor(h*6.0);\n\tlet f = (h*6.0) - i;\n\tlet p = v*(1.0 - s);\n\tlet q = v*(1.0 - s*f);\n\tlet t = v*(1.0 - s*(1.0-f));\n\tswitch (i%6)\n\t{\n\t\tcase 0:\n\t\t\treturn _rgb(v, t, p, a);\n\t\tcase 1:\n\t\t\treturn _rgb(q, v, p, a);\n\t\tcase 2:\n\t\t\treturn _rgb(p, v, t, a);\n\t\tcase 3:\n\t\t\treturn _rgb(p, q, v, a);\n\t\tcase 4:\n\t\t\treturn _rgb(t, p, v, a);\n\t\tcase 5:\n\t\t\treturn _rgb(v, p, q, a);\n\t}\n};\n\n// Return the item with the key ``key`` from the dict ``container``. If ``container`` doesn't have this key, return ``defaultvalue``\nexport function _get(container, key, defaultvalue)\n{\n\tif (_ismap(container))\n\t{\n\t\tif (container.has(key))\n\t\t\treturn container.get(key);\n\t\treturn defaultvalue;\n\t}\n\telse if (_isobject(container))\n\t{\n\t\tlet result = container[key];\n\t\tif (result === undefined)\n\t\t\treturn defaultvalue;\n\t\treturn result;\n\t}\n\tthrow new TypeError(\"get() requires a dict\");\n};\n\n// Return a ``Date`` object for the current time\nexport function now()\n{\n\treturn new Date();\n};\n\n// Return a ``Date`` object for the current time in UTC\nexport function utcnow()\n{\n\tlet now = new Date();\n\t// FIXME: The timezone is wrong for the new ``Date`` object.\n\treturn new Date(now.getUTCFullYear(), now.getUTCMonth(), now.getUTCDate(), now.getUTCHours(), now.getUTCMinutes(), now.getUTCSeconds(), now.getUTCMilliseconds());\n};\n\n// Return an ``Date`` object for today\nexport function today()\n{\n\tlet now = new Date();\n\treturn new Date_(now.getFullYear(), now.getMonth()+1, now.getDate());\n};\n\nexport let functions = {\n\trepr: _repr,\n\tascii: _ascii,\n\tstr: _str,\n\tint: _int,\n\tfloat: _float,\n\tlist: _list,\n\tset: _set,\n\tbool: _bool,\n\tlen: _len,\n\ttype: _type,\n\tformat: _format,\n\tany: _any,\n\tall: _all,\n\tzip: _zip,\n\tgetattr: _getattr,\n\thasattr: _hasattr,\n\tdir: _dir,\n\tisundefined: _isundefined,\n\tisdefined: _isdefined,\n\tisnone: _isnone,\n\tisbool: _isbool,\n\tisint: _isint,\n\tisfloat: _isfloat,\n\tisstr: _isstr,\n\tisdate: _isdate,\n\tisdatetime: _isdatetime,\n\tiscolor: _iscolor,\n\tistimedelta: _istimedelta,\n\tismonthdelta: _ismonthdelta,\n\tistemplate: _istemplate,\n\tisfunction: _isfunction,\n\tislist: _islist,\n\tisset: _isanyset,\n\tisdict: _isdict,\n\tisexception: _isexception,\n\tasjson: _asjson,\n\tfromjson: _fromjson,\n\tasul4on: _asul4on,\n\tfromul4on: _fromul4on,\n\tnow: now,\n\tutcnow: utcnow,\n\ttoday: today,\n\tenumerate: _enumerate,\n\tisfirst: _isfirst,\n\tislast: _islast,\n\tisfirstlast: _isfirstlast,\n\tenumfl: _enumfl,\n\tabs: _abs,\n\tdate: _date,\n\tdatetime: _datetime,\n\ttimedelta: _timedelta,\n\tmonthdelta: _monthdelta,\n\trgb: _rgb,\n\thls: _hls,\n\thsv: _hsv,\n\txmlescape: _xmlescape,\n\tcsv: _csv,\n\tchr: _chr,\n\tord: _ord,\n\thex: _hex,\n\toct: _oct,\n\tbin: _bin,\n\tmin: _min,\n\tmax: _max,\n\tsum: _sum,\n\tfirst: _first,\n\tlast: _last,\n\tsorted: _sorted,\n\trange: _range,\n\tslice: _slice,\n\turlquote: _urlquote,\n\turlunquote: _urlunquote,\n\treversed: _reversed,\n\trandom: _random,\n\trandrange: _randrange,\n\trandchoice: _randchoice,\n\tround: _round,\n\tmd5: _md5,\n\tscrypt: _scrypt\n};\n\nexpose(_repr, [\"obj\"], {name: \"repr\"});\nexpose(_ascii, [\"obj\"], {name: \"ascii\"});\nexpose(_str, [\"obj=\", \"\"], {name: \"str\"});\nexpose(_int, [\"obj=\", 0, \"base=\", null], {name: \"int\"});\nexpose(_float, [\"obj=\", 0.0], {name: \"float\"});\nexpose(_list, [\"iterable=\", []], {name: \"list\"});\nexpose(_set, [\"iterable=\", []], {name: \"set\"});\nexpose(_bool, [\"obj=\", false], {name: \"bool\"});\nexpose(_len, [\"sequence\"], {name: \"len\"});\nexpose(_type, [\"obj\"], {name: \"type\"});\nexpose(_format, [\"obj\", \"fmt\", \"lang=\", null], {name: \"format\"});\nexpose(_any, [\"iterable\"], {name: \"any\"});\nexpose(_all, [\"iterable\"], {name: \"all\"});\nexpose(_zip, [\"*iterables\"], {name: \"zip\"});\nexpose(_getattr, [\"obj\", \"attrname\", \"default=\", null], {name: \"getattr\"});\nexpose(_hasattr, [\"obj\", \"attrname\"], {name: \"hasattr\"});\nexpose(_dir, [\"obj\"], {name: \"dir\"});\nexpose(_isundefined, [\"obj\"], {name: \"isundefined\"});\nexpose(_isdefined, [\"obj\"], {name: \"isdefined\"});\nexpose(_isnone, [\"obj\"], {name: \"isnone\"});\nexpose(_isbool, [\"obj\"], {name: \"isbool\"});\nexpose(_isint, [\"obj\"], {name: \"isint\"});\nexpose(_isfloat, [\"obj\"], {name: \"isfloat\"});\nexpose(_isstr, [\"obj\"], {name: \"isstr\"});\nexpose(_isdate, [\"obj\"], {name: \"isdate\"});\nexpose(_isdatetime, [\"obj\"], {name: \"isdatetime\"});\nexpose(_iscolor, [\"obj\"], {name: \"iscolor\"});\nexpose(_istimedelta, [\"obj\"], {name: \"istimedelta\"});\nexpose(_ismonthdelta, [\"obj\"], {name: \"ismonthdelta\"});\nexpose(_istemplate, [\"obj\"], {name: \"istemplate\"});\nexpose(_isfunction, [\"obj\"], {name: \"isfunction\"});\nexpose(_islist, [\"obj\"], {name: \"islist\"});\nexpose(_isanyset, [\"obj\"], {name: \"isset\"});\nexpose(_isdict, [\"obj\"], {name: \"isdict\"});\nexpose(_isexception, [\"obj\"], {name: \"isexception\"});\nexpose(_asjson, [\"obj\"], {name: \"asjson\"});\nexpose(_fromjson, [\"string\"], {name: \"fromjson\"});\nexpose(_asul4on, [\"obj\"], {name: \"asul4on\"});\nexpose(_fromul4on, [\"string\"], {name: \"fromul4on\"});\nexpose(now, []);\nexpose(utcnow, []);\nexpose(today, []);\nexpose(_enumerate, [\"iterable\", \"start=\", 0], {name: \"enumerate\"});\nexpose(_isfirst, [\"iterable\"], {name: \"isfirst\"});\nexpose(_islast, [\"iterable\"], {name: \"islast\"});\nexpose(_isfirstlast, [\"iterable\"], {name: \"isfirstlast\"});\nexpose(_enumfl, [\"iterable\", \"start=\", 0], {name: \"enumfl\"});\nexpose(_abs, [\"number\"], {name: \"abs\"});\nexpose(_date, [\"year\", \"month\", \"day\"], {name: \"date\"});\nexpose(_datetime, [\"year\", \"month\", \"day\", \"hour=\", 0, \"minute=\", 0, \"second=\", 0, \"microsecond=\", 0], {name: \"datetime\"});\nexpose(_timedelta, [\"days=\", 0, \"seconds=\", 0, \"microseconds=\", 0], {name: \"timedelta\"});\nexpose(_monthdelta, [\"months=\", 0], {name: \"monthdelta\"});\nexpose(_rgb, [\"r\", \"g\", \"b\", \"a=\", 1.0], {name: \"rgb\"});\nexpose(_hls, [\"h\", \"l\", \"s\", \"a=\", 1.0], {name: \"hls\"});\nexpose(_hsv, [\"h\", \"s\", \"v\", \"a=\", 1.0], {name: \"hsv\"});\nexpose(_xmlescape, [\"obj\"], {name: \"xmlescape\"});\nexpose(_csv, [\"obj\"], {name: \"csv\"});\nexpose(_chr, [\"i\"], {name: \"chr\"});\nexpose(_ord, [\"c\"], {name: \"ord\"});\nexpose(_hex, [\"number\"], {name: \"hex\"});\nexpose(_oct, [\"number\"], {name: \"oct\"});\nexpose(_bin, [\"number\"], {name: \"bin\"});\nexpose(_min, [\"*obj\"], {name: \"min\"});\nexpose(_max, [\"*obj\"], {name: \"max\"});\nexpose(_sum, [\"iterable\", \"start=\", 0], {name: \"sum\"});\nexpose(_first, [\"iterable\", \"default=\", null], {name: \"first\"});\nexpose(_last, [\"iterable\", \"default=\", null], {name: \"last\"});\nexpose(_sorted, [\"iterable\", \"key=\", null, \"reverse=\", false], {name: \"sorted\", needscontext: true});\nexpose(_range, [\"*args\"], {name: \"range\"});\nexpose(_slice, [\"*args\"], {name: \"slice\"});\nexpose(_urlquote, [\"string\"], {name: \"urlquote\"});\nexpose(_urlunquote, [\"string\"], {name: \"urlunquote\"});\nexpose(_reversed, [\"sequence\"], {name: \"reversed\"});\nexpose(_random, [], {name: \"random\"});\nexpose(_randrange, [\"*args\"], {name: \"randrange\"});\nexpose(_randchoice, [\"sequence\"], {name: \"randchoice\"});\nexpose(_round, [\"x\", \"digit=\", 0], {name: \"round\"});\nexpose(_md5, [\"string\"], {name: \"md5\"});\nexpose(_scrypt, [\"string\", \"salt\"], {name: \"scrypt\"});\n\n// Functions implementing UL4 methods\nexport function _count(obj, sub, start=null, end=null)\n{\n\tif (start < 0)\n\t\tstart += obj.length;\n\tif (start === null)\n\t\tstart = 0;\n\n\tif (end < 0)\n\t\tend += obj.length;\n\tif (end === null)\n\t\tend = obj.length;\n\n\tlet isstr = _isstr(obj);\n\n\tif (isstr && !sub.length)\n\t{\n\t\tif (end < 0 || start > obj.length || start > end)\n\t\t\treturn 0;\n\t\tlet result = end - start + 1;\n\t\tif (result > obj.length + 1)\n\t\t\tresult = obj.length + 1;\n\t\treturn result;\n\t}\n\n\tstart = _bound(start, obj.length);\n\tend = _bound(end, obj.length);\n\n\tlet count = 0;\n\tif (_islist(obj))\n\t{\n\t\tfor (let i = start; i < end; ++i)\n\t\t{\n\t\t\tif (_eq(obj[i], sub))\n\t\t\t\t++count;\n\t\t}\n\t\treturn count;\n\t}\n\telse // string\n\t{\n\t\tlet lastIndex = start;\n\n\t\tfor (;;)\n\t\t{\n\t\t\tlastIndex = obj.indexOf(sub, lastIndex);\n\t\t\tif (lastIndex == -1)\n\t\t\t\tbreak;\n\t\t\tif (lastIndex + sub.length > end)\n\t\t\t\tbreak;\n\t\t\t++count;\n\t\t\tlastIndex += sub.length;\n\t\t}\n\t\treturn count;\n\t}\n};\n\nexport function _find(obj, sub, start=null, end=null)\n{\n\tif (start < 0)\n\t\tstart += obj.length;\n\tif (start === null)\n\t\tstart = 0;\n\tif (end < 0)\n\t\tend += obj.length;\n\tif (end === null)\n\t\tend = obj.length;\n\tstart = _bound(start, obj.length);\n\tend = _bound(end, obj.length);\n\n\tif (start !== 0 || end !== obj.length)\n\t{\n\t\tif (typeof(obj) === \"string\")\n\t\t\tobj = obj.substring(start, end);\n\t\telse\n\t\t\tobj = obj.slice(start, end);\n\t}\n\tlet result = obj.indexOf(sub);\n\tif (result !== -1)\n\t\tresult += start;\n\treturn result;\n};\n\nexport function _rfind(obj, sub, start=null, end=null)\n{\n\tif (start < 0)\n\t\tstart += obj.length;\n\tif (start === null)\n\t\tstart = 0;\n\tif (end < 0)\n\t\tend += obj.length;\n\tif (end === null)\n\t\tend = obj.length;\n\tstart = _bound(start, obj.length);\n\tend = _bound(end, obj.length);\n\n\tif (start !== 0 || end !== obj.length)\n\t{\n\t\tif (typeof(obj) === \"string\")\n\t\t\tobj = obj.substring(start, end);\n\t\telse\n\t\t\tobj = obj.slice(start, end);\n\t}\n\tlet result = obj.lastIndexOf(sub);\n\tif (result !== -1)\n\t\tresult += start;\n\treturn result;\n};\n\nexport function _week4format(obj, firstweekday=null)\n{\n\tif (firstweekday === null)\n\t\tfirstweekday = 0;\n\telse\n\t\tfirstweekday %= 7;\n\n\tlet yearday = DateTimeProtocol.yearday(obj)+6;\n\tlet jan1 = new Date(obj.getFullYear(), 0, 1);\n\tlet jan1weekday = jan1.getDay();\n\tif (--jan1weekday < 0)\n\t\tjan1weekday = 6;\n\n\twhile (jan1weekday != firstweekday)\n\t{\n\t\t--yearday;\n\t\tif (++jan1weekday == 7)\n\t\t\tjan1weekday = 0;\n\t}\n\treturn Math.floor(yearday/7);\n};\n\nexport function _isleap(obj)\n{\n\treturn new Date(obj.getFullYear(), 1, 29).getMonth() === 1;\n};\n\nexport function _update(obj, others, kwargs)\n{\n\tif (!_isdict(obj))\n\t\tthrow new TypeError(\"update() requires a dict\");\n\tfor (let other of others)\n\t{\n\t\tif (_ismap(other))\n\t\t{\n\t\t\tother.forEach(function(value, key) {\n\t\t\t\t_setmap(obj, key, value);\n\t\t\t});\n\t\t}\n\t\telse if (_isobject(other))\n\t\t{\n\t\t\tfor (let key in other)\n\t\t\t\t_setmap(obj, key, other[key]);\n\t\t}\n\t\telse if (_islist(other))\n\t\t{\n\t\t\tfor (let item of other)\n\t\t\t{\n\t\t\t\tif (!_islist(item) || (item.length != 2))\n\t\t\t\t\tthrow new TypeError(\"update() requires a dict or a list of (key, value) pairs\");\n\t\t\t\t_setmap(obj, item[0], item[1]);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\tthrow new TypeError(\"update() requires a dict or a list of (key, value) pairs\");\n\t}\n\tkwargs.forEach(function(value, key) {\n\t\t_setmap(obj, key, value);\n\t});\n\treturn null;\n};\n\nexport class Color extends Proto\n{\n\tconstructor(r=0, g=0, b=0, a=255)\n\t{\n\t\tsuper();\n\t\tthis._r = r;\n\t\tthis._g = g;\n\t\tthis._b = b;\n\t\tthis._a = a;\n\t}\n\n\t__repr__()\n\t{\n\t\tlet r = _lpad(this._r.toString(16), \"0\", 2);\n\t\tlet g = _lpad(this._g.toString(16), \"0\", 2);\n\t\tlet b = _lpad(this._b.toString(16), \"0\", 2);\n\t\tlet a = _lpad(this._a.toString(16), \"0\", 2);\n\t\tif (this._a !== 0xff)\n\t\t{\n\t\t\tif (r[0] === r[1] && g[0] === g[1] && b[0] === b[1] && a[0] === a[1])\n\t\t\t\treturn \"#\" + r[0] + g[0] + b[0] + a[0];\n\t\t\telse\n\t\t\t\treturn \"#\" + r + g + b + a;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (r[0] === r[1] && g[0] === g[1] && b[0] === b[1])\n\t\t\t\treturn \"#\" + r[0] + g[0] + b[0];\n\t\t\telse\n\t\t\t\treturn \"#\" + r + g + b;\n\t\t}\n\t}\n\n\t__str__()\n\t{\n\t\tif (this._a !== 0xff)\n\t\t{\n\t\t\treturn \"rgba(\" + this._r + \", \" + this._g + \", \" + this._b + \", \" + (this._a/255) + \")\";\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlet r = _lpad(this._r.toString(16), \"0\", 2);\n\t\t\tlet g = _lpad(this._g.toString(16), \"0\", 2);\n\t\t\tlet b = _lpad(this._b.toString(16), \"0\", 2);\n\t\t\tif (r[0] === r[1] && g[0] === g[1] && b[0] === b[1])\n\t\t\t\treturn \"#\" + r[0] + g[0] + b[0];\n\t\t\telse\n\t\t\t\treturn \"#\" + r + g + b;\n\t\t}\n\t}\n\n\t__iter__()\n\t{\n\t\treturn {\n\t\t\tobj: this,\n\t\t\tindex: 0,\n\t\t\tnext: function() {\n\t\t\t\tif (this.index == 0)\n\t\t\t\t{\n\t\t\t\t\t++this.index;\n\t\t\t\t\treturn {value: this.obj._r, done: false};\n\t\t\t\t}\n\t\t\t\telse if (this.index == 1)\n\t\t\t\t{\n\t\t\t\t\t++this.index;\n\t\t\t\t\treturn {value: this.obj._g, done: false};\n\t\t\t\t}\n\t\t\t\telse if (this.index == 2)\n\t\t\t\t{\n\t\t\t\t\t++this.index;\n\t\t\t\t\treturn {value: this.obj._b, done: false};\n\t\t\t\t}\n\t\t\t\telse if (this.index == 3)\n\t\t\t\t{\n\t\t\t\t\t++this.index;\n\t\t\t\t\treturn {value: this.obj._a, done: false};\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\treturn {done: true};\n\t\t\t}\n\t\t};\n\t}\n\n\t__getattr__(attrname)\n\t{\n\t\tlet self = this;\n\t\tswitch (attrname)\n\t\t{\n\t\t\tcase \"r\":\n\t\t\t\tlet r = function r(){ return self._r; };\n\t\t\t\texpose(r, []);\n\t\t\t\treturn r;\n\t\t\tcase \"g\":\n\t\t\t\tlet g = function g(){ return self._g; };\n\t\t\t\texpose(g, []);\n\t\t\t\treturn g;\n\t\t\tcase \"b\":\n\t\t\t\tlet b = function b(){ return self._b; };\n\t\t\t\texpose(b, []);\n\t\t\t\treturn b;\n\t\t\tcase \"a\":\n\t\t\t\tlet a = function a(){ return self._a; };\n\t\t\t\texpose(a, []);\n\t\t\t\treturn a;\n\t\t\tcase \"lum\":\n\t\t\t\tlet lum = function lum(){ return self.lum(); };\n\t\t\t\texpose(lum, []);\n\t\t\t\treturn lum;\n\t\t\tcase \"hls\":\n\t\t\t\tlet hls = function hls(){ return self.hls(); };\n\t\t\t\texpose(hls, []);\n\t\t\t\treturn hls;\n\t\t\tcase \"hlsa\":\n\t\t\t\tlet hlsa = function hlsa(){ return self.hlsa(); };\n\t\t\t\texpose(hlsa, []);\n\t\t\t\treturn hlsa;\n\t\t\tcase \"hsv\":\n\t\t\t\tlet hsv = function hsv(){ return self.hsv(); };\n\t\t\t\texpose(hsv, []);\n\t\t\t\treturn hsv;\n\t\t\tcase \"hsva\":\n\t\t\t\tlet hsva = function hsva(){ return self.hsva(); };\n\t\t\t\texpose(hsva, []);\n\t\t\t\treturn hsva;\n\t\t\tcase \"witha\":\n\t\t\t\tlet witha = function witha(a){ return self.witha(a); };\n\t\t\t\texpose(witha, [\"a\"]);\n\t\t\t\treturn witha;\n\t\t\tcase \"withlum\":\n\t\t\t\tlet withlum = function withlum(lum){ return self.withlum(lum); };\n\t\t\t\texpose(withlum, [\"lum\"]);\n\t\t\t\treturn withlum;\n\t\t\tcase \"abslum\":\n\t\t\t\tlet abslum = function abslum(lum){ return self.abslum(lum); };\n\t\t\t\texpose(abslum, [\"lum\"]);\n\t\t\t\treturn abslum;\n\t\t\tcase \"rellum\":\n\t\t\t\tlet rellum = function rellum(lum){ return self.rellum(lum); };\n\t\t\t\texpose(rellum, [\"lum\"]);\n\t\t\t\treturn rellum;\n\t\t\tdefault:\n\t\t\t\tthrow new AttributeError(this, attrname);\n\t\t}\n\t}\n\n\t__getitem__(key)\n\t{\n\t\tlet orgkey = key;\n\t\tif (key < 0)\n\t\t\tkey += 4;\n\t\tswitch (key)\n\t\t{\n\t\t\tcase 0:\n\t\t\t\treturn this._r;\n\t\t\tcase 1:\n\t\t\t\treturn this._g;\n\t\t\tcase 2:\n\t\t\t\treturn this._b;\n\t\t\tcase 3:\n\t\t\t\treturn this._a;\n\t\t\tdefault:\n\t\t\t\tthrow new IndexError(this, orgkey);\n\t\t}\n\t}\n\n\t__eq__(other)\n\t{\n\t\tif (other instanceof Color)\n\t\t\treturn this._r == other._r && this._g == other._g && this._b == other._b && this._a == other._a;\n\t\treturn false;\n\t}\n\n\tr()\n\t{\n\t\t\treturn this._r;\n\t}\n\n\tg()\n\t{\n\t\treturn this._g;\n\t}\n\n\tb()\n\t{\n\t\treturn this._b;\n\t}\n\n\ta()\n\t{\n\t\treturn this._a;\n\t}\n\n\tlum()\n\t{\n\t\treturn this.hls()[1];\n\t}\n\n\thls()\n\t{\n\t\tlet r = this._r/255.0;\n\t\tlet g = this._g/255.0;\n\t\tlet b = this._b/255.0;\n\t\tlet maxc = Math.max(r, g, b);\n\t\tlet minc = Math.min(r, g, b);\n\t\tlet h, l, s;\n\t\tlet rc, gc, bc;\n\n\t\tl = (minc+maxc)/2.0;\n\t\tif (minc == maxc)\n\t\t\treturn [0.0, l, 0.0];\n\t\tif (l <= 0.5)\n\t\t\ts = (maxc-minc) / (maxc+minc);\n\t\telse\n\t\t\ts = (maxc-minc) / (2.0-maxc-minc);\n\t\trc = (maxc-r) / (maxc-minc);\n\t\tgc = (maxc-g) / (maxc-minc);\n\t\tbc = (maxc-b) / (maxc-minc);\n\t\tif (r == maxc)\n\t\t\th = bc-gc;\n\t\telse if (g == maxc)\n\t\t\th = 2.0+rc-bc;\n\t\telse\n\t\t\th = 4.0+gc-rc;\n\t\th = (h/6.0) % 1.0;\n\t\treturn [h, l, s];\n\t}\n\n\thlsa()\n\t{\n\t\tlet hls = this.hls();\n\t\treturn hls.concat(this._a/255.0);\n\t}\n\n\thsv()\n\t{\n\t\tlet r = this._r/255.0;\n\t\tlet g = this._g/255.0;\n\t\tlet b = this._b/255.0;\n\t\tlet maxc = Math.max(r, g, b);\n\t\tlet minc = Math.min(r, g, b);\n\t\tlet v = maxc;\n\t\tif (minc == maxc)\n\t\t\treturn [0.0, 0.0, v];\n\t\tlet s = (maxc-minc) / maxc;\n\t\tlet rc = (maxc-r) / (maxc-minc);\n\t\tlet gc = (maxc-g) / (maxc-minc);\n\t\tlet bc = (maxc-b) / (maxc-minc);\n\t\tlet h;\n\t\tif (r == maxc)\n\t\t\th = bc-gc;\n\t\telse if (g == maxc)\n\t\t\th = 2.0+rc-bc;\n\t\telse\n\t\t\th = 4.0+gc-rc;\n\t\th = (h/6.0) % 1.0;\n\t\treturn [h, s, v];\n\t}\n\n\thsva()\n\t{\n\t\tlet hsv = this.hsv();\n\t\treturn hsv.concat(this._a/255.0);\n\t}\n\n\twitha(a)\n\t{\n\t\tif (typeof(a) !== \"number\")\n\t\t\tthrow new TypeError(\"witha() requires a number\");\n\t\treturn new Color(this._r, this._g, this._b, a);\n\t}\n\n\twithlum(lum)\n\t{\n\t\tif (typeof(lum) !== \"number\")\n\t\t\tthrow new TypeError(\"witha() requires a number\");\n\t\tlet hlsa = this.hlsa();\n\t\treturn _hls(hlsa[0], lum, hlsa[2], hlsa[3]);\n\t}\n\n\tul4type()\n\t{\n\t\treturn \"color\";\n\t}\n};\n\nexpose(Color.prototype.r, []);\nexpose(Color.prototype.g, []);\nexpose(Color.prototype.b, []);\nexpose(Color.prototype.a, []);\nexpose(Color.prototype.lum, []);\nexpose(Color.prototype.hls, []);\nexpose(Color.prototype.hlsa, []);\nexpose(Color.prototype.hsv, []);\nexpose(Color.prototype.hsva, []);\nexpose(Color.prototype.witha, [\"a\"]);\nexpose(Color.prototype.withlum, [\"lum\"]);\n\nexport class Date_ extends Proto\n{\n\tconstructor(year, month, day)\n\t{\n\t\tsuper();\n\t\tthis._date = new Date(year, month-1, day);\n\t}\n\n\t__repr__()\n\t{\n\t\treturn '@(' + this.__str__() + \")\";\n\t}\n\n\t__str__()\n\t{\n\t\treturn _lpad(this._date.getFullYear(), \"0\", 4) + \"-\" + _lpad(this._date.getMonth()+1, \"0\", 2) + \"-\" + _lpad(this._date.getDate(), \"0\", 2);\n\t}\n\n\t__eq__(other)\n\t{\n\t\tif (other instanceof Date_)\n\t\t\treturn this._date.getTime() === other._date.getTime();\n\t\treturn false;\n\t}\n\n\t__lt__(other)\n\t{\n\t\tif (other instanceof Date_)\n\t\t\treturn this._date < other._date;\n\t\t_unorderable(\"<\", this, other);\n\t}\n\n\t__le__(other)\n\t{\n\t\tif (other instanceof Date_)\n\t\t\treturn this._date <= other._date;\n\t\t_unorderable(\"<=\", this, other);\n\t}\n\n\t__gt__(other)\n\t{\n\t\tif (other instanceof Date_)\n\t\t\treturn this._date > other._date;\n\t\t_unorderable(\">\", this, other);\n\t}\n\n\t__ge__(other)\n\t{\n\t\tif (other instanceof Date_)\n\t\t\treturn this._date >= other._date;\n\t\t_unorderable(\">=\", this, other);\n\t}\n\n\tyear()\n\t{\n\t\treturn this._date.getFullYear();\n\t}\n\n\tmonth()\n\t{\n\t\treturn this._date.getMonth()+1;\n\t}\n\n\tday()\n\t{\n\t\treturn this._date.getDate();\n\t}\n\n\tul4type()\n\t{\n\t\treturn \"date\";\n\t}\n};\n\n\nexport class TimeDelta extends Proto\n{\n\tconstructor(days=0, seconds=0, microseconds=0)\n\t{\n\t\tsuper();\n\t\tlet total_microseconds = Math.floor((days * 86400 + seconds)*1000000 + microseconds);\n\n\t\tmicroseconds = ModAST.prototype._do(total_microseconds, 1000000);\n\t\tlet total_seconds = Math.floor(total_microseconds / 1000000);\n\t\tseconds = ModAST.prototype._do(total_seconds, 86400);\n\t\tdays = Math.floor(total_seconds / 86400);\n\t\tif (seconds < 0)\n\t\t{\n\t\t\tseconds += 86400;\n\t\t\t--days;\n\t\t}\n\n\t\tthis._microseconds = microseconds;\n\t\tthis._seconds = seconds;\n\t\tthis._days = days;\n\t}\n\n\t__repr__()\n\t{\n\t\tlet v = [], first = true;\n\t\tv.push(\"timedelta(\");\n\t\tif (this._days)\n\t\t{\n\t\t\tv.push(\"days=\" + this._days);\n\t\t\tfirst = false;\n\t\t}\n\t\tif (this._seconds)\n\t\t{\n\t\t\tif (!first)\n\t\t\t\tv.push(\", \");\n\t\t\tv.push(\"seconds=\" + this._seconds);\n\t\t\tfirst = false;\n\t\t}\n\t\tif (this._microseconds)\n\t\t{\n\t\t\tif (!first)\n\t\t\t\tv.push(\", \");\n\t\t\tv.push(\"microseconds=\" + this._microseconds);\n\t\t}\n\t\tv.push(\")\");\n\t\treturn v.join(\"\");\n\t}\n\n\t__str__()\n\t{\n\t\tlet v = [];\n\t\tif (this._days)\n\t\t{\n\t\t\tv.push(this._days + \" day\");\n\t\t\tif (this._days !== -1 && this._days !== 1)\n\t\t\t\tv.push(\"s\");\n\t\t\tv.push(\", \");\n\t\t}\n\t\tlet seconds = this._seconds % 60;\n\t\tlet minutes = Math.floor(this._seconds / 60);\n\t\tlet hours = Math.floor(minutes / 60);\n\t\tminutes = minutes % 60;\n\n\t\tv.push(\"\" + hours);\n\t\tv.push(\":\");\n\t\tv.push(_lpad(minutes.toString(), \"0\", 2));\n\t\tv.push(\":\");\n\t\tv.push(_lpad(seconds.toString(), \"0\", 2));\n\t\tif (this._microseconds)\n\t\t{\n\t\t\tv.push(\".\");\n\t\t\tv.push(_lpad(this._microseconds.toString(), \"0\", 6));\n\t\t}\n\t\treturn v.join(\"\");\n\t}\n\n\t__bool__()\n\t{\n\t\treturn this._days !== 0 || this._seconds !== 0 || this._microseconds !== 0;\n\t}\n\n\t__abs__()\n\t{\n\t\treturn this._days < 0 ? new TimeDelta(-this._days, -this._seconds, -this._microseconds) : this;\n\t}\n\n\t__eq__(other)\n\t{\n\t\tif (other instanceof TimeDelta)\n\t\t\treturn (this._days === other._days) && (this._seconds === other._seconds) && (this._microseconds === other._microseconds);\n\t\treturn false;\n\t}\n\n\t__lt__(other)\n\t{\n\t\tif (other instanceof TimeDelta)\n\t\t{\n\t\t\tif (this._days != other._days)\n\t\t\t\treturn this._days < other._days;\n\t\t\tif (this._seconds != other._seconds)\n\t\t\t\treturn this._seconds < other._seconds;\n\t\t\treturn this._microseconds < other._microseconds;\n\t\t}\n\t\t_unorderable(\"<\", this, other);\n\t}\n\n\t__le__(other)\n\t{\n\t\tif (other instanceof TimeDelta)\n\t\t{\n\t\t\tif (this._days != other._days)\n\t\t\t\treturn this._days < other._days;\n\t\t\tif (this._seconds != other._seconds)\n\t\t\t\treturn this._seconds < other._seconds;\n\t\t\treturn this._microseconds <= other._microseconds;\n\t\t}\n\t\t_unorderable(\"<=\", this, other);\n\t}\n\n\t__gt__(other)\n\t{\n\t\tif (other instanceof TimeDelta)\n\t\t{\n\t\t\tif (this._days != other._days)\n\t\t\t\treturn this._days > other._days;\n\t\t\tif (this._seconds != other._seconds)\n\t\t\t\treturn this._seconds > other._seconds;\n\t\t\treturn this._microseconds > other._microseconds;\n\t\t}\n\t\t_unorderable(\">\", this, other);\n\t}\n\n\t__ge__(other)\n\t{\n\t\tif (other instanceof TimeDelta)\n\t\t{\n\t\t\tif (this._days != other._days)\n\t\t\t\treturn this._days > other._days;\n\t\t\tif (this._seconds != other._seconds)\n\t\t\t\treturn this._seconds > other._seconds;\n\t\t\treturn this._microseconds >= other._microseconds;\n\t\t}\n\t\t_unorderable(\">=\", this, other);\n\t}\n\n\t__neg__()\n\t{\n\t\treturn new TimeDelta(-this._days, -this._seconds, -this._microseconds);\n\t}\n\n\t_adddate(date, days)\n\t{\n\t\tlet year = date._date.getFullYear();\n\t\tlet month = date._date.getMonth();\n\t\tlet day = date._date.getDate() + days;\n\t\treturn new Date(year, month, day);\n\t}\n\n\t_adddatetime(date, days, seconds, microseconds)\n\t{\n\t\tlet year = date.getFullYear();\n\t\tlet month = date.getMonth();\n\t\tlet day = date.getDate() + days;\n\t\tlet hour = date.getHours();\n\t\tlet minute = date.getMinutes();\n\t\tlet second = date.getSeconds() + seconds;\n\t\tlet millisecond = date.getMilliseconds() + microseconds/1000;\n\t\treturn new Date(year, month, day, hour, minute, second, millisecond);\n\t}\n\n\t__add__(other)\n\t{\n\t\tif (other instanceof TimeDelta)\n\t\t\treturn new TimeDelta(this._days + other._days, this._seconds + other._seconds, this._microseconds + other._microseconds);\n\t\telse if (_isdate(other))\n\t\t\treturn this._adddate(other, this._days);\n\t\telse if (_isdatetime(other))\n\t\t\treturn this._adddatetime(other, this._days, this._seconds, this._microseconds);\n\t\tthrow new TypeError(_type(this) + \" + \" + _type(other) + \" not supported\");\n\t}\n\n\t__radd__(other)\n\t{\n\t\tif (_isdate(other))\n\t\t\treturn this._adddate(other, this._days);\n\t\telse if (_isdatetime(other))\n\t\t\treturn this._adddatetime(other, this._days, this._seconds, this._microseconds);\n\t\tthrow new TypeError(_type(this) + \" + \" + _type(other) + \" not supported\");\n\t}\n\n\t__sub__(other)\n\t{\n\t\tif (other instanceof TimeDelta)\n\t\t\treturn new TimeDelta(this._days - other._days, this._seconds - other._seconds, this._microseconds - other._microseconds);\n\t\tthrow new TypeError(_type(this) + \" - \" + _type(other) + \" not supported\");\n\t}\n\n\t__rsub__(other)\n\t{\n\t\tif (_isdate(other))\n\t\t\treturn this._adddate(other, -this._days);\n\t\telse if (_isdatetime(other))\n\t\t\treturn this._adddatetime(other, -this._days, -this._seconds, -this._microseconds);\n\t\tthrow new TypeError(_type(this) + \" - \" + _type(other) + \" not supported\");\n\t}\n\n\t__mul__(other)\n\t{\n\t\tif (typeof(other) === \"number\")\n\t\t\treturn new TimeDelta(this._days * other, this._seconds * other, this._microseconds * other);\n\t\tthrow new TypeError(_type(this) + \" * \" + _type(other) + \" not supported\");\n\t}\n\n\t__rmul__(other)\n\t{\n\t\tif (typeof(other) === \"number\")\n\t\t\treturn new TimeDelta(this._days * other, this._seconds * other, this._microseconds * other);\n\t\tthrow new TypeError(_type(this) + \" * \" + _type(other) + \" not supported\");\n\t}\n\n\t__truediv__(other)\n\t{\n\t\tif (typeof(other) === \"number\")\n\t\t{\n\t\t\treturn new TimeDelta(this._days / other, this._seconds / other, this._microseconds / other);\n\t\t}\n\t\telse if (other instanceof TimeDelta)\n\t\t{\n\t\t\tlet myValue = this._days;\n\t\t\tlet otherValue = other._days;\n\t\t\tlet hasSeconds = this._seconds || other._seconds;\n\t\t\tlet hasMicroseconds = this._microseconds || other._microseconds;\n\t\t\tif (hasSeconds || hasMicroseconds)\n\t\t\t{\n\t\t\t\tmyValue = myValue*86400+this._seconds;\n\t\t\t\totherValue = otherValue*86400 + other._seconds;\n\t\t\t\tif (hasMicroseconds)\n\t\t\t\t{\n\t\t\t\t\tmyValue = myValue * 1000000 + this._microseconds;\n\t\t\t\t\totherValue = otherValue * 1000000 + other._microseconds;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn myValue/otherValue;\n\t\t}\n\t\tthrow new TypeError(_type(this) + \" / \" + _type(other) + \" not supported\");\n\t}\n\n\t__getattr__(attrname)\n\t{\n\t\tlet self = this;\n\t\tswitch (attrname)\n\t\t{\n\t\t\tcase \"days\":\n\t\t\t\tlet days = function days(){ return self._days; };\n\t\t\t\texpose(days, []);\n\t\t\t\treturn days;\n\t\t\tcase \"seconds\":\n\t\t\t\tlet seconds = function seconds(){ return self._seconds; };\n\t\t\t\texpose(seconds, []);\n\t\t\t\treturn seconds;\n\t\t\tcase \"microseconds\":\n\t\t\t\tlet microseconds = function microseconds(){ return self._microseconds; };\n\t\t\t\texpose(microseconds, []);\n\t\t\t\treturn microseconds;\n\t\t\tdefault:\n\t\t\t\tthrow new AttributeError(this, attrname);\n\t\t}\n\t}\n\n\tdays()\n\t{\n\t\treturn this._days;\n\t}\n\n\tseconds()\n\t{\n\t\treturn this._seconds;\n\t}\n\n\tmicroseconds()\n\t{\n\t\treturn this._microseconds;\n\t}\n\n\tul4type()\n\t{\n\t\treturn \"timedelta\";\n\t}\n};\n\n\nexport class MonthDelta extends Proto\n{\n\tconstructor(months=0)\n\t{\n\t\tsuper();\n\t\tthis._months = months;\n\t}\n\n\t__repr__()\n\t{\n\t\tif (!this._months)\n\t\t\treturn \"monthdelta()\";\n\t\treturn \"monthdelta(\" + this._months + \")\";\n\t}\n\n\t__str__()\n\t{\n\t\tif (this._months)\n\t\t{\n\t\t\tif (this._months !== -1 && this._months !== 1)\n\t\t\t\treturn this._months + \" months\";\n\t\t\treturn this._months + \" month\";\n\t\t}\n\t\treturn \"0 months\";\n\t}\n\n\ttoString()\n\t{\n\t\treturn this.__str__();\n\t}\n\n\t__bool__()\n\t{\n\t\treturn this._months !== 0;\n\t}\n\n\t__abs__()\n\t{\n\t\treturn this._months < 0 ? new MonthDelta(-this._months) : this;\n\t}\n\n\t__eq__(other)\n\t{\n\t\tif (other instanceof MonthDelta)\n\t\t\treturn this._months === other._months;\n\t\treturn false;\n\t}\n\n\t__lt__(other)\n\t{\n\t\tif (other instanceof MonthDelta)\n\t\t\treturn this._months < other._months;\n\t\t_unorderable(\"<\", this, other);\n\t}\n\n\t__le__(other)\n\t{\n\t\tif (other instanceof MonthDelta)\n\t\t\treturn this._months <= other._months;\n\t\t_unorderable(\"<=\", this, other);\n\t}\n\n\t__gt__(other)\n\t{\n\t\tif (other instanceof MonthDelta)\n\t\t\treturn this._months > other._months;\n\t\t_unorderable(\">\", this, other);\n\t}\n\n\t__ge__(other)\n\t{\n\t\tif (other instanceof MonthDelta)\n\t\t\treturn this._months >= other._months;\n\t\t_unorderable(\">=\", this, other);\n\t}\n\n\t__neg__()\n\t{\n\t\treturn new MonthDelta(-this._months);\n\t}\n\n\t_adddate(date, months)\n\t{\n\t\tlet result = this._adddatetime(date._date, months);\n\t\treturn new Date_(result.getFullYear(), result.getMonth()+1, result.getDate());\n\t}\n\n\t_adddatetime(date, months)\n\t{\n\t\tlet year = date.getFullYear();\n\t\tlet month = date.getMonth() + months;\n\t\tlet day = date.getDate();\n\t\tlet hour = date.getHours();\n\t\tlet minute = date.getMinutes();\n\t\tlet second = date.getSeconds();\n\t\tlet millisecond = date.getMilliseconds();\n\n\t\twhile (true)\n\t\t{\n\t\t\t// As the month might be out of bounds, we have to find out what the real target month is\n\t\t\tlet targetmonth = new Date(year, month, 1, hour, minute, second, millisecond).getMonth();\n\t\t\tlet result = new Date(year, month, day, hour, minute, second, millisecond);\n\t\t\tif (result.getMonth() === targetmonth)\n\t\t\t\treturn result;\n\t\t\t--day;\n\t\t}\n\t}\n\n\t__add__(other)\n\t{\n\t\tif (_ismonthdelta(other))\n\t\t\treturn new MonthDelta(this._months + other._months);\n\t\telse if (_isdate(other))\n\t\t\treturn this._adddate(other, this._months);\n\t\telse if (_isdatetime(other))\n\t\t\treturn this._adddatetime(other, this._months);\n\t\tthrow new ArgumentError(_type(this) + \" + \" + _type(other) + \" not supported\");\n\t}\n\n\t__radd__(other)\n\t{\n\t\tif (_isdate(other))\n\t\t\treturn this._adddate(other, this._months);\n\t\telse if (_isdatetime(other))\n\t\t\treturn this._adddatetime(other, this._months);\n\t\tthrow new ArgumentError(_type(this) + \" + \" + _type(other) + \" not supported\");\n\t}\n\n\t__sub__(other)\n\t{\n\t\tif (_ismonthdelta(other))\n\t\t\treturn new MonthDelta(this._months - other._months);\n\t\tthrow new ArgumentError(_type(this) + \" - \" + _type(other) + \" not supported\");\n\t}\n\n\t__rsub__(other)\n\t{\n\t\tif (_isdate(other))\n\t\t\treturn this._adddate(other, -this._months);\n\t\telse if (_isdatetime(other))\n\t\t\treturn this._adddatetime(other, -this._months);\n\t\tthrow new ArgumentError(_type(this) + \" - \" + _type(other) + \" not supported\");\n\t}\n\n\t__mul__(other)\n\t{\n\t\tif (typeof(other) === \"number\")\n\t\t\treturn new MonthDelta(this._months * Math.floor(other));\n\t\tthrow new ArgumentError(_type(this) + \" * \" + _type(other) + \" not supported\");\n\t}\n\n\t__rmul__(other)\n\t{\n\t\tif (typeof(other) === \"number\")\n\t\t\treturn new MonthDelta(this._months * Math.floor(other));\n\t\tthrow new ArgumentError(_type(this) + \" * \" + _type(other) + \" not supported\");\n\t}\n\n\t__floordiv__(other)\n\t{\n\t\tif (typeof(other) === \"number\")\n\t\t\treturn new MonthDelta(Math.floor(this._months / other));\n\t\telse if (_ismonthdelta(other))\n\t\t\treturn Math.floor(this._months / other._months);\n\t\tthrow new ArgumentError(_type(this) + \" // \" + _type(other) + \" not supported\");\n\t}\n\n\t__truediv__(other)\n\t{\n\t\tif (_ismonthdelta(other))\n\t\t\treturn this._months / other._months;\n\t\tthrow new ArgumentError(_type(this) + \" / \" + _type(other) + \" not supported\");\n\t}\n\n\t__getattr__(attrname)\n\t{\n\t\tlet self = this;\n\t\tswitch (attrname)\n\t\t{\n\t\t\tcase \"months\":\n\t\t\t\tlet months = function months(){ return self._months; };\n\t\t\t\texpose(months, []);\n\t\t\t\treturn months;\n\t\t\tdefault:\n\t\t\t\tthrow new AttributeError(this, attrname);\n\t\t}\n\t}\n\n\tmonths()\n\t{\n\t\treturn this._months;\n\t}\n\n\tul4type()\n\t{\n\t\treturn \"monthdelta\";\n\t}\n};\n\nconst constructors = [\n\t[TextAST, \"text\"],\n\t[IndentAST, \"indent\"],\n\t[LineEndAST, \"lineend\"],\n\t[ConstAST, \"const\"],\n\t[SeqItemAST, \"seqitem\"],\n\t[UnpackSeqItemAST, \"unpackseqitem\"],\n\t[DictItemAST, \"dictitem\"],\n\t[UnpackDictItemAST, \"unpackdictitem\"],\n\t[PosArgAST, \"posarg\"],\n\t[KeywordArgAST, \"keywordarg\"],\n\t[UnpackListArgAST, \"unpacklistarg\"],\n\t[UnpackDictArgAST, \"unpackdictarg\"],\n\t[ListAST, \"list\"],\n\t[ListCompAST, \"listcomp\"],\n\t[DictAST, \"dict\"],\n\t[DictCompAST, \"dictcomp\"],\n\t[SetAST, \"set\"],\n\t[SetCompAST, \"setcomp\"],\n\t[GenExprAST, \"genexpr\"],\n\t[VarAST, \"var\"],\n\t[NotAST, \"not\"],\n\t[NegAST, \"neg\"],\n\t[BitNotAST, \"bitnot\"],\n\t[IfAST, \"if\"],\n\t[ReturnAST, \"return\"],\n\t[PrintAST, \"print\"],\n\t[PrintXAST, \"printx\"],\n\t[ItemAST, \"item\"],\n\t[IsAST, \"is\"],\n\t[IsNotAST, \"isnot\"],\n\t[EQAST, \"eq\"],\n\t[NEAST, \"ne\"],\n\t[LTAST, \"lt\"],\n\t[LEAST, \"le\"],\n\t[GTAST, \"gt\"],\n\t[GEAST, \"ge\"],\n\t[NotContainsAST, \"notcontains\"],\n\t[ContainsAST, \"contains\"],\n\t[AddAST, \"add\"],\n\t[SubAST, \"sub\"],\n\t[MulAST, \"mul\"],\n\t[FloorDivAST, \"floordiv\"],\n\t[TrueDivAST, \"truediv\"],\n\t[ModAST, \"mod\"],\n\t[ShiftLeftAST, \"shiftleft\"],\n\t[ShiftRightAST, \"shiftright\"],\n\t[BitAndAST, \"bitand\"],\n\t[BitXOrAST, \"bitxor\"],\n\t[BitOrAST, \"bitor\"],\n\t[AndAST, \"and\"],\n\t[OrAST, \"or\"],\n\t[SliceAST, \"slice\"],\n\t[AttrAST, \"attr\"],\n\t[CallAST, \"call\"],\n\t[RenderAST, \"render\"],\n\t[RenderXAST, \"renderx\"],\n\t[RenderBlockAST, \"renderblock\"],\n\t[RenderBlocksAST, \"renderblocks\"],\n\t[SetVarAST, \"setvar\"],\n\t[AddVarAST, \"addvar\"],\n\t[SubVarAST, \"subvar\"],\n\t[MulVarAST, \"mulvar\"],\n\t[TrueDivVarAST, \"truedivvar\"],\n\t[FloorDivVarAST, \"floordivvar\"],\n\t[ModVarAST, \"modvar\"],\n\t[ShiftLeftVarAST, \"shiftleftvar\"],\n\t[ShiftRightVarAST, \"shiftrightvar\"],\n\t[BitAndVarAST, \"bitandvar\"],\n\t[BitXOrVarAST, \"bitxorvar\"],\n\t[BitOrVarAST, \"bitorvar\"],\n\t[ForBlockAST, \"forblock\"],\n\t[WhileBlockAST, \"whileblock\"],\n\t[BreakAST, \"break\"],\n\t[ContinueAST, \"continue\"],\n\t[CondBlockAST, \"condblock\"],\n\t[IfBlockAST, \"ifblock\"],\n\t[ElIfBlockAST, \"elifblock\"],\n\t[ElseBlockAST, \"elseblock\"],\n\t[SignatureAST, \"signature\"],\n\t[Template, \"template\"],\n];\n\nfor (let [constructor, name] of constructors)\n{\n\tconstructor.prototype.type = name;\n\tregister(\"de.livinglogic.ul4.\" + name, constructor);\n}\n"],"names":["$","safeAdd","x","y","lsw","md5cmn","q","a","b","s","t","bitRotateLeft","num","cnt","md5ff","c","d","md5gg","md5hh","md5ii","binlMD5","len","i","olda","oldb","oldc","oldd","length","binl2rstr","input","output","length32","String","fromCharCode","rstr2binl","undefined","length8","charCodeAt","rstr2hex","charAt","str2rstrUTF8","unescape","encodeURIComponent","rawMD5","rstrMD5","rawHMACMD5","k","rstrHMACMD5","key","data","hash","bkey","ipad","opad","concat","md5","string","raw","hexHMACMD5","hexMD5","module","exports","this","_registry","_havemap","Map","prototype","forEach","_haveset","size","error","Set","_makemap","map","items","value","set","_setmap","__proto__","_emptymap","_getmap","get","_emptyset","_Set","_makeset","item","add","register","name","f","ul4onname","dumps","obj","indent","encoder","Encoder","dump","finish","loads","registry","Decoder","load","_level","_strings2index","_ids2index","_backrefs","line","push","args","oldindent","arg","join","_line","type","Math","round","index","_str_repr","replace","_iscolor","r","g","_isdate","year","month","day","_isdatetime","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getMilliseconds","_istimedelta","days","seconds","microseconds","_ismonthdelta","months","slice","start","stop","ul4ondump","__id__","_islist","_ismap","_isdict","_isset","ValueError","_repr","pos","backrefs","stack","re_white","match","result","substring","re_digits","readcharoreof","parseFloat","isNaN","oldpos","escapechar","chars","read","codepoint","parseInt","typecode","readblackchar","readnumber","readchar","delimiter","c2","_readescape","Color","_r","_g","_b","_a","Date_","Date","setFullYear","setDate","setMonth","setHours","setMinutes","setSeconds","setMilliseconds","TimeDelta","_days","_seconds","_microseconds","MonthDelta","_months","backup","pop","_beginfakeloading","constructor","_endfakeloading","ul4onload","self","next","done","_rvalidchars","_rvalidescape","_rvalidtokens","_rvalidbraces","_bound","upper","_internal_call","context","functioncontext","signature","needscontext","needsobject","kwargs","finalargs","ArgumentError","bindObject","bindArray","unshift","apply","_callfunction","_ul4_name","_ul4_signature","_ul4_needsobject","_ul4_needscontext","TypeError","_callobject","_ul4_callsignature","_ul4_callneedsobject","_ul4_callneedscontext","__call__","_callrender","_ul4_rendersignature","_ul4_renderneedsobject","_ul4_renderneedscontext","__render__","_call","_type","_unpackvar","lvalue","newvalue","iter","_iter","_formatsource","out","finalout","level","needlf","part","j","_sourceprefix","source","outerstartpos","innerstartpos","maxprefix","preprefix","_sourcesuffix","outerstoppos","innerstoppos","maxsuffix","postsuffix","_lineColFromPos","col","_eq","obj1","obj2","numbertypes","__eq__","indexOf","getTime","_isobject","hasOwnProperty","has","_ne","__ne__","_unorderable","operator","_cmp","v1","v2","res","_isul4set","in1only","in2only","_lt","__lt__","_le","__le__","_gt","__gt__","_ge","__ge__","_isiter","__iter__","keys","values","str","ascii","squote","dquote","quote","code","escape","test","_lpad","toString","_map_repr","v","_repr_internal","_list_repr","first","_set_repr","_object_repr","_date_repr","_date","_datetime_repr","hour","minute","second","ms","_typeof","__repr__","_ascii","_str","_date_str","_datetime_str","__str__","_bool","__bool__","_int","base","_isint","floor","_float","_list","_set","_len","sequence","ul4type","Protocol","_mod","div","mod","_getattr","attrname","default_","proto","getattr","exc","AttributeError","_hasattr","hasattr","_dir","dir","_any","iterable","_all","_isundefined","_isdefined","_isnone","_isbool","_isfloat","_isstr","Object","call","_istemplate","Template","TemplateClosure","_isfunction","_isexception","Exception","_isanyset","__type__","Proto","_str_repeat","rep","_list_repeat","list","_asjson","_str_json","_fromjson","StrProtocol","strip","JSON","parse","Function","_asul4on","_fromul4on","_format_datetime","fmt","lang","translation","de","ml","ws","wl","xf","Xf","cf","en","fr","es","it","da","sv","nl","pt","cs","sk","pl","hr","sr","ro","hu","tr","ru","zh","ko","ja","inspec","getDay","_format","DateTimeProtocol","yearday","_week4format","_format_int","work","fill","align","sign","alternate","minimumwidth","minimumwidthStr","exec","neg","toUpperCase","pad","padBefore","padAfter","translations","toLowerCase","split","_nextid","other","Signature","argNames","remargs","remkwargs","nextDefault","lastArgname","argName","defaultValue","substr","_this","decname","argObject","expose","count","options","_extend","baseobj","attrs","assign","create","ListProtocol","DateProtocol","SetProtocol","MapProtocol","ObjectProtocol","__getattr__","attr","realattr","object","sub","_count","find","_find","rfind","_rfind","old","new_","lstrip","rstrip","sep","splice","rsplit","lastIndexOf","splitlines","startpos","keepends","lookingAtLineEnd","lineendlen","endpos","lower","capitalize","resultlist","startswith","prefix","singlepre","endswith","suffix","singlesuf","append","insert","update","_update","clear","KeyError","weekday","calendar","firstweekday","mindaysinfirstweek","week","mimeformat","isoformat","offset","refDate","weekDayDiff","weekStartYear","weekStartMonth","weekStartDay","weekStart","diff","SubAST","_do","microsecond","leap","_isleap","realresult","Context","vars","globals","functions","indents","escapes","_output","message","fileName","lineNumber","instance","Error","setPrototypeOf","getPrototypeOf","__proto","enumerable","writable","configurable","InternalException","ReturnException","BreakException","ContinueException","SyntaxError","LValueRequiredError","NotSubscriptableError","ZeroDivisionError","IndexError","NotImplementedError","LocationError","location","template","parenttemplate","templateprefix","_templateprefix","startsourceprefix","startsource","startsourcesuffix","text","underline","startline","startcol","AST","stoppos","_startline","_startcol","_stopline","_stopcol","_ul4onattrs","_eval","_decorate_exception","_eval_set","_eval_modify","decoder","_source","of","TextAST","IndentAST","_text","LineEndAST","CodeAST","ConstAST","ItemArgBase","_eval_list","_eval_dict","_eval_call","SeqItemAST","_handle_eval","UnpackSeqItemAST","DictItemAST","UnpackDictItemAST","subitem","PosArgAST","KeywordArgAST","UnpackListArgAST","UnpackDictArgAST","ListAST","_handle_eval_list","ListCompAST","varname","container","condition","localcontext","inheritvars","varitems","_handle_eval_set","SetAST","SetCompAST","DictAST","_handle_eval_dict","DictCompAST","GenExprAST","VarAST","_get","_modify","_ido","UnaryAST","NegAST","__neg__","BitNotAST","NotAST","IfAST","objif","objcond","objelse","ReturnAST","PrintAST","PrintXAST","_xmlescape","BinaryAST","ItemAST","orgkey","__getitem__","__setitem__","IsAST","IsNotAST","EQAST","NEAST","LTAST","LEAST","GTAST","GEAST","ContainsAST","__contains__","NotContainsAST","AddAST","__add__","__radd__","__sub__","__rsub__","_date_sub","_datetime_sub","swap","year1","yearday1","year2","yearday2","diffdays","hours1","minutes1","seconds1","hours2","minutes2","diffseconds","diffmilliseconds","MulAST","__mul__","__rmul__","targetsize","FloorDivAST","__floordiv__","__rfloordiv__","TrueDivAST","__truediv__","__rtruediv__","ModAST","ShiftLeftAST","ShiftRightAST","BitAndAST","BitXOrAST","BitOrAST","AndAST","OrAST","AttrAST","__setattr__","oldvalue","CallAST","_handle_eval_call","_makeargs","RenderAST","_reprname","tag","withindent","_handle_additional_arguments","RenderXAST","RenderBlockAST","closure","content","RenderBlocksAST","BlockAST","SliceAST","index1","index2","SetVarAST","ModifyVarAST","_handle_eval_modify","_operator","AddVarAST","SubVarAST","MulVarAST","TrueDivVarAST","FloorDivVarAST","ModVarAST","ShiftLeftVarAST","ShiftRightVarAST","BitAndVarAST","BitXOrVarAST","BitOrVarAST","ForBlockAST","truel","subname","_str_varname","WhileBlockAST","BreakAST","ContinueAST","CondBlockAST","block","_execute","ConditionalBlockAST","_strname","IfBlockAST","ElIfBlockAST","ElseBlockAST","whitespace","startdelim","enddelim","docpos","_asts","doc","render","_renderbound","renders","_rendersbound","SignatureAST","loaded_api_version","replacevars","replaceoutput","getoutput","_callbound","params","param","endtag","_rgb","_csv","_chr","_ord","_hex","number","_oct","_bin","_min","_max","_sum","_first","_last","_sorted","reverse","cmp","sort","keyvalue","s1","s2","_range","step","higher","abs","_slice","_urlquote","_urlunquote","decodeURIComponent","_reversed","_random","random","_randrange","n","width","_randchoice","iscolor","_round","digits","threshold","pow","_md5","_scrypt","salt","_enumerate","_isfirst","isfirst","_islast","lastitem","_isfirstlast","_enumfl","_zip","iterables","iters","_abs","__abs__","_datetime","_timedelta","_monthdelta","_hls","h","l","m1","m2","_v","hue","_hsv","p","now","utcnow","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCMilliseconds","today","repr","bool","format","any","all","zip","isundefined","isdefined","isnone","isbool","isint","isfloat","isstr","isdate","isdatetime","istimedelta","ismonthdelta","istemplate","isfunction","islist","isset","isdict","isexception","asjson","fromjson","asul4on","fromul4on","enumerate","islast","isfirstlast","enumfl","date","datetime","timedelta","monthdelta","rgb","hls","hsv","xmlescape","csv","chr","ord","hex","oct","bin","min","max","sum","last","sorted","range","urlquote","urlunquote","reversed","randrange","randchoice","scrypt","end","lastIndex","jan1weekday","others","lum","hlsa","hsva","witha","withlum","abslum","rellum","rc","gc","bc","maxc","minc","total_microseconds","total_seconds","minutes","hours","millisecond","_adddate","_adddatetime","myValue","otherValue","hasSeconds","hasMicroseconds","targetmonth","defaultvalue","_map2object","newobj","_rpad","_stacktrace"],"mappings":"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"}
=======
{"version":3,"file":"ul4.js","sources":["../../node_modules/blueimp-md5/js/md5.js","../../src/ul4.js"],"sourcesContent":["/*\n * JavaScript MD5\n * https://github.com/blueimp/JavaScript-MD5\n *\n * Copyright 2011, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n *\n * Based on\n * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message\n * Digest Algorithm, as defined in RFC 1321.\n * Version 2.2 Copyright (C) Paul Johnston 1999 - 2009\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n * Distributed under the BSD License\n * See http://pajhome.org.uk/crypt/md5 for more info.\n */\n\n/* global define */\n\n/* eslint-disable strict */\n\n;(function ($) {\n  'use strict'\n\n  /**\n   * Add integers, wrapping at 2^32.\n   * This uses 16-bit operations internally to work around bugs in interpreters.\n   *\n   * @param {number} x First integer\n   * @param {number} y Second integer\n   * @returns {number} Sum\n   */\n  function safeAdd(x, y) {\n    var lsw = (x & 0xffff) + (y & 0xffff)\n    var msw = (x >> 16) + (y >> 16) + (lsw >> 16)\n    return (msw << 16) | (lsw & 0xffff)\n  }\n\n  /**\n   * Bitwise rotate a 32-bit number to the left.\n   *\n   * @param {number} num 32-bit number\n   * @param {number} cnt Rotation count\n   * @returns {number} Rotated number\n   */\n  function bitRotateLeft(num, cnt) {\n    return (num << cnt) | (num >>> (32 - cnt))\n  }\n\n  /**\n   * Basic operation the algorithm uses.\n   *\n   * @param {number} q q\n   * @param {number} a a\n   * @param {number} b b\n   * @param {number} x x\n   * @param {number} s s\n   * @param {number} t t\n   * @returns {number} Result\n   */\n  function md5cmn(q, a, b, x, s, t) {\n    return safeAdd(bitRotateLeft(safeAdd(safeAdd(a, q), safeAdd(x, t)), s), b)\n  }\n  /**\n   * Basic operation the algorithm uses.\n   *\n   * @param {number} a a\n   * @param {number} b b\n   * @param {number} c c\n   * @param {number} d d\n   * @param {number} x x\n   * @param {number} s s\n   * @param {number} t t\n   * @returns {number} Result\n   */\n  function md5ff(a, b, c, d, x, s, t) {\n    return md5cmn((b & c) | (~b & d), a, b, x, s, t)\n  }\n  /**\n   * Basic operation the algorithm uses.\n   *\n   * @param {number} a a\n   * @param {number} b b\n   * @param {number} c c\n   * @param {number} d d\n   * @param {number} x x\n   * @param {number} s s\n   * @param {number} t t\n   * @returns {number} Result\n   */\n  function md5gg(a, b, c, d, x, s, t) {\n    return md5cmn((b & d) | (c & ~d), a, b, x, s, t)\n  }\n  /**\n   * Basic operation the algorithm uses.\n   *\n   * @param {number} a a\n   * @param {number} b b\n   * @param {number} c c\n   * @param {number} d d\n   * @param {number} x x\n   * @param {number} s s\n   * @param {number} t t\n   * @returns {number} Result\n   */\n  function md5hh(a, b, c, d, x, s, t) {\n    return md5cmn(b ^ c ^ d, a, b, x, s, t)\n  }\n  /**\n   * Basic operation the algorithm uses.\n   *\n   * @param {number} a a\n   * @param {number} b b\n   * @param {number} c c\n   * @param {number} d d\n   * @param {number} x x\n   * @param {number} s s\n   * @param {number} t t\n   * @returns {number} Result\n   */\n  function md5ii(a, b, c, d, x, s, t) {\n    return md5cmn(c ^ (b | ~d), a, b, x, s, t)\n  }\n\n  /**\n   * Calculate the MD5 of an array of little-endian words, and a bit length.\n   *\n   * @param {Array} x Array of little-endian words\n   * @param {number} len Bit length\n   * @returns {Array<number>} MD5 Array\n   */\n  function binlMD5(x, len) {\n    /* append padding */\n    x[len >> 5] |= 0x80 << len % 32\n    x[(((len + 64) >>> 9) << 4) + 14] = len\n\n    var i\n    var olda\n    var oldb\n    var oldc\n    var oldd\n    var a = 1732584193\n    var b = -271733879\n    var c = -1732584194\n    var d = 271733878\n\n    for (i = 0; i < x.length; i += 16) {\n      olda = a\n      oldb = b\n      oldc = c\n      oldd = d\n\n      a = md5ff(a, b, c, d, x[i], 7, -680876936)\n      d = md5ff(d, a, b, c, x[i + 1], 12, -389564586)\n      c = md5ff(c, d, a, b, x[i + 2], 17, 606105819)\n      b = md5ff(b, c, d, a, x[i + 3], 22, -1044525330)\n      a = md5ff(a, b, c, d, x[i + 4], 7, -176418897)\n      d = md5ff(d, a, b, c, x[i + 5], 12, 1200080426)\n      c = md5ff(c, d, a, b, x[i + 6], 17, -1473231341)\n      b = md5ff(b, c, d, a, x[i + 7], 22, -45705983)\n      a = md5ff(a, b, c, d, x[i + 8], 7, 1770035416)\n      d = md5ff(d, a, b, c, x[i + 9], 12, -1958414417)\n      c = md5ff(c, d, a, b, x[i + 10], 17, -42063)\n      b = md5ff(b, c, d, a, x[i + 11], 22, -1990404162)\n      a = md5ff(a, b, c, d, x[i + 12], 7, 1804603682)\n      d = md5ff(d, a, b, c, x[i + 13], 12, -40341101)\n      c = md5ff(c, d, a, b, x[i + 14], 17, -1502002290)\n      b = md5ff(b, c, d, a, x[i + 15], 22, 1236535329)\n\n      a = md5gg(a, b, c, d, x[i + 1], 5, -165796510)\n      d = md5gg(d, a, b, c, x[i + 6], 9, -1069501632)\n      c = md5gg(c, d, a, b, x[i + 11], 14, 643717713)\n      b = md5gg(b, c, d, a, x[i], 20, -373897302)\n      a = md5gg(a, b, c, d, x[i + 5], 5, -701558691)\n      d = md5gg(d, a, b, c, x[i + 10], 9, 38016083)\n      c = md5gg(c, d, a, b, x[i + 15], 14, -660478335)\n      b = md5gg(b, c, d, a, x[i + 4], 20, -405537848)\n      a = md5gg(a, b, c, d, x[i + 9], 5, 568446438)\n      d = md5gg(d, a, b, c, x[i + 14], 9, -1019803690)\n      c = md5gg(c, d, a, b, x[i + 3], 14, -187363961)\n      b = md5gg(b, c, d, a, x[i + 8], 20, 1163531501)\n      a = md5gg(a, b, c, d, x[i + 13], 5, -1444681467)\n      d = md5gg(d, a, b, c, x[i + 2], 9, -51403784)\n      c = md5gg(c, d, a, b, x[i + 7], 14, 1735328473)\n      b = md5gg(b, c, d, a, x[i + 12], 20, -1926607734)\n\n      a = md5hh(a, b, c, d, x[i + 5], 4, -378558)\n      d = md5hh(d, a, b, c, x[i + 8], 11, -2022574463)\n      c = md5hh(c, d, a, b, x[i + 11], 16, 1839030562)\n      b = md5hh(b, c, d, a, x[i + 14], 23, -35309556)\n      a = md5hh(a, b, c, d, x[i + 1], 4, -1530992060)\n      d = md5hh(d, a, b, c, x[i + 4], 11, 1272893353)\n      c = md5hh(c, d, a, b, x[i + 7], 16, -155497632)\n      b = md5hh(b, c, d, a, x[i + 10], 23, -1094730640)\n      a = md5hh(a, b, c, d, x[i + 13], 4, 681279174)\n      d = md5hh(d, a, b, c, x[i], 11, -358537222)\n      c = md5hh(c, d, a, b, x[i + 3], 16, -722521979)\n      b = md5hh(b, c, d, a, x[i + 6], 23, 76029189)\n      a = md5hh(a, b, c, d, x[i + 9], 4, -640364487)\n      d = md5hh(d, a, b, c, x[i + 12], 11, -421815835)\n      c = md5hh(c, d, a, b, x[i + 15], 16, 530742520)\n      b = md5hh(b, c, d, a, x[i + 2], 23, -995338651)\n\n      a = md5ii(a, b, c, d, x[i], 6, -198630844)\n      d = md5ii(d, a, b, c, x[i + 7], 10, 1126891415)\n      c = md5ii(c, d, a, b, x[i + 14], 15, -1416354905)\n      b = md5ii(b, c, d, a, x[i + 5], 21, -57434055)\n      a = md5ii(a, b, c, d, x[i + 12], 6, 1700485571)\n      d = md5ii(d, a, b, c, x[i + 3], 10, -1894986606)\n      c = md5ii(c, d, a, b, x[i + 10], 15, -1051523)\n      b = md5ii(b, c, d, a, x[i + 1], 21, -2054922799)\n      a = md5ii(a, b, c, d, x[i + 8], 6, 1873313359)\n      d = md5ii(d, a, b, c, x[i + 15], 10, -30611744)\n      c = md5ii(c, d, a, b, x[i + 6], 15, -1560198380)\n      b = md5ii(b, c, d, a, x[i + 13], 21, 1309151649)\n      a = md5ii(a, b, c, d, x[i + 4], 6, -145523070)\n      d = md5ii(d, a, b, c, x[i + 11], 10, -1120210379)\n      c = md5ii(c, d, a, b, x[i + 2], 15, 718787259)\n      b = md5ii(b, c, d, a, x[i + 9], 21, -343485551)\n\n      a = safeAdd(a, olda)\n      b = safeAdd(b, oldb)\n      c = safeAdd(c, oldc)\n      d = safeAdd(d, oldd)\n    }\n    return [a, b, c, d]\n  }\n\n  /**\n   * Convert an array of little-endian words to a string\n   *\n   * @param {Array<number>} input MD5 Array\n   * @returns {string} MD5 string\n   */\n  function binl2rstr(input) {\n    var i\n    var output = ''\n    var length32 = input.length * 32\n    for (i = 0; i < length32; i += 8) {\n      output += String.fromCharCode((input[i >> 5] >>> i % 32) & 0xff)\n    }\n    return output\n  }\n\n  /**\n   * Convert a raw string to an array of little-endian words\n   * Characters >255 have their high-byte silently ignored.\n   *\n   * @param {string} input Raw input string\n   * @returns {Array<number>} Array of little-endian words\n   */\n  function rstr2binl(input) {\n    var i\n    var output = []\n    output[(input.length >> 2) - 1] = undefined\n    for (i = 0; i < output.length; i += 1) {\n      output[i] = 0\n    }\n    var length8 = input.length * 8\n    for (i = 0; i < length8; i += 8) {\n      output[i >> 5] |= (input.charCodeAt(i / 8) & 0xff) << i % 32\n    }\n    return output\n  }\n\n  /**\n   * Calculate the MD5 of a raw string\n   *\n   * @param {string} s Input string\n   * @returns {string} Raw MD5 string\n   */\n  function rstrMD5(s) {\n    return binl2rstr(binlMD5(rstr2binl(s), s.length * 8))\n  }\n\n  /**\n   * Calculates the HMAC-MD5 of a key and some data (raw strings)\n   *\n   * @param {string} key HMAC key\n   * @param {string} data Raw input string\n   * @returns {string} Raw MD5 string\n   */\n  function rstrHMACMD5(key, data) {\n    var i\n    var bkey = rstr2binl(key)\n    var ipad = []\n    var opad = []\n    var hash\n    ipad[15] = opad[15] = undefined\n    if (bkey.length > 16) {\n      bkey = binlMD5(bkey, key.length * 8)\n    }\n    for (i = 0; i < 16; i += 1) {\n      ipad[i] = bkey[i] ^ 0x36363636\n      opad[i] = bkey[i] ^ 0x5c5c5c5c\n    }\n    hash = binlMD5(ipad.concat(rstr2binl(data)), 512 + data.length * 8)\n    return binl2rstr(binlMD5(opad.concat(hash), 512 + 128))\n  }\n\n  /**\n   * Convert a raw string to a hex string\n   *\n   * @param {string} input Raw input string\n   * @returns {string} Hex encoded string\n   */\n  function rstr2hex(input) {\n    var hexTab = '0123456789abcdef'\n    var output = ''\n    var x\n    var i\n    for (i = 0; i < input.length; i += 1) {\n      x = input.charCodeAt(i)\n      output += hexTab.charAt((x >>> 4) & 0x0f) + hexTab.charAt(x & 0x0f)\n    }\n    return output\n  }\n\n  /**\n   * Encode a string as UTF-8\n   *\n   * @param {string} input Input string\n   * @returns {string} UTF8 string\n   */\n  function str2rstrUTF8(input) {\n    return unescape(encodeURIComponent(input))\n  }\n\n  /**\n   * Encodes input string as raw MD5 string\n   *\n   * @param {string} s Input string\n   * @returns {string} Raw MD5 string\n   */\n  function rawMD5(s) {\n    return rstrMD5(str2rstrUTF8(s))\n  }\n  /**\n   * Encodes input string as Hex encoded string\n   *\n   * @param {string} s Input string\n   * @returns {string} Hex encoded string\n   */\n  function hexMD5(s) {\n    return rstr2hex(rawMD5(s))\n  }\n  /**\n   * Calculates the raw HMAC-MD5 for the given key and data\n   *\n   * @param {string} k HMAC key\n   * @param {string} d Input string\n   * @returns {string} Raw MD5 string\n   */\n  function rawHMACMD5(k, d) {\n    return rstrHMACMD5(str2rstrUTF8(k), str2rstrUTF8(d))\n  }\n  /**\n   * Calculates the Hex encoded HMAC-MD5 for the given key and data\n   *\n   * @param {string} k HMAC key\n   * @param {string} d Input string\n   * @returns {string} Raw MD5 string\n   */\n  function hexHMACMD5(k, d) {\n    return rstr2hex(rawHMACMD5(k, d))\n  }\n\n  /**\n   * Calculates MD5 value for a given string.\n   * If a key is provided, calculates the HMAC-MD5 value.\n   * Returns a Hex encoded string unless the raw argument is given.\n   *\n   * @param {string} string Input string\n   * @param {string} [key] HMAC key\n   * @param {boolean} [raw] Raw output switch\n   * @returns {string} MD5 output\n   */\n  function md5(string, key, raw) {\n    if (!key) {\n      if (!raw) {\n        return hexMD5(string)\n      }\n      return rawMD5(string)\n    }\n    if (!raw) {\n      return hexHMACMD5(key, string)\n    }\n    return rawHMACMD5(key, string)\n  }\n\n  if (typeof define === 'function' && define.amd) {\n    define(function () {\n      return md5\n    })\n  } else if (typeof module === 'object' && module.exports) {\n    module.exports = md5\n  } else {\n    $.md5 = md5\n  }\n})(this)\n","/*!\n * UL4/UL4ON JavaScript Library\n * http://www.livinglogic.de/Python/ul4c/\n * http://www.livinglogic.de/Python/ul4on/\n *\n * Copyright 2011-2019 by LivingLogic AG, Bayreuth/Germany\n * Copyright 2011-2019 by Walter DÃ¶rwald\n *\n * All Rights Reserved\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\n/*jslint vars: true */\n\n// Version of this Javascipt package\nimport { version } from '../package.json';\n\nexport { version };\n\n// Version of the UL4 API\n// I.e. this version should be compatible with the Python and Java\n// implementations that support the same API version.\nexport const api_version = \"46\";\n\n\n//\n// UL4ON\n//\n\nconst _registry = {};\n\nexport const _havemap = (typeof(Map) === \"function\" && typeof(Map.prototype.forEach) === \"function\");\n\nconst _havemapconstructor = (function ()\n{\n\tif (_havemap)\n\t{\n\t\ttry\n\t\t{\n\t\t\tif (new Map([[1, 2]]).size == 1)\n\t\t\t\treturn true;\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t}\n\t}\n\treturn false;\n})();\n\nconst _haveset = (typeof(Set) === \"function\" && typeof(Set.prototype.forEach) === \"function\");\n\nconst _havesetconstructor = (function ()\n{\n\tif (_haveset)\n\t{\n\t\ttry\n\t\t{\n\t\t\tif (new Set([1, 2]).size == 2)\n\t\t\t\treturn true;\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t}\n\t\treturn false;\n\t}\n\telse\n\t\treturn false;\n})();\n\nexport let _makemap;\nexport let _setmap;\nexport let _emptymap;\nexport let _getmap;\n\n// helper functions that work with Maps and objects\nif (_havemap)\n{\n\t_makemap = function _makemap(...items)\n\t{\n\t\tlet map = new Map();\n\n\t\tfor (let [key, value] of items)\n\t\t\tmap.set(key, value);\n\t\treturn map;\n\t};\n\n\t_setmap = function _setmap(map, key, value)\n\t{\n\t\tif (map.__proto__ === Map.prototype)\n\t\t\tmap.set(key, value);\n\t\telse\n\t\t\tmap[key] = value;\n\t};\n\n\t_emptymap = function _emptymap()\n\t{\n\t\treturn new Map();\n\t};\n\n\t_getmap = function _getmap(map, key, value)\n\t{\n\t\tif (map.__proto__ === Map.prototype)\n\t\t\treturn map.get(key);\n\t\telse\n\t\t\treturn map[key];\n\t};\n}\nelse\n{\n\t_makemap = function _makemap(...items)\n\t{\n\t\tlet map = {};\n\n\t\tfor (let [key, value] of items)\n\t\t\tmap[key] = value;\n\t\treturn map;\n\t};\n\n\t_setmap = function _setmap(map, key, value)\n\t{\n\t\tmap[key] = value;\n\t};\n\n\t_emptymap = function _emptymap()\n\t{\n\t\treturn {};\n\t};\n\n\t_getmap = function _getmap(map, key, value)\n\t{\n\t\treturn map[key];\n\t};\n}\n\nexport let _emptyset;\n\n// Function used for making sets, when the Set constructor doesn't work (or we don't have sets)\nif (_haveset)\n{\n\t_emptyset = function _emptyset()\n\t{\n\t\treturn new Set();\n\t};\n}\nelse\n{\n\t_emptyset = function _emptyset()\n\t{\n\t\treturn new _Set();\n\t};\n}\n\nexport let _makeset = function _makeset(...items)\n{\n\tlet set = _emptyset();\n\n\tfor (let item of items)\n\t\tset.add(item);\n\treturn set;\n};\n\n// Register the constructor function ``f`` under the name ``name`` with the UL4ON machinery\nexport function register(name, f)\n{\n\tf.prototype.ul4onname = name;\n\t_registry[name] = f;\n};\n\n// Return a string that contains the object ``obj`` in the UL4ON serialization format\nexport function dumps(obj, indent)\n{\n\tlet encoder = new Encoder(indent);\n\tencoder.dump(obj);\n\treturn encoder.finish();\n};\n\n// Load an object from the string ``data``.\n// ``data`` must contain the object in the UL4ON serialization format\n// ``registry`` may be null or a dictionary mapping type names to constructor functions\nexport function loads(data, registry)\n{\n\tlet decoder = new Decoder(data, registry);\n\treturn decoder.load();\n};\n\n// Helper class for encoding\nexport class Encoder\n{\n\t// Create a new Encoder object\n\tconstructor(indent=null)\n\t{\n\t\tthis.indent = indent;\n\t\tthis.data = [];\n\t\tthis._level = 0;\n\t\tthis._strings2index = {};\n\t\tthis._ids2index = {};\n\t\tthis._backrefs = 0;\n\t}\n\n\t_line(line, ...args)\n\t{\n\t\tif (this.indent !== null)\n\t\t{\n\t\t\tfor (let i = 0; i < this._level; ++i)\n\t\t\t\tthis.data.push(this.indent);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (this.data.length)\n\t\t\t\tthis.data.push(\" \");\n\t\t}\n\t\tthis.data.push(line);\n\n\t\tif (args.length)\n\t\t{\n\t\t\tlet oldindent = this.indent;\n\t\t\tthis.indent = null;\n\t\t\tfor (let arg of args)\n\t\t\t\tthis.dump(arg);\n\t\t\tthis.indent = oldindent;\n\t\t}\n\n\t\tif (this.indent !== null)\n\t\t\tthis.data.push(\"\\n\");\n\t}\n\n\t// Return the complete string written to the buffer\n\tfinish()\n\t{\n\t\treturn this.data.join(\"\");\n\t}\n\n\tdump(obj)\n\t{\n\t\tif (obj === null)\n\t\t\tthis._line(\"n\");\n\t\telse if (typeof(obj) == \"boolean\")\n\t\t\tthis._line(obj ? \"bT\" : \"bF\");\n\t\telse if (typeof(obj) == \"number\")\n\t\t{\n\t\t\tlet type = (Math.round(obj) == obj) ? \"i\" : \"f\";\n\t\t\tthis._line(type + obj);\n\t\t}\n\t\telse if (typeof(obj) == \"string\")\n\t\t{\n\t\t\tlet index = this._strings2index[obj];\n\t\t\tif (typeof(index) !== \"undefined\")\n\t\t\t{\n\t\t\t\tthis._line(\"^\" + index);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis._strings2index[obj] = this._backrefs++;\n\t\t\t\tlet dump = _str_repr(obj).replace(\"<\", \"\\\\x3c\");\n\t\t\t\tthis._line(\"S\" + dump);\n\t\t\t}\n\t\t}\n\t\telse if (_iscolor(obj))\n\t\t\tthis._line(\"c\", obj.r(), obj.g(), obj.b(), obj.a());\n\t\telse if (_isdate(obj))\n\t\t\tthis._line(\"x\", obj.year(), obj.month(), obj.day());\n\t\telse if (_isdatetime(obj))\n\t\t\tthis._line(\"z\", obj.getFullYear(), obj.getMonth()+1, obj.getDate(), obj.getHours(), obj.getMinutes(), obj.getSeconds(), obj.getMilliseconds() * 1000);\n\t\telse if (_istimedelta(obj))\n\t\t\tthis._line(\"t\", obj.days(), obj.seconds(), obj.microseconds());\n\t\telse if (_ismonthdelta(obj))\n\t\t\tthis._line(\"m\", obj.months());\n\t\telse if (obj instanceof slice)\n\t\t\tthis._line(\"r\", obj.start, obj.stop);\n\t\telse if (obj.ul4onname && obj.ul4ondump)\n\t\t{\n\t\t\tif (obj.__id__)\n\t\t\t{\n\t\t\t\tlet index = this._ids2index[obj.__id__];\n\t\t\t\tif (typeof(index) != \"undefined\")\n\t\t\t\t{\n\t\t\t\t\tthis._line(\"^\" + index);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis._ids2index[obj.__id__] = this._backrefs++;\n\t\t\t}\n\t\t\tthis._line(\"O\", obj.ul4onname);\n\t\t\t++this._level;\n\t\t\tobj.ul4ondump(this);\n\t\t\t--this._level;\n\t\t\tthis._line(\")\");\n\t\t}\n\t\telse if (_islist(obj))\n\t\t{\n\t\t\tthis._line(\"l\");\n\t\t\t++this._level;\n\t\t\tfor (let item of obj)\n\t\t\t\tthis.dump(item);\n\t\t\t--this._level;\n\t\t\tthis._line(\"]\");\n\t\t}\n\t\telse if (_ismap(obj))\n\t\t{\n\t\t\tthis._line(\"e\");\n\t\t\t++this._level;\n\t\t\tobj.forEach(function(value, key) {\n\t\t\t\tthis.dump(key);\n\t\t\t\tthis.dump(value);\n\t\t\t}, this);\n\t\t\t--this._level;\n\t\t\tthis._line(\"}\");\n\t\t}\n\t\telse if (_isdict(obj))\n\t\t{\n\t\t\tthis._line(\"d\");\n\t\t\t++this._level;\n\t\t\tfor (let key in obj)\n\t\t\t{\n\t\t\t\tthis.dump(key);\n\t\t\t\tthis.dump(obj[key]);\n\t\t\t}\n\t\t\t--this._level;\n\t\t\tthis._line(\"}\");\n\t\t}\n\t\telse if (_isset(obj))\n\t\t{\n\t\t\tthis._line(\"y\");\n\t\t\t++this._level;\n\t\t\tobj.forEach(function(value) {\n\t\t\t\tthis.dump(value);\n\t\t\t}, this);\n\t\t\t--this._level;\n\t\t\tthis._line(\"}\");\n\t\t}\n\t\telse\n\t\t\tthrow new ValueError(\"can't create UL4ON dump of object \" + _repr(obj));\n\t}\n};\n\n// Helper class for decoding\nexport class Decoder\n{\n\t// Creates a new decoder for reading from the string ``data``\n\tconstructor(data, registry)\n\t{\n\t\tthis.data = data;\n\t\tthis.pos = 0;\n\t\tthis.backrefs = [];\n\t\tthis.registry = typeof(registry) === \"undefined\" ? null : registry;\n\t\tthis.stack = []; // Use for informative error messages\n\t}\n\n\t// Read a character from the buffer\n\treadchar()\n\t{\n\t\tif (this.pos >= this.data.length)\n\t\t\tthrow new ValueError(\"UL4 decoder at EOF\");\n\t\treturn this.data.charAt(this.pos++);\n\t}\n\n\t// Read a character from the buffer (return null on eof)\n\treadcharoreof()\n\t{\n\t\tif (this.pos >= this.data.length)\n\t\t\treturn null;\n\t\treturn this.data.charAt(this.pos++);\n\t}\n\n\t// Read next not-whitespace character from the buffer\n\treadblackchar()\n\t{\n\t\tlet re_white = /\\s/;\n\n\t\tfor (;;)\n\t\t{\n\t\t\tif (this.pos >= this.data.length)\n\t\t\t\tthrow new ValueError(\"UL4 decoder at EOF at position \" + this.pos + \" with path \" + this.stack.join(\"/\"));\n\t\t\tlet c = this.data.charAt(this.pos++);\n\t\t\tif (!c.match(re_white))\n\t\t\t\treturn c;\n\t\t}\n\t}\n\n\t// Read ``size`` characters from the buffer\n\tread(size)\n\t{\n\t\tif (this.pos+size > this.length)\n\t\t\tsize = this.length-this.pos;\n\t\tlet result = this.data.substring(this.pos, this.pos+size);\n\t\tthis.pos += size;\n\t\treturn result;\n\t}\n\n\t// \"unread\" one character\n\tbackup()\n\t{\n\t\t--this.pos;\n\t}\n\n\t// Read a number from the buffer\n\treadnumber()\n\t{\n\t\tlet re_digits = /[-+0123456789.eE]/, value = \"\";\n\t\tfor (;;)\n\t\t{\n\t\t\tlet c = this.readcharoreof();\n\t\t\tif (c !== null && c.match(re_digits))\n\t\t\t\tvalue += c;\n\t\t\telse\n\t\t\t{\n\t\t\t\tlet result = parseFloat(value);\n\t\t\t\tif (isNaN(result))\n\t\t\t\t\tthrow new ValueError(\"invalid number, got \" + _repr(\"value\") + \" at position \" + this.pos + \" with path \" + this.stack.join(\"/\"));\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}\n\t}\n\n\t_beginfakeloading()\n\t{\n\t\tlet oldpos = this.backrefs.length;\n\t\tthis.backrefs.push(null);\n\t\treturn oldpos;\n\t}\n\n\t_endfakeloading(oldpos, value)\n\t{\n\t\tthis.backrefs[oldpos] = value;\n\t}\n\n\t_readescape(escapechar, length)\n\t{\n\t\tlet chars = this.read(length);\n\t\tif (chars.length != length)\n\t\t\tthrow new ValueError(\"broken escape \" + _repr(\"\\\\\" + escapechar + chars) + \" at position \" + this.pos + \" with path \" + this.stack.join(\"/\"));\n\t\tlet codepoint = parseInt(chars, 16);\n\t\tif (isNaN(codepoint))\n\t\t\tthrow new ValueError(\"broken escape \" + _repr(\"\\\\\" + escapechar + chars) + \" at position \" + this.pos + \" with path \" + this.stack.join(\"/\"));\n\t\treturn String.fromCharCode(codepoint);\n\t}\n\n\t// Load the next object from the buffer\n\tload()\n\t{\n\t\tlet typecode = this.readblackchar();\n\t\tlet result;\n\t\tswitch (typecode)\n\t\t{\n\t\t\tcase \"^\":\n\t\t\t\treturn this.backrefs[this.readnumber()];\n\t\t\tcase \"n\":\n\t\t\tcase \"N\":\n\t\t\t\tif (typecode === \"N\")\n\t\t\t\t\tthis.backrefs.push(null);\n\t\t\t\treturn null;\n\t\t\tcase \"b\":\n\t\t\tcase \"B\":\n\t\t\t\tresult = this.readchar();\n\t\t\t\tif (result === \"T\")\n\t\t\t\t\tresult = true;\n\t\t\t\telse if (result === \"F\")\n\t\t\t\t\tresult = false;\n\t\t\t\telse\n\t\t\t\t\tthrow new ValueError(\"wrong value for boolean, expected 'T' or 'F', got \" + _repr(result) + \" at position \" + this.pos + \" with path \" + this.stack.join(\"/\"));\n\t\t\t\tif (typecode === \"B\")\n\t\t\t\t\tthis.backrefs.push(result);\n\t\t\t\treturn result;\n\t\t\tcase \"i\":\n\t\t\tcase \"I\":\n\t\t\tcase \"f\":\n\t\t\tcase \"F\":\n\t\t\t\tresult = this.readnumber();\n\t\t\t\tif (typecode === \"I\" || typecode === \"F\")\n\t\t\t\t\tthis.backrefs.push(result);\n\t\t\t\treturn result;\n\t\t\tcase \"s\":\n\t\t\tcase \"S\":\n\t\t\t\tresult = [];\n\t\t\t\tlet delimiter = this.readblackchar();\n\t\t\t\tfor (;;)\n\t\t\t\t{\n\t\t\t\t\tlet c = this.readchar();\n\t\t\t\t\tif (c == delimiter)\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tif (c == \"\\\\\")\n\t\t\t\t\t{\n\t\t\t\t\t\tlet c2 = this.readchar();\n\t\t\t\t\t\tif (c2 == \"\\\\\")\n\t\t\t\t\t\t\tresult.push(\"\\\\\");\n\t\t\t\t\t\telse if (c2 == \"n\")\n\t\t\t\t\t\t\tresult.push(\"\\n\");\n\t\t\t\t\t\telse if (c2 == \"r\")\n\t\t\t\t\t\t\tresult.push(\"\\r\");\n\t\t\t\t\t\telse if (c2 == \"t\")\n\t\t\t\t\t\t\tresult.push(\"\\t\");\n\t\t\t\t\t\telse if (c2 == \"f\")\n\t\t\t\t\t\t\tresult.push(\"\\u000c\");\n\t\t\t\t\t\telse if (c2 == \"b\")\n\t\t\t\t\t\t\tresult.push(\"\\u0008\");\n\t\t\t\t\t\telse if (c2 == \"a\")\n\t\t\t\t\t\t\tresult.push(\"\\u0007\");\n\t\t\t\t\t\telse if (c2 == \"'\")\n\t\t\t\t\t\t\tresult.push(\"'\");\n\t\t\t\t\t\telse if (c2 == '\"')\n\t\t\t\t\t\t\tresult.push('\"');\n\t\t\t\t\t\telse if (c2 == \"x\")\n\t\t\t\t\t\t\tresult.push(this._readescape(\"x\", 2));\n\t\t\t\t\t\telse if (c2 == \"u\")\n\t\t\t\t\t\t\tresult.push(this._readescape(\"u\", 4));\n\t\t\t\t\t\telse if (c2 == \"U\")\n\t\t\t\t\t\t\tresult.push(this._readescape(\"U\", 8));\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tresult.push(\"\\\\\" + c2);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\tresult.push(c);\n\t\t\t\t}\n\t\t\t\tresult = result.join(\"\");\n\t\t\t\tif (typecode === \"S\")\n\t\t\t\t\tthis.backrefs.push(result);\n\t\t\t\treturn result;\n\t\t\tcase \"c\":\n\t\t\tcase \"C\":\n\t\t\t\tresult = new Color();\n\t\t\t\tif (typecode === \"C\")\n\t\t\t\t\tthis.backrefs.push(result);\n\t\t\t\tresult._r = this.load();\n\t\t\t\tresult._g = this.load();\n\t\t\t\tresult._b = this.load();\n\t\t\t\tresult._a = this.load();\n\t\t\t\treturn result;\n\t\t\tcase \"x\":\n\t\t\tcase \"X\":\n\t\t\t{\n\t\t\t\tlet year = this.load();\n\t\t\t\tlet month = this.load();\n\t\t\t\tlet day = this.load();\n\t\t\t\tresult = new Date_(year, month, day);\n\t\t\t\tif (typecode === \"X\")\n\t\t\t\t\tthis.backrefs.push(result);\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\tcase \"z\":\n\t\t\tcase \"Z\":\n\t\t\t\tresult = new Date();\n\t\t\t\tresult.setFullYear(this.load());\n\t\t\t\tresult.setDate(1);\n\t\t\t\tresult.setMonth(this.load() - 1);\n\t\t\t\tresult.setDate(this.load());\n\t\t\t\tresult.setHours(this.load());\n\t\t\t\tresult.setMinutes(this.load());\n\t\t\t\tresult.setSeconds(this.load());\n\t\t\t\tresult.setMilliseconds(this.load()/1000);\n\t\t\t\tif (typecode === \"Z\")\n\t\t\t\t\tthis.backrefs.push(result);\n\t\t\t\treturn result;\n\t\t\tcase \"t\":\n\t\t\tcase \"T\":\n\t\t\t\tresult = new TimeDelta();\n\t\t\t\tresult._days = this.load();\n\t\t\t\tresult._seconds = this.load();\n\t\t\t\tresult._microseconds = this.load();\n\t\t\t\tif (typecode === \"T\")\n\t\t\t\t\tthis.backrefs.push(result);\n\t\t\t\treturn result;\n\t\t\tcase \"r\":\n\t\t\tcase \"R\":\n\t\t\t\tresult = new slice();\n\t\t\t\tif (typecode === \"R\")\n\t\t\t\t\tthis.backrefs.push(result);\n\t\t\t\tresult.start = this.load();\n\t\t\t\tresult.stop = this.load();\n\t\t\t\treturn result;\n\t\t\tcase \"m\":\n\t\t\tcase \"M\":\n\t\t\t\tresult = new MonthDelta();\n\t\t\t\tif (typecode === \"M\")\n\t\t\t\t\tthis.backrefs.push(result);\n\t\t\t\tresult._months = this.load();\n\t\t\t\treturn result;\n\t\t\tcase \"l\":\n\t\t\tcase \"L\":\n\t\t\t\tthis.stack.push(\"list\");\n\t\t\t\tresult = [];\n\t\t\t\tif (typecode === \"L\")\n\t\t\t\t\tthis.backrefs.push(result);\n\t\t\t\tfor (;;)\n\t\t\t\t{\n\t\t\t\t\ttypecode = this.readblackchar();\n\t\t\t\t\tif (typecode === \"]\")\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tthis.backup();\n\t\t\t\t\tresult.push(this.load());\n\t\t\t\t}\n\t\t\t\tthis.stack.pop();\n\t\t\t\treturn result;\n\t\t\tcase \"d\":\n\t\t\tcase \"D\":\n\t\t\tcase \"e\":\n\t\t\tcase \"E\":\n\t\t\t\tif (!_havemap && (typecode == \"e\" || typecode == \"E\"))\n\t\t\t\t\tthrow new ValueError(\"ordered dictionaries are not supported at position \" + this.pos + \" with path \" + this.stack.join(\"/\"));\n\t\t\t\tresult = _emptymap();\n\t\t\t\tthis.stack.push(typecode === \"d\" || typecode === \"D\" ? \"dict\" : \"odict\");\n\t\t\t\tif (typecode === \"D\" || typecode === \"E\")\n\t\t\t\t\tthis.backrefs.push(result);\n\t\t\t\tfor (;;)\n\t\t\t\t{\n\t\t\t\t\ttypecode = this.readblackchar();\n\t\t\t\t\tif (typecode === \"}\")\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tthis.backup();\n\t\t\t\t\tlet key = this.load();\n\t\t\t\t\tlet value = this.load();\n\t\t\t\t\t_setmap(result, key, value);\n\t\t\t\t}\n\t\t\t\tthis.stack.pop();\n\t\t\t\treturn result;\n\t\t\tcase \"y\":\n\t\t\tcase \"Y\":\n\t\t\t\tthis.stack.push(\"set\");\n\t\t\t\tresult = _makeset();\n\t\t\t\tif (typecode === \"Y\")\n\t\t\t\t\tthis.backrefs.push(result);\n\t\t\t\tfor (;;)\n\t\t\t\t{\n\t\t\t\t\ttypecode = this.readblackchar();\n\t\t\t\t\tif (typecode === \"}\")\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tthis.backup();\n\t\t\t\t\tresult.add(this.load());\n\t\t\t\t}\n\t\t\t\tthis.stack.pop();\n\t\t\t\treturn result;\n\t\t\tcase \"o\":\n\t\t\tcase \"O\":\n\t\t\t{\n\t\t\t\tlet oldpos;\n\t\t\t\tif (typecode === \"O\")\n\t\t\t\t\toldpos = this._beginfakeloading();\n\t\t\t\tlet name = this.load();\n\t\t\t\tthis.stack.push(name);\n\t\t\t\tlet constructor;\n\t\t\t\tif (this.registry !== null)\n\t\t\t\t{\n\t\t\t\t\tconstructor = this.registry[name];\n\t\t\t\t\tif (typeof(constructor) === \"undefined\")\n\t\t\t\t\t\tconstructor = _registry[name];\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tconstructor = _registry[name];\n\t\t\t\tif (typeof(constructor) === \"undefined\")\n\t\t\t\t\tthrow new ValueError(\"can't load object of type \" + _repr(name) + \" at position \" + this.pos + \" with path \" + this.stack.join(\"/\"));\n\t\t\t\tresult = new constructor();\n\t\t\t\tif (typecode === \"O\")\n\t\t\t\t\tthis._endfakeloading(oldpos, result);\n\t\t\t\tresult.ul4onload(this);\n\t\t\t\ttypecode = this.readblackchar();\n\t\t\t\tif (typecode !== \")\")\n\t\t\t\t\tthrow new ValueError(\"object terminator ')' for object of type '\" + name + \"' expected, got \" + _repr(typecode) + \" at position \" + this.pos + \" with path \" + this.stack.join(\"/\"));\n\t\t\t\tthis.stack.pop();\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\tdefault:\n\t\t\t\tthrow new ValueError(\"unknown typecode \" + _repr(typecode) + \" at position \" + this.pos + \" with path \" + this.stack.join(\"/\"));\n\t\t}\n\t}\n\n\t// Return an iterator for loading the content of a object\n\tloadcontent()\n\t{\n\t\tlet self = this;\n\t\treturn {\n\t\t\tnext: function()\n\t\t\t{\n\t\t\t\tlet typecode = self.readblackchar();\n\t\t\t\t// Always \"unread\" the typecode even at the end\n\t\t\t\t// so that at the end of a call to ul4onload()\n\t\t\t\t// the next input is the \"end of object\" marker\n\t\t\t\t// no matter whether ul4onload() uses loadcontent() or not.\n\t\t\t\tself.backup();\n\t\t\t\tif (typecode == \")\")\n\t\t\t\t\treturn {done: true};\n\t\t\t\telse\n\t\t\t\t\treturn {done: false, value: self.load()};\n\t\t\t}\n\t\t};\n\t}\n};\n\n//\n// UL4\n//\n\n// REs for parsing JSON\nconst _rvalidchars = /^[\\],:{}\\s]*$/;\nconst _rvalidescape = /\\\\(?:[\"\\\\\\/bfnrt]|u[0-9a-fA-F]{4})/g;\nconst _rvalidtokens = /\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g;\nconst _rvalidbraces = /(?:^|:|,)(?:\\s*\\[)+/g;\n\n/// Helper functions\n\n// Convert a map to an object\nexport function _map2object(obj)\n{\n\tif (_ismap(obj))\n\t{\n\t\tlet newobj = {};\n\t\tobj.forEach(function(value, key){\n\t\t\tif (typeof(key) !== \"string\")\n\t\t\t\tthrow new TypeError(\"keys must be strings\");\n\t\t\tnewobj[key] = value;\n\t\t});\n\t\treturn newobj;\n\t}\n\treturn obj;\n};\n\n// Clip a number to the range [0;max)\nexport function _bound(value, upper)\n{\n\tif (value < 0)\n\t\treturn 0;\n\telse if (value > upper)\n\t\treturn upper;\n\telse\n\t\treturn value;\n};\n\n// Create a pretty stacktrace from an exception\nexport function _stacktrace(exc)\n{\n\tlet output = (exc instanceof Exception ? exc.constructor.name + \": \" : \"\") + exc.toString();\n\tif (exc.context)\n\t\toutput = _stacktrace(exc.context) + \"\\n\\n\" + output;\n\treturn output;\n};\n\n// Call a function ``f`` with UL4 argument handling\nexport function _internal_call(context, f, name, functioncontext, signature, needscontext, needsobject, args, kwargs)\n{\n\tlet finalargs;\n\tif (needsobject)\n\t{\n\t\tif (signature === null)\n\t\t{\n\t\t\tif (args.length)\n\t\t\t\tthrow new ArgumentError(_repr(f) + \" doesn't support positional arguments!\");\n\t\t\tfinalargs = [kwargs];\n\t\t}\n\t\telse\n\t\t\tfinalargs = [signature.bindObject(name, args, kwargs)];\n\t}\n\telse\n\t{\n\t\tif (signature === null)\n\t\t\tthrow new ArgumentError(_repr(f) + \" doesn't support positional arguments!\");\n\t\tfinalargs = signature.bindArray(name, args, kwargs);\n\t}\n\tif (needscontext)\n\t\tfinalargs.unshift(context);\n\treturn f.apply(functioncontext, finalargs);\n};\n\nexport function _callfunction(context, f, args, kwargs)\n{\n\tlet name = f._ul4_name || f.name;\n\tif (typeof(f._ul4_signature) === \"undefined\" || typeof(f._ul4_needsobject) === \"undefined\" || typeof(f._ul4_needscontext) === \"undefined\")\n\t\tthrow new TypeError(_repr(f) + \" is not callable by UL4\");\n\treturn _internal_call(context, f, name, null, f._ul4_signature, f._ul4_needscontext, f._ul4_needsobject, args, kwargs);\n};\n\nexport function _callobject(context, obj, args, kwargs)\n{\n\tif (typeof(obj._ul4_callsignature) === \"undefined\" || typeof(obj._ul4_callneedsobject) === \"undefined\" || typeof(obj._ul4_callneedscontext) === \"undefined\")\n\t\tthrow new TypeError(_repr(obj) + \" is not callable by UL4\");\n\treturn _internal_call(context, obj.__call__, obj.name, obj, obj._ul4_callsignature, obj._ul4_callneedscontext, obj._ul4_callneedsobject, args, kwargs);\n};\n\nexport function _callrender(context, obj, args, kwargs)\n{\n\tif (typeof(obj._ul4_rendersignature) === \"undefined\" || typeof(obj._ul4_renderneedsobject) === \"undefined\" || typeof(obj._ul4_renderneedscontext) === \"undefined\")\n\t\tthrow new TypeError(_repr(obj) + \" is not renderable by UL4\");\n\treturn _internal_call(context, obj.__render__, obj.name, obj, obj._ul4_rendersignature, obj._ul4_renderneedscontext, obj._ul4_renderneedsobject, args, kwargs);\n};\n\nexport function _call(context, f, args, kwargs)\n{\n\tif (typeof(f) === \"function\")\n\t\treturn _callfunction(context, f, args, kwargs);\n\telse if (f && typeof(f.__call__) === \"function\")\n\t\treturn _callobject(context, f, args, kwargs);\n\telse\n\t\tthrow new TypeError(_type(f) + \" is not callable\");\n};\n\nexport function _unpackvar(lvalue, value)\n{\n\tif (!_islist(lvalue))\n\t\treturn [[lvalue, value]];\n\telse\n\t{\n\t\tlet newvalue = [];\n\t\tlet iter = _iter(value);\n\n\t\tfor (let i = 0;;++i)\n\t\t{\n\t\t\tlet item = iter.next();\n\n\t\t\tif (item.done)\n\t\t\t{\n\t\t\t\tif (i === lvalue.length)\n\t\t\t\t\tbreak;\n\t\t\t\telse\n\t\t\t\t\tthrow new ValueError(\"need \" + lvalue.length + \" value\" + (lvalue.length === 1 ? \"\" : \"s\") + \" to unpack, got \" + i);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (i < lvalue.length)\n\t\t\t\t\tnewvalue = newvalue.concat(_unpackvar(lvalue[i], item.value));\n\t\t\t\telse\n\t\t\t\t\tthrow new ValueError(\"too many values to unpack (expected \" + lvalue.length + \")\");\n\t\t\t}\n\t\t}\n\t\treturn newvalue;\n\t}\n};\n\nexport function _formatsource(out)\n{\n\tlet finalout = [];\n\tlet level = 0, needlf = false;\n\tfor (let part of out)\n\t{\n\t\tif (typeof(part) === \"number\")\n\t\t{\n\t\t\tlevel += part;\n\t\t\tneedlf = true;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (needlf)\n\t\t\t{\n\t\t\t\tfinalout.push(\"\\n\");\n\t\t\t\tfor (let j = 0; j < level; ++j)\n\t\t\t\t\tfinalout.push(\"\\t\");\n\t\t\t\tneedlf = false;\n\t\t\t}\n\t\t\tfinalout.push(part);\n\t\t}\n\t}\n\tif (needlf)\n\t\tfinalout.push(\"\\n\");\n\treturn finalout.join(\"\");\n};\n\n// Compare ``obj1`` and ``obj2`` if they have the same value\nexport function _eq(obj1, obj2)\n{\n\tlet numbertypes = [\"boolean\", \"number\"];\n\n\tif (obj1 && typeof(obj1.__eq__) === \"function\")\n\t\treturn obj1.__eq__(obj2);\n\telse if (obj2 && typeof(obj2.__eq__) === \"function\")\n\t\treturn obj2.__eq__(obj1);\n\telse if (obj1 === null)\n\t\treturn obj2 === null;\n\telse if (numbertypes.indexOf(typeof(obj1)) != -1)\n\t{\n\t\tif (numbertypes.indexOf(typeof(obj2)) != -1)\n\t\t\treturn obj1 == obj2;\n\t\telse\n\t\t\treturn false;\n\t}\n\telse if (typeof(obj1) === \"string\")\n\t{\n\t\tif (typeof(obj2) === \"string\")\n\t\t\treturn obj1 == obj2;\n\t\telse\n\t\t\treturn false;\n\t}\n\telse if (_isdatetime(obj1))\n\t{\n\t\tif (_isdatetime(obj2))\n\t\t\treturn obj1.getTime() == obj2.getTime();\n\t\telse\n\t\t\treturn false;\n\t}\n\telse if (_islist(obj1))\n\t{\n\t\tif (_islist(obj2))\n\t\t{\n\t\t\t// Shortcut, if it's the same object\n\t\t\tif (obj1 === obj2)\n\t\t\t\treturn true;\n\t\t\tif (obj1.length != obj2.length)\n\t\t\t\treturn false;\n\t\t\tfor (let i = 0; i < obj1.length; ++i)\n\t\t\t{\n\t\t\t\tif (!_eq(obj1[i], obj2[i])) // This might lead to infinite recursion and a stackoverflow, but it does in all implementations\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\telse\n\t\t\treturn false;\n\t}\n\telse if (_isobject(obj1))\n\t{\n\t\tif (_isobject(obj2))\n\t\t{\n\t\t\t// Shortcut, if it's the same object\n\t\t\tif (obj1 === obj2)\n\t\t\t\treturn true;\n\t\t\t// Test that each attribute of ``obj1`` can also be found in ``obj2`` and has the same value\n\t\t\tfor (let key in obj1)\n\t\t\t{\n\t\t\t\tif (obj2.hasOwnProperty(key))\n\t\t\t\t{\n\t\t\t\t\tif (!_eq(obj1[key], obj2[key]))\n\t\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t\t// Test that each attribute of ``obj2`` is also in ``obj1`` (the value has been tested before)\n\t\t\tfor (let key in obj2)\n\t\t\t{\n\t\t\t\tif (!obj1.hasOwnProperty(key))\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\telse if (_ismap(obj2))\n\t\t{\n\t\t\t// Test that each attribute of ``obj1`` can also be found in ``obj2`` and has the same value\n\t\t\tfor (let key in obj1)\n\t\t\t{\n\t\t\t\tif (obj2.has(key))\n\t\t\t\t{\n\t\t\t\t\tif (!_eq(obj1[key], obj2.get(key)))\n\t\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t\t// Test that each attribute of ``obj2`` is also in ``obj1`` (the value has been tested before)\n\t\t\tlet result = true;\n\t\t\tobj2.forEach(function(value, key) {\n\t\t\t\tif (!obj1.hasOwnProperty(key))\n\t\t\t\t\tresult = false;\n\t\t\t}, this);\n\t\t\treturn result;\n\t\t}\n\t\telse\n\t\t\treturn false;\n\t}\n\telse if (_ismap(obj1))\n\t{\n\t\tif (_isobject(obj2))\n\t\t{\n\t\t\t// Test that each attribute of ``obj1`` can also be found in ``obj2`` and has the same value\n\t\t\tobj1.forEach(function(value, key) {\n\t\t\t\tif (!obj2.hasOwnProperty(key))\n\t\t\t\t\treturn false;\n\t\t\t\telse if (!_eq(obj1.get(key), obj2[key]))\n\t\t\t\t\treturn false;\n\t\t\t}, this);\n\t\t\t// Test that each attribute of ``obj2`` is also in ``obj1`` (the value has been tested before)\n\t\t\tfor (let key in obj2)\n\t\t\t{\n\t\t\t\tif (!obj1.has(key))\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\telse if (_ismap(obj2))\n\t\t{\n\t\t\t// Shortcut, if it's the same object\n\t\t\tif (obj1 === obj2)\n\t\t\t\treturn true;\n\t\t\tif (obj1.size != obj2.size)\n\t\t\t\treturn false;\n\t\t\tlet result = true;\n\t\t\t// Test that each attribute of ``obj1`` can also be found in ``obj2`` and has the same value\n\t\t\tobj1.forEach(function(value, key) {\n\t\t\t\tif (!obj2.has(key))\n\t\t\t\t\tresult = false;\n\t\t\t\telse if (!_eq(obj1.get(key), obj2.get(key)))\n\t\t\t\t\tresult = false;\n\t\t\t});\n\t\t\treturn result;\n\t\t}\n\t\telse\n\t\t\treturn false;\n\t}\n\telse if (_isset(obj1))\n\t{\n\t\t// We don't have to test for ``_Set`` as ``_Set`` implements ``__eq__``\n\t\tif (_isset(obj2))\n\t\t{\n\t\t\t// Shortcut, if it's the same object\n\t\t\tif (obj1 === obj2)\n\t\t\t\treturn true;\n\t\t\tif (obj1.size != obj2.size)\n\t\t\t\treturn false;\n\t\t\tlet result = true;\n\t\t\tobj1.forEach(function(value) {\n\t\t\t\tif (!obj2.has(value))\n\t\t\t\t\tresult = false;\n\t\t\t});\n\t\t\treturn result;\n\t\t}\n\t\telse\n\t\t\treturn false;\n\t}\n\telse\n\t\treturn obj1 === obj2;\n};\n\n// Compare ``obj1`` and ``obj2`` if they don't have the same value\nexport function _ne(obj1, obj2)\n{\n\tif (obj1 && typeof(obj1.__ne__) === \"function\")\n\t\treturn obj1.__ne__(obj2);\n\telse if (obj2 && typeof(obj2.__ne__) === \"function\")\n\t\treturn obj2.__ne__(obj1);\n\telse\n\t\treturn !_eq(obj1, obj2);\n};\n\nexport function _unorderable(operator, obj1, obj2)\n{\n\tthrow new TypeError(\"unorderable types: \" + _type(obj1) + \" \" + operator + \" \" + _type(obj2));\n};\n\n// Return:\n// -1 when ``obj1 < obj2``,\n//  0 when ``obj1 == obj2``,\n//  1 when ``obj1 > obj2``,\n//  null when ``obj1`` and ``obj2`` are comparable, but neither of the previous cases holds (only for sets)\n// raise TypeError if objects are uncomparable\n// This the purpose of ``_cmp`` is to support implementation of <, <=, > and >=\n// and dicts/maps are not comparable with the operator ``_cmp`` does not support dicts/maps\n\nexport function _cmp(operator, obj1, obj2)\n{\n\tlet numbertypes = [\"boolean\", \"number\"];\n\n\tif (numbertypes.indexOf(typeof(obj1)) != -1)\n\t{\n\t\tif (numbertypes.indexOf(typeof(obj2)) != -1)\n\t\t\treturn (obj1 > obj2) - (obj1 < obj2);\n\t}\n\telse if (typeof(obj1) === \"string\")\n\t{\n\t\tif (typeof(obj2) === \"string\")\n\t\t\treturn (obj1 > obj2) - (obj1 < obj2);\n\t}\n\telse if (_isdatetime(obj1))\n\t{\n\t\tif (_isdatetime(obj2))\n\t\t{\n\t\t\tlet v1 = obj1.getTime(), v2 = obj2.getTime();\n\t\t\treturn (v1 > v2) - (v1 < v2);\n\t\t}\n\t}\n\telse if (_islist(obj1))\n\t{\n\t\tif (_islist(obj2))\n\t\t{\n\t\t\tif (obj1 === obj2)\n\t\t\t\treturn 0;\n\t\t\tfor (let i = 0; i < obj1.length; ++i)\n\t\t\t{\n\t\t\t\tif (i >= obj2.length)\n\t\t\t\t\treturn 1;\n\t\t\t\tlet res = _cmp(operator, obj1[i], obj2[i]);\n\t\t\t\tif (res)\n\t\t\t\t\treturn res;\n\t\t\t}\n\t\t\treturn obj2.length > obj1.length ? -1 : 0;\n\t\t}\n\t}\n\telse if (_isset(obj1) || _isul4set(obj1))\n\t{\n\t\tif (_isset(obj2) || _isul4set(obj2))\n\t\t{\n\t\t\tlet in1only = false;\n\t\t\tlet in2only = false;\n\n\t\t\tfor (let iter = _iter(obj1);;)\n\t\t\t{\n\t\t\t\tlet item = iter.next();\n\t\t\t\tif (item.done)\n\t\t\t\t\tbreak;\n\t\t\t\tif (!obj2.has(item.value))\n\t\t\t\t{\n\t\t\t\t\tin1only = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (let iter = _iter(obj2);;)\n\t\t\t{\n\t\t\t\tlet item = iter.next();\n\t\t\t\tif (item.done)\n\t\t\t\t\tbreak;\n\t\t\t\tif (!obj1.has(item.value))\n\t\t\t\t{\n\t\t\t\t\tin2only = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (in1only)\n\t\t\t{\n\t\t\t\tif (in2only)\n\t\t\t\t\treturn null;\n\t\t\t\telse\n\t\t\t\t\treturn 1;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (in2only)\n\t\t\t\t\treturn -1;\n\t\t\t\telse\n\t\t\t\t\treturn 0;\n\t\t\t}\n\t\t}\n\t}\n\treturn _unorderable(operator, obj1, obj2);\n};\n\n// Return whether ``obj1 < obj2``\nexport function _lt(obj1, obj2)\n{\n\tlet numbertypes = [\"boolean\", \"number\"];\n\n\tif (obj1 && typeof(obj1.__lt__) === \"function\")\n\t\treturn obj1.__lt__(obj2);\n\telse if (numbertypes.indexOf(typeof(obj1)) != -1)\n\t{\n\t\tif (numbertypes.indexOf(typeof(obj2)) != -1)\n\t\t\treturn obj1 < obj2;\n\t}\n\telse if (typeof(obj1) === \"string\")\n\t{\n\t\tif (typeof(obj2) === \"string\")\n\t\t\treturn obj1 < obj2;\n\t}\n\telse if (_isdatetime(obj1))\n\t{\n\t\tif (_isdatetime(obj2))\n\t\t\treturn obj1.getTime() < obj2.getTime();\n\t}\n\telse if (_islist(obj1))\n\t{\n\t\tif (_islist(obj2))\n\t\t{\n\t\t\tif (obj1 === obj2)\n\t\t\t\treturn false;\n\t\t\tfor (let i = 0; i < obj1.length; ++i)\n\t\t\t{\n\t\t\t\tif (i >= obj2.length)\n\t\t\t\t\treturn false;\n\t\t\t\tlet eq = _eq(obj1[i], obj2[i]);\n\t\t\t\tif (!eq)\n\t\t\t\t\treturn _lt(obj1[i], obj2[i]);\n\t\t\t}\n\t\t\treturn obj1.length < obj2.length;\n\t\t}\n\t}\n\t// FIXME: Set comparison\n\telse if (_isset(obj1))\n\t{\n\t\tif (_isset(obj2))\n\t\t{\n\t\t\tif (_isset(obj2))\n\t\t\t{\n\t\t\t\tfor (let key in obj1)\n\t\t\t\t{\n\t\t\t\t\tif (!obj2.has(obj1[key]))\n\t\t\t\t\t\tin1only = true;\n\t\t\t\t}\n\t\t\t\tfor (let key in obj2)\n\t\t\t\t{\n\t\t\t\t\tif (!obj1.has(obj2[key]))\n\t\t\t\t\t\tin2only = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (_isul4set(obj2))\n\t\t\t{\n\t\t\t\tfor (let key in obj1)\n\t\t\t\t{\n\t\t\t\t\tif (!obj2.items[obj1[key]])\n\t\t\t\t\t\tin1only = true;\n\t\t\t\t}\n\t\t\t\tfor (let value in obj2.items)\n\t\t\t\t{\n\t\t\t\t\tif (!obj1.has(value))\n\t\t\t\t\t{\n\t\t\t\t\t\tin2only = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if (_isul4set(obj2))\n\t\t{\n\t\t\tif (_isset(obj2))\n\t\t\t{\n\t\t\t\tfor (let value in obj1.items)\n\t\t\t\t{\n\t\t\t\t\tif (!obj2.has(value))\n\t\t\t\t\t{\n\t\t\t\t\t\tin1only = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (let key in obj2)\n\t\t\t\t{\n\t\t\t\t\tif (!obj1.items[obj2[key]])\n\t\t\t\t\t\tin2only = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (_isul4set(obj2))\n\t\t\t{\n\t\t\t\tfor (let value in obj1.items)\n\t\t\t\t{\n\t\t\t\t\tif (!obj2.items[value])\n\t\t\t\t\t{\n\t\t\t\t\t\tin1only = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (let value in obj2.items)\n\t\t\t\t{\n\t\t\t\t\tif (!obj1.items[value])\n\t\t\t\t\t{\n\t\t\t\t\t\tin2only = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\t_unorderable(operator, obj1, obj2);\n\n\t\tif (in1only)\n\t\t{\n\t\t\tif (in2only)\n\t\t\t\treturn null;\n\t\t\telse\n\t\t\t\treturn 1;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (in2only)\n\t\t\t\treturn -1;\n\t\t\telse\n\t\t\t\treturn 0;\n\t\t}\n\t}\n\t_unorderable(\"<\", obj1, obj2);\n};\n\n// Return whether ``obj1 <= obj2``\nexport function _le(obj1, obj2)\n{\n\tlet numbertypes = [\"boolean\", \"number\"];\n\n\tif (obj1 && typeof(obj1.__le__) === \"function\")\n\t\treturn obj1.__le__(obj2);\n\tif (numbertypes.indexOf(typeof(obj1)) != -1)\n\t{\n\t\tif (numbertypes.indexOf(typeof(obj2)) != -1)\n\t\t\treturn obj1 <= obj2;\n\t}\n\telse if (typeof(obj1) === \"string\")\n\t{\n\t\tif (typeof(obj2) === \"string\")\n\t\t\treturn obj1 <= obj2;\n\t}\n\telse if (_isdatetime(obj1))\n\t{\n\t\tif (_isdatetime(obj2))\n\t\t\treturn obj1.getTime() <= obj2.getTime();\n\t}\n\telse if (_islist(obj1))\n\t{\n\t\tif (_islist(obj2))\n\t\t{\n\t\t\tif (obj1 === obj2)\n\t\t\t\treturn true;\n\t\t\tfor (let i = 0; i < obj1.length; ++i)\n\t\t\t{\n\t\t\t\tif (i >= obj2.length)\n\t\t\t\t\treturn false;\n\t\t\t\tlet eq = _eq(obj1[i], obj2[i]);\n\t\t\t\tif (!eq)\n\t\t\t\t\treturn _lt(obj1[i], obj2[i]);\n\t\t\t}\n\t\t\treturn obj1.length <= obj2.length;\n\t\t}\n\t}\n\t// FIXME: Set comparison\n\telse if (_isset(obj1) || _isul4set(obj1))\n\t{\n\t\tlet in1only = false;\n\t\tlet in2only = false;\n\n\t\tif (_isset(obj2))\n\t\t{\n\t\t\tif (_isset(obj2))\n\t\t\t{\n\t\t\t\tobj1.forEach(function(value) {\n\t\t\t\t\tif (!obj2.has(value))\n\t\t\t\t\t\tin1only = true;\n\t\t\t\t});\n\t\t\t\tobj2.forEach(function(value) {\n\t\t\t\t\tif (!obj1.has(value))\n\t\t\t\t\t\tin2only = true;\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if (_isul4set(obj2))\n\t\t\t{\n\t\t\t\tobj1.forEach(function(value) {\n\t\t\t\t\tif (!obj2.items[value])\n\t\t\t\t\t\tin1only = true;\n\t\t\t\t});\n\t\t\t\tfor (let value in obj2.items)\n\t\t\t\t{\n\t\t\t\t\tif (!obj1.has(value))\n\t\t\t\t\t{\n\t\t\t\t\t\tin2only = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if (_isul4set(obj2))\n\t\t{\n\t\t\tif (_isset(obj2))\n\t\t\t{\n\t\t\t\tfor (let value in obj1.items)\n\t\t\t\t{\n\t\t\t\t\tif (!obj2.has(value))\n\t\t\t\t\t{\n\t\t\t\t\t\tin1only = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tobj2.forEach(function(value) {\n\t\t\t\t\tif (!obj1.items[value])\n\t\t\t\t\t\tin2only = true;\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if (_isul4set(obj2))\n\t\t\t{\n\t\t\t\tfor (let value in obj1.items)\n\t\t\t\t{\n\t\t\t\t\tif (!obj2.items[value])\n\t\t\t\t\t{\n\t\t\t\t\t\tin1only = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (let value in obj2.items)\n\t\t\t\t{\n\t\t\t\t\tif (!obj1.items[value])\n\t\t\t\t\t{\n\t\t\t\t\t\tin2only = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\t_unorderable(operator, obj1, obj2);\n\n\t\tif (in1only)\n\t\t{\n\t\t\tif (in2only)\n\t\t\t\treturn null;\n\t\t\telse\n\t\t\t\treturn 1;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (in2only)\n\t\t\t\treturn -1;\n\t\t\telse\n\t\t\t\treturn 0;\n\t\t}\n\t}\n\t_unorderable(\"<=\", obj1, obj2);\n};\n\n// Return whether ``obj1 > obj2``\nexport function _gt(obj1, obj2)\n{\n\tlet numbertypes = [\"boolean\", \"number\"];\n\n\tif (obj1 && typeof(obj1.__gt__) === \"function\")\n\t\treturn obj1.__gt__(obj2);\n\tif (numbertypes.indexOf(typeof(obj1)) != -1)\n\t{\n\t\tif (numbertypes.indexOf(typeof(obj2)) != -1)\n\t\t\treturn obj1 > obj2;\n\t}\n\telse if (typeof(obj1) === \"string\")\n\t{\n\t\tif (typeof(obj2) === \"string\")\n\t\t\treturn obj1 > obj2;\n\t}\n\telse if (_isdatetime(obj1))\n\t{\n\t\tif (_isdatetime(obj2))\n\t\t\treturn obj1.getTime() > obj2.getTime();\n\t}\n\telse if (_islist(obj1))\n\t{\n\t\tif (_islist(obj2))\n\t\t{\n\t\t\tif (obj1 === obj2)\n\t\t\t\treturn false;\n\t\t\tfor (let i = 0; i < obj1.length; ++i)\n\t\t\t{\n\t\t\t\tif (i >= obj2.length)\n\t\t\t\t\treturn true;\n\t\t\t\tlet eq = _eq(obj1[i], obj2[i]);\n\t\t\t\tif (!eq)\n\t\t\t\t\treturn _gt(obj1[i], obj2[i]);\n\t\t\t}\n\t\t\treturn obj1.length > obj2.length;\n\t\t}\n\t}\n\t// FIXME: Set comparison\n\telse if (_isset(obj1) || _isul4set(obj1))\n\t{\n\t\tlet in1only = false;\n\t\tlet in2only = false;\n\n\t\tif (_isset(obj2))\n\t\t{\n\t\t\tif (_isset(obj2))\n\t\t\t{\n\t\t\t\tobj1.forEach(function(value) {\n\t\t\t\t\tif (!obj2.has(value))\n\t\t\t\t\t\tin1only = true;\n\t\t\t\t});\n\t\t\t\tobj2.forEach(function(value) {\n\t\t\t\t\tif (!obj1.has(value))\n\t\t\t\t\t\tin2only = true;\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if (_isul4set(obj2))\n\t\t\t{\n\t\t\t\tobj1.forEach(function(value) {\n\t\t\t\t\tif (!obj2.items[value])\n\t\t\t\t\t\tin1only = true;\n\t\t\t\t});\n\t\t\t\tobj2.forEach(function(value) {\n\t\t\t\t\tif (!obj1.has(value))\n\t\t\t\t\t{\n\t\t\t\t\t\tin2only = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\telse if (_isul4set(obj2))\n\t\t{\n\t\t\tif (_isset(obj2))\n\t\t\t{\n\t\t\t\tfor (let value in obj1.items)\n\t\t\t\t{\n\t\t\t\t\tif (!obj2.has(value))\n\t\t\t\t\t{\n\t\t\t\t\t\tin1only = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tobj2.forEach(function(value) {\n\t\t\t\t\tif (!obj1.items[value])\n\t\t\t\t\t\tin2only = true;\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if (_isul4set(obj2))\n\t\t\t{\n\t\t\t\tfor (let value in obj1.items)\n\t\t\t\t{\n\t\t\t\t\tif (!obj2.items[value])\n\t\t\t\t\t{\n\t\t\t\t\t\tin1only = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (let value in obj2.items)\n\t\t\t\t{\n\t\t\t\t\tif (!obj1.items[value])\n\t\t\t\t\t{\n\t\t\t\t\t\tin2only = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\t_unorderable(operator, obj1, obj2);\n\n\t\tif (in1only)\n\t\t{\n\t\t\tif (in2only)\n\t\t\t\treturn null;\n\t\t\telse\n\t\t\t\treturn 1;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (in2only)\n\t\t\t\treturn -1;\n\t\t\telse\n\t\t\t\treturn 0;\n\t\t}\n\t}\n\t_unorderable(\">\", obj1, obj2);\n};\n\n// Return whether ``obj1 >= obj2``\nexport function _ge(obj1, obj2)\n{\n\tlet numbertypes = [\"boolean\", \"number\"];\n\n\tif (obj1 && typeof(obj1.__ge__) === \"function\")\n\t\treturn obj1.__ge__(obj2);\n\telse if (numbertypes.indexOf(typeof(obj1)) != -1)\n\t{\n\t\tif (numbertypes.indexOf(typeof(obj2)) != -1)\n\t\t\treturn obj1 >= obj2;\n\t}\n\telse if (typeof(obj1) === \"string\")\n\t{\n\t\tif (typeof(obj2) === \"string\")\n\t\t\treturn obj1 >= obj2;\n\t}\n\telse if (_isdatetime(obj1))\n\t{\n\t\tif (_isdatetime(obj2))\n\t\t\treturn obj1.getTime() >= obj2.getTime();\n\t}\n\telse if (_islist(obj1))\n\t{\n\t\tif (_islist(obj2))\n\t\t{\n\t\t\tif (obj1 === obj2)\n\t\t\t\treturn true;\n\t\t\tfor (let i = 0; i < obj1.length; ++i)\n\t\t\t{\n\t\t\t\tif (i >= obj2.length)\n\t\t\t\t\treturn true;\n\t\t\t\tlet eq = _eq(obj1[i], obj2[i]);\n\t\t\t\tif (!eq)\n\t\t\t\t\treturn _gt(obj1[i], obj2[i]);\n\t\t\t}\n\t\t\treturn obj1.length >= obj2.length;\n\t\t}\n\t}\n\t// FIXME: Set comparison\n\telse if (_isset(obj1) || _isul4set(obj1))\n\t{\n\t\tlet in1only = false;\n\t\tlet in2only = false;\n\n\t\tif (_isset(obj2))\n\t\t{\n\t\t\tif (_isset(obj2))\n\t\t\t{\n\t\t\t\tobj1.forEach(function(value) {\n\t\t\t\t\tif (!obj2.has(value))\n\t\t\t\t\t\tin1only = true;\n\t\t\t\t});\n\t\t\t\tobj2.forEach(function(value) {\n\t\t\t\t\tif (!obj1.has(value))\n\t\t\t\t\t\tin2only = true;\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if (_isul4set(obj2))\n\t\t\t{\n\t\t\t\tobj1.forEach(function(value) {\n\t\t\t\t\tif (!obj2.items[value])\n\t\t\t\t\t\tin1only = true;\n\t\t\t\t});\n\t\t\t\tfor (let value in obj2.items)\n\t\t\t\t{\n\t\t\t\t\tif (!obj1.has(value))\n\t\t\t\t\t{\n\t\t\t\t\t\tin2only = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if (_isul4set(obj2))\n\t\t{\n\t\t\tif (_isset(obj2))\n\t\t\t{\n\t\t\t\tfor (let value in obj1.items)\n\t\t\t\t{\n\t\t\t\t\tif (!obj2.has(value))\n\t\t\t\t\t{\n\t\t\t\t\t\tin1only = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tobj2.forEach(function(value, key) {\n\t\t\t\t\tif (!obj1.items[value])\n\t\t\t\t\t\tin2only = true;\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if (_isul4set(obj2))\n\t\t\t{\n\t\t\t\tfor (let value in obj1.items)\n\t\t\t\t{\n\t\t\t\t\tif (!obj2.items[value])\n\t\t\t\t\t{\n\t\t\t\t\t\tin1only = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (let value in obj2.items)\n\t\t\t\t{\n\t\t\t\t\tif (!obj1.items[value])\n\t\t\t\t\t{\n\t\t\t\t\t\tin2only = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\t_unorderable(operator, obj1, obj2);\n\n\t\tif (in1only)\n\t\t{\n\t\t\tif (in2only)\n\t\t\t\treturn null;\n\t\t\telse\n\t\t\t\treturn 1;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (in2only)\n\t\t\t\treturn -1;\n\t\t\telse\n\t\t\t\treturn 0;\n\t\t}\n\t}\n\t_unorderable(\">=\", obj1, obj2);\n};\n\n// Return an iterator for ``obj``\nexport function _iter(obj)\n{\n\tif (typeof(obj) === \"string\" || _islist(obj))\n\t{\n\t\treturn {\n\t\t\tindex: 0,\n\t\t\tnext: function()\n\t\t\t{\n\t\t\t\tif (this.index < obj.length)\n\t\t\t\t\treturn {value: obj[this.index++], done: false};\n\t\t\t\telse\n\t\t\t\t\treturn {done: true};\n\t\t\t}\n\t\t};\n\t}\n\telse if (_isiter(obj))\n\t\treturn obj;\n\telse if (obj !== null && typeof(obj.__iter__) === \"function\")\n\t\treturn obj.__iter__();\n\telse if (_ismap(obj))\n\t{\n\t\tlet keys = [];\n\t\tobj.forEach(function(value, key) {\n\t\t\tkeys.push(key);\n\t\t});\n\t\treturn {\n\t\t\tindex: 0,\n\t\t\tnext: function()\n\t\t\t{\n\t\t\t\tif (this.index >= keys.length)\n\t\t\t\t\treturn {done: true};\n\t\t\t\treturn {value: keys[this.index++], done: false};\n\t\t\t}\n\t\t};\n\t}\n\telse if (_isset(obj))\n\t{\n\t\tlet values = [];\n\t\tobj.forEach(function(item) {\n\t\t\tvalues.push(item);\n\t\t});\n\t\treturn {\n\t\t\tindex: 0,\n\t\t\tnext: function()\n\t\t\t{\n\t\t\t\tif (this.index >= values.length)\n\t\t\t\t\treturn {done: true};\n\t\t\t\treturn {value: values[this.index++], done: false};\n\t\t\t}\n\t\t};\n\t}\n\telse if (_isul4set(obj))\n\t{\n\t\treturn _iter(obj.items);\n\t}\n\telse if (_isobject(obj))\n\t{\n\t\tlet keys = [];\n\t\tfor (let key in obj)\n\t\t\tkeys.push(key);\n\t\treturn {\n\t\t\tindex: 0,\n\t\t\tnext: function()\n\t\t\t{\n\t\t\t\tif (this.index >= keys.length)\n\t\t\t\t\treturn {done: true};\n\t\t\t\treturn {value: keys[this.index++], done: false};\n\t\t\t}\n\t\t};\n\t}\n\tthrow new TypeError(_type(obj) + \" object is not iterable\");\n};\n\nfunction _str_repr(str, ascii)\n{\n\tlet result = \"\";\n\tlet squote = false, dquote = false;\n\n\tfor (let c of str)\n\t{\n\t\tif (c == '\"')\n\t\t{\n\t\t\tdquote = true;\n\t\t\tif (squote)\n\t\t\t\tbreak;\n\t\t}\n\t\telse if (c == \"'\")\n\t\t{\n\t\t\tsquote = true;\n\t\t\tif (dquote)\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t// Prefer single quotes: Only use double quotes if the string contains single quotes, but no double quotes\n\tlet quote = (squote && !dquote) ? '\"' : \"'\";\n\n\tfor (let c of str)\n\t{\n\t\tswitch (c)\n\t\t{\n\t\t\tcase '\"':\n\t\t\t\tresult += (quote == c) ? '\\\\\"' : c;\n\t\t\t\tbreak;\n\t\t\tcase \"'\":\n\t\t\t\tresult += (quote == c) ? \"\\\\'\" : c;\n\t\t\t\tbreak;\n\t\t\tcase \"\\\\\":\n\t\t\t\tresult += \"\\\\\\\\\";\n\t\t\t\tbreak;\n\t\t\tcase \"\\t\":\n\t\t\t\tresult += \"\\\\t\";\n\t\t\t\tbreak;\n\t\t\tcase \"\\n\":\n\t\t\t\tresult += \"\\\\n\";\n\t\t\t\tbreak;\n\t\t\tcase \"\\r\":\n\t\t\t\tresult += \"\\\\r\";\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tlet code = c.charCodeAt(0);\n\t\t\t\tlet escape;\n\t\t\t\tif (code < 32)\n\t\t\t\t\tescape = 2;\n\t\t\t\telse if (code < 0x7f)\n\t\t\t\t\tescape = 0;\n\t\t\t\telse if (!ascii && !/[\\u007f-\\u00a0\\u00ad\\u0378-\\u0379\\u0380-\\u0383\\u038b\\u038d\\u03a2\\u0530\\u0557-\\u0558\\u0560\\u0588\\u058b-\\u058c\\u0590\\u05c8-\\u05cf\\u05eb-\\u05ef\\u05f5-\\u0605\\u061c-\\u061d\\u06dd\\u070e-\\u070f\\u074b-\\u074c\\u07b2-\\u07bf\\u07fb-\\u07ff\\u082e-\\u082f\\u083f\\u085c-\\u085d\\u085f-\\u089f\\u08b5-\\u08e2\\u0984\\u098d-\\u098e\\u0991-\\u0992\\u09a9\\u09b1\\u09b3-\\u09b5\\u09ba-\\u09bb\\u09c5-\\u09c6\\u09c9-\\u09ca\\u09cf-\\u09d6\\u09d8-\\u09db\\u09de\\u09e4-\\u09e5\\u09fc-\\u0a00\\u0a04\\u0a0b-\\u0a0e\\u0a11-\\u0a12\\u0a29\\u0a31\\u0a34\\u0a37\\u0a3a-\\u0a3b\\u0a3d\\u0a43-\\u0a46\\u0a49-\\u0a4a\\u0a4e-\\u0a50\\u0a52-\\u0a58\\u0a5d\\u0a5f-\\u0a65\\u0a76-\\u0a80\\u0a84\\u0a8e\\u0a92\\u0aa9\\u0ab1\\u0ab4\\u0aba-\\u0abb\\u0ac6\\u0aca\\u0ace-\\u0acf\\u0ad1-\\u0adf\\u0ae4-\\u0ae5\\u0af2-\\u0af8\\u0afa-\\u0b00\\u0b04\\u0b0d-\\u0b0e\\u0b11-\\u0b12\\u0b29\\u0b31\\u0b34\\u0b3a-\\u0b3b\\u0b45-\\u0b46\\u0b49-\\u0b4a\\u0b4e-\\u0b55\\u0b58-\\u0b5b\\u0b5e\\u0b64-\\u0b65\\u0b78-\\u0b81\\u0b84\\u0b8b-\\u0b8d\\u0b91\\u0b96-\\u0b98\\u0b9b\\u0b9d\\u0ba0-\\u0ba2\\u0ba5-\\u0ba7\\u0bab-\\u0bad\\u0bba-\\u0bbd\\u0bc3-\\u0bc5\\u0bc9\\u0bce-\\u0bcf\\u0bd1-\\u0bd6\\u0bd8-\\u0be5\\u0bfb-\\u0bff\\u0c04\\u0c0d\\u0c11\\u0c29\\u0c3a-\\u0c3c\\u0c45\\u0c49\\u0c4e-\\u0c54\\u0c57\\u0c5b-\\u0c5f\\u0c64-\\u0c65\\u0c70-\\u0c77\\u0c80\\u0c84\\u0c8d\\u0c91\\u0ca9\\u0cb4\\u0cba-\\u0cbb\\u0cc5\\u0cc9\\u0cce-\\u0cd4\\u0cd7-\\u0cdd\\u0cdf\\u0ce4-\\u0ce5\\u0cf0\\u0cf3-\\u0d00\\u0d04\\u0d0d\\u0d11\\u0d3b-\\u0d3c\\u0d45\\u0d49\\u0d4f-\\u0d56\\u0d58-\\u0d5e\\u0d64-\\u0d65\\u0d76-\\u0d78\\u0d80-\\u0d81\\u0d84\\u0d97-\\u0d99\\u0db2\\u0dbc\\u0dbe-\\u0dbf\\u0dc7-\\u0dc9\\u0dcb-\\u0dce\\u0dd5\\u0dd7\\u0de0-\\u0de5\\u0df0-\\u0df1\\u0df5-\\u0e00\\u0e3b-\\u0e3e\\u0e5c-\\u0e80\\u0e83\\u0e85-\\u0e86\\u0e89\\u0e8b-\\u0e8c\\u0e8e-\\u0e93\\u0e98\\u0ea0\\u0ea4\\u0ea6\\u0ea8-\\u0ea9\\u0eac\\u0eba\\u0ebe-\\u0ebf\\u0ec5\\u0ec7\\u0ece-\\u0ecf\\u0eda-\\u0edb\\u0ee0-\\u0eff\\u0f48\\u0f6d-\\u0f70\\u0f98\\u0fbd\\u0fcd\\u0fdb-\\u0fff\\u10c6\\u10c8-\\u10cc\\u10ce-\\u10cf\\u1249\\u124e-\\u124f\\u1257\\u1259\\u125e-\\u125f\\u1289\\u128e-\\u128f\\u12b1\\u12b6-\\u12b7\\u12bf\\u12c1\\u12c6-\\u12c7\\u12d7\\u1311\\u1316-\\u1317\\u135b-\\u135c\\u137d-\\u137f\\u139a-\\u139f\\u13f6-\\u13f7\\u13fe-\\u13ff\\u1680\\u169d-\\u169f\\u16f9-\\u16ff\\u170d\\u1715-\\u171f\\u1737-\\u173f\\u1754-\\u175f\\u176d\\u1771\\u1774-\\u177f\\u17de-\\u17df\\u17ea-\\u17ef\\u17fa-\\u17ff\\u180e-\\u180f\\u181a-\\u181f\\u1878-\\u187f\\u18ab-\\u18af\\u18f6-\\u18ff\\u191f\\u192c-\\u192f\\u193c-\\u193f\\u1941-\\u1943\\u196e-\\u196f\\u1975-\\u197f\\u19ac-\\u19af\\u19ca-\\u19cf\\u19db-\\u19dd\\u1a1c-\\u1a1d\\u1a5f\\u1a7d-\\u1a7e\\u1a8a-\\u1a8f\\u1a9a-\\u1a9f\\u1aae-\\u1aaf\\u1abf-\\u1aff\\u1b4c-\\u1b4f\\u1b7d-\\u1b7f\\u1bf4-\\u1bfb\\u1c38-\\u1c3a\\u1c4a-\\u1c4c\\u1c80-\\u1cbf\\u1cc8-\\u1ccf\\u1cf7\\u1cfa-\\u1cff\\u1df6-\\u1dfb\\u1f16-\\u1f17\\u1f1e-\\u1f1f\\u1f46-\\u1f47\\u1f4e-\\u1f4f\\u1f58\\u1f5a\\u1f5c\\u1f5e\\u1f7e-\\u1f7f\\u1fb5\\u1fc5\\u1fd4-\\u1fd5\\u1fdc\\u1ff0-\\u1ff1\\u1ff5\\u1fff-\\u200f\\u2028-\\u202f\\u205f-\\u206f\\u2072-\\u2073\\u208f\\u209d-\\u209f\\u20bf-\\u20cf\\u20f1-\\u20ff\\u218c-\\u218f\\u23fb-\\u23ff\\u2427-\\u243f\\u244b-\\u245f\\u2b74-\\u2b75\\u2b96-\\u2b97\\u2bba-\\u2bbc\\u2bc9\\u2bd2-\\u2beb\\u2bf0-\\u2bff\\u2c2f\\u2c5f\\u2cf4-\\u2cf8\\u2d26\\u2d28-\\u2d2c\\u2d2e-\\u2d2f\\u2d68-\\u2d6e\\u2d71-\\u2d7e\\u2d97-\\u2d9f\\u2da7\\u2daf\\u2db7\\u2dbf\\u2dc7\\u2dcf\\u2dd7\\u2ddf\\u2e43-\\u2e7f\\u2e9a\\u2ef4-\\u2eff\\u2fd6-\\u2fef\\u2ffc-\\u3000\\u3040\\u3097-\\u3098\\u3100-\\u3104\\u312e-\\u3130\\u318f\\u31bb-\\u31bf\\u31e4-\\u31ef\\u321f\\u32ff\\u4db6-\\u4dbf\\u9fd6-\\u9fff\\ua48d-\\ua48f\\ua4c7-\\ua4cf\\ua62c-\\ua63f\\ua6f8-\\ua6ff\\ua7ae-\\ua7af\\ua7b8-\\ua7f6\\ua82c-\\ua82f\\ua83a-\\ua83f\\ua878-\\ua87f\\ua8c5-\\ua8cd\\ua8da-\\ua8df\\ua8fe-\\ua8ff\\ua954-\\ua95e\\ua97d-\\ua97f\\ua9ce\\ua9da-\\ua9dd\\ua9ff\\uaa37-\\uaa3f\\uaa4e-\\uaa4f\\uaa5a-\\uaa5b\\uaac3-\\uaada\\uaaf7-\\uab00\\uab07-\\uab08\\uab0f-\\uab10\\uab17-\\uab1f\\uab27\\uab2f\\uab66-\\uab6f\\uabee-\\uabef\\uabfa-\\uabff\\ud7a4-\\ud7af\\ud7c7-\\ud7ca\\ud7fc-\\uf8ff\\ufa6e-\\ufa6f\\ufada-\\ufaff\\ufb07-\\ufb12\\ufb18-\\ufb1c\\ufb37\\ufb3d\\ufb3f\\ufb42\\ufb45\\ufbc2-\\ufbd2\\ufd40-\\ufd4f\\ufd90-\\ufd91\\ufdc8-\\ufdef\\ufdfe-\\ufdff\\ufe1a-\\ufe1f\\ufe53\\ufe67\\ufe6c-\\ufe6f\\ufe75\\ufefd-\\uff00\\uffbf-\\uffc1\\uffc8-\\uffc9\\uffd0-\\uffd1\\uffd8-\\uffd9\\uffdd-\\uffdf\\uffe7\\uffef-\\ufffb\\ufffe-\\uffff]/.test(c))\n\t\t\t\t\tescape = 0;\n\t\t\t\telse if (code <= 0xff)\n\t\t\t\t\tescape = 2;\n\t\t\t\telse if (code <= 0xffff)\n\t\t\t\t\tescape = 4;\n\t\t\t\telse\n\t\t\t\t\tescape = 8;\n\n\t\t\t\tif (escape === 0)\n\t\t\t\t\tresult += c;\n\t\t\t\telse if (escape === 2)\n\t\t\t\t\tresult += \"\\\\x\" + _lpad(code.toString(16), \"0\", 2);\n\t\t\t\telse if (escape === 4)\n\t\t\t\t\tresult += \"\\\\u\" + _lpad(code.toString(16), \"0\", 4);\n\t\t\t\telse\n\t\t\t\t\tresult += \"\\\\U\" + _lpad(code.toString(16), \"0\", 8);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\treturn quote + result + quote;\n};\n\nfunction _date_repr(obj, ascii)\n{\n\tlet year = obj._date.getFullYear();\n\tlet month = obj._date.getMonth()+1;\n\tlet day = obj._date.getDate();\n\tlet result = \"@(\" + year + \"-\" + _lpad(month.toString(), \"0\", 2) + \"-\" + _lpad(day.toString(), \"0\", 2) + \")\";\n\treturn result;\n};\n\nfunction _datetime_repr(obj, ascii)\n{\n\tlet year = obj.getFullYear();\n\tlet month = obj.getMonth()+1;\n\tlet day = obj.getDate();\n\tlet hour = obj.getHours();\n\tlet minute = obj.getMinutes();\n\tlet second = obj.getSeconds();\n\tlet ms = obj.getMilliseconds();\n\tlet result = \"@(\" + year + \"-\" + _lpad(month.toString(), \"0\", 2) + \"-\" + _lpad(day.toString(), \"0\", 2) + \"T\";\n\n\tif (hour || minute || second || ms)\n\t{\n\t\tresult += _lpad(hour.toString(), \"0\", 2) + \":\" + _lpad(minute.toString(), \"0\", 2);\n\t\tif (second || ms)\n\t\t{\n\t\t\tresult += \":\" + _lpad(second.toString(), \"0\", 2);\n\t\t\tif (ms)\n\t\t\t\tresult += \".\" + _lpad(ms.toString(), \"0\", 3) + \"000\";\n\t\t}\n\t}\n\tresult += \")\";\n\n\treturn result;\n};\n\nfunction _map_repr(obj, ascii)\n{\n\tlet v = [];\n\tv.push(\"{\");\n\n\tlet i = 0;\n\tobj.forEach(function(value, key) {\n\t\tif (i++)\n\t\t\tv.push(\", \");\n\t\tv.push(_repr_internal(key, ascii));\n\t\tv.push(\": \");\n\t\tv.push(_repr_internal(value, ascii));\n\t});\n\n\tv.push(\"}\");\n\treturn v.join(\"\");\n};\n\nfunction _list_repr(obj, ascii)\n{\n\tlet v = [];\n\tv.push(\"[\");\n\tlet first = true;\n\tfor (let item of obj)\n\t{\n\t\tif (first)\n\t\t\tfirst = false;\n\t\telse\n\t\t\tv.push(\", \");\n\t\tv.push(_repr_internal(item, ascii));\n\t}\n\tv.push(\"]\");\n\treturn v.join(\"\");\n};\n\nfunction _set_repr(obj, ascii)\n{\n\tlet v = [];\n\tv.push(\"{\");\n\tif (!obj.size)\n\t\tv.push(\"/\");\n\telse\n\t{\n\t\tlet i = 0;\n\t\tobj.forEach(function(value) {\n\t\t\tif (i++)\n\t\t\t\tv.push(\", \");\n\t\t\tv.push(_repr_internal(value, ascii));\n\t\t});\n\t}\n\tv.push(\"}\");\n\treturn v.join(\"\");\n};\n\nfunction _object_repr(obj, ascii)\n{\n\tlet v = [];\n\tv.push(\"{\");\n\tlet i = 0;\n\tfor (let key in obj)\n\t{\n\t\tif (!obj.hasOwnProperty(key))\n\t\t\tcontinue;\n\t\tif (i++)\n\t\t\tv.push(\", \");\n\t\tv.push(_repr_internal(key, ascii));\n\t\tv.push(\": \");\n\t\tv.push(_repr_internal(obj[key], ascii));\n\t}\n\tv.push(\"}\");\n\treturn v.join(\"\");\n};\n\nfunction _repr_internal(obj, ascii)\n{\n\tif (obj === null)\n\t\treturn \"None\";\n\telse if (obj === false)\n\t\treturn \"False\";\n\telse if (obj === true)\n\t\treturn \"True\";\n\telse if (typeof(obj) === \"string\")\n\t\treturn _str_repr(obj, ascii);\n\telse if (typeof(obj) === \"number\")\n\t\treturn \"\" + obj;\n\telse if (typeof(obj) === \"function\")\n\t\tif (obj._ul4_name || obj.name)\n\t\t\treturn \"<function \" + (obj._ul4_name || obj.name) + \">\";\n\t\telse\n\t\t\treturn \"<anonymous function>\";\n\telse if (_isdate(obj))\n\t\treturn _date_repr(obj, ascii);\n\telse if (_isdatetime(obj))\n\t\treturn _datetime_repr(obj, ascii);\n\telse if (typeof(obj) === \"undefined\")\n\t\treturn \"<undefined>\";\n\telse if (typeof(obj) === \"object\" && typeof(obj.__repr__) === \"function\")\n\t\treturn obj.__repr__();\n\telse if (_islist(obj))\n\t\treturn _list_repr(obj, ascii);\n\telse if (_ismap(obj))\n\t\treturn _map_repr(obj, ascii);\n\telse if (_isset(obj))\n\t\treturn _set_repr(obj, ascii);\n\telse if (_isobject(obj))\n\t\treturn _object_repr(obj, ascii);\n\treturn \"?\";\n};\n\n// Return a string representation of ``obj``: If possible this should be an object literal supported by UL4, otherwise the output should be bracketed with ``<`` and ``>``\nexport function _repr(obj)\n{\n\treturn _repr_internal(obj, false);\n};\n\nexport function _ascii(obj)\n{\n\treturn _repr_internal(obj, true);\n};\n\nfunction _date_str(obj)\n{\n\tlet year = obj._date.getFullYear();\n\tlet month = obj._date.getMonth()+1;\n\tlet day = obj._date.getDate();\n\n\treturn year + \"-\" + _lpad(month.toString(), \"0\", 2) + \"-\" + _lpad(day.toString(), \"0\", 2);\n};\n\nfunction _datetime_str(obj)\n{\n\tlet year = obj.getFullYear();\n\tlet month = obj.getMonth()+1;\n\tlet day = obj.getDate();\n\tlet hour = obj.getHours();\n\tlet minute = obj.getMinutes();\n\tlet second = obj.getSeconds();\n\tlet ms = obj.getMilliseconds();\n\n\tlet result = year + \"-\" + _lpad(month.toString(), \"0\", 2) + \"-\" + _lpad(day.toString(), \"0\", 2) + \" \" + _lpad(hour.toString(), \"0\", 2) + \":\" + _lpad(minute.toString(), \"0\", 2);\n\tif (second || ms)\n\t{\n\t\tresult += \":\" + _lpad(second.toString(), \"0\", 2);\n\t\tif (ms)\n\t\t\tresult += \".\" + _lpad(ms.toString(), \"0\", 3) + \"000\";\n\t}\n\treturn result;\n};\n\nexport function _str(obj)\n{\n\tif (typeof(obj) === \"undefined\")\n\t\treturn \"\";\n\telse if (obj === null)\n\t\treturn \"\";\n\telse if (obj === false)\n\t\treturn \"False\";\n\telse if (obj === true)\n\t\treturn \"True\";\n\telse if (typeof(obj) === \"string\")\n\t\treturn obj;\n\telse if (typeof(obj) === \"number\")\n\t\treturn obj.toString();\n\telse if (_isdate(obj))\n\t\treturn _date_str(obj);\n\telse if (_isdatetime(obj))\n\t\treturn _datetime_str(obj);\n\telse if (_islist(obj))\n\t\treturn _list_repr(obj);\n\telse if (_isset(obj))\n\t\treturn _set_repr(obj);\n\telse if (_ismap(obj))\n\t\treturn _map_repr(obj);\n\telse if (typeof(obj) === \"object\" && typeof(obj.__str__) === \"function\")\n\t\treturn obj.__str__();\n\telse if (typeof(obj) === \"object\" && typeof(obj.__repr__) === \"function\")\n\t\treturn obj.__repr__();\n\telse if (_isobject(obj))\n\t\treturn _object_repr(obj);\n\treturn \"?\";\n};\n\n// Convert ``obj`` to bool, according to its \"truth value\"\nexport function _bool(obj)\n{\n\tif (typeof(obj) === \"undefined\" || obj === null || obj === false || obj === 0 || obj === \"\")\n\t\treturn false;\n\telse\n\t{\n\t\tif (typeof(obj) === \"object\", typeof(obj.__bool__) === \"function\")\n\t\t\treturn obj.__bool__();\n\t\tif (_islist(obj))\n\t\t\treturn obj.length !== 0;\n\t\telse if (_ismap(obj) || _isset(obj))\n\t\t\treturn obj.size != 0;\n\t\telse if (_isobject(obj))\n\t\t{\n\t\t\tfor (let key in obj)\n\t\t\t{\n\t\t\t\tif (!obj.hasOwnProperty(key))\n\t\t\t\t\tcontinue;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n};\n\n// Convert ``obj`` to an integer (if ``base`` is given ``obj`` must be a string and ``base`` is the base for the conversion (default is 10))\nexport function _int(obj, base)\n{\n\tlet result;\n\tif (base !== null)\n\t{\n\t\tif (typeof(obj) !== \"string\" || !_isint(base))\n\t\t\tthrow new TypeError(\"int() requires a string and an integer\");\n\t\tresult = parseInt(obj, base);\n\t\tif (result.toString() == \"NaN\")\n\t\t\tthrow new TypeError(\"invalid literal for int()\");\n\t\treturn result;\n\t}\n\telse\n\t{\n\t\tif (typeof(obj) == \"string\")\n\t\t{\n\t\t\tresult = parseInt(obj);\n\t\t\tif (result.toString() == \"NaN\")\n\t\t\tthrow new TypeError(\"invalid literal for int()\");\n\t\t\treturn result;\n\t\t}\n\t\telse if (typeof(obj) == \"number\")\n\t\t\treturn Math.floor(obj);\n\t\telse if (obj === true)\n\t\t\treturn 1;\n\t\telse if (obj === false)\n\t\t\treturn 0;\n\t\tthrow new TypeError(\"int() argument must be a string or a number\");\n\t}\n};\n\n// Convert ``obj`` to a float\nexport function _float(obj)\n{\n\tif (typeof(obj) === \"string\")\n\t\treturn parseFloat(obj);\n\telse if (typeof(obj) === \"number\")\n\t\treturn obj;\n\telse if (obj === true)\n\t\treturn 1.0;\n\telse if (obj === false)\n\t\treturn 0.0;\n\tthrow new TypeError(\"float() argument must be a string or a number\");\n};\n\n// Convert ``obj`` to a list\nexport function _list(obj)\n{\n\tlet iter = _iter(obj);\n\n\tlet result = [];\n\tfor (;;)\n\t{\n\t\tlet value = iter.next();\n\t\tif (value.done)\n\t\t\treturn result;\n\t\tresult.push(value.value);\n\t}\n};\n\n// Convert ``obj`` to a set\nexport function _set(obj)\n{\n\tlet iter = _iter(obj);\n\n\tlet result = _emptyset();\n\tfor (;;)\n\t{\n\t\tlet value = iter.next();\n\t\tif (value.done)\n\t\t\treturn result;\n\t\tresult.add(value.value);\n\t}\n};\n\n// Return the length of ``sequence``\nexport function _len(sequence)\n{\n\tif (typeof(sequence) == \"string\" || _islist(sequence))\n\t\treturn sequence.length;\n\telse if (_ismap(sequence) || _isset(sequence))\n\t\treturn sequence.size;\n\telse if (_isobject(sequence))\n\t{\n\t\tlet i = 0;\n\t\tfor (let key in sequence)\n\t\t\t++i;\n\t\treturn i;\n\t}\n\tthrow new TypeError(\"object of type '\" + _type(sequence) + \"' has no len()\");\n};\n\nexport function _type(obj)\n{\n\tif (obj === null)\n\t\treturn \"none\";\n\telse if (obj === false || obj === true)\n\t\treturn \"bool\";\n\telse if (typeof(obj) === \"undefined\")\n\t\treturn \"undefined\";\n\telse if (typeof(obj) === \"number\")\n\t\treturn Math.round(obj) == obj ? \"int\" : \"float\";\n\telse if (typeof(obj) === \"function\")\n\t\treturn \"function\";\n\telse\n\t{\n\t\tif (typeof(obj.ul4type) === \"function\")\n\t\t\treturn obj.ul4type();\n\t\telse\n\t\t\treturn Protocol.get(obj).ul4type(obj);\n\t}\n};\n\n// (this is non-trivial, because it follows the Python semantic of ``-5 % 2`` being ``1``)\nexport function _mod(obj1, obj2)\n{\n\tlet div = Math.floor(obj1 / obj2);\n\tlet mod = obj1 - div * obj2;\n\n\tif (mod !== 0 && ((obj2 < 0 && mod > 0) || (obj2 > 0 && mod < 0)))\n\t{\n\t\tmod += obj2;\n\t\t--div;\n\t}\n\treturn obj1 - div * obj2;\n};\n\n// Return the attribute with the name ``attrname`` of the object ``obj``\n// If ``obj`` doesn't have such an attribute, return ``default_``\nexport function _getattr(obj, attrname, default_=null)\n{\n\tlet proto = Protocol.get(obj);\n\ttry\n\t{\n\t\treturn proto.getattr(obj, attrname);\n\t}\n\tcatch (exc)\n\t{\n\t\tif (exc instanceof AttributeError && exc.obj === obj)\n\t\t\treturn default_;\n\t\telse\n\t\t\tthrow exc;\n\t}\n};\n\n// Return wether the object ``obj`` has an attribute with the name ``attrname``\nexport function _hasattr(obj, attrname)\n{\n\tlet proto = Protocol.get(obj);\n\treturn proto.hasattr(obj, attrname);\n};\n\n// Return the names of the attributes of the object ``obj`` as a set.\nexport function _dir(obj)\n{\n\tlet proto = Protocol.get(obj);\n\treturn proto.dir();\n};\n\n// Return whether any of the items in ``iterable`` are true\nexport function _any(iterable)\n{\n\tif (typeof(iterable) == \"string\")\n\t{\n\t\tfor (let c of iterable)\n\t\t{\n\t\t\tif (c !== '\\x00')\n\t\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\telse\n\t{\n\t\tfor (let iter = _iter(iterable);;)\n\t\t{\n\t\t\tlet item = iter.next();\n\t\t\tif (item.done)\n\t\t\t\treturn false;\n\t\t\tif (_bool(item.value))\n\t\t\t\treturn true;\n\t\t}\n\t}\n};\n\n// Return whether all of the items in ``iterable`` are true\nexport function _all(iterable)\n{\n\tif (typeof(iterable) == \"string\")\n\t{\n\t\tfor (let c of iterable)\n\t\t{\n\t\t\tif (c === '\\x00')\n\t\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\telse\n\t{\n\t\tfor (let iter = _iter(iterable);;)\n\t\t{\n\t\t\tlet item = iter.next();\n\t\t\tif (item.done)\n\t\t\t\treturn true;\n\t\t\tif (!_bool(item.value))\n\t\t\t\treturn false;\n\t\t}\n\t}\n};\n\n// Check if ``obj`` is undefined\nexport function _isundefined(obj)\n{\n\treturn typeof(obj) === \"undefined\";\n};\n\n\n// Check if ``obj`` is *not* undefined\nexport function _isdefined(obj)\n{\n\treturn typeof(obj) !== \"undefined\";\n};\n\n// Check if ``obj`` is ``None``\nexport function _isnone(obj)\n{\n\treturn obj === null;\n};\n\n// Check if ``obj`` is a boolean\nexport function _isbool(obj)\n{\n\treturn typeof(obj) == \"boolean\";\n};\n\n// Check if ``obj`` is a int\nexport function _isint(obj)\n{\n\treturn (typeof(obj) == \"number\") && Math.round(obj) == obj;\n};\n\n// Check if ``obj`` is a float\nexport function _isfloat(obj)\n{\n\treturn (typeof(obj) == \"number\") && Math.round(obj) != obj;\n};\n\n// Check if ``obj`` is a string\nexport function _isstr(obj)\n{\n\treturn typeof(obj) == \"string\";\n};\n\n// Check if ``obj`` is a datetime\nexport function _isdatetime(obj)\n{\n\treturn Object.prototype.toString.call(obj) == \"[object Date]\";\n};\n\nexport function _isdate(obj)\n{\n\treturn (obj instanceof Date_);\n};\n\n// Check if ``obj`` is a color\nexport function _iscolor(obj)\n{\n\treturn (obj instanceof Color);\n};\n\n// Check if ``obj`` is a timedelta object\nexport function _istimedelta(obj)\n{\n\treturn (obj instanceof TimeDelta);\n};\n\n// Check if ``obj`` is a monthdelta object\nexport function _ismonthdelta(obj)\n{\n\treturn (obj instanceof MonthDelta);\n};\n\n// Check if ``obj`` is a template\nexport function _istemplate(obj)\n{\n\treturn (obj instanceof Template || obj instanceof TemplateClosure);\n};\n\n// Check if ``obj`` is a function\nexport function _isfunction(obj)\n{\n\treturn typeof(obj) === \"function\" || (Object.prototype.toString.call(obj) == \"[object Object]\" && (obj instanceof Template || obj instanceof TemplateClosure));\n};\n\n// Check if ``obj`` is a list\nexport function _islist(obj)\n{\n\treturn Object.prototype.toString.call(obj) == \"[object Array]\";\n};\n\n// Check if ``obj`` is a set\nexport function _isset(obj)\n{\n\treturn Object.prototype.toString.call(obj) == \"[object Set]\";\n};\n\n// Check if ``obj`` is an exception (at least a UL4 exception)\nexport function _isexception(obj)\n{\n\treturn (obj instanceof Exception);\n};\n\nexport function _isul4set(obj)\n{\n\treturn (obj instanceof _Set);\n};\n\nexport function _isanyset(obj)\n{\n\treturn (_isset(obj) || _isul4set(obj));\n};\n\n// Check if ``obj`` is an iterator\nexport function _isiter(obj)\n{\n\treturn obj !== null && typeof(obj) === \"object\" && typeof(obj.next) === \"function\";\n};\n\n// Check if ``obj`` is a JS object\nexport function _isobject(obj)\n{\n\treturn Object.prototype.toString.call(obj) == \"[object Object]\" && typeof(obj.__type__) === \"undefined\" && !(obj instanceof Proto);\n};\n\n// Check if ``obj`` is a ``Map``\nexport let _ismap = _havemap ? function _ismap(obj)\n\t{\n\t\treturn obj !== null && typeof(obj) === \"object\" && typeof(obj.__proto__) === \"object\" && obj.__proto__ === Map.prototype;\n\t}\n:\n\tfunction _ismap(obj)\n\t{\n\t\treturn false;\n\t}\n;\n\n\t// Check if ``obj`` is a dict (i.e. a normal Javascript object or a ``Map``)\nexport let _isdict = _havemap ? function _isdict(obj)\n\t{\n\t\treturn _isobject(obj) || _ismap(obj);\n\t}\n:\n\tfunction _isdict(obj)\n\t{\n\t\treturn _isobject(obj);\n\t}\n;\n\n// Repeat string ``str`` ``rep`` times\nexport function _str_repeat(str, rep)\n{\n\tlet result = \"\";\n\tfor (; rep>0; --rep)\n\t\tresult += str;\n\treturn result;\n};\n\nexport function _list_repeat(list, rep)\n{\n\tlet result = [];\n\tfor (; rep>0; --rep)\n\t\tfor (let item of list)\n\t\t\tresult.push(item);\n\treturn result;\n};\n\nfunction _str_json(str)\n{\n\tlet result = \"\";\n\tfor (let c of str)\n\t{\n\t\tswitch (c)\n\t\t{\n\t\t\tcase \"\\r\":\n\t\t\t\tresult += \"\\\\r\";\n\t\t\t\tbreak;\n\t\t\tcase \"\\n\":\n\t\t\t\tresult += \"\\\\n\";\n\t\t\t\tbreak;\n\t\t\tcase \"\\t\":\n\t\t\t\tresult += \"\\\\t\";\n\t\t\t\tbreak;\n\t\t\tcase \"\\\\\":\n\t\t\t\tresult += \"\\\\\\\\\";\n\t\t\t\tbreak;\n\t\t\tcase '\"':\n\t\t\t\tresult += '\\\\\"';\n\t\t\t\tbreak;\n\t\t\tcase '<':\n\t\t\t\tresult += '\\\\u003c';\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tlet code = c.charCodeAt(0);\n\t\t\t\tif (code >= 32 && code < 128)\n\t\t\t\t\tresult += c;\n\t\t\t\telse\n\t\t\t\t\tresult += \"\\\\u\" + _lpad(code.toString(16), \"0\", 4);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\treturn '\"' + result + '\"';\n};\n\n// Encodes ``obj`` in the Javascript Object Notation (see http://json.org/; with support for dates, colors and templates)\nexport function _asjson(obj)\n{\n\tif (obj === null)\n\t\treturn \"null\";\n\telse if (typeof(obj) === \"undefined\")\n\t\treturn \"undefined\";\n\telse if (obj === false)\n\t\treturn \"false\";\n\telse if (obj === true)\n\t\treturn \"true\";\n\telse if (typeof(obj) === \"string\")\n\t\treturn _str_json(obj);\n\telse if (typeof(obj) === \"number\")\n\t{\n\t\treturn \"\" + obj;\n\t}\n\telse if (_islist(obj))\n\t{\n\t\tlet v = [];\n\t\tv.push(\"[\");\n\t\tlet first = true;\n\t\tfor (let item of obj)\n\t\t{\n\t\t\tif (first)\n\t\t\t\tfirst = false;\n\t\t\telse\n\t\t\t\tv.push(\", \");\n\t\t\tv.push(_asjson(item));\n\t\t}\n\t\tv.push(\"]\");\n\t\treturn v.join(\"\");\n\t}\n\telse if (_ismap(obj))\n\t{\n\t\tlet v = [];\n\t\tv.push(\"{\");\n\t\tlet first = true;\n\t\tobj.forEach(function(value, key) {\n\t\t\tif (first)\n\t\t\t\tfirst = false;\n\t\t\telse\n\t\t\t\tv.push(\", \");\n\t\t\tv.push(_asjson(key));\n\t\t\tv.push(\": \");\n\t\t\tv.push(_asjson(value));\n\t\t});\n\t\tv.push(\"}\");\n\t\treturn v.join(\"\");\n\t}\n\telse if (_isobject(obj))\n\t{\n\t\tlet v = [];\n\t\tv.push(\"{\");\n\t\tlet first = true;\n\t\tfor (let key in obj)\n\t\t{\n\t\t\tif (first)\n\t\t\t\tfirst = false;\n\t\t\telse\n\t\t\t\tv.push(\", \");\n\t\t\tv.push(_asjson(key));\n\t\t\tv.push(\": \");\n\t\t\tv.push(_asjson(obj[key]));\n\t\t}\n\t\tv.push(\"}\");\n\t\treturn v.join(\"\");\n\t}\n\telse if (_isdate(obj))\n\t{\n\t\treturn \"new ul4.Date_(\" + obj._date.getFullYear() + \", \" + (obj._date.getMonth()+1) + \", \" + obj._date.getDate() + \")\";\n\t}\n\telse if (_isdatetime(obj))\n\t{\n\t\treturn \"new Date(\" + obj.getFullYear() + \", \" + obj.getMonth() + \", \" + obj.getDate() + \", \" + obj.getHours() + \", \" + obj.getMinutes() + \", \" + obj.getSeconds() + \", \" + obj.getMilliseconds() + \")\";\n\t}\n\telse if (_istimedelta(obj))\n\t{\n\t\treturn \"new ul4.TimeDelta(\" + obj._days + \", \" + obj._seconds + \", \" + obj._microseconds + \")\";\n\t}\n\telse if (_ismonthdelta(obj))\n\t{\n\t\treturn \"new ul4.MonthDelta(\" + obj._months + \")\";\n\t}\n\telse if (_iscolor(obj))\n\t{\n\t\treturn \"new ul4.Color(\" + obj._r + \", \" + obj._g + \", \" + obj._b + \", \" + obj._a + \")\";\n\t}\n\telse if (_istemplate(obj))\n\t{\n\t\treturn \"ul4.Template.loads(\" + _repr(obj.dumps()) + \")\";\n\t}\n\tthrow new TypeError(\"asjson() requires a serializable object\");\n};\n\n// Decodes the string ``string`` from the Javascript Object Notation (see http://json.org/) and returns the resulting object\nexport function _fromjson(string)\n{\n\t// The following is from jQuery's parseJSON function\n\tstring = StrProtocol.strip(string);\n\tif (JSON && JSON.parse)\n\t\treturn JSON.parse(string);\n\tif (_rvalidchars.test(string.replace(_rvalidescape, \"@\").replace(_rvalidtokens, \"]\").replace(_rvalidbraces, \"\")))\n\t\treturn (new Function(\"return \" + string))();\n\tthrow new TypeError(\"invalid JSON\");\n};\n\n// Encodes ``obj`` in the UL4 Object Notation format\nexport function _asul4on(obj)\n{\n\treturn dumps(obj);\n};\n\n// Decodes the string ``string`` from the UL4 Object Notation format and returns the resulting decoded object\nexport function _fromul4on(string)\n{\n\treturn loads(string);\n};\n\nfunction _format_datetime(obj, fmt, lang)\n{\n\tlet translations = {\n\t\tde: {\n\t\t\tms: [\"Jan\", \"Feb\", \"M\\u00e4r\", \"Apr\", \"Mai\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Dez\"],\n\t\t\tml: [\"Januar\", \"Februar\", \"M\\u00e4rz\", \"April\", \"Mai\", \"Juni\", \"Juli\", \"August\", \"September\", \"Oktober\", \"November\", \"Dezember\"],\n\t\t\tws: [\"So\", \"Mo\", \"Di\", \"Mi\", \"Do\", \"Fr\", \"Sa\"],\n\t\t\twl: [\"Sonntag\", \"Montag\", \"Dienstag\", \"Mittwoch\", \"Donnerstag\", \"Freitag\", \"Samstag\"],\n\t\t\txf: \"%d.%m.%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a %d %b %Y %H:%M:%S\"\n\t\t},\n\t\ten: {\n\t\t\tms: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"],\n\t\t\tml: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n\t\t\tws: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n\t\t\twl: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\n\t\t\txf: \"%m/%d/%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a %d %b %Y %I:%M:%S %p\"\n\t\t},\n\t\tfr: {\n\t\t\tms: [\"janv.\", \"f\\u00e9vr.\", \"mars\", \"avril\", \"mai\", \"juin\", \"juil.\", \"ao\\u00fbt\", \"sept.\", \"oct.\", \"nov.\", \"d\\u00e9c.\"],\n\t\t\tml: [\"janvier\", \"f\\u00e9vrier\", \"mars\", \"avril\", \"mai\", \"juin\", \"juillet\", \"ao\\u00fbt\", \"septembre\", \"octobre\", \"novembre\", \"d\\u00e9cembre\"],\n\t\t\tws: [\"dim.\", \"lun.\", \"mar.\", \"mer.\", \"jeu.\", \"ven.\", \"sam.\"],\n\t\t\twl: [\"dimanche\", \"lundi\", \"mardi\", \"mercredi\", \"jeudi\", \"vendredi\", \"samedi\"],\n\t\t\txf: \"%d/%m/%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a %d %b %Y %H:%M:%S\"\n\t\t},\n\t\tes: {\n\t\t\tms: [\"ene\", \"feb\", \"mar\", \"abr\", \"may\", \"jun\", \"jul\", \"ago\", \"sep\", \"oct\", \"nov\", \"dic\"],\n\t\t\tml: [\"enero\", \"febrero\", \"marzo\", \"abril\", \"mayo\", \"junio\", \"julio\", \"agosto\", \"septiembre\", \"octubre\", \"noviembre\", \"diciembre\"],\n\t\t\tws: [\"dom\", \"lun\", \"mar\", \"mi\\u00e9\", \"jue\", \"vie\", \"s\\u00e1b\"],\n\t\t\twl: [\"domingo\", \"lunes\", \"martes\", \"mi\\u00e9rcoles\", \"jueves\", \"viernes\", \"s\\u00e1bado\"],\n\t\t\txf: \"%d/%m/%y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a %d %b %Y %H:%M:%S\"\n\t\t},\n\t\tit: {\n\t\t\tms: [\"gen\", \"feb\", \"mar\", \"apr\", \"mag\", \"giu\", \"lug\", \"ago\", \"set\", \"ott\", \"nov\", \"dic\"],\n\t\t\tml: [\"gennaio\", \"febbraio\", \"marzo\", \"aprile\", \"maggio\", \"giugno\", \"luglio\", \"agosto\", \"settembre\", \"ottobre\", \"novembre\", \"dicembre\"],\n\t\t\tws: [\"dom\", \"lun\", \"mar\", \"mer\", \"gio\", \"ven\", \"sab\"],\n\t\t\twl: [\"domenica\", \"luned\\u00ec\", \"marted\\u00ec\", \"mercoled\\u00ec\", \"gioved\\u00ec\", \"venerd\\u00ec\", \"sabato\"],\n\t\t\txf: \"%d/%m/%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a %d %b %Y %H:%M:%S\"\n\t\t},\n\t\tda: {\n\t\t\tms: [\"jan\", \"feb\", \"mar\", \"apr\", \"maj\", \"jun\", \"jul\", \"aug\", \"sep\", \"okt\", \"nov\", \"dec\"],\n\t\t\tml: [\"januar\", \"februar\", \"marts\", \"april\", \"maj\", \"juni\", \"juli\", \"august\", \"september\", \"oktober\", \"november\", \"december\"],\n\t\t\tws: [\"s\\u00f8n\", \"man\", \"tir\", \"ons\", \"tor\", \"fre\", \"l\\u00f8r\"],\n\t\t\twl: [\"s\\u00f8ndag\", \"mandag\", \"tirsdag\", \"onsdag\", \"torsdag\", \"fredag\", \"l\\u00f8rdag\"],\n\t\t\txf: \"%d-%m-%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a %d %b %Y %H:%M:%S\"\n\t\t},\n\t\tsv: {\n\t\t\tms: [\"jan\", \"feb\", \"mar\", \"apr\", \"maj\", \"jun\", \"jul\", \"aug\", \"sep\", \"okt\", \"nov\", \"dec\"],\n\t\t\tml: [\"januari\", \"februari\", \"mars\", \"april\", \"maj\", \"juni\", \"juli\", \"augusti\", \"september\", \"oktober\", \"november\", \"december\"],\n\t\t\tws: [\"s\\u00f6n\", \"m\\u00e5n\", \"tis\", \"ons\", \"tor\", \"fre\", \"l\\u00f6r\"],\n\t\t\twl: [\"s\\u00f6ndag\", \"m\\u00e5ndag\", \"tisdag\", \"onsdag\", \"torsdag\", \"fredag\", \"l\\u00f6rdag\"],\n\t\t\txf: \"%Y-%m-%d\",\n\t\t\tXf: \"%H.%M.%S\",\n\t\t\tcf: \"%a %d %b %Y %H.%M.%S\"\n\t\t},\n\t\tnl: {\n\t\t\tms: [\"jan\", \"feb\", \"mrt\", \"apr\", \"mei\", \"jun\", \"jul\", \"aug\", \"sep\", \"okt\", \"nov\", \"dec\"],\n\t\t\tml: [\"januari\", \"februari\", \"maart\", \"april\", \"mei\", \"juni\", \"juli\", \"augustus\", \"september\", \"oktober\", \"november\", \"december\"],\n\t\t\tws: [\"zo\", \"ma\", \"di\", \"wo\", \"do\", \"vr\", \"za\"],\n\t\t\twl: [\"zondag\", \"maandag\", \"dinsdag\", \"woensdag\", \"donderdag\", \"vrijdag\", \"zaterdag\"],\n\t\t\txf: \"%d-%m-%y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a %d %b %Y %H:%M:%S\"\n\t\t},\n\t\tpt: {\n\t\t\tms: [\"Jan\", \"Fev\", \"Mar\", \"Abr\", \"Mai\", \"Jun\", \"Jul\", \"Ago\", \"Set\", \"Out\", \"Nov\", \"Dez\"],\n\t\t\tml: [\"Janeiro\", \"Fevereiro\", \"Mar\\u00e7o\", \"Abril\", \"Maio\", \"Junho\", \"Julho\", \"Agosto\", \"Setembro\", \"Outubro\", \"Novembro\", \"Dezembro\"],\n\t\t\tws: [\"Dom\", \"Seg\", \"Ter\", \"Qua\", \"Qui\", \"Sex\", \"S\\u00e1b\"],\n\t\t\twl: [\"Domingo\", \"Segunda\", \"Ter\\u00e7a\", \"Quarta\", \"Quinta\", \"Sexta\", \"S\\u00e1bado\"],\n\t\t\txf: \"%d-%m-%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a %d %b %Y %H:%M:%S\"\n\t\t},\n\t\tcs: {\n\t\t\tms: [\"led\", \"\\u00fano\", \"b\\u0159e\", \"dub\", \"kv\\u011b\", \"\\u010den\", \"\\u010dec\", \"srp\", \"z\\u00e1\\u0159\", \"\\u0159\\u00edj\", \"lis\", \"pro\"],\n\t\t\tml: [\"leden\", \"\\u00fanor\", \"b\\u0159ezen\", \"duben\", \"kv\\u011bten\", \"\\u010derven\", \"\\u010dervenec\", \"srpen\", \"z\\u00e1\\u0159\\u00ed\", \"\\u0159\\u00edjen\", \"listopad\", \"prosinec\"],\n\t\t\tws: [\"Ne\", \"Po\", \"\\u00dat\", \"St\", \"\\u010ct\", \"P\\u00e1\", \"So\"],\n\t\t\twl: [\"Ned\\u011ble\", \"Pond\\u011bl\\u00ed\", \"\\u00dater\\u00fd\", \"St\\u0159eda\", \"\\u010ctvrtek\", \"P\\u00e1tek\", \"Sobota\"],\n\t\t\txf: \"%d.%m.%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a\\u00a0%d.\\u00a0%B\\u00a0%Y,\\u00a0%H:%M:%S\"\n\t\t},\n\t\tsk: {\n\t\t\tms: [\"jan\", \"feb\", \"mar\", \"apr\", \"m\\u00e1j\", \"j\\u00fan\", \"j\\u00fal\", \"aug\", \"sep\", \"okt\", \"nov\", \"dec\"],\n\t\t\tml: [\"janu\\u00e1r\", \"febru\\u00e1r\", \"marec\", \"apr\\u00edl\", \"m\\u00e1j\", \"j\\u00fan\", \"j\\u00fal\", \"august\", \"september\", \"okt\\u00f3ber\", \"november\", \"december\"],\n\t\t\tws: [\"Ne\", \"Po\", \"Ut\", \"St\", \"\\u0160t\", \"Pi\", \"So\"],\n\t\t\twl: [\"Nede\\u013ea\", \"Pondelok\", \"Utorok\", \"Streda\", \"\\u0160tvrtok\", \"Piatok\", \"Sobota\"],\n\t\t\txf: \"%d.%m.%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a\\u00a0%d.\\u00a0%B\\u00a0%Y,\\u00a0%H:%M:%S\"\n\t\t},\n\t\tpl: {\n\t\t\tms: [\"sty\", \"lut\", \"mar\", \"kwi\", \"maj\", \"cze\", \"lip\", \"sie\", \"wrz\", \"pa\\u017a\", \"lis\", \"gru\"],\n\t\t\tml: [\"stycze\\u0144\", \"luty\", \"marzec\", \"kwiecie\\u0144\", \"maj\", \"czerwiec\", \"lipiec\", \"sierpie\\u0144\", \"wrzesie\\u0144\", \"pa\\u017adziernik\", \"listopad\", \"grudzie\\u0144\"],\n\t\t\tws: [\"nie\", \"pon\", \"wto\", \"\\u015bro\", \"czw\", \"pi\\u0105\", \"sob\"],\n\t\t\twl: [\"niedziela\", \"poniedzia\\u0142ek\", \"wtorek\", \"\\u015broda\", \"czwartek\", \"pi\\u0105tek\", \"sobota\"],\n\t\t\txf: \"%d.%m.%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a, %d %b %Y, %H:%M:%S\"\n\t\t},\n\t\thr: {\n\t\t\tms: [\"Sij\", \"Vel\", \"O\\u017eu\", \"Tra\", \"Svi\", \"Lip\", \"Srp\", \"Kol\", \"Ruj\", \"Lis\", \"Stu\", \"Pro\"],\n\t\t\tml: [\"Sije\\u010danj\", \"Velja\\u010da\", \"O\\u017eujak\", \"Travanj\", \"Svibanj\", \"Lipanj\", \"Srpanj\", \"Kolovoz\", \"Rujan\", \"Listopad\", \"Studeni\", \"Prosinac\"],\n\t\t\tws: [\"Ned\", \"Pon\", \"Uto\", \"Sri\", \"\\u010cet\", \"Pet\", \"Sub\"],\n\t\t\twl: [\"Nedjelja\", \"Ponedjeljak\", \"Utorak\", \"Srijeda\", \"\\u010cetvrtak\", \"Petak\", \"Subota\"],\n\t\t\txf: \"%d.%m.%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a %d %b %Y %H:%M:%S\"\n\t\t},\n\t\tsr: {\n\t\t\tms: [\"\\u0458\\u0430\\u043d\", \"\\u0444\\u0435\\u0431\", \"\\u043c\\u0430\\u0440\", \"\\u0430\\u043f\\u0440\", \"\\u043c\\u0430\\u0458\", \"\\u0458\\u0443\\u043d\", \"\\u0458\\u0443\\u043b\", \"\\u0430\\u0432\\u0433\", \"\\u0441\\u0435\\u043f\", \"\\u043e\\u043a\\u0442\", \"\\u043d\\u043e\\u0432\", \"\\u0434\\u0435\\u0446\"],\n\t\t\tml: [\"\\u0458\\u0430\\u043d\\u0443\\u0430\\u0440\", \"\\u0444\\u0435\\u0431\\u0440\\u0443\\u0430\\u0440\", \"\\u043c\\u0430\\u0440\\u0442\", \"\\u0430\\u043f\\u0440\\u0438\\u043b\", \"\\u043c\\u0430\\u0458\", \"\\u0458\\u0443\\u043d\", \"\\u0458\\u0443\\u043b\", \"\\u0430\\u0432\\u0433\\u0443\\u0441\\u0442\", \"\\u0441\\u0435\\u043f\\u0442\\u0435\\u043c\\u0431\\u0430\\u0440\", \"\\u043e\\u043a\\u0442\\u043e\\u0431\\u0430\\u0440\", \"\\u043d\\u043e\\u0432\\u0435\\u043c\\u0431\\u0430\\u0440\", \"\\u0434\\u0435\\u0446\\u0435\\u043c\\u0431\\u0430\\u0440\"],\n\t\t\tws: [\"\\u043d\\u0435\\u0434\", \"\\u043f\\u043e\\u043d\", \"\\u0443\\u0442\\u043e\", \"\\u0441\\u0440\\u0435\", \"\\u0447\\u0435\\u0442\", \"\\u043f\\u0435\\u0442\", \"\\u0441\\u0443\\u0431\"],\n\t\t\twl: [\"\\u043d\\u0435\\u0434\\u0435\\u0459\\u0430\", \"\\u043f\\u043e\\u043d\\u0435\\u0434\\u0435\\u0459\\u0430\\u043a\", \"\\u0443\\u0442\\u043e\\u0440\\u0430\\u043a\", \"\\u0441\\u0440\\u0435\\u0434\\u0430\", \"\\u0447\\u0435\\u0442\\u0432\\u0440\\u0442\\u0430\\u043a\", \"\\u043f\\u0435\\u0442\\u0430\\u043a\", \"\\u0441\\u0443\\u0431\\u043e\\u0442\\u0430\"],\n\t\t\txf: \"%d.%m.%Y.\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%A, %d. %B %Y. %H:%M:%S\"\n\t\t},\n\t\tro: {\n\t\t\tms: [\"ian\", \"feb\", \"mar\", \"apr\", \"mai\", \"iun\", \"iul\", \"aug\", \"sep\", \"oct\", \"nov\", \"dec\"],\n\t\t\tml: [\"ianuarie\", \"februarie\", \"martie\", \"aprilie\", \"mai\", \"iunie\", \"iulie\", \"august\", \"septembrie\", \"octombrie\", \"noiembrie\", \"decembrie\"],\n\t\t\tws: [\"Du\", \"Lu\", \"Ma\", \"Mi\", \"Jo\", \"Vi\", \"Sb\"],\n\t\t\twl: [\"duminic\\u0103\", \"luni\", \"mar\\u0163i\", \"miercuri\", \"joi\", \"vineri\", \"s\\u00e2mb\\u0103t\\u0103\"],\n\t\t\txf: \"%d.%m.%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a %d %b %Y %H:%M:%S\"\n\t\t},\n\t\thu: {\n\t\t\tms: [\"jan\", \"febr\", \"m\\u00e1rc\", \"\\u00e1pr\", \"m\\u00e1j\", \"j\\u00fan\", \"j\\u00fal\", \"aug\", \"szept\", \"okt\", \"nov\", \"dec\"],\n\t\t\tml: [\"janu\\u00e1r\", \"febru\\u00e1r\", \"m\\u00e1rcius\", \"\\u00e1prilis\", \"m\\u00e1jus\", \"j\\u00fanius\", \"j\\u00falius\", \"augusztus\", \"szeptember\", \"okt\\u00f3ber\", \"november\", \"december\"],\n\t\t\tws: [\"v\", \"h\", \"k\", \"sze\", \"cs\", \"p\", \"szo\"],\n\t\t\twl: [\"vas\\u00e1rnap\", \"h\\u00e9tf\\u0151\", \"kedd\", \"szerda\", \"cs\\u00fct\\u00f6rt\\u00f6k\", \"p\\u00e9ntek\", \"szombat\"],\n\t\t\txf: \"%Y-%m-%d\",\n\t\t\tXf: \"%H.%M.%S\",\n\t\t\tcf: \"%Y. %b. %d., %A, %H.%M.%S\"\n\t\t},\n\t\ttr: {\n\t\t\tms: [\"Oca\", \"\\u015eub\", \"Mar\", \"Nis\", \"May\", \"Haz\", \"Tem\", \"A\\u011fu\", \"Eyl\", \"Eki\", \"Kas\", \"Ara\"],\n\t\t\tml: [\"Ocak\", \"\\u015eubat\", \"Mart\", \"Nisan\", \"May\\u0131s\", \"Haziran\", \"Temmuz\", \"A\\u011fustos\", \"Eyl\\u00fcl\", \"Ekim\", \"Kas\\u0131m\", \"Aral\\u0131k\"],\n\t\t\tws: [\"Paz\", \"Pzt\", \"Sal\", \"\\u00c7r\\u015f\", \"Pr\\u015f\", \"Cum\", \"Cts\"],\n\t\t\twl: [\"Pazar\", \"Pazartesi\", \"Sal\\u0131\", \"\\u00c7ar\\u015famba\", \"Per\\u015fembe\", \"Cuma\", \"Cumartesi\"],\n\t\t\txf: \"%d-%m-%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a %d %b %Y %H:%M:%S\"\n\t\t},\n\t\tru: {\n\t\t\tms: [\"\\u042f\\u043d\\u0432\", \"\\u0424\\u0435\\u0432\", \"\\u041c\\u0430\\u0440\", \"\\u0410\\u043f\\u0440\", \"\\u041c\\u0430\\u0439\", \"\\u0418\\u044e\\u043d\", \"\\u0418\\u044e\\u043b\", \"\\u0410\\u0432\\u0433\", \"\\u0421\\u0435\\u043d\", \"\\u041e\\u043a\\u0442\", \"\\u041d\\u043e\\u044f\", \"\\u0414\\u0435\\u043a\"],\n\t\t\tml: [\"\\u042f\\u043d\\u0432\\u0430\\u0440\\u044c\", \"\\u0424\\u0435\\u0432\\u0440\\u0430\\u043b\\u044c\", \"\\u041c\\u0430\\u0440\\u0442\", \"\\u0410\\u043f\\u0440\\u0435\\u043b\\u044c\", \"\\u041c\\u0430\\u0439\", \"\\u0418\\u044e\\u043d\\u044c\", \"\\u0418\\u044e\\u043b\\u044c\", \"\\u0410\\u0432\\u0433\\u0443\\u0441\\u0442\", \"\\u0421\\u0435\\u043d\\u0442\\u044f\\u0431\\u0440\\u044c\", \"\\u041e\\u043a\\u0442\\u044f\\u0431\\u0440\\u044c\", \"\\u041d\\u043e\\u044f\\u0431\\u0440\\u044c\", \"\\u0414\\u0435\\u043a\\u0430\\u0431\\u0440\\u044c\"],\n\t\t\tws: [\"\\u0412\\u0441\\u043a\", \"\\u041f\\u043d\\u0434\", \"\\u0412\\u0442\\u0440\", \"\\u0421\\u0440\\u0434\", \"\\u0427\\u0442\\u0432\", \"\\u041f\\u0442\\u043d\", \"\\u0421\\u0431\\u0442\"],\n\t\t\twl: [\"\\u0412\\u043e\\u0441\\u043a\\u0440\\u0435\\u0441\\u0435\\u043d\\u044c\\u0435\", \"\\u041f\\u043e\\u043d\\u0435\\u0434\\u0435\\u043b\\u044c\\u043d\\u0438\\u043a\", \"\\u0412\\u0442\\u043e\\u0440\\u043d\\u0438\\u043a\", \"\\u0421\\u0440\\u0435\\u0434\\u0430\", \"\\u0427\\u0435\\u0442\\u0432\\u0435\\u0440\\u0433\", \"\\u041f\\u044f\\u0442\\u043d\\u0438\\u0446\\u0430\", \"\\u0421\\u0443\\u0431\\u0431\\u043e\\u0442\\u0430\"],\n\t\t\txf: \"%d.%m.%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a %d %b %Y %H:%M:%S\"\n\t\t},\n\t\tzh: {\n\t\t\tms: [\" 1\\u6708\", \" 2\\u6708\", \" 3\\u6708\", \" 4\\u6708\", \" 5\\u6708\", \" 6\\u6708\", \" 7\\u6708\", \" 8\\u6708\", \" 9\\u6708\", \"10\\u6708\", \"11\\u6708\", \"12\\u6708\"],\n\t\t\tml: [\"\\u4e00\\u6708\", \"\\u4e8c\\u6708\", \"\\u4e09\\u6708\", \"\\u56db\\u6708\", \"\\u4e94\\u6708\", \"\\u516d\\u6708\", \"\\u4e03\\u6708\", \"\\u516b\\u6708\", \"\\u4e5d\\u6708\", \"\\u5341\\u6708\", \"\\u5341\\u4e00\\u6708\", \"\\u5341\\u4e8c\\u6708\"],\n\t\t\tws: [\"\\u65e5\", \"\\u4e00\", \"\\u4e8c\", \"\\u4e09\", \"\\u56db\", \"\\u4e94\", \"\\u516d\"],\n\t\t\twl: [\"\\u661f\\u671f\\u65e5\", \"\\u661f\\u671f\\u4e00\", \"\\u661f\\u671f\\u4e8c\", \"\\u661f\\u671f\\u4e09\", \"\\u661f\\u671f\\u56db\", \"\\u661f\\u671f\\u4e94\", \"\\u661f\\u671f\\u516d\"],\n\t\t\txf: \"%Y\\u5e74%b%d\\u65e5\",\n\t\t\tXf: \"%H\\u65f6%M\\u5206%S\\u79d2\",\n\t\t\tcf: \"%Y\\u5e74%b%d\\u65e5 %A %H\\u65f6%M\\u5206%S\\u79d2\"\n\t\t},\n\t\tko: {\n\t\t\tms: [\" 1\\uc6d4\", \" 2\\uc6d4\", \" 3\\uc6d4\", \" 4\\uc6d4\", \" 5\\uc6d4\", \" 6\\uc6d4\", \" 7\\uc6d4\", \" 8\\uc6d4\", \" 9\\uc6d4\", \"10\\uc6d4\", \"11\\uc6d4\", \"12\\uc6d4\"],\n\t\t\tml: [\"1\\uc6d4\", \"2\\uc6d4\", \"3\\uc6d4\", \"4\\uc6d4\", \"5\\uc6d4\", \"6\\uc6d4\", \"7\\uc6d4\", \"8\\uc6d4\", \"9\\uc6d4\", \"10\\uc6d4\", \"11\\uc6d4\", \"12\\uc6d4\"],\n\t\t\tws: [\"\\uc77c\", \"\\uc6d4\", \"\\ud654\", \"\\uc218\", \"\\ubaa9\", \"\\uae08\", \"\\ud1a0\"],\n\t\t\twl: [\"\\uc77c\\uc694\\uc77c\", \"\\uc6d4\\uc694\\uc77c\", \"\\ud654\\uc694\\uc77c\", \"\\uc218\\uc694\\uc77c\", \"\\ubaa9\\uc694\\uc77c\", \"\\uae08\\uc694\\uc77c\", \"\\ud1a0\\uc694\\uc77c\"],\n\t\t\txf: \"%Y\\ub144 %B %d\\uc77c\",\n\t\t\tXf: \"%H\\uc2dc %M\\ubd84 %S\\ucd08\",\n\t\t\tcf: \"%Y\\ub144 %B %d\\uc77c (%a) %p %I\\uc2dc %M\\ubd84 %S\\ucd08\"\n\t\t},\n\t\tja: {\n\t\t\tms: [\" 1\\u6708\", \" 2\\u6708\", \" 3\\u6708\", \" 4\\u6708\", \" 5\\u6708\", \" 6\\u6708\", \" 7\\u6708\", \" 8\\u6708\", \" 9\\u6708\", \"10\\u6708\", \"11\\u6708\", \"12\\u6708\"],\n\t\t\tml: [\"1\\u6708\", \"2\\u6708\", \"3\\u6708\", \"4\\u6708\", \"5\\u6708\", \"6\\u6708\", \"7\\u6708\", \"8\\u6708\", \"9\\u6708\", \"10\\u6708\", \"11\\u6708\", \"12\\u6708\"],\n\t\t\tws: [\"\\u65e5\", \"\\u6708\", \"\\u706b\", \"\\u6c34\", \"\\u6728\", \"\\u91d1\", \"\\u571f\"],\n\t\t\twl: [\"\\u65e5\\u66dc\\u65e5\", \"\\u6708\\u66dc\\u65e5\", \"\\u706b\\u66dc\\u65e5\", \"\\u6c34\\u66dc\\u65e5\", \"\\u6728\\u66dc\\u65e5\", \"\\u91d1\\u66dc\\u65e5\", \"\\u571f\\u66dc\\u65e5\"],\n\t\t\txf: \"%Y\\u5e74%B%d\\u65e5\",\n\t\t\tXf: \"%H\\u6642%M\\u5206%S\\u79d2\",\n\t\t\tcf: \"%Y\\u5e74%B%d\\u65e5 %H\\u6642%M\\u5206%S\\u79d2\"\n\t\t}\n\t};\n\n\tlet translation = translations[lang];\n\n\tlet result = [];\n\tlet inspec = false;\n\tfor (let c of fmt)\n\t{\n\t\tif (inspec)\n\t\t{\n\t\t\tswitch (c)\n\t\t\t{\n\t\t\t\tcase \"a\":\n\t\t\t\t\tc = translation.ws[obj.getDay()];\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"A\":\n\t\t\t\t\tc = translation.wl[obj.getDay()];\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"b\":\n\t\t\t\t\tc = translation.ms[obj.getMonth()];\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"B\":\n\t\t\t\t\tc = translation.ml[obj.getMonth()];\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"c\":\n\t\t\t\t\tc = _format(obj, translation.cf, lang);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"d\":\n\t\t\t\t\tc = _lpad(obj.getDate(), \"0\", 2);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"f\":\n\t\t\t\t\tc = _lpad(obj.getMilliseconds(), \"0\", 3) + \"000\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"H\":\n\t\t\t\t\tc = _lpad(obj.getHours(), \"0\", 2);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"I\":\n\t\t\t\t\tc = _lpad(((obj.getHours()-1) % 12)+1, \"0\", 2);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"j\":\n\t\t\t\t\tc = _lpad(DateTimeProtocol.yearday(obj), \"0\", 3);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"m\":\n\t\t\t\t\tc = _lpad(obj.getMonth()+1, \"0\", 2);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"M\":\n\t\t\t\t\tc = _lpad(obj.getMinutes(), \"0\", 2);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"p\":\n\t\t\t\t\tc = obj.getHours() < 12 ? \"AM\" : \"PM\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"S\":\n\t\t\t\t\tc = _lpad(obj.getSeconds(), \"0\", 2);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"U\":\n\t\t\t\t\tc = _lpad(_week4format(obj, 6), \"0\", 2);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"w\":\n\t\t\t\t\tc = obj.getDay();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"W\":\n\t\t\t\t\tc = _lpad(_week4format(obj, 0), \"0\", 2);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"x\":\n\t\t\t\t\tc = _format(obj, translation.xf, lang);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"X\":\n\t\t\t\t\tc = _format(obj, translation.Xf, lang);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"y\":\n\t\t\t\t\tc = (obj.getFullYear() % 100).toString();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"Y\":\n\t\t\t\t\tc = obj.getFullYear().toString();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"z\":\n\t\t\t\t\t// UTC offset in the form +HHMM or -HHMM\n\t\t\t\t\tc = \"\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"Z\":\n\t\t\t\t\t// Time zone name\n\t\t\t\t\tc = \"\";\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tresult.push(c);\n\t\t\tinspec = false;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (c == \"%\")\n\t\t\t\tinspec = true;\n\t\t\telse\n\t\t\t\tresult.push(c);\n\t\t}\n\t}\n\treturn result.join(\"\");\n};\n\nfunction _format_int(obj, fmt, lang)\n{\n\tlet work = fmt;\n\n\t// Defaults\n\tlet fill = ' ';\n\tlet align = '>'; // '<', '>', '=' or '^'\n\tlet sign = '-'; // '+', '-' or ' '\n\tlet alternate = false;\n\tlet minimumwidth = 0;\n\tlet type = 'd'; // 'b', 'c', 'd', 'o', 'x', 'X' or 'n'\n\n\t// Determine output type\n\tif (/[bcdoxXn]$/.test(work))\n\t{\n\t\ttype = work.substring(work.length-1);\n\t\twork = work.substring(0, work.length-1);\n\t}\n\n\t// Extract minimum width\n\tif (/\\d+$/.test(work))\n\t{\n\t\tlet minimumwidthStr = /\\d+$/.exec(work);\n\t\twork = work.replace(/\\d+$/, \"\");\n\t\tif (/^0/.test(minimumwidthStr))\n\t\t{\n\t\t\talign = '=';\n\t\t\tfill = '0';\n\t\t}\n\t\tminimumwidth = parseInt(minimumwidthStr);\n\t}\n\n\t// Alternate form?\n\tif (/#$/.test(work))\n\t{\n\t\talternate = true;\n\t\twork = work.substring(0, work.length-1);\n\t}\n\n\t// Determine sign\n\tif (/[+ -]$/.test(work))\n\t{\n\t\tif (type == 'c')\n\t\t\tthrow new ValueError(\"sign not allowed for integer format type 'c'\");\n\t\tsign = work.substring(work.length-1);\n\t\twork = work.substring(0, work.length-1);\n\t}\n\n\t// Extract fill and align char\n\tif (work.length >= 3)\n\t\tthrow new ValueError(\"illegal integer format string \" + _repr(fmt));\n\telse if (work.length == 2)\n\t{\n\t\tif (/[<>=^]$/.test(work))\n\t\t{\n\t\t\talign = work[1];\n\t\t\tfill = work[0];\n\t\t}\n\t\telse\n\t\t\tthrow new ValueError(\"illegal integer format string \" + _repr(fmt));\n\t}\n\telse if (work.length == 1)\n\t{\n\t\tif (/^[<>=^]$/.test(work))\n\t\t\talign = work;\n\t\telse\n\t\t\tthrow new ValueError(\"illegal integer format string \" + _repr(fmt));\n\t}\n\n\t// Basic number formatting\n\tlet neg = obj < 0;\n\n\tif (neg)\n\t\tobj = -obj;\n\n\tlet output;\n\tswitch (type)\n\t{\n\t\tcase 'b':\n\t\t\toutput = obj.toString(2);\n\t\t\tbreak;\n\t\tcase 'c':\n\t\t\tif (neg || obj > 65535)\n\t\t\t\tthrow new ValueError(\"value out of bounds for c format\");\n\t\t\toutput = String.fromCharCode(obj);\n\t\t\tbreak;\n\t\tcase 'd':\n\t\t\toutput = obj.toString();\n\t\t\tbreak;\n\t\tcase 'o':\n\t\t\toutput = obj.toString(8);\n\t\t\tbreak;\n\t\tcase 'x':\n\t\t\toutput = obj.toString(16);\n\t\t\tbreak;\n\t\tcase 'X':\n\t\t\toutput = obj.toString(16).toUpperCase();\n\t\t\tbreak;\n\t\tcase 'n':\n\t\t\t// FIXME: locale formatting\n\t\t\toutput = obj.toString();\n\t\t\tbreak;\n\t}\n\n\t// The rest of the formatting\n\tif (align === '=')\n\t{\n\t\tif (neg || sign !== '-')\n\t\t\t--minimumwidth;\n\t\tif (alternate && (type === 'b' || type === 'o' || type === 'x' || type === 'X'))\n\t\t\tminimumwidth -= 2;\n\n\t\tif (output.length < minimumwidth)\n\t\t\toutput = _str_repeat(fill, minimumwidth-output.length) + output;\n\n\t\tif (alternate && (type === 'b' || type === 'o' || type === 'x' || type === 'X'))\n\t\t\toutput = \"0\" + type + output;\n\n\t\tif (neg)\n\t\t\toutput = \"-\" + output;\n\t\telse if (sign != '-')\n\t\t\toutput = sign + output;\n\t}\n\telse\n\t{\n\t\tif (alternate && (type == 'b' || type == 'o' || type == 'x' || type == 'X'))\n\t\t\toutput = \"0\" + type + output;\n\t\tif (neg)\n\t\t\toutput = \"-\" + output;\n\t\telse if (sign != '-')\n\t\t\toutput = sign + output;\n\t\tif (output.length < minimumwidth)\n\t\t{\n\t\t\tif (align == '<')\n\t\t\t\toutput = output + _str_repeat(fill, minimumwidth-output.length);\n\t\t\telse if (align == '>')\n\t\t\t\toutput = _str_repeat(fill, minimumwidth-output.length) + output;\n\t\t\telse // if (align == '^')\n\t\t\t{\n\t\t\t\tlet pad = minimumwidth - output.length;\n\t\t\t\tlet padBefore = Math.floor(pad/2);\n\t\t\t\tlet padAfter = pad-padBefore;\n\t\t\t\toutput = _str_repeat(fill, padBefore) + output + _str_repeat(fill, padAfter);\n\t\t\t}\n\t\t}\n\t}\n\treturn output;\n};\n\n// Format ``obj`` using the format string ``fmt`` in the language ``lang``\nexport function _format(obj, fmt, lang)\n{\n\tif (typeof(lang) === \"undefined\" || lang === null)\n\t\tlang = \"en\";\n\telse\n\t{\n\t\tlet translations = {de: null, en: null, fr: null, es: null, it: null, da: null, sv: null, nl: null, pt: null, cs: null, sk: null, pl: null, hr: null, sr: null, ro: null, hu: null, tr: null, ru: null, zh: null, ko: null, ja: null};\n\t\tlang = lang.toLowerCase();\n\t\tif (typeof(translations[lang]) === \"undefined\")\n\t\t{\n\t\t\tlang = lang.split(/_/)[0];\n\t\t\tif (typeof(translations[lang]) === \"undefined\")\n\t\t\t\tlang = \"en\";\n\t\t}\n\t}\n\tif (_isdate(obj))\n\t\treturn _format_datetime(obj._date, fmt, lang);\n\tif (_isdatetime(obj))\n\t\treturn _format_datetime(obj, fmt, lang);\n\telse if (_isint(obj))\n\t\treturn _format_int(obj, fmt, lang);\n\telse if (obj === true)\n\t\treturn _format_int(1, fmt, lang);\n\telse if (obj === false)\n\t\treturn _format_int(0, fmt, lang);\n};\n\nexport function _lpad(string, pad, len)\n{\n\tif (typeof(string) === \"number\")\n\t\tstring = string.toString();\n\twhile (string.length < len)\n\t\tstring = pad + string;\n\treturn string;\n};\n\nexport function _rpad(string, pad, len)\n{\n\tif (typeof(string) === \"number\")\n\t\tstring = string.toString();\n\twhile (string.length < len)\n\t\tstring = string + pad;\n\treturn string;\n};\n\n// This is outside of ``Proto`` on purpose\n// This way reactive frameworks like ``Vue.js`` don't get to see it\n// and complain about mutating render functions when those create new objects.\nlet _nextid = 1;\n\nexport class Proto\n{\n\tconstructor()\n\t{\n\t\tthis.__id__ = _nextid++;\n\t}\n\n\tul4type()\n\t{\n\t\treturn this.constructor.name;\n\t}\n\n\t// equality comparison of objects defaults to identity comparison\n\t__eq__(other)\n\t{\n\t\treturn this === other;\n\t}\n\n\t// To overwrite equality comparison, you only have to overwrite ``__eq__``,\n\t// ``__ne__`` will be synthesized from that\n\t__ne__(other)\n\t{\n\t\treturn !this.__eq__(other);\n\t}\n\n\t// For other comparison operators, each method has to be implemented:\n\t// ``<`` calls ``__lt__``, ``<=`` calls ``__le__``, ``>`` calls ``__gt__`` and\n\t// ``>=`` calls ``__ge__``\n\n\t__bool__()\n\t{\n\t\treturn true;\n\t}\n};\n\nexport class Signature extends Proto\n{\n\tconstructor(...args)\n\t{\n\t\tsuper();\n\t\tthis.args = [];\n\t\tthis.argNames = {};\n\t\tthis.remargs = null;\n\t\tthis.remkwargs = null;\n\n\t\tlet nextDefault = false;\n\t\tlet lastArgname = null;\n\t\tfor (let argName of args)\n\t\t{\n\t\t\tif (nextDefault)\n\t\t\t{\n\t\t\t\tthis.args.push({name: lastArgname, defaultValue: argName});\n\t\t\t\tthis.argNames[lastArgname] = true;\n\t\t\t\tnextDefault = false;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (argName.substr(argName.length-1) === \"=\")\n\t\t\t\t{\n\t\t\t\t\tlastArgname = argName.substr(0, argName.length-1);\n\t\t\t\t\tnextDefault = true;\n\t\t\t\t}\n\t\t\t\telse if (argName.substr(0, 2) === \"**\")\n\t\t\t\t\tthis.remkwargs = argName.substr(2);\n\t\t\t\telse if (argName.substr(0, 1) === \"*\")\n\t\t\t\t\tthis.remargs = argName.substr(1);\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.args.push({name: argName});\n\t\t\t\t\tthis.argNames[argName] = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Create the argument array for calling a function with this signature with the arguments available from ``args``\n\tbindArray(name, args, kwargs)\n\t{\n\t\tlet finalargs = [];\n\t\tlet decname = name !== null ? name + \"() \" : \"\";\n\n\t\tlet i = 0;\n\t\tfor (let arg of this.args)\n\t\t{\n\t\t\tif (i < args.length)\n\t\t\t{\n\t\t\t\tif (kwargs.hasOwnProperty(arg.name))\n\t\t\t\t\tthrow new ArgumentError(decname + \"argument \" + _repr(arg.name) + \" (position \" + i + \") specified multiple times\");\n\t\t\t\tfinalargs.push(args[i]);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (kwargs.hasOwnProperty(arg.name))\n\t\t\t\t\tfinalargs.push(kwargs[arg.name]);\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (arg.hasOwnProperty(\"defaultValue\"))\n\t\t\t\t\t\tfinalargs.push(arg.defaultValue);\n\t\t\t\t\telse\n\t\t\t\t\t\tthrow new ArgumentError(\"required \" + decname + \"argument \" + _repr(arg.name) + \" (position \" + i + \") missing\");\n\t\t\t\t}\n\t\t\t}\n\t\t\t++i;\n\t\t}\n\n\t\t// Do we accept additional positional arguments?\n\t\tif (this.remargs === null)\n\t\t{\n\t\t\t// No, but we have them -> complain\n\t\t\tif (args.length > this.args.length)\n\t\t\t{\n\t\t\t\tlet prefix = name === null ? \"expected\" : name + \"() expects\";\n\t\t\t\tthrow new ArgumentError(prefix + \" at most \" + this.args.length + \" positional argument\" + (this.args.length != 1 ? \"s\" : \"\") + \", \" + args.length + \" given\");\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// Put additional positional arguments in the call into the ``*`` argument (if there are none, this pushes an empty list)\n\t\t\tfinalargs.push(args.slice(this.args.length));\n\t\t}\n\n\t\t// Do we accept arbitrary keyword arguments?\n\t\tif (this.remkwargs === null)\n\t\t{\n\t\t\t// No => complain about unknown ones\n\t\t\tfor (let key in kwargs)\n\t\t\t{\n\t\t\t\tif (!this.argNames[key])\n\t\t\t\t{\n\t\t\t\t\tif (name === null)\n\t\t\t\t\t\tthrow new ArgumentError(\"an argument named \" + _repr(key) + \" isn't supported\");\n\t\t\t\t\telse\n\t\t\t\t\t\tthrow new ArgumentError(name + \"() doesn't support an argument named \" + _repr(key));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// Yes => Put the unknown ones into an object and add that to the arguments array\n\t\t\tlet remkwargs = _emptymap();\n\t\t\tfor (let key in kwargs)\n\t\t\t{\n\t\t\t\tif (!this.argNames[key])\n\t\t\t\t\t_setmap(remkwargs, key, kwargs[key]);\n\t\t\t}\n\t\t\tfinalargs.push(remkwargs);\n\t\t}\n\n\t\treturn finalargs;\n\t}\n\n\t// Create the argument object for calling a function with this signature with the arguments available from ``args``\n\tbindObject(name, args, kwargs)\n\t{\n\t\targs = this.bindArray(name, args, kwargs);\n\t\tlet argObject = {};\n\t\tlet i;\n\t\tfor (i = 0; i < this.args.length; ++i)\n\t\t\targObject[this.args[i].name] = args[i];\n\t\tif (this.remargs !== null)\n\t\t\targObject[this.remargs] = args[i++];\n\t\tif (this.remkwargs !== null)\n\t\t\targObject[this.remkwargs] = args[i++];\n\t\treturn argObject;\n\t}\n\n\t__repr__()\n\t{\n\t\treturn \"<Signature \" + this.toString() + \">\";\n\t}\n\n\t__str__()\n\t{\n\t\treturn this.toString();\n\t}\n\n\ttoString()\n\t{\n\t\tlet v = [];\n\t\tfor (let arg of this.args)\n\t\t{\n\t\t\tif (arg.hasOwnProperty(\"defaultValue\"))\n\t\t\t\tv.push(arg.name + \"=\" + _repr(arg.defaultValue));\n\t\t\telse\n\t\t\t\tv.push(arg.name);\n\t\t}\n\t\tif (this.remargs !== null)\n\t\t\tv.push(\"*\" + this.remargs);\n\t\tif (this.remkwargs !== null)\n\t\t\tv.push(\"**\" + this.remkwargs);\n\t\treturn \"(\" + v.join(\", \") + \")\";\n\t}\n};\n\n// When we don't have a real ``Set`` type, emulate one that supports strings\nexport class _Set\n{\n\tconstructor(...items)\n\t{\n\t\tthis.items = {};\n\t\tthis.add(...items);\n\t}\n\n\tadd(...items)\n\t{\n\t\tfor (let item of items)\n\t\t\tthis.items[item] = true;\n\t}\n\n\tclear()\n\t{\n\t\tthis.items = {};\n\t}\n\n\t__getattr__(attrname)\n\t{\n\t\tlet self = this;\n\t\tswitch (attrname)\n\t\t{\n\t\t\tcase \"add\":\n\t\t\t\treturn expose(function add(items){ self.add(...items); }, [\"*items\"]);\n\t\t\tdefault:\n\t\t\t\tthrow new AttributeError(this, attrname);\n\t\t}\n\t}\n\n\t__contains__(item)\n\t{\n\t\treturn this.items[item] || false;\n\t}\n\n\thas(item)\n\t{\n\t\treturn this.items[item] || false;\n\t}\n\n\t__bool__()\n\t{\n\t\tfor (let item in this.items)\n\t\t{\n\t\t\tif (!this.items.hasOwnProperty(item))\n\t\t\t\tcontinue;\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\t__repr__()\n\t{\n\t\tlet v = [];\n\t\tv.push(\"{\");\n\t\tlet i = 0;\n\t\tfor (let item in this.items)\n\t\t{\n\t\t\tif (!this.items.hasOwnProperty(item))\n\t\t\t\tcontinue;\n\t\t\tif (i++)\n\t\t\t\tv.push(\", \");\n\t\t\tv.push(_repr(item));\n\t\t}\n\t\tif (!i)\n\t\t\tv.push(\"/\");\n\t\tv.push(\"}\");\n\t\treturn v.join(\"\");\n\t}\n\n\t__eq__(other)\n\t{\n\t\t// We'll check that everything in ``this`` is in ``other``\n\t\t// and if both have the same number of items they are equal\n\t\tif (_isset(other))\n\t\t{\n\t\t\tlet count = 0;\n\t\t\tfor (let item in this.items)\n\t\t\t{\n\t\t\t\tif (!other.has(item))\n\t\t\t\t\treturn false;\n\t\t\t\t// count the number of items we have\n\t\t\t\t++count;\n\t\t\t}\n\t\t\treturn other.size == count;\n\t\t}\n\t\telse if (_isul4set(other))\n\t\t{\n\t\t\tlet count = 0;\n\t\t\tfor (let item in this.items)\n\t\t\t{\n\t\t\t\tif (!other[item])\n\t\t\t\t\treturn false;\n\t\t\t\t// count the number of items we have\n\t\t\t\t++count;\n\t\t\t}\n\t\t\t// Subtract the number of items that ``other`` has\n\t\t\tfor (let item in other.items)\n\t\t\t\t--count;\n\t\t\treturn count == 0;\n\t\t}\n\t\telse\n\t\t\treturn false;\n\t}\n\n\t__le__(other)\n\t{\n\t\t// check that ``this`` is a subset of ``other``,\n\t\t// i.e. everything in ``this`` is also in ``other``\n\t\tif (_isset(other))\n\t\t{\n\t\t\tlet count = 0;\n\t\t\tfor (let item in this.items)\n\t\t\t{\n\t\t\t\tif (!other.has(item))\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\telse if (_isul4set(other))\n\t\t{\n\t\t\tlet count = 0;\n\t\t\tfor (let item in this.items)\n\t\t\t{\n\t\t\t\tif (!other.items[item])\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\telse\n\t\t\t_unorderable(\"<\", this, other);\n\t}\n\n\t__ge__(other)\n\t{\n\t\t// check that ``this`` is a superset of ``other``,\n\t\t// i.e. everything in ``other`` is also in ``this``\n\t\tif (_isset(other))\n\t\t{\n\t\t\tother.forEach(function(value) {\n\t\t\t\tif (!this.items[value])\n\t\t\t\t\treturn false;\n\t\t\t}, this);\n\t\t\treturn true;\n\t\t}\n\t\telse if (_isul4set(other))\n\t\t{\n\t\t\tlet count = 0;\n\t\t\tfor (let key in other.items)\n\t\t\t{\n\t\t\t\tif (!this.items[key])\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\telse\n\t\t\t_unorderable(\"<=\", this, other);\n\t}\n};\n\n_Set.prototype.__type__ = \"set\";\n\n// Adds name and signature to a function/method and makes the method callable in templates\nexport function expose(f, signature, options)\n{\n\toptions = options || {};\n\tif (options.name)\n\t\tf._ul4_name = options.name;\n\tif (_islist(signature))\n\t\tsignature = new Signature(...signature);\n\tf._ul4_signature = signature;\n\tf._ul4_needsobject = options.needsobject || false;\n\tf._ul4_needscontext = options.needscontext || false;\n};\n\n// Clone an object and extend it\nexport function _extend(baseobj, attrs)\n{\n\treturn Object.assign(Object.create(baseobj), attrs);\n};\n\n// Protocol objects for all builtin types\nexport let Protocol = {\n\tattrs: _emptyset(),\n\n\tul4type: function ul4type()\n\t{\n\t\treturn \"Protocol\";\n\t},\n\n\tdir: function dir()\n\t{\n\t\treturn this.attrs;\n\t},\n\n\tget: function get(obj)\n\t{\n\t\tif (_isstr(obj))\n\t\t\treturn StrProtocol;\n\t\telse if (_islist(obj))\n\t\t\treturn ListProtocol;\n\t\telse if (_isdate(obj))\n\t\t\treturn DateProtocol;\n\t\telse if (_isset(obj))\n\t\t\treturn SetProtocol;\n\t\telse if (_ismap(obj))\n\t\t\treturn MapProtocol;\n\t\telse if (_isdatetime(obj))\n\t\t\treturn DateTimeProtocol;\n\t\telse if (_isobject(obj))\n\t\t\treturn ObjectProtocol;\n\t\telse\n\t\t\treturn Protocol;\n\t},\n\n\tgetattr: function getattr(obj, attrname)\n\t{\n\t\tif (obj === null || typeof(obj) === \"undefined\")\n\t\t\tthrow new AttributeError(obj, attrname);\n\t\telse if (typeof(obj.__getattr__) === \"function\")\n\t\t\treturn obj.__getattr__(attrname);\n\t\telse if (this.attrs.has(attrname))\n\t\t{\n\t\t\tlet attr = this[attrname];\n\t\t\tlet realattr = function realattr(...args) {\n\t\t\t\treturn attr.apply(this, [obj, ...args]);\n\t\t\t};\n\t\t\t// Unfortunately we can't set ``realattr.name``;\n\t\t\trealattr._ul4_name = attr._ul4_name || attr.name;\n\t\t\trealattr._ul4_signature = attr._ul4_signature;\n\t\t\trealattr._ul4_needsobject = attr._ul4_needsobject;\n\t\t\trealattr._ul4_needscontext = attr._ul4_needscontext;\n\t\t\treturn realattr;\n\t\t}\n\t\telse\n\t\t\tthrow new AttributeError(obj, attrname);\n\t},\n\n\thasattr: function hasattr(obj, attrname)\n\t{\n\t\tif (obj === null || typeof(obj) === \"undefined\")\n\t\t\treturn false;\n\t\telse if (typeof(obj.__getattr__) === \"function\")\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tobj.__getattr__(attrname);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tcatch (exc)\n\t\t\t{\n\t\t\t\tif (exc instanceof AttributeError && exc.obj === object)\n\t\t\t\t\treturn false;\n\t\t\t\telse\n\t\t\t\t\tthrow exc;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\treturn this.attrs.has(attrname);\n\t}\n};\n\n\nexport let StrProtocol = _extend(Protocol,\n{\n\tattrs: _makeset(\n\t\t\"split\",\n\t\t\"rsplit\",\n\t\t\"splitlines\",\n\t\t\"strip\",\n\t\t\"lstrip\",\n\t\t\"rstrip\",\n\t\t\"upper\",\n\t\t\"lower\",\n\t\t\"capitalize\",\n\t\t\"startswith\",\n\t\t\"endswith\",\n\t\t\"replace\",\n\t\t\"count\",\n\t\t\"find\",\n\t\t\"rfind\",\n\t\t\"join\"\n\t),\n\n\tul4type: function ul4type(obj)\n\t{\n\t\treturn \"str\";\n\t},\n\n\tcount: function count(obj, sub, start=null, end=null)\n\t{\n\t\treturn _count(obj, sub, start, end);\n\t},\n\n\tfind: function find(obj, sub, start=null, end=null)\n\t{\n\t\treturn _find(obj, sub, start, end);\n\t},\n\n\trfind: function rfind(obj, sub, start=null, end=null)\n\t{\n\t\treturn _rfind(obj, sub, start, end);\n\t},\n\n\treplace: function replace(obj, old, new_, count=null)\n\t{\n\t\tif (count === null)\n\t\t\tcount = obj.length;\n\n\t\tlet result = [];\n\t\twhile (obj.length)\n\t\t{\n\t\t\tlet pos = obj.indexOf(old);\n\t\t\tif (pos === -1 || !count--)\n\t\t\t{\n\t\t\t\tresult.push(obj);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tresult.push(obj.substr(0, pos));\n\t\t\tresult.push(new_);\n\t\t\tobj = obj.substr(pos + old.length);\n\t\t}\n\t\treturn result.join(\"\");\n\t},\n\n\tstrip: function strip(obj, chars=null)\n\t{\n\t\tchars = chars || \" \\r\\n\\t\";\n\t\tif (typeof(chars) !== \"string\")\n\t\t\tthrow new TypeError(\"strip() requires a string argument\");\n\n\t\twhile (obj && chars.indexOf(obj[0]) >= 0)\n\t\t\tobj = obj.substr(1);\n\t\twhile (obj && chars.indexOf(obj[obj.length-1]) >= 0)\n\t\t\tobj = obj.substr(0, obj.length-1);\n\t\treturn obj;\n\t},\n\n\tlstrip: function lstrip(obj, chars=null)\n\t{\n\t\tchars = chars || \" \\r\\n\\t\";\n\t\tif (typeof(chars) !== \"string\")\n\t\t\tthrow new TypeError(\"lstrip() requires a string argument\");\n\n\t\twhile (obj && chars.indexOf(obj[0]) >= 0)\n\t\t\tobj = obj.substr(1);\n\t\treturn obj;\n\t},\n\n\trstrip: function rstrip(obj, chars=null)\n\t{\n\t\tchars = chars || \" \\r\\n\\t\";\n\t\tif (typeof(chars) !== \"string\")\n\t\t\tthrow new TypeError(\"rstrip() requires a string argument\");\n\n\t\twhile (obj && chars.indexOf(obj[obj.length-1]) >= 0)\n\t\t\tobj = obj.substr(0, obj.length-1);\n\t\treturn obj;\n\t},\n\n\tsplit: function split(obj, sep=null, count=null)\n\t{\n\t\tif (sep !== null && typeof(sep) !== \"string\")\n\t\t\tthrow new TypeError(\"split() requires a string\");\n\n\t\tif (count === null)\n\t\t{\n\t\t\tlet result = obj.split(sep !== null ? sep : /[ \\n\\r\\t]+/);\n\t\t\tif (sep === null)\n\t\t\t{\n\t\t\t\tif (result.length && !result[0].length)\n\t\t\t\t\tresult.splice(0, 1);\n\t\t\t\tif (result.length && !result[result.length-1].length)\n\t\t\t\t\tresult.splice(-1);\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (sep !== null)\n\t\t\t{\n\t\t\t\tlet result = [];\n\t\t\t\twhile (obj.length)\n\t\t\t\t{\n\t\t\t\t\tlet pos = obj.indexOf(sep);\n\t\t\t\t\tif (pos === -1 || !count--)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.push(obj);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tresult.push(obj.substr(0, pos));\n\t\t\t\t\tobj = obj.substr(pos + sep.length);\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlet result = [];\n\t\t\t\twhile (obj.length)\n\t\t\t\t{\n\t\t\t\t\tobj = StrProtocol.lstrip(obj, null);\n\t\t\t\t\tlet part;\n\t\t\t\t\tif (!count--)\n\t\t\t\t\t\t part = obj; // Take the rest of the string\n\t\t\t\t\telse\n\t\t\t\t\t\tpart = obj.split(/[ \\n\\r\\t]+/, 1)[0];\n\t\t\t\t\tif (part.length)\n\t\t\t\t\t\tresult.push(part);\n\t\t\t\t\tobj = obj.substr(part.length);\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}\n\t},\n\n\trsplit: function rsplit(obj, sep=null, count=null)\n\t{\n\t\tif (sep !== null && typeof(sep) !== \"string\")\n\t\t\tthrow new TypeError(\"rsplit() requires a string as second argument\");\n\n\t\tif (count === null)\n\t\t{\n\t\t\tlet result = obj.split(sep !== null ? sep : /[ \\n\\r\\t]+/);\n\t\t\tif (sep === null)\n\t\t\t{\n\t\t\t\tif (result.length && !result[0].length)\n\t\t\t\t\tresult.splice(0, 1);\n\t\t\t\tif (result.length && !result[result.length-1].length)\n\t\t\t\t\tresult.splice(-1);\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (sep !== null)\n\t\t\t{\n\t\t\t\tlet result = [];\n\t\t\t\twhile (obj.length)\n\t\t\t\t{\n\t\t\t\t\tlet pos = obj.lastIndexOf(sep);\n\t\t\t\t\tif (pos === -1 || !count--)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.unshift(obj);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tresult.unshift(obj.substr(pos+sep.length));\n\t\t\t\t\tobj = obj.substr(0, pos);\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlet result = [];\n\t\t\t\twhile (obj.length)\n\t\t\t\t{\n\t\t\t\t\tobj = StrProtocol.rstrip(obj);\n\t\t\t\t\tlet part;\n\t\t\t\t\tif (!count--)\n\t\t\t\t\t\t part = obj; // Take the rest of the string\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tpart = obj.split(/[ \\n\\r\\t]+/);\n\t\t\t\t\t\tpart = part[part.length-1];\n\t\t\t\t\t}\n\t\t\t\t\tif (part.length)\n\t\t\t\t\t\tresult.unshift(part);\n\t\t\t\t\tobj = obj.substr(0, obj.length-part.length);\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}\n\t},\n\n\tsplitlines: function splitlines(obj, keepends=false)\n\t{\n\t\tlet pos = 0;\n\t\tlet startpos;\n\t\tlet lookingAtLineEnd = function lookingAtLineEnd()\n\t\t{\n\t\t\tlet c = obj[pos];\n\t\t\tif (c === '\\n' || c == '\\u000B' || c == '\\u000C' || c == '\\u001C' || c == '\\u001D' || c == '\\u001E' || c == '\\u0085' || c == '\\u2028' || c == '\\u2029')\n\t\t\t\treturn 1;\n\t\t\tif (c === '\\r')\n\t\t\t{\n\t\t\t\tif (pos == length-1)\n\t\t\t\t\treturn 1;\n\t\t\t\tif (obj[pos+1] === '\\n')\n\t\t\t\t\treturn 2;\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\treturn 0;\n\t\t};\n\n\t\tlet result = [], length = obj.length;\n\n\t\tfor (pos = 0, startpos = 0;;)\n\t\t{\n\t\t\tif (pos >= length)\n\t\t\t{\n\t\t\t\tif (startpos != pos)\n\t\t\t\t\tresult.push(obj.substring(startpos));\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\tlet lineendlen = lookingAtLineEnd();\n\t\t\tif (!lineendlen)\n\t\t\t\t++pos;\n\t\t\telse\n\t\t\t{\n\t\t\t\tlet endpos = pos + (keepends ? lineendlen : 0);\n\t\t\t\tresult.push(obj.substring(startpos, endpos));\n\t\t\t\tpos += lineendlen;\n\t\t\t\tstartpos = pos;\n\t\t\t}\n\t\t}\n\t},\n\n\tlower: function lower(obj)\n\t{\n\t\treturn obj.toLowerCase();\n\t},\n\n\tupper: function upper(obj)\n\t{\n\t\treturn obj.toUpperCase();\n\t},\n\n\tcapitalize: function capitalize(obj)\n\t{\n\t\tif (obj.length)\n\t\t\tobj = obj[0].toUpperCase() + obj.slice(1).toLowerCase();\n\t\treturn obj;\n\t},\n\n\tjoin: function join(obj, iterable)\n\t{\n\t\tlet resultlist = [];\n\t\tfor (let iter = _iter(iterable);;)\n\t\t{\n\t\t\tlet item = iter.next();\n\t\t\tif (item.done)\n\t\t\t\tbreak;\n\t\t\tresultlist.push(item.value);\n\t\t}\n\t\treturn resultlist.join(obj);\n\t},\n\n\tstartswith: function startswith(obj, prefix)\n\t{\n\t\tif (typeof(prefix) === \"string\")\n\t\t\treturn obj.substr(0, prefix.length) === prefix;\n\t\telse if (_islist(prefix))\n\t\t{\n\t\t\tfor (let singlepre of prefix)\n\t\t\t{\n\t\t\t\tif (obj.substr(0, singlepre.length) === singlepre)\n\t\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\telse\n\t\t\tthrow new TypeError(\"startswith() argument must be string\");\n\t},\n\n\tendswith: function endswith(obj, suffix)\n\t{\n\t\tif (typeof(suffix) === \"string\")\n\t\t\treturn obj.substr(obj.length-suffix.length) === suffix;\n\t\telse if (_islist(suffix))\n\t\t{\n\t\t\tfor (let singlesuf of suffix)\n\t\t\t{\n\t\t\t\tif (obj.substr(obj.length-singlesuf.length) === singlesuf)\n\t\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\telse\n\t\t\tthrow new TypeError(\"endswith() argument must be string or list of strings\");\n\t}\n});\n\nexpose(StrProtocol.count, [\"sub\", \"start=\", null, \"end=\", null]);\nexpose(StrProtocol.find, [\"sub\", \"start=\", null, \"end=\", null]);\nexpose(StrProtocol.rfind, [\"sub\", \"start=\", null, \"end=\", null]);\nexpose(StrProtocol.replace, [\"old\", \"new\", \"count=\", null]);\nexpose(StrProtocol.strip, [\"chars=\", null]);\nexpose(StrProtocol.lstrip, [\"chars=\", null]);\nexpose(StrProtocol.rstrip, [\"chars=\", null]);\nexpose(StrProtocol.split, [\"sep=\", null, \"count=\", null]);\nexpose(StrProtocol.rsplit, [\"sep=\", null, \"count=\", null]);\nexpose(StrProtocol.splitlines, [\"keepends=\", false]);\nexpose(StrProtocol.lower, []);\nexpose(StrProtocol.upper, []);\nexpose(StrProtocol.capitalize, []);\nexpose(StrProtocol.join, [\"iterable\"]);\nexpose(StrProtocol.startswith, [\"prefix\"]);\nexpose(StrProtocol.endswith, [\"suffix\"]);\n\n\nexport let ListProtocol = _extend(Protocol,\n{\n\tattrs: _makeset(\n\t\t\"append\",\n\t\t\"insert\",\n\t\t\"pop\",\n\t\t\"count\",\n\t\t\"find\",\n\t\t\"rfind\"\n\t),\n\n\tul4type: function ul4type(obj)\n\t{\n\t\treturn \"list\";\n\t},\n\n\tappend: function append(obj, items)\n\t{\n\t\tfor (let item of items)\n\t\t\tobj.push(item);\n\t\treturn null;\n\t},\n\n\tinsert: function insert(obj, pos, items)\n\t{\n\t\tif (pos < 0)\n\t\t\tpos += obj.length;\n\n\t\tfor (let item of items)\n\t\t\tobj.splice(pos++, 0, item);\n\t\treturn null;\n\t},\n\n\tpop: function pop(obj, pos)\n\t{\n\t\tif (pos < 0)\n\t\t\tpos += obj.length;\n\n\t\tlet result = obj[pos];\n\t\tobj.splice(pos, 1);\n\t\treturn result;\n\t},\n\n\tcount: function count(obj, sub, start=null, end=null)\n\t{\n\t\treturn _count(obj, sub, start, end);\n\t},\n\n\tfind: function find(obj, sub, start=null, end=null)\n\t{\n\t\treturn _find(obj, sub, start, end);\n\t},\n\n\trfind: function rfind(obj, sub, start=null, end=null)\n\t{\n\t\treturn _rfind(obj, sub, start, end);\n\t}\n});\n\nexpose(ListProtocol.append, [\"*items\"]);\nexpose(ListProtocol.insert, [\"pos\", \"*items\"]);\nexpose(ListProtocol.pop, [\"pos=\", -1]);\nexpose(ListProtocol.count, [\"sub\", \"start=\", null, \"end=\", null]);\nexpose(ListProtocol.find, [\"sub\", \"start=\", null, \"end=\", null]);\nexpose(ListProtocol.rfind, [\"sub\", \"start=\", null, \"end=\", null]);\n\n\nexport let MapProtocol = _extend(Protocol,\n{\n\tattrs: _makeset(\"get\", \"items\", \"values\", \"update\", \"clear\"),\n\n\tul4type: function ul4type(obj)\n\t{\n\t\treturn \"dict\";\n\t},\n\n\tgetattr: function getattr(obj, attrname)\n\t{\n\t\tif (this.attrs.has(attrname))\n\t\t{\n\t\t\tlet attr = this[attrname];\n\t\t\tlet realattr = function realattr(...args) {\n\t\t\t\treturn attr.apply(this, [obj, ...args]);\n\t\t\t};\n\t\t\t// Unfortunately we can't set ``realattr.name``;\n\t\t\trealattr._ul4_name = attr._ul4_name || attr.name;\n\t\t\trealattr._ul4_signature = attr._ul4_signature;\n\t\t\trealattr._ul4_needsobject = attr._ul4_needsobject;\n\t\t\trealattr._ul4_needscontext = attr._ul4_needscontext;\n\t\t\treturn realattr;\n\t\t}\n\t\telse\n\t\t\treturn obj.get(attrname);\n\t},\n\n\tget: function get(obj, key, default_=null)\n\t{\n\t\tif (obj.has(key))\n\t\t\treturn obj.get(key);\n\t\treturn default_;\n\t},\n\n\titems: function items(obj)\n\t{\n\t\tlet result = [];\n\t\tobj.forEach(function(value, key) {\n\t\t\tresult.push([key, value]);\n\t\t});\n\t\treturn result;\n\t},\n\n\tvalues: function values(obj)\n\t{\n\t\tlet result = [];\n\t\tobj.forEach(function(value, key) {\n\t\t\tresult.push(value);\n\t\t});\n\t\treturn result;\n\t},\n\n\tupdate: function update(obj, other, kwargs)\n\t{\n\t\treturn _update(obj, other, kwargs);\n\t},\n\n\tclear: function clear(obj)\n\t{\n\t\tobj.clear();\n\t\treturn null;\n\t}\n});\n\nexpose(MapProtocol.get, [\"key\", \"default=\", null]);\nexpose(MapProtocol.items, []);\nexpose(MapProtocol.values, []);\nexpose(MapProtocol.update, [\"*other\", \"**kwargs\"]);\nexpose(MapProtocol.clear, []);\n\nexport let SetProtocol = _extend(Protocol,\n{\n\tattrs: _makeset(\"add\", \"clear\"),\n\n\tul4type: function ul4type(obj)\n\t{\n\t\treturn \"set\";\n\t},\n\n\tadd: function add(obj, items)\n\t{\n\t\tfor (let item of items)\n\t\t\tobj.add(item);\n\t},\n\n\tclear: function clear(obj)\n\t{\n\t\tobj.clear();\n\t\treturn null;\n\t}\n});\n\nexpose(SetProtocol.add, [\"*items\"]);\nexpose(SetProtocol.clear, []);\n\nexport let DateProtocol = _extend(Protocol,\n{\n\tattrs: _makeset(\n\t\t\"weekday\",\n\t\t\"week\",\n\t\t\"calendar\",\n\t\t\"day\",\n\t\t\"month\",\n\t\t\"year\",\n\t\t\"mimeformat\",\n\t\t\"isoformat\",\n\t\t\"yearday\"\n\t),\n\n\tul4type: function ul4type(obj)\n\t{\n\t\treturn \"date\";\n\t},\n\n\tweekday: function weekday(obj)\n\t{\n\t\treturn DateTimeProtocol.weekday(obj._date);\n\t},\n\n\tcalendar: function calendar(obj, firstweekday=0, mindaysinfirstweek=4)\n\t{\n\t\treturn DateTimeProtocol.calendar(obj._date, firstweekday, mindaysinfirstweek);\n\t},\n\n\tweek: function week(obj, firstweekday=0, mindaysinfirstweek=4)\n\t{\n\t\treturn DateTimeProtocol.calendar(obj._date, firstweekday, mindaysinfirstweek)[1];\n\t},\n\n\tday: function day(obj)\n\t{\n\t\treturn obj._date.getDate();\n\t},\n\n\tmonth: function month(obj)\n\t{\n\t\treturn obj._date.getMonth()+1;\n\t},\n\n\tyear: function year(obj)\n\t{\n\t\treturn obj._date.getFullYear();\n\t},\n\n\tmimeformat: function mimeformat(obj)\n\t{\n\t\tlet weekdayname = [\"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\"];\n\t\tlet monthname = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\n\t\tlet d = obj._date;\n\n\t\treturn weekdayname[DateTimeProtocol.weekday(d)] + \", \" + _lpad(d.getDate(), \"0\", 2) + \" \" + monthname[d.getMonth()] + \" \" + d.getFullYear();\n\t},\n\n\tisoformat: function isoformat(obj)\n\t{\n\t\tlet d = obj._date;\n\t\treturn d.getFullYear() + \"-\" + _lpad((d.getMonth()+1).toString(), \"0\", 2) + \"-\" + _lpad(d.getDate().toString(), \"0\", 2);\n\t},\n\n\tyearday: function yearday(obj)\n\t{\n\t\treturn DateTimeProtocol.yearday(obj._date);\n\t}\n});\n\nexpose(DateProtocol.weekday, []);\nexpose(DateProtocol.calendar, [\"firstweekday=\", 0, \"mindaysinfirstweek=\", 4]);\nexpose(DateProtocol.week, [\"firstweekday=\", 0, \"mindaysinfirstweek=\", 4]);\nexpose(DateProtocol.day, []);\nexpose(DateProtocol.month, []);\nexpose(DateProtocol.year, []);\nexpose(DateProtocol.mimeformat, []);\nexpose(DateProtocol.isoformat, []);\nexpose(DateProtocol.yearday, []);\n\n\nexport let DateTimeProtocol = _extend(Protocol,\n{\n\tattrs: _makeset(\n\t\t\"weekday\",\n\t\t\"week\",\n\t\t\"calendar\",\n\t\t\"day\",\n\t\t\"month\",\n\t\t\"year\",\n\t\t\"hour\",\n\t\t\"minute\",\n\t\t\"second\",\n\t\t\"microsecond\",\n\t\t\"mimeformat\",\n\t\t\"isoformat\",\n\t\t\"yearday\"\n\t),\n\n\tul4type: function ul4type(obj)\n\t{\n\t\treturn \"datetime\";\n\t},\n\n\tweekday: function weekday(obj)\n\t{\n\t\tlet d = obj.getDay();\n\t\treturn d ? d-1 : 6;\n\t},\n\n\tcalendar: function calendar(obj, firstweekday=0, mindaysinfirstweek=4)\n\t{\n\t\t// Normalize parameters\n\t\tfirstweekday = _mod(firstweekday, 7);\n\t\tif (mindaysinfirstweek < 1)\n\t\t\tmindaysinfirstweek = 1;\n\t\telse if (mindaysinfirstweek > 7)\n\t\t\tmindaysinfirstweek = 7;\n\n\t\t// ``obj`` might be in the first week of the next year, or last week of\n\t\t// the previous year, so we might have to try those too.\n\t\tfor (let offset = +1; offset >= -1; --offset)\n\t\t{\n\t\t\tlet year = obj.getFullYear() + offset;\n\t\t\t// ``refdate`` will always be in week 1\n\t\t\tlet refDate = new Date(year, 0, mindaysinfirstweek);\n\t\t\t// Go back to the start of ``refdate``s week (i.e. day 1 of week 1)\n\t\t\tlet weekDayDiff = _mod(DateTimeProtocol.weekday(refDate) - firstweekday, 7);\n\t\t\tlet weekStartYear = refDate.getFullYear();\n\t\t\tlet weekStartMonth = refDate.getMonth();\n\t\t\tlet weekStartDay = refDate.getDate() - weekDayDiff;\n\t\t\tlet weekStart = new Date(weekStartYear, weekStartMonth, weekStartDay);\n\t\t\t// Is our date ``obj`` at or after day 1 of week 1?\n\t\t\tif (obj.getTime() >= weekStart.getTime())\n\t\t\t{\n\t\t\t\tlet diff = SubAST.prototype._do(obj, weekStart);\n\t\t\t\t// Add 1, because the first week is week 1, not week 0\n\t\t\t\tlet week = Math.floor(diff.days()/7) + 1;\n\t\t\t\treturn [year, week, DateTimeProtocol.weekday(obj)];\n\t\t\t}\n\t\t}\n\t},\n\n\tweek: function week(obj, firstweekday=0, mindaysinfirstweek=4)\n\t{\n\t\treturn DateTimeProtocol.calendar(obj, firstweekday, mindaysinfirstweek)[1];\n\t},\n\n\tday: function day(obj)\n\t{\n\t\treturn obj.getDate();\n\t},\n\n\tmonth: function month(obj)\n\t{\n\t\treturn obj.getMonth()+1;\n\t},\n\n\tyear: function year(obj)\n\t{\n\t\treturn obj.getFullYear();\n\t},\n\n\thour: function hour(obj)\n\t{\n\t\treturn obj.getHours();\n\t},\n\n\tminute: function minute(obj)\n\t{\n\t\treturn obj.getMinutes();\n\t},\n\n\tsecond: function second(obj)\n\t{\n\t\treturn obj.getSeconds();\n\t},\n\n\tmicrosecond: function microsecond(obj)\n\t{\n\t\treturn obj.getMilliseconds() * 1000;\n\t},\n\n\tmimeformat: function mimeformat(obj)\n\t{\n\t\tlet weekdayname = [\"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\"];\n\t\tlet monthname = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\n\n\t\treturn weekdayname[DateTimeProtocol.weekday(obj)] + \", \" + _lpad(obj.getDate(), \"0\", 2) + \" \" + monthname[obj.getMonth()] + \" \" + obj.getFullYear() + \" \" + _lpad(obj.getHours(), \"0\", 2) + \":\" + _lpad(obj.getMinutes(), \"0\", 2) + \":\" + _lpad(obj.getSeconds(), \"0\", 2) + \" GMT\";\n\t},\n\n\tisoformat: function isoformat(obj)\n\t{\n\t\tlet year = obj.getFullYear();\n\t\tlet month = obj.getMonth()+1;\n\t\tlet day = obj.getDate();\n\t\tlet hour = obj.getHours();\n\t\tlet minute = obj.getMinutes();\n\t\tlet second = obj.getSeconds();\n\t\tlet ms = obj.getMilliseconds();\n\t\tlet result = year + \"-\" + _lpad(month.toString(), \"0\", 2) + \"-\" + _lpad(day.toString(), \"0\", 2) + \"T\" + _lpad(hour.toString(), \"0\", 2) + \":\" + _lpad(minute.toString(), \"0\", 2) + \":\" + _lpad(second.toString(), \"0\", 2);\n\t\tif (ms)\n\t\t\tresult += \".\" + _lpad(ms.toString(), \"0\", 3) + \"000\";\n\t\treturn result;\n\t},\n\n\tyearday: function yearday(obj)\n\t{\n\t\tlet leap = _isleap(obj) ? 1 : 0;\n\t\tlet day = obj.getDate();\n\t\tswitch (obj.getMonth())\n\t\t{\n\t\t\tcase 0:\n\t\t\t\treturn day;\n\t\t\tcase 1:\n\t\t\t\treturn 31 + day;\n\t\t\tcase 2:\n\t\t\t\treturn 31 + 28 + leap + day;\n\t\t\tcase 3:\n\t\t\t\treturn 31 + 28 + leap + 31 + day;\n\t\t\tcase 4:\n\t\t\t\treturn 31 + 28 + leap + 31 + 30 + day;\n\t\t\tcase 5:\n\t\t\t\treturn 31 + 28 + leap + 31 + 30 + 31 + day;\n\t\t\tcase 6:\n\t\t\t\treturn 31 + 28 + leap + 31 + 30 + 31 + 30 + day;\n\t\t\tcase 7:\n\t\t\t\treturn 31 + 28 + leap + 31 + 30 + 31 + 30 + 31 + day;\n\t\t\tcase 8:\n\t\t\t\treturn 31 + 28 + leap + 31 + 30 + 31 + 30 + 31 + 31 + day;\n\t\t\tcase 9:\n\t\t\t\treturn 31 + 28 + leap + 31 + 30 + 31 + 30 + 31 + 31 + 30 + day;\n\t\t\tcase 10:\n\t\t\t\treturn 31 + 28 + leap + 31 + 30 + 31 + 30 + 31 + 31 + 30 + 31 + day;\n\t\t\tcase 11:\n\t\t\t\treturn 31 + 28 + leap + 31 + 30 + 31 + 30 + 31 + 31 + 30 + 31 + 30 + day;\n\t\t}\n\t}\n});\n\nexpose(DateTimeProtocol.weekday, []);\nexpose(DateTimeProtocol.calendar, [\"firstweekday=\", 0, \"mindaysinfirstweek=\", 4]);\nexpose(DateTimeProtocol.week, [\"firstweekday=\", 0, \"mindaysinfirstweek=\", 4]);\nexpose(DateTimeProtocol.day, []);\nexpose(DateTimeProtocol.month, []);\nexpose(DateTimeProtocol.year, []);\nexpose(DateTimeProtocol.hour, []);\nexpose(DateTimeProtocol.minute, []);\nexpose(DateTimeProtocol.second, []);\nexpose(DateTimeProtocol.microsecond, []);\nexpose(DateTimeProtocol.mimeformat, []);\nexpose(DateTimeProtocol.isoformat, []);\nexpose(DateTimeProtocol.yearday, []);\n\n\nexport let ObjectProtocol = _extend(Protocol,\n{\n\tattrs: _makeset(\"get\", \"items\", \"values\", \"update\", \"clear\"),\n\n\tul4type: function ul4type(obj)\n\t{\n\t\treturn \"dict\";\n\t},\n\n\tgetattr: function getattr(obj, attrname)\n\t{\n\t\tlet result;\n\t\tif (obj && typeof(obj.__getattr__) === \"function\") // test this before the generic object test\n\t\t\tresult = obj.__getattr__(attrname);\n\t\telse\n\t\t\tresult = obj[attrname];\n\t\tif (typeof(result) !== \"function\")\n\t\t\treturn result;\n\t\tlet realresult = function(...args) {\n\t\t\t// We can use ``apply`` here, as we know that ``obj`` is a real object.\n\t\t\treturn result.apply(obj, args);\n\t\t};\n\t\trealresult._ul4_name = result._ul4_name || result.name;\n\t\trealresult._ul4_signature = result._ul4_signature;\n\t\trealresult._ul4_needsobject = result._ul4_needsobject;\n\t\trealresult._ul4_needscontext = result._ul4_needscontext;\n\t\treturn realresult;\n\t},\n\n\tget: function get(obj, key, default_=null)\n\t{\n\t\tlet result = obj[key];\n\t\tif (typeof(result) === \"undefined\")\n\t\t\treturn default_;\n\t\treturn result;\n\t},\n\n\titems: function items(obj)\n\t{\n\t\tlet result = [];\n\t\tfor (let key in obj)\n\t\t\tresult.push([key, obj[key]]);\n\t\treturn result;\n\t},\n\n\tvalues: function values(obj)\n\t{\n\t\tlet result = [];\n\t\tfor (let key in obj)\n\t\t\tresult.push(obj[key]);\n\t\treturn result;\n\t},\n\n\tclear: function clear(obj)\n\t{\n\t\tfor (let key in obj)\n\t\t\tdelete obj[key];\n\t}\n});\n\nexpose(ObjectProtocol.get, [\"key\", \"default=\", null]);\nexpose(ObjectProtocol.items, []);\nexpose(ObjectProtocol.values, []);\nexpose(ObjectProtocol.clear, []);\n\n\nexport class Context\n{\n\tconstructor(vars)\n\t{\n\t\tif (vars === null || typeof(vars) === \"undefined\")\n\t\t\tvars = {};\n\t\tthis.vars = vars;\n\t\tthis.indents = [];\n\t\tthis.escapes = [];\n\t\tthis._output = [];\n\t}\n\n\t/* Return a clone of the ``Context``, but with a fresh empty ``vars`` objects that inherits from the previous one.\n\t * This is used by the various comprehensions to avoid leaking loop variables.\n\t */\n\tinheritvars()\n\t{\n\t\tlet context = Object.create(this);\n\t\tcontext.vars = Object.create(this.vars);\n\t\treturn context;\n\t}\n\n\t/* Return a clone of the ``Context`` with one additional indentation (this is used by ``RenderAST``) */\n\twithindent(indent)\n\t{\n\t\tlet context = Object.create(this);\n\t\tif (indent !== null)\n\t\t{\n\t\t\tcontext.indents = this.indents.slice();\n\t\t\tcontext.indents.push(indent);\n\t\t}\n\t\treturn context;\n\t}\n\n\t/* Return a clone of the ``Context`` with the output buffer replaced (this is used by ``renders`` to collect the output in a separate buffer) */\n\treplaceoutput()\n\t{\n\t\tlet context = Object.create(this);\n\t\tcontext._output = [];\n\t\treturn context;\n\t}\n\n\tclone(vars)\n\t{\n\t\treturn Object.create(this);\n\t}\n\n\toutput(value)\n\t{\n\t\tfor (let escape of this.escapes)\n\t\t\tvalue = escape(value);\n\t\tthis._output.push(value);\n\t}\n\n\tgetoutput()\n\t{\n\t\treturn this._output.join(\"\");\n\t}\n\n\tget(name)\n\t{\n\t\treturn this.vars[name];\n\t}\n\n\tset(name, value)\n\t{\n\t\tthis.vars[name] = value;\n\t}\n};\n\n/// Exceptions\n\n// Note that extending ``Error`` doesn't work, so we do it the \"classic\" way\nexport function Exception(message, fileName, lineNumber)\n{\n\tlet instance = new Error(message, fileName, lineNumber);\n\tif (Object.setPrototypeOf)\n\t\tObject.setPrototypeOf(instance, Object.getPrototypeOf(this));\n\telse\n\t\tinstance.__proto = this;\n\tinstance.__id__ = _nextid++;\n\tinstance.context = null;\n\treturn instance;\n};\n\nException.prototype = Object.create(Error.prototype, {\n\tconstructor: {\n\t\tvalue: Error,\n\t\tenumerable: false,\n\t\twritable: true,\n\t\tconfigurable: true\n\t}\n});\n\nif (Object.setPrototypeOf)\n\tObject.setPrototypeOf(Exception, Error);\nelse\n\tException.__proto__ = Error;\n\nException.prototype.__getattr__ = function __getattr__(attrname)\n{\n\tswitch (attrname)\n\t{\n\t\tcase \"context\":\n\t\t\treturn this.context;\n\t\tdefault:\n\t\t\tthrow new AttributeError(this, attrname);\n\t}\n};\n\n// Exceptions used internally by UL4 for flow control\nexport class InternalException extends Exception\n{\n};\n\n// Control flow exceptions\nexport class ReturnException extends InternalException\n{\n\tconstructor(result)\n\t{\n\t\tsuper(\"return\");\n\t\tthis.result = result;\n\t}\n};\n\nexport class BreakException extends InternalException\n{\n\tconstructor()\n\t{\n\t\tsuper(\"break\");\n\t}\n};\n\nexport class ContinueException extends InternalException\n{\n\tconstructor()\n\t{\n\t\tsuper(\"continue\");\n\t}\n};\n\n// Real exceptions raised by various parts of UL4\nexport class SyntaxError extends Exception\n{\n};\n\nexport class LValueRequiredError extends SyntaxError\n{\n\tconstructor()\n\t{\n\t\tsuper(\"lvalue required\");\n\t}\n};\n\nexport class TypeError extends Exception\n{\n};\n\nexport class ValueError extends Exception\n{\n};\n\nexport class ArgumentError extends Exception\n{\n};\n\nexport class NotSubscriptableError extends Exception\n{\n\tconstructor(obj)\n\t{\n\t\tsuper(\"Object of type \" + _type(obj) + \" is not subscriptable\");\n\t\tthis.obj = obj;\n\t}\n\n\ttoString()\n\t{\n\t\treturn \"Object of type \" + _type(this.obj) + \" is not subscriptable\";\n\t}\n};\n\nexport class ZeroDivisionError extends Exception\n{\n\tconstructor()\n\t{\n\t\tsuper(\"division by zero\");\n\t}\n};\n\nexport class IndexError extends Exception\n{\n\tconstructor(obj, index)\n\t{\n\t\tsuper(\"index \" + _repr(index) + \" out of range\");\n\t\tthis.obj = obj;\n\t\tthis.index = index;\n\t}\n\n\ttoString()\n\t{\n\t\treturn \"index \" + this.index + \" out of range for \" + _type(this.obj);\n\t}\n};\n\nexport class AttributeError extends Exception\n{\n\tconstructor(obj, attrname)\n\t{\n\t\tsuper(\"object of type \" + _type(obj) + \" has no attribute \" + _repr(attrname));\n\t\tthis.obj = obj;\n\t\tthis.attrname = attrname;\n\t}\n};\n\n/// Exception that wraps other exceptions while they bubble up the stack\nexport class LocationError extends Exception\n{\n\tconstructor(location)\n\t{\n\t\tsuper(\"nested exception in \" + _repr(location));\n\t\tthis.location = location;\n\t}\n\n\t_templateprefix()\n\t{\n\t\tlet template = this.location.template;\n\t\tlet out = [];\n\t\tif (template.parenttemplate !== null)\n\t\t\tout.push(\"in local template \");\n\t\telse\n\t\t\tout.push(\"in template \");\n\t\tlet first = true;\n\t\twhile (template != null)\n\t\t{\n\t\t\tif (first)\n\t\t\t\tfirst = false;\n\t\t\telse\n\t\t\t\tout.push(\" in \");\n\t\t\tout.push(template.name ? _repr(template.name) : \"(unnamed)\");\n\t\t\ttemplate = template.parenttemplate;\n\t\t}\n\t\treturn out.join(\"\");\n\t}\n\n\ttoString()\n\t{\n\t\tlet template = this.location.template;\n\t\tlet templateprefix = this._templateprefix();\n\n\t\tlet prefix = this.location.sourceprefix;\n\t\tlet code = this.location.source;\n\t\tlet suffix = this.location.sourcesuffix;\n\t\tprefix = _repr(prefix).slice(1, -1);\n\t\tcode = _repr(code).slice(1, -1);\n\t\tsuffix = _repr(suffix).slice(1, -1);\n\n\t\tlet text = prefix + code + suffix;\n\t\tlet underline = _str_repeat(\"\\u00a0\", prefix.length) + _str_repeat(\"~\", code.length);\n\n\t\tlet pos = \"offset \" + this.location.pos.start + \":\" + this.location.pos.stop + \"; line \" + this.location.line + \"; col \" + this.location.col;\n\n\t\tlet message = templateprefix + \": \" + pos + \"\\n\" + text + \"\\n\" + underline;\n\t\treturn message;\n\t}\n\n\t__getattr__(attrname)\n\t{\n\t\tswitch (attrname)\n\t\t{\n\t\t\tcase \"context\":\n\t\t\t\treturn this.context;\n\t\t\tcase \"location\":\n\t\t\t\treturn this.location;\n\t\t\tdefault:\n\t\t\t\tthrow new AttributeError(this, attrname);\n\t\t}\n\t}\n};\n\n/// Classes for the syntax tree\nexport class AST extends Proto\n{\n\tconstructor(template, pos)\n\t{\n\t\tsuper();\n\t\tthis.template = template;\n\t\tthis.pos = pos;\n\t\tthis._line = null;\n\t\tthis._col = null;\n\t}\n\n\tget fullsource()\n\t{\n\t\treturn this.template._source;\n\t}\n\n\tget source()\n\t{\n\t\treturn this.pos.of(this.template._source);\n\t}\n\n\tget sourceprefix()\n\t{\n\t\tlet outerstartpos = this.pos.start;\n\t\tlet innerstartpos = outerstartpos;\n\t\tlet source = this.fullsource;\n\n\t\tlet maxprefix = 40;\n\t\tlet preprefix = \"\\u2026\";\n\t\twhile (maxprefix > 0)\n\t\t{\n\t\t\t// We arrived at the start of the source code\n\t\t\tif (outerstartpos === 0)\n\t\t\t{\n\t\t\t\tpreprefix = \"\";\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\t// We arrived at the start of the line\n\t\t\tif (source.charAt(outerstartpos-1) === \"\\n\")\n\t\t\t{\n\t\t\t\tpreprefix = \"\";\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\t--maxprefix;\n\t\t\t--outerstartpos;\n\t\t}\n\t\treturn preprefix + source.substring(outerstartpos, innerstartpos);\n\t}\n\n\tget sourcesuffix()\n\t{\n\t\tlet outerstoppos = this.pos.stop;\n\t\tlet innerstoppos = outerstoppos;\n\t\tlet source = this.fullsource;\n\n\t\tlet maxsuffix = 40;\n\t\tlet postsuffix = \"\\u2026\";\n\t\twhile (maxsuffix > 0)\n\t\t{\n\t\t\t// We arrived at the ed of the source code\n\t\t\tif (outerstoppos >= source.length)\n\t\t\t{\n\t\t\t\tpostsuffix = \"\";\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\t// We arrived at the end of the line\n\t\t\tif (source.charAt(outerstoppos) === \"\\n\")\n\t\t\t{\n\t\t\t\tpostsuffix = \"\";\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\t--maxsuffix;\n\t\t\t++outerstoppos;\n\t\t}\n\t\treturn source.substring(innerstoppos, outerstoppos) + postsuffix;\n\t}\n\n\tget line()\n\t{\n\t\tif (this._line === null)\n\t\t\tthis._calculateLineCol();\n\t\treturn this._line;\n\t}\n\n\tget col()\n\t{\n\t\tif (this._col === null)\n\t\t\tthis._calculateLineCol();\n\t\treturn this._col;\n\t}\n\n\t_calculateLineCol()\n\t{\n\t\tthis._line = 1\n\t\tthis._col = 1;\n\t\tlet stop = this.pos.start;\n\t\tfor (let i = 0; i < stop; ++i)\n\t\t{\n\t\t\tif (this.template.source[i] === \"\\n\")\n\t\t\t{\n\t\t\t\t++this._line;\n\t\t\t\tthis._col = 1;\n\t\t\t}\n\t\t\telse\n\t\t\t\t++this._col;\n\t\t}\n\t}\n\n\t__getattr__(attrname)\n\t{\n\t\tif (attrname === \"type\" || attrname === \"fullsource\" || attrname === \"source\" || attrname === \"sourceprefix\" || attrname === \"sourcesuffix\" || attrname === \"line\" || attrname === \"col\")\n\t\t\treturn this[attrname];\n\t\telse if (this._ul4onattrs.indexOf(attrname) >= 0)\n\t\t\treturn this[attrname];\n\t\tthrow new AttributeError(this, attrname);\n\t}\n\n\t__setitem__(attrname, value)\n\t{\n\t\tthrow new TypeError(\"object is immutable\");\n\t}\n\n\t__str__()\n\t{\n\t\tlet out = [];\n\t\tthis._str(out);\n\t\treturn _formatsource(out);\n\t}\n\n\t__repr__()\n\t{\n\t\tlet out = [];\n\t\tthis._repr(out);\n\t\treturn _formatsource(out);\n\t}\n\n\t_decorate_exception(exc)\n\t{\n\t\twhile (exc.context !== undefined && exc.context !== null)\n\t\t\texc = exc.context;\n\t\texc.context = new LocationError(this);\n\t}\n\n\t_handle_eval(context)\n\t{\n\t\ttry\n\t\t{\n\t\t\treturn this._eval(context);\n\t\t}\n\t\tcatch (exc)\n\t\t{\n\t\t\tif (!(exc instanceof InternalException) && !(exc instanceof LocationError))\n\t\t\t\tthis._decorate_exception(exc);\n\t\t\tthrow exc;\n\t\t}\n\t}\n\n\t_handle_eval_set(context, value)\n\t{\n\t\ttry\n\t\t{\n\t\t\treturn this._eval_set(context, value);\n\t\t}\n\t\tcatch (exc)\n\t\t{\n\t\t\tif (!(exc instanceof LocationError))\n\t\t\t\tthis._decorate_exception(exc);\n\t\t\tthrow exc;\n\t\t}\n\t}\n\n\t_eval_set(context, value)\n\t{\n\t\tthrow new LValueRequiredError();\n\t}\n\n\t_handle_eval_modify(context, operator, value)\n\t{\n\t\ttry\n\t\t{\n\t\t\treturn this._eval_modify(context, operator, value);\n\t\t}\n\t\tcatch (exc)\n\t\t{\n\t\t\tif (!(exc instanceof LocationError))\n\t\t\t\tthis._decorate_exception(exc);\n\t\t\tthrow exc;\n\t\t}\n\t}\n\n\t_eval_modify(context, operator, value)\n\t{\n\t\tthrow new LValueRequiredError();\n\t}\n\n\t_repr(out)\n\t{\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(this.source.replace(/\\r?\\n/g, ' '));\n\t}\n\n\tul4ondump(encoder)\n\t{\n\t\tfor (let attrname of this._ul4onattrs)\n\t\t\tencoder.dump(this[attrname]);\n\t}\n\n\tul4onload(decoder)\n\t{\n\t\tfor (let attrname of this._ul4onattrs)\n\t\t\tthis[attrname] = decoder.load();\n\t}\n};\n\n// used in ul4ondump/ul4ondump to automatically dump these attributes\nAST.prototype._ul4onattrs = [\"template\", \"pos\"];\n\nexport class TextAST extends AST\n{\n\tconstructor(template, pos)\n\t{\n\t\tsuper(template, pos);\n\t}\n\n\tget text()\n\t{\n\t\treturn this.source;\n\t}\n\n\t_eval(context)\n\t{\n\t\tcontext.output(this.text);\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(\"text \");\n\t\tout.push(_repr(this.text));\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<TextAST \");\n\t\tout.push(_repr(this.text));\n\t\tout.push(\">\");\n\t}\n};\n\nexport class IndentAST extends TextAST\n{\n\tconstructor(template, pos, text)\n\t{\n\t\tsuper(template, pos);\n\t\tthis._text = text;\n\t}\n\n\tget text()\n\t{\n\t\tif (typeof(this.template) !== \"undefined\")\n\t\t\treturn this._text === null ? this.source : this._text;\n\t\telse\n\t\t\treturn null;\n\t}\n\n\t_eval(context)\n\t{\n\t\tfor (let indent of context.indents)\n\t\t\tcontext.output(indent);\n\t\tcontext.output(this.text);\n\t}\n\n\tul4ondump(encoder)\n\t{\n\t\tsuper.ul4ondump(encoder);\n\n\t\tif (this._text === this.source)\n\t\t\tencoder.dump(null);\n\t\telse\n\t\t\tencoder.dump(this._text);\n\t}\n\n\tul4onload(decoder)\n\t{\n\t\tsuper.ul4onload(decoder);\n\t\tthis._text = decoder.load();\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(\"indent \");\n\t\tout.push(_repr(this.text));\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<IndentAST \");\n\t\tout.push(_repr(this.text));\n\t\tout.push(\">\");\n\t}\n};\n\nexport class LineEndAST extends TextAST\n{\n\t_str(out)\n\t{\n\t\tout.push(\"lineend \");\n\t\tout.push(_repr(this.text));\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<LineEndAST \");\n\t\tout.push(_repr(this.text));\n\t\tout.push(\">\");\n\t}\n};\n\nexport class CodeAST extends AST\n{\n};\n\nexport class ConstAST extends CodeAST\n{\n\tconstructor(template, pos, value)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.value = value;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<ConstAST value=\");\n\t\tout.push(_repr(this.value));\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\treturn this.value;\n\t}\n};\n\nConstAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"value\"]);\n\nexport class ItemArgBase extends CodeAST\n{\n\t_handle_eval_list(context, result)\n\t{\n\t\ttry\n\t\t{\n\t\t\treturn this._eval_list(context, result);\n\t\t}\n\t\tcatch (exc)\n\t\t{\n\t\t\tif (!(exc instanceof InternalException) && !(exc instanceof LocationError))\n\t\t\t\tthis._decorate_exception(exc);\n\t\t\tthrow exc;\n\t\t}\n\t}\n\n\t_handle_eval_set(context, result)\n\t{\n\t\ttry\n\t\t{\n\t\t\treturn this._eval_set(context, result);\n\t\t}\n\t\tcatch (exc)\n\t\t{\n\t\t\tif (!(exc instanceof InternalException) && !(exc instanceof LocationError))\n\t\t\t\tthis._decorate_exception(exc);\n\t\t\tthrow exc;\n\t\t}\n\t}\n\n\t_handle_eval_dict(context, result)\n\t{\n\t\ttry\n\t\t{\n\t\t\treturn this._eval_dict(context, result);\n\t\t}\n\t\tcatch (exc)\n\t\t{\n\t\t\tif (!(exc instanceof InternalException) && !(exc instanceof LocationError))\n\t\t\t\tthis._decorate_exception(exc);\n\t\t\tthrow exc;\n\t\t}\n\t}\n\n\t_handle_eval_call(context, args, kwargs)\n\t{\n\t\ttry\n\t\t{\n\t\t\treturn this._eval_call(context, args, kwargs);\n\t\t}\n\t\tcatch (exc)\n\t\t{\n\t\t\tif (!(exc instanceof InternalException) && !(exc instanceof LocationError))\n\t\t\t\tthis._decorate_exception(exc);\n\t\t\tthrow exc;\n\t\t}\n\t}\n};\n\nexport class SeqItemAST extends ItemArgBase\n{\n\tconstructor(template, pos, value)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.value = value;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<SeqItemAST value=\");\n\t\tout.push(_repr(this.value));\n\t\tout.push(\">\");\n\t}\n\n\t_eval_list(context, result)\n\t{\n\t\tlet value = this.value._handle_eval(context);\n\t\tresult.push(value);\n\t}\n\n\t_eval_set(context, result)\n\t{\n\t\tlet value = this.value._handle_eval(context);\n\t\tresult.add(value);\n\t}\n};\n\nSeqItemAST.prototype._ul4onattrs = ItemArgBase.prototype._ul4onattrs.concat([\"value\"]);\n\nexport class UnpackSeqItemAST extends ItemArgBase\n{\n\tconstructor(template, pos, value)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.value = value;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<UnpackSeqItemAST value=\");\n\t\tout.push(_repr(this.value));\n\t\tout.push(\">\");\n\t}\n\n\t_eval_list(context, result)\n\t{\n\t\tlet value = this.value._handle_eval(context);\n\t\tfor (let iter = _iter(value);;)\n\t\t{\n\t\t\tlet item = iter.next();\n\t\t\tif (item.done)\n\t\t\t\tbreak;\n\t\t\tresult.push(item.value);\n\t\t}\n\t}\n\n\t_eval_set(context, result)\n\t{\n\t\tlet value = this.value._handle_eval(context);\n\t\tfor (let iter = _iter(value);;)\n\t\t{\n\t\t\tlet item = iter.next();\n\t\t\tif (item.done)\n\t\t\t\tbreak;\n\t\t\tresult.add(item.value);\n\t\t}\n\t}\n};\n\nUnpackSeqItemAST.prototype._ul4onattrs = ItemArgBase.prototype._ul4onattrs.concat([\"value\"]);\n\nexport class DictItemAST extends ItemArgBase\n{\n\tconstructor(template, pos, key, value)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.key = key;\n\t\tthis.value = value;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<DictItemAST key=\");\n\t\tout.push(_repr(this.key));\n\t\tout.push(\" value=\");\n\t\tout.push(_repr(this.value));\n\t\tout.push(\">\");\n\t}\n\n\t_eval_dict(context, result)\n\t{\n\t\tlet key = this.key._handle_eval(context);\n\t\tlet value = this.value._handle_eval(context);\n\t\t_setmap(result, key, value);\n\t}\n};\n\nDictItemAST.prototype._ul4onattrs = ItemArgBase.prototype._ul4onattrs.concat([\"key\", \"value\"]);\n\nexport class UnpackDictItemAST extends ItemArgBase\n{\n\tconstructor(template, pos, item)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.item = item;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<UnpackDictItemAST item=\");\n\t\tout.push(_repr(this.item));\n\t\tout.push(\">\");\n\t}\n\n\t_eval_dict(context, result)\n\t{\n\t\tlet item = this.item._handle_eval(context);\n\t\tif (_islist(item))\n\t\t{\n\t\t\tfor (let subitem of item)\n\t\t\t{\n\t\t\t\tif (!_islist(subitem) || subitem.length != 2)\n\t\t\t\t\tthrow new ArgumentError(\"** requires a list of (key, value) pairs\");\n\t\t\t\t_setmap(result, subitem[0], subitem[1]);\n\t\t\t}\n\t\t}\n\t\telse if (_ismap(item))\n\t\t{\n\t\t\titem.forEach(function(value, key) {\n\t\t\t\t_setmap(result, key, value);\n\t\t\t});\n\t\t}\n\t\telse if (_isobject(item))\n\t\t{\n\t\t\tfor (let key in item)\n\t\t\t\t_setmap(result, key, item[key]);\n\t\t}\n\t}\n};\n\nUnpackDictItemAST.prototype._ul4onattrs = ItemArgBase.prototype._ul4onattrs.concat([\"item\"]);\n\nexport class PosArgAST extends ItemArgBase\n{\n\tconstructor(template, pos, value)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.value = value;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<PosArgAST value=\");\n\t\tthis.value._repr(out);\n\t\tout.push(\">\");\n\t}\n\n\t_eval_call(context, args, kwargs)\n\t{\n\t\tlet value = this.value._handle_eval(context);\n\t\targs.push(value);\n\t}\n};\n\nPosArgAST.prototype._ul4onattrs = ItemArgBase.prototype._ul4onattrs.concat([\"value\"]);\n\nexport class KeywordArgAST extends ItemArgBase\n{\n\tconstructor(template, pos, name, value)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.name = name;\n\t\tthis.value = value;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<KeywordArgAST name=\");\n\t\tout.push(_repr(this.name));\n\t\tout.push(\" value=\");\n\t\tthis.value._repr(out);\n\t\tout.push(\">\");\n\t}\n\n\t_eval_call(context, args, kwargs)\n\t{\n\t\tif (kwargs.hasOwnProperty(this.name))\n\t\t\tthrow new ArgumentError(\"duplicate keyword argument \" + this.name);\n\t\tlet value = this.value._handle_eval(context);\n\t\tkwargs[this.name] = value;\n\t}\n};\n\nKeywordArgAST.prototype._ul4onattrs = ItemArgBase.prototype._ul4onattrs.concat([\"name\", \"value\"]);\n\nexport class UnpackListArgAST extends ItemArgBase\n{\n\tconstructor(template, pos, item)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.item = item;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<UnpackListArgAST item=\");\n\t\tthis.item._repr(out);\n\t\tout.push(\">\");\n\t}\n\n\t_eval_call(context, args, kwargs)\n\t{\n\t\tlet item = this.item._handle_eval(context);\n\t\targs.push(...item);\n\t}\n};\n\nUnpackListArgAST.prototype._ul4onattrs = ItemArgBase.prototype._ul4onattrs.concat([\"item\"]);\n\nexport class UnpackDictArgAST extends ItemArgBase\n{\n\tconstructor(template, pos, item)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.item = item;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<UnpackDictArgAST item=\");\n\t\tthis.item._repr(out);\n\t\tout.push(\">\");\n\t}\n\n\t_eval_call(context, args, kwargs)\n\t{\n\t\tlet item = this.item._handle_eval(context);\n\t\tif (_islist(item))\n\t\t{\n\t\t\tfor (let subitem of item)\n\t\t\t{\n\t\t\t\tif (!_islist(subitem) || subitem.length != 2)\n\t\t\t\t\tthrow new ArgumentError(\"** requires a list of (key, value) pairs\");\n\t\t\t\tlet [key, value] = subitem;\n\t\t\t\tif (kwargs.hasOwnProperty(key))\n\t\t\t\t\tthrow new ArgumentError(\"duplicate keyword argument \" + key);\n\t\t\t\tkwargs[key] = value;\n\t\t\t}\n\t\t}\n\t\telse if (_ismap(item))\n\t\t{\n\t\t\titem.forEach(function(value, key) {\n\t\t\t\tif (kwargs.hasOwnProperty(key))\n\t\t\t\t\tthrow new ArgumentError(\"duplicate keyword argument \" + key);\n\t\t\t\tkwargs[key] = value;\n\t\t\t});\n\t\t}\n\t\telse if (_isobject(item))\n\t\t{\n\t\t\tfor (let key in item)\n\t\t\t{\n\t\t\t\tif (kwargs.hasOwnProperty(key))\n\t\t\t\t\tthrow new ArgumentError(\"duplicate keyword argument \" + key);\n\t\t\t\tkwargs[key] = item[key];\n\t\t\t}\n\t\t}\n\t}\n};\n\nUnpackDictArgAST.prototype._ul4onattrs = ItemArgBase.prototype._ul4onattrs.concat([\"item\"]);\n\nexport class ListAST extends CodeAST\n{\n\tconstructor(template, pos)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.items = [];\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<ListAST\");\n\t\tfor (let item of this.items)\n\t\t{\n\t\t\tout.push(\" \");\n\t\t\titem._repr(out);\n\t\t}\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet result = [];\n\t\tfor (let item of this.items)\n\t\t\titem._handle_eval_list(context, result);\n\t\treturn result;\n\t}\n};\n\nListAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"items\"]);\n\nexport class ListCompAST extends CodeAST\n{\n\tconstructor(template, pos, item, varname, container, condition)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.item = item;\n\t\tthis.varname = varname;\n\t\tthis.container = container;\n\t\tthis.condition = condition;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<ListCompAST\");\n\t\tout.push(\" item=\");\n\t\tthis.item._repr(out);\n\t\tout.push(\" varname=\");\n\t\tout.push(_repr(this.varname));\n\t\tout.push(\" container=\");\n\t\tthis.container._repr(out);\n\t\tif (this.condition !== null)\n\t\t{\n\t\t\tout.push(\" condition=\");\n\t\t\tthis.condition._repr(out);\n\t\t}\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet container = this.container._handle_eval(context);\n\n\t\tlet localcontext = context.inheritvars();\n\n\t\tlet result = [];\n\t\tfor (let iter = _iter(container);;)\n\t\t{\n\t\t\tlet item = iter.next();\n\t\t\tif (item.done)\n\t\t\t\tbreak;\n\t\t\tlet varitems = _unpackvar(this.varname, item.value);\n\t\t\tfor (let [lvalue, value] of varitems)\n\t\t\t\tlvalue._handle_eval_set(localcontext, value);\n\t\t\tif (this.condition === null || _bool(this.condition._handle_eval(localcontext)))\n\t\t\t\tresult.push(this.item._handle_eval(localcontext));\n\t\t}\n\t\treturn result;\n\t}\n};\n\nListCompAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"item\", \"varname\", \"container\", \"condition\"]);\n\nexport class SetAST extends CodeAST\n{\n\tconstructor(template, pos)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.items = [];\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<SetAST\");\n\t\tfor (let item of this.items)\n\t\t{\n\t\t\tout.push(\" \");\n\t\t\titem._repr(out);\n\t\t}\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet result = _emptyset();\n\n\t\tfor (let item of this.items)\n\t\t\titem._handle_eval_set(context, result);\n\n\t\treturn result;\n\t}\n};\n\nSetAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"items\"]);\n\nexport class SetCompAST extends CodeAST\n{\n\tconstructor(template, pos, item, varname, container, condition)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.item = item;\n\t\tthis.varname = varname;\n\t\tthis.container = container;\n\t\tthis.condition = condition;\n\t}\n\n\t__getattr__(attrname)\n\t{\n\t\tswitch (attrname)\n\t\t{\n\t\t\tcase \"item\":\n\t\t\t\treturn this.item;\n\t\t\tcase \"varname\":\n\t\t\t\treturn this.varname;\n\t\t\tcase \"container\":\n\t\t\t\treturn this.container;\n\t\t\tcase \"condition\":\n\t\t\t\treturn this.condition;\n\t\t\tdefault:\n\t\t\t\treturn super.__getattr__(attrname);\n\t\t}\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<SetCompAST\");\n\t\tout.push(\" item=\");\n\t\tthis.item._repr(out);\n\t\tout.push(\" varname=\");\n\t\tthis.varname._repr(out);\n\t\tout.push(\" container=\");\n\t\tthis.container._repr(out);\n\t\tif (this.condition !== null)\n\t\t{\n\t\t\tout.push(\" condition=\");\n\t\t\tthis.condition._repr(out);\n\t\t}\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet container = this.container._handle_eval(context);\n\n\t\tlet localcontext = context.inheritvars();\n\n\t\tlet result = _emptyset();\n\t\tfor (let iter = _iter(container);;)\n\t\t{\n\t\t\tlet item = iter.next();\n\t\t\tif (item.done)\n\t\t\t\tbreak;\n\t\t\tlet varitems = _unpackvar(this.varname, item.value);\n\t\t\tfor (let [lvalue, value] of varitems)\n\t\t\t\tlvalue._handle_eval_set(localcontext, value);\n\t\t\tif (this.condition === null || _bool(this.condition._handle_eval(localcontext)))\n\t\t\t\tresult.add(this.item._handle_eval(localcontext));\n\t\t}\n\n\t\treturn result;\n\t}\n};\n\nSetCompAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"item\", \"varname\", \"container\", \"condition\"]);\n\nexport class DictAST extends CodeAST\n{\n\tconstructor(template, pos)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.items = [];\n\t}\n\n\t__getattr__(attrname)\n\t{\n\t\tswitch (attrname)\n\t\t{\n\t\t\tcase \"items\":\n\t\t\t\treturn this.items;\n\t\t\tdefault:\n\t\t\t\treturn super.__getattr__(attrname);\n\t\t}\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<DictAST\");\n\t\tfor (let item of this.items)\n\t\t{\n\t\t\tout.push(\" \");\n\t\t\titem._repr(out);\n\t\t}\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet result = _emptymap();\n\t\tfor (let item of this.items)\n\t\t\titem._handle_eval_dict(context, result);\n\t\treturn result;\n\t}\n};\n\nDictAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"items\"]);\n\nexport class DictCompAST extends CodeAST\n{\n\tconstructor(template, pos, key, value, varname, container, condition)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.key = key;\n\t\tthis.value = value;\n\t\tthis.varname = varname;\n\t\tthis.container = container;\n\t\tthis.condition = condition;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<DictCompAST\");\n\t\tout.push(\" key=\");\n\t\tthis.key._repr(out);\n\t\tout.push(\" value=\");\n\t\tthis.value._repr(out);\n\t\tout.push(\" varname=\");\n\t\tthis.varname._repr(out);\n\t\tout.push(\" container=\");\n\t\tthis.container._repr(out);\n\t\tif (this.condition !== null)\n\t\t{\n\t\t\tout.push(\" condition=\");\n\t\t\tthis.condition._repr(out);\n\t\t}\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet container = this.container._handle_eval(context);\n\n\t\tlet localcontext = context.inheritvars();\n\n\t\tlet result = _emptymap();\n\n\t\tfor (let iter = _iter(container);;)\n\t\t{\n\t\t\tlet item = iter.next();\n\t\t\tif (item.done)\n\t\t\t\tbreak;\n\t\t\tlet varitems = _unpackvar(this.varname, item.value);\n\t\t\tfor (let [lvalue, value] of varitems)\n\t\t\t\tlvalue._handle_eval_set(localcontext, value);\n\t\t\tif (this.condition === null || _bool(this.condition._handle_eval(localcontext)))\n\t\t\t{\n\t\t\t\tlet key = this.key._handle_eval(localcontext);\n\t\t\t\tlet value = this.value._handle_eval(localcontext);\n\t\t\t\t_setmap(result, key, value);\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n};\n\nDictCompAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"key\", \"value\", \"varname\", \"container\", \"condition\"]);\n\nexport class GenExprAST extends CodeAST\n{\n\tconstructor(template, pos, item, varname, container, condition)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.item = item;\n\t\tthis.varname = varname;\n\t\tthis.container = container;\n\t\tthis.condition = condition;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<GenExprAST\");\n\t\tout.push(\" item=\");\n\t\tthis.item._repr(out);\n\t\tout.push(\" varname=\");\n\t\tthis.varname._repr(out);\n\t\tout.push(\" container=\");\n\t\tthis.container._repr(out);\n\t\tif (this.condition !== null)\n\t\t{\n\t\t\tout.push(\" condition=\");\n\t\t\tthis.condition._repr(out);\n\t\t}\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet container = this.container._handle_eval(context);\n\t\tlet iter = _iter(container);\n\n\t\tlet localcontext = context.inheritvars();\n\n\t\tlet self = this;\n\n\t\tlet result = {\n\t\t\tnext: function(){\n\t\t\t\twhile (true)\n\t\t\t\t{\n\t\t\t\t\tlet item = iter.next();\n\t\t\t\t\tif (item.done)\n\t\t\t\t\t\treturn item;\n\t\t\t\t\tlet varitems = _unpackvar(self.varname, item.value);\n\t\t\t\t\tfor (let [lvalue, value] of varitems)\n\t\t\t\t\t\tlvalue._handle_eval_set(localcontext, value);\n\t\t\t\t\tif (self.condition === null || _bool(self.condition._handle_eval(localcontext)))\n\t\t\t\t\t{\n\t\t\t\t\t\tlet value = self.item._handle_eval(localcontext);\n\t\t\t\t\t\treturn {value: value, done: false};\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\treturn result;\n\t}\n};\n\nGenExprAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"item\", \"varname\", \"container\", \"condition\"]);\n\nexport class VarAST extends CodeAST\n{\n\tconstructor(template, pos, name)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.name = name;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<VarAST name=\");\n\t\tout.push(_repr(this.name));\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\treturn this._get(context, this.name);\n\t}\n\n\t_eval_set(context, value)\n\t{\n\t\tthis._set(context, this.name, value);\n\t}\n\n\t_eval_modify(context, operator, value)\n\t{\n\t\tthis._modify(context, operator, this.name, value);\n\t}\n\n\t_get(context, name)\n\t{\n\t\tlet result = context.get(name);\n\t\tif (typeof(result) === \"undefined\")\n\t\t\tresult = functions[name];\n\t\treturn result;\n\t}\n\n\t_set(context, name, value)\n\t{\n\t\tcontext.set(name, value);\n\t}\n\n\t_modify(context, operator, name, value)\n\t{\n\t\tlet newvalue = operator._ido(context.get(name), value);\n\t\tcontext.set(name, newvalue);\n\t}\n};\n\nVarAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"name\"]);\n\nexport class UnaryAST extends CodeAST\n{\n\tconstructor(template, pos, obj)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.obj = obj;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<\");\n\t\tout.push(this.constructor.name);\n\t\tout.push(\" obj=\");\n\t\tthis.obj._repr(out);\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet obj = this.obj._handle_eval(context);\n\t\treturn this._do(obj);\n\t}\n};\n\nUnaryAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"obj\"]);\n\n// Negation\nexport class NegAST extends UnaryAST\n{\n\t_do(obj)\n\t{\n\t\tif (obj !== null && typeof(obj.__neg__) === \"function\")\n\t\t\treturn obj.__neg__();\n\t\treturn -obj;\n\t}\n};\n\n// Bitwise not\nexport class BitNotAST extends UnaryAST\n{\n\t_do(obj)\n\t{\n\t\treturn -obj-1;\n\t}\n};\n\n// Not\nexport class NotAST extends UnaryAST\n{\n\t_do(obj)\n\t{\n\t\treturn !_bool(obj);\n\t}\n};\n\n// If expression\nexport class IfAST extends CodeAST\n{\n\tconstructor(template, pos, objif, objcond, objelse)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.objif = objif;\n\t\tthis.objcond = objcond;\n\t\tthis.objelse = objelse;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<\");\n\t\tout.push(this.constructor.name);\n\t\tout.push(+1);\n\t\tout.push(\"objif=\");\n\t\tthis.objif._repr(out);\n\t\tout.push(0);\n\t\tout.push(\"objcond=\");\n\t\tthis.objcond._repr(out);\n\t\tout.push(0);\n\t\tout.push(\"objelse=\");\n\t\tthis.objelse._repr(out);\n\t\tout.push(-1);\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet result;\n\t\tlet condvalue = this.objcond._handle_eval(context);\n\t\tif (_bool(condvalue))\n\t\t\tresult = this.objif._handle_eval(context);\n\t\telse\n\t\t\tresult = this.objelse._handle_eval(context);\n\t\treturn result;\n\t}\n};\n\nIfAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"objif\", \"objcond\", \"objelse\"]);\n\nexport class ReturnAST extends UnaryAST\n{\n\t_eval(context)\n\t{\n\t\tlet result = this.obj._handle_eval(context);\n\t\tthrow new ReturnException(result);\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(\"return \");\n\t\tthis.obj._str(out);\n\t}\n};\n\nexport class PrintAST extends UnaryAST\n{\n\t_eval(context)\n\t{\n\t\tlet obj = this.obj._handle_eval(context);\n\t\tlet output = _str(obj);\n\t\tcontext.output(output);\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(\"print \");\n\t\tthis.obj._str(out);\n\t}\n};\n\nexport class PrintXAST extends UnaryAST\n{\n\t_eval(context)\n\t{\n\t\tlet obj = this.obj._handle_eval(context);\n\t\tlet output = _xmlescape(obj);\n\t\tcontext.output(output);\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(\"printx \");\n\t\tthis.obj._str(out);\n\t}\n};\n\nexport class BinaryAST extends CodeAST\n{\n\tconstructor(template, pos, obj1, obj2)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.obj1 = obj1;\n\t\tthis.obj2 = obj2;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<\");\n\t\tout.push(this.constructor.name);\n\t\tout.push(\" obj1=\");\n\t\tthis.obj1._repr(out);\n\t\tout.push(\" obj2=\");\n\t\tthis.obj2._repr(out);\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet obj1 = this.obj1._handle_eval(context);\n\t\tlet obj2 = this.obj2._handle_eval(context);\n\t\treturn this._do(obj1, obj2);\n\t}\n};\n\nBinaryAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"obj1\", \"obj2\"]);\n\n// Item access and assignment: dict[key], list[index], string[index], color[index]\nexport class ItemAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\tlet result = this._get(obj1, obj2);\n\t\treturn result;\n\t}\n\n\t_eval_set(context, value)\n\t{\n\t\tlet obj1 = this.obj1._handle_eval(context);\n\t\tlet obj2 = this.obj2._handle_eval(context);\n\t\tthis._set(obj1, obj2, value);\n\t}\n\n\t_eval_modify(context, operator, value)\n\t{\n\t\tlet obj1 = this.obj1._handle_eval(context);\n\t\tlet obj2 = this.obj2._handle_eval(context);\n\t\tthis._modify(operator, obj1, obj2, value);\n\t}\n\n\t_get(container, key)\n\t{\n\t\tif (typeof(container) === \"string\" || _islist(container))\n\t\t{\n\t\t\tif (key instanceof slice)\n\t\t\t{\n\t\t\t\tlet start = key.start, stop = key.stop;\n\t\t\t\tif (typeof(start) === \"undefined\" || start === null)\n\t\t\t\t\tstart = 0;\n\t\t\t\tif (typeof(stop) === \"undefined\" || stop === null)\n\t\t\t\t\tstop = container.length;\n\t\t\t\treturn container.slice(start, stop);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlet orgkey = key;\n\t\t\t\tif (key < 0)\n\t\t\t\t\tkey += container.length;\n\t\t\t\tif (key < 0 || key >= container.length)\n\t\t\t\t\tthrow new IndexError(container, orgkey);\n\t\t\t\treturn container[key];\n\t\t\t}\n\t\t}\n\t\telse if (container && typeof(container.__getitem__) === \"function\") // objects without ``_getitem__`` don't support item access\n\t\t\treturn container.__getitem__(key);\n\t\telse if (_ismap(container))\n\t\t\treturn container.get(key);\n\t\telse\n\t\t\tthrow new TypeError(_type(container) + \" object is not subscriptable\");\n\t}\n\n\t_set(container, key, value)\n\t{\n\t\tif (_islist(container))\n\t\t{\n\t\t\tif (key instanceof slice)\n\t\t\t{\n\t\t\t\tlet start = key.start, stop = key.stop;\n\t\t\t\tif (start === null)\n\t\t\t\t\tstart = 0;\n\t\t\t\telse if (start < 0)\n\t\t\t\t\tstart += container.length;\n\t\t\t\tif (start < 0)\n\t\t\t\t\tstart = 0;\n\t\t\t\telse if (start > container.length)\n\t\t\t\t\tstart = container.length;\n\t\t\t\tif (stop === null)\n\t\t\t\t\tstop = container.length;\n\t\t\t\telse if (stop < 0)\n\t\t\t\t\tstop += container.length;\n\t\t\t\tif (stop < 0)\n\t\t\t\t\tstop = 0;\n\t\t\t\telse if (stop > container.length)\n\t\t\t\t\tstop = container.length;\n\t\t\t\tif (stop < start)\n\t\t\t\t\tstop = start;\n\t\t\t\tcontainer.splice(start, stop-start); // Remove old element\n\t\t\t\tfor (let iter = _iter(value);;)\n\t\t\t\t{\n\t\t\t\t\tlet item = iter.next();\n\t\t\t\t\tif (item.done)\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcontainer.splice(start++, 0, item.value);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlet orgkey = key;\n\t\t\t\tif (key < 0)\n\t\t\t\t\tkey += container.length;\n\t\t\t\tif (key < 0 || key >= container.length)\n\t\t\t\t\tthrow new IndexError(container, orgkey);\n\t\t\t\tcontainer[key] = value;\n\t\t\t}\n\t\t}\n\t\telse if (container && typeof(container.__setitem__) === \"function\") // test this before the generic object test\n\t\t\tcontainer.__setitem__(key, value);\n\t\telse if (_ismap(container))\n\t\t\tcontainer.set(key, value);\n\t\telse if (_isobject(container))\n\t\t\tcontainer[key] = value;\n\t\telse\n\t\t\tthrow new NotSubscriptableError(container);\n\t}\n\n\t_modify(operator, container, key, value)\n\t{\n\t\tthis._set(container, key, operator._ido(this._get(container, key), value));\n\t}\n};\n\n// Identifty test operator ``is``\nexport class IsAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\treturn obj1 === obj2;\n\t}\n};\n\n// Inverted identity test operator ``is not``\nexport class IsNotAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\treturn obj1 !== obj2;\n\t}\n};\n\n// Comparison operator ==\nexport class EQAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\treturn _eq(obj1, obj2);\n\t}\n};\n\n// Comparison operator !=\nexport class NEAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\treturn _ne(obj1, obj2);\n\t}\n};\n\n// Comparison operator <\nexport class LTAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\treturn _lt(obj1, obj2);\n\t}\n};\n\n// Comparison operator <=\nexport class LEAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\treturn _le(obj1, obj2);\n\t}\n};\n\n// Comparison operator >\nexport class GTAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\treturn _gt(obj1, obj2);\n\t}\n};\n\n// Comparison operator >=\nexport class GEAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\treturn _ge(obj1, obj2);\n\t}\n};\n\n// Containment test: string in string, obj in list, key in dict, value in rgb\nexport class ContainsAST extends BinaryAST\n{\n\t_do(obj, container)\n\t{\n\t\tif (typeof(obj) === \"string\" && typeof(container) === \"string\")\n\t\t{\n\t\t\treturn container.indexOf(obj) !== -1;\n\t\t}\n\t\telse if (_islist(container))\n\t\t{\n\t\t\treturn container.indexOf(obj) !== -1;\n\t\t}\n\t\telse if (container && typeof(container.__contains__) === \"function\") // test this before the generic object test\n\t\t\treturn container.__contains__(obj);\n\t\telse if (_ismap(container) || _isset(container))\n\t\t\treturn container.has(obj);\n\t\telse if (_isobject(container))\n\t\t{\n\t\t\tfor (let key in container)\n\t\t\t{\n\t\t\t\tif (key === obj)\n\t\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\telse if (_iscolor(container))\n\t\t{\n\t\t\treturn container._r === obj || container._g === obj || container._b === obj || container._a === obj;\n\t\t}\n\t\tthrow new TypeError(_type(container) + \" object is not iterable\");\n\t}\n};\n\n// Inverted containment test\nexport class NotContainsAST extends BinaryAST\n{\n\t_do(obj, container)\n\t{\n\t\treturn !ContainsAST.prototype._do(obj, container);\n\t}\n};\n\n// Addition: num + num, string + string\nexport class AddAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\tif (obj1 && typeof(obj1.__add__) === \"function\")\n\t\t\treturn obj1.__add__(obj2);\n\t\telse if (obj2 && typeof(obj2.__radd__) === \"function\")\n\t\t\treturn obj2.__radd__(obj1);\n\t\tif (obj1 === null || obj2 === null)\n\t\t\tthrow new TypeError(_type(this.obj1) + \" + \" + _type(this.obj2) + \" is not supported\");\n\t\tif (_islist(obj1) && _islist(obj2))\n\t\t\treturn [...obj1, ...obj2];\n\t\telse\n\t\t\treturn obj1 + obj2;\n\t}\n\n\t_ido(obj1, obj2)\n\t{\n\t\tif (_islist(obj1) && _islist(obj2))\n\t\t{\n\t\t\tListProtocol.append(obj1, obj2);\n\t\t\treturn obj1;\n\t\t}\n\t\telse\n\t\t\treturn this._do(obj1, obj2);\n\t}\n};\n\n// Substraction: num - num\nexport class SubAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\tif (obj1 && typeof(obj1.__sub__) === \"function\")\n\t\t\treturn obj1.__sub__(obj2);\n\t\telse if (obj2 && typeof(obj2.__rsub__) === \"function\")\n\t\t\treturn obj2.__rsub__(obj1);\n\t\telse if (_isdate(obj1) && _isdate(obj2))\n\t\t\treturn this._date_sub(obj1, obj2);\n\t\telse if (_isdatetime(obj1) && _isdatetime(obj2))\n\t\t\treturn this._datetime_sub(obj1, obj2);\n\t\tif (obj1 === null || obj2 === null)\n\t\t\tthrow new TypeError(_type(this.obj1) + \" - \" + _type(this.obj2) + \" is not supported\");\n\t\treturn obj1 - obj2;\n\t}\n\n\t_date_sub(obj1, obj2)\n\t{\n\t\treturn this._datetime_sub(obj1._date, obj2._date);\n\t}\n\n\t_datetime_sub(obj1, obj2)\n\t{\n\t\tlet swap = (obj2 > obj1);\n\n\t\tif (swap)\n\t\t{\n\t\t\tlet t = obj1;\n\t\t\tobj1 = obj2;\n\t\t\tobj2 = t;\n\t\t}\n\t\t// From now on obj1 is > than obj2\n\n\t\tlet year1 = obj1.getFullYear();\n\t\tlet yearday1 = DateTimeProtocol.yearday(obj1);\n\t\tlet year2 = obj2.getFullYear();\n\t\tlet yearday2 = DateTimeProtocol.yearday(obj2);\n\n\t\tlet diffdays = 0;\n\n\t\twhile (year1 > year2)\n\t\t{\n\t\t\tdiffdays += DateProtocol.yearday(_date(year2, 12, 31));\n\t\t\t++year2;\n\t\t}\n\t\tdiffdays += yearday1 - yearday2;\n\n\t\tlet hours1 = obj1.getHours();\n\t\tlet minutes1 = obj1.getMinutes();\n\t\tlet seconds1 = obj1.getSeconds();\n\t\tlet hours2 = obj2.getHours();\n\t\tlet minutes2 = obj2.getMinutes();\n\t\tlet seconds2 = obj2.getSeconds();\n\n\t\tlet diffseconds = (seconds1 - seconds2) + 60 * ((minutes1 - minutes2) + 60 * (hours1 - hours2));\n\n\t\tlet diffmilliseconds = obj1.getMilliseconds() - obj2.getMilliseconds();\n\n\t\tif (swap)\n\t\t{\n\t\t\tdiffdays = -diffdays;\n\t\t\tdiffseconds = -diffseconds;\n\t\t\tdiffmilliseconds = -diffmilliseconds;\n\t\t}\n\t\treturn new TimeDelta(diffdays, diffseconds, 1000*diffmilliseconds);\n\t}\n\n\t_ido(obj1, obj2)\n\t{\n\t\treturn this._do(obj1, obj2);\n\t}\n};\n\n\n// Multiplication: num * num, int * str, str * int, int * list, list * int\nexport class MulAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\tif (obj1 && typeof(obj1.__mul__) === \"function\")\n\t\t\treturn obj1.__mul__(obj2);\n\t\telse if (obj2 && typeof(obj2.__rmul__) === \"function\")\n\t\t\treturn obj2.__rmul__(obj1);\n\t\tif (obj1 === null || obj2 === null)\n\t\t\tthrow new TypeError(_type(obj1) + \" * \" + _type(obj2) + \" not supported\");\n\t\telse if (_isint(obj1) || _isbool(obj1))\n\t\t{\n\t\t\tif (typeof(obj2) === \"string\")\n\t\t\t{\n\t\t\t\tif (obj1 < 0)\n\t\t\t\t\tthrow new ValueError(\"repetition counter must be positive\");\n\t\t\t\treturn _str_repeat(obj2, obj1);\n\t\t\t}\n\t\t\telse if (_islist(obj2))\n\t\t\t{\n\t\t\t\tif (obj1 < 0)\n\t\t\t\t\tthrow new ValueError(\"repetition counter must be positive\");\n\t\t\t\treturn _list_repeat(obj2, obj1);\n\t\t\t}\n\t\t}\n\t\telse if (_isint(obj2) || _isbool(obj2))\n\t\t{\n\t\t\tif (typeof(obj1) === \"string\")\n\t\t\t{\n\t\t\t\tif (obj2 < 0)\n\t\t\t\t\tthrow new ValueError(\"repetition counter must be positive\");\n\t\t\t\treturn _str_repeat(obj1, obj2);\n\t\t\t}\n\t\t\telse if (_islist(obj1))\n\t\t\t{\n\t\t\t\tif (obj2 < 0)\n\t\t\t\t\tthrow new ValueError(\"repetition counter must be positive\");\n\t\t\t\treturn _list_repeat(obj1, obj2);\n\t\t\t}\n\t\t}\n\t\treturn obj1 * obj2;\n\t}\n\n\t_ido(obj1, obj2)\n\t{\n\t\tif (_islist(obj1) && _isint(obj2))\n\t\t{\n\t\t\tif (obj2 > 0)\n\t\t\t{\n\t\t\t\tlet i = 0;\n\t\t\t\tlet targetsize = obj1.length * obj2;\n\t\t\t\twhile (obj1.length < targetsize)\n\t\t\t\t\tobj1.push(obj1[i++]);\n\t\t\t}\n\t\t\telse\n\t\t\t\tobj1.splice(0, obj1.length);\n\t\t\treturn obj1;\n\t\t}\n\t\telse\n\t\t\treturn this._do(obj1, obj2);\n\t}\n};\n\n// Truncating division\nexport class FloorDivAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\tif (obj1 && typeof(obj1.__floordiv__) === \"function\")\n\t\t\treturn obj1.__floordiv__(obj2);\n\t\telse if (obj2 && typeof(obj2.__rfloordiv__) === \"function\")\n\t\t\treturn obj2.__rfloordiv__(obj1);\n\t\tif (obj1 === null || obj2 === null)\n\t\t\tthrow new TypeError(_type(obj1) + \" // \" + _type(obj2) + \" not supported\");\n\t\telse if (typeof(obj1) === \"number\" && typeof(obj2) === \"number\" && obj2 === 0)\n\t\t\tthrow new ZeroDivisionError();\n\t\treturn Math.floor(obj1 / obj2);\n\t}\n\n\t_ido(obj1, obj2)\n\t{\n\t\treturn this._do(obj1, obj2);\n\t}\n};\n\n// \"Real\" division\nexport class TrueDivAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\tif (obj1 && typeof(obj1.__truediv__) === \"function\")\n\t\t\treturn obj1.__truediv__(obj2);\n\t\telse if (obj2 && typeof(obj2.__rtruediv__) === \"function\")\n\t\t\treturn obj2.__rtruediv__(obj1);\n\t\tif (obj1 === null || obj2 === null)\n\t\t\tthrow new TypeError(_type(obj1) + \" / \" + _type(obj2) + \" not supported\");\n\t\telse if (typeof(obj1) === \"number\" && typeof(obj2) === \"number\" && obj2 === 0)\n\t\t\tthrow new ZeroDivisionError();\n\t\treturn obj1 / obj2;\n\t}\n\n\t_ido(obj1, obj2)\n\t{\n\t\treturn this._do(obj1, obj2);\n\t}\n};\n\n// Modulo\nexport class ModAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\treturn _mod(obj1, obj2);\n\t}\n\n\t_ido(obj1, obj2)\n\t{\n\t\treturn this._do(obj1, obj2);\n\t}\n};\n\n// Bitwise left shift\nexport class ShiftLeftAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\tif (obj2 === false)\n\t\t\tobj2 = 0;\n\t\telse if (obj2 === true)\n\t\t\tobj2 = 1;\n\t\tif (obj2 < 0)\n\t\t\treturn ShiftRightAST.prototype._do(obj1, -obj2);\n\t\tif (obj1 === false)\n\t\t\tobj1 = 0;\n\t\telse if (obj1 === true)\n\t\t\tobj1 = 1;\n\t\twhile (obj2--)\n\t\t\tobj1 *= 2;\n\t\treturn obj1;\n\t}\n\n\t_ido(obj1, obj2)\n\t{\n\t\treturn this._do(obj1, obj2);\n\t}\n};\n\n// Bitwise right shift\nexport class ShiftRightAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\tif (obj2 === false)\n\t\t\tobj2 = 0;\n\t\telse if (obj2 === true)\n\t\t\tobj2 = 1;\n\t\tif (obj2 < 0)\n\t\t\treturn ShiftLeftAST.prototype._do(obj1, -obj2);\n\t\tif (obj1 === false)\n\t\t\tobj1 = 0;\n\t\telse if (obj1 === true)\n\t\t\tobj1 = 1;\n\t\twhile (obj2--)\n\t\t\tobj1 /= 2;\n\t\treturn Math.floor(obj1);\n\t}\n\n\t_ido(obj1, obj2)\n\t{\n\t\treturn this._do(obj1, obj2);\n\t}\n};\n\n// Bitwise and\nexport class BitAndAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\tif (obj2 === false)\n\t\t\tobj2 = 0;\n\t\telse if (obj2 === true)\n\t\t\tobj2 = 1;\n\t\treturn obj1 & obj2;\n\t}\n\n\t_ido(obj1, obj2)\n\t{\n\t\treturn this._do(obj1, obj2);\n\t}\n};\n\n// Bitwise exclusive or\nexport class BitXOrAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\tif (obj2 === false)\n\t\t\tobj2 = 0;\n\t\telse if (obj2 === true)\n\t\t\tobj2 = 1;\n\t\treturn obj1 ^ obj2;\n\t}\n\n\t_ido(obj1, obj2)\n\t{\n\t\treturn this._do(obj1, obj2);\n\t}\n};\n\n// Bitwise or\nexport class BitOrAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\tif (obj2 === false)\n\t\t\tobj2 = 0;\n\t\telse if (obj2 === true)\n\t\t\tobj2 = 1;\n\t\treturn obj1 | obj2;\n\t}\n\n\t_ido(obj1, obj2)\n\t{\n\t\treturn this._do(obj1, obj2);\n\t}\n};\n\nexport class AndAST extends BinaryAST\n{\n\t_eval(context)\n\t{\n\t\tlet obj1 = this.obj1._handle_eval(context);\n\t\tif (!_bool(obj1))\n\t\t\treturn obj1;\n\t\tlet obj2 = this.obj2._handle_eval(context);\n\t\treturn obj2;\n\t}\n};\n\nexport class OrAST extends BinaryAST\n{\n\t_eval(context)\n\t{\n\t\tlet obj1 = this.obj1._handle_eval(context);\n\t\tif (_bool(obj1))\n\t\t\treturn obj1;\n\t\tlet obj2 = this.obj2._handle_eval(context);\n\t\treturn obj2;\n\t}\n};\n\nexport class AttrAST extends CodeAST\n{\n\tconstructor(template, pos, obj, attrname)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.obj = obj;\n\t\tthis.attrname = attrname;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<AttrAST\");\n\t\tout.push(\" obj=\");\n\t\tthis.obj._repr(out);\n\t\tout.push(\" attrname=\");\n\t\tout.push(_repr(this.attrname));\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet obj = this.obj._handle_eval(context);\n\t\tlet result = this._get(obj, this.attrname);\n\t\treturn result;\n\t}\n\n\t_eval_set(context, value)\n\t{\n\t\tlet obj = this.obj._handle_eval(context);\n\t\tthis._set(obj, this.attrname, value);\n\t}\n\n\t_eval_modify(context, operator, value)\n\t{\n\t\tlet obj = this.obj._handle_eval(context);\n\t\tthis._modify(operator, obj, this.attrname, value);\n\t}\n\n\t_get(object, attrname)\n\t{\n\t\tlet proto = Protocol.get(object);\n\t\ttry\n\t\t{\n\t\t\treturn proto.getattr(object, attrname);\n\t\t}\n\t\tcatch (exc)\n\t\t{\n\t\t\tif (exc instanceof AttributeError && exc.obj === object)\n\t\t\t\treturn undefined;\n\t\t\telse\n\t\t\t\tthrow exc;\n\t\t}\n\t}\n\n\t_set(object, attrname, value)\n\t{\n\t\tif (typeof(object) === \"object\" && typeof(object.__setattr__) === \"function\")\n\t\t\tobject.__setattr__(attrname, value);\n\t\telse if (_ismap(object))\n\t\t\tobject.set(attrname, value);\n\t\telse if (_isobject(object))\n\t\t\tobject[attrname] = value;\n\t\telse\n\t\t\tthrow new TypeError(_type(object) + \" object has no writable attributes\");\n\t}\n\n\t_modify(operator, object, attrname, value)\n\t{\n\t\tlet oldvalue = this._get(object, attrname);\n\t\tlet newvalue = operator._ido(oldvalue, value);\n\t\tthis._set(object, attrname, newvalue);\n\t}\n};\n\nAttrAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"obj\", \"attrname\"]);\n\nexport class CallAST extends CodeAST\n{\n\tconstructor(template, pos, obj, args)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.obj = obj;\n\t\tthis.args = args;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<CallAST\");\n\t\tout.push(\" obj=\");\n\t\tthis.obj._repr(out);\n\t\tfor (let arg of this.args)\n\t\t{\n\t\t\tout.push(\" \");\n\t\t\targ._repr(out);\n\t\t}\n\t\tout.push(\">\");\n\t}\n\n\t_makeargs(context)\n\t{\n\t\tlet args = [], kwargs = {};\n\t\tfor (let arg of this.args)\n\t\t\targ._handle_eval_call(context, args, kwargs);\n\t\treturn {args: args, kwargs: kwargs};\n\t}\n\n\t_handle_eval(context)\n\t{\n\t\ttry\n\t\t{\n\t\t\treturn this._eval(context);\n\t\t}\n\t\tcatch (exc)\n\t\t{\n\t\t\tthis._decorate_exception(exc);\n\t\t\tthrow exc;\n\t\t}\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet obj = this.obj._handle_eval(context);\n\t\tlet args = this._makeargs(context);\n\t\tlet result = _call(context, obj, args.args, args.kwargs);\n\t\treturn result;\n\t}\n};\n\nCallAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"obj\", \"args\"]);\n\nexport class RenderAST extends CallAST\n{\n\tconstructor(template, pos, obj, args)\n\t{\n\t\tsuper(template, pos, obj, args);\n\t\tthis.indent = null;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<\");\n\t\tout.push(this._reprname);\n\t\tout.push(\"<RenderAST\");\n\t\tout.push(\" indent=\");\n\t\tout.push(_repr(this.indent));\n\t\tout.push(\" obj=\");\n\t\tthis.obj._repr(out);\n\t\tout.push(0);\n\t\tfor (let arg of this.args)\n\t\t{\n\t\t\tout.push(\" \");\n\t\t\targ._repr(out);\n\t\t\tout.push(0);\n\t\t}\n\t\tout.push(-1);\n\t\tout.push(\">\");\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(\"render \");\n\t\tout.push(this.tag.code.replace(/\\r?\\n/g, ' '));\n\t\tif (this.indent !== null)\n\t\t{\n\t\t\tout.push(\" with indent \");\n\t\t\tout.push(_repr(this.indent.text));\n\t\t}\n\t}\n\n\t_handle_eval(context)\n\t{\n\t\tlet localcontext = context.withindent(this.indent !== null ? this.indent.text : null);\n\t\tlet obj = this.obj._handle_eval(localcontext);\n\t\tlet args = this._makeargs(localcontext);\n\t\tthis._handle_additional_arguments(localcontext, args);\n\n\t\ttry\n\t\t{\n\t\t\tlet result = _callrender(localcontext, obj, args.args, args.kwargs);\n\t\t\treturn result;\n\t\t}\n\t\tcatch (exc)\n\t\t{\n\t\t\tthis._decorate_exception(exc);\n\t\t\tthrow exc;\n\t\t}\n\t}\n\n\t_handle_additional_arguments(context, args)\n\t{\n\t}\n};\n\nRenderAST.prototype._ul4onattrs = CallAST.prototype._ul4onattrs.concat([\"indent\"]);\nRenderAST.prototype._reprname = \"RenderAST\";\n\nexport class RenderXAST extends RenderAST\n{\n\t_handle_eval(context)\n\t{\n\t\tcontext.escapes.push(_xmlescape);\n\n\t\tlet result = null;\n\t\ttry\n\t\t{\n\t\t\tresult = super._handle_eval(context);\n\t\t}\n\t\tfinally\n\t\t{\n\t\t\tcontext.escapes.splice(context.escapes.length-1, 1);\n\t\t}\n\t\treturn result;\n\t}\n};\n\nexport class RenderBlockAST extends RenderAST\n{\n\t_handle_additional_arguments(context, args)\n\t{\n\t\tif (args.kwargs.hasOwnProperty(\"content\"))\n\t\t\tthrow new ArgumentError(\"duplicate keyword argument content\");\n\t\tlet closure = new TemplateClosure(this.content, this.content.signature, context.vars);\n\t\targs.kwargs.content = closure;\n\t}\n};\n\nRenderBlockAST.prototype._ul4onattrs = RenderAST.prototype._ul4onattrs.concat([\"content\"]);\n\nexport class RenderBlocksAST extends RenderAST\n{\n\t_handle_additional_arguments(context, args)\n\t{\n\t\tlet localcontext = context.inheritvars();\n\t\tBlockAST.prototype._eval.call(this, localcontext);\n\n\t\tfor (let key in localcontext.vars)\n\t\t{\n\t\t\tif (localcontext.vars.hasOwnProperty(key))\n\t\t\t{\n\t\t\t\tif (key in args.kwargs)\n\t\t\t\t\tthrow new ArgumentError(\"duplicate keyword argument \" + key);\n\t\t\t\targs.kwargs[key] = localcontext.get(key);\n\t\t\t}\n\t\t}\n\t}\n};\n\nRenderBlocksAST.prototype._ul4onattrs = RenderAST.prototype._ul4onattrs.concat([\"content\"]);\n\n// Slice object\nexport class slice extends Proto\n{\n\tconstructor(start, stop)\n\t{\n\t\tsuper();\n\t\tthis.start = start;\n\t\tthis.stop = stop;\n\t}\n\n\tof(string)\n\t{\n\t\tlet start = this.start || 0;\n\t\tlet stop = this.stop === null ? string.length : this.stop;\n\t\treturn string.slice(start, stop);\n\t}\n\n\t__repr__()\n\t{\n\t\treturn \"slice(\" + _repr(this.start) + \", \" + _repr(this.stop) + \", None)\";\n\t}\n\n\t__getattr__(attrname)\n\t{\n\t\tswitch (attrname)\n\t\t{\n\t\t\tcase \"start\":\n\t\t\t\treturn this.start;\n\t\t\tcase \"stop\":\n\t\t\t\treturn this.stop;\n\t\t\tdefault:\n\t\t\t\tthrow new AttributeError(this, attrname);\n\t\t}\n\t}\n};\n\n\n// List/String slice\nexport class SliceAST extends CodeAST\n{\n\tconstructor(template, pos, index1, index2)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.index1 = index1;\n\t\tthis.index2 = index2;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<SliceAST\");\n\t\tif (this.index1 !== null)\n\t\t{\n\t\t\tout.push(\" index1=\");\n\t\t\tthis.index1._repr(out);\n\t\t}\n\t\tif (this.index2 !== null)\n\t\t{\n\t\t\tout.push(\" index2=\");\n\t\t\tthis.index2._repr(out);\n\t\t}\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet index1 = this.index1 !== null ? this.index1._handle_eval(context) : null;\n\t\tlet index2 = this.index2 !== null ? this.index2._handle_eval(context) : null;\n\t\treturn new slice(index1, index2);\n\t}\n};\n\nSliceAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"index1\", \"index2\"]);\n\nexport class SetVarAST extends CodeAST\n{\n\tconstructor(template, pos, lvalue, value)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.lvalue = lvalue;\n\t\tthis.value = value;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<\");\n\t\tout.push(this.constructor.name);\n\t\tout.push(\" lvalue=\");\n\t\tout.push(_repr(this.lvalue));\n\t\tout.push(\" value=\");\n\t\tthis.value._repr(out);\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet value = this.value._handle_eval(context);\n\t\tlet items = _unpackvar(this.lvalue, value);\n\t\tfor (let [lvalue, value] of items)\n\t\t\tlvalue._handle_eval_set(context, value);\n\t}\n};\n\nSetVarAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"lvalue\", \"value\"]);\n\nexport class ModifyVarAST extends SetVarAST\n{\n\t_eval(context)\n\t{\n\t\tlet value = this.value._handle_eval(context);\n\t\tlet items = _unpackvar(this.lvalue, value);\n\t\tfor (let [lvalue, value] of items)\n\t\t\tlvalue._handle_eval_modify(context, this._operator, value);\n\t}\n};\n\nexport class AddVarAST extends ModifyVarAST\n{\n};\n\nAddVarAST.prototype._operator = AddAST.prototype;\n\nexport class SubVarAST extends ModifyVarAST\n{\n};\n\nSubVarAST.prototype._operator = SubAST.prototype;\n\nexport class MulVarAST extends ModifyVarAST\n{\n};\n\nMulVarAST.prototype._operator = MulAST.prototype;\n\nexport class TrueDivVarAST extends ModifyVarAST\n{\n};\n\nTrueDivVarAST.prototype._operator = TrueDivAST.prototype;\n\nexport class FloorDivVarAST extends ModifyVarAST\n{\n};\n\nFloorDivVarAST.prototype._operator = FloorDivAST.prototype;\n\nexport class ModVarAST extends ModifyVarAST\n{\n};\n\nModVarAST.prototype._operator = ModAST.prototype;\n\nexport class ShiftLeftVarAST extends ModifyVarAST\n{\n};\n\nShiftLeftVarAST.prototype._operator = ShiftLeftAST.prototype;\n\nexport class ShiftRightVarAST extends ModifyVarAST\n{\n};\n\nShiftRightVarAST.prototype._operator = ShiftRightAST.prototype;\n\nexport class BitAndVarAST extends ModifyVarAST\n{\n};\n\nBitAndVarAST.prototype._operator = BitAndAST.prototype;\n\nexport class BitXOrVarAST extends ModifyVarAST\n{\n};\n\nBitXOrVarAST.prototype._operator = BitXOrAST.prototype;\n\nexport class BitOrVarAST extends ModifyVarAST\n{\n};\n\nBitOrVarAST.prototype._operator = BitOrAST.prototype;\n\nexport class BlockAST extends CodeAST\n{\n\tconstructor(template, pos)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.content = [];\n\t}\n\n\t_eval(context)\n\t{\n\t\tfor (let item of this.content)\n\t\t\titem._handle_eval(context);\n\t}\n\n\t_str(out)\n\t{\n\t\tif (this.content.length)\n\t\t{\n\t\t\tfor (let item of this.content)\n\t\t\t{\n\t\t\t\titem._str(out);\n\t\t\t\tout.push(0);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tout.push(\"pass\");\n\t\t\tout.push(0);\n\t\t}\n\t}\n};\n\nBlockAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"content\"]);\n\nexport class ForBlockAST extends BlockAST\n{\n\tconstructor(template, pos, varname, container)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.varname = varname;\n\t\tthis.container = container;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<ForBlockAST\");\n\t\tout.push(\" varname=\");\n\t\tout.push(_repr(this.varname));\n\t\tout.push(\" container=\");\n\t\tthis.container._repr(out);\n\t\tout.push(\">\");\n\t}\n\n\t_str_varname(out, varname)\n\t{\n\t\tif (_islist(varname))\n\t\t{\n\t\t\tout.push(\"(\");\n\t\t\tlet first = truel\n\t\t\tfor (let subname of varname)\n\t\t\t{\n\t\t\t\tif (first)\n\t\t\t\t\tfirst = false;\n\t\t\t\telse\n\t\t\t\t\tout.push(\", \");\n\t\t\t\tthis._str_varname(out, subname);\n\t\t\t}\n\t\t\tif (varname.length == 1)\n\t\t\t\tout.push(\",\");\n\t\t\tout.push(\")\");\n\t\t}\n\t\telse\n\t\t\tvarname._str(out);\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet container = this.container._handle_eval(context);\n\n\t\tfor (let iter = _iter(container);;)\n\t\t{\n\t\t\tlet value = iter.next();\n\t\t\tif (value.done)\n\t\t\t\tbreak;\n\t\t\tlet varitems = _unpackvar(this.varname, value.value);\n\t\t\tfor (let [lvalue, value] of varitems)\n\t\t\t\tlvalue._handle_eval_set(context, value);\n\t\t\ttry\n\t\t\t{\n\t\t\t\t// We can't call _handle_eval() here, as this would in turn call this function again, leading to infinite recursion\n\t\t\t\t// But we don't have to, as wrapping original exception in ``Error`` has already been done by the lower levels\n\t\t\t\tsuper._eval(context);\n\t\t\t}\n\t\t\tcatch (exc)\n\t\t\t{\n\t\t\t\tif (exc instanceof BreakException)\n\t\t\t\t\tbreak;\n\t\t\t\telse if (exc instanceof ContinueException)\n\t\t\t\t\t;\n\t\t\t\telse\n\t\t\t\t\tthrow exc;\n\t\t\t}\n\t\t}\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(\"for \");\n\t\tthis._str_varname(out, this.varname);\n\t\tout.push(\" in \");\n\t\tthis.container._str(out);\n\t\tout.push(\":\");\n\t\tout.push(+1);\n\t\tBlockAST.prototype._str.call(this, out);\n\t\tout.push(-1);\n\t}\n};\n\nForBlockAST.prototype._ul4onattrs = BlockAST.prototype._ul4onattrs.concat([\"varname\", \"container\"]);\n\nexport class WhileBlockAST extends BlockAST\n{\n\tconstructor(template, pos, condition)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.condition = condition;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<WhileAST\");\n\t\tout.push(\" condition=\");\n\t\tthis.condition._repr(out);\n\t\tout.push(\">\");\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(\"while \");\n\t\tthis.condition._repr(out);\n\t\tout.push(\":\");\n\t\tout.push(+1);\n\t\tBlockAST.prototype._str.call(this, out);\n\t\tout.push(-1);\n\t}\n\n\t_eval(context)\n\t{\n\t\twhile (true)\n\t\t{\n\t\t\tlet cond = this.condition._handle_eval(context);\n\t\t\tif (!_bool(cond))\n\t\t\t\tbreak;\n\t\t\ttry\n\t\t\t{\n\t\t\t\t// We can't call _handle_eval() here, as this would in turn call this function again, leading to infinite recursion\n\t\t\t\t// But we don't have to, as wrapping the original exception in ``Error`` has already been done by the lower levels\n\t\t\t\tsuper._eval(context);\n\t\t\t}\n\t\t\tcatch (exc)\n\t\t\t{\n\t\t\t\tif (exc instanceof BreakException)\n\t\t\t\t\tbreak;\n\t\t\t\telse if (exc instanceof ContinueException)\n\t\t\t\t\t;\n\t\t\t\telse\n\t\t\t\t\tthrow exc;\n\t\t\t}\n\t\t}\n\t}\n};\n\nWhileBlockAST.prototype._ul4onattrs = BlockAST.prototype._ul4onattrs.concat([\"condition\"]);\n\nexport class BreakAST extends CodeAST\n{\n\t_eval(context)\n\t{\n\t\tthrow new BreakException();\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(\"break\");\n\t\tout.push(0);\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<BreakAST>\");\n\t}\n};\n\nexport class ContinueAST extends CodeAST\n{\n\t_eval(context)\n\t{\n\t\tthrow new ContinueException();\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(\"continue\");\n\t\tout.push(0);\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<ContinueAST>\");\n\t}\n};\n\nexport class CondBlockAST extends BlockAST\n{\n\t_eval(context)\n\t{\n\t\tfor (let block of this.content)\n\t\t{\n\t\t\tlet execute = block._execute(context);\n\t\t\tif (execute)\n\t\t\t{\n\t\t\t\tblock._handle_eval(context);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n};\n\nexport class ConditionalBlockAST extends  BlockAST\n{\n\tconstructor(template, pos, condition)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.condition = condition;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<\");\n\t\tout.push(this.constructor.name);\n\t\tout.push(\" condition=\");\n\t\tthis.condition._repr(out);\n\t\tout.push(\">\");\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(this._strname);\n\t\tout.push(\" \");\n\t\tthis.condition._str(out);\n\t\tout.push(\":\");\n\t\tout.push(+1);\n\t\tBlockAST.prototype._str.call(this, out);\n\t\tout.push(-1);\n\t}\n\n\t_execute(context)\n\t{\n\t\tlet cond = this.condition._handle_eval(context);\n\t\tlet result = _bool(cond);\n\t\treturn result;\n\t}\n};\n\nConditionalBlockAST.prototype._ul4onattrs = BlockAST.prototype._ul4onattrs.concat([\"condition\"]);\n\nexport class IfBlockAST extends ConditionalBlockAST\n{\n};\n\nIfBlockAST.prototype._strname = \"if\";\n\nexport class ElIfBlockAST extends ConditionalBlockAST\n{\n};\n\nElIfBlockAST.prototype._strname = \"else if\";\n\nexport class ElseBlockAST extends BlockAST\n{\n\t_repr(out)\n\t{\n\t\tout.push(\"<ElseAST\");\n\t\tout.push(\">\");\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(\"else:\");\n\t\tout.push(+1);\n\t\tBlockAST.prototype._str.call(this, out);\n\t\tout.push(-1);\n\t}\n\n\t_execute(context)\n\t{\n\t\treturn true;\n\t}\n};\n\nexport class Template extends BlockAST\n{\n\tconstructor(template, pos, source, name, whitespace, startdelim, enddelim, signature)\n\t{\n\t\tsuper(template, pos);\n\t\tthis._source = source;\n\t\tthis.name = name;\n\t\tthis.whitespace = whitespace;\n\t\tthis.startdelim = startdelim;\n\t\tthis.enddelim = enddelim;\n\t\tthis.docpos = null;\n\t\tthis.signature = signature;\n\t\tthis._asts = null;\n\t\tthis._ul4_callsignature = signature;\n\t\tthis._ul4_rendersignature = signature;\n\t\tthis.parenttemplate = null;\n\t}\n\n\t__getattr__(attrname)\n\t{\n\t\tlet self = this;\n\t\tswitch (attrname)\n\t\t{\n\t\t\tcase \"content\":\n\t\t\t\treturn this.content;\n\t\t\tcase \"source\":\n\t\t\t\treturn this.source;\n\t\t\tcase \"name\":\n\t\t\t\treturn this.name;\n\t\t\tcase \"whitespace\":\n\t\t\t\treturn this.whitespace;\n\t\t\tcase \"startdelim\":\n\t\t\t\treturn this.startdelim;\n\t\t\tcase \"enddelim\":\n\t\t\t\treturn this.enddelim;\n\t\t\tcase \"doc\":\n\t\t\t\treturn this.doc();\n\t\t\tcase \"signature\":\n\t\t\t\treturn this.signature;\n\t\t\tcase \"parenttemplate\":\n\t\t\t\treturn this.parenttemplate;\n\t\t\tcase \"render\":\n\t\t\t\tlet render = function render(context, vars){ self._renderbound(context, vars); };\n\t\t\t\texpose(render, this.signature, {needscontext: true, needsobject: true});\n\t\t\t\treturn render;\n\t\t\tcase \"renders\":\n\t\t\t\tlet renders = function renders(context, vars){ return self._rendersbound(context, vars); };\n\t\t\t\texpose(renders, this.signature, {needscontext: true, needsobject: true});\n\t\t\t\treturn renders;\n\t\t\tdefault:\n\t\t\t\treturn super.__getattr__(attrname);\n\t\t}\n\t}\n\n\tul4ondump(encoder)\n\t{\n\t\tlet signature;\n\t\tencoder.dump(api_version);\n\t\tencoder.dump(this.name);\n\t\tencoder.dump(this._source);\n\t\tencoder.dump(this.whitespace);\n\t\tencoder.dump(this.startdelim);\n\t\tencoder.dump(this.enddelim);\n\t\tencoder.dump(this.docpos);\n\t\tencoder.dump(this.parenttemplate);\n\t\tif (this.signature === null || this.signature instanceof SignatureAST)\n\t\t\tsignature = this.signature;\n\t\telse\n\t\t{\n\t\t\tsignature = [];\n\t\t\tfor (let arg of this.signature.args)\n\t\t\t{\n\t\t\t\tif (typeof(arg.defaultValue) === \"undefined\")\n\t\t\t\t\tsignature.push(arg.name);\n\t\t\t\telse\n\t\t\t\t\tsignature.push(arg.name+\"=\", arg.defaultValue);\n\t\t\t}\n\t\t\tif (this.signature.remargs !== null)\n\t\t\t\tsignature.push(\"*\" + this.signature.remargs);\n\t\t\tif (this.signature.remkwargs !== null)\n\t\t\t\tsignature.push(\"**\" + this.signature.remkwargs);\n\t\t}\n\t\tencoder.dump(signature);\n\t\tsuper.ul4ondump(encoder);\n\t}\n\n\tul4onload(decoder)\n\t{\n\t\tlet loaded_api_version = decoder.load();\n\t\tlet signature;\n\n\t\tif (loaded_api_version === null)\n\t\t\tthrow new ValueError(\"UL4ON doesn't support templates in 'source' format in Javascript implementation\");\n\n\t\tif (loaded_api_version !== api_version)\n\t\t\tthrow new ValueError(\"invalid version, expected \" + api_version + \", got \" + loaded_api_version);\n\n\t\tthis.name = decoder.load();\n\t\tthis._source = decoder.load();\n\t\tthis.whitespace = decoder.load();\n\t\tthis.startdelim = decoder.load();\n\t\tthis.enddelim = decoder.load();\n\t\tthis.docpos = decoder.load();\n\t\tthis.parenttemplate = decoder.load();\n\t\tsignature = decoder.load();\n\t\tif (_islist(signature))\n\t\t\tsignature = new Signature(...signature);\n\t\tthis.signature = signature;\n\t\tthis._ul4_callsignature = signature;\n\t\tthis._ul4_rendersignature = signature;\n\t\tsuper.ul4onload(decoder);\n\t}\n\n\tloads(string)\n\t{\n\t\treturn loads(string);\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet signature = null;\n\t\tif (this.signature !== null)\n\t\t\tsignature = this.signature._handle_eval(context);\n\t\tlet closure = new TemplateClosure(this, signature, context.vars);\n\t\tcontext.set(this.name, closure);\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<Template\");\n\t\tif (this.name !== null)\n\t\t{\n\t\t\tout.push(\" name=\");\n\t\t\tout.push(_repr(this.name));\n\t\t}\n\t\tout.push(\" whitespace=\");\n\t\tout.push(_repr(this.whitespace));\n\t\tif (this.startdelim !== \"<?\")\n\t\t{\n\t\t\tout.push(\" startdelim=\");\n\t\t\tout.push(_repr(this.startdelim));\n\t\t}\n\t\tif (this.enddelim !== \"?>\")\n\t\t{\n\t\t\tout.push(\" enddelim=\");\n\t\t\tout.push(_repr(this.enddelim));\n\t\t}\n\t\tout.push(\">\");\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(\"def \");\n\t\tout.push(this.name ? this.name : \"unnamed\");\n\t\tout.push(\":\");\n\t\tout.push(+1);\n\t\tBlockAST.prototype._str.call(this, out);\n\t\tout.push(-1);\n\t}\n\n\t_renderbound(context, vars)\n\t{\n\t\tlet localcontext = context.clone();\n\t\tlocalcontext.vars = vars;\n\t\ttry\n\t\t{\n\t\t\tBlockAST.prototype._eval.call(this, localcontext);\n\t\t}\n\t\tcatch (exc)\n\t\t{\n\t\t\tif (!(exc instanceof ReturnException))\n\t\t\t\tthrow exc;\n\t\t}\n\t}\n\n\t__render__(context, vars)\n\t{\n\t\tthis._renderbound(context, vars);\n\t}\n\n\trender(context, vars)\n\t{\n\t\tthis._renderbound(context, vars);\n\t}\n\n\t_rendersbound(context, vars)\n\t{\n\t\tlet localcontext = context.replaceoutput();\n\t\tthis._renderbound(localcontext, vars);\n\t\treturn localcontext.getoutput();\n\t}\n\n\trenders(vars)\n\t{\n\t\tvars = vars || {};\n\t\tlet context = new Context();\n\t\tif (this.signature !== null)\n\t\t\tvars = this.signature.bindObject(this.name, [], vars);\n\t\treturn this._rendersbound(context, vars);\n\t}\n\n\tdoc()\n\t{\n\t\treturn this.docpos != null ? this.docpos.of(this._source) : null;\n\t}\n\n\t_callbound(context, vars)\n\t{\n\t\tlet localcontext = context.clone();\n\t\tlocalcontext.vars = vars;\n\t\ttry\n\t\t{\n\t\t\tBlockAST.prototype._eval.call(this, localcontext);\n\t\t}\n\t\tcatch (exc)\n\t\t{\n\t\t\tif (exc instanceof ReturnException)\n\t\t\t\treturn exc.result;\n\t\t\telse\n\t\t\t\tthrow exc;\n\t\t}\n\t\treturn null;\n\t}\n\n\tcall(vars)\n\t{\n\t\tvars = vars || {};\n\t\tlet context = new Context();\n\t\tif (this.signature !== null)\n\t\t\tvars = this.signature.bindObject(this.name, [], vars);\n\t\treturn this._callbound(context, vars);\n\t}\n\n\t__call__(context, vars)\n\t{\n\t\treturn this._callbound(context, vars);\n\t}\n\n\tul4type()\n\t{\n\t\treturn \"template\";\n\t}\n};\n\nTemplate.prototype._ul4_callneedsobject = true;\nTemplate.prototype._ul4_callneedscontext = true;\nTemplate.prototype._ul4_renderneedsobject = true;\nTemplate.prototype._ul4_renderneedscontext = true;\n\nexport class SignatureAST extends CodeAST\n{\n\tconstructor(template, pos)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.params = [];\n\t}\n\n\tul4ondump(encoder)\n\t{\n\t\tsuper.ul4ondump(encoder);\n\n\t\tlet dump = [];\n\n\t\tfor (let param of this.params)\n\t\t{\n\t\t\tif (param[1] === null)\n\t\t\t\tdump.push(param[0]);\n\t\t\telse\n\t\t\t\tdump.push(param);\n\t\t}\n\t\tencoder.dump(dump);\n\t}\n\n\tul4onload(decoder)\n\t{\n\t\tsuper.ul4onload(decoder);\n\t\tlet dump = decoder.load();\n\t\tthis.params = [];\n\t\tfor (let param of dump)\n\t\t{\n\t\t\tif (typeof(param) === \"string\")\n\t\t\t\tthis.params.push([param, null]);\n\t\t\telse\n\t\t\t\tthis.params.push(param);\n\t\t}\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet args = [];\n\t\tfor (let param of this.params)\n\t\t{\n\t\t\tif (param[1] === null)\n\t\t\t\targs.push(param[0]);\n\t\t\telse\n\t\t\t{\n\t\t\t\targs.push(param[0] + \"=\");\n\t\t\t\targs.push(param[1]._handle_eval(context));\n\t\t\t}\n\t\t}\n\t\treturn new Signature(...args);\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<\");\n\t\tout.push(this.constructor.name);\n\t\tout.push(\" params=\");\n\t\tthis.params._repr(out);\n\t\tout.push(\">\");\n\t}\n};\n\nexport class TemplateClosure extends Proto\n{\n\tconstructor(template, signature, vars)\n\t{\n\t\tsuper();\n\t\tthis.template = template;\n\t\tthis.signature = signature;\n\t\tthis.vars = vars;\n\t\tthis._ul4_callsignature = signature;\n\t\tthis._ul4_rendersignature = signature;\n\t\t// Copy over the required attribute from the template\n\t\tthis.name = template.name;\n\t\tthis.tag = template.tag;\n\t\tthis.endtag = template.endtag;\n\t\tthis._source = template._source;\n\t\tthis.startdelim = template.startdelim;\n\t\tthis.enddelim = template.enddelim;\n\t\tthis.docpos = template.docpos;\n\t\tthis.content = template.content;\n\t}\n\n\t__render__(context, vars)\n\t{\n\t\tthis.template._renderbound(context, _extend(this.vars, vars));\n\t}\n\n\trender(context, vars)\n\t{\n\t\tthis.template._renderbound(context, _extend(this.vars, vars));\n\t}\n\n\t__call__(context, vars)\n\t{\n\t\treturn this.template._callbound(context, _extend(this.vars, vars));\n\t}\n\n\t_renderbound(context, vars)\n\t{\n\t\tthis.template._renderbound(context, _extend(this.vars, vars));\n\t}\n\n\t_rendersbound(context, vars)\n\t{\n\t\treturn this.template._rendersbound(context, _extend(this.vars, vars));\n\t}\n\n\t__getattr__(attrname)\n\t{\n\t\tlet self = this;\n\t\tswitch (attrname)\n\t\t{\n\t\t\tcase \"render\":\n\t\t\t\tlet render = function render(context, vars){ self._renderbound(context, vars); };\n\t\t\t\texpose(render, this.signature, {needscontext: true, needsobject: true});\n\t\t\t\treturn render;\n\t\t\tcase \"renders\":\n\t\t\t\tlet renders = function renders(context, vars){ return self._rendersbound(context, vars); };\n\t\t\t\texpose(renders, this.signature, {needscontext: true, needsobject: true});\n\t\t\t\treturn renders;\n\t\t\tcase \"signature\":\n\t\t\t\treturn this.signature;\n\t\t\tdefault:\n\t\t\t\treturn this.template.__getattr__(attrname);\n\t\t}\n\t}\n\n\tul4type()\n\t{\n\t\treturn \"template\";\n\t}\n};\n\nTemplateClosure.prototype._ul4_callneedsobject = true;\nTemplateClosure.prototype._ul4_callneedscontext = true;\nTemplateClosure.prototype._ul4_renderneedsobject = true;\nTemplateClosure.prototype._ul4_renderneedscontext = true;\n\n// Create a color object from the red, green, blue and alpha values ``r``, ``g``, ``b`` and ``b``\nexport function _rgb(r, g, b, a)\n{\n\treturn new Color(255*r, 255*g, 255*b, 255*a);\n};\n\n// Convert ``obj`` to a string and escape the characters ``&``, ``<``, ``>``, ``'`` and ``\"`` with their XML character/entity reference\nexport function _xmlescape(obj)\n{\n\tobj = _str(obj);\n\tobj = obj.replace(/&/g, \"&amp;\");\n\tobj = obj.replace(/</g, \"&lt;\");\n\tobj = obj.replace(/>/g, \"&gt;\");\n\tobj = obj.replace(/'/g, \"&#39;\");\n\tobj = obj.replace(/\"/g, \"&quot;\");\n\treturn obj;\n};\n\n// Convert ``obj`` to a string suitable for output into a CSV file\nexport function _csv(obj)\n{\n\tif (obj === null)\n\t\treturn \"\";\n\telse if (typeof(obj) !== \"string\")\n\t\tobj = _repr(obj);\n\tif (obj.indexOf(\",\") !== -1 || obj.indexOf('\"') !== -1 || obj.indexOf(\"\\n\") !== -1)\n\t\tobj = '\"' + obj.replace(/\"/g, '\"\"') + '\"';\n\treturn obj;\n};\n\n// Return a string containing one character with the codepoint ``i``\nexport function _chr(i)\n{\n\tif (typeof(i) != \"number\")\n\t\tthrow new TypeError(\"chr() requires an int\");\n\treturn String.fromCharCode(i);\n};\n\n// Return the codepoint for the one and only character in the string ``c``\nexport function _ord(c)\n{\n\tif (typeof(c) != \"string\" || c.length != 1)\n\t\tthrow new TypeError(\"ord() requires a string of length 1\");\n\treturn c.charCodeAt(0);\n};\n\n// Convert an integer to a hexadecimal string\nexport function _hex(number)\n{\n\tif (typeof(number) != \"number\")\n\t\tthrow new TypeError(\"hex() requires an int\");\n\tif (number < 0)\n\t\treturn \"-0x\" + number.toString(16).substr(1);\n\telse\n\t\treturn \"0x\" + number.toString(16);\n};\n\n// Convert an integer to a octal string\nexport function _oct(number)\n{\n\tif (typeof(number) != \"number\")\n\t\tthrow new TypeError(\"oct() requires an int\");\n\tif (number < 0)\n\t\treturn \"-0o\" + number.toString(8).substr(1);\n\telse\n\t\treturn \"0o\" + number.toString(8);\n};\n\n// Convert an integer to a binary string\nexport function _bin(number)\n{\n\tif (typeof(number) != \"number\")\n\t\tthrow new TypeError(\"bin() requires an int\");\n\tif (number < 0)\n\t\treturn \"-0b\" + number.toString(2).substr(1);\n\telse\n\t\treturn \"0b\" + number.toString(2);\n};\n\n// Return the minimum value\nexport function _min(obj)\n{\n\tif (obj.length == 0)\n\t\tthrow new ArgumentError(\"min() requires at least 1 argument, 0 given\");\n\telse if (obj.length == 1)\n\t\tobj = obj[0];\n\tlet iter = _iter(obj);\n\tlet result;\n\tlet first = true;\n\twhile (true)\n\t{\n\t\tlet item = iter.next();\n\t\tif (item.done)\n\t\t{\n\t\t\tif (first)\n\t\t\t\tthrow new ValueError(\"min() argument is an empty sequence!\");\n\t\t\treturn result;\n\t\t}\n\t\tif (first || (item.value < result))\n\t\t\tresult = item.value;\n\t\tfirst = false;\n\t}\n};\n\n// Return the maximum value\nexport function _max(obj)\n{\n\tif (obj.length == 0)\n\t\tthrow new ArgumentError(\"max() requires at least 1 argument, 0 given\");\n\telse if (obj.length == 1)\n\t\tobj = obj[0];\n\tlet iter = _iter(obj);\n\tlet result;\n\tlet first = true;\n\twhile (true)\n\t{\n\t\tlet item = iter.next();\n\t\tif (item.done)\n\t\t{\n\t\t\tif (first)\n\t\t\t\tthrow new ValueError(\"max() argument is an empty sequence!\");\n\t\t\treturn result;\n\t\t}\n\t\tif (first || (item.value > result))\n\t\t\tresult = item.value;\n\t\tfirst = false;\n\t}\n};\n\n// Return the of the values from the iterable starting with ``start`` (default ``0``)\nexport function _sum(iterable, start=0)\n{\n\tfor (let iter = _iter(iterable);;)\n\t{\n\t\tlet item = iter.next();\n\t\tif (item.done)\n\t\t\tbreak;\n\t\tstart += item.value;\n\t}\n\treturn start;\n};\n\n// Return the first value produced by iterating through ``iterable`` (defaulting to ``defaultValue`` if the iterator is empty)\nexport function _first(iterable, defaultValue=null)\n{\n\tlet item = _iter(iterable).next();\n\treturn item.done ? defaultValue : item.value;\n};\n\n// Return the last value produced by iterating through ``iterable`` (defaulting to ``defaultValue`` if the iterator is empty)\nexport function _last(iterable, defaultValue=null)\n{\n\tlet value = defaultValue;\n\n\tfor (let iter = _iter(iterable);;)\n\t{\n\t\tlet item = iter.next();\n\t\tif (item.done)\n\t\t\tbreak;\n\t\tvalue = item.value;\n\t}\n\treturn value;\n};\n\n// Return a sorted version of ``iterable``\nexport function _sorted(context, iterable, key=null, reverse=false)\n{\n\tif (key === null)\n\t{\n\t\t// FIXME: stability\n\t\tlet cmp = reverse ? function cmp(a, b)\n\t\t{\n\t\t\treturn -_cmp(\"<=>\", a, b);\n\t\t} : function cmp(a, b)\n\t\t{\n\t\t\treturn _cmp(\"<=>\", a, b);\n\t\t};\n\t\tlet result = _list(iterable);\n\t\tresult.sort(cmp);\n\t\treturn result;\n\t}\n\telse\n\t{\n\t\tlet sort = [];\n\n\t\tfor (let i = 0, iter = _iter(iterable);;++i)\n\t\t{\n\t\t\tlet item = iter.next();\n\t\t\tif (item.done)\n\t\t\t\tbreak;\n\t\t\tlet keyvalue = _call(context, key, [item.value], {});\n\t\t\t// For a stable sorting we have to use the negative index if\n\t\t\t// reverse sorting is specified\n\t\t\tsort.push([keyvalue, reverse ? -i : i, item.value]);\n\t\t}\n\t\tfunction cmp(s1, s2)\n\t\t{\n\t\t\tlet res = _cmp(\"<=>\", s1[0], s2[0]);\n\t\t\tif (res)\n\t\t\t\treturn reverse ? -res : res;\n\t\t\tres = _cmp(\"<=>\", s1[1], s2[1]);\n\t\t\treturn reverse ? -res : res;\n\t\t};\n\n\t\tsort.sort(cmp);\n\n\t\tlet result = [];\n\t\tfor (let item of sort)\n\t\t\tresult.push(item[2]);\n\t\treturn result;\n\t}\n};\n\n// Return a iterable object iterating from ``start`` up to (but not including) ``stop`` with a step size of ``step``\nexport function _range(args)\n{\n\tlet start, stop, step;\n\tif (args.length < 1)\n\t\tthrow new ArgumentError(\"required range() argument missing\");\n\telse if (args.length > 3)\n\t\tthrow new ArgumentError(\"range() expects at most 3 positional arguments, \" + args.length + \" given\");\n\telse if (args.length == 1)\n\t{\n\t\tstart = 0;\n\t\tstop = args[0];\n\t\tstep = 1;\n\t}\n\telse if (args.length == 2)\n\t{\n\t\tstart = args[0];\n\t\tstop = args[1];\n\t\tstep = 1;\n\t}\n\telse if (args.length == 3)\n\t{\n\t\tstart = args[0];\n\t\tstop = args[1];\n\t\tstep = args[2];\n\t}\n\tlet lower, higher;\n\tif (step === 0)\n\t\tthrow new ValueError(\"range() requires a step argument != 0\");\n\telse if (step > 0)\n\t{\n\t\tlower = start;\n\t\thigher = stop;\n\t}\n\telse\n\t{\n\t\tlower = stop;\n\t\thigher = start;\n\t}\n\tlet length = (lower < higher) ? Math.floor((higher - lower - 1)/Math.abs(step)) + 1 : 0;\n\n\treturn {\n\t\tindex: 0,\n\t\tnext: function()\n\t\t{\n\t\t\tif (this.index >= length)\n\t\t\t\treturn {done: true};\n\t\t\treturn {value: start + (this.index++) * step, done: false};\n\t\t}\n\t};\n};\n\n// Return a iterable object returning a slice from the argument\nexport function _slice(args)\n{\n\tlet iterable, start, stop, step;\n\tif (args.length < 2)\n\t\tthrow new ArgumentError(\"required slice() argument missing\");\n\telse if (args.length > 4)\n\t\tthrow new ArgumentError(\"slice() expects at most 4 positional arguments, \" + args.length + \" given\");\n\telse if (args.length == 2)\n\t{\n\t\titerable = args[0];\n\t\tstart = 0;\n\t\tstop = args[1];\n\t\tstep = 1;\n\t}\n\telse if (args.length == 3)\n\t{\n\t\titerable = args[0];\n\t\tstart = args[1] !== null ? args[1] : 0;\n\t\tstop = args[2];\n\t\tstep = 1;\n\t}\n\telse if (args.length == 4)\n\t{\n\t\titerable = args[0];\n\t\tstart = args[1] !== null ? args[1] : 0;\n\t\tstop = args[2];\n\t\tstep = args[3] !== null ? args[3] : 1;\n\t}\n\tif (start < 0)\n\t\tthrow new ValueError(\"slice() requires a start argument >= 0\");\n\tif (stop < 0)\n\t\tthrow new ValueError(\"slice() requires a stop argument >= 0\");\n\tif (step <= 0)\n\t\tthrow new ValueError(\"slice() requires a step argument > 0\");\n\n\tlet next = start, count = 0;\n\tlet iter = _iter(iterable);\n\treturn {\n\t\tnext: function() {\n\t\t\tlet result;\n\t\t\twhile (count < next)\n\t\t\t{\n\t\t\t\tresult = iter.next();\n\t\t\t\tif (result.done)\n\t\t\t\t\treturn result;\n\t\t\t\t++count;\n\t\t\t}\n\t\t\tif (stop !== null && count >= stop)\n\t\t\t\treturn {done: true};\n\t\t\tresult = iter.next();\n\t\t\tif (result.done)\n\t\t\t\treturn result;\n\t\t\t++count;\n\t\t\tnext += step;\n\t\t\tif (stop !== null && next > stop)\n\t\t\t\tnext = stop;\n\t\t\treturn result;\n\t\t}\n\t};\n};\n\n// ``%`` escape unsafe characters in the string ``string``\nexport function _urlquote(string)\n{\n\treturn encodeURIComponent(string);\n};\n\n// The inverse function of ``urlquote``\nexport function _urlunquote(string)\n{\n\treturn decodeURIComponent(string);\n};\n\n// Return a reverse iterator over ``sequence``\nexport function _reversed(sequence)\n{\n\tif (typeof(sequence) != \"string\" && !_islist(sequence)) // We don't have to materialize strings or lists\n\t\tsequence = _list(sequence);\n\treturn {\n\t\tindex: sequence.length-1,\n\t\tnext: function() {\n\t\t\treturn this.index >= 0 ? {value: sequence[this.index--], done: false} : {done: true};\n\t\t}\n\t};\n};\n\n// Returns a random number in the interval ``[0;1[``\nexport function _random()\n{\n\treturn Math.random();\n};\n\n// Return a randomly select item from ``range(start, stop, step)``\nexport function _randrange(args)\n{\n\tlet start, stop, step;\n\tif (args.length < 1)\n\t\tthrow new ArgumentError(\"required randrange() argument missing\");\n\telse if (args.length > 3)\n\t\tthrow new ArgumentError(\"randrange() expects at most 3 positional arguments, \" + args.length + \" given\");\n\telse if (args.length == 1)\n\t{\n\t\tstart = 0;\n\t\tstop = args[0];\n\t\tstep = 1;\n\t}\n\telse if (args.length == 2)\n\t{\n\t\tstart = args[0];\n\t\tstop = args[1];\n\t\tstep = 1;\n\t}\n\telse if (args.length == 3)\n\t{\n\t\tstart = args[0];\n\t\tstop = args[1];\n\t\tstep = args[2];\n\t}\n\tlet width = stop-start;\n\n\tlet value = Math.random();\n\n\tlet n;\n\tif (step > 0)\n\t\tn = Math.floor((width + step - 1) / step);\n\telse if (step < 0)\n\t\tn = Math.floor((width + step + 1) / step);\n\telse\n\t\tthrow new ValueError(\"randrange() requires a step argument != 0\");\n\treturn start + step*Math.floor(value * n);\n};\n\n// Return a random item/char from the list/string ``sequence``\nexport function _randchoice(sequence)\n{\n\tlet iscolor = _iscolor(sequence);\n\tif (typeof(sequence) !== \"string\" && !_islist(sequence) && !iscolor)\n\t\tthrow new TypeError(\"randchoice() requires a string or list\");\n\tif (iscolor)\n\t\tsequence = _list(sequence);\n\treturn sequence[Math.floor(Math.random() * sequence.length)];\n};\n\n// Round a number ``x`` to ``digits`` decimal places (may be negative)\nexport function _round(x, digits=0)\n{\n\tif (digits)\n\t{\n\t\tlet threshold = Math.pow(10, digits);\n\t\treturn Math.round(x*threshold)/threshold;\n\t}\n\telse\n\t\treturn Math.round(x);\n};\n\n// Return a hex-encode MD5 hash of the argument\n// This uses the md5 function from https://github.com/blueimp/JavaScript-MD5\nimport md5 from 'blueimp-md5';\n\nexport function _md5(string)\n{\n\treturn md5(string);\n}\n\n// Return an iterator over ``[index, item]`` lists from the iterable object ``iterable``. ``index`` starts at ``start`` (defaulting to 0)\nexport function _enumerate(iterable, start=0)\n{\n\treturn {\n\t\titer: _iter(iterable),\n\t\tindex: start,\n\t\tnext: function() {\n\t\t\tlet item = this.iter.next();\n\t\t\treturn item.done ? item : {value: [this.index++, item.value], done: false};\n\t\t}\n\t};\n};\n\n// Return an iterator over ``[isfirst, item]`` lists from the iterable object ``iterable`` (``isfirst`` is true for the first item, false otherwise)\nexport function _isfirst(iterable)\n{\n\tlet iter = _iter(iterable);\n\tlet isfirst = true;\n\treturn {\n\t\tnext: function() {\n\t\t\tlet item = iter.next();\n\t\t\tlet result = item.done ? item : {value: [isfirst, item.value], done: false};\n\t\t\tisfirst = false;\n\t\t\treturn result;\n\t\t}\n\t};\n};\n\n// Return an iterator over ``[islast, item]`` lists from the iterable object ``iterable`` (``islast`` is true for the last item, false otherwise)\nexport function _islast(iterable)\n{\n\tlet iter = _iter(iterable);\n\tlet lastitem = iter.next();\n\treturn {\n\t\tnext: function() {\n\t\t\tif (lastitem.done)\n\t\t\t\treturn lastitem;\n\t\t\tlet item = iter.next();\n\t\t\tlet result = {value: [item.done, lastitem.value], done: false};\n\t\t\tlastitem = item;\n\t\t\treturn result;\n\t\t}\n\t};\n};\n\n// Return an iterator over ``[isfirst, islast, item]`` lists from the iterable object ``iterable`` (``isfirst`` is true for the first item, ``islast`` is true for the last item. Both are false otherwise)\nexport function _isfirstlast(iterable)\n{\n\tlet iter = _iter(iterable);\n\tlet isfirst = true;\n\tlet lastitem = iter.next();\n\treturn {\n\t\tnext: function() {\n\t\t\tif (lastitem.done)\n\t\t\t\treturn lastitem;\n\t\t\tlet item = iter.next();\n\t\t\tlet result = {value: [isfirst, item.done, lastitem.value], done: false};\n\t\t\tlastitem = item;\n\t\t\tisfirst = false;\n\t\t\treturn result;\n\t\t}\n\t};\n};\n\n// Return an iterator over ``[index, isfirst, islast, item]`` lists from the iterable object ``iterable`` (``isfirst`` is true for the first item, ``islast`` is true for the last item. Both are false otherwise)\nexport function _enumfl(iterable, start=0)\n{\n\tlet iter = _iter(iterable);\n\tlet i = start;\n\tlet isfirst = true;\n\tlet lastitem = iter.next();\n\treturn {\n\t\tnext: function() {\n\t\t\tif (lastitem.done)\n\t\t\t\treturn lastitem;\n\t\t\tlet item = iter.next();\n\t\t\tlet result = {value: [i++, isfirst, item.done, lastitem.value], done: false};\n\t\t\tlastitem = item;\n\t\t\tisfirst = false;\n\t\t\treturn result;\n\t\t}\n\t};\n};\n\n// Return an iterator over lists, where the i'th list consists of all i'th items from the arguments (terminating when the shortest argument ends)\nexport function _zip(iterables)\n{\n\tlet result;\n\tif (iterables.length)\n\t{\n\t\tlet iters = [];\n\t\tfor (let iterable of iterables)\n\t\t\titers.push(_iter(iterable));\n\n\t\treturn {\n\t\t\tnext: function() {\n\t\t\t\tlet items = [];\n\t\t\t\tfor (let iter of iters)\n\t\t\t\t{\n\t\t\t\t\tlet item = iter.next();\n\t\t\t\t\tif (item.done)\n\t\t\t\t\t\treturn item;\n\t\t\t\t\titems.push(item.value);\n\t\t\t\t}\n\t\t\t\treturn {value: items, done: false};\n\t\t\t}\n\t\t};\n\t}\n\telse\n\t{\n\t\treturn {\n\t\t\tnext: function() {\n\t\t\t\treturn {done: true};\n\t\t\t}\n\t\t};\n\t}\n};\n\n// Return the absolute value for the number ``number``\nexport function _abs(number)\n{\n\tif (number !== null && typeof(number.__abs__) === \"function\")\n\t\treturn number.__abs__();\n\treturn Math.abs(number);\n};\n\n// Return a ``Date`` object from the arguments passed in\nexport function _date(year, month, day)\n{\n\treturn new Date_(year, month, day);\n};\n\nexport function _datetime(year, month, day, hour=0, minute=0, second=0, microsecond=0)\n{\n\treturn new Date(year, month-1, day, hour, minute, second, microsecond/1000);\n};\n\n// Return a ``TimeDelta`` object from the arguments passed in\nexport function _timedelta(days=0, seconds=0, microseconds=0)\n{\n\treturn new TimeDelta(days, seconds, microseconds);\n};\n\n// Return a ``MonthDelta`` object from the arguments passed in\nexport function _monthdelta(months=0)\n{\n\treturn new MonthDelta(months);\n};\n\n// Return a ``Color`` object from the hue, luminescence, saturation and alpha values ``h``, ``l``, ``s`` and ``a`` (i.e. using the HLS color model)\nexport function _hls(h, l, s, a)\n{\n\tlet _v = function _v(m1, m2, hue)\n\t{\n\t\thue = hue % 1.0;\n\t\tif (hue < 1/6)\n\t\t\treturn m1 + (m2-m1)*hue*6.0;\n\t\telse if (hue < 0.5)\n\t\t\treturn m2;\n\t\telse if (hue < 2/3)\n\t\t\treturn m1 + (m2-m1)*(2/3-hue)*6.0;\n\t\treturn m1;\n\t};\n\n\tlet m1, m2;\n\tif (typeof(a) === \"undefined\")\n\t\ta = 1;\n\tif (s === 0.0)\n\t\treturn _rgb(l, l, l, a);\n\tif (l <= 0.5)\n\t\tm2 = l * (1.0+s);\n\telse\n\t\tm2 = l+s-(l*s);\n\tm1 = 2.0*l - m2;\n\treturn _rgb(_v(m1, m2, h+1/3), _v(m1, m2, h), _v(m1, m2, h-1/3), a);\n};\n\n// Return a ``Color`` object from the hue, saturation, value and alpha values ``h``, ``s``, ``v`` and ``a`` (i.e. using the HSV color model)\nexport function _hsv(h, s, v, a)\n{\n\tif (s === 0.0)\n\t\treturn _rgb(v, v, v, a);\n\tlet i = Math.floor(h*6.0);\n\tlet f = (h*6.0) - i;\n\tlet p = v*(1.0 - s);\n\tlet q = v*(1.0 - s*f);\n\tlet t = v*(1.0 - s*(1.0-f));\n\tswitch (i%6)\n\t{\n\t\tcase 0:\n\t\t\treturn _rgb(v, t, p, a);\n\t\tcase 1:\n\t\t\treturn _rgb(q, v, p, a);\n\t\tcase 2:\n\t\t\treturn _rgb(p, v, t, a);\n\t\tcase 3:\n\t\t\treturn _rgb(p, q, v, a);\n\t\tcase 4:\n\t\t\treturn _rgb(t, p, v, a);\n\t\tcase 5:\n\t\t\treturn _rgb(v, p, q, a);\n\t}\n};\n\n// Return the item with the key ``key`` from the dict ``container``. If ``container`` doesn't have this key, return ``defaultvalue``\nexport function _get(container, key, defaultvalue)\n{\n\tif (_ismap(container))\n\t{\n\t\tif (container.has(key))\n\t\t\treturn container.get(key);\n\t\treturn defaultvalue;\n\t}\n\telse if (_isobject(container))\n\t{\n\t\tlet result = container[key];\n\t\tif (typeof(result) === \"undefined\")\n\t\t\treturn defaultvalue;\n\t\treturn result;\n\t}\n\tthrow new TypeError(\"get() requires a dict\");\n};\n\n// Return a ``Date`` object for the current time\nexport function now()\n{\n\treturn new Date();\n};\n\n// Return a ``Date`` object for the current time in UTC\nexport function utcnow()\n{\n\tlet now = new Date();\n\t// FIXME: The timezone is wrong for the new ``Date`` object.\n\treturn new Date(now.getUTCFullYear(), now.getUTCMonth(), now.getUTCDate(), now.getUTCHours(), now.getUTCMinutes(), now.getUTCSeconds(), now.getUTCMilliseconds());\n};\n\n// Return an ``Date`` object for today\nexport function today()\n{\n\tlet now = new Date();\n\treturn new Date_(now.getFullYear(), now.getMonth()+1, now.getDate());\n};\n\nexport let functions = {\n\trepr: _repr,\n\tascii: _ascii,\n\tstr: _str,\n\tint: _int,\n\tfloat: _float,\n\tlist: _list,\n\tset: _set,\n\tbool: _bool,\n\tlen: _len,\n\ttype: _type,\n\tformat: _format,\n\tany: _any,\n\tall: _all,\n\tzip: _zip,\n\tgetattr: _getattr,\n\thasattr: _hasattr,\n\tdir: _dir,\n\tisundefined: _isundefined,\n\tisdefined: _isdefined,\n\tisnone: _isnone,\n\tisbool: _isbool,\n\tisint: _isint,\n\tisfloat: _isfloat,\n\tisstr: _isstr,\n\tisdate: _isdate,\n\tisdatetime: _isdatetime,\n\tiscolor: _iscolor,\n\tistimedelta: _istimedelta,\n\tismonthdelta: _ismonthdelta,\n\tistemplate: _istemplate,\n\tisfunction: _isfunction,\n\tislist: _islist,\n\tisset: _isanyset,\n\tisdict: _isdict,\n\tisexception: _isexception,\n\tasjson: _asjson,\n\tfromjson: _fromjson,\n\tasul4on: _asul4on,\n\tfromul4on: _fromul4on,\n\tnow: now,\n\tutcnow: utcnow,\n\ttoday: today,\n\tenumerate: _enumerate,\n\tisfirst: _isfirst,\n\tislast: _islast,\n\tisfirstlast: _isfirstlast,\n\tenumfl: _enumfl,\n\tabs: _abs,\n\tdate: _date,\n\tdatetime: _datetime,\n\ttimedelta: _timedelta,\n\tmonthdelta: _monthdelta,\n\trgb: _rgb,\n\thls: _hls,\n\thsv: _hsv,\n\txmlescape: _xmlescape,\n\tcsv: _csv,\n\tchr: _chr,\n\tord: _ord,\n\thex: _hex,\n\toct: _oct,\n\tbin: _bin,\n\tmin: _min,\n\tmax: _max,\n\tsum: _sum,\n\tfirst: _first,\n\tlast: _last,\n\tsorted: _sorted,\n\trange: _range,\n\tslice: _slice,\n\turlquote: _urlquote,\n\turlunquote: _urlunquote,\n\treversed: _reversed,\n\trandom: _random,\n\trandrange: _randrange,\n\trandchoice: _randchoice,\n\tround: _round,\n\tmd5: _md5\n};\n\nexpose(_repr, [\"obj\"], {name: \"repr\"});\nexpose(_ascii, [\"obj\"], {name: \"ascii\"});\nexpose(_str, [\"obj=\", \"\"], {name: \"str\"});\nexpose(_int, [\"obj=\", 0, \"base=\", null], {name: \"int\"});\nexpose(_float, [\"obj=\", 0.0], {name: \"float\"});\nexpose(_list, [\"iterable=\", []], {name: \"list\"});\nexpose(_set, [\"iterable=\", []], {name: \"set\"});\nexpose(_bool, [\"obj=\", false], {name: \"bool\"});\nexpose(_len, [\"sequence\"], {name: \"len\"});\nexpose(_type, [\"obj\"], {name: \"type\"});\nexpose(_format, [\"obj\", \"fmt\", \"lang=\", null], {name: \"format\"});\nexpose(_any, [\"iterable\"], {name: \"any\"});\nexpose(_all, [\"iterable\"], {name: \"all\"});\nexpose(_zip, [\"*iterables\"], {name: \"zip\"});\nexpose(_getattr, [\"obj\", \"attrname\", \"default=\", null], {name: \"getattr\"});\nexpose(_hasattr, [\"obj\", \"attrname\"], {name: \"hasattr\"});\nexpose(_dir, [\"obj\"], {name: \"dir\"});\nexpose(_isundefined, [\"obj\"], {name: \"isundefined\"});\nexpose(_isdefined, [\"obj\"], {name: \"isdefined\"});\nexpose(_isnone, [\"obj\"], {name: \"isnone\"});\nexpose(_isbool, [\"obj\"], {name: \"isbool\"});\nexpose(_isint, [\"obj\"], {name: \"isint\"});\nexpose(_isfloat, [\"obj\"], {name: \"isfloat\"});\nexpose(_isstr, [\"obj\"], {name: \"isstr\"});\nexpose(_isdate, [\"obj\"], {name: \"isdate\"});\nexpose(_isdatetime, [\"obj\"], {name: \"isdatetime\"});\nexpose(_iscolor, [\"obj\"], {name: \"iscolor\"});\nexpose(_istimedelta, [\"obj\"], {name: \"istimedelta\"});\nexpose(_ismonthdelta, [\"obj\"], {name: \"ismonthdelta\"});\nexpose(_istemplate, [\"obj\"], {name: \"istemplate\"});\nexpose(_isfunction, [\"obj\"], {name: \"isfunction\"});\nexpose(_islist, [\"obj\"], {name: \"islist\"});\nexpose(_isanyset, [\"obj\"], {name: \"isset\"});\nexpose(_isdict, [\"obj\"], {name: \"isdict\"});\nexpose(_isexception, [\"obj\"], {name: \"isexception\"});\nexpose(_asjson, [\"obj\"], {name: \"asjson\"});\nexpose(_fromjson, [\"string\"], {name: \"fromjson\"});\nexpose(_asul4on, [\"obj\"], {name: \"asul4on\"});\nexpose(_fromul4on, [\"string\"], {name: \"fromul4on\"});\nexpose(now, []);\nexpose(utcnow, []);\nexpose(today, []);\nexpose(_enumerate, [\"iterable\", \"start=\", 0], {name: \"enumerate\"});\nexpose(_isfirst, [\"iterable\"], {name: \"isfirst\"});\nexpose(_islast, [\"iterable\"], {name: \"islast\"});\nexpose(_isfirstlast, [\"iterable\"], {name: \"isfirstlast\"});\nexpose(_enumfl, [\"iterable\", \"start=\", 0], {name: \"enumfl\"});\nexpose(_abs, [\"number\"], {name: \"abs\"});\nexpose(_date, [\"year\", \"month\", \"day\"], {name: \"date\"});\nexpose(_datetime, [\"year\", \"month\", \"day\", \"hour=\", 0, \"minute=\", 0, \"second=\", 0, \"microsecond=\", 0], {name: \"datetime\"});\nexpose(_timedelta, [\"days=\", 0, \"seconds=\", 0, \"microseconds=\", 0], {name: \"timedelta\"});\nexpose(_monthdelta, [\"months=\", 0], {name: \"monthdelta\"});\nexpose(_rgb, [\"r\", \"g\", \"b\", \"a=\", 1.0], {name: \"rgb\"});\nexpose(_hls, [\"h\", \"l\", \"s\", \"a=\", 1.0], {name: \"hls\"});\nexpose(_hsv, [\"h\", \"s\", \"v\", \"a=\", 1.0], {name: \"hsv\"});\nexpose(_xmlescape, [\"obj\"], {name: \"xmlescape\"});\nexpose(_csv, [\"obj\"], {name: \"csv\"});\nexpose(_chr, [\"i\"], {name: \"chr\"});\nexpose(_ord, [\"c\"], {name: \"ord\"});\nexpose(_hex, [\"number\"], {name: \"hex\"});\nexpose(_oct, [\"number\"], {name: \"oct\"});\nexpose(_bin, [\"number\"], {name: \"bin\"});\nexpose(_min, [\"*obj\"], {name: \"min\"});\nexpose(_max, [\"*obj\"], {name: \"max\"});\nexpose(_sum, [\"iterable\", \"start=\", 0], {name: \"sum\"});\nexpose(_first, [\"iterable\", \"default=\", null], {name: \"first\"});\nexpose(_last, [\"iterable\", \"default=\", null], {name: \"last\"});\nexpose(_sorted, [\"iterable\", \"key=\", null, \"reverse=\", false], {name: \"sorted\", needscontext: true});\nexpose(_range, [\"*args\"], {name: \"range\"});\nexpose(_slice, [\"*args\"], {name: \"slice\"});\nexpose(_urlquote, [\"string\"], {name: \"urlquote\"});\nexpose(_urlunquote, [\"string\"], {name: \"urlunquote\"});\nexpose(_reversed, [\"sequence\"], {name: \"reversed\"});\nexpose(_random, [], {name: \"random\"});\nexpose(_randrange, [\"*args\"], {name: \"randrange\"});\nexpose(_randchoice, [\"sequence\"], {name: \"randchoice\"});\nexpose(_round, [\"x\", \"digit=\", 0], {name: \"round\"});\nexpose(_md5, [\"string\"], {name: \"md5\"});\n\n// Functions implementing UL4 methods\nexport function _count(obj, sub, start=null, end=null)\n{\n\tif (start < 0)\n\t\tstart += obj.length;\n\tif (start === null)\n\t\tstart = 0;\n\n\tif (end < 0)\n\t\tend += obj.length;\n\tif (end === null)\n\t\tend = obj.length;\n\n\tlet isstr = _isstr(obj);\n\n\tif (isstr && !sub.length)\n\t{\n\t\tif (end < 0 || start > obj.length || start > end)\n\t\t\treturn 0;\n\t\tlet result = end - start + 1;\n\t\tif (result > obj.length + 1)\n\t\t\tresult = obj.length + 1;\n\t\treturn result;\n\t}\n\n\tstart = _bound(start, obj.length);\n\tend = _bound(end, obj.length);\n\n\tlet count = 0;\n\tif (_islist(obj))\n\t{\n\t\tfor (let i = start; i < end; ++i)\n\t\t{\n\t\t\tif (_eq(obj[i], sub))\n\t\t\t\t++count;\n\t\t}\n\t\treturn count;\n\t}\n\telse // string\n\t{\n\t\tlet lastIndex = start;\n\n\t\tfor (;;)\n\t\t{\n\t\t\tlastIndex = obj.indexOf(sub, lastIndex);\n\t\t\tif (lastIndex == -1)\n\t\t\t\tbreak;\n\t\t\tif (lastIndex + sub.length > end)\n\t\t\t\tbreak;\n\t\t\t++count;\n\t\t\tlastIndex += sub.length;\n\t\t}\n\t\treturn count;\n\t}\n};\n\nexport function _find(obj, sub, start=null, end=null)\n{\n\tif (start < 0)\n\t\tstart += obj.length;\n\tif (start === null)\n\t\tstart = 0;\n\tif (end < 0)\n\t\tend += obj.length;\n\tif (end === null)\n\t\tend = obj.length;\n\tstart = _bound(start, obj.length);\n\tend = _bound(end, obj.length);\n\n\tif (start !== 0 || end !== obj.length)\n\t{\n\t\tif (typeof(obj) == \"string\")\n\t\t\tobj = obj.substring(start, end);\n\t\telse\n\t\t\tobj = obj.slice(start, end);\n\t}\n\tlet result = obj.indexOf(sub);\n\tif (result !== -1)\n\t\tresult += start;\n\treturn result;\n};\n\nexport function _rfind(obj, sub, start=null, end=null)\n{\n\tif (start < 0)\n\t\tstart += obj.length;\n\tif (start === null)\n\t\tstart = 0;\n\tif (end < 0)\n\t\tend += obj.length;\n\tif (end === null)\n\t\tend = obj.length;\n\tstart = _bound(start, obj.length);\n\tend = _bound(end, obj.length);\n\n\tif (start !== 0 || end !== obj.length)\n\t{\n\t\tif (typeof(obj) == \"string\")\n\t\t\tobj = obj.substring(start, end);\n\t\telse\n\t\t\tobj = obj.slice(start, end);\n\t}\n\tlet result = obj.lastIndexOf(sub);\n\tif (result !== -1)\n\t\tresult += start;\n\treturn result;\n};\n\nexport function _week4format(obj, firstweekday=null)\n{\n\tif (firstweekday === null)\n\t\tfirstweekday = 0;\n\telse\n\t\tfirstweekday %= 7;\n\n\tlet yearday = DateTimeProtocol.yearday(obj)+6;\n\tlet jan1 = new Date(obj.getFullYear(), 0, 1);\n\tlet jan1weekday = jan1.getDay();\n\tif (--jan1weekday < 0)\n\t\tjan1weekday = 6;\n\n\twhile (jan1weekday != firstweekday)\n\t{\n\t\t--yearday;\n\t\tif (++jan1weekday == 7)\n\t\t\tjan1weekday = 0;\n\t}\n\treturn Math.floor(yearday/7);\n};\n\nexport function _isleap(obj)\n{\n\treturn new Date(obj.getFullYear(), 1, 29).getMonth() === 1;\n};\n\nexport function _update(obj, others, kwargs)\n{\n\tif (!_isdict(obj))\n\t\tthrow new TypeError(\"update() requires a dict\");\n\tfor (let other of others)\n\t{\n\t\tif (_ismap(other))\n\t\t{\n\t\t\tother.forEach(function(value, key) {\n\t\t\t\t_setmap(obj, key, value);\n\t\t\t});\n\t\t}\n\t\telse if (_isobject(other))\n\t\t{\n\t\t\tfor (let key in other)\n\t\t\t\t_setmap(obj, key, other[key]);\n\t\t}\n\t\telse if (_islist(other))\n\t\t{\n\t\t\tfor (let item of other)\n\t\t\t{\n\t\t\t\tif (!_islist(item) || (item.length != 2))\n\t\t\t\t\tthrow new TypeError(\"update() requires a dict or a list of (key, value) pairs\");\n\t\t\t\t_setmap(obj, item[0], item[1]);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\tthrow new TypeError(\"update() requires a dict or a list of (key, value) pairs\");\n\t}\n\tkwargs.forEach(function(value, key) {\n\t\t_setmap(obj, key, value);\n\t});\n\treturn null;\n};\n\nexport class Color extends Proto\n{\n\tconstructor(r=0, g=0, b=0, a=255)\n\t{\n\t\tsuper();\n\t\tthis._r = r;\n\t\tthis._g = g;\n\t\tthis._b = b;\n\t\tthis._a = a;\n\t}\n\n\t__repr__()\n\t{\n\t\tlet r = _lpad(this._r.toString(16), \"0\", 2);\n\t\tlet g = _lpad(this._g.toString(16), \"0\", 2);\n\t\tlet b = _lpad(this._b.toString(16), \"0\", 2);\n\t\tlet a = _lpad(this._a.toString(16), \"0\", 2);\n\t\tif (this._a !== 0xff)\n\t\t{\n\t\t\tif (r[0] === r[1] && g[0] === g[1] && b[0] === b[1] && a[0] === a[1])\n\t\t\t\treturn \"#\" + r[0] + g[0] + b[0] + a[0];\n\t\t\telse\n\t\t\t\treturn \"#\" + r + g + b + a;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (r[0] === r[1] && g[0] === g[1] && b[0] === b[1])\n\t\t\t\treturn \"#\" + r[0] + g[0] + b[0];\n\t\t\telse\n\t\t\t\treturn \"#\" + r + g + b;\n\t\t}\n\t}\n\n\t__str__()\n\t{\n\t\tif (this._a !== 0xff)\n\t\t{\n\t\t\treturn \"rgba(\" + this._r + \", \" + this._g + \", \" + this._b + \", \" + (this._a/255) + \")\";\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlet r = _lpad(this._r.toString(16), \"0\", 2);\n\t\t\tlet g = _lpad(this._g.toString(16), \"0\", 2);\n\t\t\tlet b = _lpad(this._b.toString(16), \"0\", 2);\n\t\t\tif (r[0] === r[1] && g[0] === g[1] && b[0] === b[1])\n\t\t\t\treturn \"#\" + r[0] + g[0] + b[0];\n\t\t\telse\n\t\t\t\treturn \"#\" + r + g + b;\n\t\t}\n\t}\n\n\t__iter__()\n\t{\n\t\treturn {\n\t\t\tobj: this,\n\t\t\tindex: 0,\n\t\t\tnext: function() {\n\t\t\t\tif (this.index == 0)\n\t\t\t\t{\n\t\t\t\t\t++this.index;\n\t\t\t\t\treturn {value: this.obj._r, done: false};\n\t\t\t\t}\n\t\t\t\telse if (this.index == 1)\n\t\t\t\t{\n\t\t\t\t\t++this.index;\n\t\t\t\t\treturn {value: this.obj._g, done: false};\n\t\t\t\t}\n\t\t\t\telse if (this.index == 2)\n\t\t\t\t{\n\t\t\t\t\t++this.index;\n\t\t\t\t\treturn {value: this.obj._b, done: false};\n\t\t\t\t}\n\t\t\t\telse if (this.index == 3)\n\t\t\t\t{\n\t\t\t\t\t++this.index;\n\t\t\t\t\treturn {value: this.obj._a, done: false};\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\treturn {done: true};\n\t\t\t}\n\t\t};\n\t}\n\n\t__getattr__(attrname)\n\t{\n\t\tlet self = this;\n\t\tswitch (attrname)\n\t\t{\n\t\t\tcase \"r\":\n\t\t\t\tlet r = function r(){ return self._r; };\n\t\t\t\texpose(r, []);\n\t\t\t\treturn r;\n\t\t\tcase \"g\":\n\t\t\t\tlet g = function g(){ return self._g; };\n\t\t\t\texpose(g, []);\n\t\t\t\treturn g;\n\t\t\tcase \"b\":\n\t\t\t\tlet b = function b(){ return self._b; };\n\t\t\t\texpose(b, []);\n\t\t\t\treturn b;\n\t\t\tcase \"a\":\n\t\t\t\tlet a = function a(){ return self._a; };\n\t\t\t\texpose(a, []);\n\t\t\t\treturn a;\n\t\t\tcase \"lum\":\n\t\t\t\tlet lum = function lum(){ return self.lum(); };\n\t\t\t\texpose(lum, []);\n\t\t\t\treturn lum;\n\t\t\tcase \"hls\":\n\t\t\t\tlet hls = function hls(){ return self.hls(); };\n\t\t\t\texpose(hls, []);\n\t\t\t\treturn hls;\n\t\t\tcase \"hlsa\":\n\t\t\t\tlet hlsa = function hlsa(){ return self.hlsa(); };\n\t\t\t\texpose(hlsa, []);\n\t\t\t\treturn hlsa;\n\t\t\tcase \"hsv\":\n\t\t\t\tlet hsv = function hsv(){ return self.hsv(); };\n\t\t\t\texpose(hsv, []);\n\t\t\t\treturn hsv;\n\t\t\tcase \"hsva\":\n\t\t\t\tlet hsva = function hsva(){ return self.hsva(); };\n\t\t\t\texpose(hsva, []);\n\t\t\t\treturn hsva;\n\t\t\tcase \"witha\":\n\t\t\t\tlet witha = function witha(a){ return self.witha(a); };\n\t\t\t\texpose(witha, [\"a\"]);\n\t\t\t\treturn witha;\n\t\t\tcase \"withlum\":\n\t\t\t\tlet withlum = function withlum(lum){ return self.withlum(lum); };\n\t\t\t\texpose(withlum, [\"lum\"]);\n\t\t\t\treturn withlum;\n\t\t\tcase \"abslum\":\n\t\t\t\tlet abslum = function abslum(lum){ return self.abslum(lum); };\n\t\t\t\texpose(abslum, [\"lum\"]);\n\t\t\t\treturn abslum;\n\t\t\tcase \"rellum\":\n\t\t\t\tlet rellum = function rellum(lum){ return self.rellum(lum); };\n\t\t\t\texpose(rellum, [\"lum\"]);\n\t\t\t\treturn rellum;\n\t\t\tdefault:\n\t\t\t\tthrow new AttributeError(this, attrname);\n\t\t}\n\t}\n\n\t__getitem__(key)\n\t{\n\t\tlet orgkey = key;\n\t\tif (key < 0)\n\t\t\tkey += 4;\n\t\tswitch (key)\n\t\t{\n\t\t\tcase 0:\n\t\t\t\treturn this._r;\n\t\t\tcase 1:\n\t\t\t\treturn this._g;\n\t\t\tcase 2:\n\t\t\t\treturn this._b;\n\t\t\tcase 3:\n\t\t\t\treturn this._a;\n\t\t\tdefault:\n\t\t\t\tthrow new IndexError(this, orgkey);\n\t\t}\n\t}\n\n\t__eq__(other)\n\t{\n\t\tif (other instanceof Color)\n\t\t\treturn this._r == other._r && this._g == other._g && this._b == other._b && this._a == other._a;\n\t\treturn false;\n\t}\n\n\tr()\n\t{\n\t\t\treturn this._r;\n\t}\n\n\tg()\n\t{\n\t\treturn this._g;\n\t}\n\n\tb()\n\t{\n\t\treturn this._b;\n\t}\n\n\ta()\n\t{\n\t\treturn this._a;\n\t}\n\n\tlum()\n\t{\n\t\treturn this.hls()[1];\n\t}\n\n\thls()\n\t{\n\t\tlet r = this._r/255.0;\n\t\tlet g = this._g/255.0;\n\t\tlet b = this._b/255.0;\n\t\tlet maxc = Math.max(r, g, b);\n\t\tlet minc = Math.min(r, g, b);\n\t\tlet h, l, s;\n\t\tlet rc, gc, bc;\n\n\t\tl = (minc+maxc)/2.0;\n\t\tif (minc == maxc)\n\t\t\treturn [0.0, l, 0.0];\n\t\tif (l <= 0.5)\n\t\t\ts = (maxc-minc) / (maxc+minc);\n\t\telse\n\t\t\ts = (maxc-minc) / (2.0-maxc-minc);\n\t\trc = (maxc-r) / (maxc-minc);\n\t\tgc = (maxc-g) / (maxc-minc);\n\t\tbc = (maxc-b) / (maxc-minc);\n\t\tif (r == maxc)\n\t\t\th = bc-gc;\n\t\telse if (g == maxc)\n\t\t\th = 2.0+rc-bc;\n\t\telse\n\t\t\th = 4.0+gc-rc;\n\t\th = (h/6.0) % 1.0;\n\t\treturn [h, l, s];\n\t}\n\n\thlsa()\n\t{\n\t\tlet hls = this.hls();\n\t\treturn hls.concat(this._a/255.0);\n\t}\n\n\thsv()\n\t{\n\t\tlet r = this._r/255.0;\n\t\tlet g = this._g/255.0;\n\t\tlet b = this._b/255.0;\n\t\tlet maxc = Math.max(r, g, b);\n\t\tlet minc = Math.min(r, g, b);\n\t\tlet v = maxc;\n\t\tif (minc == maxc)\n\t\t\treturn [0.0, 0.0, v];\n\t\tlet s = (maxc-minc) / maxc;\n\t\tlet rc = (maxc-r) / (maxc-minc);\n\t\tlet gc = (maxc-g) / (maxc-minc);\n\t\tlet bc = (maxc-b) / (maxc-minc);\n\t\tlet h;\n\t\tif (r == maxc)\n\t\t\th = bc-gc;\n\t\telse if (g == maxc)\n\t\t\th = 2.0+rc-bc;\n\t\telse\n\t\t\th = 4.0+gc-rc;\n\t\th = (h/6.0) % 1.0;\n\t\treturn [h, s, v];\n\t}\n\n\thsva()\n\t{\n\t\tlet hsv = this.hsv();\n\t\treturn hsv.concat(this._a/255.0);\n\t}\n\n\twitha(a)\n\t{\n\t\tif (typeof(a) !== \"number\")\n\t\t\tthrow new TypeError(\"witha() requires a number\");\n\t\treturn new Color(this._r, this._g, this._b, a);\n\t}\n\n\twithlum(lum)\n\t{\n\t\tif (typeof(lum) !== \"number\")\n\t\t\tthrow new TypeError(\"witha() requires a number\");\n\t\tlet hlsa = this.hlsa();\n\t\treturn _hls(hlsa[0], lum, hlsa[2], hlsa[3]);\n\t}\n\n\tul4type()\n\t{\n\t\treturn \"color\";\n\t}\n};\n\nexpose(Color.prototype.r, []);\nexpose(Color.prototype.g, []);\nexpose(Color.prototype.b, []);\nexpose(Color.prototype.a, []);\nexpose(Color.prototype.lum, []);\nexpose(Color.prototype.hls, []);\nexpose(Color.prototype.hlsa, []);\nexpose(Color.prototype.hsv, []);\nexpose(Color.prototype.hsva, []);\nexpose(Color.prototype.witha, [\"a\"]);\nexpose(Color.prototype.withlum, [\"lum\"]);\n\nexport class Date_ extends Proto\n{\n\tconstructor(year, month, day)\n\t{\n\t\tsuper();\n\t\tthis._date = new Date(year, month-1, day);\n\t}\n\n\t__repr__()\n\t{\n\t\treturn '@(' + this.__str__() + \")\";\n\t}\n\n\t__str__()\n\t{\n\t\treturn _lpad(this._date.getFullYear(), \"0\", 4) + \"-\" + _lpad(this._date.getMonth()+1, \"0\", 2) + \"-\" + _lpad(this._date.getDate(), \"0\", 2);\n\t}\n\n\t__eq__(other)\n\t{\n\t\tif (other instanceof Date_)\n\t\t\treturn this._date.getTime() === other._date.getTime();\n\t\treturn false;\n\t}\n\n\t__lt__(other)\n\t{\n\t\tif (other instanceof Date_)\n\t\t\treturn this._date < other._date;\n\t\t_unorderable(\"<\", this, other);\n\t}\n\n\t__le__(other)\n\t{\n\t\tif (other instanceof Date_)\n\t\t\treturn this._date <= other._date;\n\t\t_unorderable(\"<=\", this, other);\n\t}\n\n\t__gt__(other)\n\t{\n\t\tif (other instanceof Date_)\n\t\t\treturn this._date > other._date;\n\t\t_unorderable(\">\", this, other);\n\t}\n\n\t__ge__(other)\n\t{\n\t\tif (other instanceof Date_)\n\t\t\treturn this._date >= other._date;\n\t\t_unorderable(\">=\", this, other);\n\t}\n\n\tyear()\n\t{\n\t\treturn this._date.getFullYear();\n\t}\n\n\tmonth()\n\t{\n\t\treturn this._date.getMonth()+1;\n\t}\n\n\tday()\n\t{\n\t\treturn this._date.getDate();\n\t}\n\n\tul4type()\n\t{\n\t\treturn \"date\";\n\t}\n};\n\n\nexport class TimeDelta extends Proto\n{\n\tconstructor(days=0, seconds=0, microseconds=0)\n\t{\n\t\tsuper();\n\t\tlet total_microseconds = Math.floor((days * 86400 + seconds)*1000000 + microseconds);\n\n\t\tmicroseconds = ModAST.prototype._do(total_microseconds, 1000000);\n\t\tlet total_seconds = Math.floor(total_microseconds / 1000000);\n\t\tseconds = ModAST.prototype._do(total_seconds, 86400);\n\t\tdays = Math.floor(total_seconds / 86400);\n\t\tif (seconds < 0)\n\t\t{\n\t\t\tseconds += 86400;\n\t\t\t--days;\n\t\t}\n\n\t\tthis._microseconds = microseconds;\n\t\tthis._seconds = seconds;\n\t\tthis._days = days;\n\t}\n\n\t__repr__()\n\t{\n\t\tlet v = [], first = true;\n\t\tv.push(\"timedelta(\");\n\t\tif (this._days)\n\t\t{\n\t\t\tv.push(\"days=\" + this._days);\n\t\t\tfirst = false;\n\t\t}\n\t\tif (this._seconds)\n\t\t{\n\t\t\tif (!first)\n\t\t\t\tv.push(\", \");\n\t\t\tv.push(\"seconds=\" + this._seconds);\n\t\t\tfirst = false;\n\t\t}\n\t\tif (this._microseconds)\n\t\t{\n\t\t\tif (!first)\n\t\t\t\tv.push(\", \");\n\t\t\tv.push(\"microseconds=\" + this._microseconds);\n\t\t}\n\t\tv.push(\")\");\n\t\treturn v.join(\"\");\n\t}\n\n\t__str__()\n\t{\n\t\tlet v = [];\n\t\tif (this._days)\n\t\t{\n\t\t\tv.push(this._days + \" day\");\n\t\t\tif (this._days !== -1 && this._days !== 1)\n\t\t\t\tv.push(\"s\");\n\t\t\tv.push(\", \");\n\t\t}\n\t\tlet seconds = this._seconds % 60;\n\t\tlet minutes = Math.floor(this._seconds / 60);\n\t\tlet hours = Math.floor(minutes / 60);\n\t\tminutes = minutes % 60;\n\n\t\tv.push(\"\" + hours);\n\t\tv.push(\":\");\n\t\tv.push(_lpad(minutes.toString(), \"0\", 2));\n\t\tv.push(\":\");\n\t\tv.push(_lpad(seconds.toString(), \"0\", 2));\n\t\tif (this._microseconds)\n\t\t{\n\t\t\tv.push(\".\");\n\t\t\tv.push(_lpad(this._microseconds.toString(), \"0\", 6));\n\t\t}\n\t\treturn v.join(\"\");\n\t}\n\n\t__bool__()\n\t{\n\t\treturn this._days !== 0 || this._seconds !== 0 || this._microseconds !== 0;\n\t}\n\n\t__abs__()\n\t{\n\t\treturn this._days < 0 ? new TimeDelta(-this._days, -this._seconds, -this._microseconds) : this;\n\t}\n\n\t__eq__(other)\n\t{\n\t\tif (other instanceof TimeDelta)\n\t\t\treturn (this._days === other._days) && (this._seconds === other._seconds) && (this._microseconds === other._microseconds);\n\t\treturn false;\n\t}\n\n\t__lt__(other)\n\t{\n\t\tif (other instanceof TimeDelta)\n\t\t{\n\t\t\tif (this._days != other._days)\n\t\t\t\treturn this._days < other._days;\n\t\t\tif (this._seconds != other._seconds)\n\t\t\t\treturn this._seconds < other._seconds;\n\t\t\treturn this._microseconds < other._microseconds;\n\t\t}\n\t\t_unorderable(\"<\", this, other);\n\t}\n\n\t__le__(other)\n\t{\n\t\tif (other instanceof TimeDelta)\n\t\t{\n\t\t\tif (this._days != other._days)\n\t\t\t\treturn this._days < other._days;\n\t\t\tif (this._seconds != other._seconds)\n\t\t\t\treturn this._seconds < other._seconds;\n\t\t\treturn this._microseconds <= other._microseconds;\n\t\t}\n\t\t_unorderable(\"<=\", this, other);\n\t}\n\n\t__gt__(other)\n\t{\n\t\tif (other instanceof TimeDelta)\n\t\t{\n\t\t\tif (this._days != other._days)\n\t\t\t\treturn this._days > other._days;\n\t\t\tif (this._seconds != other._seconds)\n\t\t\t\treturn this._seconds > other._seconds;\n\t\t\treturn this._microseconds > other._microseconds;\n\t\t}\n\t\t_unorderable(\">\", this, other);\n\t}\n\n\t__ge__(other)\n\t{\n\t\tif (other instanceof TimeDelta)\n\t\t{\n\t\t\tif (this._days != other._days)\n\t\t\t\treturn this._days > other._days;\n\t\t\tif (this._seconds != other._seconds)\n\t\t\t\treturn this._seconds > other._seconds;\n\t\t\treturn this._microseconds >= other._microseconds;\n\t\t}\n\t\t_unorderable(\">=\", this, other);\n\t}\n\n\t__neg__()\n\t{\n\t\treturn new TimeDelta(-this._days, -this._seconds, -this._microseconds);\n\t}\n\n\t_adddate(date, days)\n\t{\n\t\tlet year = date._date.getFullYear();\n\t\tlet month = date._date.getMonth();\n\t\tlet day = date._date.getDate() + days;\n\t\treturn new Date(year, month, day);\n\t}\n\n\t_adddatetime(date, days, seconds, microseconds)\n\t{\n\t\tlet year = date.getFullYear();\n\t\tlet month = date.getMonth();\n\t\tlet day = date.getDate() + days;\n\t\tlet hour = date.getHours();\n\t\tlet minute = date.getMinutes();\n\t\tlet second = date.getSeconds() + seconds;\n\t\tlet millisecond = date.getMilliseconds() + microseconds/1000;\n\t\treturn new Date(year, month, day, hour, minute, second, millisecond);\n\t}\n\n\t__add__(other)\n\t{\n\t\tif (other instanceof TimeDelta)\n\t\t\treturn new TimeDelta(this._days + other._days, this._seconds + other._seconds, this._microseconds + other._microseconds);\n\t\telse if (_isdate(other))\n\t\t\treturn this._adddate(other, this._days);\n\t\telse if (_isdatetime(other))\n\t\t\treturn this._adddatetime(other, this._days, this._seconds, this._microseconds);\n\t\tthrow new TypeError(_type(this) + \" + \" + _type(other) + \" not supported\");\n\t}\n\n\t__radd__(other)\n\t{\n\t\tif (_isdate(other))\n\t\t\treturn this._adddate(other, this._days);\n\t\telse if (_isdatetime(other))\n\t\t\treturn this._adddatetime(other, this._days, this._seconds, this._microseconds);\n\t\tthrow new TypeError(_type(this) + \" + \" + _type(other) + \" not supported\");\n\t}\n\n\t__sub__(other)\n\t{\n\t\tif (other instanceof TimeDelta)\n\t\t\treturn new TimeDelta(this._days - other._days, this._seconds - other._seconds, this._microseconds - other._microseconds);\n\t\tthrow new TypeError(_type(this) + \" - \" + _type(other) + \" not supported\");\n\t}\n\n\t__rsub__(other)\n\t{\n\t\tif (_isdate(other))\n\t\t\treturn this._adddate(other, -this._days);\n\t\telse if (_isdatetime(other))\n\t\t\treturn this._adddatetime(other, -this._days, -this._seconds, -this._microseconds);\n\t\tthrow new TypeError(_type(this) + \" - \" + _type(other) + \" not supported\");\n\t}\n\n\t__mul__(other)\n\t{\n\t\tif (typeof(other) === \"number\")\n\t\t\treturn new TimeDelta(this._days * other, this._seconds * other, this._microseconds * other);\n\t\tthrow new TypeError(_type(this) + \" * \" + _type(other) + \" not supported\");\n\t}\n\n\t__rmul__(other)\n\t{\n\t\tif (typeof(other) === \"number\")\n\t\t\treturn new TimeDelta(this._days * other, this._seconds * other, this._microseconds * other);\n\t\tthrow new TypeError(_type(this) + \" * \" + _type(other) + \" not supported\");\n\t}\n\n\t__truediv__(other)\n\t{\n\t\tif (typeof(other) === \"number\")\n\t\t{\n\t\t\treturn new TimeDelta(this._days / other, this._seconds / other, this._microseconds / other);\n\t\t}\n\t\telse if (other instanceof TimeDelta)\n\t\t{\n\t\t\tlet myValue = this._days;\n\t\t\tlet otherValue = other._days;\n\t\t\tlet hasSeconds = this._seconds || other._seconds;\n\t\t\tlet hasMicroseconds = this._microseconds || other._microseconds;\n\t\t\tif (hasSeconds || hasMicroseconds)\n\t\t\t{\n\t\t\t\tmyValue = myValue*86400+this._seconds;\n\t\t\t\totherValue = otherValue*86400 + other._seconds;\n\t\t\t\tif (hasMicroseconds)\n\t\t\t\t{\n\t\t\t\t\tmyValue = myValue * 1000000 + this._microseconds;\n\t\t\t\t\totherValue = otherValue * 1000000 + other._microseconds;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn myValue/otherValue;\n\t\t}\n\t\tthrow new TypeError(_type(this) + \" / \" + _type(other) + \" not supported\");\n\t}\n\n\t__getattr__(attrname)\n\t{\n\t\tlet self = this;\n\t\tswitch (attrname)\n\t\t{\n\t\t\tcase \"days\":\n\t\t\t\tlet days = function days(){ return self._days; };\n\t\t\t\texpose(days, []);\n\t\t\t\treturn days;\n\t\t\tcase \"seconds\":\n\t\t\t\tlet seconds = function seconds(){ return self._seconds; };\n\t\t\t\texpose(seconds, []);\n\t\t\t\treturn seconds;\n\t\t\tcase \"microseconds\":\n\t\t\t\tlet microseconds = function microseconds(){ return self._microseconds; };\n\t\t\t\texpose(microseconds, []);\n\t\t\t\treturn microseconds;\n\t\t\tdefault:\n\t\t\t\tthrow new AttributeError(this, attrname);\n\t\t}\n\t}\n\n\tdays()\n\t{\n\t\treturn this._days;\n\t}\n\n\tseconds()\n\t{\n\t\treturn this._seconds;\n\t}\n\n\tmicroseconds()\n\t{\n\t\treturn this._microseconds;\n\t}\n\n\tul4type()\n\t{\n\t\treturn \"timedelta\";\n\t}\n};\n\n\nexport class MonthDelta extends Proto\n{\n\tconstructor(months=0)\n\t{\n\t\tsuper();\n\t\tthis._months = months;\n\t}\n\n\t__repr__()\n\t{\n\t\tif (!this._months)\n\t\t\treturn \"monthdelta()\";\n\t\treturn \"monthdelta(\" + this._months + \")\";\n\t}\n\n\t__str__()\n\t{\n\t\tif (this._months)\n\t\t{\n\t\t\tif (this._months !== -1 && this._months !== 1)\n\t\t\t\treturn this._months + \" months\";\n\t\t\treturn this._months + \" month\";\n\t\t}\n\t\treturn \"0 months\";\n\t}\n\n\ttoString()\n\t{\n\t\treturn this.__str__();\n\t}\n\n\t__bool__()\n\t{\n\t\treturn this._months !== 0;\n\t}\n\n\t__abs__()\n\t{\n\t\treturn this._months < 0 ? new MonthDelta(-this._months) : this;\n\t}\n\n\t__eq__(other)\n\t{\n\t\tif (other instanceof MonthDelta)\n\t\t\treturn this._months === other._months;\n\t\treturn false;\n\t}\n\n\t__lt__(other)\n\t{\n\t\tif (other instanceof MonthDelta)\n\t\t\treturn this._months < other._months;\n\t\t_unorderable(\"<\", this, other);\n\t}\n\n\t__le__(other)\n\t{\n\t\tif (other instanceof MonthDelta)\n\t\t\treturn this._months <= other._months;\n\t\t_unorderable(\"<=\", this, other);\n\t}\n\n\t__gt__(other)\n\t{\n\t\tif (other instanceof MonthDelta)\n\t\t\treturn this._months > other._months;\n\t\t_unorderable(\">\", this, other);\n\t}\n\n\t__ge__(other)\n\t{\n\t\tif (other instanceof MonthDelta)\n\t\t\treturn this._months >= other._months;\n\t\t_unorderable(\">=\", this, other);\n\t}\n\n\t__neg__()\n\t{\n\t\treturn new MonthDelta(-this._months);\n\t}\n\n\t_adddate(date, months)\n\t{\n\t\tlet result = this._adddatetime(date._date, months);\n\t\treturn new Date_(result.getFullYear(), result.getMonth()+1, result.getDate());\n\t}\n\n\t_adddatetime(date, months)\n\t{\n\t\tlet year = date.getFullYear();\n\t\tlet month = date.getMonth() + months;\n\t\tlet day = date.getDate();\n\t\tlet hour = date.getHours();\n\t\tlet minute = date.getMinutes();\n\t\tlet second = date.getSeconds();\n\t\tlet millisecond = date.getMilliseconds();\n\n\t\twhile (true)\n\t\t{\n\t\t\t// As the month might be out of bounds, we have to find out what the real target month is\n\t\t\tlet targetmonth = new Date(year, month, 1, hour, minute, second, millisecond).getMonth();\n\t\t\tlet result = new Date(year, month, day, hour, minute, second, millisecond);\n\t\t\tif (result.getMonth() === targetmonth)\n\t\t\t\treturn result;\n\t\t\t--day;\n\t\t}\n\t}\n\n\t__add__(other)\n\t{\n\t\tif (_ismonthdelta(other))\n\t\t\treturn new MonthDelta(this._months + other._months);\n\t\telse if (_isdate(other))\n\t\t\treturn this._adddate(other, this._months);\n\t\telse if (_isdatetime(other))\n\t\t\treturn this._adddatetime(other, this._months);\n\t\tthrow new ArgumentError(_type(this) + \" + \" + _type(other) + \" not supported\");\n\t}\n\n\t__radd__(other)\n\t{\n\t\tif (_isdate(other))\n\t\t\treturn this._adddate(other, this._months);\n\t\telse if (_isdatetime(other))\n\t\t\treturn this._adddatetime(other, this._months);\n\t\tthrow new ArgumentError(_type(this) + \" + \" + _type(other) + \" not supported\");\n\t}\n\n\t__sub__(other)\n\t{\n\t\tif (_ismonthdelta(other))\n\t\t\treturn new MonthDelta(this._months - other._months);\n\t\tthrow new ArgumentError(_type(this) + \" - \" + _type(other) + \" not supported\");\n\t}\n\n\t__rsub__(other)\n\t{\n\t\tif (_isdate(other))\n\t\t\treturn this._adddate(other, -this._months);\n\t\telse if (_isdatetime(other))\n\t\t\treturn this._adddatetime(other, -this._months);\n\t\tthrow new ArgumentError(_type(this) + \" - \" + _type(other) + \" not supported\");\n\t}\n\n\t__mul__(other)\n\t{\n\t\tif (typeof(other) === \"number\")\n\t\t\treturn new MonthDelta(this._months * Math.floor(other));\n\t\tthrow new ArgumentError(_type(this) + \" * \" + _type(other) + \" not supported\");\n\t}\n\n\t__rmul__(other)\n\t{\n\t\tif (typeof(other) === \"number\")\n\t\t\treturn new MonthDelta(this._months * Math.floor(other));\n\t\tthrow new ArgumentError(_type(this) + \" * \" + _type(other) + \" not supported\");\n\t}\n\n\t__floordiv__(other)\n\t{\n\t\tif (typeof(other) === \"number\")\n\t\t\treturn new MonthDelta(Math.floor(this._months / other));\n\t\telse if (_ismonthdelta(other))\n\t\t\treturn Math.floor(this._months / other._months);\n\t\tthrow new ArgumentError(_type(this) + \" // \" + _type(other) + \" not supported\");\n\t}\n\n\t__truediv__(other)\n\t{\n\t\tif (_ismonthdelta(other))\n\t\t\treturn this._months / other._months;\n\t\tthrow new ArgumentError(_type(this) + \" / \" + _type(other) + \" not supported\");\n\t}\n\n\t__getattr__(attrname)\n\t{\n\t\tlet self = this;\n\t\tswitch (attrname)\n\t\t{\n\t\t\tcase \"months\":\n\t\t\t\tlet months = function months(){ return self._months; };\n\t\t\t\texpose(months, []);\n\t\t\t\treturn months;\n\t\t\tdefault:\n\t\t\t\tthrow new AttributeError(this, attrname);\n\t\t}\n\t}\n\n\tmonths()\n\t{\n\t\treturn this._months;\n\t}\n\n\tul4type()\n\t{\n\t\treturn \"monthdelta\";\n\t}\n};\n\nconst constructors = [\n\tTextAST,\n\tIndentAST,\n\tLineEndAST,\n\tConstAST,\n\tSeqItemAST,\n\tUnpackSeqItemAST,\n\tDictItemAST,\n\tUnpackDictItemAST,\n\tPosArgAST,\n\tKeywordArgAST,\n\tUnpackListArgAST,\n\tUnpackDictArgAST,\n\tListAST,\n\tListCompAST,\n\tDictAST,\n\tDictCompAST,\n\tSetAST,\n\tSetCompAST,\n\tGenExprAST,\n\tVarAST,\n\tNotAST,\n\tNegAST,\n\tBitNotAST,\n\tIfAST,\n\tReturnAST,\n\tPrintAST,\n\tPrintXAST,\n\tItemAST,\n\tIsAST,\n\tIsNotAST,\n\tEQAST,\n\tNEAST,\n\tLTAST,\n\tLEAST,\n\tGTAST,\n\tGEAST,\n\tNotContainsAST,\n\tContainsAST,\n\tAddAST,\n\tSubAST,\n\tMulAST,\n\tFloorDivAST,\n\tTrueDivAST,\n\tModAST,\n\tShiftLeftAST,\n\tShiftRightAST,\n\tBitAndAST,\n\tBitXOrAST,\n\tBitOrAST,\n\tAndAST,\n\tOrAST,\n\tSliceAST,\n\tAttrAST,\n\tCallAST,\n\tRenderAST,\n\tRenderXAST,\n\tRenderBlockAST,\n\tRenderBlocksAST,\n\tSetVarAST,\n\tAddVarAST,\n\tSubVarAST,\n\tMulVarAST,\n\tTrueDivVarAST,\n\tFloorDivVarAST,\n\tModVarAST,\n\tShiftLeftVarAST,\n\tShiftRightVarAST,\n\tBitAndVarAST,\n\tBitXOrVarAST,\n\tBitOrVarAST,\n\tForBlockAST,\n\tWhileBlockAST,\n\tBreakAST,\n\tContinueAST,\n\tCondBlockAST,\n\tIfBlockAST,\n\tElIfBlockAST,\n\tElseBlockAST,\n\tSignatureAST,\n\tTemplate\n];\n\nfor (let constructor of constructors)\n{\n\tlet name = constructor.name;\n\tif (name.substr(name.length-3) === \"AST\")\n\t\tname = name.substr(0, name.length-3);\n\tname = name.toLowerCase();\n\tconstructor.prototype.type = name;\n\tregister(\"de.livinglogic.ul4.\" + name, constructor);\n}\n"],"names":["$","safeAdd","x","y","lsw","md5cmn","q","a","b","s","t","bitRotateLeft","num","cnt","md5ff","c","d","md5gg","md5hh","md5ii","binlMD5","len","i","olda","oldb","oldc","oldd","length","binl2rstr","input","output","length32","String","fromCharCode","rstr2binl","undefined","length8","charCodeAt","rstr2hex","charAt","str2rstrUTF8","unescape","encodeURIComponent","rawMD5","rstrMD5","rawHMACMD5","k","rstrHMACMD5","key","data","hash","bkey","ipad","opad","concat","md5","string","raw","hexHMACMD5","hexMD5","module","exports","this","_registry","_havemap","Map","prototype","forEach","_haveset","size","error","Set","_makemap","map","items","value","set","_setmap","__proto__","_emptymap","_getmap","get","_emptyset","_Set","_makeset","item","add","register","name","f","ul4onname","dumps","obj","indent","encoder","Encoder","dump","finish","loads","registry","Decoder","load","_level","_strings2index","_ids2index","_backrefs","line","push","args","oldindent","arg","join","_line","type","Math","round","index","_str_repr","replace","_iscolor","r","g","_isdate","year","month","day","_isdatetime","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getMilliseconds","_istimedelta","days","seconds","microseconds","_ismonthdelta","months","slice","start","stop","ul4ondump","__id__","_islist","_ismap","_isdict","_isset","ValueError","_repr","pos","backrefs","stack","re_white","match","result","substring","re_digits","readcharoreof","parseFloat","isNaN","oldpos","escapechar","chars","read","codepoint","parseInt","typecode","readblackchar","readnumber","readchar","delimiter","c2","_readescape","Color","_r","_g","_b","_a","Date_","Date","setFullYear","setDate","setMonth","setHours","setMinutes","setSeconds","setMilliseconds","TimeDelta","_days","_seconds","_microseconds","MonthDelta","_months","backup","pop","_beginfakeloading","constructor","_endfakeloading","ul4onload","self","next","done","_rvalidchars","_rvalidescape","_rvalidtokens","_rvalidbraces","_bound","upper","_internal_call","context","functioncontext","signature","needscontext","needsobject","kwargs","finalargs","ArgumentError","bindObject","bindArray","unshift","apply","_callfunction","_ul4_name","_ul4_signature","_ul4_needsobject","_ul4_needscontext","TypeError","_callobject","_ul4_callsignature","_ul4_callneedsobject","_ul4_callneedscontext","__call__","_callrender","_ul4_rendersignature","_ul4_renderneedsobject","_ul4_renderneedscontext","__render__","_call","_type","_unpackvar","lvalue","newvalue","iter","_iter","_formatsource","out","finalout","level","needlf","part","j","_eq","obj1","obj2","numbertypes","__eq__","indexOf","getTime","_isobject","hasOwnProperty","has","_ne","__ne__","_unorderable","operator","_cmp","v1","v2","res","_isul4set","in1only","in2only","_lt","__lt__","_le","__le__","_gt","__gt__","_ge","__ge__","_isiter","__iter__","keys","values","str","ascii","squote","dquote","quote","code","escape","test","_lpad","toString","_map_repr","v","_repr_internal","_list_repr","first","_set_repr","_object_repr","_date_repr","_date","_datetime_repr","hour","minute","second","ms","_typeof","__repr__","_ascii","_str","_date_str","_datetime_str","__str__","_bool","__bool__","_int","base","_isint","floor","_float","_list","_set","_len","sequence","ul4type","Protocol","_mod","div","mod","_getattr","attrname","default_","proto","getattr","exc","AttributeError","_hasattr","hasattr","_dir","dir","_any","iterable","_all","_isundefined","_isdefined","_isnone","_isbool","_isfloat","_isstr","Object","call","_istemplate","Template","TemplateClosure","_isfunction","_isexception","Exception","_isanyset","__type__","Proto","_str_repeat","rep","_list_repeat","list","_asjson","_str_json","_fromjson","StrProtocol","strip","JSON","parse","Function","_asul4on","_fromul4on","_format_datetime","fmt","lang","translation","de","ml","ws","wl","xf","Xf","cf","en","fr","es","it","da","sv","nl","pt","cs","sk","pl","hr","sr","ro","hu","tr","ru","zh","ko","ja","inspec","getDay","_format","DateTimeProtocol","yearday","_week4format","_format_int","work","fill","align","sign","alternate","minimumwidth","minimumwidthStr","exec","neg","toUpperCase","pad","padBefore","padAfter","translations","toLowerCase","split","_nextid","other","Signature","argNames","remargs","remkwargs","nextDefault","lastArgname","argName","defaultValue","substr","_this","decname","argObject","expose","count","options","_extend","baseobj","attrs","assign","create","ListProtocol","DateProtocol","SetProtocol","MapProtocol","ObjectProtocol","__getattr__","attr","realattr","object","sub","_count","find","_find","rfind","_rfind","old","new_","lstrip","rstrip","sep","splice","rsplit","lastIndexOf","splitlines","startpos","keepends","lookingAtLineEnd","lineendlen","endpos","lower","capitalize","resultlist","startswith","prefix","singlepre","endswith","suffix","singlesuf","append","insert","update","_update","clear","weekday","calendar","firstweekday","mindaysinfirstweek","week","mimeformat","isoformat","offset","refDate","weekDayDiff","weekStartYear","weekStartMonth","weekStartDay","weekStart","diff","SubAST","_do","microsecond","leap","_isleap","realresult","Context","vars","indents","escapes","_output","message","fileName","lineNumber","instance","Error","setPrototypeOf","getPrototypeOf","__proto","enumerable","writable","configurable","InternalException","ReturnException","BreakException","ContinueException","SyntaxError","LValueRequiredError","NotSubscriptableError","ZeroDivisionError","IndexError","LocationError","location","template","parenttemplate","templateprefix","_templateprefix","sourceprefix","source","sourcesuffix","text","underline","col","AST","_col","_ul4onattrs","_eval","_decorate_exception","_eval_set","_eval_modify","decoder","_source","of","outerstartpos","innerstartpos","fullsource","maxprefix","preprefix","outerstoppos","innerstoppos","maxsuffix","postsuffix","_calculateLineCol","TextAST","IndentAST","_text","LineEndAST","CodeAST","ConstAST","ItemArgBase","_eval_list","_eval_dict","_eval_call","SeqItemAST","_handle_eval","UnpackSeqItemAST","DictItemAST","UnpackDictItemAST","subitem","PosArgAST","KeywordArgAST","UnpackListArgAST","UnpackDictArgAST","ListAST","_handle_eval_list","ListCompAST","varname","container","condition","localcontext","inheritvars","_handle_eval_set","SetAST","SetCompAST","DictAST","_handle_eval_dict","DictCompAST","GenExprAST","VarAST","_get","_modify","functions","_ido","UnaryAST","NegAST","__neg__","BitNotAST","NotAST","IfAST","objif","objcond","objelse","ReturnAST","PrintAST","PrintXAST","_xmlescape","BinaryAST","ItemAST","orgkey","__getitem__","__setitem__","IsAST","IsNotAST","EQAST","NEAST","LTAST","LEAST","GTAST","GEAST","ContainsAST","__contains__","NotContainsAST","AddAST","__add__","__radd__","__sub__","__rsub__","_date_sub","_datetime_sub","swap","year1","yearday1","year2","yearday2","diffdays","hours1","minutes1","seconds1","hours2","minutes2","diffseconds","diffmilliseconds","MulAST","__mul__","__rmul__","targetsize","FloorDivAST","__floordiv__","__rfloordiv__","TrueDivAST","__truediv__","__rtruediv__","ModAST","ShiftLeftAST","ShiftRightAST","BitAndAST","BitXOrAST","BitOrAST","AndAST","OrAST","AttrAST","__setattr__","oldvalue","CallAST","_handle_eval_call","_makeargs","RenderAST","_reprname","tag","withindent","_handle_additional_arguments","RenderXAST","RenderBlockAST","closure","content","RenderBlocksAST","BlockAST","SliceAST","index1","index2","SetVarAST","ModifyVarAST","_handle_eval_modify","_operator","AddVarAST","SubVarAST","MulVarAST","TrueDivVarAST","FloorDivVarAST","ModVarAST","ShiftLeftVarAST","ShiftRightVarAST","BitAndVarAST","BitXOrVarAST","BitOrVarAST","ForBlockAST","truel","subname","_str_varname","WhileBlockAST","BreakAST","ContinueAST","CondBlockAST","block","_execute","ConditionalBlockAST","_strname","IfBlockAST","ElIfBlockAST","ElseBlockAST","whitespace","startdelim","enddelim","docpos","_asts","doc","render","_renderbound","renders","_rendersbound","SignatureAST","loaded_api_version","clone","replaceoutput","getoutput","_callbound","params","param","endtag","_rgb","_csv","_chr","_ord","_hex","number","_oct","_bin","_min","_max","_sum","_first","_last","_sorted","reverse","cmp","sort","keyvalue","s1","s2","_range","step","higher","abs","_slice","_urlquote","_urlunquote","decodeURIComponent","_reversed","_random","random","_randrange","n","width","_randchoice","iscolor","_round","digits","threshold","pow","_md5","_enumerate","_isfirst","isfirst","_islast","lastitem","_isfirstlast","_enumfl","_zip","iterables","iters","_abs","__abs__","_datetime","_timedelta","_monthdelta","_hls","h","l","m1","m2","_v","hue","_hsv","p","now","utcnow","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCMilliseconds","today","repr","bool","format","any","all","zip","isundefined","isdefined","isnone","isbool","isint","isfloat","isstr","isdate","isdatetime","istimedelta","ismonthdelta","istemplate","isfunction","islist","isset","isdict","isexception","asjson","fromjson","asul4on","fromul4on","enumerate","islast","isfirstlast","enumfl","date","datetime","timedelta","monthdelta","rgb","hls","hsv","xmlescape","csv","chr","ord","hex","oct","bin","min","max","sum","last","sorted","range","urlquote","urlunquote","reversed","randrange","randchoice","end","lastIndex","jan1weekday","others","lum","hlsa","hsva","witha","withlum","abslum","rellum","rc","gc","bc","maxc","minc","total_microseconds","total_seconds","minutes","hours","millisecond","_adddate","_adddatetime","myValue","otherValue","hasSeconds","hasMicroseconds","targetmonth","defaultvalue","_map2object","newobj","_rpad","_stacktrace"],"mappings":"wlKAuBC,SAAWA,GAWV,SAASC,QAAQC,EAAGC,GAClB,IAAIC,GAAW,MAAJF,IAAmB,MAAJC,GAE1B,OADWD,GAAK,KAAOC,GAAK,KAAOC,GAAO,KAC3B,GAAa,MAANA,EAyBxB,SAASC,OAAOC,EAAGC,EAAGC,EAAGN,EAAGO,EAAGC,GAC7B,OAAOT,QAhBT,SAASU,cAAcC,EAAKC,GAC1B,OAAQD,GAAOC,EAAQD,IAAS,GAAKC,EAetBF,CAAcV,QAAQA,QAAQM,EAAGD,GAAIL,QAAQC,EAAGQ,IAAKD,GAAID,GAc1E,SAASM,MAAMP,EAAGC,EAAGO,EAAGC,EAAGd,EAAGO,EAAGC,GAC/B,OAAOL,OAAQG,EAAIO,GAAOP,EAAIQ,EAAIT,EAAGC,EAAGN,EAAGO,EAAGC,GAchD,SAASO,MAAMV,EAAGC,EAAGO,EAAGC,EAAGd,EAAGO,EAAGC,GAC/B,OAAOL,OAAQG,EAAIQ,EAAMD,GAAKC,EAAIT,EAAGC,EAAGN,EAAGO,EAAGC,GAchD,SAASQ,MAAMX,EAAGC,EAAGO,EAAGC,EAAGd,EAAGO,EAAGC,GAC/B,OAAOL,OAAOG,EAAIO,EAAIC,EAAGT,EAAGC,EAAGN,EAAGO,EAAGC,GAcvC,SAASS,MAAMZ,EAAGC,EAAGO,EAAGC,EAAGd,EAAGO,EAAGC,GAC/B,OAAOL,OAAOU,GAAKP,GAAKQ,GAAIT,EAAGC,EAAGN,EAAGO,EAAGC,GAU1C,SAASU,QAAQlB,EAAGmB,GAKlB,IAAIC,EACAC,EACAC,EACAC,EACAC,EAPJxB,EAAEmB,GAAO,IAAM,KAAQA,EAAM,GAC7BnB,EAA8B,IAAzBmB,EAAM,KAAQ,GAAM,IAAWA,EAOpC,IAAId,EAAI,WACJC,GAAK,UACLO,GAAK,WACLC,EAAI,UAER,IAAKM,EAAI,EAAGA,EAAIpB,EAAEyB,OAAQL,GAAK,GAC7BC,EAAOhB,EACPiB,EAAOhB,EACPiB,EAAOV,EACPW,EAAOV,EAEPT,EAAIO,MAAMP,EAAGC,EAAGO,EAAGC,EAAGd,EAAEoB,GAAI,GAAI,WAChCN,EAAIF,MAAME,EAAGT,EAAGC,EAAGO,EAAGb,EAAEoB,EAAI,GAAI,IAAK,WACrCP,EAAID,MAAMC,EAAGC,EAAGT,EAAGC,EAAGN,EAAEoB,EAAI,GAAI,GAAI,WACpCd,EAAIM,MAAMN,EAAGO,EAAGC,EAAGT,EAAGL,EAAEoB,EAAI,GAAI,IAAK,YACrCf,EAAIO,MAAMP,EAAGC,EAAGO,EAAGC,EAAGd,EAAEoB,EAAI,GAAI,GAAI,WACpCN,EAAIF,MAAME,EAAGT,EAAGC,EAAGO,EAAGb,EAAEoB,EAAI,GAAI,GAAI,YACpCP,EAAID,MAAMC,EAAGC,EAAGT,EAAGC,EAAGN,EAAEoB,EAAI,GAAI,IAAK,YACrCd,EAAIM,MAAMN,EAAGO,EAAGC,EAAGT,EAAGL,EAAEoB,EAAI,GAAI,IAAK,UACrCf,EAAIO,MAAMP,EAAGC,EAAGO,EAAGC,EAAGd,EAAEoB,EAAI,GAAI,EAAG,YACnCN,EAAIF,MAAME,EAAGT,EAAGC,EAAGO,EAAGb,EAAEoB,EAAI,GAAI,IAAK,YACrCP,EAAID,MAAMC,EAAGC,EAAGT,EAAGC,EAAGN,EAAEoB,EAAI,IAAK,IAAK,OACtCd,EAAIM,MAAMN,EAAGO,EAAGC,EAAGT,EAAGL,EAAEoB,EAAI,IAAK,IAAK,YACtCf,EAAIO,MAAMP,EAAGC,EAAGO,EAAGC,EAAGd,EAAEoB,EAAI,IAAK,EAAG,YACpCN,EAAIF,MAAME,EAAGT,EAAGC,EAAGO,EAAGb,EAAEoB,EAAI,IAAK,IAAK,UACtCP,EAAID,MAAMC,EAAGC,EAAGT,EAAGC,EAAGN,EAAEoB,EAAI,IAAK,IAAK,YAGtCf,EAAIU,MAAMV,EAFVC,EAAIM,MAAMN,EAAGO,EAAGC,EAAGT,EAAGL,EAAEoB,EAAI,IAAK,GAAI,YAErBP,EAAGC,EAAGd,EAAEoB,EAAI,GAAI,GAAI,WACpCN,EAAIC,MAAMD,EAAGT,EAAGC,EAAGO,EAAGb,EAAEoB,EAAI,GAAI,GAAI,YACpCP,EAAIE,MAAMF,EAAGC,EAAGT,EAAGC,EAAGN,EAAEoB,EAAI,IAAK,GAAI,WACrCd,EAAIS,MAAMT,EAAGO,EAAGC,EAAGT,EAAGL,EAAEoB,GAAI,IAAK,WACjCf,EAAIU,MAAMV,EAAGC,EAAGO,EAAGC,EAAGd,EAAEoB,EAAI,GAAI,GAAI,WACpCN,EAAIC,MAAMD,EAAGT,EAAGC,EAAGO,EAAGb,EAAEoB,EAAI,IAAK,EAAG,UACpCP,EAAIE,MAAMF,EAAGC,EAAGT,EAAGC,EAAGN,EAAEoB,EAAI,IAAK,IAAK,WACtCd,EAAIS,MAAMT,EAAGO,EAAGC,EAAGT,EAAGL,EAAEoB,EAAI,GAAI,IAAK,WACrCf,EAAIU,MAAMV,EAAGC,EAAGO,EAAGC,EAAGd,EAAEoB,EAAI,GAAI,EAAG,WACnCN,EAAIC,MAAMD,EAAGT,EAAGC,EAAGO,EAAGb,EAAEoB,EAAI,IAAK,GAAI,YACrCP,EAAIE,MAAMF,EAAGC,EAAGT,EAAGC,EAAGN,EAAEoB,EAAI,GAAI,IAAK,WACrCd,EAAIS,MAAMT,EAAGO,EAAGC,EAAGT,EAAGL,EAAEoB,EAAI,GAAI,GAAI,YACpCf,EAAIU,MAAMV,EAAGC,EAAGO,EAAGC,EAAGd,EAAEoB,EAAI,IAAK,GAAI,YACrCN,EAAIC,MAAMD,EAAGT,EAAGC,EAAGO,EAAGb,EAAEoB,EAAI,GAAI,GAAI,UACpCP,EAAIE,MAAMF,EAAGC,EAAGT,EAAGC,EAAGN,EAAEoB,EAAI,GAAI,GAAI,YAGpCf,EAAIW,MAAMX,EAFVC,EAAIS,MAAMT,EAAGO,EAAGC,EAAGT,EAAGL,EAAEoB,EAAI,IAAK,IAAK,YAEtBP,EAAGC,EAAGd,EAAEoB,EAAI,GAAI,GAAI,QACpCN,EAAIE,MAAMF,EAAGT,EAAGC,EAAGO,EAAGb,EAAEoB,EAAI,GAAI,IAAK,YACrCP,EAAIG,MAAMH,EAAGC,EAAGT,EAAGC,EAAGN,EAAEoB,EAAI,IAAK,GAAI,YACrCd,EAAIU,MAAMV,EAAGO,EAAGC,EAAGT,EAAGL,EAAEoB,EAAI,IAAK,IAAK,UACtCf,EAAIW,MAAMX,EAAGC,EAAGO,EAAGC,EAAGd,EAAEoB,EAAI,GAAI,GAAI,YACpCN,EAAIE,MAAMF,EAAGT,EAAGC,EAAGO,EAAGb,EAAEoB,EAAI,GAAI,GAAI,YACpCP,EAAIG,MAAMH,EAAGC,EAAGT,EAAGC,EAAGN,EAAEoB,EAAI,GAAI,IAAK,WACrCd,EAAIU,MAAMV,EAAGO,EAAGC,EAAGT,EAAGL,EAAEoB,EAAI,IAAK,IAAK,YACtCf,EAAIW,MAAMX,EAAGC,EAAGO,EAAGC,EAAGd,EAAEoB,EAAI,IAAK,EAAG,WACpCN,EAAIE,MAAMF,EAAGT,EAAGC,EAAGO,EAAGb,EAAEoB,GAAI,IAAK,WACjCP,EAAIG,MAAMH,EAAGC,EAAGT,EAAGC,EAAGN,EAAEoB,EAAI,GAAI,IAAK,WACrCd,EAAIU,MAAMV,EAAGO,EAAGC,EAAGT,EAAGL,EAAEoB,EAAI,GAAI,GAAI,UACpCf,EAAIW,MAAMX,EAAGC,EAAGO,EAAGC,EAAGd,EAAEoB,EAAI,GAAI,GAAI,WACpCN,EAAIE,MAAMF,EAAGT,EAAGC,EAAGO,EAAGb,EAAEoB,EAAI,IAAK,IAAK,WACtCP,EAAIG,MAAMH,EAAGC,EAAGT,EAAGC,EAAGN,EAAEoB,EAAI,IAAK,GAAI,WAGrCf,EAAIY,MAAMZ,EAFVC,EAAIU,MAAMV,EAAGO,EAAGC,EAAGT,EAAGL,EAAEoB,EAAI,GAAI,IAAK,WAErBP,EAAGC,EAAGd,EAAEoB,GAAI,GAAI,WAChCN,EAAIG,MAAMH,EAAGT,EAAGC,EAAGO,EAAGb,EAAEoB,EAAI,GAAI,GAAI,YACpCP,EAAII,MAAMJ,EAAGC,EAAGT,EAAGC,EAAGN,EAAEoB,EAAI,IAAK,IAAK,YACtCd,EAAIW,MAAMX,EAAGO,EAAGC,EAAGT,EAAGL,EAAEoB,EAAI,GAAI,IAAK,UACrCf,EAAIY,MAAMZ,EAAGC,EAAGO,EAAGC,EAAGd,EAAEoB,EAAI,IAAK,EAAG,YACpCN,EAAIG,MAAMH,EAAGT,EAAGC,EAAGO,EAAGb,EAAEoB,EAAI,GAAI,IAAK,YACrCP,EAAII,MAAMJ,EAAGC,EAAGT,EAAGC,EAAGN,EAAEoB,EAAI,IAAK,IAAK,SACtCd,EAAIW,MAAMX,EAAGO,EAAGC,EAAGT,EAAGL,EAAEoB,EAAI,GAAI,IAAK,YACrCf,EAAIY,MAAMZ,EAAGC,EAAGO,EAAGC,EAAGd,EAAEoB,EAAI,GAAI,EAAG,YACnCN,EAAIG,MAAMH,EAAGT,EAAGC,EAAGO,EAAGb,EAAEoB,EAAI,IAAK,IAAK,UACtCP,EAAII,MAAMJ,EAAGC,EAAGT,EAAGC,EAAGN,EAAEoB,EAAI,GAAI,IAAK,YACrCd,EAAIW,MAAMX,EAAGO,EAAGC,EAAGT,EAAGL,EAAEoB,EAAI,IAAK,GAAI,YACrCf,EAAIY,MAAMZ,EAAGC,EAAGO,EAAGC,EAAGd,EAAEoB,EAAI,GAAI,GAAI,WACpCN,EAAIG,MAAMH,EAAGT,EAAGC,EAAGO,EAAGb,EAAEoB,EAAI,IAAK,IAAK,YACtCP,EAAII,MAAMJ,EAAGC,EAAGT,EAAGC,EAAGN,EAAEoB,EAAI,GAAI,GAAI,WACpCd,EAAIW,MAAMX,EAAGO,EAAGC,EAAGT,EAAGL,EAAEoB,EAAI,GAAI,IAAK,WAErCf,EAAIN,QAAQM,EAAGgB,GACff,EAAIP,QAAQO,EAAGgB,GACfT,EAAId,QAAQc,EAAGU,GACfT,EAAIf,QAAQe,EAAGU,GAEjB,MAAO,CAACnB,EAAGC,EAAGO,EAAGC,GASnB,SAASY,UAAUC,GACjB,IAAIP,EACAQ,EAAS,GACTC,EAA0B,GAAfF,EAAMF,OACrB,IAAKL,EAAI,EAAGA,EAAIS,EAAUT,GAAK,EAC7BQ,GAAUE,OAAOC,aAAcJ,EAAMP,GAAK,KAAOA,EAAI,GAAM,KAE7D,OAAOQ,EAUT,SAASI,UAAUL,GACjB,IAAIP,EACAQ,EAAS,GAEb,IADAA,GAAQD,EAAMF,QAAU,GAAK,QAAKQ,EAC7Bb,EAAI,EAAGA,EAAIQ,EAAOH,OAAQL,GAAK,EAClCQ,EAAOR,GAAK,EAEd,IAAIc,EAAyB,EAAfP,EAAMF,OACpB,IAAKL,EAAI,EAAGA,EAAIc,EAASd,GAAK,EAC5BQ,EAAOR,GAAK,KAAiC,IAA1BO,EAAMQ,WAAWf,EAAI,KAAcA,EAAI,GAE5D,OAAOQ,EA4CT,SAASQ,SAAST,GAChB,IAEI3B,EACAoB,EAFAQ,EAAS,GAGb,IAAKR,EAAI,EAAGA,EAAIO,EAAMF,OAAQL,GAAK,EACjCpB,EAAI2B,EAAMQ,WAAWf,GACrBQ,GANW,mBAMMS,OAAQrC,IAAM,EAAK,IANzB,mBAMwCqC,OAAW,GAAJrC,GAE5D,OAAO4B,EAST,SAASU,aAAaX,GACpB,OAAOY,SAASC,mBAAmBb,IASrC,SAASc,OAAOlC,GACd,OAhEF,SAASmC,QAAQnC,GACf,OAAOmB,UAAUR,QAAQc,UAAUzB,GAAe,EAAXA,EAAEkB,SA+DlCiB,CAAQJ,aAAa/B,IAkB9B,SAASoC,WAAWC,EAAG9B,GACrB,OAxEF,SAAS+B,YAAYC,EAAKC,GACxB,IAAI3B,EAIA4B,EAHAC,EAAOjB,UAAUc,GACjBI,EAAO,GACPC,EAAO,GAMX,IAJAD,EAAK,IAAMC,EAAK,SAAMlB,EAClBgB,EAAKxB,OAAS,KAChBwB,EAAO/B,QAAQ+B,EAAmB,EAAbH,EAAIrB,SAEtBL,EAAI,EAAGA,EAAI,GAAIA,GAAK,EACvB8B,EAAK9B,GAAe,UAAV6B,EAAK7B,GACf+B,EAAK/B,GAAe,WAAV6B,EAAK7B,GAGjB,OADA4B,EAAO9B,QAAQgC,EAAKE,OAAOpB,UAAUe,IAAQ,IAAoB,EAAdA,EAAKtB,QACjDC,UAAUR,QAAQiC,EAAKC,OAAOJ,GAAO,MAyDrCH,CAAYP,aAAaM,GAAIN,aAAaxB,IAuBnD,SAASuC,IAAIC,EAAQR,EAAKS,GACxB,OAAKT,EAMAS,EAGEZ,WAAWG,EAAKQ,GAxBzB,SAASE,WAAWZ,EAAG9B,GACrB,OAAOsB,SAASO,WAAWC,EAAG9B,IAqBrB0C,CAAWV,EAAKQ,GANlBC,EAGEd,OAAOa,GAvClB,SAASG,OAAOlD,GACd,OAAO6B,SAASK,OAAOlC,IAoCZkD,CAAOH,GAcqBI,EAAOC,QAC9CD,UAAiBL,IAEjBvD,EAAEuD,IAAMA,IAxXX,CA0XEO,KCnWGC,EAAY,GAELC,EAA4B,mBAATC,KAAyD,mBAA3BA,IAAIC,UAAUC,QAkBtEC,GAhBuB,cAExBJ,SAI4B,GAA1B,IAAIC,IAAI,CAAC,CAAC,EAAG,KAAKI,KACrB,OAAO,EAET,MAAOC,KAToB,GAgBK,mBAATC,KAAyD,mBAA3BA,IAAIL,UAAUC,UAExC,cAExBC,EACJ,QAG8B,GAAxB,IAAIG,IAAI,CAAC,EAAG,IAAIF,KACnB,OAAO,EAET,MAAOC,WAGA,GAZoB,GAwBzBN,GAEHQ,WAAW,SAASA,mBAEfC,EAAM,IAAIR,uBAFiBS,2BAAAA,gCAINA,+CAAf1B,OAAK2B,OACdF,EAAIG,IAAI5B,EAAK2B,UACPF,GAGRI,UAAU,SAASA,QAAQJ,EAAKzB,EAAK2B,GAEhCF,EAAIK,YAAcb,IAAIC,UACzBO,EAAIG,IAAI5B,EAAK2B,GAEbF,EAAIzB,GAAO2B,GAGbI,YAAY,SAASA,mBAEb,IAAId,KAGZe,UAAU,SAASA,QAAQP,EAAKzB,EAAK2B,UAEhCF,EAAIK,YAAcb,IAAIC,UAClBO,EAAIQ,IAAIjC,GAERyB,EAAIzB,MAKbwB,WAAW,SAASA,mBAEfC,EAAM,sBAFqBC,2BAAAA,gCAINA,+CAAf1B,OAAK2B,OACdF,EAAIzB,GAAO2B,SACLF,GAGRI,UAAU,SAASA,QAAQJ,EAAKzB,EAAK2B,GAEpCF,EAAIzB,GAAO2B,GAGZI,YAAY,SAASA,kBAEb,IAGRC,UAAU,SAASA,QAAQP,EAAKzB,EAAK2B,UAE7BF,EAAIzB,KASZkC,YAFGd,EAES,SAASc,mBAEb,IAAIX,KAKA,SAASW,mBAEb,IAAIC,OAIFC,EAAW,SAASA,mBAE1BR,EAAMM,iCAFgCR,2BAAAA,gCAIzBA,sBAARW,OACRT,EAAIU,IAAID,UACFT,GAID,SAASW,SAASC,EAAMC,GAE9BA,EAAEvB,UAAUwB,UAAYF,EACxBzB,EAAUyB,GAAQC,EAIZ,SAASE,MAAMC,EAAKC,OAEtBC,EAAU,IAAIC,EAAQF,UAC1BC,EAAQE,KAAKJ,GACNE,EAAQG,SAMT,SAASC,OAAMjD,EAAMkD,UAEb,IAAIC,EAAQnD,EAAMkD,GACjBE,WAIHN,oCAGAF,yDAAO,wCAEbA,OAASA,OACT5C,KAAO,QACPqD,OAAS,OACTC,eAAiB,QACjBC,WAAa,QACbC,UAAY,iEAGZC,MAEe,OAAhB5C,KAAK+B,WAEH,IAAIvE,EAAI,EAAGA,EAAIwC,KAAKwC,SAAUhF,OAC7B2B,KAAK0D,KAAK7C,KAAK+B,aAIjB/B,KAAKb,KAAKtB,QACbmC,KAAKb,KAAK0D,KAAK,UAEZ1D,KAAK0D,KAAKD,8BAZDE,mCAAAA,uBAcVA,EAAKjF,OACT,KACKkF,EAAY/C,KAAK+B,YAChBA,OAAS,wCACEe,uCAAPE,eACHd,KAAKc,uCACNjB,OAASgB,EAGK,OAAhB/C,KAAK+B,QACR/B,KAAKb,KAAK0D,KAAK,qDAMT7C,KAAKb,KAAK8D,KAAK,sCAGlBnB,MAEQ,OAARA,EACH9B,KAAKkD,MAAM,UACP,GAAmB,kBAARpB,EACf9B,KAAKkD,MAAMpB,EAAM,KAAO,WACpB,GAAmB,iBAARA,EAChB,KACKqB,EAAQC,KAAKC,MAAMvB,IAAQA,EAAO,IAAM,SACvCoB,MAAMC,EAAOrB,QAEd,GAAmB,iBAARA,EAChB,KACKwB,EAAQtD,KAAKyC,eAAeX,WACV,IAAXwB,OAELJ,MAAM,IAAMI,OAGlB,MACMb,eAAeX,GAAO9B,KAAK2C,gBAC5BT,KAAOqB,UAAUzB,GAAK0B,QAAQ,IAAK,cAClCN,MAAM,IAAMhB,YAGd,GAAIuB,SAAS3B,GACjB9B,KAAKkD,MAAM,IAAKpB,EAAI4B,IAAK5B,EAAI6B,IAAK7B,EAAIpF,IAAKoF,EAAIrF,UAC3C,GAAImH,QAAQ9B,GAChB9B,KAAKkD,MAAM,IAAKpB,EAAI+B,OAAQ/B,EAAIgC,QAAShC,EAAIiC,YACzC,GAAIC,YAAYlC,GACpB9B,KAAKkD,MAAM,IAAKpB,EAAImC,cAAenC,EAAIoC,WAAW,EAAGpC,EAAIqC,UAAWrC,EAAIsC,WAAYtC,EAAIuC,aAAcvC,EAAIwC,aAAsC,IAAxBxC,EAAIyC,wBACxH,GAAIC,aAAa1C,GACrB9B,KAAKkD,MAAM,IAAKpB,EAAI2C,OAAQ3C,EAAI4C,UAAW5C,EAAI6C,qBAC3C,GAAIC,cAAc9C,GACtB9B,KAAKkD,MAAM,IAAKpB,EAAI+C,eAChB,GAAI/C,aAAegD,GACvB9E,KAAKkD,MAAM,IAAKpB,EAAIiD,MAAOjD,EAAIkD,WAC3B,GAAIlD,EAAIF,WAAaE,EAAImD,UAC9B,IACKnD,EAAIoD,OACR,KACK5B,EAAQtD,KAAK0C,WAAWZ,EAAIoD,gBACX,IAAV5B,mBAELJ,MAAM,IAAMI,QAGbZ,WAAWZ,EAAIoD,QAAUlF,KAAK2C,iBAE/BO,MAAM,IAAKpB,EAAIF,aAClB5B,KAAKwC,OACPV,EAAImD,UAAUjF,QACZA,KAAKwC,YACFU,MAAM,UAEP,GAAIiC,QAAQrD,GACjB,MACMoB,MAAM,OACTlD,KAAKwC,0CACUV,uCAARP,eACHW,KAAKX,oCACTvB,KAAKwC,YACFU,MAAM,UAEP,GAAIkC,EAAOtD,QAEVoB,MAAM,OACTlD,KAAKwC,OACPV,EAAIzB,QAAQ,SAASQ,EAAO3B,QACtBgD,KAAKhD,QACLgD,KAAKrB,IACRb,QACDA,KAAKwC,YACFU,MAAM,UAEP,GAAImC,EAAQvD,GACjB,KAGM,IAAI5C,UAFJgE,MAAM,OACTlD,KAAKwC,OACSV,OAEVI,KAAKhD,QACLgD,KAAKJ,EAAI5C,MAEbc,KAAKwC,YACFU,MAAM,SAEP,CAAA,IAAIoC,OAAOxD,GAWf,MAAM,IAAIyD,EAAW,qCAAuCC,OAAM1D,SAT7DoB,MAAM,OACTlD,KAAKwC,OACPV,EAAIzB,QAAQ,SAASQ,QACfqB,KAAKrB,IACRb,QACDA,KAAKwC,YACFU,MAAM,qBAQDZ,8BAGAnD,EAAMkD,sCAEZlD,KAAOA,OACPsG,IAAM,OACNC,SAAW,QACXrD,cAAgC,IAAdA,EAA4B,KAAOA,OACrDsD,MAAQ,6EAMT3F,KAAKyF,KAAOzF,KAAKb,KAAKtB,OACzB,MAAM,IAAI0H,EAAW,6BACfvF,KAAKb,KAAKV,OAAOuB,KAAKyF,oEAMzBzF,KAAKyF,KAAOzF,KAAKb,KAAKtB,OAClB,KACDmC,KAAKb,KAAKV,OAAOuB,KAAKyF,qEAMzBG,EAAW,OAGf,IACK5F,KAAKyF,KAAOzF,KAAKb,KAAKtB,OACzB,MAAM,IAAI0H,EAAW,kCAAoCvF,KAAKyF,IAAM,cAAgBzF,KAAK2F,MAAM1C,KAAK,UACjGhG,EAAI+C,KAAKb,KAAKV,OAAOuB,KAAKyF,WACzBxI,EAAE4I,MAAMD,GACZ,OAAO3I,qCAKLsD,GAEAP,KAAKyF,IAAIlF,EAAOP,KAAKnC,SACxB0C,EAAOP,KAAKnC,OAAOmC,KAAKyF,SACrBK,EAAS9F,KAAKb,KAAK4G,UAAU/F,KAAKyF,IAAKzF,KAAKyF,IAAIlF,eAC/CkF,KAAOlF,EACLuF,4CAML9F,KAAKyF,4DAMHO,EAAY,oBAAqBnF,EAAQ,KAE7C,KACK5D,EAAI+C,KAAKiG,mBACH,OAANhJ,IAAcA,EAAE4I,MAAMG,GAG1B,KACKF,EAASI,WAAWrF,MACpBsF,MAAML,GACT,MAAM,IAAIP,EAAW,uBAAyBC,OAAM,SAAW,gBAAkBxF,KAAKyF,IAAM,cAAgBzF,KAAK2F,MAAM1C,KAAK,aACtH6C,EANPjF,GAAS5D,qEAaPmJ,EAASpG,KAAK0F,SAAS7H,mBACtB6H,SAAS7C,KAAK,MACZuD,0DAGQA,EAAQvF,QAElB6E,SAASU,GAAUvF,kDAGbwF,EAAYxI,OAEnByI,EAAQtG,KAAKuG,KAAK1I,MAClByI,EAAMzI,QAAUA,EACnB,MAAM,IAAI0H,EAAW,iBAAmBC,OAAM,KAAOa,EAAaC,GAAS,gBAAkBtG,KAAKyF,IAAM,cAAgBzF,KAAK2F,MAAM1C,KAAK,UACrIuD,EAAYC,SAASH,EAAO,OAC5BH,MAAMK,GACT,MAAM,IAAIjB,EAAW,iBAAmBC,OAAM,KAAOa,EAAaC,GAAS,gBAAkBtG,KAAKyF,IAAM,cAAgBzF,KAAK2F,MAAM1C,KAAK,aAClI/E,OAAOC,aAAaqI,2CAOvBV,EADAY,EAAW1G,KAAK2G,uBAEZD,OAEF,WACG1G,KAAK0F,SAAS1F,KAAK4G,kBACtB,QACA,UACa,MAAbF,GACH1G,KAAK0F,SAAS7C,KAAK,MACb,SACH,QACA,OAEW,OADfiD,EAAS9F,KAAK6G,YAEbf,GAAS,MACL,CAAA,GAAe,MAAXA,EAGR,MAAM,IAAIP,EAAW,qDAAuDC,OAAMM,GAAU,gBAAkB9F,KAAKyF,IAAM,cAAgBzF,KAAK2F,MAAM1C,KAAK,MAFzJ6C,GAAS,QAGO,MAAbY,GACH1G,KAAK0F,SAAS7C,KAAKiD,GACbA,MACH,QACA,QACA,QACA,WACJA,EAAS9F,KAAK4G,aACG,MAAbF,GAAiC,MAAbA,GACvB1G,KAAK0F,SAAS7C,KAAKiD,GACbA,MACH,QACA,IACJA,EAAS,WACLgB,EAAY9G,KAAK2G,kBAErB,KACK1J,EAAI+C,KAAK6G,cACT5J,GAAK6J,EACR,SACQ,MAAL7J,EACJ,KACK8J,EAAK/G,KAAK6G,WACJ,MAANE,EACHjB,EAAOjD,KAAK,MACE,KAANkE,EACRjB,EAAOjD,KAAK,MACE,KAANkE,EACRjB,EAAOjD,KAAK,MACE,KAANkE,EACRjB,EAAOjD,KAAK,MACE,KAANkE,EACRjB,EAAOjD,KAAK,MACE,KAANkE,EACRjB,EAAOjD,KAAK,MACE,KAANkE,EACRjB,EAAOjD,KAAK,KACE,KAANkE,EACRjB,EAAOjD,KAAK,KACE,KAANkE,EACRjB,EAAOjD,KAAK,KACE,KAANkE,EACRjB,EAAOjD,KAAK7C,KAAKgH,YAAY,IAAK,IACpB,KAAND,EACRjB,EAAOjD,KAAK7C,KAAKgH,YAAY,IAAK,IACpB,KAAND,EACRjB,EAAOjD,KAAK7C,KAAKgH,YAAY,IAAK,IAElClB,EAAOjD,KAAK,KAAOkE,QAGpBjB,EAAOjD,KAAK5F,UAEd6I,EAASA,EAAO7C,KAAK,IACJ,MAAbyD,GACH1G,KAAK0F,SAAS7C,KAAKiD,GACbA,MACH,QACA,WACJA,EAAS,IAAImB,GACI,MAAbP,GACH1G,KAAK0F,SAAS7C,KAAKiD,GACpBA,EAAOoB,GAAKlH,KAAKuC,OACjBuD,EAAOqB,GAAKnH,KAAKuC,OACjBuD,EAAOsB,GAAKpH,KAAKuC,OACjBuD,EAAOuB,GAAKrH,KAAKuC,OACVuD,MACH,QACA,QAEAjC,EAAO7D,KAAKuC,OACZuB,EAAQ9D,KAAKuC,OACbwB,EAAM/D,KAAKuC,cACfuD,EAAS,IAAIwB,GAAMzD,EAAMC,EAAOC,GACf,MAAb2C,GACH1G,KAAK0F,SAAS7C,KAAKiD,GACbA,MAEH,QACA,WACJA,EAAS,IAAIyB,MACNC,YAAYxH,KAAKuC,QACxBuD,EAAO2B,QAAQ,GACf3B,EAAO4B,SAAS1H,KAAKuC,OAAS,GAC9BuD,EAAO2B,QAAQzH,KAAKuC,QACpBuD,EAAO6B,SAAS3H,KAAKuC,QACrBuD,EAAO8B,WAAW5H,KAAKuC,QACvBuD,EAAO+B,WAAW7H,KAAKuC,QACvBuD,EAAOgC,gBAAgB9H,KAAKuC,OAAO,KAClB,MAAbmE,GACH1G,KAAK0F,SAAS7C,KAAKiD,GACbA,MACH,QACA,WACJA,EAAS,IAAIiC,IACNC,MAAQhI,KAAKuC,OACpBuD,EAAOmC,SAAWjI,KAAKuC,OACvBuD,EAAOoC,cAAgBlI,KAAKuC,OACX,MAAbmE,GACH1G,KAAK0F,SAAS7C,KAAKiD,GACbA,MACH,QACA,WACJA,EAAS,IAAIhB,GACI,MAAb4B,GACH1G,KAAK0F,SAAS7C,KAAKiD,GACpBA,EAAOf,MAAQ/E,KAAKuC,OACpBuD,EAAOd,KAAOhF,KAAKuC,OACZuD,MACH,QACA,WACJA,EAAS,IAAIqC,GACI,MAAbzB,GACH1G,KAAK0F,SAAS7C,KAAKiD,GACpBA,EAAOsC,QAAUpI,KAAKuC,OACfuD,MACH,QACA,aACCH,MAAM9C,KAAK,QAChBiD,EAAS,GACQ,MAAbY,GACH1G,KAAK0F,SAAS7C,KAAKiD,GAIF,OADjBY,EAAW1G,KAAK2G,uBAGX0B,SACLvC,EAAOjD,KAAK7C,KAAKuC,oBAEboD,MAAM2C,MACJxC,MACH,QACA,QACA,QACA,QACC5F,IAAyB,KAAZwG,GAA+B,KAAZA,GACpC,MAAM,IAAInB,EAAW,sDAAwDvF,KAAKyF,IAAM,cAAgBzF,KAAK2F,MAAM1C,KAAK,UACzH6C,EAAS7E,mBACJ0E,MAAM9C,KAAkB,MAAb6D,GAAiC,MAAbA,EAAmB,OAAS,SAC/C,MAAbA,GAAiC,MAAbA,GACvB1G,KAAK0F,SAAS7C,KAAKiD,GAIF,OADjBY,EAAW1G,KAAK2G,kBADjB,MAIM0B,aACDnJ,EAAMc,KAAKuC,OACX1B,EAAQb,KAAKuC,OACjBxB,UAAQ+E,EAAQ5G,EAAK2B,eAEjB8E,MAAM2C,MACJxC,MACH,QACA,aACCH,MAAM9C,KAAK,OAChBiD,EAASxE,IACQ,MAAboF,GACH1G,KAAK0F,SAAS7C,KAAKiD,GAIF,OADjBY,EAAW1G,KAAK2G,uBAGX0B,SACLvC,EAAOtE,IAAIxB,KAAKuC,oBAEZoD,MAAM2C,MACJxC,MACH,QACA,QAEAM,EACa,MAAbM,IACHN,EAASpG,KAAKuI,yBAGXC,EAFA9G,EAAO1B,KAAKuC,eACXoD,MAAM9C,KAAKnB,GAEM,OAAlB1B,KAAKqC,cAGoB,KAD5BmG,EAAcxI,KAAKqC,SAASX,MAE3B8G,EAAcvI,EAAUyB,IAGzB8G,EAAcvI,EAAUyB,QACG,IAAjB8G,EACV,MAAM,IAAIjD,EAAW,6BAA+BC,OAAM9D,GAAQ,gBAAkB1B,KAAKyF,IAAM,cAAgBzF,KAAK2F,MAAM1C,KAAK,SAChI6C,EAAS,IAAI0C,EACI,MAAb9B,GACH1G,KAAKyI,gBAAgBrC,EAAQN,GAC9BA,EAAO4C,UAAU1I,MAEA,OADjB0G,EAAW1G,KAAK2G,iBAEf,MAAM,IAAIpB,EAAW,6CAA+C7D,EAAO,mBAAqB8D,OAAMkB,GAAY,gBAAkB1G,KAAKyF,IAAM,cAAgBzF,KAAK2F,MAAM1C,KAAK,kBAC3K0C,MAAM2C,MACJxC,gBAGD,IAAIP,EAAW,oBAAsBC,OAAMkB,GAAY,gBAAkB1G,KAAKyF,IAAM,cAAgBzF,KAAK2F,MAAM1C,KAAK,6DAOxH0F,EAAO3I,WACJ,CACN4I,KAAM,oBAEDlC,EAAWiC,EAAKhC,uBAKpBgC,EAAKN,SACW,KAAZ3B,EACI,CAACmC,MAAM,GAEP,CAACA,MAAM,EAAOhI,MAAO8H,EAAKpG,yBAWhCuG,EAAe,gBACfC,EAAgB,sCAChBC,EAAgB,mEAChBC,EAAgB,uBAqBf,SAASC,OAAOrI,EAAOsI,UAEzBtI,EAAQ,EACJ,EACCA,EAAQsI,EACTA,EAEAtI,EAaF,SAASuI,eAAeC,EAAS1H,EAAGD,EAAM4H,EAAiBC,EAAWC,EAAcC,EAAa3G,EAAM4G,OAEzGC,KACAF,KAEe,OAAdF,EACJ,IACKzG,EAAKjF,OACR,MAAM,IAAI+L,EAAcpE,OAAM7D,GAAK,0CACpCgI,EAAY,CAACD,QAGbC,EAAY,CAACJ,EAAUM,WAAWnI,EAAMoB,EAAM4G,QAGhD,IACmB,OAAdH,EACH,MAAM,IAAIK,EAAcpE,OAAM7D,GAAK,0CACpCgI,EAAYJ,EAAUO,UAAUpI,EAAMoB,EAAM4G,UAEzCF,GACHG,EAAUI,QAAQV,GACZ1H,EAAEqI,MAAMV,EAAiBK,GAG1B,SAASM,cAAcZ,EAAS1H,EAAGmB,EAAM4G,OAE3ChI,EAAOC,EAAEuI,WAAavI,EAAED,aACK,IAAtBC,EAAEwI,qBAAkE,IAAxBxI,EAAEyI,uBAAqE,IAAzBzI,EAAE0I,kBACtG,MAAM,IAAIC,EAAU9E,OAAM7D,GAAK,kCACzByH,eAAeC,EAAS1H,EAAGD,EAAM,KAAMC,EAAEwI,eAAgBxI,EAAE0I,kBAAmB1I,EAAEyI,iBAAkBtH,EAAM4G,GAGzG,SAASa,YAAYlB,EAASvH,EAAKgB,EAAM4G,WAER,IAA5B5H,EAAI0I,yBAA4E,IAA9B1I,EAAI2I,2BAA+E,IAA/B3I,EAAI4I,sBACpH,MAAM,IAAIJ,EAAU9E,OAAM1D,GAAO,kCAC3BsH,eAAeC,EAASvH,EAAI6I,SAAU7I,EAAIJ,KAAMI,EAAKA,EAAI0I,mBAAoB1I,EAAI4I,sBAAuB5I,EAAI2I,qBAAsB3H,EAAM4G,GAGzI,SAASkB,YAAYvB,EAASvH,EAAKgB,EAAM4G,WAEN,IAA9B5H,EAAI+I,2BAAgF,IAAhC/I,EAAIgJ,6BAAmF,IAAjChJ,EAAIiJ,wBACxH,MAAM,IAAIT,EAAU9E,OAAM1D,GAAO,oCAC3BsH,eAAeC,EAASvH,EAAIkJ,WAAYlJ,EAAIJ,KAAMI,EAAKA,EAAI+I,qBAAsB/I,EAAIiJ,wBAAyBjJ,EAAIgJ,uBAAwBhI,EAAM4G,GAGjJ,SAASuB,MAAM5B,EAAS1H,EAAGmB,EAAM4G,MAErB,mBAAP/H,EACV,OAAOsI,cAAcZ,EAAS1H,EAAGmB,EAAM4G,GACnC,GAAI/H,GAA4B,mBAAhBA,EAAEgJ,SACtB,OAAOJ,YAAYlB,EAAS1H,EAAGmB,EAAM4G,GAErC,MAAM,IAAIY,EAAUY,MAAMvJ,GAAK,oBAG1B,SAASwJ,WAAWC,EAAQvK,MAE7BsE,QAAQiG,GAGb,SACKC,EAAW,GACXC,EAAOC,MAAM1K,GAERrD,EAAI,KAAKA,EAClB,KACK+D,EAAO+J,EAAK1C,UAEZrH,EAAKsH,KACT,IACKrL,IAAM4N,EAAOvN,OAChB,MAEA,MAAM,IAAI0H,EAAW,QAAU6F,EAAOvN,OAAS,UAA8B,IAAlBuN,EAAOvN,OAAe,GAAK,KAAO,mBAAqBL,QAI/GA,EAAI4N,EAAOvN,QAGd,MAAM,IAAI0H,EAAW,uCAAyC6F,EAAOvN,OAAS,KAF9EwN,EAAWA,EAAS7L,OAAO2L,WAAWC,EAAO5N,GAAI+D,EAAKV,eAKlDwK,EAzBP,MAAO,CAAC,CAACD,EAAQvK,IA6BZ,SAAS2K,cAAcC,SAEzBC,EAAW,GACXC,EAAQ,EAAGC,GAAS,+BACPH,kCACjB,KADSI,aAEa,iBAAVA,EAEVF,GAASE,EACTD,GAAS,MAGV,IACKA,EACJ,CACCF,EAAS7I,KAAK,UACT,IAAIiJ,EAAI,EAAGA,EAAIH,IAASG,EAC5BJ,EAAS7I,KAAK,MACf+I,GAAS,EAEVF,EAAS7I,KAAKgJ,0CAGZD,GACHF,EAAS7I,KAAK,MACR6I,EAASzI,KAAK,IAIf,SAAS8I,IAAIC,EAAMC,OAErBC,EAAc,CAAC,UAAW,aAE1BF,GAAgC,mBAAjBA,EAAKG,OACvB,OAAOH,EAAKG,OAAOF,GACf,GAAIA,GAAgC,mBAAjBA,EAAKE,OAC5B,OAAOF,EAAKE,OAAOH,GACf,GAAa,OAATA,EACR,OAAgB,OAATC,EACH,IAA0C,GAAtCC,EAAYE,gBAAeJ,WAEO,GAAtCE,EAAYE,gBAAeH,KACvBD,GAAQC,EAIZ,GAAqB,iBAAVD,QAEM,iBAAVC,GACHD,GAAQC,EAIZ,GAAIjI,YAAYgI,WAEhBhI,YAAYiI,IACRD,EAAKK,WAAaJ,EAAKI,UAI3B,GAAIlH,QAAQ6G,GACjB,IACK7G,QAAQ8G,GACZ,IAEKD,IAASC,EACZ,OAAO,KACJD,EAAKnO,QAAUoO,EAAKpO,OACvB,OAAO,MACH,IAAIL,EAAI,EAAGA,EAAIwO,EAAKnO,SAAUL,MAE7BuO,IAAIC,EAAKxO,GAAIyO,EAAKzO,WACf,SAEF,EAGP,OAAO,EAEJ,GAAI8O,UAAUN,GACnB,IACKM,UAAUL,GACd,IAEKD,IAASC,EACZ,OAAO,MAEH,IAAI/M,KAAO8M,EAChB,KACKC,EAAKM,eAAerN,GAMvB,OAAO,MAJF6M,IAAIC,EAAK9M,GAAM+M,EAAK/M,IACxB,OAAO,MAML,IAAIA,KAAO+M,MAEVD,EAAKO,eAAerN,GACxB,OAAO,SAEF,EAEH,GAAIkG,EAAO6G,GAChB,KAEM,IAAI/M,KAAO8M,EAChB,KACKC,EAAKO,IAAItN,GAMZ,OAAO,MAJF6M,IAAIC,EAAK9M,GAAM+M,EAAK9K,IAAIjC,IAC5B,OAAO,MAMN4G,GAAS,SACbmG,EAAK5L,QAAQ,SAASQ,EAAO3B,GACvB8M,EAAKO,eAAerN,KACxB4G,GAAS,IACR9F,MACI8F,EAGP,OAAO,EAEJ,GAAIV,EAAO4G,GAChB,IACKM,UAAUL,GACd,KASM,IAAI/M,KAPT8M,EAAK3L,QAAQ,SAASQ,EAAO3B,WACvB+M,EAAKM,eAAerN,OAEf6M,IAAIC,EAAK7K,IAAIjC,GAAM+M,EAAK/M,UAA7B,IAEHc,MAEaiM,MAEVD,EAAKQ,IAAItN,GACb,OAAO,SAEF,EAEH,GAAIkG,EAAO6G,GAChB,IAEKD,IAASC,EACZ,OAAO,KACJD,EAAKzL,MAAQ0L,EAAK1L,KACrB,OAAO,MACJuF,GAAS,SAEbkG,EAAK3L,QAAQ,SAASQ,EAAO3B,GACvB+M,EAAKO,IAAItN,IAEJ6M,IAAIC,EAAK7K,IAAIjC,GAAM+M,EAAK9K,IAAIjC,MADrC4G,GAAS,KAIJA,EAGP,OAAO,EAEJ,GAAIR,OAAO0G,GAChB,IAEK1G,OAAO2G,GACX,IAEKD,IAASC,EACZ,OAAO,KACJD,EAAKzL,MAAQ0L,EAAK1L,KACrB,OAAO,MACJuF,GAAS,SACbkG,EAAK3L,QAAQ,SAASQ,GAChBoL,EAAKO,IAAI3L,KACbiF,GAAS,KAEJA,EAGP,OAAO,EAGR,OAAOkG,IAASC,EAIX,SAASQ,IAAIT,EAAMC,UAErBD,GAAgC,mBAAjBA,EAAKU,OAChBV,EAAKU,OAAOT,GACXA,GAAgC,mBAAjBA,EAAKS,OACrBT,EAAKS,OAAOV,IAEXD,IAAIC,EAAMC,GAGb,SAASU,aAAaC,EAAUZ,EAAMC,SAEtC,IAAI3B,EAAU,sBAAwBY,MAAMc,GAAQ,IAAMY,EAAW,IAAM1B,MAAMe,IAYjF,SAASY,KAAKD,EAAUZ,EAAMC,OAEhCC,EAAc,CAAC,UAAW,cAEY,GAAtCA,EAAYE,gBAAeJ,SAEY,GAAtCE,EAAYE,gBAAeH,IAC9B,OAAQD,EAAOC,IAASD,EAAOC,QAE5B,GAAqB,iBAAVD,MAEM,iBAAVC,EACV,OAAQD,EAAOC,IAASD,EAAOC,QAE5B,GAAIjI,YAAYgI,OAEhBhI,YAAYiI,GAChB,KACKa,EAAKd,EAAKK,UAAWU,EAAKd,EAAKI,iBAC3BS,EAAKC,IAAOD,EAAKC,SAGtB,GAAI5H,QAAQ6G,OAEZ7G,QAAQ8G,GACZ,IACKD,IAASC,EACZ,OAAO,MACH,IAAIzO,EAAI,EAAGA,EAAIwO,EAAKnO,SAAUL,EACnC,IACKA,GAAKyO,EAAKpO,OACb,OAAO,MACJmP,EAAMH,KAAKD,EAAUZ,EAAKxO,GAAIyO,EAAKzO,OACnCwP,EACH,OAAOA,SAEFf,EAAKpO,OAASmO,EAAKnO,QAAU,EAAI,QAGrC,IAAIyH,OAAO0G,IAASiB,UAAUjB,MAE9B1G,OAAO2G,IAASgB,UAAUhB,IAC9B,SACKiB,GAAU,EACVC,GAAU,EAEL7B,EAAOC,MAAMS,KACtB,KACKzK,EAAO+J,EAAK1C,UACZrH,EAAKsH,KACR,UACIoD,EAAKO,IAAIjL,EAAKV,OACnB,CACCqM,GAAU,aAIP,IAAI5B,EAAOC,MAAMU,KACtB,KACK1K,EAAO+J,EAAK1C,UACZrH,EAAKsH,KACR,UACImD,EAAKQ,IAAIjL,EAAKV,OACnB,CACCsM,GAAU,gBAKRD,EAECC,EACI,KAEA,EAIJA,GACK,EAED,SAIJR,aAAaC,EAAUZ,EAAMC,GAI9B,SAASmB,IAAIpB,EAAMC,OAErBC,EAAc,CAAC,UAAW,aAE1BF,GAAgC,mBAAjBA,EAAKqB,OACvB,OAAOrB,EAAKqB,OAAOpB,GACf,IAA0C,GAAtCC,EAAYE,gBAAeJ,SAEO,GAAtCE,EAAYE,gBAAeH,IAC9B,OAAOD,EAAOC,OAEX,GAAqB,iBAAVD,MAEM,iBAAVC,EACV,OAAOD,EAAOC,OAEX,GAAIjI,YAAYgI,OAEhBhI,YAAYiI,GACf,OAAOD,EAAKK,UAAYJ,EAAKI,eAE1B,GAAIlH,QAAQ6G,OAEZ7G,QAAQ8G,GACZ,IACKD,IAASC,EACZ,OAAO,MACH,IAAIzO,EAAI,EAAGA,EAAIwO,EAAKnO,SAAUL,EACnC,IACKA,GAAKyO,EAAKpO,OACb,OAAO,MACCkO,IAAIC,EAAKxO,GAAIyO,EAAKzO,IAE1B,OAAO4P,IAAIpB,EAAKxO,GAAIyO,EAAKzO,WAEpBwO,EAAKnO,OAASoO,EAAKpO,aAIvB,GAAIyH,OAAO0G,GAChB,IACK1G,OAAO2G,OAEN3G,OAAO2G,GACX,KACM,IAAI/M,KAAO8M,EAEVC,EAAKO,IAAIR,EAAK9M,MAClBgO,SAAU,OAEP,IAAIhO,KAAO+M,EAEVD,EAAKQ,IAAIP,EAAK/M,MAClBiO,SAAU,QAGR,GAAIF,UAAUhB,GACnB,KACM,IAAI/M,KAAO8M,EAEVC,EAAKrL,MAAMoL,EAAK9M,MACpBgO,SAAU,OAEP,IAAIrM,KAASoL,EAAKrL,UAEjBoL,EAAKQ,IAAI3L,GACd,CACCsM,SAAU,eAMT,GAAIF,UAAUhB,OAEd3G,OAAO2G,GACX,KACM,IAAIpL,KAASmL,EAAKpL,UAEjBqL,EAAKO,IAAI3L,GACd,CACCqM,SAAU,YAIP,IAAIhO,KAAO+M,EAEVD,EAAKpL,MAAMqL,EAAK/M,MACpBiO,SAAU,QAGR,GAAIF,UAAUhB,GACnB,KACM,IAAIpL,KAASmL,EAAKpL,UAEjBqL,EAAKrL,MAAMC,GAChB,CACCqM,SAAU,YAIP,IAAIrM,KAASoL,EAAKrL,UAEjBoL,EAAKpL,MAAMC,GAChB,CACCsM,SAAU,eAObR,aAAaC,SAAUZ,EAAMC,UAE1BiB,QAECC,QACI,KAEA,EAIJA,SACK,EAED,EAGVR,aAAa,IAAKX,EAAMC,GAIlB,SAASqB,IAAItB,EAAMC,OAErBC,EAAc,CAAC,UAAW,aAE1BF,GAAgC,mBAAjBA,EAAKuB,OACvB,OAAOvB,EAAKuB,OAAOtB,OACsB,GAAtCC,EAAYE,gBAAeJ,SAEY,GAAtCE,EAAYE,gBAAeH,IAC9B,OAAOD,GAAQC,OAEZ,GAAqB,iBAAVD,MAEM,iBAAVC,EACV,OAAOD,GAAQC,OAEZ,GAAIjI,YAAYgI,OAEhBhI,YAAYiI,GACf,OAAOD,EAAKK,WAAaJ,EAAKI,eAE3B,GAAIlH,QAAQ6G,OAEZ7G,QAAQ8G,GACZ,IACKD,IAASC,EACZ,OAAO,MACH,IAAIzO,EAAI,EAAGA,EAAIwO,EAAKnO,SAAUL,EACnC,IACKA,GAAKyO,EAAKpO,OACb,OAAO,MACCkO,IAAIC,EAAKxO,GAAIyO,EAAKzO,IAE1B,OAAO4P,IAAIpB,EAAKxO,GAAIyO,EAAKzO,WAEpBwO,EAAKnO,QAAUoO,EAAKpO,aAIxB,GAAIyH,OAAO0G,IAASiB,UAAUjB,GACnC,KACKkB,GAAU,EACVC,GAAU,KAEV7H,OAAO2G,OAEN3G,OAAO2G,GAEVD,EAAK3L,QAAQ,SAASQ,GAChBoL,EAAKO,IAAI3L,KACbqM,GAAU,KAEZjB,EAAK5L,QAAQ,SAASQ,GAChBmL,EAAKQ,IAAI3L,KACbsM,GAAU,UAGR,GAAIF,UAAUhB,OAMb,IAAIpL,KAJTmL,EAAK3L,QAAQ,SAASQ,GAChBoL,EAAKrL,MAAMC,KACfqM,GAAU,KAEMjB,EAAKrL,UAEjBoL,EAAKQ,IAAI3L,GACd,CACCsM,GAAU,cAMT,GAAIF,UAAUhB,OAEd3G,OAAO2G,GACX,KACM,IAAIpL,KAASmL,EAAKpL,UAEjBqL,EAAKO,IAAI3L,GACd,CACCqM,GAAU,QAIZjB,EAAK5L,QAAQ,SAASQ,GAChBmL,EAAKpL,MAAMC,KACfsM,GAAU,UAGR,GAAIF,UAAUhB,GACnB,KACM,IAAIpL,KAASmL,EAAKpL,UAEjBqL,EAAKrL,MAAMC,GAChB,CACCqM,GAAU,YAIP,IAAIrM,KAASoL,EAAKrL,UAEjBoL,EAAKpL,MAAMC,GAChB,CACCsM,GAAU,eAObR,aAAaC,SAAUZ,EAAMC,UAE1BiB,EAECC,EACI,KAEA,EAIJA,GACK,EAED,EAGVR,aAAa,KAAMX,EAAMC,GAInB,SAASuB,IAAIxB,EAAMC,OAErBC,EAAc,CAAC,UAAW,aAE1BF,GAAgC,mBAAjBA,EAAKyB,OACvB,OAAOzB,EAAKyB,OAAOxB,OACsB,GAAtCC,EAAYE,gBAAeJ,SAEY,GAAtCE,EAAYE,gBAAeH,IAC9B,OAAOD,EAAOC,OAEX,GAAqB,iBAAVD,MAEM,iBAAVC,EACV,OAAOD,EAAOC,OAEX,GAAIjI,YAAYgI,OAEhBhI,YAAYiI,GACf,OAAOD,EAAKK,UAAYJ,EAAKI,eAE1B,GAAIlH,QAAQ6G,OAEZ7G,QAAQ8G,GACZ,IACKD,IAASC,EACZ,OAAO,MACH,IAAIzO,EAAI,EAAGA,EAAIwO,EAAKnO,SAAUL,EACnC,IACKA,GAAKyO,EAAKpO,OACb,OAAO,MACCkO,IAAIC,EAAKxO,GAAIyO,EAAKzO,IAE1B,OAAOgQ,IAAIxB,EAAKxO,GAAIyO,EAAKzO,WAEpBwO,EAAKnO,OAASoO,EAAKpO,aAIvB,GAAIyH,OAAO0G,IAASiB,UAAUjB,GACnC,KACKkB,GAAU,EACVC,GAAU,KAEV7H,OAAO2G,GAEN3G,OAAO2G,IAEVD,EAAK3L,QAAQ,SAASQ,GAChBoL,EAAKO,IAAI3L,KACbqM,GAAU,KAEZjB,EAAK5L,QAAQ,SAASQ,GAChBmL,EAAKQ,IAAI3L,KACbsM,GAAU,MAGJF,UAAUhB,KAElBD,EAAK3L,QAAQ,SAASQ,GAChBoL,EAAKrL,MAAMC,KACfqM,GAAU,KAEZjB,EAAK5L,QAAQ,SAASQ,GAChBmL,EAAKQ,IAAI3L,KAEbsM,GAAU,WAKT,GAAIF,UAAUhB,OAEd3G,OAAO2G,GACX,KACM,IAAIpL,KAASmL,EAAKpL,UAEjBqL,EAAKO,IAAI3L,GACd,CACCqM,GAAU,QAIZjB,EAAK5L,QAAQ,SAASQ,GAChBmL,EAAKpL,MAAMC,KACfsM,GAAU,UAGR,GAAIF,UAAUhB,GACnB,KACM,IAAIpL,KAASmL,EAAKpL,UAEjBqL,EAAKrL,MAAMC,GAChB,CACCqM,GAAU,YAIP,IAAIrM,KAASoL,EAAKrL,UAEjBoL,EAAKpL,MAAMC,GAChB,CACCsM,GAAU,eAObR,aAAaC,SAAUZ,EAAMC,UAE1BiB,EAECC,EACI,KAEA,EAIJA,GACK,EAED,EAGVR,aAAa,IAAKX,EAAMC,GAIlB,SAASyB,IAAI1B,EAAMC,OAErBC,EAAc,CAAC,UAAW,aAE1BF,GAAgC,mBAAjBA,EAAK2B,OACvB,OAAO3B,EAAK2B,OAAO1B,GACf,IAA0C,GAAtCC,EAAYE,gBAAeJ,SAEO,GAAtCE,EAAYE,gBAAeH,IAC9B,OAAOD,GAAQC,OAEZ,GAAqB,iBAAVD,MAEM,iBAAVC,EACV,OAAOD,GAAQC,OAEZ,GAAIjI,YAAYgI,OAEhBhI,YAAYiI,GACf,OAAOD,EAAKK,WAAaJ,EAAKI,eAE3B,GAAIlH,QAAQ6G,OAEZ7G,QAAQ8G,GACZ,IACKD,IAASC,EACZ,OAAO,MACH,IAAIzO,EAAI,EAAGA,EAAIwO,EAAKnO,SAAUL,EACnC,IACKA,GAAKyO,EAAKpO,OACb,OAAO,MACCkO,IAAIC,EAAKxO,GAAIyO,EAAKzO,IAE1B,OAAOgQ,IAAIxB,EAAKxO,GAAIyO,EAAKzO,WAEpBwO,EAAKnO,QAAUoO,EAAKpO,aAIxB,GAAIyH,OAAO0G,IAASiB,UAAUjB,GACnC,KACKkB,GAAU,EACVC,GAAU,KAEV7H,OAAO2G,OAEN3G,OAAO2G,GAEVD,EAAK3L,QAAQ,SAASQ,GAChBoL,EAAKO,IAAI3L,KACbqM,GAAU,KAEZjB,EAAK5L,QAAQ,SAASQ,GAChBmL,EAAKQ,IAAI3L,KACbsM,GAAU,UAGR,GAAIF,UAAUhB,OAMb,IAAIpL,KAJTmL,EAAK3L,QAAQ,SAASQ,GAChBoL,EAAKrL,MAAMC,KACfqM,GAAU,KAEMjB,EAAKrL,UAEjBoL,EAAKQ,IAAI3L,GACd,CACCsM,GAAU,cAMT,GAAIF,UAAUhB,OAEd3G,OAAO2G,GACX,KACM,IAAIpL,KAASmL,EAAKpL,UAEjBqL,EAAKO,IAAI3L,GACd,CACCqM,GAAU,QAIZjB,EAAK5L,QAAQ,SAASQ,EAAO3B,GACvB8M,EAAKpL,MAAMC,KACfsM,GAAU,UAGR,GAAIF,UAAUhB,GACnB,KACM,IAAIpL,KAASmL,EAAKpL,UAEjBqL,EAAKrL,MAAMC,GAChB,CACCqM,GAAU,YAIP,IAAIrM,KAASoL,EAAKrL,UAEjBoL,EAAKpL,MAAMC,GAChB,CACCsM,GAAU,eAObR,aAAaC,SAAUZ,EAAMC,UAE1BiB,EAECC,EACI,KAEA,EAIJA,GACK,EAED,EAGVR,aAAa,KAAMX,EAAMC,GAInB,SAASV,MAAMzJ,MAED,iBAATA,GAAqBqD,QAAQrD,SAEhC,CACNwB,MAAO,EACPsF,KAAM,uBAED5I,KAAKsD,MAAQxB,EAAIjE,OACb,CAACgD,MAAOiB,EAAI9B,KAAKsD,SAAUuF,MAAM,GAEjC,CAACA,MAAM,KAIb,GAAI+E,QAAQ9L,GAChB,OAAOA,EACH,GAAY,OAARA,GAAyC,mBAAlBA,EAAI+L,SACnC,OAAO/L,EAAI+L,WACP,GAAIzI,EAAOtD,GAChB,KACKgM,EAAO,UACXhM,EAAIzB,QAAQ,SAASQ,EAAO3B,GAC3B4O,EAAKjL,KAAK3D,KAEJ,CACNoE,MAAO,EACPsF,KAAM,uBAED5I,KAAKsD,OAASwK,EAAKjQ,OACf,CAACgL,MAAM,GACR,CAAChI,MAAOiN,EAAK9N,KAAKsD,SAAUuF,MAAM,KAIvC,GAAIvD,OAAOxD,GAChB,KACKiM,EAAS,UACbjM,EAAIzB,QAAQ,SAASkB,GACpBwM,EAAOlL,KAAKtB,KAEN,CACN+B,MAAO,EACPsF,KAAM,uBAED5I,KAAKsD,OAASyK,EAAOlQ,OACjB,CAACgL,MAAM,GACR,CAAChI,MAAOkN,EAAO/N,KAAKsD,SAAUuF,MAAM,KAIzC,GAAIoE,UAAUnL,UAEXyJ,MAAMzJ,EAAIlB,OAEb,GAAI0L,UAAUxK,GACnB,KACKgM,EAAO,OACN,IAAI5O,KAAO4C,EACfgM,EAAKjL,KAAK3D,SACJ,CACNoE,MAAO,EACPsF,KAAM,uBAED5I,KAAKsD,OAASwK,EAAKjQ,OACf,CAACgL,MAAM,GACR,CAAChI,MAAOiN,EAAK9N,KAAKsD,SAAUuF,MAAM,WAItC,IAAIyB,EAAUY,MAAMpJ,GAAO,2BAGlC,SAASyB,UAAUyK,EAAKC,SAEnBnI,EAAS,GACToI,GAAS,EAAOC,GAAS,+BAEfH,kCACd,KADS/Q,aAEC,KAALA,MAEHkR,GAAS,EACLD,EACH,WAEG,GAAS,KAALjR,IAERiR,GAAS,EACLC,GACH,2CAKCC,EAASF,IAAWC,EAAU,IAAM,iCAE1BH,kCACd,KADS/Q,iBAEAA,OAEF,IACJ6I,GAAWsI,GAASnR,EAAK,MAAQA,YAE7B,IACJ6I,GAAWsI,GAASnR,EAAK,MAAQA,YAE7B,KACJ6I,GAAU,iBAEN,KACJA,GAAU,gBAEN,KACJA,GAAU,gBAEN,KACJA,GAAU,wBAGNuI,EAAOpR,EAAEsB,WAAW,GACpB+P,SAeHxI,GADc,KAZdwI,EADGD,EAAO,GACD,EACDA,EAAO,IACN,EACAJ,GAAU,oyHAAoyHM,KAAKtR,GAEpzHoR,GAAQ,IACP,EACDA,GAAQ,MACP,EAEA,EANA,GASCpR,EACS,IAAXqR,EACE,MAAQE,MAAMH,EAAKI,SAAS,IAAK,IAAK,GAC7B,IAAXH,EACE,MAAQE,MAAMH,EAAKI,SAAS,IAAK,IAAK,GAEtC,MAAQD,MAAMH,EAAKI,SAAS,IAAK,IAAK,0CAI7CL,EAAQtI,EAASsI,EAsCzB,SAASM,UAAU5M,EAAKmM,OAEnBU,EAAI,GACRA,EAAE9L,KAAK,SAEHrF,EAAI,SACRsE,EAAIzB,QAAQ,SAASQ,EAAO3B,GACvB1B,KACHmR,EAAE9L,KAAK,MACR8L,EAAE9L,KAAK+L,eAAe1P,EAAK+O,IAC3BU,EAAE9L,KAAK,MACP8L,EAAE9L,KAAK+L,eAAe/N,EAAOoN,MAG9BU,EAAE9L,KAAK,KACA8L,EAAE1L,KAAK,IAGf,SAAS4L,WAAW/M,EAAKmM,OAEpBU,EAAI,GACRA,EAAE9L,KAAK,WACHiM,GAAQ,+BACKhN,kCACjB,KADSP,UAEJuN,EACHA,GAAQ,EAERH,EAAE9L,KAAK,MACR8L,EAAE9L,KAAK+L,eAAerN,EAAM0M,0CAE7BU,EAAE9L,KAAK,KACA8L,EAAE1L,KAAK,IAGf,SAAS8L,UAAUjN,EAAKmM,OAEnBU,EAAI,MACRA,EAAE9L,KAAK,KACFf,EAAIvB,KAGT,KACK/C,EAAI,EACRsE,EAAIzB,QAAQ,SAASQ,GAChBrD,KACHmR,EAAE9L,KAAK,MACR8L,EAAE9L,KAAK+L,eAAe/N,EAAOoN,WAP9BU,EAAE9L,KAAK,YAUR8L,EAAE9L,KAAK,KACA8L,EAAE1L,KAAK,IAGf,SAAS+L,aAAalN,EAAKmM,OAEtBU,EAAI,GACRA,EAAE9L,KAAK,SACHrF,EAAI,MACH,IAAI0B,KAAO4C,EAEVA,EAAIyK,eAAerN,KAEpB1B,KACHmR,EAAE9L,KAAK,MACR8L,EAAE9L,KAAK+L,eAAe1P,EAAK+O,IAC3BU,EAAE9L,KAAK,MACP8L,EAAE9L,KAAK+L,eAAe9M,EAAI5C,GAAM+O,YAEjCU,EAAE9L,KAAK,KACA8L,EAAE1L,KAAK,IAGf,SAAS2L,eAAe9M,EAAKmM,UAEhB,OAARnM,EACI,QACS,IAARA,EACD,SACS,IAARA,EACD,OACiB,iBAATA,EACRyB,UAAUzB,EAAKmM,GACE,iBAATnM,EACR,GAAKA,EACY,mBAATA,EACXA,EAAIoI,WAAapI,EAAIJ,KACjB,cAAgBI,EAAIoI,WAAapI,EAAIJ,MAAQ,IAE7C,uBACAkC,QAAQ9B,GA7HlB,SAASmN,WAAWnN,EAAKmM,OAEpBpK,EAAO/B,EAAIoN,MAAMjL,cACjBH,EAAQhC,EAAIoN,MAAMhL,WAAW,EAC7BH,EAAMjC,EAAIoN,MAAM/K,gBACP,KAAON,EAAO,IAAM2K,MAAM1K,EAAM2K,WAAY,IAAK,GAAK,IAAMD,MAAMzK,EAAI0K,WAAY,IAAK,GAAK,IAyHjGQ,CAAWnN,GACVkC,YAAYlC,GAtHtB,SAASqN,eAAerN,EAAKmM,OAExBpK,EAAO/B,EAAImC,cACXH,EAAQhC,EAAIoC,WAAW,EACvBH,EAAMjC,EAAIqC,UACViL,EAAOtN,EAAIsC,WACXiL,EAASvN,EAAIuC,aACbiL,EAASxN,EAAIwC,aACbiL,EAAKzN,EAAIyC,kBACTuB,EAAS,KAAOjC,EAAO,IAAM2K,MAAM1K,EAAM2K,WAAY,IAAK,GAAK,IAAMD,MAAMzK,EAAI0K,WAAY,IAAK,GAAK,WAErGW,GAAQC,GAAUC,GAAUC,KAE/BzJ,GAAU0I,MAAMY,EAAKX,WAAY,IAAK,GAAK,IAAMD,MAAMa,EAAOZ,WAAY,IAAK,IAC3Ea,GAAUC,KAEbzJ,GAAU,IAAM0I,MAAMc,EAAOb,WAAY,IAAK,GAC1Cc,IACHzJ,GAAU,IAAM0I,MAAMe,EAAGd,WAAY,IAAK,GAAK,SAGlD3I,GAAU,IAkGFqJ,CAAerN,QACE,IAATA,EACR,cACiB,WAAhB0N,QAAO1N,IAA8C,mBAAlBA,EAAI2N,SACxC3N,EAAI2N,WACHtK,QAAQrD,GACT+M,WAAW/M,EAAKmM,GACf7I,EAAOtD,GACR4M,UAAU5M,EAAKmM,GACd3I,OAAOxD,GACRiN,UAAUjN,EAAKmM,GACd3B,UAAUxK,GACXkN,aAAalN,EAAKmM,GACnB,IAID,SAASzI,OAAM1D,UAEd8M,eAAe9M,GAAK,GAGrB,SAAS4N,OAAO5N,UAEf8M,eAAe9M,GAAK,GAgCrB,SAAS6N,KAAK7N,eAEA,IAATA,EACH,GACS,OAARA,EACD,IACS,IAARA,EACD,SACS,IAARA,EACD,OACiB,iBAATA,EACRA,EACiB,iBAATA,EACRA,EAAI2M,WACH7K,QAAQ9B,GA3ClB,SAAS8N,UAAU9N,OAEd+B,EAAO/B,EAAIoN,MAAMjL,cACjBH,EAAQhC,EAAIoN,MAAMhL,WAAW,EAC7BH,EAAMjC,EAAIoN,MAAM/K,iBAEbN,EAAO,IAAM2K,MAAM1K,EAAM2K,WAAY,IAAK,GAAK,IAAMD,MAAMzK,EAAI0K,WAAY,IAAK,GAsC/EmB,CAAU9N,GACTkC,YAAYlC,GApCtB,SAAS+N,cAAc/N,OAElB+B,EAAO/B,EAAImC,cACXH,EAAQhC,EAAIoC,WAAW,EACvBH,EAAMjC,EAAIqC,UACViL,EAAOtN,EAAIsC,WACXiL,EAASvN,EAAIuC,aACbiL,EAASxN,EAAIwC,aACbiL,EAAKzN,EAAIyC,kBAETuB,EAASjC,EAAO,IAAM2K,MAAM1K,EAAM2K,WAAY,IAAK,GAAK,IAAMD,MAAMzK,EAAI0K,WAAY,IAAK,GAAK,IAAMD,MAAMY,EAAKX,WAAY,IAAK,GAAK,IAAMD,MAAMa,EAAOZ,WAAY,IAAK,UACzKa,GAAUC,KAEbzJ,GAAU,IAAM0I,MAAMc,EAAOb,WAAY,IAAK,GAC1Cc,IACHzJ,GAAU,IAAM0I,MAAMe,EAAGd,WAAY,IAAK,GAAK,QAE1C3I,EAoBC+J,CAAc/N,GACbqD,QAAQrD,GACT+M,WAAW/M,GACVwD,OAAOxD,GACRiN,UAAUjN,GACTsD,EAAOtD,GACR4M,UAAU5M,GACO,WAAhB0N,QAAO1N,IAA6C,mBAAjBA,EAAIgO,QACxChO,EAAIgO,UACa,WAAhBN,QAAO1N,IAA8C,mBAAlBA,EAAI2N,SACxC3N,EAAI2N,WACHnD,UAAUxK,GACXkN,aAAalN,GACd,IAID,SAASiO,MAAMjO,MAEjB,MAAOA,IAAgD,IAARA,GAAyB,IAARA,GAAqB,KAARA,EAChF,OAAO,KAGH0N,QAAO1N,GAA4C,mBAAlBA,EAAIkO,SACxC,OAAOlO,EAAIkO,cACR7K,QAAQrD,GACX,OAAsB,IAAfA,EAAIjE,OACP,GAAIuH,EAAOtD,IAAQwD,OAAOxD,GAC9B,OAAmB,GAAZA,EAAIvB,KACP,GAAI+L,UAAUxK,GACnB,KACM,IAAI5C,KAAO4C,KAEVA,EAAIyK,eAAerN,UAEjB,SAED,SAED,EAKF,SAAS+Q,KAAKnO,EAAKoO,OAErBpK,KACS,OAAToK,EACJ,IACqB,iBAATpO,IAAsBqO,OAAOD,GACvC,MAAM,IAAI5F,EAAU,6CAEI,QADzBxE,EAASW,SAAS3E,EAAKoO,IACZzB,WACV,MAAM,IAAInE,EAAU,oCACdxE,KAIY,iBAARhE,EACX,IAE0B,QADzBgE,EAASW,SAAS3E,IACP2M,WACX,MAAM,IAAInE,EAAU,oCACbxE,EAEH,GAAmB,iBAARhE,EACf,OAAOsB,KAAKgN,MAAMtO,GACd,IAAY,IAARA,EACR,OAAO,EACH,IAAY,IAARA,EACR,OAAO,QACF,IAAIwI,EAAU,+CAKf,SAAS+F,OAAOvO,MAEF,iBAATA,EACV,OAAOoE,WAAWpE,GACd,GAAoB,iBAATA,EACf,OAAOA,EACH,IAAY,IAARA,EACR,OAAO,EACH,IAAY,IAARA,EACR,OAAO,QACF,IAAIwI,EAAU,iDAId,SAASgG,MAAMxO,WAEjBwJ,EAAOC,MAAMzJ,GAEbgE,EAAS,KAEb,KACKjF,EAAQyK,EAAK1C,UACb/H,EAAMgI,KACT,OAAO/C,EACRA,EAAOjD,KAAKhC,EAAMA,QAKb,SAAS0P,KAAKzO,WAEhBwJ,EAAOC,MAAMzJ,GAEbgE,EAAS1E,gBAEb,KACKP,EAAQyK,EAAK1C,UACb/H,EAAMgI,KACT,OAAO/C,EACRA,EAAOtE,IAAIX,EAAMA,QAKZ,SAAS2P,KAAKC,MAEI,iBAAbA,GAAyBtL,QAAQsL,GAC3C,OAAOA,EAAS5S,OACZ,GAAIuH,EAAOqL,IAAanL,OAAOmL,GACnC,OAAOA,EAASlQ,KACZ,GAAI+L,UAAUmE,GACnB,KACKjT,EAAI,MACH,IAAI0B,KAAOuR,IACbjT,SACIA,QAEF,IAAI8M,EAAU,mBAAqBY,MAAMuF,GAAY,kBAGrD,SAASvF,MAAMpJ,UAET,OAARA,EACI,QACS,IAARA,IAAyB,IAARA,EAClB,YACiB,IAATA,EACR,YACiB,iBAATA,EACRsB,KAAKC,MAAMvB,IAAQA,EAAM,MAAQ,QAChB,mBAATA,EACR,WAGqB,mBAAjBA,EAAI4O,QACP5O,EAAI4O,UAEJC,EAASxP,IAAIW,GAAK4O,QAAQ5O,GAK7B,SAAS8O,KAAK5E,EAAMC,OAEtB4E,EAAMzN,KAAKgN,MAAMpE,EAAOC,GACxB6E,EAAM9E,EAAO6E,EAAM5E,SAEX,IAAR6E,IAAe7E,EAAO,GAAK6E,EAAM,GAAO7E,EAAO,GAAK6E,EAAM,KAE7DA,GAAO7E,IACL4E,GAEI7E,EAAO6E,EAAM5E,EAKd,SAAS8E,SAASjP,EAAKkP,OAAUC,yDAAS,KAE5CC,EAAQP,EAASxP,IAAIW,cAGjBoP,EAAMC,QAAQrP,EAAKkP,GAE3B,MAAOI,MAEFA,aAAeC,GAAkBD,EAAItP,MAAQA,EAChD,OAAOmP,EAEP,MAAMG,GAKF,SAASE,SAASxP,EAAKkP,UAEjBL,EAASxP,IAAIW,GACZyP,QAAQzP,EAAKkP,GAIpB,SAASQ,KAAK1P,UAER6O,EAASxP,IAAIW,GACZ2P,MAIP,SAASC,KAAKC,MAEI,iBAAbA,EACX,oCACeA,kCACd,IACW,eACT,OAAO,wCAEF,MAIF,IAAIrG,EAAOC,MAAMoG,KACtB,KACKpQ,EAAO+J,EAAK1C,UACZrH,EAAKsH,KACR,OAAO,KACJkH,MAAMxO,EAAKV,OACd,OAAO,GAMJ,SAAS+Q,KAAKD,MAEI,iBAAbA,EACX,oCACeA,kCACd,IACW,eACT,OAAO,wCAEF,MAIF,IAAIrG,EAAOC,MAAMoG,KACtB,KACKpQ,EAAO+J,EAAK1C,UACZrH,EAAKsH,KACR,OAAO,MACHkH,MAAMxO,EAAKV,OACf,OAAO,GAMJ,SAASgR,aAAa/P,eAEL,IAATA,EAKR,SAASgQ,WAAWhQ,eAEH,IAATA,EAIR,SAASiQ,QAAQjQ,UAER,OAARA,EAID,SAASkQ,QAAQlQ,SAED,kBAARA,EAIR,SAASqO,OAAOrO,SAEC,iBAARA,GAAqBsB,KAAKC,MAAMvB,IAAQA,EAIjD,SAASmQ,SAASnQ,SAED,iBAARA,GAAqBsB,KAAKC,MAAMvB,IAAQA,EAIjD,SAASoQ,OAAOpQ,SAEA,iBAARA,EAIR,SAASkC,YAAYlC,SAEmB,iBAAvCqQ,OAAO/R,UAAUqO,SAAS2D,KAAKtQ,GAGhC,SAAS8B,QAAQ9B,UAEfA,aAAewF,GAIjB,SAAS7D,SAAS3B,UAEhBA,aAAemF,GAIjB,SAASzC,aAAa1C,UAEpBA,aAAeiG,GAIjB,SAASnD,cAAc9C,UAErBA,aAAeqG,GAIjB,SAASkK,YAAYvQ,UAEnBA,aAAewQ,IAAYxQ,aAAeyQ,GAI5C,SAASC,YAAY1Q,SAEJ,mBAATA,GAA+D,mBAAvCqQ,OAAO/R,UAAUqO,SAAS2D,KAAKtQ,KAA8BA,aAAewQ,IAAYxQ,aAAeyQ,IAIvI,SAASpN,QAAQrD,SAEuB,kBAAvCqQ,OAAO/R,UAAUqO,SAAS2D,KAAKtQ,GAIhC,SAASwD,OAAOxD,SAEwB,gBAAvCqQ,OAAO/R,UAAUqO,SAAS2D,KAAKtQ,GAIhC,SAAS2Q,aAAa3Q,UAEpBA,aAAe4Q,UAGjB,SAASzF,UAAUnL,UAEjBA,aAAeT,EAGjB,SAASsR,UAAU7Q,UAEjBwD,OAAOxD,IAAQmL,UAAUnL,GAI3B,SAAS8L,QAAQ9L,UAER,OAARA,GAAgC,WAAhB0N,QAAO1N,IAA0C,mBAAdA,EAAI8G,KAIxD,SAAS0D,UAAUxK,SAEqB,mBAAvCqQ,OAAO/R,UAAUqO,SAAS2D,KAAKtQ,SAAsD,IAAlBA,EAAI8Q,YAA+B9Q,aAAe+Q,OAIlHzN,EAASlF,EAAW,SAASkF,OAAOtD,UAE9B,OAARA,GAAgC,WAAhB0N,QAAO1N,IAA+C,WAA1B0N,QAAO1N,EAAId,YAA2Bc,EAAId,YAAcb,IAAIC,WAGhH,SAASgF,OAAOtD,UAER,GAKEuD,EAAUnF,EAAW,SAASmF,QAAQvD,UAExCwK,UAAUxK,IAAQsD,EAAOtD,IAGjC,SAASuD,QAAQvD,UAETwK,UAAUxK,IAKZ,SAASgR,YAAY9E,EAAK+E,WAE5BjN,EAAS,GACNiN,EAAI,IAAKA,EACfjN,GAAUkI,SACJlI,EAGD,SAASkN,aAAaC,EAAMF,WAE9BjN,EAAS,GACNiN,EAAI,IAAKA,sCACEE,uCAAR1R,UACRuE,EAAOjD,KAAKtB,0CACPuE,EAyCD,SAASoN,QAAQpR,MAEX,OAARA,EACH,MAAO,OACH,QAAoB,IAATA,EACf,MAAO,YACH,IAAY,IAARA,EACR,MAAO,QACH,IAAY,IAARA,EACR,MAAO,OACH,GAAoB,iBAATA,EACf,OAjDF,SAASqR,UAAUnF,SAEdlI,EAAS,gCACCkI,kCACd,KADS/Q,iBAEAA,OAEF,KACJ6I,GAAU,gBAEN,KACJA,GAAU,gBAEN,KACJA,GAAU,gBAEN,KACJA,GAAU,iBAEN,IACJA,GAAU,gBAEN,IACJA,GAAU,4BAGNuI,EAAOpR,EAAEsB,WAAW,GAEvBuH,GADGuI,GAAQ,IAAMA,EAAO,IACdpR,EAEA,MAAQuR,MAAMH,EAAKI,SAAS,IAAK,IAAK,yCAI7C,IAAM3I,EAAS,IAedqN,CAAUrR,GACb,GAAoB,iBAATA,QAER,GAAKA,EAER,GAAIqD,QAAQrD,GACjB,KACK6M,EAAI,GACRA,EAAE9L,KAAK,WACHiM,GAAQ,+BACKhN,kCACjB,KADSP,UAEJuN,EACHA,GAAQ,EAERH,EAAE9L,KAAK,MACR8L,EAAE9L,KAAKqQ,QAAQ3R,0CAEhBoN,EAAE9L,KAAK,KACA8L,EAAE1L,KAAK,IAEV,GAAImC,EAAOtD,GAChB,KACK6M,EAAI,GACRA,EAAE9L,KAAK,SACHiM,GAAQ,SACZhN,EAAIzB,QAAQ,SAASQ,EAAO3B,GACvB4P,EACHA,GAAQ,EAERH,EAAE9L,KAAK,MACR8L,EAAE9L,KAAKqQ,QAAQhU,IACfyP,EAAE9L,KAAK,MACP8L,EAAE9L,KAAKqQ,QAAQrS,MAEhB8N,EAAE9L,KAAK,KACA8L,EAAE1L,KAAK,IAEV,GAAIqJ,UAAUxK,GACnB,KACK6M,EAAI,GACRA,EAAE9L,KAAK,SACHiM,GAAQ,MACP,IAAI5P,KAAO4C,EAEXgN,EACHA,GAAQ,EAERH,EAAE9L,KAAK,MACR8L,EAAE9L,KAAKqQ,QAAQhU,IACfyP,EAAE9L,KAAK,MACP8L,EAAE9L,KAAKqQ,QAAQpR,EAAI5C,YAEpByP,EAAE9L,KAAK,KACA8L,EAAE1L,KAAK,IAEV,GAAIW,QAAQ9B,SAET,iBAAmBA,EAAIoN,MAAMjL,cAAgB,MAAQnC,EAAIoN,MAAMhL,WAAW,GAAK,KAAOpC,EAAIoN,MAAM/K,UAAY,IAE/G,GAAIH,YAAYlC,SAEb,YAAcA,EAAImC,cAAgB,KAAOnC,EAAIoC,WAAa,KAAOpC,EAAIqC,UAAY,KAAOrC,EAAIsC,WAAa,KAAOtC,EAAIuC,aAAe,KAAOvC,EAAIwC,aAAe,KAAOxC,EAAIyC,kBAAoB,IAE/L,GAAIC,aAAa1C,SAEd,qBAAuBA,EAAIkG,MAAQ,KAAOlG,EAAImG,SAAW,KAAOnG,EAAIoG,cAAgB,IAEvF,GAAItD,cAAc9C,SAEf,sBAAwBA,EAAIsG,QAAU,IAEzC,GAAI3E,SAAS3B,SAEV,iBAAmBA,EAAIoF,GAAK,KAAOpF,EAAIqF,GAAK,KAAOrF,EAAIsF,GAAK,KAAOtF,EAAIuF,GAAK,IAE/E,GAAIgL,YAAYvQ,SAEb,sBAAwB0D,OAAM1D,EAAID,SAAW,UAE/C,IAAIyI,EAAU,2CAId,SAAS8I,UAAU1T,MAGzBA,EAAS2T,EAAYC,MAAM5T,GACvB6T,MAAQA,KAAKC,MAChB,OAAOD,KAAKC,MAAM9T,MACfoJ,EAAayF,KAAK7O,EAAO8D,QAAQuF,EAAe,KAAKvF,QAAQwF,EAAe,KAAKxF,QAAQyF,EAAe,KAC3G,OAAQ,IAAIwK,SAAS,UAAY/T,EAAzB,SACH,IAAI4K,EAAU,gBAId,SAASoJ,SAAS5R,UAEjBD,MAAMC,GAIP,SAAS6R,WAAWjU,UAEnB0C,OAAM1C,GAGd,SAASkU,iBAAiB9R,EAAK+R,EAAKC,SAkM/BC,EAhMe,CAClBC,GAAI,CACHzE,GAAI,CAAC,MAAO,MAAO,MAAY,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OACvF0E,GAAI,CAAC,SAAU,UAAW,OAAa,QAAS,MAAO,OAAQ,OAAQ,SAAU,YAAa,UAAW,WAAY,YACrHC,GAAI,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MACzCC,GAAI,CAAC,UAAW,SAAU,WAAY,WAAY,aAAc,UAAW,WAC3EC,GAAI,WACJC,GAAI,WACJC,GAAI,wBAELC,GAAI,CACHhF,GAAI,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAClF0E,GAAI,CAAC,UAAW,WAAY,QAAS,QAAS,MAAO,OAAQ,OAAQ,SAAU,YAAa,UAAW,WAAY,YACnHC,GAAI,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAC/CC,GAAI,CAAC,SAAU,SAAU,UAAW,YAAa,WAAY,SAAU,YACvEC,GAAI,WACJC,GAAI,WACJC,GAAI,2BAELE,GAAI,CACHjF,GAAI,CAAC,QAAS,QAAc,OAAQ,QAAS,MAAO,OAAQ,QAAS,OAAa,QAAS,OAAQ,OAAQ,QAC3G0E,GAAI,CAAC,UAAW,UAAgB,OAAQ,QAAS,MAAO,OAAQ,UAAW,OAAa,YAAa,UAAW,WAAY,YAC5HC,GAAI,CAAC,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,QACrDC,GAAI,CAAC,WAAY,QAAS,QAAS,WAAY,QAAS,WAAY,UACpEC,GAAI,WACJC,GAAI,WACJC,GAAI,wBAELG,GAAI,CACHlF,GAAI,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAClF0E,GAAI,CAAC,QAAS,UAAW,QAAS,QAAS,OAAQ,QAAS,QAAS,SAAU,aAAc,UAAW,YAAa,aACrHC,GAAI,CAAC,MAAO,MAAO,MAAO,MAAY,MAAO,MAAO,OACpDC,GAAI,CAAC,UAAW,QAAS,SAAU,YAAkB,SAAU,UAAW,UAC1EC,GAAI,WACJC,GAAI,WACJC,GAAI,wBAELI,GAAI,CACHnF,GAAI,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAClF0E,GAAI,CAAC,UAAW,WAAY,QAAS,SAAU,SAAU,SAAU,SAAU,SAAU,YAAa,UAAW,WAAY,YAC3HC,GAAI,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAC/CC,GAAI,CAAC,WAAY,SAAe,UAAgB,YAAkB,UAAgB,UAAgB,UAClGC,GAAI,WACJC,GAAI,WACJC,GAAI,wBAELK,GAAI,CACHpF,GAAI,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAClF0E,GAAI,CAAC,SAAU,UAAW,QAAS,QAAS,MAAO,OAAQ,OAAQ,SAAU,YAAa,UAAW,WAAY,YACjHC,GAAI,CAAC,MAAY,MAAO,MAAO,MAAO,MAAO,MAAO,OACpDC,GAAI,CAAC,SAAe,SAAU,UAAW,SAAU,UAAW,SAAU,UACxEC,GAAI,WACJC,GAAI,WACJC,GAAI,wBAELM,GAAI,CACHrF,GAAI,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAClF0E,GAAI,CAAC,UAAW,WAAY,OAAQ,QAAS,MAAO,OAAQ,OAAQ,UAAW,YAAa,UAAW,WAAY,YACnHC,GAAI,CAAC,MAAY,MAAY,MAAO,MAAO,MAAO,MAAO,OACzDC,GAAI,CAAC,SAAe,SAAe,SAAU,SAAU,UAAW,SAAU,UAC5EC,GAAI,WACJC,GAAI,WACJC,GAAI,wBAELO,GAAI,CACHtF,GAAI,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAClF0E,GAAI,CAAC,UAAW,WAAY,QAAS,QAAS,MAAO,OAAQ,OAAQ,WAAY,YAAa,UAAW,WAAY,YACrHC,GAAI,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MACzCC,GAAI,CAAC,SAAU,UAAW,UAAW,WAAY,YAAa,UAAW,YACzEC,GAAI,WACJC,GAAI,WACJC,GAAI,wBAELQ,GAAI,CACHvF,GAAI,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAClF0E,GAAI,CAAC,UAAW,YAAa,QAAc,QAAS,OAAQ,QAAS,QAAS,SAAU,WAAY,UAAW,WAAY,YAC3HC,GAAI,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAC/CC,GAAI,CAAC,UAAW,UAAW,QAAc,SAAU,SAAU,QAAS,UACtEC,GAAI,WACJC,GAAI,WACJC,GAAI,wBAELS,GAAI,CACHxF,GAAI,CAAC,MAAO,MAAY,MAAY,MAAO,MAAY,MAAY,MAAY,MAAO,MAAiB,MAAiB,MAAO,OAC/H0E,GAAI,CAAC,QAAS,OAAa,SAAe,QAAS,SAAe,SAAe,WAAiB,QAAS,OAAuB,QAAmB,WAAY,YACjKC,GAAI,CAAC,KAAM,KAAM,KAAW,KAAM,KAAW,KAAW,MACxDC,GAAI,CAAC,SAAe,UAAqB,QAAmB,SAAe,UAAgB,QAAc,UACzGC,GAAI,WACJC,GAAI,WACJC,GAAI,0BAELU,GAAI,CACHzF,GAAI,CAAC,MAAO,MAAO,MAAO,MAAO,MAAY,MAAY,MAAY,MAAO,MAAO,MAAO,MAAO,OACjG0E,GAAI,CAAC,SAAe,UAAgB,QAAS,QAAc,MAAY,MAAY,MAAY,SAAU,YAAa,UAAgB,WAAY,YAClJC,GAAI,CAAC,KAAM,KAAM,KAAM,KAAM,KAAW,KAAM,MAC9CC,GAAI,CAAC,SAAe,WAAY,SAAU,SAAU,UAAgB,SAAU,UAC9EC,GAAI,WACJC,GAAI,WACJC,GAAI,0BAELW,GAAI,CACH1F,GAAI,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAY,MAAO,OACvF0E,GAAI,CAAC,UAAgB,OAAQ,SAAU,WAAiB,MAAO,WAAY,SAAU,WAAiB,WAAiB,cAAoB,WAAY,YACvJC,GAAI,CAAC,MAAO,MAAO,MAAO,MAAY,MAAO,MAAY,OACzDC,GAAI,CAAC,YAAa,eAAqB,SAAU,QAAc,WAAY,SAAe,UAC1FC,GAAI,WACJC,GAAI,WACJC,GAAI,0BAELY,GAAI,CACH3F,GAAI,CAAC,MAAO,MAAO,MAAY,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OACvF0E,GAAI,CAAC,WAAiB,UAAgB,SAAe,UAAW,UAAW,SAAU,SAAU,UAAW,QAAS,WAAY,UAAW,YAC1IC,GAAI,CAAC,MAAO,MAAO,MAAO,MAAO,MAAY,MAAO,OACpDC,GAAI,CAAC,WAAY,cAAe,SAAU,UAAW,WAAiB,QAAS,UAC/EC,GAAI,WACJC,GAAI,WACJC,GAAI,wBAELa,GAAI,CACH5F,GAAI,CAAC,MAAsB,MAAsB,MAAsB,MAAsB,MAAsB,MAAsB,MAAsB,MAAsB,MAAsB,MAAsB,MAAsB,OACvP0E,GAAI,CAAC,SAAwC,UAA8C,OAA4B,QAAkC,MAAsB,MAAsB,MAAsB,SAAwC,YAA0D,UAA8C,WAAoD,YAC/ZC,GAAI,CAAC,MAAsB,MAAsB,MAAsB,MAAsB,MAAsB,MAAsB,OACzIC,GAAI,CAAC,SAAwC,YAA0D,SAAwC,QAAkC,WAAoD,QAAkC,UACvQC,GAAI,YACJC,GAAI,WACJC,GAAI,2BAELc,GAAI,CACH7F,GAAI,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAClF0E,GAAI,CAAC,WAAY,YAAa,SAAU,UAAW,MAAO,QAAS,QAAS,SAAU,aAAc,YAAa,YAAa,aAC9HC,GAAI,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MACzCC,GAAI,CAAC,WAAiB,OAAQ,QAAc,WAAY,MAAO,SAAU,WACzEC,GAAI,WACJC,GAAI,WACJC,GAAI,wBAELe,GAAI,CACH9F,GAAI,CAAC,MAAO,OAAQ,OAAa,MAAY,MAAY,MAAY,MAAY,MAAO,QAAS,MAAO,MAAO,OAC/G0E,GAAI,CAAC,SAAe,UAAgB,UAAgB,UAAgB,QAAc,SAAe,SAAe,YAAa,aAAc,UAAgB,WAAY,YACvKC,GAAI,CAAC,IAAK,IAAK,IAAK,MAAO,KAAM,IAAK,OACtCC,GAAI,CAAC,WAAiB,QAAmB,OAAQ,SAAU,YAA4B,SAAe,WACtGC,GAAI,WACJC,GAAI,WACJC,GAAI,6BAELgB,GAAI,CACH/F,GAAI,CAAC,MAAO,MAAY,MAAO,MAAO,MAAO,MAAO,MAAO,MAAY,MAAO,MAAO,MAAO,OAC5F0E,GAAI,CAAC,OAAQ,QAAc,OAAQ,QAAS,QAAc,UAAW,SAAU,UAAgB,QAAc,OAAQ,QAAc,UACnIC,GAAI,CAAC,MAAO,MAAO,MAAO,MAAiB,MAAY,MAAO,OAC9DC,GAAI,CAAC,QAAS,YAAa,OAAa,WAAsB,WAAiB,OAAQ,aACvFC,GAAI,WACJC,GAAI,WACJC,GAAI,wBAELiB,GAAI,CACHhG,GAAI,CAAC,MAAsB,MAAsB,MAAsB,MAAsB,MAAsB,MAAsB,MAAsB,MAAsB,MAAsB,MAAsB,MAAsB,OACvP0E,GAAI,CAAC,SAAwC,UAA8C,OAA4B,SAAwC,MAAsB,OAA4B,OAA4B,SAAwC,WAAoD,UAA8C,SAAwC,WAC/ZC,GAAI,CAAC,MAAsB,MAAsB,MAAsB,MAAsB,MAAsB,MAAsB,OACzIC,GAAI,CAAC,cAAsE,cAAsE,UAA8C,QAAkC,UAA8C,UAA8C,WAC7TC,GAAI,WACJC,GAAI,WACJC,GAAI,wBAELkB,GAAI,CACHjG,GAAI,CAAC,MAAY,MAAY,MAAY,MAAY,MAAY,MAAY,MAAY,MAAY,MAAY,MAAY,MAAY,OACzI0E,GAAI,CAAC,KAAgB,KAAgB,KAAgB,KAAgB,KAAgB,KAAgB,KAAgB,KAAgB,KAAgB,KAAgB,MAAsB,OAC3LC,GAAI,CAAC,IAAU,IAAU,IAAU,IAAU,IAAU,IAAU,KACjEC,GAAI,CAAC,MAAsB,MAAsB,MAAsB,MAAsB,MAAsB,MAAsB,OACzIC,GAAI,WACJC,GAAI,YACJC,GAAI,yBAELmB,GAAI,CACHlG,GAAI,CAAC,MAAY,MAAY,MAAY,MAAY,MAAY,MAAY,MAAY,MAAY,MAAY,MAAY,MAAY,OACzI0E,GAAI,CAAC,KAAW,KAAW,KAAW,KAAW,KAAW,KAAW,KAAW,KAAW,KAAW,MAAY,MAAY,OAChIC,GAAI,CAAC,IAAU,IAAU,IAAU,IAAU,IAAU,IAAU,KACjEC,GAAI,CAAC,MAAsB,MAAsB,MAAsB,MAAsB,MAAsB,MAAsB,OACzIC,GAAI,aACJC,GAAI,cACJC,GAAI,kCAELoB,GAAI,CACHnG,GAAI,CAAC,MAAY,MAAY,MAAY,MAAY,MAAY,MAAY,MAAY,MAAY,MAAY,MAAY,MAAY,OACzI0E,GAAI,CAAC,KAAW,KAAW,KAAW,KAAW,KAAW,KAAW,KAAW,KAAW,KAAW,MAAY,MAAY,OAChIC,GAAI,CAAC,IAAU,IAAU,IAAU,IAAU,IAAU,IAAU,KACjEC,GAAI,CAAC,MAAsB,MAAsB,MAAsB,MAAsB,MAAsB,MAAsB,OACzIC,GAAI,WACJC,GAAI,YACJC,GAAI,uBAIyBR,GAE3BhO,EAAS,GACT6P,GAAS,+BACC9B,kCACd,KADS5W,aAEJ0Y,EACJ,QACS1Y,OAEF,IACJA,EAAI8W,EAAYG,GAAGpS,EAAI8T,oBAEnB,IACJ3Y,EAAI8W,EAAYI,GAAGrS,EAAI8T,oBAEnB,IACJ3Y,EAAI8W,EAAYxE,GAAGzN,EAAIoC,sBAEnB,IACJjH,EAAI8W,EAAYE,GAAGnS,EAAIoC,sBAEnB,IACJjH,EAAI4Y,QAAQ/T,EAAKiS,EAAYO,GAAIR,aAE7B,IACJ7W,EAAIuR,MAAM1M,EAAIqC,UAAW,IAAK,aAE1B,IACJlH,EAAIuR,MAAM1M,EAAIyC,kBAAmB,IAAK,GAAK,gBAEvC,IACJtH,EAAIuR,MAAM1M,EAAIsC,WAAY,IAAK,aAE3B,IACJnH,EAAIuR,OAAQ1M,EAAIsC,WAAW,GAAK,GAAI,EAAG,IAAK,aAExC,IACJnH,EAAIuR,MAAMsH,EAAiBC,QAAQjU,GAAM,IAAK,aAE1C,IACJ7E,EAAIuR,MAAM1M,EAAIoC,WAAW,EAAG,IAAK,aAE7B,IACJjH,EAAIuR,MAAM1M,EAAIuC,aAAc,IAAK,aAE7B,IACJpH,EAAI6E,EAAIsC,WAAa,GAAK,KAAO,eAE7B,IACJnH,EAAIuR,MAAM1M,EAAIwC,aAAc,IAAK,aAE7B,IACJrH,EAAIuR,MAAMwH,aAAalU,EAAK,GAAI,IAAK,aAEjC,IACJ7E,EAAI6E,EAAI8T,mBAEJ,IACJ3Y,EAAIuR,MAAMwH,aAAalU,EAAK,GAAI,IAAK,aAEjC,IACJ7E,EAAI4Y,QAAQ/T,EAAKiS,EAAYK,GAAIN,aAE7B,IACJ7W,EAAI4Y,QAAQ/T,EAAKiS,EAAYM,GAAIP,aAE7B,IACJ7W,GAAK6E,EAAImC,cAAgB,KAAKwK,qBAE1B,IACJxR,EAAI6E,EAAImC,cAAcwK,qBAElB,QAIA,IAEJxR,EAAI,GAGN6I,EAAOjD,KAAK5F,GACZ0Y,GAAS,MAIA,KAAL1Y,EACH0Y,GAAS,EAET7P,EAAOjD,KAAK5F,yCAGR6I,EAAO7C,KAAK,IAGpB,SAASgT,YAAYnU,EAAK+R,EAAKC,OAE1BoC,EAAOrC,EAGPsC,EAAO,IACPC,EAAQ,IACRC,EAAO,IACPC,GAAY,EACZC,EAAe,EACfpT,EAAO,OAGP,aAAaoL,KAAK2H,KAErB/S,EAAO+S,EAAKnQ,UAAUmQ,EAAKrY,OAAO,GAClCqY,EAAOA,EAAKnQ,UAAU,EAAGmQ,EAAKrY,OAAO,IAIlC,OAAO0Q,KAAK2H,GAChB,KACKM,EAAkB,OAAOC,KAAKP,GAClCA,EAAOA,EAAK1S,QAAQ,OAAQ,IACxB,KAAK+K,KAAKiI,KAEbJ,EAAQ,IACRD,EAAO,KAERI,EAAe9P,SAAS+P,MAIrB,KAAKjI,KAAK2H,KAEbI,GAAY,EACZJ,EAAOA,EAAKnQ,UAAU,EAAGmQ,EAAKrY,OAAO,IAIlC,SAAS0Q,KAAK2H,GAClB,IACa,KAAR/S,EACH,MAAM,IAAIoC,EAAW,gDACtB8Q,EAAOH,EAAKnQ,UAAUmQ,EAAKrY,OAAO,GAClCqY,EAAOA,EAAKnQ,UAAU,EAAGmQ,EAAKrY,OAAO,MAIlCqY,EAAKrY,QAAU,EAClB,MAAM,IAAI0H,EAAW,iCAAmCC,OAAMqO,IAC1D,GAAmB,GAAfqC,EAAKrY,OACd,KACK,UAAU0Q,KAAK2H,GAMlB,MAAM,IAAI3Q,EAAW,iCAAmCC,OAAMqO,IAJ9DuC,EAAQF,EAAK,GACbC,EAAOD,EAAK,QAKT,GAAmB,GAAfA,EAAKrY,OACd,KACK,WAAW0Q,KAAK2H,GAGnB,MAAM,IAAI3Q,EAAW,iCAAmCC,OAAMqO,IAF9DuC,EAAQF,MAWNlY,EALA0Y,EAAM5U,EAAM,SAEZ4U,IACH5U,GAAOA,GAGAqB,OAEF,IACJnF,EAAS8D,EAAI2M,SAAS,aAElB,OACAiI,GAAO5U,EAAM,MAChB,MAAM,IAAIyD,EAAW,oCACtBvH,EAASE,OAAOC,aAAa2D,aAEzB,IACJ9D,EAAS8D,EAAI2M,qBAET,IACJzQ,EAAS8D,EAAI2M,SAAS,aAElB,IACJzQ,EAAS8D,EAAI2M,SAAS,cAElB,IACJzQ,EAAS8D,EAAI2M,SAAS,IAAIkI,wBAEtB,IAEJ3Y,EAAS8D,EAAI2M,cAKD,MAAV2H,GAECM,GAAgB,MAATL,MACRE,GACCD,GAAuB,MAATnT,GAAyB,MAATA,GAAyB,MAATA,GAAyB,MAATA,IACjEoT,GAAgB,GAEbvY,EAAOH,OAAS0Y,IACnBvY,EAAS8U,YAAYqD,EAAMI,EAAavY,EAAOH,QAAUG,IAEtDsY,GAAuB,MAATnT,GAAyB,MAATA,GAAyB,MAATA,GAAyB,MAATA,IACjEnF,EAAS,IAAMmF,EAAOnF,GAEnB0Y,EACH1Y,EAAS,IAAMA,EACC,KAARqY,IACRrY,EAASqY,EAAOrY,YAIbsY,GAAsB,KAARnT,GAAuB,KAARA,GAAuB,KAARA,GAAuB,KAARA,IAC9DnF,EAAS,IAAMmF,EAAOnF,GACnB0Y,EACH1Y,EAAS,IAAMA,EACC,KAARqY,IACRrY,EAASqY,EAAOrY,GACbA,EAAOH,OAAS0Y,KAEN,KAATH,EACHpY,GAAkB8U,YAAYqD,EAAMI,EAAavY,EAAOH,aACpD,GAAa,KAATuY,EACRpY,EAAS8U,YAAYqD,EAAMI,EAAavY,EAAOH,QAAUG,WAGrD4Y,EAAML,EAAevY,EAAOH,OAC5BgZ,EAAYzT,KAAKgN,MAAMwG,EAAI,GAC3BE,EAAWF,EAAIC,EACnB7Y,EAAS8U,YAAYqD,EAAMU,GAAa7Y,EAAS8U,YAAYqD,EAAMW,UAI/D9Y,EAID,SAAS6X,QAAQ/T,EAAK+R,EAAKC,MAE7B,MAAOA,EACVA,EAAO,SAER,KACKiD,EAAe,CAAC/C,GAAI,KAAMO,GAAI,KAAMC,GAAI,KAAMC,GAAI,KAAMC,GAAI,KAAMC,GAAI,KAAMC,GAAI,KAAMC,GAAI,KAAMC,GAAI,KAAMC,GAAI,KAAMC,GAAI,KAAMC,GAAI,KAAMC,GAAI,KAAMC,GAAI,KAAMC,GAAI,KAAMC,GAAI,KAAMC,GAAI,KAAMC,GAAI,KAAMC,GAAI,KAAMC,GAAI,KAAMC,GAAI,WAE7L,IAAxBqB,EADXjD,EAAOA,EAAKkD,qBAIwB,IAAxBD,EADXjD,EAAOA,EAAKmD,MAAM,KAAK,MAEtBnD,EAAO,aAGNlQ,QAAQ9B,GACJ8R,iBAAiB9R,EAAIoN,MAAO2E,EAAKC,GACrC9P,YAAYlC,GACR8R,iBAAiB9R,EAAK+R,EAAKC,GAC1B3D,OAAOrO,GACRmU,YAAYnU,EAAK+R,IACR,IAAR/R,EACDmU,YAAY,EAAGpC,IACN,IAAR/R,EACDmU,YAAY,EAAGpC,QADlB,EAIC,SAASrF,MAAM9O,EAAQkX,EAAKrZ,OAEX,iBAAZmC,IACVA,EAASA,EAAO+O,YACV/O,EAAO7B,OAASN,GACtBmC,EAASkX,EAAMlX,SACTA,EAeR,IAAIwX,EAAU,EAEDrE,+DAIN3N,OAASgS,8EAKPlX,KAAKwI,YAAY9G,2CAIlByV,UAECnX,OAASmX,wCAKVA,UAEEnX,KAAKmM,OAAOgL,sDASb,eAIIC,kCAAkBvE,6GAKxB/P,KAAO,KACPuU,SAAW,KACXC,QAAU,OACVC,UAAY,aAEbC,GAAc,EACdC,EAAc,wBATJ3U,2BAAAA,gCAUMA,iBACpB,KADS4U,OAEJF,KAEE1U,KAAKD,KAAK,CAACnB,KAAM+V,EAAaE,aAAcD,MAC5CL,SAASI,IAAe,EAC7BD,GAAc,GAI2B,MAArCE,EAAQE,OAAOF,EAAQ7Z,OAAO,IAEjC4Z,EAAcC,EAAQE,OAAO,EAAGF,EAAQ7Z,OAAO,GAC/C2Z,GAAc,GAEmB,OAAzBE,EAAQE,OAAO,EAAG,GAC1BC,EAAKN,UAAYG,EAAQE,OAAO,GACC,MAAzBF,EAAQE,OAAO,EAAG,GAC1BC,EAAKP,QAAUI,EAAQE,OAAO,MAGzB9U,KAAKD,KAAK,CAACnB,KAAMgW,MACjBL,SAASK,IAAW,qFAOnBhW,EAAMoB,EAAM4G,SAEjBC,EAAY,GACZmO,EAAmB,OAATpW,EAAgBA,EAAO,MAAQ,GAEzClE,EAAI,+BACQwC,KAAK8C,qCACrB,KADSE,aAEJxF,EAAIsF,EAAKjF,OACb,IACK6L,EAAO6C,eAAevJ,EAAItB,MAC7B,MAAM,IAAIkI,EAAckO,EAAU,YAActS,OAAMxC,EAAItB,MAAQ,cAAgBlE,EAAI,8BACvFmM,EAAU9G,KAAKC,EAAKtF,YAIhBkM,EAAO6C,eAAevJ,EAAItB,MAC7BiI,EAAU9G,KAAK6G,EAAO1G,EAAItB,WAE3B,KACKsB,EAAIuJ,eAAe,gBAGtB,MAAM,IAAI3C,EAAc,YAAckO,EAAU,YAActS,OAAMxC,EAAItB,MAAQ,cAAgBlE,EAAI,aAFpGmM,EAAU9G,KAAKG,EAAI2U,gBAKpBna,oCAIkB,OAAjBwC,KAAKsX,YAGJxU,EAAKjF,OAASmC,KAAK8C,KAAKjF,aAGrB,IAAI+L,GADY,OAATlI,EAAgB,WAAaA,EAAO,cAChB,YAAc1B,KAAK8C,KAAKjF,OAAS,wBAA8C,GAApBmC,KAAK8C,KAAKjF,OAAc,IAAM,IAAM,KAAOiF,EAAKjF,OAAS,eAMtJ8L,EAAU9G,KAAKC,EAAKgC,MAAM9E,KAAK8C,KAAKjF,YAId,OAAnBmC,KAAKuX,eAGH,IAAIrY,KAAOwK,MAEV1J,KAAKqX,SAASnY,SAGX,IAAI0K,EADE,OAATlI,EACqB,qBAAuB8D,OAAMtG,GAAO,mBAEpCwC,EAAO,wCAA0C8D,OAAMtG,QAKnF,KAEKqY,EAAYtW,kBACX,IAAI/B,KAAOwK,EAEV1J,KAAKqX,SAASnY,IAClB6B,UAAQwW,EAAWrY,EAAKwK,EAAOxK,IAEjCyK,EAAU9G,KAAK0U,UAGT5N,gDAIGjI,EAAMoB,EAAM4G,GAEtB5G,EAAO9C,KAAK8J,UAAUpI,EAAMoB,EAAM4G,OAE9BlM,EADAua,EAAY,OAEXva,EAAI,EAAGA,EAAIwC,KAAK8C,KAAKjF,SAAUL,EACnCua,EAAU/X,KAAK8C,KAAKtF,GAAGkE,MAAQoB,EAAKtF,UAChB,OAAjBwC,KAAKsX,UACRS,EAAU/X,KAAKsX,SAAWxU,EAAKtF,MACT,OAAnBwC,KAAKuX,YACRQ,EAAU/X,KAAKuX,WAAazU,EAAKtF,MAC3Bua,oDAKA,cAAgB/X,KAAKyO,WAAa,qDAKlCzO,KAAKyO,6DAKRE,EAAI,gCACQ3O,KAAK8C,qCACrB,KADSE,UAEJA,EAAIuJ,eAAe,gBACtBoC,EAAE9L,KAAKG,EAAItB,KAAO,IAAM8D,OAAMxC,EAAI2U,eAElChJ,EAAE9L,KAAKG,EAAItB,4CAEQ,OAAjB1B,KAAKsX,SACR3I,EAAE9L,KAAK,IAAM7C,KAAKsX,SACI,OAAnBtX,KAAKuX,WACR5I,EAAE9L,KAAK,KAAO7C,KAAKuX,WACb,IAAM5I,EAAE1L,KAAK,MAAQ,qBAKjB5B,6DAINT,MAAQ,QACRY,+GAGCZ,2BAAAA,gCAEWA,sBAARW,YACHX,MAAMW,IAAQ,8CAKfX,MAAQ,mDAGFoQ,OAEPrI,EAAO3I,YACHgR,OAEF,aACGgH,OAAO,SAASxW,IAAIZ,GAAQ+H,EAAKnH,UAALmH,qBAAY/H,KAAW,CAAC,yBAErD,IAAIyQ,EAAerR,KAAMgR,sDAIrBzP,UAELvB,KAAKY,MAAMW,KAAS,kCAGxBA,UAEIvB,KAAKY,MAAMW,KAAS,kDAKtB,IAAIA,KAAQvB,KAAKY,SAEhBZ,KAAKY,MAAM2L,eAAehL,UAExB,SAED,kDAKHoN,EAAI,GACRA,EAAE9L,KAAK,SACHrF,EAAI,MACH,IAAI+D,KAAQvB,KAAKY,MAEhBZ,KAAKY,MAAM2L,eAAehL,KAE3B/D,KACHmR,EAAE9L,KAAK,MACR8L,EAAE9L,KAAK2C,OAAMjE,YAET/D,GACJmR,EAAE9L,KAAK,KACR8L,EAAE9L,KAAK,KACA8L,EAAE1L,KAAK,0CAGRkU,MAIF7R,OAAO6R,GACX,KACKc,EAAQ,MACP,IAAI1W,KAAQvB,KAAKY,MACtB,KACMuW,EAAM3K,IAAIjL,GACd,OAAO,IAEN0W,SAEId,EAAM5W,MAAQ0X,EAEjB,GAAIhL,UAAUkK,GACnB,KACKc,EAAQ,MACP,IAAI1W,KAAQvB,KAAKY,MACtB,KACMuW,EAAM5V,GACV,OAAO,IAEN0W,MAGE,IAAI1W,KAAQ4V,EAAMvW,QACpBqX,SACa,GAATA,EAGP,OAAO,wCAGFd,MAIF7R,OAAO6R,GACX,KAEM,IAAI5V,KAAQvB,KAAKY,UAEhBuW,EAAM3K,IAAIjL,GACd,OAAO,SAEF,EAEH,GAAI0L,UAAUkK,GACnB,KAEM,IAAI5V,KAAQvB,KAAKY,UAEhBuW,EAAMvW,MAAMW,GAChB,OAAO,SAEF,EAGPoL,aAAa,IAAK3M,KAAMmX,yCAGnBA,MAIF7R,OAAO6R,UAEVA,EAAM9W,QAAQ,SAASQ,OACjBb,KAAKY,MAAMC,GACf,OAAO,GACNb,OACI,EAEH,GAAIiN,UAAUkK,GACnB,KAEM,IAAIjY,KAAOiY,EAAMvW,UAEhBZ,KAAKY,MAAM1B,GACf,OAAO,SAEF,EAGPyN,aAAa,KAAM3M,KAAMmX,eAOrB,SAASa,OAAOrW,EAAG4H,EAAW2O,IAEpCA,EAAUA,GAAW,IACTxW,OACXC,EAAEuI,UAAYgO,EAAQxW,MACnByD,QAAQoE,KACXA,aAAgB6N,qBAAa7N,KAC9B5H,EAAEwI,eAAiBZ,EACnB5H,EAAEyI,iBAAmB8N,EAAQzO,cAAe,EAC5C9H,EAAE0I,kBAAoB6N,EAAQ1O,eAAgB,EAIxC,SAAS2O,QAAQC,EAASC,UAEzBlG,OAAOmG,OAAOnG,OAAOoG,OAAOH,GAAUC,GAlB9ChX,EAAKjB,UAAUwS,SAAW,UAsBfjC,EAAW,CACrB0H,MAAOjX,cAEPsP,QAAS,SAASA,gBAEV,YAGRe,IAAK,SAASA,aAENzR,KAAKqY,OAGblX,IAAK,SAASA,IAAIW,UAEboQ,OAAOpQ,GACHuR,EACClO,QAAQrD,GACT0W,EACC5U,QAAQ9B,GACT2W,EACCnT,OAAOxD,GACR4W,EACCtT,EAAOtD,GACR6W,EACC3U,YAAYlC,GACbgU,EACCxJ,UAAUxK,GACX8W,EAEAjI,GAGTQ,QAAS,SAASA,QAAQrP,EAAKkP,MAE1BlP,MAAAA,EACH,MAAM,IAAIuP,EAAevP,EAAKkP,GAC1B,GAAgC,mBAArBlP,EAAI+W,YACnB,OAAO/W,EAAI+W,YAAY7H,GACnB,GAAIhR,KAAKqY,MAAM7L,IAAIwE,GACxB,KACK8H,EAAO9Y,KAAKgR,GACZ+H,EAAW,SAASA,sCAAYjW,2BAAAA,yBAC5BgW,EAAK9O,MAAMhK,MAAO8B,UAAQgB,YAGlCiW,EAAS7O,UAAY4O,EAAK5O,WAAa4O,EAAKpX,KAC5CqX,EAAS5O,eAAiB2O,EAAK3O,eAC/B4O,EAAS3O,iBAAmB0O,EAAK1O,iBACjC2O,EAAS1O,kBAAoByO,EAAKzO,kBAC3B0O,EAGP,MAAM,IAAI1H,EAAevP,EAAKkP,IAGhCO,QAAS,SAASA,QAAQzP,EAAKkP,MAE1BlP,MAAAA,EACH,OAAO,EACH,GAAgC,mBAArBA,EAAI+W,YAgBnB,OAAO7Y,KAAKqY,MAAM7L,IAAIwE,cAZrBlP,EAAI+W,YAAY7H,IACT,EAER,MAAOI,MAEFA,aAAeC,GAAkBD,EAAItP,MAAQkX,OAChD,OAAO,EAEP,MAAM5H,KASAiC,EAAc8E,QAAQxH,EACjC,CACC0H,MAAO/W,EACN,QACA,SACA,aACA,QACA,SACA,SACA,QACA,QACA,aACA,aACA,WACA,UACA,QACA,OACA,QACA,QAGDoP,QAAS,SAASA,QAAQ5O,SAElB,OAGRmW,MAAO,SAASA,MAAMnW,EAAKmX,UAEnBC,OAAOpX,EAAKmX,yDAFkB,4DAAU,OAKhDE,KAAM,SAASA,KAAKrX,EAAKmX,UAEjBG,MAAMtX,EAAKmX,yDAFiB,4DAAU,OAK9CI,MAAO,SAASA,MAAMvX,EAAKmX,UAEnBK,OAAOxX,EAAKmX,yDAFkB,4DAAU,OAKhDzV,QAAS,SAASA,QAAQ1B,EAAKyX,EAAKC,OAAMvB,yDAAM,KAEjC,OAAVA,IACHA,EAAQnW,EAAIjE,gBAETiI,EAAS,GACNhE,EAAIjE,QACX,KACK4H,EAAM3D,EAAIsK,QAAQmN,OACT,IAAT9T,IAAewS,IACnB,CACCnS,EAAOjD,KAAKf,SAGbgE,EAAOjD,KAAKf,EAAI8V,OAAO,EAAGnS,IAC1BK,EAAOjD,KAAK2W,GACZ1X,EAAMA,EAAI8V,OAAOnS,EAAM8T,EAAI1b,eAErBiI,EAAO7C,KAAK,KAGpBqQ,MAAO,SAASA,MAAMxR,OAAKwE,yDAAM,QAGV,iBADtBA,EAAQA,GAAS,WAEhB,MAAM,IAAIgE,EAAU,2CAEdxI,GAAOwE,EAAM8F,QAAQtK,EAAI,KAAO,GACtCA,EAAMA,EAAI8V,OAAO,QACX9V,GAAOwE,EAAM8F,QAAQtK,EAAIA,EAAIjE,OAAO,KAAO,GACjDiE,EAAMA,EAAI8V,OAAO,EAAG9V,EAAIjE,OAAO,UACzBiE,GAGR2X,OAAQ,SAASA,OAAO3X,OAAKwE,yDAAM,QAGZ,iBADtBA,EAAQA,GAAS,WAEhB,MAAM,IAAIgE,EAAU,4CAEdxI,GAAOwE,EAAM8F,QAAQtK,EAAI,KAAO,GACtCA,EAAMA,EAAI8V,OAAO,UACX9V,GAGR4X,OAAQ,SAASA,OAAO5X,OAAKwE,yDAAM,QAGZ,iBADtBA,EAAQA,GAAS,WAEhB,MAAM,IAAIgE,EAAU,4CAEdxI,GAAOwE,EAAM8F,QAAQtK,EAAIA,EAAIjE,OAAO,KAAO,GACjDiE,EAAMA,EAAI8V,OAAO,EAAG9V,EAAIjE,OAAO,UACzBiE,GAGRmV,MAAO,SAASA,MAAMnV,OAAK6X,yDAAI,KAAM1B,yDAAM,QAE9B,OAAR0B,GAAgC,iBAATA,EAC1B,MAAM,IAAIrP,EAAU,gCAEP,OAAV2N,EACJ,KACKnS,EAAShE,EAAImV,MAAc,OAAR0C,EAAeA,EAAM,qBAChC,OAARA,IAEC7T,EAAOjI,SAAWiI,EAAO,GAAGjI,QAC/BiI,EAAO8T,OAAO,EAAG,GACd9T,EAAOjI,SAAWiI,EAAOA,EAAOjI,OAAO,GAAGA,QAC7CiI,EAAO8T,QAAQ,IAEV9T,KAIK,OAAR6T,EACJ,SACK7T,EAAS,GACNhE,EAAIjE,QACX,KACK4H,EAAM3D,EAAIsK,QAAQuN,OACT,IAATlU,IAAewS,IACnB,CACCnS,EAAOjD,KAAKf,SAGbgE,EAAOjD,KAAKf,EAAI8V,OAAO,EAAGnS,IAC1B3D,EAAMA,EAAI8V,OAAOnS,EAAMkU,EAAI9b,eAErBiI,UAIHA,EAAS,GACNhE,EAAIjE,QACX,CACCiE,EAAMuR,EAAYoG,OAAO3X,EAAK,UAC1B+J,UAIHA,EAHIoM,IAGGnW,EAAImV,MAAM,aAAc,GAAG,GAF1BnV,GAGAjE,QACRiI,EAAOjD,KAAKgJ,GACb/J,EAAMA,EAAI8V,OAAO/L,EAAKhO,eAEhBiI,GAKV+T,OAAQ,SAASA,OAAO/X,OAAK6X,yDAAI,KAAM1B,yDAAM,QAEhC,OAAR0B,GAAgC,iBAATA,EAC1B,MAAM,IAAIrP,EAAU,oDAEP,OAAV2N,EACJ,KACKnS,EAAShE,EAAImV,MAAc,OAAR0C,EAAeA,EAAM,qBAChC,OAARA,IAEC7T,EAAOjI,SAAWiI,EAAO,GAAGjI,QAC/BiI,EAAO8T,OAAO,EAAG,GACd9T,EAAOjI,SAAWiI,EAAOA,EAAOjI,OAAO,GAAGA,QAC7CiI,EAAO8T,QAAQ,IAEV9T,KAIK,OAAR6T,EACJ,SACK7T,EAAS,GACNhE,EAAIjE,QACX,KACK4H,EAAM3D,EAAIgY,YAAYH,OACb,IAATlU,IAAewS,IACnB,CACCnS,EAAOiE,QAAQjI,SAGhBgE,EAAOiE,QAAQjI,EAAI8V,OAAOnS,EAAIkU,EAAI9b,SAClCiE,EAAMA,EAAI8V,OAAO,EAAGnS,UAEdK,UAIHA,EAAS,GACNhE,EAAIjE,QACX,CACCiE,EAAMuR,EAAYqG,OAAO5X,OACrB+J,UAMHA,EALIoM,KAIJpM,EAAO/J,EAAImV,MAAM,eACLpL,EAAKhO,OAAO,GAJhBiE,GAMAjE,QACRiI,EAAOiE,QAAQ8B,GAChB/J,EAAMA,EAAI8V,OAAO,EAAG9V,EAAIjE,OAAOgO,EAAKhO,eAE9BiI,GAKViU,WAAY,SAASA,WAAWjY,OAG3BkY,EAHgCC,0DAEhCxU,EAAM,EAENyU,EAAmB,SAASA,uBAE3Bjd,EAAI6E,EAAI2D,SACF,OAANxI,GAAmB,MAALA,GAAsB,MAALA,GAAsB,KAALA,GAAsB,KAALA,GAAsB,KAALA,GAAsB,KAALA,GAAsB,UAALA,GAAsB,UAALA,EACjI,EACE,OAANA,EAECwI,GAAO5H,EAAO,EACV,EACW,OAAfiE,EAAI2D,EAAI,GACJ,EACD,EAED,GAGJK,EAAS,GAAIjI,EAASiE,EAAIjE,WAEzB4H,EAAM,EAAGuU,EAAW,IACzB,IACKvU,GAAO5H,SAENmc,GAAYvU,GACfK,EAAOjD,KAAKf,EAAIiE,UAAUiU,IACpBlU,MAEJqU,EAAaD,OACZC,EAGL,KACKC,EAAS3U,GAAOwU,EAAWE,EAAa,GAC5CrU,EAAOjD,KAAKf,EAAIiE,UAAUiU,EAAUI,IAEpCJ,EADAvU,GAAO0U,QALL1U,IAWL4U,MAAO,SAASA,MAAMvY,UAEdA,EAAIkV,eAGZ7N,MAAO,SAASA,MAAMrH,UAEdA,EAAI6U,eAGZ2D,WAAY,SAASA,WAAWxY,UAE3BA,EAAIjE,SACPiE,EAAMA,EAAI,GAAG6U,cAAgB7U,EAAIgD,MAAM,GAAGkS,eACpClV,GAGRmB,KAAM,SAASA,KAAKnB,EAAK6P,WAEpB4I,EAAa,GACRjP,EAAOC,MAAMoG,KACtB,KACKpQ,EAAO+J,EAAK1C,UACZrH,EAAKsH,KACR,MACD0R,EAAW1X,KAAKtB,EAAKV,cAEf0Z,EAAWtX,KAAKnB,IAGxB0Y,WAAY,SAASA,WAAW1Y,EAAK2Y,MAEb,iBAAZA,EACV,OAAO3Y,EAAI8V,OAAO,EAAG6C,EAAO5c,UAAY4c,EACpC,GAAItV,QAAQsV,GACjB,oCACuBA,kCACtB,KADSC,aAEJ5Y,EAAI8V,OAAO,EAAG8C,EAAU7c,UAAY6c,EACvC,OAAO,wCAEF,EAGP,MAAM,IAAIpQ,EAAU,yCAGtBqQ,SAAU,SAASA,SAAS7Y,EAAK8Y,MAET,iBAAZA,EACV,OAAO9Y,EAAI8V,OAAO9V,EAAIjE,OAAO+c,EAAO/c,UAAY+c,EAC5C,GAAIzV,QAAQyV,GACjB,oCACuBA,kCACtB,KADSC,aAEJ/Y,EAAI8V,OAAO9V,EAAIjE,OAAOgd,EAAUhd,UAAYgd,EAC/C,OAAO,wCAEF,EAGP,MAAM,IAAIvQ,EAAU,4DAIvB0N,OAAO3E,EAAY4E,MAAO,CAAC,MAAO,SAAU,KAAM,OAAQ,OAC1DD,OAAO3E,EAAY8F,KAAM,CAAC,MAAO,SAAU,KAAM,OAAQ,OACzDnB,OAAO3E,EAAYgG,MAAO,CAAC,MAAO,SAAU,KAAM,OAAQ,OAC1DrB,OAAO3E,EAAY7P,QAAS,CAAC,MAAO,MAAO,SAAU,OACrDwU,OAAO3E,EAAYC,MAAO,CAAC,SAAU,OACrC0E,OAAO3E,EAAYoG,OAAQ,CAAC,SAAU,OACtCzB,OAAO3E,EAAYqG,OAAQ,CAAC,SAAU,OACtC1B,OAAO3E,EAAY4D,MAAO,CAAC,OAAQ,KAAM,SAAU,OACnDe,OAAO3E,EAAYwG,OAAQ,CAAC,OAAQ,KAAM,SAAU,OACpD7B,OAAO3E,EAAY0G,WAAY,CAAC,aAAa,IAC7C/B,OAAO3E,EAAYgH,MAAO,IAC1BrC,OAAO3E,EAAYlK,MAAO,IAC1B6O,OAAO3E,EAAYiH,WAAY,IAC/BtC,OAAO3E,EAAYpQ,KAAM,CAAC,aAC1B+U,OAAO3E,EAAYmH,WAAY,CAAC,WAChCxC,OAAO3E,EAAYsH,SAAU,CAAC,eAGnBnC,EAAeL,QAAQxH,EAClC,CACC0H,MAAO/W,EACN,SACA,SACA,MACA,QACA,OACA,SAGDoP,QAAS,SAASA,QAAQ5O,SAElB,QAGRgZ,OAAQ,SAASA,OAAOhZ,EAAKlB,sCAEXA,uCAARW,UACRO,EAAIe,KAAKtB,yCACH,MAGRwZ,OAAQ,SAASA,OAAOjZ,EAAK2D,EAAK7E,GAE7B6E,EAAM,IACTA,GAAO3D,EAAIjE,2CAEK+C,uCAARW,UACRO,EAAI8X,OAAOnU,IAAO,EAAGlE,yCACf,MAGR+G,IAAK,SAASA,IAAIxG,EAAK2D,GAElBA,EAAM,IACTA,GAAO3D,EAAIjE,YAERiI,EAAShE,EAAI2D,UACjB3D,EAAI8X,OAAOnU,EAAK,GACTK,GAGRmS,MAAO,SAASA,MAAMnW,EAAKmX,UAEnBC,OAAOpX,EAAKmX,yDAFkB,4DAAU,OAKhDE,KAAM,SAASA,KAAKrX,EAAKmX,UAEjBG,MAAMtX,EAAKmX,yDAFiB,4DAAU,OAK9CI,MAAO,SAASA,MAAMvX,EAAKmX,UAEnBK,OAAOxX,EAAKmX,yDAFkB,4DAAU,SAMjDjB,OAAOQ,EAAasC,OAAQ,CAAC,WAC7B9C,OAAOQ,EAAauC,OAAQ,CAAC,MAAO,WACpC/C,OAAOQ,EAAalQ,IAAK,CAAC,QAAS,IACnC0P,OAAOQ,EAAaP,MAAO,CAAC,MAAO,SAAU,KAAM,OAAQ,OAC3DD,OAAOQ,EAAaW,KAAM,CAAC,MAAO,SAAU,KAAM,OAAQ,OAC1DnB,OAAOQ,EAAaa,MAAO,CAAC,MAAO,SAAU,KAAM,OAAQ,WAGhDV,EAAcR,QAAQxH,EACjC,CACC0H,MAAO/W,EAAS,MAAO,QAAS,SAAU,SAAU,SAEpDoP,QAAS,SAASA,QAAQ5O,SAElB,QAGRqP,QAAS,SAASA,QAAQrP,EAAKkP,MAE1BhR,KAAKqY,MAAM7L,IAAIwE,GACnB,KACK8H,EAAO9Y,KAAKgR,GACZ+H,EAAW,SAASA,sCAAYjW,2BAAAA,yBAC5BgW,EAAK9O,MAAMhK,MAAO8B,UAAQgB,YAGlCiW,EAAS7O,UAAY4O,EAAK5O,WAAa4O,EAAKpX,KAC5CqX,EAAS5O,eAAiB2O,EAAK3O,eAC/B4O,EAAS3O,iBAAmB0O,EAAK1O,iBACjC2O,EAAS1O,kBAAoByO,EAAKzO,kBAC3B0O,EAGP,OAAOjX,EAAIX,IAAI6P,IAGjB7P,IAAK,SAASA,IAAIW,EAAK5C,OAAK+R,yDAAS,YAEhCnP,EAAI0K,IAAItN,GACJ4C,EAAIX,IAAIjC,GACT+R,GAGRrQ,MAAO,SAASA,MAAMkB,OAEjBgE,EAAS,UACbhE,EAAIzB,QAAQ,SAASQ,EAAO3B,GAC3B4G,EAAOjD,KAAK,CAAC3D,EAAK2B,MAEZiF,GAGRiI,OAAQ,SAASA,OAAOjM,OAEnBgE,EAAS,UACbhE,EAAIzB,QAAQ,SAASQ,EAAO3B,GAC3B4G,EAAOjD,KAAKhC,KAENiF,GAGRkV,OAAQ,SAASA,OAAOlZ,EAAKqV,EAAOzN,UAE5BuR,QAAQnZ,EAAKqV,EAAOzN,IAG5BwR,MAAO,SAASA,MAAMpZ,UAErBA,EAAIoZ,QACG,QAITlD,OAAOW,EAAYxX,IAAK,CAAC,MAAO,WAAY,OAC5C6W,OAAOW,EAAY/X,MAAO,IAC1BoX,OAAOW,EAAY5K,OAAQ,IAC3BiK,OAAOW,EAAYqC,OAAQ,CAAC,SAAU,aACtChD,OAAOW,EAAYuC,MAAO,QAEfxC,EAAcP,QAAQxH,EACjC,CACC0H,MAAO/W,EAAS,MAAO,SAEvBoP,QAAS,SAASA,QAAQ5O,SAElB,OAGRN,IAAK,SAASA,IAAIM,EAAKlB,sCAELA,uCAARW,UACRO,EAAIN,IAAID,oCAGV2Z,MAAO,SAASA,MAAMpZ,UAErBA,EAAIoZ,QACG,QAITlD,OAAOU,EAAYlX,IAAK,CAAC,WACzBwW,OAAOU,EAAYwC,MAAO,QAEfzC,EAAeN,QAAQxH,EAClC,CACC0H,MAAO/W,EACN,UACA,OACA,WACA,MACA,QACA,OACA,aACA,YACA,WAGDoP,QAAS,SAASA,QAAQ5O,SAElB,QAGRqZ,QAAS,SAASA,QAAQrZ,UAElBgU,EAAiBqF,QAAQrZ,EAAIoN,QAGrCkM,SAAU,SAASA,SAAStZ,OAAKuZ,yDAAa,EAAGC,yDAAmB,SAE5DxF,EAAiBsF,SAAStZ,EAAIoN,MAAOmM,EAAcC,IAG3DC,KAAM,SAASA,KAAKzZ,OAAKuZ,yDAAa,EAAGC,yDAAmB,SAEpDxF,EAAiBsF,SAAStZ,EAAIoN,MAAOmM,EAAcC,GAAoB,IAG/EvX,IAAK,SAASA,IAAIjC,UAEVA,EAAIoN,MAAM/K,WAGlBL,MAAO,SAASA,MAAMhC,UAEdA,EAAIoN,MAAMhL,WAAW,GAG7BL,KAAM,SAASA,KAAK/B,UAEZA,EAAIoN,MAAMjL,eAGlBuX,WAAY,SAASA,WAAW1Z,OAI3B5E,EAAI4E,EAAIoN,YAFM,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAI1C4G,EAAiBqF,QAAQje,IAAM,KAAOsR,MAAMtR,EAAEiH,UAAW,IAAK,GAAK,IAHtE,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAGQjH,EAAEgH,YAAc,IAAMhH,EAAE+G,eAG/HwX,UAAW,SAASA,UAAU3Z,OAEzB5E,EAAI4E,EAAIoN,aACLhS,EAAE+G,cAAgB,IAAMuK,OAAOtR,EAAEgH,WAAW,GAAGuK,WAAY,IAAK,GAAK,IAAMD,MAAMtR,EAAEiH,UAAUsK,WAAY,IAAK,IAGtHsH,QAAS,SAASA,QAAQjU,UAElBgU,EAAiBC,QAAQjU,EAAIoN,UAItC8I,OAAOS,EAAa0C,QAAS,IAC7BnD,OAAOS,EAAa2C,SAAU,CAAC,gBAAiB,EAAG,sBAAuB,IAC1EpD,OAAOS,EAAa8C,KAAM,CAAC,gBAAiB,EAAG,sBAAuB,IACtEvD,OAAOS,EAAa1U,IAAK,IACzBiU,OAAOS,EAAa3U,MAAO,IAC3BkU,OAAOS,EAAa5U,KAAM,IAC1BmU,OAAOS,EAAa+C,WAAY,IAChCxD,OAAOS,EAAagD,UAAW,IAC/BzD,OAAOS,EAAa1C,QAAS,QAGlBD,EAAmBqC,QAAQxH,EACtC,CACC0H,MAAO/W,EACN,UACA,OACA,WACA,MACA,QACA,OACA,OACA,SACA,SACA,cACA,aACA,YACA,WAGDoP,QAAS,SAASA,QAAQ5O,SAElB,YAGRqZ,QAAS,SAASA,QAAQrZ,OAErB5E,EAAI4E,EAAI8T,gBACL1Y,EAAIA,EAAE,EAAI,GAGlBke,SAAU,SAASA,SAAStZ,OAAKuZ,yDAAa,EAAGC,yDAAmB,EAGnED,EAAezK,KAAKyK,EAAc,GAC9BC,EAAqB,EACxBA,EAAqB,EACbA,EAAqB,IAC7BA,EAAqB,OAIjB,IAAII,EAAS,EAAIA,IAAW,IAAKA,EACtC,KACK7X,EAAO/B,EAAImC,cAAgByX,EAE3BC,EAAU,IAAIpU,KAAK1D,EAAM,EAAGyX,GAE5BM,EAAchL,KAAKkF,EAAiBqF,QAAQQ,GAAWN,EAAc,GACrEQ,EAAgBF,EAAQ1X,cACxB6X,EAAiBH,EAAQzX,WACzB6X,EAAeJ,EAAQxX,UAAYyX,EACnCI,EAAY,IAAIzU,KAAKsU,EAAeC,EAAgBC,MAEpDja,EAAIuK,WAAa2P,EAAU3P,UAC/B,KACK4P,EAAOC,GAAO9b,UAAU+b,IAAIra,EAAKka,SAG9B,CAACnY,EADGT,KAAKgN,MAAM6L,EAAKxX,OAAO,GAAK,EACnBqR,EAAiBqF,QAAQrZ,OAKhDyZ,KAAM,SAASA,KAAKzZ,OAAKuZ,yDAAa,EAAGC,yDAAmB,SAEpDxF,EAAiBsF,SAAStZ,EAAKuZ,EAAcC,GAAoB,IAGzEvX,IAAK,SAASA,IAAIjC,UAEVA,EAAIqC,WAGZL,MAAO,SAASA,MAAMhC,UAEdA,EAAIoC,WAAW,GAGvBL,KAAM,SAASA,KAAK/B,UAEZA,EAAImC,eAGZmL,KAAM,SAASA,KAAKtN,UAEZA,EAAIsC,YAGZiL,OAAQ,SAASA,OAAOvN,UAEhBA,EAAIuC,cAGZiL,OAAQ,SAASA,OAAOxN,UAEhBA,EAAIwC,cAGZ8X,YAAa,SAASA,YAAYta,UAEF,IAAxBA,EAAIyC,mBAGZiX,WAAY,SAASA,WAAW1Z,SAEb,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAG1CgU,EAAiBqF,QAAQrZ,IAAQ,KAAO0M,MAAM1M,EAAIqC,UAAW,IAAK,GAAK,IAF1E,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAEYrC,EAAIoC,YAAc,IAAMpC,EAAImC,cAAgB,IAAMuK,MAAM1M,EAAIsC,WAAY,IAAK,GAAK,IAAMoK,MAAM1M,EAAIuC,aAAc,IAAK,GAAK,IAAMmK,MAAM1M,EAAIwC,aAAc,IAAK,GAAK,QAG7QmX,UAAW,SAASA,UAAU3Z,OAEzB+B,EAAO/B,EAAImC,cACXH,EAAQhC,EAAIoC,WAAW,EACvBH,EAAMjC,EAAIqC,UACViL,EAAOtN,EAAIsC,WACXiL,EAASvN,EAAIuC,aACbiL,EAASxN,EAAIwC,aACbiL,EAAKzN,EAAIyC,kBACTuB,EAASjC,EAAO,IAAM2K,MAAM1K,EAAM2K,WAAY,IAAK,GAAK,IAAMD,MAAMzK,EAAI0K,WAAY,IAAK,GAAK,IAAMD,MAAMY,EAAKX,WAAY,IAAK,GAAK,IAAMD,MAAMa,EAAOZ,WAAY,IAAK,GAAK,IAAMD,MAAMc,EAAOb,WAAY,IAAK,UAClNc,IACHzJ,GAAU,IAAM0I,MAAMe,EAAGd,WAAY,IAAK,GAAK,OACzC3I,GAGRiQ,QAAS,SAASA,QAAQjU,OAErBua,EAAOC,QAAQxa,GAAO,EAAI,EAC1BiC,EAAMjC,EAAIqC,iBACNrC,EAAIoC,iBAEN,SACGH,OACH,SACG,GAAKA,OACR,SACG,GAAUsY,EAAOtY,OACpB,SACG,GAAUsY,EAAO,GAAKtY,OACzB,SACG,GAAUsY,EAAO,GAAK,GAAKtY,OAC9B,SACG,GAAUsY,EAAO,GAAK,GAAK,GAAKtY,OACnC,SACG,GAAUsY,EAAO,GAAK,GAAK,GAAK,GAAKtY,OACxC,SACG,GAAUsY,EAAO,GAAK,GAAK,GAAK,GAAK,GAAKtY,OAC7C,SACG,GAAUsY,EAAO,GAAK,GAAK,GAAK,GAAK,GAAK,GAAKtY,OAClD,SACG,GAAUsY,EAAO,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAKtY,OACvD,UACG,GAAUsY,EAAO,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAKtY,OAC5D,UACG,GAAUsY,EAAO,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAKtY,MAKzEiU,OAAOlC,EAAiBqF,QAAS,IACjCnD,OAAOlC,EAAiBsF,SAAU,CAAC,gBAAiB,EAAG,sBAAuB,IAC9EpD,OAAOlC,EAAiByF,KAAM,CAAC,gBAAiB,EAAG,sBAAuB,IAC1EvD,OAAOlC,EAAiB/R,IAAK,IAC7BiU,OAAOlC,EAAiBhS,MAAO,IAC/BkU,OAAOlC,EAAiBjS,KAAM,IAC9BmU,OAAOlC,EAAiB1G,KAAM,IAC9B4I,OAAOlC,EAAiBzG,OAAQ,IAChC2I,OAAOlC,EAAiBxG,OAAQ,IAChC0I,OAAOlC,EAAiBsG,YAAa,IACrCpE,OAAOlC,EAAiB0F,WAAY,IACpCxD,OAAOlC,EAAiB2F,UAAW,IACnCzD,OAAOlC,EAAiBC,QAAS,QAGtB6C,EAAiBT,QAAQxH,EACpC,CACC0H,MAAO/W,EAAS,MAAO,QAAS,SAAU,SAAU,SAEpDoP,QAAS,SAASA,QAAQ5O,SAElB,QAGRqP,QAAS,SAASA,QAAQrP,EAAKkP,OAE1BlL,KAKmB,mBAHtBA,EADGhE,GAAmC,mBAArBA,EAAI+W,YACZ/W,EAAI+W,YAAY7H,GAEhBlP,EAAIkP,IAEb,OAAOlL,MACJyW,EAAa,SAAbA,wCAAyBzZ,2BAAAA,yBAErBgD,EAAOkE,MAAMlI,EAAKgB,WAE1ByZ,EAAWrS,UAAYpE,EAAOoE,WAAapE,EAAOpE,KAClD6a,EAAWpS,eAAiBrE,EAAOqE,eACnCoS,EAAWnS,iBAAmBtE,EAAOsE,iBACrCmS,EAAWlS,kBAAoBvE,EAAOuE,kBAC/BkS,GAGRpb,IAAK,SAASA,IAAIW,EAAK5C,OAAK+R,yDAAS,KAEhCnL,EAAShE,EAAI5C,eACM,IAAZ4G,EACHmL,EACDnL,GAGRlF,MAAO,SAASA,MAAMkB,OAEjBgE,EAAS,OACR,IAAI5G,KAAO4C,EACfgE,EAAOjD,KAAK,CAAC3D,EAAK4C,EAAI5C,YAChB4G,GAGRiI,OAAQ,SAASA,OAAOjM,OAEnBgE,EAAS,OACR,IAAI5G,KAAO4C,EACfgE,EAAOjD,KAAKf,EAAI5C,WACV4G,GAGRoV,MAAO,SAASA,MAAMpZ,OAEhB,IAAI5C,KAAO4C,SACRA,EAAI5C,MAId8Y,OAAOY,EAAezX,IAAK,CAAC,MAAO,WAAY,OAC/C6W,OAAOY,EAAehY,MAAO,IAC7BoX,OAAOY,EAAe7K,OAAQ,IAC9BiK,OAAOY,EAAesC,MAAO,QAGhBsB,8BAEAC,iCAEPA,MAAAA,IACHA,EAAO,SACHA,KAAOA,OACPC,QAAU,QACVC,QAAU,QACVC,QAAU,oFAQXvT,EAAU8I,OAAOoG,OAAOvY,aAC5BqJ,EAAQoT,KAAOtK,OAAOoG,OAAOvY,KAAKyc,MAC3BpT,gDAIGtH,OAENsH,EAAU8I,OAAOoG,OAAOvY,aACb,OAAX+B,IAEHsH,EAAQqT,QAAU1c,KAAK0c,QAAQ5X,QAC/BuE,EAAQqT,QAAQ7Z,KAAKd,IAEfsH,4DAMHA,EAAU8I,OAAOoG,OAAOvY,aAC5BqJ,EAAQuT,QAAU,GACXvT,sCAGFoT,UAEEtK,OAAOoG,OAAOvY,4CAGfa,sCAEab,KAAK2c,yCACvB9b,GAAQyN,WAAOzN,uCACX+b,QAAQ/Z,KAAKhC,wDAKXb,KAAK4c,QAAQ3Z,KAAK,oCAGtBvB,UAEI1B,KAAKyc,KAAK/a,mCAGdA,EAAMb,QAEJ4b,KAAK/a,GAAQb,iBAOb,SAAS6R,UAAUmK,EAASC,EAAUC,OAExCC,EAAW,IAAIC,MAAMJ,EAASC,EAAUC,UACxC5K,OAAO+K,eACV/K,OAAO+K,eAAeF,EAAU7K,OAAOgL,eAAend,OAEtDgd,EAASI,QAAUpd,KACpBgd,EAAS9X,OAASgS,IAClB8F,EAAS3T,QAAU,KACZ2T,EAGRtK,UAAUtS,UAAY+R,OAAOoG,OAAO0E,MAAM7c,UAAW,CACpDoI,YAAa,CACZ3H,MAAOoc,MACPI,YAAY,EACZC,UAAU,EACVC,cAAc,KAIZpL,OAAO+K,eACV/K,OAAO+K,eAAexK,UAAWuK,OAEjCvK,UAAU1R,UAAYic,MAEvBvK,UAAUtS,UAAUyY,YAAc,SAASA,YAAY7H,UAE9CA,OAEF,iBACGhR,KAAKqJ,sBAEN,IAAIgI,EAAerR,KAAMgR,SAKrBwM,0CAA0B9K,iLAK1B+K,wCAAwBD,gEAExB1X,qEAEL,WACDA,OAASA,8BAIH4X,uCAAuBF,wHAI5B,kCAIKG,0CAA0BH,iIAI/B,wCAKKI,oCAAoBlL,yJAIpBmL,4CAA4BD,uIAIjC,iDAIKtT,kCAAkBoI,iJAIlBnN,mCAAmBmN,qJAInB9I,sCAAsB8I,iKAItBoL,8CAA8BpL,oFAE9B5Q,2EAEL,kBAAoBoJ,MAAMpJ,GAAO,0BAClCA,IAAMA,+FAKJ,kBAAoBoJ,MAAMlL,KAAK8B,KAAO,qDAIlCic,0CAA0BrL,yIAI/B,gDAIKsL,mCAAmBtL,8DAEnB5Q,EAAKwB,gEAEV,SAAWkC,OAAMlC,GAAS,kBAC3BxB,IAAMA,IACNwB,MAAQA,oFAKN,SAAWtD,KAAKsD,MAAQ,qBAAuB4H,MAAMlL,KAAK8B,uBAItDuP,uCAAuBqB,sEAEvB5Q,EAAKkP,oEAEV,kBAAoB9F,MAAMpJ,GAAO,qBAAuB0D,OAAMwL,KAC/DlP,IAAMA,IACNkP,SAAWA,6BAKLiN,sCAAsBvL,oEAEtBwL,mEAEL,uBAAyB1Y,OAAM0Y,KAChCA,SAAWA,mGAKZC,EAAWne,KAAKke,SAASC,SACzB1S,EAAM,GACsB,OAA5B0S,EAASC,eACZ3S,EAAI5I,KAAK,sBAET4I,EAAI5I,KAAK,wBACNiM,GAAQ,EACO,MAAZqP,GAEFrP,EACHA,GAAQ,EAERrD,EAAI5I,KAAK,QACV4I,EAAI5I,KAAKsb,EAASzc,KAAO8D,OAAM2Y,EAASzc,MAAQ,aAChDyc,EAAWA,EAASC,sBAEd3S,EAAIxI,KAAK,gDAKDjD,KAAKke,SAASC,aACzBE,EAAiBre,KAAKse,kBAEtB7D,EAASza,KAAKke,SAASK,aACvBlQ,EAAOrO,KAAKke,SAASM,OACrB5D,EAAS5a,KAAKke,SAASO,aAKvBC,GAJJjE,EAASjV,OAAMiV,GAAQ3V,MAAM,GAAI,KACjCuJ,EAAO7I,OAAM6I,GAAMvJ,MAAM,GAAI,KAC7B8V,EAASpV,OAAMoV,GAAQ9V,MAAM,GAAI,IAG7B6Z,EAAY7L,YAAY,IAAU2H,EAAO5c,QAAUiV,YAAY,IAAKzE,EAAKxQ,eAI/DwgB,EAAiB,MAFrB,UAAYre,KAAKke,SAASzY,IAAIV,MAAQ,IAAM/E,KAAKke,SAASzY,IAAIT,KAAO,UAAYhF,KAAKke,SAAStb,KAAO,SAAW5C,KAAKke,SAASU,KAE7F,KAAOF,EAAO,KAAOC,kDAItD3N,UAEHA,OAEF,iBACGhR,KAAKqJ,YACR,kBACGrJ,KAAKke,uBAEN,IAAI7M,EAAerR,KAAMgR,yBAMtB6N,4BAAYhM,wCAEZsL,EAAU1Y,2DAGhB0Y,SAAWA,IACX1Y,IAAMA,IACNvC,MAAQ,OACR4b,KAAO,iGAqFP5b,MAAQ,OACR4b,KAAO,UACR9Z,EAAOhF,KAAKyF,IAAIV,MACXvH,EAAI,EAAGA,EAAIwH,IAAQxH,EAEK,OAA5BwC,KAAKme,SAASK,OAAOhhB,MAEtBwC,KAAKkD,WACF4b,KAAO,KAGV9e,KAAK8e,qDAIE9N,MAEM,SAAbA,GAAoC,eAAbA,GAA0C,WAAbA,GAAsC,iBAAbA,GAA4C,iBAAbA,GAA4C,SAAbA,GAAoC,QAAbA,EACrK,OAAOhR,KAAKgR,GACR,GAAIhR,KAAK+e,YAAY3S,QAAQ4E,IAAa,EAC9C,OAAOhR,KAAKgR,SACP,IAAIK,EAAerR,KAAMgR,mDAGpBA,EAAUnQ,SAEf,IAAIyJ,EAAU,qEAKhBmB,EAAM,eACLkE,KAAKlE,GACHD,cAAcC,mDAKjBA,EAAM,eACLjG,MAAMiG,GACJD,cAAcC,mEAGF2F,aAEI/S,IAAhB+S,EAAI/H,SAAyC,OAAhB+H,EAAI/H,SACvC+H,EAAMA,EAAI/H,QACX+H,EAAI/H,QAAU,IAAI4U,EAAcje,wDAGpBqJ,cAIJrJ,KAAKgf,MAAM3V,GAEnB,MAAO+H,SAEAA,aAAeoM,GAAwBpM,aAAe6M,GAC3Dje,KAAKif,oBAAoB7N,GACpBA,6DAIS/H,EAASxI,cAIjBb,KAAKkf,UAAU7V,EAASxI,GAEhC,MAAOuQ,SAEAA,aAAe6M,GACpBje,KAAKif,oBAAoB7N,GACpBA,+CAIE/H,EAASxI,SAEZ,IAAIgd,kEAGSxU,EAASuD,EAAU/L,cAI9Bb,KAAKmf,aAAa9V,EAASuD,EAAU/L,GAE7C,MAAOuQ,SAEAA,aAAe6M,GACpBje,KAAKif,oBAAoB7N,GACpBA,qDAIK/H,EAASuD,EAAU/L,SAEzB,IAAIgd,sCAGLpS,sCAIDA,GAEJA,EAAI5I,KAAK7C,KAAKwe,OAAOhb,QAAQ,SAAU,kDAG9BxB,sCAEYhC,KAAK+e,iDAAjB/N,UACRhP,EAAQE,KAAKlC,KAAKgR,gFAGVoO,sCAEYpf,KAAK+e,2DACRK,EAAQ7c,qFAxMnBvC,KAAKme,SAASkB,kDAKdrf,KAAKyF,IAAI6Z,GAAGtf,KAAKme,SAASkB,0DAK7BE,EAAgBvf,KAAKyF,IAAIV,MACzBya,EAAgBD,EAChBf,EAASxe,KAAKyf,WAEdC,EAAY,GACZC,EAAY,IACTD,EAAY,GACnB,IAEuB,IAAlBH,EACJ,CACCI,EAAY,YAI0B,OAAnCnB,EAAO/f,OAAO8gB,EAAc,GAChC,CACCI,EAAY,WAGXD,IACAH,SAEII,EAAYnB,EAAOzY,UAAUwZ,EAAeC,oDAK/CI,EAAe5f,KAAKyF,IAAIT,KACxB6a,EAAeD,EACfpB,EAASxe,KAAKyf,WAEdK,EAAY,GACZC,EAAa,IACVD,EAAY,GACnB,IAEKF,GAAgBpB,EAAO3gB,OAC3B,CACCkiB,EAAa,YAIsB,OAAhCvB,EAAO/f,OAAOmhB,GAClB,CACCG,EAAa,WAGZD,IACAF,SAEIpB,EAAOzY,UAAU8Z,EAAcD,GAAgBG,0CAKnC,OAAf/f,KAAKkD,OACRlD,KAAKggB,oBACChgB,KAAKkD,6CAKM,OAAdlD,KAAK8e,MACR9e,KAAKggB,oBACChgB,KAAK8e,gBAkIdD,EAAIze,UAAU2e,YAAc,CAAC,WAAY,WAE5BkB,gCAAgBpB,gDAEhBV,EAAU1Y,oDAEf0Y,EAAU1Y,kEAQX4D,GAELA,EAAQrL,OAAOgC,KAAK0e,wCAGhBjT,GAEJA,EAAI5I,KAAK,SACT4I,EAAI5I,KAAK2C,OAAMxF,KAAK0e,2CAGfjT,GAELA,EAAI5I,KAAK,aACT4I,EAAI5I,KAAK2C,OAAMxF,KAAK0e,OACpBjT,EAAI5I,KAAK,6CAlBF7C,KAAKwe,sBAsBD0B,kCAAkBD,oDAElB9B,EAAU1Y,EAAKiZ,+DAEpBP,EAAU1Y,IACX0a,MAAQzB,qEAWRrV,sCAEcA,EAAQqT,6CAAlB3a,UACRsH,EAAQrL,OAAO+D,kCAChBsH,EAAQrL,OAAOgC,KAAK0e,kDAGX1c,yEAEOA,GAEZhC,KAAKmgB,QAAUngB,KAAKwe,OACvBxc,EAAQE,KAAK,MAEbF,EAAQE,KAAKlC,KAAKmgB,mDAGVf,yEAEOA,QACXe,MAAQf,EAAQ7c,yCAGjBkJ,GAEJA,EAAI5I,KAAK,WACT4I,EAAI5I,KAAK2C,OAAMxF,KAAK0e,2CAGfjT,GAELA,EAAI5I,KAAK,eACT4I,EAAI5I,KAAK2C,OAAMxF,KAAK0e,OACpBjT,EAAI5I,KAAK,kDAvCqB,IAAnB7C,KAAKme,SACO,OAAfne,KAAKmgB,MAAiBngB,KAAKwe,OAASxe,KAAKmgB,MAEzC,sBAwCGC,mCAAmBH,wLAE1BxU,GAEJA,EAAI5I,KAAK,YACT4I,EAAI5I,KAAK2C,OAAMxF,KAAK0e,2CAGfjT,GAELA,EAAI5I,KAAK,gBACT4I,EAAI5I,KAAK2C,OAAMxF,KAAK0e,OACpBjT,EAAI5I,KAAK,uBAIEwd,gCAAgBxB,iIAIhByB,iCAAiBD,kDAEjBlC,EAAU1Y,EAAK5E,8DAEpBsd,EAAU1Y,IACX5E,MAAQA,oEAGR4K,GAELA,EAAI5I,KAAK,oBACT4I,EAAI5I,KAAK2C,OAAMxF,KAAKa,QACpB4K,EAAI5I,KAAK,yCAGJwG,UAEErJ,KAAKa,sBAIdyf,EAASlgB,UAAU2e,YAAcsB,EAAQjgB,UAAU2e,YAAYvf,OAAO,CAAC,cAE1D+gB,oCAAoBF,sNAEdhX,EAASvD,cAIlB9F,KAAKwgB,WAAWnX,EAASvD,GAEjC,MAAOsL,SAEAA,aAAeoM,GAAwBpM,aAAe6M,GAC3Dje,KAAKif,oBAAoB7N,GACpBA,6DAIS/H,EAASvD,cAIjB9F,KAAKkf,UAAU7V,EAASvD,GAEhC,MAAOsL,SAEAA,aAAeoM,GAAwBpM,aAAe6M,GAC3Dje,KAAKif,oBAAoB7N,GACpBA,+DAIU/H,EAASvD,cAIlB9F,KAAKygB,WAAWpX,EAASvD,GAEjC,MAAOsL,SAEAA,aAAeoM,GAAwBpM,aAAe6M,GAC3Dje,KAAKif,oBAAoB7N,GACpBA,+DAIU/H,EAASvG,EAAM4G,cAIxB1J,KAAK0gB,WAAWrX,EAASvG,EAAM4G,GAEvC,MAAO0H,SAEAA,aAAeoM,GAAwBpM,aAAe6M,GAC3Dje,KAAKif,oBAAoB7N,GACpBA,sBAKIuP,mCAAmBJ,sDAEnBpC,EAAU1Y,EAAK5E,gEAEpBsd,EAAU1Y,IACX5E,MAAQA,sEAGR4K,GAELA,EAAI5I,KAAK,sBACT4I,EAAI5I,KAAK2C,OAAMxF,KAAKa,QACpB4K,EAAI5I,KAAK,mDAGCwG,EAASvD,OAEfjF,EAAQb,KAAKa,MAAM+f,aAAavX,GACpCvD,EAAOjD,KAAKhC,+CAGHwI,EAASvD,OAEdjF,EAAQb,KAAKa,MAAM+f,aAAavX,GACpCvD,EAAOtE,IAAIX,qBAIb8f,EAAWvgB,UAAU2e,YAAcwB,EAAYngB,UAAU2e,YAAYvf,OAAO,CAAC,cAEhEqhB,yCAAyBN,kEAEzBpC,EAAU1Y,EAAK5E,sEAEpBsd,EAAU1Y,IACX5E,MAAQA,4EAGR4K,GAELA,EAAI5I,KAAK,4BACT4I,EAAI5I,KAAK2C,OAAMxF,KAAKa,QACpB4K,EAAI5I,KAAK,mDAGCwG,EAASvD,WAGVwF,EAAOC,MADJvL,KAAKa,MAAM+f,aAAavX,MAEpC,KACK9H,EAAO+J,EAAK1C,UACZrH,EAAKsH,KACR,MACD/C,EAAOjD,KAAKtB,EAAKV,oDAITwI,EAASvD,WAGTwF,EAAOC,MADJvL,KAAKa,MAAM+f,aAAavX,MAEpC,KACK9H,EAAO+J,EAAK1C,UACZrH,EAAKsH,KACR,MACD/C,EAAOtE,IAAID,EAAKV,gCAKnBggB,EAAiBzgB,UAAU2e,YAAcwB,EAAYngB,UAAU2e,YAAYvf,OAAO,CAAC,cAEtEshB,oCAAoBP,wDAEpBpC,EAAU1Y,EAAKvG,EAAK2B,iEAEzBsd,EAAU1Y,IACXvG,IAAMA,IACN2B,MAAQA,uEAGR4K,GAELA,EAAI5I,KAAK,qBACT4I,EAAI5I,KAAK2C,OAAMxF,KAAKd,MACpBuM,EAAI5I,KAAK,WACT4I,EAAI5I,KAAK2C,OAAMxF,KAAKa,QACpB4K,EAAI5I,KAAK,mDAGCwG,EAASvD,OAEf5G,EAAMc,KAAKd,IAAI0hB,aAAavX,GAC5BxI,EAAQb,KAAKa,MAAM+f,aAAavX,GACpCtI,UAAQ+E,EAAQ5G,EAAK2B,sBAIvBigB,EAAY1gB,UAAU2e,YAAcwB,EAAYngB,UAAU2e,YAAYvf,OAAO,CAAC,MAAO,cAExEuhB,0CAA0BR,oEAE1BpC,EAAU1Y,EAAKlE,uEAEpB4c,EAAU1Y,IACXlE,KAAOA,6EAGPkK,GAELA,EAAI5I,KAAK,4BACT4I,EAAI5I,KAAK2C,OAAMxF,KAAKuB,OACpBkK,EAAI5I,KAAK,mDAGCwG,EAASvD,OAEfvE,EAAOvB,KAAKuB,KAAKqf,aAAavX,MAC9BlE,QAAQ5D,GACZ,oCACqBA,kCACpB,KADSyf,cAEH7b,QAAQ6b,IAA8B,GAAlBA,EAAQnjB,OAChC,MAAM,IAAI+L,EAAc,4CACzB7I,UAAQ+E,EAAQkb,EAAQ,GAAIA,EAAQ,yCAGjC,GAAI5b,EAAO7D,GAEfA,EAAKlB,QAAQ,SAASQ,EAAO3B,GAC5B6B,UAAQ+E,EAAQ5G,EAAK2B,UAGlB,GAAIyL,UAAU/K,OAEb,IAAIrC,KAAOqC,EACfR,UAAQ+E,EAAQ5G,EAAKqC,EAAKrC,6BAK9B6hB,EAAkB3gB,UAAU2e,YAAcwB,EAAYngB,UAAU2e,YAAYvf,OAAO,CAAC,aAEvEyhB,kCAAkBV,oDAElBpC,EAAU1Y,EAAK5E,+DAEpBsd,EAAU1Y,IACX5E,MAAQA,qEAGR4K,GAELA,EAAI5I,KAAK,0BACJhC,MAAM2E,MAAMiG,GACjBA,EAAI5I,KAAK,mDAGCwG,EAASvG,EAAM4G,OAErB7I,EAAQb,KAAKa,MAAM+f,aAAavX,GACpCvG,EAAKD,KAAKhC,oBAIZogB,EAAU7gB,UAAU2e,YAAcwB,EAAYngB,UAAU2e,YAAYvf,OAAO,CAAC,cAE/D0hB,uCAAsBX,4DAEtBpC,EAAU1Y,EAAK/D,EAAMb,mEAE1Bsd,EAAU1Y,IACX/D,KAAOA,IACPb,MAAQA,yEAGR4K,GAELA,EAAI5I,KAAK,wBACT4I,EAAI5I,KAAK2C,OAAMxF,KAAK0B,OACpB+J,EAAI5I,KAAK,gBACJhC,MAAM2E,MAAMiG,GACjBA,EAAI5I,KAAK,mDAGCwG,EAASvG,EAAM4G,MAErBA,EAAO6C,eAAevM,KAAK0B,MAC9B,MAAM,IAAIkI,EAAc,8BAAgC5J,KAAK0B,UAC1Db,EAAQb,KAAKa,MAAM+f,aAAavX,GACpCK,EAAO1J,KAAK0B,MAAQb,uBAItBqgB,GAAc9gB,UAAU2e,YAAcwB,EAAYngB,UAAU2e,YAAYvf,OAAO,CAAC,OAAQ,cAE3E2hB,0CAAyBZ,kEAEzBpC,EAAU1Y,EAAKlE,sEAEpB4c,EAAU1Y,IACXlE,KAAOA,4EAGPkK,GAELA,EAAI5I,KAAK,gCACJtB,KAAKiE,MAAMiG,GAChBA,EAAI5I,KAAK,mDAGCwG,EAASvG,EAAM4G,OAErBnI,EAAOvB,KAAKuB,KAAKqf,aAAavX,GAClCvG,EAAKD,WAALC,qBAAavB,4BAIf4f,GAAiB/gB,UAAU2e,YAAcwB,EAAYngB,UAAU2e,YAAYvf,OAAO,CAAC,aAEtE4hB,0CAAyBb,kEAEzBpC,EAAU1Y,EAAKlE,sEAEpB4c,EAAU1Y,IACXlE,KAAOA,4EAGPkK,GAELA,EAAI5I,KAAK,gCACJtB,KAAKiE,MAAMiG,GAChBA,EAAI5I,KAAK,mDAGCwG,EAASvG,EAAM4G,OAErBnI,EAAOvB,KAAKuB,KAAKqf,aAAavX,MAC9BlE,QAAQ5D,GACZ,oCACqBA,kCACpB,KADSyf,cAEH7b,QAAQ6b,IAA8B,GAAlBA,EAAQnjB,OAChC,MAAM,IAAI+L,EAAc,iEACNoX,KAAd9hB,OAAK2B,UACN6I,EAAO6C,eAAerN,GACzB,MAAM,IAAI0K,EAAc,8BAAgC1K,GACzDwK,EAAOxK,GAAO2B,uCAGX,GAAIuE,EAAO7D,GAEfA,EAAKlB,QAAQ,SAASQ,EAAO3B,MACxBwK,EAAO6C,eAAerN,GACzB,MAAM,IAAI0K,EAAc,8BAAgC1K,GACzDwK,EAAOxK,GAAO2B,SAGX,GAAIyL,UAAU/K,OAEb,IAAIrC,KAAOqC,EAChB,IACKmI,EAAO6C,eAAerN,GACzB,MAAM,IAAI0K,EAAc,8BAAgC1K,GACzDwK,EAAOxK,GAAOqC,EAAKrC,4BAMvBkiB,GAAiBhhB,UAAU2e,YAAcwB,EAAYngB,UAAU2e,YAAYvf,OAAO,CAAC,aAEtE6hB,iCAAgBhB,gDAEhBlC,EAAU1Y,6DAEf0Y,EAAU1Y,IACX7E,MAAQ,oEAGR6K,GAELA,EAAI5I,KAAK,+CACQ7C,KAAKY,sCACtB,KADSW,UAERkK,EAAI5I,KAAK,KACTtB,EAAKiE,MAAMiG,kCAEZA,EAAI5I,KAAK,yCAGJwG,SAEDvD,EAAS,gCACI9F,KAAKY,+CAChB0gB,kBAAkBjY,EAASvD,yCAC1BA,iBAITub,GAAQjhB,UAAU2e,YAAcsB,EAAQjgB,UAAU2e,YAAYvf,OAAO,CAAC,cAEzD+hB,qCAAoBlB,wDAEpBlC,EAAU1Y,EAAKlE,EAAMigB,EAASC,EAAWC,iEAE9CvD,EAAU1Y,IACXlE,KAAOA,IACPigB,QAAUA,IACVC,UAAYA,IACZC,UAAYA,uEAGZjW,GAELA,EAAI5I,KAAK,gBACT4I,EAAI5I,KAAK,eACJtB,KAAKiE,MAAMiG,GAChBA,EAAI5I,KAAK,aACT4I,EAAI5I,KAAK2C,OAAMxF,KAAKwhB,UACpB/V,EAAI5I,KAAK,oBACJ4e,UAAUjc,MAAMiG,GACE,OAAnBzL,KAAK0hB,YAERjW,EAAI5I,KAAK,oBACJ6e,UAAUlc,MAAMiG,IAEtBA,EAAI5I,KAAK,yCAGJwG,WAEDoY,EAAYzhB,KAAKyhB,UAAUb,aAAavX,GAExCsY,EAAetY,EAAQuY,cAEvB9b,EAAS,GACJwF,EAAOC,MAAMkW,KACtB,KACKlgB,EAAO+J,EAAK1C,UACZrH,EAAKsH,KACR,yCACcsC,WAAWnL,KAAKwhB,QAASjgB,EAAKV,wEACnCuK,OAAQvK,OACjBuK,EAAOyW,iBAAiBF,EAAc9gB,mCAChB,OAAnBb,KAAK0hB,WAAsB3R,MAAM/P,KAAK0hB,UAAUd,aAAae,MAChE7b,EAAOjD,KAAK7C,KAAKuB,KAAKqf,aAAae,WAE9B7b,qBAITyb,GAAYnhB,UAAU2e,YAAcsB,EAAQjgB,UAAU2e,YAAYvf,OAAO,CAAC,OAAQ,UAAW,YAAa,kBAE7FsiB,gCAAezB,8CAEflC,EAAU1Y,4DAEf0Y,EAAU1Y,IACX7E,MAAQ,mEAGR6K,GAELA,EAAI5I,KAAK,8CACQ7C,KAAKY,sCACtB,KADSW,UAERkK,EAAI5I,KAAK,KACTtB,EAAKiE,MAAMiG,kCAEZA,EAAI5I,KAAK,yCAGJwG,SAEDvD,EAAS1E,2CAEIpB,KAAKY,+CAChBihB,iBAAiBxY,EAASvD,yCAEzBA,gBAITgc,GAAO1hB,UAAU2e,YAAcsB,EAAQjgB,UAAU2e,YAAYvf,OAAO,CAAC,cAExDuiB,oCAAmB1B,sDAEnBlC,EAAU1Y,EAAKlE,EAAMigB,EAASC,EAAWC,gEAE9CvD,EAAU1Y,IACXlE,KAAOA,IACPigB,QAAUA,IACVC,UAAYA,IACZC,UAAYA,kFAGN1Q,UAEHA,OAEF,cACGhR,KAAKuB,SACR,iBACGvB,KAAKwhB,YACR,mBACGxhB,KAAKyhB,cACR,mBACGzhB,KAAK0hB,kGAEa1Q,wCAItBvF,GAELA,EAAI5I,KAAK,eACT4I,EAAI5I,KAAK,eACJtB,KAAKiE,MAAMiG,GAChBA,EAAI5I,KAAK,kBACJ2e,QAAQhc,MAAMiG,GACnBA,EAAI5I,KAAK,oBACJ4e,UAAUjc,MAAMiG,GACE,OAAnBzL,KAAK0hB,YAERjW,EAAI5I,KAAK,oBACJ6e,UAAUlc,MAAMiG,IAEtBA,EAAI5I,KAAK,yCAGJwG,WAEDoY,EAAYzhB,KAAKyhB,UAAUb,aAAavX,GAExCsY,EAAetY,EAAQuY,cAEvB9b,EAAS1E,cACJkK,EAAOC,MAAMkW,KACtB,KACKlgB,EAAO+J,EAAK1C,UACZrH,EAAKsH,KACR,yCACcsC,WAAWnL,KAAKwhB,QAASjgB,EAAKV,wEACnCuK,OAAQvK,OACjBuK,EAAOyW,iBAAiBF,EAAc9gB,mCAChB,OAAnBb,KAAK0hB,WAAsB3R,MAAM/P,KAAK0hB,UAAUd,aAAae,MAChE7b,EAAOtE,IAAIxB,KAAKuB,KAAKqf,aAAae,WAG7B7b,oBAITic,GAAW3hB,UAAU2e,YAAcsB,EAAQjgB,UAAU2e,YAAYvf,OAAO,CAAC,OAAQ,UAAW,YAAa,kBAE5FwiB,iCAAgB3B,gDAEhBlC,EAAU1Y,6DAEf0Y,EAAU1Y,IACX7E,MAAQ,gFAGFoQ,UAEHA,OAEF,eACGhR,KAAKY,2FAEaoQ,wCAItBvF,GAELA,EAAI5I,KAAK,+CACQ7C,KAAKY,sCACtB,KADSW,UAERkK,EAAI5I,KAAK,KACTtB,EAAKiE,MAAMiG,kCAEZA,EAAI5I,KAAK,yCAGJwG,SAEDvD,EAAS7E,2CACIjB,KAAKY,+CAChBqhB,kBAAkB5Y,EAASvD,yCAC1BA,iBAITkc,GAAQ5hB,UAAU2e,YAAcsB,EAAQjgB,UAAU2e,YAAYvf,OAAO,CAAC,cAEzD0iB,qCAAoB7B,wDAEpBlC,EAAU1Y,EAAKvG,EAAK2B,EAAO2gB,EAASC,EAAWC,iEAEpDvD,EAAU1Y,IACXvG,IAAMA,IACN2B,MAAQA,IACR2gB,QAAUA,IACVC,UAAYA,IACZC,UAAYA,uEAGZjW,GAELA,EAAI5I,KAAK,gBACT4I,EAAI5I,KAAK,cACJ3D,IAAIsG,MAAMiG,GACfA,EAAI5I,KAAK,gBACJhC,MAAM2E,MAAMiG,GACjBA,EAAI5I,KAAK,kBACJ2e,QAAQhc,MAAMiG,GACnBA,EAAI5I,KAAK,oBACJ4e,UAAUjc,MAAMiG,GACE,OAAnBzL,KAAK0hB,YAERjW,EAAI5I,KAAK,oBACJ6e,UAAUlc,MAAMiG,IAEtBA,EAAI5I,KAAK,yCAGJwG,WAEDoY,EAAYzhB,KAAKyhB,UAAUb,aAAavX,GAExCsY,EAAetY,EAAQuY,cAEvB9b,EAAS7E,cAEJqK,EAAOC,MAAMkW,KACtB,KACKlgB,EAAO+J,EAAK1C,UACZrH,EAAKsH,KACR,yCACcsC,WAAWnL,KAAKwhB,QAASjgB,EAAKV,wEACnCuK,OAAQvK,OACjBuK,EAAOyW,iBAAiBF,EAAc9gB,qCAChB,OAAnBb,KAAK0hB,WAAsB3R,MAAM/P,KAAK0hB,UAAUd,aAAae,IACjE,KACKziB,EAAMc,KAAKd,IAAI0hB,aAAae,GAC5B9gB,EAAQb,KAAKa,MAAM+f,aAAae,GACpC5gB,UAAQ+E,EAAQ5G,EAAK2B,WAIhBiF,qBAIToc,GAAY9hB,UAAU2e,YAAcsB,EAAQjgB,UAAU2e,YAAYvf,OAAO,CAAC,MAAO,QAAS,UAAW,YAAa,kBAErG2iB,oCAAmB9B,sDAEnBlC,EAAU1Y,EAAKlE,EAAMigB,EAASC,EAAWC,gEAE9CvD,EAAU1Y,IACXlE,KAAOA,IACPigB,QAAUA,IACVC,UAAYA,IACZC,UAAYA,sEAGZjW,GAELA,EAAI5I,KAAK,eACT4I,EAAI5I,KAAK,eACJtB,KAAKiE,MAAMiG,GAChBA,EAAI5I,KAAK,kBACJ2e,QAAQhc,MAAMiG,GACnBA,EAAI5I,KAAK,oBACJ4e,UAAUjc,MAAMiG,GACE,OAAnBzL,KAAK0hB,YAERjW,EAAI5I,KAAK,oBACJ6e,UAAUlc,MAAMiG,IAEtBA,EAAI5I,KAAK,yCAGJwG,OAGDiC,EAAOC,MADKvL,KAAKyhB,UAAUb,aAAavX,IAGxCsY,EAAetY,EAAQuY,cAEvBjZ,EAAO3I,WAEE,CACZ4I,KAAM,uBAEL,KACKrH,EAAO+J,EAAK1C,UACZrH,EAAKsH,KACR,OAAOtH,qCACO4J,WAAWxC,EAAK6Y,QAASjgB,EAAKV,wEACnCuK,OAAQvK,OACjBuK,EAAOyW,iBAAiBF,EAAc9gB,qCAChB,OAAnB8H,EAAK+Y,WAAsB3R,MAAMpH,EAAK+Y,UAAUd,aAAae,UAGzD,CAAC9gB,MADI8H,EAAKpH,KAAKqf,aAAae,GACb9Y,MAAM,wBAUlCsZ,GAAW/hB,UAAU2e,YAAcsB,EAAQjgB,UAAU2e,YAAYvf,OAAO,CAAC,OAAQ,UAAW,YAAa,kBAE5F4iB,gCAAe/B,8CAEflC,EAAU1Y,EAAK/D,4DAEpByc,EAAU1Y,IACX/D,KAAOA,kEAGP+J,GAELA,EAAI5I,KAAK,iBACT4I,EAAI5I,KAAK2C,OAAMxF,KAAK0B,OACpB+J,EAAI5I,KAAK,yCAGJwG,UAEErJ,KAAKqiB,KAAKhZ,EAASrJ,KAAK0B,kDAGtB2H,EAASxI,QAEb0P,KAAKlH,EAASrJ,KAAK0B,KAAMb,qDAGlBwI,EAASuD,EAAU/L,QAE1ByhB,QAAQjZ,EAASuD,EAAU5M,KAAK0B,KAAMb,qCAGvCwI,EAAS3H,OAEToE,EAASuD,EAAQlI,IAAIO,eACF,IAAZoE,IACVA,EAASyc,GAAU7gB,IACboE,oCAGHuD,EAAS3H,EAAMb,GAEnBwI,EAAQvI,IAAIY,EAAMb,2CAGXwI,EAASuD,EAAUlL,EAAMb,OAE5BwK,EAAWuB,EAAS4V,KAAKnZ,EAAQlI,IAAIO,GAAOb,GAChDwI,EAAQvI,IAAIY,EAAM2J,iBAIpB+W,GAAOhiB,UAAU2e,YAAcsB,EAAQjgB,UAAU2e,YAAYvf,OAAO,CAAC,aAExDijB,kCAAiBpC,kDAEjBlC,EAAU1Y,EAAK3D,8DAEpBqc,EAAU1Y,IACX3D,IAAMA,oEAGN2J,GAELA,EAAI5I,KAAK,KACT4I,EAAI5I,KAAK7C,KAAKwI,YAAY9G,MAC1B+J,EAAI5I,KAAK,cACJf,IAAI0D,MAAMiG,GACfA,EAAI5I,KAAK,yCAGJwG,OAEDvH,EAAM9B,KAAK8B,IAAI8e,aAAavX,UACzBrJ,KAAKmc,IAAIra,mBAIlB2gB,GAASriB,UAAU2e,YAAcsB,EAAQjgB,UAAU2e,YAAYvf,OAAO,CAAC,YAG1DkjB,gCAAeD,uKAEvB3gB,UAES,OAARA,GAAwC,mBAAjBA,EAAI6gB,QACvB7gB,EAAI6gB,WACJ7gB,gBAKG8gB,mCAAkBH,mLAE1B3gB,UAEKA,EAAI,mBAKD+gB,gCAAeJ,uKAEvB3gB,UAEKiO,MAAMjO,iBAKHghB,+BAAczC,4CAEdlC,EAAU1Y,EAAKsd,EAAOC,EAASC,2DAEpC9E,EAAU1Y,IACXsd,MAAQA,IACRC,QAAUA,IACVC,QAAUA,iEAGVxX,GAELA,EAAI5I,KAAK,KACT4I,EAAI5I,KAAK7C,KAAKwI,YAAY9G,MAC1B+J,EAAI5I,KAAK,GACT4I,EAAI5I,KAAK,eACJkgB,MAAMvd,MAAMiG,GACjBA,EAAI5I,KAAK,GACT4I,EAAI5I,KAAK,iBACJmgB,QAAQxd,MAAMiG,GACnBA,EAAI5I,KAAK,GACT4I,EAAI5I,KAAK,iBACJogB,QAAQzd,MAAMiG,GACnBA,EAAI5I,MAAM,GACV4I,EAAI5I,KAAK,yCAGJwG,UAID0G,MADY/P,KAAKgjB,QAAQpC,aAAavX,IAEhCrJ,KAAK+iB,MAAMnC,aAAavX,GAExBrJ,KAAKijB,QAAQrC,aAAavX,gBAKtCyZ,GAAM1iB,UAAU2e,YAAcsB,EAAQjgB,UAAU2e,YAAYvf,OAAO,CAAC,QAAS,UAAW,gBAE3E0jB,mCAAkBT,uLAExBpZ,OAEDvD,EAAS9F,KAAK8B,IAAI8e,aAAavX,SAC7B,IAAIoU,EAAgB3X,qCAGtB2F,GAEJA,EAAI5I,KAAK,gBACJf,IAAI6N,KAAKlE,oBAIH0X,kCAAiBV,mLAEvBpZ,OAGDrL,EAAS2R,KADH3P,KAAK8B,IAAI8e,aAAavX,IAEhCA,EAAQrL,OAAOA,qCAGXyN,GAEJA,EAAI5I,KAAK,eACJf,IAAI6N,KAAKlE,mBAIH2X,mCAAkBX,uLAExBpZ,OAGDrL,EAASqlB,WADHrjB,KAAK8B,IAAI8e,aAAavX,IAEhCA,EAAQrL,OAAOA,qCAGXyN,GAEJA,EAAI5I,KAAK,gBACJf,IAAI6N,KAAKlE,oBAIH6X,mCAAkBjD,oDAElBlC,EAAU1Y,EAAKuG,EAAMC,+DAE1BkS,EAAU1Y,IACXuG,KAAOA,IACPC,KAAOA,qEAGPR,GAELA,EAAI5I,KAAK,KACT4I,EAAI5I,KAAK7C,KAAKwI,YAAY9G,MAC1B+J,EAAI5I,KAAK,eACJmJ,KAAKxG,MAAMiG,GAChBA,EAAI5I,KAAK,eACJoJ,KAAKzG,MAAMiG,GAChBA,EAAI5I,KAAK,yCAGJwG,OAED2C,EAAOhM,KAAKgM,KAAK4U,aAAavX,GAC9B4C,EAAOjM,KAAKiM,KAAK2U,aAAavX,UAC3BrJ,KAAKmc,IAAInQ,EAAMC,oBAIxBqX,GAAUljB,UAAU2e,YAAcsB,EAAQjgB,UAAU2e,YAAYvf,OAAO,CAAC,OAAQ,aAGnE+jB,iCAAgBD,2KAExBtX,EAAMC,UAEIjM,KAAKqiB,KAAKrW,EAAMC,+CAIpB5C,EAASxI,OAEdmL,EAAOhM,KAAKgM,KAAK4U,aAAavX,GAC9B4C,EAAOjM,KAAKiM,KAAK2U,aAAavX,QAC7BkH,KAAKvE,EAAMC,EAAMpL,qDAGVwI,EAASuD,EAAU/L,OAE3BmL,EAAOhM,KAAKgM,KAAK4U,aAAavX,GAC9B4C,EAAOjM,KAAKiM,KAAK2U,aAAavX,QAC7BiZ,QAAQ1V,EAAUZ,EAAMC,EAAMpL,qCAG/B4gB,EAAWviB,MAEW,iBAAfuiB,GAA2Btc,QAAQsc,GAC9C,IACKviB,aAAe4F,GACnB,KACKC,EAAQ7F,EAAI6F,MAAOC,EAAO9F,EAAI8F,YAC9B,MAAOD,IACVA,EAAQ,GACL,MAAOC,IACVA,EAAOyc,EAAU5jB,QACX4jB,EAAU3c,MAAMC,EAAOC,OAI1Bwe,EAAStkB,KACTA,EAAM,IACTA,GAAOuiB,EAAU5jB,QACdqB,EAAM,GAAKA,GAAOuiB,EAAU5jB,OAC/B,MAAM,IAAImgB,EAAWyD,EAAW+B,UAC1B/B,EAAUviB,GAGd,GAAIuiB,GAA+C,mBAA3BA,EAAUgC,mBAC/BhC,EAAUgC,YAAYvkB,GACzB,GAAIkG,EAAOqc,GACf,OAAOA,EAAUtgB,IAAIjC,GAErB,MAAM,IAAIoL,EAAUY,MAAMuW,GAAa,kEAGpCA,EAAWviB,EAAK2B,MAEhBsE,QAAQsc,MAEPviB,aAAe4F,GACnB,KACKC,EAAQ7F,EAAI6F,MAAOC,EAAO9F,EAAI8F,KACpB,OAAVD,EACHA,EAAQ,EACAA,EAAQ,IAChBA,GAAS0c,EAAU5jB,QAChBkH,EAAQ,EACXA,EAAQ,EACAA,EAAQ0c,EAAU5jB,SAC1BkH,EAAQ0c,EAAU5jB,QACN,OAATmH,EACHA,EAAOyc,EAAU5jB,OACTmH,EAAO,IACfA,GAAQyc,EAAU5jB,QACfmH,EAAO,EACVA,EAAO,EACCA,EAAOyc,EAAU5jB,SACzBmH,EAAOyc,EAAU5jB,QACdmH,EAAOD,IACVC,EAAOD,GACR0c,EAAU7H,OAAO7U,EAAOC,EAAKD,OACxB,IAAIuG,EAAOC,MAAM1K,KACtB,KACKU,EAAO+J,EAAK1C,UACZrH,EAAKsH,KACR,MACD4Y,EAAU7H,OAAO7U,IAAS,EAAGxD,EAAKV,YAIpC,KACK2iB,EAAStkB,KACTA,EAAM,IACTA,GAAOuiB,EAAU5jB,QACdqB,EAAM,GAAKA,GAAOuiB,EAAU5jB,OAC/B,MAAM,IAAImgB,EAAWyD,EAAW+B,GACjC/B,EAAUviB,GAAO2B,OAGd,GAAI4gB,GAA+C,mBAA3BA,EAAUiC,YACtCjC,EAAUiC,YAAYxkB,EAAK2B,QACvB,GAAIuE,EAAOqc,GACfA,EAAU3gB,IAAI5B,EAAK2B,OACf,CAAA,IAAIyL,UAAUmV,GAGlB,MAAM,IAAI3D,EAAsB2D,GAFhCA,EAAUviB,GAAO2B,2CAKX+L,EAAU6U,EAAWviB,EAAK2B,QAE5B0P,KAAKkR,EAAWviB,EAAK0N,EAAS4V,KAAKxiB,KAAKqiB,KAAKZ,EAAWviB,GAAM2B,mBAKxD8iB,+BAAcL,mKAEtBtX,EAAMC,UAEFD,IAASC,eAKL2X,kCAAiBN,+KAEzBtX,EAAMC,UAEFD,IAASC,kBAKL4X,+BAAcP,mKAEtBtX,EAAMC,UAEFF,IAAIC,EAAMC,gBAKN6X,+BAAcR,mKAEtBtX,EAAMC,UAEFQ,IAAIT,EAAMC,gBAKN8X,+BAAcT,mKAEtBtX,EAAMC,UAEFmB,IAAIpB,EAAMC,gBAKN+X,+BAAcV,mKAEtBtX,EAAMC,UAEFqB,IAAItB,EAAMC,gBAKNgY,+BAAcX,mKAEtBtX,EAAMC,UAEFuB,IAAIxB,EAAMC,gBAKNiY,+BAAcZ,mKAEtBtX,EAAMC,UAEFyB,IAAI1B,EAAMC,gBAKNkY,qCAAoBb,2LAE5BxhB,EAAK2f,MAEY,iBAAT3f,GAA2C,iBAAf2f,SAEH,IAA5BA,EAAUrV,QAAQtK,GAErB,GAAIqD,QAAQsc,UAEmB,IAA5BA,EAAUrV,QAAQtK,GAErB,GAAI2f,GAAgD,mBAA5BA,EAAU2C,oBAC/B3C,EAAU2C,aAAatiB,GAC1B,GAAIsD,EAAOqc,IAAcnc,OAAOmc,GACpC,OAAOA,EAAUjV,IAAI1K,GACjB,GAAIwK,UAAUmV,GACnB,KACM,IAAIviB,KAAOuiB,KAEXviB,IAAQ4C,EACX,OAAO,SAEF,EAEH,GAAI2B,SAASge,UAEVA,EAAUva,KAAOpF,GAAO2f,EAAUta,KAAOrF,GAAO2f,EAAUra,KAAOtF,GAAO2f,EAAUpa,KAAOvF,QAE3F,IAAIwI,EAAUY,MAAMuW,GAAa,8CAK5B4C,wCAAuBf,uMAE/BxhB,EAAK2f,UAEA0C,GAAY/jB,UAAU+b,IAAIra,EAAK2f,yBAK5B6C,gCAAehB,uKAEvBtX,EAAMC,MAELD,GAAiC,mBAAlBA,EAAKuY,QACvB,OAAOvY,EAAKuY,QAAQtY,GAChB,GAAIA,GAAkC,mBAAnBA,EAAKuY,SAC5B,OAAOvY,EAAKuY,SAASxY,MACT,OAATA,GAA0B,OAATC,EACpB,MAAM,IAAI3B,EAAUY,MAAMlL,KAAKgM,MAAQ,MAAQd,MAAMlL,KAAKiM,MAAQ,4BAC/D9G,QAAQ6G,IAAS7G,QAAQ8G,gCACjBD,sBAASC,IAEbD,EAAOC,oCAGXD,EAAMC,UAEN9G,QAAQ6G,IAAS7G,QAAQ8G,IAE5BuM,EAAasC,OAAO9O,EAAMC,GACnBD,GAGAhM,KAAKmc,IAAInQ,EAAMC,iBAKZiQ,gCAAeoH,uKAEvBtX,EAAMC,MAELD,GAAiC,mBAAlBA,EAAKyY,QACvB,OAAOzY,EAAKyY,QAAQxY,GAChB,GAAIA,GAAkC,mBAAnBA,EAAKyY,SAC5B,OAAOzY,EAAKyY,SAAS1Y,GACjB,GAAIpI,QAAQoI,IAASpI,QAAQqI,GACjC,OAAOjM,KAAK2kB,UAAU3Y,EAAMC,GACxB,GAAIjI,YAAYgI,IAAShI,YAAYiI,GACzC,OAAOjM,KAAK4kB,cAAc5Y,EAAMC,MACpB,OAATD,GAA0B,OAATC,EACpB,MAAM,IAAI3B,EAAUY,MAAMlL,KAAKgM,MAAQ,MAAQd,MAAMlL,KAAKiM,MAAQ,4BAC5DD,EAAOC,8CAGLD,EAAMC,UAERjM,KAAK4kB,cAAc5Y,EAAKkD,MAAOjD,EAAKiD,2DAG9BlD,EAAMC,OAEf4Y,EAAQ5Y,EAAOD,KAEf6Y,EACJ,KACKjoB,EAAIoP,EACRA,EAAOC,EACPA,EAAOrP,UAIJkoB,EAAQ9Y,EAAK/H,cACb8gB,EAAWjP,EAAiBC,QAAQ/J,GACpCgZ,EAAQ/Y,EAAKhI,cACbghB,EAAWnP,EAAiBC,QAAQ9J,GAEpCiZ,EAAW,EAERJ,EAAQE,GAEdE,GAAYzM,EAAa1C,QAAQ7G,MAAM8V,EAAO,GAAI,OAChDA,EAEHE,GAAYH,EAAWE,MAEnBE,EAASnZ,EAAK5H,WACdghB,EAAWpZ,EAAK3H,aAChBghB,EAAWrZ,EAAK1H,aAChBghB,EAASrZ,EAAK7H,WACdmhB,EAAWtZ,EAAK5H,aAGhBmhB,EAAeH,EAFJpZ,EAAK3H,aAEsB,IAAO8gB,EAAWG,EAAY,IAAMJ,EAASG,IAEnFG,EAAmBzZ,EAAKzH,kBAAoB0H,EAAK1H,yBAEjDsgB,IAEHK,GAAYA,EACZM,GAAeA,EACfC,GAAoBA,GAEd,IAAI1d,GAAUmd,EAAUM,EAAa,IAAKC,qCAG7CzZ,EAAMC,UAEHjM,KAAKmc,IAAInQ,EAAMC,iBAMXyZ,gCAAepC,uKAEvBtX,EAAMC,MAELD,GAAiC,mBAAlBA,EAAK2Z,QACvB,OAAO3Z,EAAK2Z,QAAQ1Z,GAChB,GAAIA,GAAkC,mBAAnBA,EAAK2Z,SAC5B,OAAO3Z,EAAK2Z,SAAS5Z,MACT,OAATA,GAA0B,OAATC,EACpB,MAAM,IAAI3B,EAAUY,MAAMc,GAAQ,MAAQd,MAAMe,GAAQ,kBACpD,GAAIkE,OAAOnE,IAASgG,QAAQhG,GACjC,IACsB,iBAAVC,EACX,IACKD,EAAO,EACV,MAAM,IAAIzG,EAAW,8CACfuN,YAAY7G,EAAMD,GAErB,GAAI7G,QAAQ8G,GACjB,IACKD,EAAO,EACV,MAAM,IAAIzG,EAAW,8CACfyN,aAAa/G,EAAMD,SAGvB,GAAImE,OAAOlE,IAAS+F,QAAQ/F,GACjC,IACsB,iBAAVD,EACX,IACKC,EAAO,EACV,MAAM,IAAI1G,EAAW,8CACfuN,YAAY9G,EAAMC,GAErB,GAAI9G,QAAQ6G,GACjB,IACKC,EAAO,EACV,MAAM,IAAI1G,EAAW,8CACfyN,aAAahH,EAAMC,WAGrBD,EAAOC,oCAGVD,EAAMC,MAEN9G,QAAQ6G,IAASmE,OAAOlE,GAC5B,IACKA,EAAO,UAENzO,EAAI,EACJqoB,EAAa7Z,EAAKnO,OAASoO,EACxBD,EAAKnO,OAASgoB,GACpB7Z,EAAKnJ,KAAKmJ,EAAKxO,WAGhBwO,EAAK4N,OAAO,EAAG5N,EAAKnO,eACdmO,EAGP,OAAOhM,KAAKmc,IAAInQ,EAAMC,iBAKZ6Z,qCAAoBxC,2LAE5BtX,EAAMC,MAELD,GAAsC,mBAAvBA,EAAK+Z,aACvB,OAAO/Z,EAAK+Z,aAAa9Z,GACrB,GAAIA,GAAuC,mBAAxBA,EAAK+Z,cAC5B,OAAO/Z,EAAK+Z,cAAcha,MACd,OAATA,GAA0B,OAATC,EACpB,MAAM,IAAI3B,EAAUY,MAAMc,GAAQ,OAASd,MAAMe,GAAQ,kBACrD,GAAqB,iBAAVD,GAAuC,iBAAVC,GAA+B,IAATA,EAClE,MAAM,IAAI8R,SACJ3a,KAAKgN,MAAMpE,EAAOC,qCAGrBD,EAAMC,UAEHjM,KAAKmc,IAAInQ,EAAMC,sBAKXga,oCAAmB3C,uLAE3BtX,EAAMC,MAELD,GAAqC,mBAAtBA,EAAKka,YACvB,OAAOla,EAAKka,YAAYja,GACpB,GAAIA,GAAsC,mBAAvBA,EAAKka,aAC5B,OAAOla,EAAKka,aAAana,MACb,OAATA,GAA0B,OAATC,EACpB,MAAM,IAAI3B,EAAUY,MAAMc,GAAQ,MAAQd,MAAMe,GAAQ,kBACpD,GAAqB,iBAAVD,GAAuC,iBAAVC,GAA+B,IAATA,EAClE,MAAM,IAAI8R,SACJ/R,EAAOC,oCAGVD,EAAMC,UAEHjM,KAAKmc,IAAInQ,EAAMC,qBAKXma,gCAAe9C,uKAEvBtX,EAAMC,UAEF2E,KAAK5E,EAAMC,qCAGdD,EAAMC,UAEHjM,KAAKmc,IAAInQ,EAAMC,iBAKXoa,sCAAqB/C,+LAE7BtX,EAAMC,OAEI,IAATA,EACHA,EAAO,GACU,IAATA,IACRA,EAAO,GACJA,EAAO,EACV,OAAOqa,GAAclmB,UAAU+b,IAAInQ,GAAOC,QAC9B,IAATD,EACHA,EAAO,GACU,IAATA,IACRA,EAAO,GACDC,KACND,GAAQ,SACFA,oCAGHA,EAAMC,UAEHjM,KAAKmc,IAAInQ,EAAMC,uBAKXqa,uCAAsBhD,mMAE9BtX,EAAMC,OAEI,IAATA,EACHA,EAAO,GACU,IAATA,IACRA,EAAO,GACJA,EAAO,EACV,OAAOoa,GAAajmB,UAAU+b,IAAInQ,GAAOC,QAC7B,IAATD,EACHA,EAAO,GACU,IAATA,IACRA,EAAO,GACDC,KACND,GAAQ,SACF5I,KAAKgN,MAAMpE,qCAGdA,EAAMC,UAEHjM,KAAKmc,IAAInQ,EAAMC,wBAKXsa,mCAAkBjD,mLAE1BtX,EAAMC,UAEI,IAATA,EACHA,EAAO,GACU,IAATA,IACRA,EAAO,GACDD,EAAOC,oCAGVD,EAAMC,UAEHjM,KAAKmc,IAAInQ,EAAMC,oBAKXua,mCAAkBlD,mLAE1BtX,EAAMC,UAEI,IAATA,EACHA,EAAO,GACU,IAATA,IACRA,EAAO,GACDD,EAAOC,oCAGVD,EAAMC,UAEHjM,KAAKmc,IAAInQ,EAAMC,oBAKXwa,kCAAiBnD,+KAEzBtX,EAAMC,UAEI,IAATA,EACHA,EAAO,GACU,IAATA,IACRA,EAAO,GACDD,EAAOC,oCAGVD,EAAMC,UAEHjM,KAAKmc,IAAInQ,EAAMC,mBAIXya,gCAAepD,2KAErBja,OAED2C,EAAOhM,KAAKgM,KAAK4U,aAAavX,UAC7B0G,MAAM/D,GAEAhM,KAAKiM,KAAK2U,aAAavX,GAD1B2C,gBAMG2a,+BAAcrD,uKAEpBja,OAED2C,EAAOhM,KAAKgM,KAAK4U,aAAavX,UAC9B0G,MAAM/D,GACFA,EACGhM,KAAKiM,KAAK2U,aAAavX,gBAKvBud,iCAAgBvG,gDAEhBlC,EAAU1Y,EAAK3D,EAAKkP,6DAEzBmN,EAAU1Y,IACX3D,IAAMA,IACNkP,SAAWA,mEAGXvF,GAELA,EAAI5I,KAAK,YACT4I,EAAI5I,KAAK,cACJf,IAAI0D,MAAMiG,GACfA,EAAI5I,KAAK,cACT4I,EAAI5I,KAAK2C,OAAMxF,KAAKgR,WACpBvF,EAAI5I,KAAK,yCAGJwG,OAEDvH,EAAM9B,KAAK8B,IAAI8e,aAAavX,UACnBrJ,KAAKqiB,KAAKvgB,EAAK9B,KAAKgR,sDAIxB3H,EAASxI,OAEdiB,EAAM9B,KAAK8B,IAAI8e,aAAavX,QAC3BkH,KAAKzO,EAAK9B,KAAKgR,SAAUnQ,qDAGlBwI,EAASuD,EAAU/L,OAE3BiB,EAAM9B,KAAK8B,IAAI8e,aAAavX,QAC3BiZ,QAAQ1V,EAAU9K,EAAK9B,KAAKgR,SAAUnQ,qCAGvCmY,EAAQhI,OAERE,EAAQP,EAASxP,IAAI6X,cAGjB9H,EAAMC,QAAQ6H,EAAQhI,GAE9B,MAAOI,MAEFA,aAAeC,GAAkBD,EAAItP,MAAQkX,EAChD,OAEA,MAAM5H,qCAIJ4H,EAAQhI,EAAUnQ,MAEC,WAAnB2O,QAAOwJ,IAAuD,mBAAxBA,EAAO6N,YAChD7N,EAAO6N,YAAY7V,EAAUnQ,QACzB,GAAIuE,EAAO4T,GACfA,EAAOlY,IAAIkQ,EAAUnQ,OACjB,CAAA,IAAIyL,UAAU0M,GAGlB,MAAM,IAAI1O,EAAUY,MAAM8N,GAAU,sCAFpCA,EAAOhI,GAAYnQ,2CAKb+L,EAAUoM,EAAQhI,EAAUnQ,OAE/BimB,EAAW9mB,KAAKqiB,KAAKrJ,EAAQhI,GAC7B3F,EAAWuB,EAAS4V,KAAKsE,EAAUjmB,QAClC0P,KAAKyI,EAAQhI,EAAU3F,kBAI9Bub,GAAQxmB,UAAU2e,YAAcsB,EAAQjgB,UAAU2e,YAAYvf,OAAO,CAAC,MAAO,iBAEhEunB,iCAAgB1G,gDAEhBlC,EAAU1Y,EAAK3D,EAAKgB,6DAEzBqb,EAAU1Y,IACX3D,IAAMA,IACNgB,KAAOA,mEAGP2I,GAELA,EAAI5I,KAAK,YACT4I,EAAI5I,KAAK,cACJf,IAAI0D,MAAMiG,sCACCzL,KAAK8C,qCACrB,KADSE,UAERyI,EAAI5I,KAAK,KACTG,EAAIwC,MAAMiG,kCAEXA,EAAI5I,KAAK,iDAGAwG,SAELvG,EAAO,GAAI4G,EAAS,gCACR1J,KAAK8C,8CAChBkkB,kBAAkB3d,EAASvG,EAAM4G,wCAC/B,CAAC5G,KAAMA,EAAM4G,OAAQA,qDAGhBL,cAIJrJ,KAAKgf,MAAM3V,GAEnB,MAAO+H,cAED6N,oBAAoB7N,GACnBA,uCAIF/H,OAEDvH,EAAM9B,KAAK8B,IAAI8e,aAAavX,GAC5BvG,EAAO9C,KAAKinB,UAAU5d,UACb4B,MAAM5B,EAASvH,EAAKgB,EAAKA,KAAMA,EAAK4G,uBAKnDqd,GAAQ3mB,UAAU2e,YAAcsB,EAAQjgB,UAAU2e,YAAYvf,OAAO,CAAC,MAAO,aAEhE0nB,mCAAkBH,qDAElB5I,EAAU1Y,EAAK3D,EAAKgB,+DAEzBqb,EAAU1Y,EAAK3D,EAAKgB,IACrBf,OAAS,wEAGT0J,GAELA,EAAI5I,KAAK,KACT4I,EAAI5I,KAAK7C,KAAKmnB,WACd1b,EAAI5I,KAAK,cACT4I,EAAI5I,KAAK,YACT4I,EAAI5I,KAAK2C,OAAMxF,KAAK+B,SACpB0J,EAAI5I,KAAK,cACJf,IAAI0D,MAAMiG,GACfA,EAAI5I,KAAK,sCACO7C,KAAK8C,qCACrB,KADSE,UAERyI,EAAI5I,KAAK,KACTG,EAAIwC,MAAMiG,GACVA,EAAI5I,KAAK,kCAEV4I,EAAI5I,MAAM,GACV4I,EAAI5I,KAAK,uCAGL4I,GAEJA,EAAI5I,KAAK,WACT4I,EAAI5I,KAAK7C,KAAKonB,IAAI/Y,KAAK7K,QAAQ,SAAU,MACrB,OAAhBxD,KAAK+B,SAER0J,EAAI5I,KAAK,iBACT4I,EAAI5I,KAAK2C,OAAMxF,KAAK+B,OAAO2c,0DAIhBrV,OAERsY,EAAetY,EAAQge,WAA2B,OAAhBrnB,KAAK+B,OAAkB/B,KAAK+B,OAAO2c,KAAO,MAC5E5c,EAAM9B,KAAK8B,IAAI8e,aAAae,GAC5B7e,EAAO9C,KAAKinB,UAAUtF,QACrB2F,6BAA6B3F,EAAc7e,cAIlC8H,YAAY+W,EAAc7f,EAAKgB,EAAKA,KAAMA,EAAK4G,QAG7D,MAAO0H,cAED6N,oBAAoB7N,GACnBA,qFAIqB/H,EAASvG,qBAKvCokB,GAAU9mB,UAAU2e,YAAcgI,GAAQ3mB,UAAU2e,YAAYvf,OAAO,CAAC,WACxE0nB,GAAU9mB,UAAU+mB,UAAY,gBAEnBI,oCAAmBL,yMAElB7d,GAEZA,EAAQsT,QAAQ9Z,KAAKwgB,gBAEjBvd,EAAS,SAGZA,4EAA4BuD,WAI5BA,EAAQsT,QAAQ/C,OAAOvQ,EAAQsT,QAAQ9e,OAAO,EAAG,UAE3CiI,oBAII0hB,wCAAuBN,yPAEN7d,EAASvG,MAEjCA,EAAK4G,OAAO6C,eAAe,WAC9B,MAAM,IAAI3C,EAAc,0CACrB6d,EAAU,IAAIlV,GAAgBvS,KAAK0nB,QAAS1nB,KAAK0nB,QAAQne,UAAWF,EAAQoT,MAChF3Z,EAAK4G,OAAOge,QAAUD,wBAIxBD,GAAepnB,UAAU2e,YAAcmI,GAAU9mB,UAAU2e,YAAYvf,OAAO,CAAC,gBAElEmoB,yCAAwBT,6PAEP7d,EAASvG,OAEjC6e,EAAetY,EAAQuY,kBAGtB,IAAI1iB,KAFT0oB,GAASxnB,UAAU4e,MAAM5M,KAAKpS,KAAM2hB,GAEpBA,EAAalF,QAExBkF,EAAalF,KAAKlQ,eAAerN,GACrC,IACKA,KAAO4D,EAAK4G,OACf,MAAM,IAAIE,EAAc,8BAAgC1K,GACzD4D,EAAK4G,OAAOxK,GAAOyiB,EAAaxgB,IAAIjC,2BAMxCyoB,GAAgBvnB,UAAU2e,YAAcmI,GAAU9mB,UAAU2e,YAAYvf,OAAO,CAAC,gBAGnEsF,+BAAc+N,4CAEd9N,EAAOC,6DAGbD,MAAQA,IACRC,KAAOA,2DAGVtF,OAEEqF,EAAQ/E,KAAK+E,OAAS,EACtBC,EAAqB,OAAdhF,KAAKgF,KAAgBtF,EAAO7B,OAASmC,KAAKgF,YAC9CtF,EAAOoF,MAAMC,EAAOC,qDAKpB,SAAWQ,OAAMxF,KAAK+E,OAAS,KAAOS,OAAMxF,KAAKgF,MAAQ,0DAGrDgM,UAEHA,OAEF,eACGhR,KAAK+E,UACR,cACG/E,KAAKgF,mBAEN,IAAIqM,EAAerR,KAAMgR,iBAOtB6W,kCAAiBxH,kDAEjBlC,EAAU1Y,EAAKqiB,EAAQC,8DAE5B5J,EAAU1Y,IACXqiB,OAASA,IACTC,OAASA,oEAGTtc,GAELA,EAAI5I,KAAK,aACW,OAAhB7C,KAAK8nB,SAERrc,EAAI5I,KAAK,iBACJilB,OAAOtiB,MAAMiG,IAEC,OAAhBzL,KAAK+nB,SAERtc,EAAI5I,KAAK,iBACJklB,OAAOviB,MAAMiG,IAEnBA,EAAI5I,KAAK,yCAGJwG,OAEDye,EAAyB,OAAhB9nB,KAAK8nB,OAAkB9nB,KAAK8nB,OAAOlH,aAAavX,GAAW,KACpE0e,EAAyB,OAAhB/nB,KAAK+nB,OAAkB/nB,KAAK+nB,OAAOnH,aAAavX,GAAW,YACjE,IAAIvE,GAAMgjB,EAAQC,mBAI3BF,GAASznB,UAAU2e,YAAcsB,EAAQjgB,UAAU2e,YAAYvf,OAAO,CAAC,SAAU,eAEpEwoB,mCAAkB3H,oDAElBlC,EAAU1Y,EAAK2F,EAAQvK,+DAE5Bsd,EAAU1Y,IACX2F,OAASA,IACTvK,MAAQA,qEAGR4K,GAELA,EAAI5I,KAAK,KACT4I,EAAI5I,KAAK7C,KAAKwI,YAAY9G,MAC1B+J,EAAI5I,KAAK,YACT4I,EAAI5I,KAAK2C,OAAMxF,KAAKoL,SACpBK,EAAI5I,KAAK,gBACJhC,MAAM2E,MAAMiG,GACjBA,EAAI5I,KAAK,yCAGJwG,SAEDxI,EAAQb,KAAKa,MAAM+f,aAAavX,gCACxB8B,WAAWnL,KAAKoL,OAAQvK,oEAC1BuK,OAAQvK,OACjBuK,EAAOyW,iBAAiBxY,EAASxI,oDAIpCmnB,GAAU5nB,UAAU2e,YAAcsB,EAAQjgB,UAAU2e,YAAYvf,OAAO,CAAC,SAAU,cAErEyoB,sCAAqBD,mMAE3B3e,SAEDxI,EAAQb,KAAKa,MAAM+f,aAAavX,gCACxB8B,WAAWnL,KAAKoL,OAAQvK,oEAC1BuK,OAAQvK,OACjBuK,EAAO8c,oBAAoB7e,EAASrJ,KAAKmoB,UAAWtnB,uDAI1CunB,mCAAkBH,0IAI/BG,GAAUhoB,UAAU+nB,UAAY7D,GAAOlkB,cAE1BioB,mCAAkBJ,0IAI/BI,GAAUjoB,UAAU+nB,UAAYjM,GAAO9b,cAE1BkoB,mCAAkBL,0IAI/BK,GAAUloB,UAAU+nB,UAAYzC,GAAOtlB,cAE1BmoB,uCAAsBN,0JAInCM,GAAcnoB,UAAU+nB,UAAYlC,GAAW7lB,cAElCooB,wCAAuBP,8JAIpCO,GAAepoB,UAAU+nB,UAAYrC,GAAY1lB,cAEpCqoB,mCAAkBR,0IAI/BQ,GAAUroB,UAAU+nB,UAAY/B,GAAOhmB,cAE1BsoB,yCAAwBT,kKAIrCS,GAAgBtoB,UAAU+nB,UAAY9B,GAAajmB,cAEtCuoB,0CAAyBV,sKAItCU,GAAiBvoB,UAAU+nB,UAAY7B,GAAclmB,cAExCwoB,sCAAqBX,sJAIlCW,GAAaxoB,UAAU+nB,UAAY5B,GAAUnmB,cAEhCyoB,sCAAqBZ,sJAIlCY,GAAazoB,UAAU+nB,UAAY3B,GAAUpmB,cAEhC0oB,qCAAoBb,kJAIjCa,GAAY1oB,UAAU+nB,UAAY1B,GAASrmB,cAE9BwnB,kCAAiBvH,kDAEjBlC,EAAU1Y,8DAEf0Y,EAAU1Y,IACXiiB,QAAU,qEAGVre,sCAEYrJ,KAAK0nB,iDAChB9G,aAAavX,qEAGfoC,MAEAzL,KAAK0nB,QAAQ7pB,OACjB,oCACkBmC,KAAK0nB,wCACtB,SACM/X,KAAKlE,GACVA,EAAI5I,KAAK,wCAKV4I,EAAI5I,KAAK,QACT4I,EAAI5I,KAAK,mBAKZ+kB,GAASxnB,UAAU2e,YAAcsB,EAAQjgB,UAAU2e,YAAYvf,OAAO,CAAC,gBAE1DupB,qCAAoBnB,yDAEpBzJ,EAAU1Y,EAAK+b,EAASC,iEAE7BtD,EAAU1Y,IACX+b,QAAUA,IACVC,UAAYA,uEAGZhW,GAELA,EAAI5I,KAAK,gBACT4I,EAAI5I,KAAK,aACT4I,EAAI5I,KAAK2C,OAAMxF,KAAKwhB,UACpB/V,EAAI5I,KAAK,oBACJ4e,UAAUjc,MAAMiG,GACrBA,EAAI5I,KAAK,uDAGG4I,EAAK+V,MAEbrc,QAAQqc,GACZ,CACC/V,EAAI5I,KAAK,WACLiM,EAAQka,mCACQxH,kCACpB,KADSyH,UAEJna,EACHA,GAAQ,EAERrD,EAAI5I,KAAK,WACLqmB,aAAazd,EAAKwd,kCAEF,GAAlBzH,EAAQ3jB,QACX4N,EAAI5I,KAAK,KACV4I,EAAI5I,KAAK,UAGT2e,EAAQ7R,KAAKlE,uCAGTpC,WAIIiC,EAAOC,MAFAvL,KAAKyhB,UAAUb,aAAavX,MAG5C,KACKxI,EAAQyK,EAAK1C,UACb/H,EAAMgI,KACT,yCACcsC,WAAWnL,KAAKwhB,QAAS3gB,EAAMA,wEACpCuK,OAAQvK,OACjBuK,EAAOyW,iBAAiBxY,EAASxI,0GAKrBwI,GAEb,MAAO+H,MAEFA,aAAesM,EAClB,MACI,KAAItM,aAAeuM,GAGvB,MAAMvM,sCAKL3F,GAEJA,EAAI5I,KAAK,aACJqmB,aAAazd,EAAKzL,KAAKwhB,SAC5B/V,EAAI5I,KAAK,aACJ4e,UAAU9R,KAAKlE,GACpBA,EAAI5I,KAAK,KACT4I,EAAI5I,KAAK,GACT+kB,GAASxnB,UAAUuP,KAAKyC,KAAKpS,KAAMyL,GACnCA,EAAI5I,MAAM,sBAIZkmB,GAAY3oB,UAAU2e,YAAc6I,GAASxnB,UAAU2e,YAAYvf,OAAO,CAAC,UAAW,kBAEzE2pB,uCAAsBvB,6DAEtBzJ,EAAU1Y,EAAKic,mEAEpBvD,EAAU1Y,IACXic,UAAYA,yEAGZjW,GAELA,EAAI5I,KAAK,aACT4I,EAAI5I,KAAK,oBACJ6e,UAAUlc,MAAMiG,GACrBA,EAAI5I,KAAK,uCAGL4I,GAEJA,EAAI5I,KAAK,eACJ6e,UAAUlc,MAAMiG,GACrBA,EAAI5I,KAAK,KACT4I,EAAI5I,KAAK,GACT+kB,GAASxnB,UAAUuP,KAAKyC,KAAKpS,KAAMyL,GACnCA,EAAI5I,MAAM,uCAGLwG,UAGL,KAEM0G,MADM/P,KAAK0hB,UAAUd,aAAavX,IAEtC,gFAKYA,GAEb,MAAO+H,MAEFA,aAAesM,EAClB,MACI,KAAItM,aAAeuM,GAGvB,MAAMvM,yBAMX+X,GAAc/oB,UAAU2e,YAAc6I,GAASxnB,UAAU2e,YAAYvf,OAAO,CAAC,kBAEhE4pB,kCAAiB/I,kLAEvBhX,SAEC,IAAIqU,oCAGNjS,GAEJA,EAAI5I,KAAK,SACT4I,EAAI5I,KAAK,uCAGJ4I,GAELA,EAAI5I,KAAK,8BAIEwmB,qCAAoBhJ,8LAE1BhX,SAEC,IAAIsU,oCAGNlS,GAEJA,EAAI5I,KAAK,YACT4I,EAAI5I,KAAK,uCAGJ4I,GAELA,EAAI5I,KAAK,oCAIEymB,sCAAqB1B,mMAE3Bve,sCAEarJ,KAAK0nB,wCACvB,KADS6B,aAEMA,EAAMC,SAASngB,GAE7B,CACCkgB,EAAM3I,aAAavX,8DAOVogB,6CAA6B7B,yEAE7BzJ,EAAU1Y,EAAKic,yEAEpBvD,EAAU1Y,IACXic,UAAYA,+EAGZjW,GAELA,EAAI5I,KAAK,KACT4I,EAAI5I,KAAK7C,KAAKwI,YAAY9G,MAC1B+J,EAAI5I,KAAK,oBACJ6e,UAAUlc,MAAMiG,GACrBA,EAAI5I,KAAK,uCAGL4I,GAEJA,EAAI5I,KAAK7C,KAAK0pB,UACdje,EAAI5I,KAAK,UACJ6e,UAAU/R,KAAKlE,GACpBA,EAAI5I,KAAK,KACT4I,EAAI5I,KAAK,GACT+kB,GAASxnB,UAAUuP,KAAKyC,KAAKpS,KAAMyL,GACnCA,EAAI5I,MAAM,6CAGFwG,UAGK0G,MADF/P,KAAK0hB,UAAUd,aAAavX,+BAMzCogB,GAAoBrpB,UAAU2e,YAAc6I,GAASxnB,UAAU2e,YAAYvf,OAAO,CAAC,kBAEtEmqB,oCAAmBF,8IAIhCE,GAAWvpB,UAAUspB,SAAW,SAEnBE,sCAAqBH,sJAIlCG,GAAaxpB,UAAUspB,SAAW,cAErBG,sCAAqBjC,mMAE3Bnc,GAELA,EAAI5I,KAAK,YACT4I,EAAI5I,KAAK,uCAGL4I,GAEJA,EAAI5I,KAAK,SACT4I,EAAI5I,KAAK,GACT+kB,GAASxnB,UAAUuP,KAAKyC,KAAKpS,KAAMyL,GACnCA,EAAI5I,MAAM,6CAGFwG,UAED,sBAIIiJ,kCAAiBsV,mDAEjBzJ,EAAU1Y,EAAK+Y,EAAQ9c,EAAMooB,EAAYC,EAAYC,EAAUzgB,8DAEpE4U,EAAU1Y,IACX4Z,QAAUb,IACV9c,KAAOA,IACPooB,WAAaA,IACbC,WAAaA,IACbC,SAAWA,IACXC,OAAS,OACT1gB,UAAYA,IACZ2gB,MAAQ,OACR1f,mBAAqBjB,IACrBsB,qBAAuBtB,IACvB6U,eAAiB,mFAGXpN,OAEPrI,EAAO3I,YACHgR,OAEF,iBACGhR,KAAK0nB,YACR,gBACG1nB,KAAKwe,WACR,cACGxe,KAAK0B,SACR,oBACG1B,KAAK8pB,eACR,oBACG9pB,KAAK+pB,eACR,kBACG/pB,KAAKgqB,aACR,aACGhqB,KAAKmqB,UACR,mBACGnqB,KAAKuJ,cACR,wBACGvJ,KAAKoe,mBACR,aACAgM,EAAS,SAASA,OAAO/gB,EAASoT,GAAO9T,EAAK0hB,aAAahhB,EAASoT,WACxEzE,OAAOoS,EAAQpqB,KAAKuJ,UAAW,CAACC,cAAc,EAAMC,aAAa,IAC1D2gB,MACH,cACAE,EAAU,SAASA,QAAQjhB,EAASoT,UAAc9T,EAAK4hB,cAAclhB,EAASoT,WAClFzE,OAAOsS,EAAStqB,KAAKuJ,UAAW,CAACC,cAAc,EAAMC,aAAa,IAC3D6gB,wFAEkBtZ,gDAIlBhP,OAELuH,KACJvH,EAAQE,KAhkOiB,MAikOzBF,EAAQE,KAAKlC,KAAK0B,MAClBM,EAAQE,KAAKlC,KAAKqf,SAClBrd,EAAQE,KAAKlC,KAAK8pB,YAClB9nB,EAAQE,KAAKlC,KAAK+pB,YAClB/nB,EAAQE,KAAKlC,KAAKgqB,UAClBhoB,EAAQE,KAAKlC,KAAKiqB,QAClBjoB,EAAQE,KAAKlC,KAAKoe,gBACK,OAAnBpe,KAAKuJ,WAAsBvJ,KAAKuJ,qBAAqBihB,GACxDjhB,EAAYvJ,KAAKuJ,cAElB,CACCA,EAAY,sCACIvJ,KAAKuJ,UAAUzG,qCAC/B,KADSE,eAEyB,IAAtBA,EAAI2U,aACdpO,EAAU1G,KAAKG,EAAItB,MAEnB6H,EAAU1G,KAAKG,EAAItB,KAAK,IAAKsB,EAAI2U,6CAEJ,OAA3B3X,KAAKuJ,UAAU+N,SAClB/N,EAAU1G,KAAK,IAAM7C,KAAKuJ,UAAU+N,SACJ,OAA7BtX,KAAKuJ,UAAUgO,WAClBhO,EAAU1G,KAAK,KAAO7C,KAAKuJ,UAAUgO,WAEvCvV,EAAQE,KAAKqH,wEACGvH,+CAGPod,OAGL7V,EADAkhB,EAAqBrL,EAAQ7c,UAGN,OAAvBkoB,EACH,MAAM,IAAIllB,EAAW,sFAnmOG,OAqmOrBklB,EACH,MAAM,IAAIllB,EAAW,qCAAwDklB,QAEzE/oB,KAAO0d,EAAQ7c,YACf8c,QAAUD,EAAQ7c,YAClBunB,WAAa1K,EAAQ7c,YACrBwnB,WAAa3K,EAAQ7c,YACrBynB,SAAW5K,EAAQ7c,YACnB0nB,OAAS7K,EAAQ7c,YACjB6b,eAAiBgB,EAAQ7c,OAE1B4C,QADJoE,EAAY6V,EAAQ7c,UAEnBgH,aAAgB6N,qBAAa7N,UACzBA,UAAYA,OACZiB,mBAAqBjB,OACrBsB,qBAAuBtB,uEACZ6V,uCAGX1f,UAEE0C,OAAM1C,uCAGR2J,OAEDE,EAAY,KACO,OAAnBvJ,KAAKuJ,YACRA,EAAYvJ,KAAKuJ,UAAUqX,aAAavX,QACrCoe,EAAU,IAAIlV,GAAgBvS,KAAMuJ,EAAWF,EAAQoT,MAC3DpT,EAAQvI,IAAId,KAAK0B,KAAM+lB,uCAGlBhc,GAELA,EAAI5I,KAAK,aACS,OAAd7C,KAAK0B,OAER+J,EAAI5I,KAAK,UACT4I,EAAI5I,KAAK2C,OAAMxF,KAAK0B,QAErB+J,EAAI5I,KAAK,gBACT4I,EAAI5I,KAAK2C,OAAMxF,KAAK8pB,aACI,OAApB9pB,KAAK+pB,aAERte,EAAI5I,KAAK,gBACT4I,EAAI5I,KAAK2C,OAAMxF,KAAK+pB,cAEC,OAAlB/pB,KAAKgqB,WAERve,EAAI5I,KAAK,cACT4I,EAAI5I,KAAK2C,OAAMxF,KAAKgqB,YAErBve,EAAI5I,KAAK,uCAGL4I,GAEJA,EAAI5I,KAAK,QACT4I,EAAI5I,KAAK7C,KAAK0B,KAAO1B,KAAK0B,KAAO,WACjC+J,EAAI5I,KAAK,KACT4I,EAAI5I,KAAK,GACT+kB,GAASxnB,UAAUuP,KAAKyC,KAAKpS,KAAMyL,GACnCA,EAAI5I,MAAM,qDAGEwG,EAASoT,OAEjBkF,EAAetY,EAAQqhB,QAC3B/I,EAAalF,KAAOA,MAGnBmL,GAASxnB,UAAU4e,MAAM5M,KAAKpS,KAAM2hB,GAErC,MAAOvQ,QAEAA,aAAeqM,GACpB,MAAMrM,iDAIE/H,EAASoT,QAEd4N,aAAahhB,EAASoT,yCAGrBpT,EAASoT,QAEV4N,aAAahhB,EAASoT,uDAGdpT,EAASoT,OAElBkF,EAAetY,EAAQshB,4BACtBN,aAAa1I,EAAclF,GACzBkF,EAAaiJ,oDAGbnO,GAEPA,EAAOA,GAAQ,OACXpT,EAAU,IAAImT,SACK,OAAnBxc,KAAKuJ,YACRkT,EAAOzc,KAAKuJ,UAAUM,WAAW7J,KAAK0B,KAAM,GAAI+a,IAC1Czc,KAAKuqB,cAAclhB,EAASoT,4CAKb,MAAfzc,KAAKiqB,OAAiBjqB,KAAKiqB,OAAO3K,GAAGtf,KAAKqf,SAAW,mDAGlDhW,EAASoT,OAEfkF,EAAetY,EAAQqhB,QAC3B/I,EAAalF,KAAOA,MAGnBmL,GAASxnB,UAAU4e,MAAM5M,KAAKpS,KAAM2hB,GAErC,MAAOvQ,MAEFA,aAAeqM,EAClB,OAAOrM,EAAItL,OAEX,MAAMsL,SAED,uCAGHqL,GAEJA,EAAOA,GAAQ,OACXpT,EAAU,IAAImT,SACK,OAAnBxc,KAAKuJ,YACRkT,EAAOzc,KAAKuJ,UAAUM,WAAW7J,KAAK0B,KAAM,GAAI+a,IAC1Czc,KAAK6qB,WAAWxhB,EAASoT,6CAGxBpT,EAASoT,UAEVzc,KAAK6qB,WAAWxhB,EAASoT,mDAKzB,2BAITnK,GAASlS,UAAUqK,sBAAuB,EAC1C6H,GAASlS,UAAUsK,uBAAwB,EAC3C4H,GAASlS,UAAU0K,wBAAyB,EAC5CwH,GAASlS,UAAU2K,yBAA0B,MAEhCyf,sCAAqBnK,0DAErBlC,EAAU1Y,kEAEf0Y,EAAU1Y,IACXqlB,OAAS,iFAGL9oB,4EAEOA,SAEZE,EAAO,gCAEOlC,KAAK8qB,uCACvB,KADSC,UAES,OAAbA,EAAM,GACT7oB,EAAKW,KAAKkoB,EAAM,IAEhB7oB,EAAKW,KAAKkoB,kCAEZ/oB,EAAQE,KAAKA,+CAGJkd,4EAEOA,OACZld,EAAOkd,EAAQ7c,YACduoB,OAAS,sCACI5oB,kCAClB,KADS6oB,UAEc,iBAAXA,EACV/qB,KAAK8qB,OAAOjoB,KAAK,CAACkoB,EAAO,OAEzB/qB,KAAK8qB,OAAOjoB,KAAKkoB,uEAId1hB,SAEDvG,EAAO,gCACO9C,KAAK8qB,uCACvB,KADSC,UAES,OAAbA,EAAM,GACTjoB,EAAKD,KAAKkoB,EAAM,KAGhBjoB,EAAKD,KAAKkoB,EAAM,GAAK,KACrBjoB,EAAKD,KAAKkoB,EAAM,GAAGnK,aAAavX,sDAGvB+N,EAAatU,uCAGnB2I,GAELA,EAAI5I,KAAK,KACT4I,EAAI5I,KAAK7C,KAAKwI,YAAY9G,MAC1B+J,EAAI5I,KAAK,iBACJioB,OAAOtlB,MAAMiG,GAClBA,EAAI5I,KAAK,yBAIE0P,yCAAwBM,gEAExBsL,EAAU5U,EAAWkT,uEAG3B0B,SAAWA,IACX5U,UAAYA,IACZkT,KAAOA,IACPjS,mBAAqBjB,IACrBsB,qBAAuBtB,IAEvB7H,KAAOyc,EAASzc,OAChB0lB,IAAMjJ,EAASiJ,MACf4D,OAAS7M,EAAS6M,SAClB3L,QAAUlB,EAASkB,UACnB0K,WAAa5L,EAAS4L,aACtBC,SAAW7L,EAAS6L,WACpBC,OAAS9L,EAAS8L,SAClBvC,QAAUvJ,EAASuJ,2FAGdre,EAASoT,QAEd0B,SAASkM,aAAahhB,EAAS8O,QAAQnY,KAAKyc,KAAMA,0CAGjDpT,EAASoT,QAEV0B,SAASkM,aAAahhB,EAAS8O,QAAQnY,KAAKyc,KAAMA,8CAG/CpT,EAASoT,UAEVzc,KAAKme,SAAS0M,WAAWxhB,EAAS8O,QAAQnY,KAAKyc,KAAMA,sDAGhDpT,EAASoT,QAEhB0B,SAASkM,aAAahhB,EAAS8O,QAAQnY,KAAKyc,KAAMA,wDAG1CpT,EAASoT,UAEfzc,KAAKme,SAASoM,cAAclhB,EAAS8O,QAAQnY,KAAKyc,KAAMA,oDAGpDzL,OAEPrI,EAAO3I,YACHgR,OAEF,aACAoZ,EAAS,SAASA,OAAO/gB,EAASoT,GAAO9T,EAAK0hB,aAAahhB,EAASoT,WACxEzE,OAAOoS,EAAQpqB,KAAKuJ,UAAW,CAACC,cAAc,EAAMC,aAAa,IAC1D2gB,MACH,cACAE,EAAU,SAASA,QAAQjhB,EAASoT,UAAc9T,EAAK4hB,cAAclhB,EAASoT,WAClFzE,OAAOsS,EAAStqB,KAAKuJ,UAAW,CAACC,cAAc,EAAMC,aAAa,IAC3D6gB,MACH,mBACGtqB,KAAKuJ,yBAELvJ,KAAKme,SAAStF,YAAY7H,oDAM5B,kCAUF,SAASia,KAAKvnB,EAAGC,EAAGjH,EAAGD,UAEtB,IAAIwK,GAAM,IAAIvD,EAAG,IAAIC,EAAG,IAAIjH,EAAG,IAAID,GAIpC,SAAS4mB,WAAWvhB,UAO1BA,GADAA,GADAA,GADAA,GADAA,GADAA,EAAM6N,KAAK7N,IACD0B,QAAQ,KAAM,UACdA,QAAQ,KAAM,SACdA,QAAQ,KAAM,SACdA,QAAQ,KAAM,UACdA,QAAQ,KAAM,UAKlB,SAAS0nB,KAAKppB,UAER,OAARA,EACI,IACiB,iBAATA,IACfA,EAAM0D,OAAM1D,KACa,IAAtBA,EAAIsK,QAAQ,OAAqC,IAAtBtK,EAAIsK,QAAQ,OAAsC,IAAvBtK,EAAIsK,QAAQ,QACrEtK,EAAM,IAAMA,EAAI0B,QAAQ,KAAM,MAAQ,KAChC1B,GAID,SAASqpB,KAAK3tB,MAEH,iBAANA,EACV,MAAM,IAAI8M,EAAU,gCACdpM,OAAOC,aAAaX,GAIrB,SAAS4tB,KAAKnuB,MAEH,iBAANA,GAA8B,GAAZA,EAAEY,OAC9B,MAAM,IAAIyM,EAAU,8CACdrN,EAAEsB,WAAW,GAId,SAAS8sB,KAAKC,MAEE,iBAAXA,EACV,MAAM,IAAIhhB,EAAU,gCACjBghB,EAAS,EACL,MAAQA,EAAO7c,SAAS,IAAImJ,OAAO,GAEnC,KAAO0T,EAAO7c,SAAS,IAIzB,SAAS8c,KAAKD,MAEE,iBAAXA,EACV,MAAM,IAAIhhB,EAAU,gCACjBghB,EAAS,EACL,MAAQA,EAAO7c,SAAS,GAAGmJ,OAAO,GAElC,KAAO0T,EAAO7c,SAAS,GAIzB,SAAS+c,KAAKF,MAEE,iBAAXA,EACV,MAAM,IAAIhhB,EAAU,gCACjBghB,EAAS,EACL,MAAQA,EAAO7c,SAAS,GAAGmJ,OAAO,GAElC,KAAO0T,EAAO7c,SAAS,GAIzB,SAASgd,KAAK3pB,MAEF,GAAdA,EAAIjE,OACP,MAAM,IAAI+L,EAAc,+CACF,GAAd9H,EAAIjE,SACZiE,EAAMA,EAAI,YAEPgE,EADAwF,EAAOC,MAAMzJ,GAEbgN,GAAQ,IAEZ,KACKvN,EAAO+J,EAAK1C,UACZrH,EAAKsH,KACT,IACKiG,EACH,MAAM,IAAIvJ,EAAW,+CACfO,GAEJgJ,GAAUvN,EAAKV,MAAQiF,KAC1BA,EAASvE,EAAKV,OACfiO,GAAQ,GAKH,SAAS4c,KAAK5pB,MAEF,GAAdA,EAAIjE,OACP,MAAM,IAAI+L,EAAc,+CACF,GAAd9H,EAAIjE,SACZiE,EAAMA,EAAI,YAEPgE,EADAwF,EAAOC,MAAMzJ,GAEbgN,GAAQ,IAEZ,KACKvN,EAAO+J,EAAK1C,UACZrH,EAAKsH,KACT,IACKiG,EACH,MAAM,IAAIvJ,EAAW,+CACfO,GAEJgJ,GAAUvN,EAAKV,MAAQiF,KAC1BA,EAASvE,EAAKV,OACfiO,GAAQ,GAKH,SAAS6c,KAAKha,WAAU5M,yDAAM,EAE3BuG,EAAOC,MAAMoG,KACtB,KACKpQ,EAAO+J,EAAK1C,UACZrH,EAAKsH,KACR,MACD9D,GAASxD,EAAKV,aAERkE,EAID,SAAS6mB,OAAOja,OAAUgG,yDAAa,KAEzCpW,EAAOgK,MAAMoG,GAAU/I,cACpBrH,EAAKsH,KAAO8O,EAAepW,EAAKV,MAIjC,SAASgrB,MAAMla,WAEjB9Q,yDAFwC,KAInCyK,EAAOC,MAAMoG,KACtB,KACKpQ,EAAO+J,EAAK1C,UACZrH,EAAKsH,KACR,MACDhI,EAAQU,EAAKV,aAEPA,EAID,SAASirB,QAAQziB,EAASsI,OAAUzS,yDAAI,KAAM6sB,6DAExC,OAAR7sB,EACJ,KAEK8sB,EAAMD,EAAU,SAASC,IAAIvvB,EAAGC,UAE3BmQ,KAAK,MAAOpQ,EAAGC,IACpB,SAASsvB,IAAIvvB,EAAGC,UAEZmQ,KAAK,MAAOpQ,EAAGC,IAEnBoJ,EAASwK,MAAMqB,UACnB7L,EAAOmmB,KAAKD,GACLlmB,UAIHmmB,EAAO,GAEFzuB,EAAI,EAAG8N,EAAOC,MAAMoG,MAAanU,EAC1C,KACK+D,EAAO+J,EAAK1C,UACZrH,EAAKsH,KACR,UACGqjB,EAAWjhB,MAAM5B,EAASnK,EAAK,CAACqC,EAAKV,OAAQ,IAGjDorB,EAAKppB,KAAK,CAACqpB,EAAUH,GAAWvuB,EAAIA,EAAG+D,EAAKV,QAW7CorB,EAAKA,KATL,SAASD,MAAIG,EAAIC,OAEZpf,EAAMH,KAAK,MAAOsf,EAAG,GAAIC,EAAG,WAC5Bpf,EACI+e,GAAW/e,EAAMA,GACzBA,EAAMH,KAAK,MAAOsf,EAAG,GAAIC,EAAG,IACrBL,GAAW/e,EAAMA,aAKrBlH,EAAS,SACImmB,sBAAR1qB,OACRuE,EAAOjD,KAAKtB,EAAK,WACXuE,EAKF,SAASumB,OAAOvpB,OAElBiC,EAAOC,EAAMsnB,EAuBbjS,EAAOkS,KAtBPzpB,EAAKjF,OAAS,EACjB,MAAM,IAAI+L,EAAc,qCACpB,GAAI9G,EAAKjF,OAAS,EACtB,MAAM,IAAI+L,EAAc,mDAAqD9G,EAAKjF,OAAS,aACpE,GAAfiF,EAAKjF,QAEbkH,EAAQ,EACRC,EAAOlC,EAAK,GACZwpB,EAAO,GAEgB,GAAfxpB,EAAKjF,QAEbkH,EAAQjC,EAAK,GACbkC,EAAOlC,EAAK,GACZwpB,EAAO,GAEgB,GAAfxpB,EAAKjF,SAEbkH,EAAQjC,EAAK,GACbkC,EAAOlC,EAAK,GACZwpB,EAAOxpB,EAAK,IAGA,IAATwpB,EACH,MAAM,IAAI/mB,EAAW,yCACb+mB,EAAO,GAEfjS,EAAQtV,EACRwnB,EAASvnB,IAITqV,EAAQrV,EACRunB,EAASxnB,OAENlH,EAAUwc,EAAQkS,EAAUnpB,KAAKgN,OAAOmc,EAASlS,EAAQ,GAAGjX,KAAKopB,IAAIF,IAAS,EAAI,QAE/E,CACNhpB,MAAO,EACPsF,KAAM,uBAED5I,KAAKsD,OAASzF,EACV,CAACgL,MAAM,GACR,CAAChI,MAAOkE,EAAS/E,KAAKsD,QAAWgpB,EAAMzjB,MAAM,KAMhD,SAAS4jB,OAAO3pB,OAElB6O,EAAU5M,EAAOC,EAAMsnB,KACvBxpB,EAAKjF,OAAS,EACjB,MAAM,IAAI+L,EAAc,qCACpB,GAAI9G,EAAKjF,OAAS,EACtB,MAAM,IAAI+L,EAAc,mDAAqD9G,EAAKjF,OAAS,aACpE,GAAfiF,EAAKjF,QAEb8T,EAAW7O,EAAK,GAChBiC,EAAQ,EACRC,EAAOlC,EAAK,GACZwpB,EAAO,GAEgB,GAAfxpB,EAAKjF,QAEb8T,EAAW7O,EAAK,GAChBiC,EAAoB,OAAZjC,EAAK,GAAcA,EAAK,GAAK,EACrCkC,EAAOlC,EAAK,GACZwpB,EAAO,GAEgB,GAAfxpB,EAAKjF,SAEb8T,EAAW7O,EAAK,GAChBiC,EAAoB,OAAZjC,EAAK,GAAcA,EAAK,GAAK,EACrCkC,EAAOlC,EAAK,GACZwpB,EAAmB,OAAZxpB,EAAK,GAAcA,EAAK,GAAK,GAEjCiC,EAAQ,EACX,MAAM,IAAIQ,EAAW,6CAClBP,EAAO,EACV,MAAM,IAAIO,EAAW,4CAClB+mB,GAAQ,EACX,MAAM,IAAI/mB,EAAW,4CAElBqD,EAAO7D,EAAOkT,EAAQ,EACtB3M,EAAOC,MAAMoG,SACV,CACN/I,KAAM,wBACD9C,EACGmS,EAAQrP,GACf,KACC9C,EAASwF,EAAK1C,QACHC,KACV,OAAO/C,IACNmS,SAEU,OAATjT,GAAiBiT,GAASjT,EACtB,CAAC6D,MAAM,IACf/C,EAASwF,EAAK1C,QACHC,KACH/C,KACNmS,EACFrP,GAAQ0jB,EACK,OAATtnB,GAAiB4D,EAAO5D,IAC3B4D,EAAO5D,GACDc,KAMH,SAAS4mB,UAAUhtB,UAElBd,mBAAmBc,GAIpB,SAASitB,YAAYjtB,UAEpBktB,mBAAmBltB,GAIpB,SAASmtB,UAAUpc,SAED,iBAAbA,GAA0BtL,QAAQsL,KAC5CA,EAAWH,MAAMG,IACX,CACNnN,MAAOmN,EAAS5S,OAAO,EACvB+K,KAAM,uBACE5I,KAAKsD,OAAS,EAAI,CAACzC,MAAO4P,EAASzQ,KAAKsD,SAAUuF,MAAM,GAAS,CAACA,MAAM,KAM3E,SAASikB,iBAER1pB,KAAK2pB,SAIN,SAASC,WAAWlqB,OAEtBiC,EAAOC,EAAMsnB,KACbxpB,EAAKjF,OAAS,EACjB,MAAM,IAAI+L,EAAc,yCACpB,GAAI9G,EAAKjF,OAAS,EACtB,MAAM,IAAI+L,EAAc,uDAAyD9G,EAAKjF,OAAS,UACxE,GAAfiF,EAAKjF,QAEbkH,EAAQ,EACRC,EAAOlC,EAAK,GACZwpB,EAAO,GAEgB,GAAfxpB,EAAKjF,QAEbkH,EAAQjC,EAAK,GACbkC,EAAOlC,EAAK,GACZwpB,EAAO,GAEgB,GAAfxpB,EAAKjF,SAEbkH,EAAQjC,EAAK,GACbkC,EAAOlC,EAAK,GACZwpB,EAAOxpB,EAAK,QAMTmqB,EAJAC,EAAQloB,EAAKD,EAEblE,EAAQuC,KAAK2pB,YAGbT,EAAO,EACVW,EAAI7pB,KAAKgN,OAAO8c,EAAQZ,EAAO,GAAKA,OAChC,CAAA,KAAIA,EAAO,GAGf,MAAM,IAAI/mB,EAAW,6CAFrB0nB,EAAI7pB,KAAKgN,OAAO8c,EAAQZ,EAAO,GAAKA,UAG9BvnB,EAAQunB,EAAKlpB,KAAKgN,MAAMvP,EAAQosB,GAIjC,SAASE,YAAY1c,OAEvB2c,EAAU3pB,SAASgN,MACE,iBAAdA,IAA2BtL,QAAQsL,KAAc2c,EAC3D,MAAM,IAAI9iB,EAAU,iDACjB8iB,IACH3c,EAAWH,MAAMG,IACXA,EAASrN,KAAKgN,MAAMhN,KAAK2pB,SAAWtc,EAAS5S,SAI9C,SAASwvB,OAAOjxB,OAAGkxB,yDAAO,KAE5BA,EACJ,KACKC,EAAYnqB,KAAKoqB,IAAI,GAAIF,UACtBlqB,KAAKC,MAAMjH,EAAEmxB,GAAWA,EAG/B,OAAOnqB,KAAKC,MAAMjH,GAOb,SAASqxB,KAAK/tB,UAEbD,EAAIC,GAIL,SAASguB,WAAW/b,OAAU5M,yDAAM,QAEnC,CACNuG,KAAMC,MAAMoG,GACZrO,MAAOyB,EACP6D,KAAM,oBACDrH,EAAOvB,KAAKsL,KAAK1C,cACdrH,EAAKsH,KAAOtH,EAAO,CAACV,MAAO,CAACb,KAAKsD,QAAS/B,EAAKV,OAAQgI,MAAM,KAMhE,SAAS8kB,SAAShc,OAEpBrG,EAAOC,MAAMoG,GACbic,GAAU,QACP,CACNhlB,KAAM,oBACDrH,EAAO+J,EAAK1C,OACZ9C,EAASvE,EAAKsH,KAAOtH,EAAO,CAACV,MAAO,CAAC+sB,EAASrsB,EAAKV,OAAQgI,MAAM,UACrE+kB,GAAU,EACH9nB,IAMH,SAAS+nB,QAAQlc,OAEnBrG,EAAOC,MAAMoG,GACbmc,EAAWxiB,EAAK1C,aACb,CACNA,KAAM,mBACDklB,EAASjlB,KACZ,OAAOilB,MACJvsB,EAAO+J,EAAK1C,OACZ9C,EAAS,CAACjF,MAAO,CAACU,EAAKsH,KAAMilB,EAASjtB,OAAQgI,MAAM,UACxDilB,EAAWvsB,EACJuE,IAMH,SAASioB,aAAapc,OAExBrG,EAAOC,MAAMoG,GACbic,GAAU,EACVE,EAAWxiB,EAAK1C,aACb,CACNA,KAAM,mBACDklB,EAASjlB,KACZ,OAAOilB,MACJvsB,EAAO+J,EAAK1C,OACZ9C,EAAS,CAACjF,MAAO,CAAC+sB,EAASrsB,EAAKsH,KAAMilB,EAASjtB,OAAQgI,MAAM,UACjEilB,EAAWvsB,EACXqsB,GAAU,EACH9nB,IAMH,SAASkoB,QAAQrc,OAAU5M,yDAAM,EAEnCuG,EAAOC,MAAMoG,GACbnU,EAAIuH,EACJ6oB,GAAU,EACVE,EAAWxiB,EAAK1C,aACb,CACNA,KAAM,mBACDklB,EAASjlB,KACZ,OAAOilB,MACJvsB,EAAO+J,EAAK1C,OACZ9C,EAAS,CAACjF,MAAO,CAACrD,IAAKowB,EAASrsB,EAAKsH,KAAMilB,EAASjtB,OAAQgI,MAAM,UACtEilB,EAAWvsB,EACXqsB,GAAU,EACH9nB,IAMH,SAASmoB,KAAKC,MAGhBA,EAAUrwB,OACd,OACKswB,EAAQ,gCACSD,uCAAZvc,UACRwc,EAAMtrB,KAAK0I,MAAMoG,yCAEX,CACN/I,KAAM,sBACDhI,EAAQ,gCACKutB,kCACjB,KACK5sB,UAAYqH,UACZrH,EAAKsH,KACR,OAAOtH,EACRX,EAAMiC,KAAKtB,EAAKV,4CAEV,CAACA,MAAOD,EAAOiI,MAAM,WAMvB,CACND,KAAM,sBACE,CAACC,MAAM,KAOX,SAASulB,KAAK9C,UAEL,OAAXA,GAA8C,mBAApBA,EAAO+C,QAC7B/C,EAAO+C,UACRjrB,KAAKopB,IAAIlB,GAIV,SAASpc,MAAMrL,EAAMC,EAAOC,UAE3B,IAAIuD,GAAMzD,EAAMC,EAAOC,GAGxB,SAASuqB,UAAUzqB,EAAMC,EAAOC,OAAKqL,yDAAK,EAAGC,yDAAO,EAAGC,yDAAO,EAAG8M,yDAAY,SAE5E,IAAI7U,KAAK1D,EAAMC,EAAM,EAAGC,EAAKqL,EAAMC,EAAQC,EAAQ8M,EAAY,KAIhE,SAASmS,iBAAW9pB,yDAAK,EAAGC,yDAAQ,EAAGC,yDAAa,SAEnD,IAAIoD,GAAUtD,EAAMC,EAASC,GAI9B,SAAS6pB,kBAAY3pB,yDAAO,SAE3B,IAAIsD,GAAWtD,GAIhB,SAAS4pB,KAAKC,EAAGC,EAAGhyB,EAAGF,OAczBmyB,EAAIC,EAZJC,EAAK,SAASA,GAAGF,EAAIC,EAAIE,UAE5BA,GAAY,GACF,EAAE,EACJH,GAAMC,EAAGD,GAAIG,EAAI,EAChBA,EAAM,GACPF,EACCE,EAAM,EAAE,EACTH,GAAMC,EAAGD,IAAK,EAAE,EAAEG,GAAK,EACxBH,eAIU,IAAPnyB,IACVA,EAAI,GACK,IAANE,EACIsuB,KAAK0D,EAAGA,EAAGA,EAAGlyB,GAMfwuB,KAAK6D,EADZF,EAAK,EAAID,GAHRE,EADGF,GAAK,GACHA,GAAK,EAAIhyB,GAETgyB,EAAEhyB,EAAGgyB,EAAEhyB,GAEMkyB,EAAIH,EAAE,EAAE,GAAII,EAAGF,EAAIC,EAAIH,GAAII,EAAGF,EAAIC,EAAIH,EAAE,EAAE,GAAIjyB,GAI3D,SAASuyB,KAAKN,EAAG/xB,EAAGgS,EAAGlS,MAEnB,IAANE,EACH,OAAOsuB,KAAKtc,EAAGA,EAAGA,EAAGlS,OAClBe,EAAI4F,KAAKgN,MAAQ,EAAFse,GACf/sB,EAAO,EAAF+sB,EAASlxB,EACdyxB,EAAItgB,GAAG,EAAMhS,GACbH,EAAImS,GAAG,EAAMhS,EAAEgF,GACf/E,EAAI+R,GAAG,EAAMhS,GAAG,EAAIgF,WAChBnE,EAAE,QAEJ,SACGytB,KAAKtc,EAAG/R,EAAGqyB,EAAGxyB,QACjB,SACGwuB,KAAKzuB,EAAGmS,EAAGsgB,EAAGxyB,QACjB,SACGwuB,KAAKgE,EAAGtgB,EAAG/R,EAAGH,QACjB,SACGwuB,KAAKgE,EAAGzyB,EAAGmS,EAAGlS,QACjB,SACGwuB,KAAKruB,EAAGqyB,EAAGtgB,EAAGlS,QACjB,SACGwuB,KAAKtc,EAAGsgB,EAAGzyB,EAAGC,IAwBjB,SAASyyB,aAER,IAAI3nB,KAIL,SAAS4nB,aAEXD,EAAM,IAAI3nB,YAEP,IAAIA,KAAK2nB,EAAIE,iBAAkBF,EAAIG,cAAeH,EAAII,aAAcJ,EAAIK,cAAeL,EAAIM,gBAAiBN,EAAIO,gBAAiBP,EAAIQ,sBAItI,SAASC,YAEXT,EAAM,IAAI3nB,YACP,IAAID,GAAM4nB,EAAIjrB,cAAeirB,EAAIhrB,WAAW,EAAGgrB,EAAI/qB,WApqB3DoO,GAAgBnS,UAAUqK,sBAAuB,EACjD8H,GAAgBnS,UAAUsK,uBAAwB,EAClD6H,GAAgBnS,UAAU0K,wBAAyB,EACnDyH,GAAgBnS,UAAU2K,yBAA0B,MAoqBzCwX,GAAY,CACtBqN,KAAMpqB,OACNyI,MAAOyB,OACP1B,IAAK2B,SACAM,WACEI,OACP4C,KAAM3C,MACNxP,IAAKyP,KACLsf,KAAM9f,MACNxS,IAAKiT,KACLrN,KAAM+H,MACN4kB,OAAQja,QACRka,IAAKre,KACLse,IAAKpe,KACLqe,IAAKhC,KACL9c,QAASJ,SACTQ,QAASD,SACTG,IAAKD,KACL0e,YAAare,aACbse,UAAWre,WACXse,OAAQre,QACRse,OAAQre,QACRse,MAAOngB,OACPogB,QAASte,SACTue,MAAOte,OACPue,OAAQ7sB,QACR8sB,WAAY1sB,YACZopB,QAAS3pB,SACTktB,YAAansB,aACbosB,aAAchsB,cACdisB,WAAYxe,YACZye,WAAYte,YACZue,OAAQ5rB,QACR6rB,MAAOre,UACPse,OAAQ5rB,EACR6rB,YAAaze,aACb0e,OAAQje,QACRke,SAAUhe,UACVie,QAAS3d,SACT4d,UAAW3d,WACXub,IAAKA,IACLC,OAAQA,OACRQ,MAAOA,MACP4B,UAAW7D,WACXE,QAASD,SACT6D,OAAQ3D,QACR4D,YAAa1D,aACb2D,OAAQ1D,QACRxB,IAAK4B,KACLuD,KAAMziB,MACN0iB,SAAUtD,UACVuD,UAAWtD,WACXuD,WAAYtD,YACZuD,IAAK9G,KACL+G,IAAKvD,KACLwD,IAAKjD,KACLkD,UAAW7O,WACX8O,IAAKjH,KACLkH,IAAKjH,KACLkH,IAAKjH,KACLkH,IAAKjH,KACLkH,IAAKhH,KACLiH,IAAKhH,KACLiH,IAAKhH,KACLiH,IAAKhH,KACLiH,IAAKhH,KACL7c,MAAO8c,OACPgH,KAAM/G,MACNgH,OAAQ/G,QACRgH,MAAOzG,OACPvnB,MAAO2nB,OACPsG,SAAUrG,UACVsG,WAAYrG,YACZsG,SAAUpG,UACVE,OAAQD,QACRoG,UAAWlG,WACXmG,WAAYhG,YACZ9pB,MAAOgqB,OACP5tB,IAAKguB,MAmFC,SAASvU,OAAOpX,EAAKmX,OAAKlU,yDAAM,KAAMquB,yDAAI,QAE5CruB,EAAQ,IACXA,GAASjD,EAAIjE,QACA,OAAVkH,IACHA,EAAQ,GAELquB,EAAM,IACTA,GAAOtxB,EAAIjE,QACA,OAARu1B,IACHA,EAAMtxB,EAAIjE,QAECqU,OAAOpQ,KAELmX,EAAIpb,OAClB,IACKu1B,EAAM,GAAKruB,EAAQjD,EAAIjE,QAAUkH,EAAQquB,EAC5C,OAAO,MACJttB,EAASstB,EAAMruB,EAAQ,SACvBe,EAAShE,EAAIjE,OAAS,IACzBiI,EAAShE,EAAIjE,OAAS,GAChBiI,EAGRf,EAAQmE,OAAOnE,EAAOjD,EAAIjE,QAC1Bu1B,EAAMlqB,OAAOkqB,EAAKtxB,EAAIjE,YAElBoa,EAAQ,KACR9S,QAAQrD,GACZ,KACM,IAAItE,EAAIuH,EAAOvH,EAAI41B,IAAO51B,EAE1BuO,IAAIjK,EAAItE,GAAIyb,MACbhB,SAEGA,UAIHob,EAAYtuB,GAKG,IADlBsuB,EAAYvxB,EAAIsK,QAAQ6M,EAAKoa,OAGzBA,EAAYpa,EAAIpb,OAASu1B,MAE3Bnb,EACFob,GAAapa,EAAIpb,cAEXoa,EAIF,SAASmB,MAAMtX,EAAKmX,OAAKlU,yDAAM,KAAMquB,yDAAI,KAE3CruB,EAAQ,IACXA,GAASjD,EAAIjE,QACA,OAAVkH,IACHA,EAAQ,GACLquB,EAAM,IACTA,GAAOtxB,EAAIjE,QACA,OAARu1B,IACHA,EAAMtxB,EAAIjE,QACXkH,EAAQmE,OAAOnE,EAAOjD,EAAIjE,QAC1Bu1B,EAAMlqB,OAAOkqB,EAAKtxB,EAAIjE,QAER,IAAVkH,GAAequB,IAAQtxB,EAAIjE,SAG7BiE,EADkB,iBAARA,EACJA,EAAIiE,UAAUhB,EAAOquB,GAErBtxB,EAAIgD,MAAMC,EAAOquB,QAErBttB,EAAShE,EAAIsK,QAAQ6M,UACT,IAAZnT,IACHA,GAAUf,GACJe,EAGD,SAASwT,OAAOxX,EAAKmX,OAAKlU,yDAAM,KAAMquB,yDAAI,KAE5CruB,EAAQ,IACXA,GAASjD,EAAIjE,QACA,OAAVkH,IACHA,EAAQ,GACLquB,EAAM,IACTA,GAAOtxB,EAAIjE,QACA,OAARu1B,IACHA,EAAMtxB,EAAIjE,QACXkH,EAAQmE,OAAOnE,EAAOjD,EAAIjE,QAC1Bu1B,EAAMlqB,OAAOkqB,EAAKtxB,EAAIjE,QAER,IAAVkH,GAAequB,IAAQtxB,EAAIjE,SAG7BiE,EADkB,iBAARA,EACJA,EAAIiE,UAAUhB,EAAOquB,GAErBtxB,EAAIgD,MAAMC,EAAOquB,QAErBttB,EAAShE,EAAIgY,YAAYb,UACb,IAAZnT,IACHA,GAAUf,GACJe,EAGD,SAASkQ,aAAalU,OAAKuZ,yDAAa,KAEzB,OAAjBA,EACHA,EAAe,EAEfA,GAAgB,MAEbtF,EAAUD,EAAiBC,QAAQjU,GAAK,EAExCwxB,EADO,IAAI/rB,KAAKzF,EAAImC,cAAe,EAAG,GACnB2R,eACjB0d,EAAc,IACnBA,EAAc,GAERA,GAAejY,KAEnBtF,EACmB,KAAfud,IACLA,EAAc,UAETlwB,KAAKgN,MAAM2F,EAAQ,GAGpB,SAASuG,QAAQxa,UAEkC,IAAlD,IAAIyF,KAAKzF,EAAImC,cAAe,EAAG,IAAIC,WAGpC,SAAS+W,QAAQnZ,EAAKyxB,EAAQ7pB,OAE/BrE,EAAQvD,GACZ,MAAM,IAAIwI,EAAU,+DACHipB,kCAClB,KADSpc,aAEJ/R,EAAO+R,GAEVA,EAAM9W,QAAQ,SAASQ,EAAO3B,GAC7B6B,UAAQe,EAAK5C,EAAK2B,UAGf,GAAIyL,UAAU6K,OAEb,IAAIjY,KAAOiY,EACfpW,UAAQe,EAAK5C,EAAKiY,EAAMjY,QAErB,CAAA,IAAIiG,QAAQgS,GAUhB,MAAM,IAAI7M,EAAU,+FARH6M,kCACjB,KADS5V,cAEH4D,QAAQ5D,IAAyB,GAAfA,EAAK1D,OAC3B,MAAM,IAAIyM,EAAU,4DACrBvJ,UAAQe,EAAKP,EAAK,GAAIA,EAAK,2EAM9BmI,EAAOrJ,QAAQ,SAASQ,EAAO3B,GAC9B6B,UAAQe,EAAK5C,EAAK2B,KAEZ,KAtPRmX,OAAOxS,OAAO,CAAC,OAAQ,CAAC9D,KAAM,SAC9BsW,OAAOtI,OAAQ,CAAC,OAAQ,CAAChO,KAAM,UAC/BsW,OAAOrI,KAAM,CAAC,OAAQ,IAAK,CAACjO,KAAM,QAClCsW,OAAO/H,KAAM,CAAC,OAAQ,EAAG,QAAS,MAAO,CAACvO,KAAM,QAChDsW,OAAO3H,OAAQ,CAAC,OAAQ,GAAM,CAAC3O,KAAM,UACrCsW,OAAO1H,MAAO,CAAC,YAAa,IAAK,CAAC5O,KAAM,SACxCsW,OAAOzH,KAAM,CAAC,YAAa,IAAK,CAAC7O,KAAM,QACvCsW,OAAOjI,MAAO,CAAC,QAAQ,GAAQ,CAACrO,KAAM,SACtCsW,OAAOxH,KAAM,CAAC,YAAa,CAAC9O,KAAM,QAClCsW,OAAO9M,MAAO,CAAC,OAAQ,CAACxJ,KAAM,SAC9BsW,OAAOnC,QAAS,CAAC,MAAO,MAAO,QAAS,MAAO,CAACnU,KAAM,WACtDsW,OAAOtG,KAAM,CAAC,YAAa,CAAChQ,KAAM,QAClCsW,OAAOpG,KAAM,CAAC,YAAa,CAAClQ,KAAM,QAClCsW,OAAOiW,KAAM,CAAC,cAAe,CAACvsB,KAAM,QACpCsW,OAAOjH,SAAU,CAAC,MAAO,WAAY,WAAY,MAAO,CAACrP,KAAM,YAC/DsW,OAAO1G,SAAU,CAAC,MAAO,YAAa,CAAC5P,KAAM,YAC7CsW,OAAOxG,KAAM,CAAC,OAAQ,CAAC9P,KAAM,QAC7BsW,OAAOnG,aAAc,CAAC,OAAQ,CAACnQ,KAAM,gBACrCsW,OAAOlG,WAAY,CAAC,OAAQ,CAACpQ,KAAM,cACnCsW,OAAOjG,QAAS,CAAC,OAAQ,CAACrQ,KAAM,WAChCsW,OAAOhG,QAAS,CAAC,OAAQ,CAACtQ,KAAM,WAChCsW,OAAO7H,OAAQ,CAAC,OAAQ,CAACzO,KAAM,UAC/BsW,OAAO/F,SAAU,CAAC,OAAQ,CAACvQ,KAAM,YACjCsW,OAAO9F,OAAQ,CAAC,OAAQ,CAACxQ,KAAM,UAC/BsW,OAAOpU,QAAS,CAAC,OAAQ,CAAClC,KAAM,WAChCsW,OAAOhU,YAAa,CAAC,OAAQ,CAACtC,KAAM,eACpCsW,OAAOvU,SAAU,CAAC,OAAQ,CAAC/B,KAAM,YACjCsW,OAAOxT,aAAc,CAAC,OAAQ,CAAC9C,KAAM,gBACrCsW,OAAOpT,cAAe,CAAC,OAAQ,CAAClD,KAAM,iBACtCsW,OAAO3F,YAAa,CAAC,OAAQ,CAAC3Q,KAAM,eACpCsW,OAAOxF,YAAa,CAAC,OAAQ,CAAC9Q,KAAM,eACpCsW,OAAO7S,QAAS,CAAC,OAAQ,CAACzD,KAAM,WAChCsW,OAAOrF,UAAW,CAAC,OAAQ,CAACjR,KAAM,UAClCsW,OAAO3S,EAAS,CAAC,OAAQ,CAAC3D,KAAM,WAChCsW,OAAOvF,aAAc,CAAC,OAAQ,CAAC/Q,KAAM,gBACrCsW,OAAO9E,QAAS,CAAC,OAAQ,CAACxR,KAAM,WAChCsW,OAAO5E,UAAW,CAAC,UAAW,CAAC1R,KAAM,aACrCsW,OAAOtE,SAAU,CAAC,OAAQ,CAAChS,KAAM,YACjCsW,OAAOrE,WAAY,CAAC,UAAW,CAACjS,KAAM,cACtCsW,OAAOkX,IAAK,IACZlX,OAAOmX,OAAQ,IACfnX,OAAO2X,MAAO,IACd3X,OAAO0V,WAAY,CAAC,WAAY,SAAU,GAAI,CAAChsB,KAAM,cACrDsW,OAAO2V,SAAU,CAAC,YAAa,CAACjsB,KAAM,YACtCsW,OAAO6V,QAAS,CAAC,YAAa,CAACnsB,KAAM,WACrCsW,OAAO+V,aAAc,CAAC,YAAa,CAACrsB,KAAM,gBAC1CsW,OAAOgW,QAAS,CAAC,WAAY,SAAU,GAAI,CAACtsB,KAAM,WAClDsW,OAAOoW,KAAM,CAAC,UAAW,CAAC1sB,KAAM,QAChCsW,OAAO9I,MAAO,CAAC,OAAQ,QAAS,OAAQ,CAACxN,KAAM,SAC/CsW,OAAOsW,UAAW,CAAC,OAAQ,QAAS,MAAO,QAAS,EAAG,UAAW,EAAG,UAAW,EAAG,eAAgB,GAAI,CAAC5sB,KAAM,aAC9GsW,OAAOuW,WAAY,CAAC,QAAS,EAAG,WAAY,EAAG,gBAAiB,GAAI,CAAC7sB,KAAM,cAC3EsW,OAAOwW,YAAa,CAAC,UAAW,GAAI,CAAC9sB,KAAM,eAC3CsW,OAAOiT,KAAM,CAAC,IAAK,IAAK,IAAK,KAAM,GAAM,CAACvpB,KAAM,QAChDsW,OAAOyW,KAAM,CAAC,IAAK,IAAK,IAAK,KAAM,GAAM,CAAC/sB,KAAM,QAChDsW,OAAOgX,KAAM,CAAC,IAAK,IAAK,IAAK,KAAM,GAAM,CAACttB,KAAM,QAChDsW,OAAOqL,WAAY,CAAC,OAAQ,CAAC3hB,KAAM,cACnCsW,OAAOkT,KAAM,CAAC,OAAQ,CAACxpB,KAAM,QAC7BsW,OAAOmT,KAAM,CAAC,KAAM,CAACzpB,KAAM,QAC3BsW,OAAOoT,KAAM,CAAC,KAAM,CAAC1pB,KAAM,QAC3BsW,OAAOqT,KAAM,CAAC,UAAW,CAAC3pB,KAAM,QAChCsW,OAAOuT,KAAM,CAAC,UAAW,CAAC7pB,KAAM,QAChCsW,OAAOwT,KAAM,CAAC,UAAW,CAAC9pB,KAAM,QAChCsW,OAAOyT,KAAM,CAAC,QAAS,CAAC/pB,KAAM,QAC9BsW,OAAO0T,KAAM,CAAC,QAAS,CAAChqB,KAAM,QAC9BsW,OAAO2T,KAAM,CAAC,WAAY,SAAU,GAAI,CAACjqB,KAAM,QAC/CsW,OAAO4T,OAAQ,CAAC,WAAY,WAAY,MAAO,CAAClqB,KAAM,UACtDsW,OAAO6T,MAAO,CAAC,WAAY,WAAY,MAAO,CAACnqB,KAAM,SACrDsW,OAAO8T,QAAS,CAAC,WAAY,OAAQ,KAAM,YAAY,GAAQ,CAACpqB,KAAM,SAAU8H,cAAc,IAC9FwO,OAAOqU,OAAQ,CAAC,SAAU,CAAC3qB,KAAM,UACjCsW,OAAOyU,OAAQ,CAAC,SAAU,CAAC/qB,KAAM,UACjCsW,OAAO0U,UAAW,CAAC,UAAW,CAAChrB,KAAM,aACrCsW,OAAO2U,YAAa,CAAC,UAAW,CAACjrB,KAAM,eACvCsW,OAAO6U,UAAW,CAAC,YAAa,CAACnrB,KAAM,aACvCsW,OAAO8U,QAAS,GAAI,CAACprB,KAAM,WAC3BsW,OAAOgV,WAAY,CAAC,SAAU,CAACtrB,KAAM,cACrCsW,OAAOmV,YAAa,CAAC,YAAa,CAACzrB,KAAM,eACzCsW,OAAOqV,OAAQ,CAAC,IAAK,SAAU,GAAI,CAAC3rB,KAAM,UAC1CsW,OAAOyV,KAAM,CAAC,UAAW,CAAC/rB,KAAM,YA4KnBuF,+BAAc4L,oDAEdnP,yDAAE,EAAGC,yDAAE,EAAGjH,yDAAE,EAAGD,yDAAE,wDAGvByK,GAAKxD,IACLyD,GAAKxD,IACLyD,GAAK1K,IACL2K,GAAK5K,6EAKNiH,EAAI8K,MAAMxO,KAAKkH,GAAGuH,SAAS,IAAK,IAAK,GACrC9K,EAAI6K,MAAMxO,KAAKmH,GAAGsH,SAAS,IAAK,IAAK,GACrC/R,EAAI8R,MAAMxO,KAAKoH,GAAGqH,SAAS,IAAK,IAAK,GACrChS,EAAI+R,MAAMxO,KAAKqH,GAAGoH,SAAS,IAAK,IAAK,UACzB,MAAZzO,KAAKqH,GAEJ3D,EAAE,KAAOA,EAAE,IAAMC,EAAE,KAAOA,EAAE,IAAMjH,EAAE,KAAOA,EAAE,IAAMD,EAAE,KAAOA,EAAE,GAC1D,IAAMiH,EAAE,GAAKC,EAAE,GAAKjH,EAAE,GAAKD,EAAE,GAE7B,IAAMiH,EAAIC,EAAIjH,EAAID,EAItBiH,EAAE,KAAOA,EAAE,IAAMC,EAAE,KAAOA,EAAE,IAAMjH,EAAE,KAAOA,EAAE,GACzC,IAAMgH,EAAE,GAAKC,EAAE,GAAKjH,EAAE,GAEtB,IAAMgH,EAAIC,EAAIjH,+CAMP,MAAZsD,KAAKqH,SAED,QAAUrH,KAAKkH,GAAK,KAAOlH,KAAKmH,GAAK,KAAOnH,KAAKoH,GAAK,KAAQpH,KAAKqH,GAAG,IAAO,QAIhF3D,EAAI8K,MAAMxO,KAAKkH,GAAGuH,SAAS,IAAK,IAAK,GACrC9K,EAAI6K,MAAMxO,KAAKmH,GAAGsH,SAAS,IAAK,IAAK,GACrC/R,EAAI8R,MAAMxO,KAAKoH,GAAGqH,SAAS,IAAK,IAAK,UACrC/K,EAAE,KAAOA,EAAE,IAAMC,EAAE,KAAOA,EAAE,IAAMjH,EAAE,KAAOA,EAAE,GACzC,IAAMgH,EAAE,GAAKC,EAAE,GAAKjH,EAAE,GAEtB,IAAMgH,EAAIC,EAAIjH,oDAMhB,CACNoF,IAAK9B,KACLsD,MAAO,EACPsF,KAAM,uBACa,GAAd5I,KAAKsD,SAENtD,KAAKsD,MACA,CAACzC,MAAOb,KAAK8B,IAAIoF,GAAI2B,MAAM,IAEZ,GAAd7I,KAAKsD,SAEXtD,KAAKsD,MACA,CAACzC,MAAOb,KAAK8B,IAAIqF,GAAI0B,MAAM,IAEZ,GAAd7I,KAAKsD,SAEXtD,KAAKsD,MACA,CAACzC,MAAOb,KAAK8B,IAAIsF,GAAIyB,MAAM,IAEZ,GAAd7I,KAAKsD,SAEXtD,KAAKsD,MACA,CAACzC,MAAOb,KAAK8B,IAAIuF,GAAIwB,MAAM,IAG3B,CAACA,MAAM,qDAKNmI,OAEPrI,EAAO3I,YACHgR,OAEF,QACAtN,EAAI,SAASA,WAAYiF,EAAKzB,WAClC8Q,OAAOtU,EAAG,IACHA,MACH,QACAC,EAAI,SAASA,WAAYgF,EAAKxB,WAClC6Q,OAAOrU,EAAG,IACHA,MACH,QACAjH,EAAI,SAASA,WAAYiM,EAAKvB,WAClC4Q,OAAOtb,EAAG,IACHA,MACH,QACAD,EAAI,SAASA,WAAYkM,EAAKtB,WAClC2Q,OAAOvb,EAAG,IACHA,MACH,UACA+2B,EAAM,SAASA,aAAc7qB,EAAK6qB,cACtCxb,OAAOwb,EAAK,IACLA,MACH,UACAxB,EAAM,SAASA,aAAcrpB,EAAKqpB,cACtCha,OAAOga,EAAK,IACLA,MACH,WACAyB,EAAO,SAASA,cAAe9qB,EAAK8qB,eACxCzb,OAAOyb,EAAM,IACNA,MACH,UACAxB,EAAM,SAASA,aAActpB,EAAKspB,cACtCja,OAAOia,EAAK,IACLA,MACH,WACAyB,EAAO,SAASA,cAAe/qB,EAAK+qB,eACxC1b,OAAO0b,EAAM,IACNA,MACH,YACAC,EAAQ,SAASA,MAAMl3B,UAAWkM,EAAKgrB,MAAMl3B,WACjDub,OAAO2b,EAAO,CAAC,MACRA,MACH,cACAC,EAAU,SAASA,QAAQJ,UAAa7qB,EAAKirB,QAAQJ,WACzDxb,OAAO4b,EAAS,CAAC,QACVA,MACH,aACAC,EAAS,SAASA,OAAOL,UAAa7qB,EAAKkrB,OAAOL,WACtDxb,OAAO6b,EAAQ,CAAC,QACTA,MACH,aACAC,EAAS,SAASA,OAAON,UAAa7qB,EAAKmrB,OAAON,WACtDxb,OAAO8b,EAAQ,CAAC,QACTA,gBAED,IAAIziB,EAAerR,KAAMgR,oDAItB9R,OAEPskB,EAAStkB,SACTA,EAAM,IACTA,GAAO,GACAA,QAEF,SACGc,KAAKkH,QACR,SACGlH,KAAKmH,QACR,SACGnH,KAAKoH,QACR,SACGpH,KAAKqH,iBAEN,IAAI2W,EAAWhe,KAAMwjB,0CAIvBrM,UAEFA,aAAiBlQ,QACbjH,KAAKkH,IAAMiQ,EAAMjQ,IAAMlH,KAAKmH,IAAMgQ,EAAMhQ,IAAMnH,KAAKoH,IAAM+P,EAAM/P,IAAMpH,KAAKqH,IAAM8P,EAAM9P,yCAMtFrH,KAAKkH,wCAKNlH,KAAKmH,wCAKLnH,KAAKoH,wCAKLpH,KAAKqH,4CAKLrH,KAAKgyB,MAAM,yCAUXrD,EACHoF,EAAIC,EAAIC,EANRvwB,EAAI1D,KAAKkH,GAAG,IACZvD,EAAI3D,KAAKmH,GAAG,IACZzK,EAAIsD,KAAKoH,GAAG,IACZ8sB,EAAO9wB,KAAKsvB,IAAIhvB,EAAGC,EAAGjH,GACtBy3B,EAAO/wB,KAAKqvB,IAAI/uB,EAAGC,EAAGjH,UAI1BiyB,GAAKwF,EAAKD,GAAM,EACZC,GAAQD,EACJ,CAAC,EAAKvF,EAAG,IAKjBoF,GAAMG,EAAKxwB,IAAMwwB,EAAKC,GACtBH,GAAME,EAAKvwB,IAAMuwB,EAAKC,GACtBF,GAAMC,EAAKx3B,IAAMw3B,EAAKC,GAQf,EAPHzwB,GAAKwwB,EACJD,EAAGD,EACCrwB,GAAKuwB,EACT,EAAIH,EAAGE,EAEP,EAAID,EAAGD,GACL,EAAO,EACHpF,EAdPA,GAAK,IACHuF,EAAKC,IAASD,EAAKC,IAEnBD,EAAKC,IAAS,EAAID,EAAKC,gDAgBnBn0B,KAAKgyB,MACJxyB,OAAOQ,KAAKqH,GAAG,2CAKtB3D,EAAI1D,KAAKkH,GAAG,IACZvD,EAAI3D,KAAKmH,GAAG,IACZzK,EAAIsD,KAAKoH,GAAG,IACZ8sB,EAAO9wB,KAAKsvB,IAAIhvB,EAAGC,EAAGjH,GACtBy3B,EAAO/wB,KAAKqvB,IAAI/uB,EAAGC,EAAGjH,MAEtBy3B,GAAQD,EACX,MAAO,CAAC,EAAK,EAFNA,OAIJH,GAAMG,EAAKxwB,IAAMwwB,EAAKC,GACtBH,GAAME,EAAKvwB,IAAMuwB,EAAKC,GACtBF,GAAMC,EAAKx3B,IAAMw3B,EAAKC,SASnB,EAPHzwB,GAAKwwB,EACJD,EAAGD,EACCrwB,GAAKuwB,EACT,EAAIH,EAAGE,EAEP,EAAID,EAAGD,GACL,EAAO,GAXLG,EAAKC,GAAQD,EAHdA,8CAoBEl0B,KAAKiyB,MACJzyB,OAAOQ,KAAKqH,GAAG,yCAGrB5K,MAEa,iBAAPA,EACV,MAAM,IAAI6N,EAAU,oCACd,IAAIrD,MAAMjH,KAAKkH,GAAIlH,KAAKmH,GAAInH,KAAKoH,GAAI3K,2CAGrC+2B,MAEa,iBAATA,EACV,MAAM,IAAIlpB,EAAU,iCACjBmpB,EAAOzzB,KAAKyzB,cACThF,KAAKgF,EAAK,GAAID,EAAKC,EAAK,GAAIA,EAAK,oDAKjC,qBAITzb,OAAO/Q,GAAM7G,UAAUsD,EAAG,IAC1BsU,OAAO/Q,GAAM7G,UAAUuD,EAAG,IAC1BqU,OAAO/Q,GAAM7G,UAAU1D,EAAG,IAC1Bsb,OAAO/Q,GAAM7G,UAAU3D,EAAG,IAC1Bub,OAAO/Q,GAAM7G,UAAUozB,IAAK,IAC5Bxb,OAAO/Q,GAAM7G,UAAU4xB,IAAK,IAC5Bha,OAAO/Q,GAAM7G,UAAUqzB,KAAM,IAC7Bzb,OAAO/Q,GAAM7G,UAAU6xB,IAAK,IAC5Bja,OAAO/Q,GAAM7G,UAAUszB,KAAM,IAC7B1b,OAAO/Q,GAAM7G,UAAUuzB,MAAO,CAAC,MAC/B3b,OAAO/Q,GAAM7G,UAAUwzB,QAAS,CAAC,QA0oBjC,QAxoBatsB,+BAAcuL,4CAEdhP,EAAMC,EAAOC,6DAGnBmL,MAAQ,IAAI3H,KAAK1D,EAAMC,EAAM,EAAGC,gFAK9B,KAAO/D,KAAK8P,UAAY,qDAKxBtB,MAAMxO,KAAKkP,MAAMjL,cAAe,IAAK,GAAK,IAAMuK,MAAMxO,KAAKkP,MAAMhL,WAAW,EAAG,IAAK,GAAK,IAAMsK,MAAMxO,KAAKkP,MAAM/K,UAAW,IAAK,yCAGjIgT,UAEFA,aAAiB7P,OACbtH,KAAKkP,MAAM7C,YAAc8K,EAAMjI,MAAM7C,gDAIvC8K,MAEFA,aAAiB7P,MACpB,OAAOtH,KAAKkP,MAAQiI,EAAMjI,MAC3BvC,aAAa,IAAK3M,KAAMmX,yCAGlBA,MAEFA,aAAiB7P,MACpB,OAAOtH,KAAKkP,OAASiI,EAAMjI,MAC5BvC,aAAa,KAAM3M,KAAMmX,yCAGnBA,MAEFA,aAAiB7P,MACpB,OAAOtH,KAAKkP,MAAQiI,EAAMjI,MAC3BvC,aAAa,IAAK3M,KAAMmX,yCAGlBA,MAEFA,aAAiB7P,MACpB,OAAOtH,KAAKkP,OAASiI,EAAMjI,MAC5BvC,aAAa,KAAM3M,KAAMmX,8CAKlBnX,KAAKkP,MAAMjL,2DAKXjE,KAAKkP,MAAMhL,WAAW,2CAKtBlE,KAAKkP,MAAM/K,0DAKX,oBAKI4D,mCAAkB8K,4DAElBpO,yDAAK,EAAGC,yDAAQ,EAAGC,yDAAa,qDAGvCyvB,EAAqBhxB,KAAKgN,MAA+B,KAAjB,MAAP3L,EAAeC,GAAmBC,GAEvEA,EAAeyhB,GAAOhmB,UAAU+b,IAAIiY,EAAoB,SACpDC,EAAgBjxB,KAAKgN,MAAMgkB,EAAqB,YACpD1vB,EAAU0hB,GAAOhmB,UAAU+b,IAAIkY,EAAe,OAC9C5vB,EAAOrB,KAAKgN,MAAMikB,EAAgB,OAC9B3vB,EAAU,IAEbA,GAAW,QACTD,KAGEyD,cAAgBvD,IAChBsD,SAAWvD,IACXsD,MAAQvD,iFAKTkK,EAAI,GAAIG,GAAQ,SACpBH,EAAE9L,KAAK,cACH7C,KAAKgI,QAER2G,EAAE9L,KAAK,QAAU7C,KAAKgI,OACtB8G,GAAQ,GAEL9O,KAAKiI,WAEH6G,GACJH,EAAE9L,KAAK,MACR8L,EAAE9L,KAAK,WAAa7C,KAAKiI,UACzB6G,GAAQ,GAEL9O,KAAKkI,gBAEH4G,GACJH,EAAE9L,KAAK,MACR8L,EAAE9L,KAAK,gBAAkB7C,KAAKkI,gBAE/ByG,EAAE9L,KAAK,KACA8L,EAAE1L,KAAK,kDAKV0L,EAAI,GACJ3O,KAAKgI,QAER2G,EAAE9L,KAAK7C,KAAKgI,MAAQ,SACA,IAAhBhI,KAAKgI,OAA+B,IAAfhI,KAAKgI,OAC7B2G,EAAE9L,KAAK,KACR8L,EAAE9L,KAAK,WAEJ6B,EAAU1E,KAAKiI,SAAW,GAC1BqsB,EAAUlxB,KAAKgN,MAAMpQ,KAAKiI,SAAW,IACrCssB,EAAQnxB,KAAKgN,MAAMkkB,EAAU,WACjCA,GAAoB,GAEpB3lB,EAAE9L,KAAK,GAAK0xB,GACZ5lB,EAAE9L,KAAK,KACP8L,EAAE9L,KAAK2L,MAAM8lB,EAAQ7lB,WAAY,IAAK,IACtCE,EAAE9L,KAAK,KACP8L,EAAE9L,KAAK2L,MAAM9J,EAAQ+J,WAAY,IAAK,IAClCzO,KAAKkI,gBAERyG,EAAE9L,KAAK,KACP8L,EAAE9L,KAAK2L,MAAMxO,KAAKkI,cAAcuG,WAAY,IAAK,KAE3CE,EAAE1L,KAAK,uDAKQ,IAAfjD,KAAKgI,OAAiC,IAAlBhI,KAAKiI,UAAyC,IAAvBjI,KAAKkI,+DAKhDlI,KAAKgI,MAAQ,EAAI,IAAID,WAAW/H,KAAKgI,OAAQhI,KAAKiI,UAAWjI,KAAKkI,eAAiBlI,2CAGpFmX,UAEFA,aAAiBpP,YACZ/H,KAAKgI,QAAUmP,EAAMnP,OAAWhI,KAAKiI,WAAakP,EAAMlP,UAAcjI,KAAKkI,gBAAkBiP,EAAMjP,qDAItGiP,MAEFA,aAAiBpP,iBAEhB/H,KAAKgI,OAASmP,EAAMnP,MAChBhI,KAAKgI,MAAQmP,EAAMnP,MACvBhI,KAAKiI,UAAYkP,EAAMlP,SACnBjI,KAAKiI,SAAWkP,EAAMlP,SACvBjI,KAAKkI,cAAgBiP,EAAMjP,cAEnCyE,aAAa,IAAK3M,KAAMmX,yCAGlBA,MAEFA,aAAiBpP,iBAEhB/H,KAAKgI,OAASmP,EAAMnP,MAChBhI,KAAKgI,MAAQmP,EAAMnP,MACvBhI,KAAKiI,UAAYkP,EAAMlP,SACnBjI,KAAKiI,SAAWkP,EAAMlP,SACvBjI,KAAKkI,eAAiBiP,EAAMjP,cAEpCyE,aAAa,KAAM3M,KAAMmX,yCAGnBA,MAEFA,aAAiBpP,iBAEhB/H,KAAKgI,OAASmP,EAAMnP,MAChBhI,KAAKgI,MAAQmP,EAAMnP,MACvBhI,KAAKiI,UAAYkP,EAAMlP,SACnBjI,KAAKiI,SAAWkP,EAAMlP,SACvBjI,KAAKkI,cAAgBiP,EAAMjP,cAEnCyE,aAAa,IAAK3M,KAAMmX,yCAGlBA,MAEFA,aAAiBpP,iBAEhB/H,KAAKgI,OAASmP,EAAMnP,MAChBhI,KAAKgI,MAAQmP,EAAMnP,MACvBhI,KAAKiI,UAAYkP,EAAMlP,SACnBjI,KAAKiI,SAAWkP,EAAMlP,SACvBjI,KAAKkI,eAAiBiP,EAAMjP,cAEpCyE,aAAa,KAAM3M,KAAMmX,oDAKlB,IAAIpP,WAAW/H,KAAKgI,OAAQhI,KAAKiI,UAAWjI,KAAKkI,yDAGhDypB,EAAMltB,OAEVZ,EAAO8tB,EAAKziB,MAAMjL,cAClBH,EAAQ6tB,EAAKziB,MAAMhL,WACnBH,EAAM4tB,EAAKziB,MAAM/K,UAAYM,SAC1B,IAAI8C,KAAK1D,EAAMC,EAAOC,qDAGjB4tB,EAAMltB,EAAMC,EAASC,OAE7Bd,EAAO8tB,EAAK1tB,cACZH,EAAQ6tB,EAAKztB,WACbH,EAAM4tB,EAAKxtB,UAAYM,EACvB2K,EAAOuiB,EAAKvtB,WACZiL,EAASsiB,EAAKttB,aACdiL,EAASqiB,EAAKrtB,aAAeI,EAC7B8vB,EAAc7C,EAAKptB,kBAAoBI,EAAa,WACjD,IAAI4C,KAAK1D,EAAMC,EAAOC,EAAKqL,EAAMC,EAAQC,EAAQklB,2CAGjDrd,MAEHA,aAAiBpP,UACpB,OAAO,IAAIA,UAAU/H,KAAKgI,MAAQmP,EAAMnP,MAAOhI,KAAKiI,SAAWkP,EAAMlP,SAAUjI,KAAKkI,cAAgBiP,EAAMjP,eACtG,GAAItE,QAAQuT,GAChB,OAAOnX,KAAKy0B,SAAStd,EAAOnX,KAAKgI,OAC7B,GAAIhE,YAAYmT,GACpB,OAAOnX,KAAK00B,aAAavd,EAAOnX,KAAKgI,MAAOhI,KAAKiI,SAAUjI,KAAKkI,qBAC3D,IAAIoC,EAAUY,MAAMlL,MAAQ,MAAQkL,MAAMiM,GAAS,4DAGjDA,MAEJvT,QAAQuT,GACX,OAAOnX,KAAKy0B,SAAStd,EAAOnX,KAAKgI,OAC7B,GAAIhE,YAAYmT,GACpB,OAAOnX,KAAK00B,aAAavd,EAAOnX,KAAKgI,MAAOhI,KAAKiI,SAAUjI,KAAKkI,qBAC3D,IAAIoC,EAAUY,MAAMlL,MAAQ,MAAQkL,MAAMiM,GAAS,0DAGlDA,MAEHA,aAAiBpP,UACpB,OAAO,IAAIA,UAAU/H,KAAKgI,MAAQmP,EAAMnP,MAAOhI,KAAKiI,SAAWkP,EAAMlP,SAAUjI,KAAKkI,cAAgBiP,EAAMjP,qBACrG,IAAIoC,EAAUY,MAAMlL,MAAQ,MAAQkL,MAAMiM,GAAS,4DAGjDA,MAEJvT,QAAQuT,GACX,OAAOnX,KAAKy0B,SAAStd,GAAQnX,KAAKgI,OAC9B,GAAIhE,YAAYmT,GACpB,OAAOnX,KAAK00B,aAAavd,GAAQnX,KAAKgI,OAAQhI,KAAKiI,UAAWjI,KAAKkI,qBAC9D,IAAIoC,EAAUY,MAAMlL,MAAQ,MAAQkL,MAAMiM,GAAS,0DAGlDA,MAEe,iBAAXA,EACV,OAAO,IAAIpP,UAAU/H,KAAKgI,MAAQmP,EAAOnX,KAAKiI,SAAWkP,EAAOnX,KAAKkI,cAAgBiP,SAChF,IAAI7M,EAAUY,MAAMlL,MAAQ,MAAQkL,MAAMiM,GAAS,4DAGjDA,MAEc,iBAAXA,EACV,OAAO,IAAIpP,UAAU/H,KAAKgI,MAAQmP,EAAOnX,KAAKiI,SAAWkP,EAAOnX,KAAKkI,cAAgBiP,SAChF,IAAI7M,EAAUY,MAAMlL,MAAQ,MAAQkL,MAAMiM,GAAS,kEAG9CA,MAEW,iBAAXA,SAEH,IAAIpP,UAAU/H,KAAKgI,MAAQmP,EAAOnX,KAAKiI,SAAWkP,EAAOnX,KAAKkI,cAAgBiP,GAEjF,GAAIA,aAAiBpP,UAC1B,KACK4sB,EAAU30B,KAAKgI,MACf4sB,EAAazd,EAAMnP,MACnB6sB,EAAa70B,KAAKiI,UAAYkP,EAAMlP,SACpC6sB,EAAkB90B,KAAKkI,eAAiBiP,EAAMjP,qBAC9C2sB,GAAcC,KAEjBH,EAAkB,MAARA,EAAc30B,KAAKiI,SAC7B2sB,EAAwB,MAAXA,EAAmBzd,EAAMlP,SAClC6sB,IAEHH,EAAoB,IAAVA,EAAoB30B,KAAKkI,cACnC0sB,EAA0B,IAAbA,EAAuBzd,EAAMjP,gBAGrCysB,EAAQC,QAEV,IAAItqB,EAAUY,MAAMlL,MAAQ,MAAQkL,MAAMiM,GAAS,kEAG9CnG,OAEPrI,EAAO3I,YACHgR,OAEF,WACAvM,EAAO,SAASA,cAAekE,EAAKX,cACxCgQ,OAAOvT,EAAM,IACNA,MACH,cACAC,EAAU,SAASA,iBAAkBiE,EAAKV,iBAC9C+P,OAAOtT,EAAS,IACTA,MACH,mBACAC,EAAe,SAASA,sBAAuBgE,EAAKT,sBACxD8P,OAAOrT,EAAc,IACdA,gBAED,IAAI0M,EAAerR,KAAMgR,+CAM1BhR,KAAKgI,uDAKLhI,KAAKiI,oEAKLjI,KAAKkI,8DAKL,6BAKIC,oCAAmB0K,8DAEnBhO,yDAAO,2DAGbuD,QAAUvD,qFAKV7E,KAAKoI,QAEH,cAAgBpI,KAAKoI,QAAU,IAD9B,gEAMJpI,KAAKoI,SAEc,IAAlBpI,KAAKoI,SAAmC,IAAjBpI,KAAKoI,QACxBpI,KAAKoI,QAAU,UAChBpI,KAAKoI,QAAU,SAEhB,8DAKApI,KAAK8P,6DAKY,IAAjB9P,KAAKoI,yDAKLpI,KAAKoI,QAAU,EAAI,IAAID,YAAYnI,KAAKoI,SAAWpI,2CAGpDmX,UAEFA,aAAiBhP,YACbnI,KAAKoI,UAAY+O,EAAM/O,8CAIzB+O,MAEFA,aAAiBhP,WACpB,OAAOnI,KAAKoI,QAAU+O,EAAM/O,QAC7BuE,aAAa,IAAK3M,KAAMmX,yCAGlBA,MAEFA,aAAiBhP,WACpB,OAAOnI,KAAKoI,SAAW+O,EAAM/O,QAC9BuE,aAAa,KAAM3M,KAAMmX,yCAGnBA,MAEFA,aAAiBhP,WACpB,OAAOnI,KAAKoI,QAAU+O,EAAM/O,QAC7BuE,aAAa,IAAK3M,KAAMmX,yCAGlBA,MAEFA,aAAiBhP,WACpB,OAAOnI,KAAKoI,SAAW+O,EAAM/O,QAC9BuE,aAAa,KAAM3M,KAAMmX,oDAKlB,IAAIhP,YAAYnI,KAAKoI,mDAGpBupB,EAAM9sB,OAEViB,EAAS9F,KAAK00B,aAAa/C,EAAKziB,MAAOrK,UACpC,IAAIyC,GAAMxB,EAAO7B,cAAe6B,EAAO5B,WAAW,EAAG4B,EAAO3B,6DAGvDwtB,EAAM9sB,WAEdhB,EAAO8tB,EAAK1tB,cACZH,EAAQ6tB,EAAKztB,WAAaW,EAC1Bd,EAAM4tB,EAAKxtB,UACXiL,EAAOuiB,EAAKvtB,WACZiL,EAASsiB,EAAKttB,aACdiL,EAASqiB,EAAKrtB,aACdkwB,EAAc7C,EAAKptB,oBAGvB,KAEKwwB,EAAc,IAAIxtB,KAAK1D,EAAMC,EAAO,EAAGsL,EAAMC,EAAQC,EAAQklB,GAAatwB,WAC1E4B,EAAS,IAAIyB,KAAK1D,EAAMC,EAAOC,EAAKqL,EAAMC,EAAQC,EAAQklB,MAC1D1uB,EAAO5B,aAAe6wB,EACzB,OAAOjvB,IACN/B,2CAIIoT,MAEHvS,cAAcuS,GACjB,OAAO,IAAIhP,WAAWnI,KAAKoI,QAAU+O,EAAM/O,SACvC,GAAIxE,QAAQuT,GAChB,OAAOnX,KAAKy0B,SAAStd,EAAOnX,KAAKoI,SAC7B,GAAIpE,YAAYmT,GACpB,OAAOnX,KAAK00B,aAAavd,EAAOnX,KAAKoI,eAChC,IAAIwB,EAAcsB,MAAMlL,MAAQ,MAAQkL,MAAMiM,GAAS,4DAGrDA,MAEJvT,QAAQuT,GACX,OAAOnX,KAAKy0B,SAAStd,EAAOnX,KAAKoI,SAC7B,GAAIpE,YAAYmT,GACpB,OAAOnX,KAAK00B,aAAavd,EAAOnX,KAAKoI,eAChC,IAAIwB,EAAcsB,MAAMlL,MAAQ,MAAQkL,MAAMiM,GAAS,0DAGtDA,MAEHvS,cAAcuS,GACjB,OAAO,IAAIhP,WAAWnI,KAAKoI,QAAU+O,EAAM/O,eACtC,IAAIwB,EAAcsB,MAAMlL,MAAQ,MAAQkL,MAAMiM,GAAS,4DAGrDA,MAEJvT,QAAQuT,GACX,OAAOnX,KAAKy0B,SAAStd,GAAQnX,KAAKoI,SAC9B,GAAIpE,YAAYmT,GACpB,OAAOnX,KAAK00B,aAAavd,GAAQnX,KAAKoI,eACjC,IAAIwB,EAAcsB,MAAMlL,MAAQ,MAAQkL,MAAMiM,GAAS,0DAGtDA,MAEe,iBAAXA,EACV,OAAO,IAAIhP,WAAWnI,KAAKoI,QAAUhF,KAAKgN,MAAM+G,UAC3C,IAAIvN,EAAcsB,MAAMlL,MAAQ,MAAQkL,MAAMiM,GAAS,4DAGrDA,MAEc,iBAAXA,EACV,OAAO,IAAIhP,WAAWnI,KAAKoI,QAAUhF,KAAKgN,MAAM+G,UAC3C,IAAIvN,EAAcsB,MAAMlL,MAAQ,MAAQkL,MAAMiM,GAAS,oEAGjDA,MAEU,iBAAXA,EACV,OAAO,IAAIhP,WAAW/E,KAAKgN,MAAMpQ,KAAKoI,QAAU+O,IAC5C,GAAIvS,cAAcuS,GACtB,OAAO/T,KAAKgN,MAAMpQ,KAAKoI,QAAU+O,EAAM/O,eAClC,IAAIwB,EAAcsB,MAAMlL,MAAQ,OAASkL,MAAMiM,GAAS,kEAGnDA,MAEPvS,cAAcuS,GACjB,OAAOnX,KAAKoI,QAAU+O,EAAM/O,cACvB,IAAIwB,EAAcsB,MAAMlL,MAAQ,MAAQkL,MAAMiM,GAAS,kEAGlDnG,OAEPrI,EAAO3I,YACHgR,OAEF,aACAnM,EAAS,SAASA,gBAAiB8D,EAAKP,gBAC5C4P,OAAOnT,EAAQ,IACRA,gBAED,IAAIwM,EAAerR,KAAMgR,mDAM1BhR,KAAKoI,wDAKL,uCAIY,CACpB6X,EACAC,EACAE,EACAE,EACAK,EACAE,EACAC,EACAC,EACAE,EACAC,GACAC,GACAC,GACAC,GACAE,GACAS,GACAE,GACAJ,GACAC,GACAI,GACAC,GACAS,GACAH,GACAE,GACAE,GACAI,GACAC,GACAC,GACAG,GACAI,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GACAG,GACAF,GACAG,GACApI,GACAwJ,GACAI,GACAG,GACAG,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GACAkB,GACAjB,GACAG,GACAG,GACAK,GACAC,GACAG,GACAK,GACAI,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GACAI,GACAC,GACAC,GACAC,GACAK,GACAC,GACAC,GACAW,GACAlY,sBAID,KADS9J,UAEJ9G,GAAO8G,GAAY9G,KACY,QAA/BA,GAAKkW,OAAOlW,GAAK7D,OAAO,KAC3B6D,GAAOA,GAAKkW,OAAO,EAAGlW,GAAK7D,OAAO,IACnC6D,GAAOA,GAAKsV,cACZxO,GAAYpI,UAAU+C,KAAOzB,GAC7BD,SAAS,sBAAwBC,GAAM8G,m7EAzyCjC,SAAS6Z,OAAKZ,EAAWviB,EAAK81B,MAEhC5vB,EAAOqc,UAENA,EAAUjV,IAAItN,GACVuiB,EAAUtgB,IAAIjC,GACf81B,EAEH,GAAI1oB,UAAUmV,GACnB,KACK3b,EAAS2b,EAAUviB,eACA,IAAZ4G,EACHkvB,EACDlvB,QAEF,IAAIwE,EAAU,+2BAn3Od,SAAS2qB,YAAYnzB,MAEvBsD,EAAOtD,GACX,KACKozB,EAAS,UACbpzB,EAAIzB,QAAQ,SAASQ,EAAO3B,MACP,iBAATA,EACV,MAAM,IAAIoL,EAAU,wBACrB4qB,EAAOh2B,GAAO2B,IAERq0B,SAEDpzB,4RA2yED,SAASqzB,MAAMz1B,EAAQkX,EAAKrZ,OAEX,iBAAZmC,IACVA,EAASA,EAAO+O,YACV/O,EAAO7B,OAASN,GACtBmC,GAAkBkX,SACZlX,+DAlyED,SAAS01B,YAAYhkB,OAEvBpT,GAAUoT,aAAesB,UAAYtB,EAAI5I,YAAY9G,KAAO,KAAO,IAAM0P,EAAI3C,kBAC7E2C,EAAI/H,UACPrL,EAASo3B,YAAYhkB,EAAI/H,SAAW,OAASrL,GACvCA,+RApsBmB"}
>>>>>>> rel-1-1-0-maint
