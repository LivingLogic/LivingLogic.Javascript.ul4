{"version":3,"file":"ul4.js","sources":["../../node_modules/blueimp-md5/js/md5.js","../../src/ul4.js"],"sourcesContent":["/*\n * JavaScript MD5\n * https://github.com/blueimp/JavaScript-MD5\n *\n * Copyright 2011, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n *\n * Based on\n * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message\n * Digest Algorithm, as defined in RFC 1321.\n * Version 2.2 Copyright (C) Paul Johnston 1999 - 2009\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n * Distributed under the BSD License\n * See http://pajhome.org.uk/crypt/md5 for more info.\n */\n\n/* global define */\n\n/* eslint-disable strict */\n\n;(function ($) {\n  'use strict'\n\n  /**\n   * Add integers, wrapping at 2^32.\n   * This uses 16-bit operations internally to work around bugs in interpreters.\n   *\n   * @param {number} x First integer\n   * @param {number} y Second integer\n   * @returns {number} Sum\n   */\n  function safeAdd(x, y) {\n    var lsw = (x & 0xffff) + (y & 0xffff)\n    var msw = (x >> 16) + (y >> 16) + (lsw >> 16)\n    return (msw << 16) | (lsw & 0xffff)\n  }\n\n  /**\n   * Bitwise rotate a 32-bit number to the left.\n   *\n   * @param {number} num 32-bit number\n   * @param {number} cnt Rotation count\n   * @returns {number} Rotated number\n   */\n  function bitRotateLeft(num, cnt) {\n    return (num << cnt) | (num >>> (32 - cnt))\n  }\n\n  /**\n   * Basic operation the algorithm uses.\n   *\n   * @param {number} q q\n   * @param {number} a a\n   * @param {number} b b\n   * @param {number} x x\n   * @param {number} s s\n   * @param {number} t t\n   * @returns {number} Result\n   */\n  function md5cmn(q, a, b, x, s, t) {\n    return safeAdd(bitRotateLeft(safeAdd(safeAdd(a, q), safeAdd(x, t)), s), b)\n  }\n  /**\n   * Basic operation the algorithm uses.\n   *\n   * @param {number} a a\n   * @param {number} b b\n   * @param {number} c c\n   * @param {number} d d\n   * @param {number} x x\n   * @param {number} s s\n   * @param {number} t t\n   * @returns {number} Result\n   */\n  function md5ff(a, b, c, d, x, s, t) {\n    return md5cmn((b & c) | (~b & d), a, b, x, s, t)\n  }\n  /**\n   * Basic operation the algorithm uses.\n   *\n   * @param {number} a a\n   * @param {number} b b\n   * @param {number} c c\n   * @param {number} d d\n   * @param {number} x x\n   * @param {number} s s\n   * @param {number} t t\n   * @returns {number} Result\n   */\n  function md5gg(a, b, c, d, x, s, t) {\n    return md5cmn((b & d) | (c & ~d), a, b, x, s, t)\n  }\n  /**\n   * Basic operation the algorithm uses.\n   *\n   * @param {number} a a\n   * @param {number} b b\n   * @param {number} c c\n   * @param {number} d d\n   * @param {number} x x\n   * @param {number} s s\n   * @param {number} t t\n   * @returns {number} Result\n   */\n  function md5hh(a, b, c, d, x, s, t) {\n    return md5cmn(b ^ c ^ d, a, b, x, s, t)\n  }\n  /**\n   * Basic operation the algorithm uses.\n   *\n   * @param {number} a a\n   * @param {number} b b\n   * @param {number} c c\n   * @param {number} d d\n   * @param {number} x x\n   * @param {number} s s\n   * @param {number} t t\n   * @returns {number} Result\n   */\n  function md5ii(a, b, c, d, x, s, t) {\n    return md5cmn(c ^ (b | ~d), a, b, x, s, t)\n  }\n\n  /**\n   * Calculate the MD5 of an array of little-endian words, and a bit length.\n   *\n   * @param {Array} x Array of little-endian words\n   * @param {number} len Bit length\n   * @returns {Array<number>} MD5 Array\n   */\n  function binlMD5(x, len) {\n    /* append padding */\n    x[len >> 5] |= 0x80 << len % 32\n    x[(((len + 64) >>> 9) << 4) + 14] = len\n\n    var i\n    var olda\n    var oldb\n    var oldc\n    var oldd\n    var a = 1732584193\n    var b = -271733879\n    var c = -1732584194\n    var d = 271733878\n\n    for (i = 0; i < x.length; i += 16) {\n      olda = a\n      oldb = b\n      oldc = c\n      oldd = d\n\n      a = md5ff(a, b, c, d, x[i], 7, -680876936)\n      d = md5ff(d, a, b, c, x[i + 1], 12, -389564586)\n      c = md5ff(c, d, a, b, x[i + 2], 17, 606105819)\n      b = md5ff(b, c, d, a, x[i + 3], 22, -1044525330)\n      a = md5ff(a, b, c, d, x[i + 4], 7, -176418897)\n      d = md5ff(d, a, b, c, x[i + 5], 12, 1200080426)\n      c = md5ff(c, d, a, b, x[i + 6], 17, -1473231341)\n      b = md5ff(b, c, d, a, x[i + 7], 22, -45705983)\n      a = md5ff(a, b, c, d, x[i + 8], 7, 1770035416)\n      d = md5ff(d, a, b, c, x[i + 9], 12, -1958414417)\n      c = md5ff(c, d, a, b, x[i + 10], 17, -42063)\n      b = md5ff(b, c, d, a, x[i + 11], 22, -1990404162)\n      a = md5ff(a, b, c, d, x[i + 12], 7, 1804603682)\n      d = md5ff(d, a, b, c, x[i + 13], 12, -40341101)\n      c = md5ff(c, d, a, b, x[i + 14], 17, -1502002290)\n      b = md5ff(b, c, d, a, x[i + 15], 22, 1236535329)\n\n      a = md5gg(a, b, c, d, x[i + 1], 5, -165796510)\n      d = md5gg(d, a, b, c, x[i + 6], 9, -1069501632)\n      c = md5gg(c, d, a, b, x[i + 11], 14, 643717713)\n      b = md5gg(b, c, d, a, x[i], 20, -373897302)\n      a = md5gg(a, b, c, d, x[i + 5], 5, -701558691)\n      d = md5gg(d, a, b, c, x[i + 10], 9, 38016083)\n      c = md5gg(c, d, a, b, x[i + 15], 14, -660478335)\n      b = md5gg(b, c, d, a, x[i + 4], 20, -405537848)\n      a = md5gg(a, b, c, d, x[i + 9], 5, 568446438)\n      d = md5gg(d, a, b, c, x[i + 14], 9, -1019803690)\n      c = md5gg(c, d, a, b, x[i + 3], 14, -187363961)\n      b = md5gg(b, c, d, a, x[i + 8], 20, 1163531501)\n      a = md5gg(a, b, c, d, x[i + 13], 5, -1444681467)\n      d = md5gg(d, a, b, c, x[i + 2], 9, -51403784)\n      c = md5gg(c, d, a, b, x[i + 7], 14, 1735328473)\n      b = md5gg(b, c, d, a, x[i + 12], 20, -1926607734)\n\n      a = md5hh(a, b, c, d, x[i + 5], 4, -378558)\n      d = md5hh(d, a, b, c, x[i + 8], 11, -2022574463)\n      c = md5hh(c, d, a, b, x[i + 11], 16, 1839030562)\n      b = md5hh(b, c, d, a, x[i + 14], 23, -35309556)\n      a = md5hh(a, b, c, d, x[i + 1], 4, -1530992060)\n      d = md5hh(d, a, b, c, x[i + 4], 11, 1272893353)\n      c = md5hh(c, d, a, b, x[i + 7], 16, -155497632)\n      b = md5hh(b, c, d, a, x[i + 10], 23, -1094730640)\n      a = md5hh(a, b, c, d, x[i + 13], 4, 681279174)\n      d = md5hh(d, a, b, c, x[i], 11, -358537222)\n      c = md5hh(c, d, a, b, x[i + 3], 16, -722521979)\n      b = md5hh(b, c, d, a, x[i + 6], 23, 76029189)\n      a = md5hh(a, b, c, d, x[i + 9], 4, -640364487)\n      d = md5hh(d, a, b, c, x[i + 12], 11, -421815835)\n      c = md5hh(c, d, a, b, x[i + 15], 16, 530742520)\n      b = md5hh(b, c, d, a, x[i + 2], 23, -995338651)\n\n      a = md5ii(a, b, c, d, x[i], 6, -198630844)\n      d = md5ii(d, a, b, c, x[i + 7], 10, 1126891415)\n      c = md5ii(c, d, a, b, x[i + 14], 15, -1416354905)\n      b = md5ii(b, c, d, a, x[i + 5], 21, -57434055)\n      a = md5ii(a, b, c, d, x[i + 12], 6, 1700485571)\n      d = md5ii(d, a, b, c, x[i + 3], 10, -1894986606)\n      c = md5ii(c, d, a, b, x[i + 10], 15, -1051523)\n      b = md5ii(b, c, d, a, x[i + 1], 21, -2054922799)\n      a = md5ii(a, b, c, d, x[i + 8], 6, 1873313359)\n      d = md5ii(d, a, b, c, x[i + 15], 10, -30611744)\n      c = md5ii(c, d, a, b, x[i + 6], 15, -1560198380)\n      b = md5ii(b, c, d, a, x[i + 13], 21, 1309151649)\n      a = md5ii(a, b, c, d, x[i + 4], 6, -145523070)\n      d = md5ii(d, a, b, c, x[i + 11], 10, -1120210379)\n      c = md5ii(c, d, a, b, x[i + 2], 15, 718787259)\n      b = md5ii(b, c, d, a, x[i + 9], 21, -343485551)\n\n      a = safeAdd(a, olda)\n      b = safeAdd(b, oldb)\n      c = safeAdd(c, oldc)\n      d = safeAdd(d, oldd)\n    }\n    return [a, b, c, d]\n  }\n\n  /**\n   * Convert an array of little-endian words to a string\n   *\n   * @param {Array<number>} input MD5 Array\n   * @returns {string} MD5 string\n   */\n  function binl2rstr(input) {\n    var i\n    var output = ''\n    var length32 = input.length * 32\n    for (i = 0; i < length32; i += 8) {\n      output += String.fromCharCode((input[i >> 5] >>> i % 32) & 0xff)\n    }\n    return output\n  }\n\n  /**\n   * Convert a raw string to an array of little-endian words\n   * Characters >255 have their high-byte silently ignored.\n   *\n   * @param {string} input Raw input string\n   * @returns {Array<number>} Array of little-endian words\n   */\n  function rstr2binl(input) {\n    var i\n    var output = []\n    output[(input.length >> 2) - 1] = undefined\n    for (i = 0; i < output.length; i += 1) {\n      output[i] = 0\n    }\n    var length8 = input.length * 8\n    for (i = 0; i < length8; i += 8) {\n      output[i >> 5] |= (input.charCodeAt(i / 8) & 0xff) << i % 32\n    }\n    return output\n  }\n\n  /**\n   * Calculate the MD5 of a raw string\n   *\n   * @param {string} s Input string\n   * @returns {string} Raw MD5 string\n   */\n  function rstrMD5(s) {\n    return binl2rstr(binlMD5(rstr2binl(s), s.length * 8))\n  }\n\n  /**\n   * Calculates the HMAC-MD5 of a key and some data (raw strings)\n   *\n   * @param {string} key HMAC key\n   * @param {string} data Raw input string\n   * @returns {string} Raw MD5 string\n   */\n  function rstrHMACMD5(key, data) {\n    var i\n    var bkey = rstr2binl(key)\n    var ipad = []\n    var opad = []\n    var hash\n    ipad[15] = opad[15] = undefined\n    if (bkey.length > 16) {\n      bkey = binlMD5(bkey, key.length * 8)\n    }\n    for (i = 0; i < 16; i += 1) {\n      ipad[i] = bkey[i] ^ 0x36363636\n      opad[i] = bkey[i] ^ 0x5c5c5c5c\n    }\n    hash = binlMD5(ipad.concat(rstr2binl(data)), 512 + data.length * 8)\n    return binl2rstr(binlMD5(opad.concat(hash), 512 + 128))\n  }\n\n  /**\n   * Convert a raw string to a hex string\n   *\n   * @param {string} input Raw input string\n   * @returns {string} Hex encoded string\n   */\n  function rstr2hex(input) {\n    var hexTab = '0123456789abcdef'\n    var output = ''\n    var x\n    var i\n    for (i = 0; i < input.length; i += 1) {\n      x = input.charCodeAt(i)\n      output += hexTab.charAt((x >>> 4) & 0x0f) + hexTab.charAt(x & 0x0f)\n    }\n    return output\n  }\n\n  /**\n   * Encode a string as UTF-8\n   *\n   * @param {string} input Input string\n   * @returns {string} UTF8 string\n   */\n  function str2rstrUTF8(input) {\n    return unescape(encodeURIComponent(input))\n  }\n\n  /**\n   * Encodes input string as raw MD5 string\n   *\n   * @param {string} s Input string\n   * @returns {string} Raw MD5 string\n   */\n  function rawMD5(s) {\n    return rstrMD5(str2rstrUTF8(s))\n  }\n  /**\n   * Encodes input string as Hex encoded string\n   *\n   * @param {string} s Input string\n   * @returns {string} Hex encoded string\n   */\n  function hexMD5(s) {\n    return rstr2hex(rawMD5(s))\n  }\n  /**\n   * Calculates the raw HMAC-MD5 for the given key and data\n   *\n   * @param {string} k HMAC key\n   * @param {string} d Input string\n   * @returns {string} Raw MD5 string\n   */\n  function rawHMACMD5(k, d) {\n    return rstrHMACMD5(str2rstrUTF8(k), str2rstrUTF8(d))\n  }\n  /**\n   * Calculates the Hex encoded HMAC-MD5 for the given key and data\n   *\n   * @param {string} k HMAC key\n   * @param {string} d Input string\n   * @returns {string} Raw MD5 string\n   */\n  function hexHMACMD5(k, d) {\n    return rstr2hex(rawHMACMD5(k, d))\n  }\n\n  /**\n   * Calculates MD5 value for a given string.\n   * If a key is provided, calculates the HMAC-MD5 value.\n   * Returns a Hex encoded string unless the raw argument is given.\n   *\n   * @param {string} string Input string\n   * @param {string} [key] HMAC key\n   * @param {boolean} [raw] Raw output switch\n   * @returns {string} MD5 output\n   */\n  function md5(string, key, raw) {\n    if (!key) {\n      if (!raw) {\n        return hexMD5(string)\n      }\n      return rawMD5(string)\n    }\n    if (!raw) {\n      return hexHMACMD5(key, string)\n    }\n    return rawHMACMD5(key, string)\n  }\n\n  if (typeof define === 'function' && define.amd) {\n    define(function () {\n      return md5\n    })\n  } else if (typeof module === 'object' && module.exports) {\n    module.exports = md5\n  } else {\n    $.md5 = md5\n  }\n})(this)\n","/*!\n * UL4/UL4ON JavaScript Library\n * http://www.livinglogic.de/Python/ul4c/\n * http://www.livinglogic.de/Python/ul4on/\n *\n * Copyright 2011-2021 by LivingLogic AG, Bayreuth/Germany\n * Copyright 2011-2021 by Walter Dörwald\n *\n * All Rights Reserved\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\n/*jslint vars: true */\n\n// Version of this Javascript package\nimport { version } from '../package.json';\n\nexport { version };\n\n// Version of the UL4 API\n// I.e. this version should be compatible with the Python and Java\n// implementations that support the same API version.\nexport const api_version = \"50\";\n\n\n/// Symbols for interfaces implemented in UL4\n\nexport let symbols = {\n\t// Convert an object to a string via UL4s `str()` function\n\tstr: Symbol(\"ul4.str\"),\n\t// Return a unambiguous string representation of the object via UL4s `repr()` function\n\trepr: Symbol(\"ul4.repr\"),\n\t// Convert an object to a boolean value via UL4s `bool()` function\n\tbool: Symbol(\"ul4.bool\"),\n\t// Implementing this interface makes an object callable in UL4\n\tcall: Symbol(\"ul4.call\"),\n\t// Implementing this interface makes an object renderable in UL4\n\trender: Symbol(\"ul4.render\"),\n\t// Test whether an object is contained in this object UL4s `in` operator\n\tcontains: Symbol(\"ul4.contains\"),\n\t// Compare two objects for equality via UL4s `==` operator\n\teq: Symbol(\"ul4.eq\"),\n\t// Compare two objects for inequality via UL4s `!=` operator\n\tne: Symbol(\"ul4.ne\"),\n\t// Compare two objects for \"less then\" via UL4s `<` operator\n\tlt: Symbol(\"ul4.lt\"),\n\t// Compare two objects for \"less then or equal\" via UL4s `<=` operator\n\tle: Symbol(\"ul4.le\"),\n\t// Compare two objects for \"greater then\" via UL4s `>` operator\n\tgt: Symbol(\"ul4.gt\"),\n\t// Compare two objects for \"greater then or equal\" via UL4s `>=` operator\n\tge: Symbol(\"ul4.ge\"),\n\t// Negate an object via UL4s unary `-` operator\n\tneg: Symbol(\"ul4.neg\"),\n\t// Return the absolute value of an object via UL4s `abs()` function\n\tabs: Symbol(\"ul4.abs\"),\n\t// Add two objects via UL4s `+` operator (as a method of the left operand)\n\tadd: Symbol(\"ul4.add\"),\n\t// Add two objects via UL4s `+` operator (as a method of the right operand)\n\tradd: Symbol(\"ul4.radd\"),\n\t// Subtract two objects via UL4s `-` operator (as a method of the left operand)\n\tsub: Symbol(\"ul4.sub\"),\n\t// Subtract two objects via UL4s `-` operator (as a method of the right operand)\n\trsub: Symbol(\"ul4.rsub\"),\n\t// Multiply two objects via UL4s `*` operator (as a method of the left operand)\n\tmul: Symbol(\"ul4.mul\"),\n\t// Multiply two objects via UL4s `*` operator (as a method of the right operand)\n\trmul: Symbol(\"ul4.rmul\"),\n\t// Divide two objects via UL4s `/` operator (as a method of the left operand)\n\ttruediv: Symbol(\"ul4.truediv\"),\n\t// Divide two objects via UL4s `/` operator (as a method of the right operand)\n\trtruediv: Symbol(\"ul4.rtruediv\"),\n\t// Divide two objects via UL4s `//` operator (as a method of the left operand)\n\tfloordiv: Symbol(\"ul4.floordiv\"),\n\t// Divide two objects via UL4s `//` operator (as a method of the right operand)\n\trfloordiv: Symbol(\"ul4.rfloordiv\"),\n\t// Get an attribute of an object via UL4\n\tgetattr: Symbol(\"ul4.getattr\"),\n\t// Set an attribute of an object via UL4\n\tsetattr: Symbol(\"ul4.setattr\"),\n\t// Get an item of a container object via UL4s `[]` operator\n\tgetitem: Symbol(\"ul4.getitem\"),\n\t// Set an item of a container object via UL4 UL4s `[] =` operator\n\tsetitem: Symbol(\"ul4.setitem\"),\n\t// Return the UL4 type of an object\n\ttype: Symbol(\"ul4.type\"),\n};\n\n\n///\n/// UL4ON\n///\n\nconst _registry = {};\n\n// Register the constructor function ``f`` under the name ``name`` with the UL4ON machinery\nexport function register(name, f)\n{\n\tf.prototype.ul4onname = name;\n\t_registry[name] = f;\n};\n\n// Return a string that contains the object ``obj`` in the UL4ON serialization format\nexport function dumps(obj, indent=null)\n{\n\tlet encoder = new Encoder(indent);\n\tlet output = [];\n\tencoder.dump(obj, output);\n\treturn output.join(\"\");\n};\n\n// Load an object from the string ``dump``.\n// ``dump`` must contain the object in the UL4ON serialization format\n// ``registry`` may be null or a dictionary mapping type names to constructor functions\nexport function loads(dump, registry=null)\n{\n\tlet decoder = new Decoder(registry);\n\treturn decoder.loads(dump);\n};\n\n// Helper class for encoding\nexport class Encoder\n{\n\t// Create a new Encoder object\n\tconstructor(indent=null)\n\t{\n\t\tthis.indent = indent;\n\t\tthis.output = null;\n\t\tthis._level = 0;\n\t\tthis._strings2index = {};\n\t\tthis._ids2index = {};\n\t\tthis._backrefs = 0;\n\t}\n\n\t_line(line, ...args)\n\t{\n\t\tif (this.indent !== null)\n\t\t{\n\t\t\tfor (let i = 0; i < this._level; ++i)\n\t\t\t\tthis.output.push(this.indent);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (this.output.length)\n\t\t\t\tthis.output.push(\" \");\n\t\t}\n\t\tthis.output.push(line);\n\n\t\tif (args.length)\n\t\t{\n\t\t\tlet oldindent = this.indent;\n\t\t\tthis.indent = null;\n\t\t\tfor (let arg of args)\n\t\t\t\tthis.dump(arg);\n\t\t\tthis.indent = oldindent;\n\t\t}\n\n\t\tif (this.indent !== null)\n\t\t\tthis.output.push(\"\\n\");\n\t}\n\n\tdumps(obj)\n\t{\n\t\tlet output = [];\n\t\tthis.dump(obj, output);\n\t\treturn output.join(\"\");\n\t}\n\n\tdump(obj, output=null)\n\t{\n\t\tif (output !== null)\n\t\t{\n\t\t\tthis._level = 0;\n\t\t\tthis.output = output;\n\t\t}\n\t\tif (obj === null)\n\t\t\tthis._line(\"n\");\n\t\telse if (typeof(obj) === \"boolean\")\n\t\t\tthis._line(obj ? \"bT\" : \"bF\");\n\t\telse if (typeof(obj) === \"number\")\n\t\t{\n\t\t\tlet type = (Math.round(obj) == obj) ? \"i\" : \"f\";\n\t\t\tthis._line(type + obj);\n\t\t}\n\t\telse if (typeof(obj) === \"string\")\n\t\t{\n\t\t\tlet index = this._strings2index[obj];\n\t\t\tif (index !== undefined)\n\t\t\t{\n\t\t\t\tthis._line(\"^\" + index);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis._strings2index[obj] = this._backrefs++;\n\t\t\t\tlet dump = _str_repr(obj).replace(\"<\", \"\\\\x3c\");\n\t\t\t\tthis._line(\"S\" + dump);\n\t\t\t}\n\t\t}\n\t\telse if (_iscolor(obj))\n\t\t\tthis._line(\"c\", obj.r(), obj.g(), obj.b(), obj.a());\n\t\telse if (_isdate(obj))\n\t\t\tthis._line(\"x\", obj.year(), obj.month(), obj.day());\n\t\telse if (_isdatetime(obj))\n\t\t\tthis._line(\"z\", obj.getFullYear(), obj.getMonth()+1, obj.getDate(), obj.getHours(), obj.getMinutes(), obj.getSeconds(), obj.getMilliseconds() * 1000);\n\t\telse if (_istimedelta(obj))\n\t\t\tthis._line(\"t\", obj.days(), obj.seconds(), obj.microseconds());\n\t\telse if (_ismonthdelta(obj))\n\t\t\tthis._line(\"m\", obj.months());\n\t\telse if (obj instanceof slice)\n\t\t\tthis._line(\"r\", obj.start, obj.stop);\n\t\telse if (obj.ul4onname && obj.ul4ondump)\n\t\t{\n\t\t\tif (obj.__id__)\n\t\t\t{\n\t\t\t\tlet index = this._ids2index[obj.__id__];\n\t\t\t\tif (index !== undefined)\n\t\t\t\t{\n\t\t\t\t\tthis._line(\"^\" + index);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis._ids2index[obj.__id__] = this._backrefs++;\n\t\t\t}\n\t\t\tif (obj.ul4onid)\n\t\t\t\tthis._line(\"P\", obj.ul4onname, obj.ul4onid);\n\t\t\telse\n\t\t\t\tthis._line(\"O\", obj.ul4onname);\n\t\t\t++this._level;\n\t\t\tobj.ul4ondump(this);\n\t\t\t--this._level;\n\t\t\tthis._line(\")\");\n\t\t}\n\t\telse if (_islist(obj))\n\t\t{\n\t\t\tthis._line(\"l\");\n\t\t\t++this._level;\n\t\t\tfor (let item of obj)\n\t\t\t\tthis.dump(item);\n\t\t\t--this._level;\n\t\t\tthis._line(\"]\");\n\t\t}\n\t\telse if (_ismap(obj))\n\t\t{\n\t\t\tthis._line(\"e\");\n\t\t\t++this._level;\n\t\t\tfor (let [key, value] of obj)\n\t\t\t{\n\t\t\t\tthis.dump(key);\n\t\t\t\tthis.dump(value);\n\t\t\t}\n\t\t\t--this._level;\n\t\t\tthis._line(\"}\");\n\t\t}\n\t\telse if (_isdict(obj))\n\t\t{\n\t\t\tthis._line(\"d\");\n\t\t\t++this._level;\n\t\t\tfor (let key in obj)\n\t\t\t{\n\t\t\t\tthis.dump(key);\n\t\t\t\tthis.dump(obj[key]);\n\t\t\t}\n\t\t\t--this._level;\n\t\t\tthis._line(\"}\");\n\t\t}\n\t\telse if (_isset(obj))\n\t\t{\n\t\t\tthis._line(\"y\");\n\t\t\t++this._level;\n\t\t\tfor (let value of obj)\n\t\t\t\tthis.dump(value);\n\t\t\t--this._level;\n\t\t\tthis._line(\"}\");\n\t\t}\n\t\telse\n\t\t\tthrow new ValueError(\"can't create UL4ON dump of object \" + _repr(obj));\n\t\tif (output !== null)\n\t\t{\n\t\t\tthis.output = null;\n\t\t}\n\t}\n\n\t[symbols.getattr](attrname)\n\t{\n\t\tlet self = this;\n\t\tswitch (attrname)\n\t\t{\n\t\t\tcase \"dumps\":\n\t\t\t\tlet dumps = this.dumps.bind(this);\n\t\t\t\texpose(dumps, [\"obj\", \"pk\"]);\n\t\t\t\treturn dumps;\n\t\t\tdefault:\n\t\t\t\tthrow new ul4.AttributeError(this, attrname);\n\t\t}\n\t}\n};\n\n// Helper class for decoding\nexport class Decoder\n{\n\t// Creates a new decoder for reading an UL4ON dump\n\tconstructor(registry)\n\t{\n\t\tthis.input = null;\n\t\tthis.pos = 0;\n\t\tthis.backrefs = [];\n\t\tthis.registry = registry === undefined ? null : registry;\n\t\tthis.persistent_objects = {};\n\t\tthis.stack = null; // Use for informative error messages\n\t}\n\n\t// Read a character from the buffer\n\treadchar()\n\t{\n\t\tif (this.pos >= this.input.length)\n\t\t\tthrow new ValueError(\"UL4 decoder at EOF\");\n\t\treturn this.input.charAt(this.pos++);\n\t}\n\n\t// Read a character from the buffer (return null on eof)\n\treadcharoreof()\n\t{\n\t\tif (this.pos >= this.input.length)\n\t\t\treturn null;\n\t\treturn this.input.charAt(this.pos++);\n\t}\n\n\t// Read next not-whitespace character from the buffer\n\treadblackchar()\n\t{\n\t\tlet re_white = /\\s/;\n\n\t\tfor (;;)\n\t\t{\n\t\t\tif (this.pos >= this.input.length)\n\t\t\t\tthrow new ValueError(\"UL4 decoder at EOF at position \" + this.pos + \" with path \" + this.stack.join(\"/\"));\n\t\t\tlet c = this.input.charAt(this.pos++);\n\t\t\tif (!c.match(re_white))\n\t\t\t\treturn c;\n\t\t}\n\t}\n\n\t// Read ``size`` characters from the buffer\n\tread(size)\n\t{\n\t\tif (this.pos+size > this.input.length)\n\t\t\tsize = this.input.length-this.pos;\n\t\tlet result = this.input.substring(this.pos, this.pos+size);\n\t\tthis.pos += size;\n\t\treturn result;\n\t}\n\n\t// \"unread\" one character\n\tbackup()\n\t{\n\t\t--this.pos;\n\t}\n\n\t// Read a number from the buffer\n\treadnumber()\n\t{\n\t\tlet re_digits = /[-+0123456789.eE]/, value = \"\";\n\t\tfor (;;)\n\t\t{\n\t\t\tlet c = this.readcharoreof();\n\t\t\tif (c !== null && c.match(re_digits))\n\t\t\t\tvalue += c;\n\t\t\telse\n\t\t\t{\n\t\t\t\tlet result = parseFloat(value);\n\t\t\t\tif (isNaN(result))\n\t\t\t\t\tthrow new ValueError(\"invalid number, got \" + _repr(\"value\") + \" at position \" + this.pos + \" with path \" + this.stack.join(\"/\"));\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}\n\t}\n\n\t_beginfakeloading()\n\t{\n\t\tlet oldpos = this.backrefs.length;\n\t\tthis.backrefs.push(null);\n\t\treturn oldpos;\n\t}\n\n\t_endfakeloading(oldpos, value)\n\t{\n\t\tthis.backrefs[oldpos] = value;\n\t}\n\n\t_readescape(escapechar, length)\n\t{\n\t\tlet chars = this.read(length);\n\t\tif (chars.length != length)\n\t\t\tthrow new ValueError(\"broken escape \" + _repr(\"\\\\\" + escapechar + chars) + \" at position \" + this.pos + \" with path \" + this.stack.join(\"/\"));\n\t\tlet codepoint = parseInt(chars, 16);\n\t\tif (isNaN(codepoint))\n\t\t\tthrow new ValueError(\"broken escape \" + _repr(\"\\\\\" + escapechar + chars) + \" at position \" + this.pos + \" with path \" + this.stack.join(\"/\"));\n\t\treturn String.fromCharCode(codepoint);\n\t}\n\n\treset()\n\t{\n\t\tthis.pos = 0;\n\t\tthis.stack = [];\n\t\tthis.backrefs = []\n\t}\n\n\tloads(dump)\n\t{\n\t\treturn this.load(dump);\n\t}\n\n\t// Load the next object from the buffer\n\tload(input=null)\n\t{\n\t\tif (input !== null)\n\t\t{\n\t\t\tthis.input = input;\n\t\t\tthis.pos = 0;\n\t\t\tthis.stack = [];\n\t\t}\n\t\tlet typecode = this.readblackchar();\n\t\tlet result;\n\t\tswitch (typecode)\n\t\t{\n\t\t\tcase \"^\":\n\t\t\t\treturn this.backrefs[this.readnumber()];\n\t\t\tcase \"n\":\n\t\t\tcase \"N\":\n\t\t\t\tif (typecode === \"N\")\n\t\t\t\t\tthis.backrefs.push(null);\n\t\t\t\tresult = null;\n\t\t\t\tbreak;\n\t\t\tcase \"b\":\n\t\t\tcase \"B\":\n\t\t\t\tresult = this.readchar();\n\t\t\t\tif (result === \"T\")\n\t\t\t\t\tresult = true;\n\t\t\t\telse if (result === \"F\")\n\t\t\t\t\tresult = false;\n\t\t\t\telse\n\t\t\t\t\tthrow new ValueError(\"wrong value for boolean, expected 'T' or 'F', got \" + _repr(result) + \" at position \" + this.pos + \" with path \" + this.stack.join(\"/\"));\n\t\t\t\tif (typecode === \"B\")\n\t\t\t\t\tthis.backrefs.push(result);\n\t\t\t\tbreak;\n\t\t\tcase \"i\":\n\t\t\tcase \"I\":\n\t\t\tcase \"f\":\n\t\t\tcase \"F\":\n\t\t\t\tresult = this.readnumber();\n\t\t\t\tif (typecode === \"I\" || typecode === \"F\")\n\t\t\t\t\tthis.backrefs.push(result);\n\t\t\t\tbreak;\n\t\t\tcase \"s\":\n\t\t\tcase \"S\":\n\t\t\t\tresult = [];\n\t\t\t\tlet delimiter = this.readblackchar();\n\t\t\t\tfor (;;)\n\t\t\t\t{\n\t\t\t\t\tlet c = this.readchar();\n\t\t\t\t\tif (c == delimiter)\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tif (c == \"\\\\\")\n\t\t\t\t\t{\n\t\t\t\t\t\tlet c2 = this.readchar();\n\t\t\t\t\t\tif (c2 == \"\\\\\")\n\t\t\t\t\t\t\tresult.push(\"\\\\\");\n\t\t\t\t\t\telse if (c2 == \"n\")\n\t\t\t\t\t\t\tresult.push(\"\\n\");\n\t\t\t\t\t\telse if (c2 == \"r\")\n\t\t\t\t\t\t\tresult.push(\"\\r\");\n\t\t\t\t\t\telse if (c2 == \"t\")\n\t\t\t\t\t\t\tresult.push(\"\\t\");\n\t\t\t\t\t\telse if (c2 == \"f\")\n\t\t\t\t\t\t\tresult.push(\"\\u000c\");\n\t\t\t\t\t\telse if (c2 == \"b\")\n\t\t\t\t\t\t\tresult.push(\"\\u0008\");\n\t\t\t\t\t\telse if (c2 == \"a\")\n\t\t\t\t\t\t\tresult.push(\"\\u0007\");\n\t\t\t\t\t\telse if (c2 == \"'\")\n\t\t\t\t\t\t\tresult.push(\"'\");\n\t\t\t\t\t\telse if (c2 == '\"')\n\t\t\t\t\t\t\tresult.push('\"');\n\t\t\t\t\t\telse if (c2 == \"x\")\n\t\t\t\t\t\t\tresult.push(this._readescape(\"x\", 2));\n\t\t\t\t\t\telse if (c2 == \"u\")\n\t\t\t\t\t\t\tresult.push(this._readescape(\"u\", 4));\n\t\t\t\t\t\telse if (c2 == \"U\")\n\t\t\t\t\t\t\tresult.push(this._readescape(\"U\", 8));\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tresult.push(\"\\\\\" + c2);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\tresult.push(c);\n\t\t\t\t}\n\t\t\t\tresult = result.join(\"\");\n\t\t\t\tif (typecode === \"S\")\n\t\t\t\t\tthis.backrefs.push(result);\n\t\t\t\tbreak;\n\t\t\tcase \"c\":\n\t\t\tcase \"C\":\n\t\t\t\tresult = new Color();\n\t\t\t\tif (typecode === \"C\")\n\t\t\t\t\tthis.backrefs.push(result);\n\t\t\t\tresult._r = this.load();\n\t\t\t\tresult._g = this.load();\n\t\t\t\tresult._b = this.load();\n\t\t\t\tresult._a = this.load();\n\t\t\t\tbreak;\n\t\t\tcase \"x\":\n\t\t\tcase \"X\":\n\t\t\t{\n\t\t\t\tlet year = this.load();\n\t\t\t\tlet month = this.load();\n\t\t\t\tlet day = this.load();\n\t\t\t\tresult = new Date_(year, month, day);\n\t\t\t\tif (typecode === \"X\")\n\t\t\t\t\tthis.backrefs.push(result);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase \"z\":\n\t\t\tcase \"Z\":\n\t\t\t\tresult = new Date();\n\t\t\t\tresult.setFullYear(this.load());\n\t\t\t\tresult.setDate(1);\n\t\t\t\tresult.setMonth(this.load() - 1);\n\t\t\t\tresult.setDate(this.load());\n\t\t\t\tresult.setHours(this.load());\n\t\t\t\tresult.setMinutes(this.load());\n\t\t\t\tresult.setSeconds(this.load());\n\t\t\t\tresult.setMilliseconds(this.load()/1000);\n\t\t\t\tif (typecode === \"Z\")\n\t\t\t\t\tthis.backrefs.push(result);\n\t\t\t\tbreak;\n\t\t\tcase \"t\":\n\t\t\tcase \"T\":\n\t\t\t\tresult = new TimeDelta();\n\t\t\t\tresult._days = this.load();\n\t\t\t\tresult._seconds = this.load();\n\t\t\t\tresult._microseconds = this.load();\n\t\t\t\tif (typecode === \"T\")\n\t\t\t\t\tthis.backrefs.push(result);\n\t\t\t\tbreak;\n\t\t\tcase \"r\":\n\t\t\tcase \"R\":\n\t\t\t\tresult = new slice();\n\t\t\t\tif (typecode === \"R\")\n\t\t\t\t\tthis.backrefs.push(result);\n\t\t\t\tresult.start = this.load();\n\t\t\t\tresult.stop = this.load();\n\t\t\t\tbreak;\n\t\t\tcase \"m\":\n\t\t\tcase \"M\":\n\t\t\t\tresult = new MonthDelta();\n\t\t\t\tif (typecode === \"M\")\n\t\t\t\t\tthis.backrefs.push(result);\n\t\t\t\tresult._months = this.load();\n\t\t\t\tbreak;\n\t\t\tcase \"l\":\n\t\t\tcase \"L\":\n\t\t\t\tthis.stack.push(\"list\");\n\t\t\t\tresult = [];\n\t\t\t\tif (typecode === \"L\")\n\t\t\t\t\tthis.backrefs.push(result);\n\t\t\t\tfor (;;)\n\t\t\t\t{\n\t\t\t\t\ttypecode = this.readblackchar();\n\t\t\t\t\tif (typecode === \"]\")\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tthis.backup();\n\t\t\t\t\tresult.push(this.load());\n\t\t\t\t}\n\t\t\t\tthis.stack.pop();\n\t\t\t\tbreak;\n\t\t\tcase \"d\":\n\t\t\tcase \"D\":\n\t\t\tcase \"e\":\n\t\t\tcase \"E\":\n\t\t\t\tresult = new Map();\n\t\t\t\tthis.stack.push(typecode === \"d\" || typecode === \"D\" ? \"dict\" : \"odict\");\n\t\t\t\tif (typecode === \"D\" || typecode === \"E\")\n\t\t\t\t\tthis.backrefs.push(result);\n\t\t\t\tfor (;;)\n\t\t\t\t{\n\t\t\t\t\ttypecode = this.readblackchar();\n\t\t\t\t\tif (typecode === \"}\")\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tthis.backup();\n\t\t\t\t\tlet key = this.load();\n\t\t\t\t\tlet value = this.load();\n\t\t\t\t\tresult.set(key, value);\n\t\t\t\t}\n\t\t\t\tthis.stack.pop();\n\t\t\t\tbreak;\n\t\t\tcase \"y\":\n\t\t\tcase \"Y\":\n\t\t\t\tthis.stack.push(\"set\");\n\t\t\t\tresult = new Set();\n\t\t\t\tif (typecode === \"Y\")\n\t\t\t\t\tthis.backrefs.push(result);\n\t\t\t\tfor (;;)\n\t\t\t\t{\n\t\t\t\t\ttypecode = this.readblackchar();\n\t\t\t\t\tif (typecode === \"}\")\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tthis.backup();\n\t\t\t\t\tresult.add(this.load());\n\t\t\t\t}\n\t\t\t\tthis.stack.pop();\n\t\t\t\tbreak;\n\t\t\tcase \"o\":\n\t\t\tcase \"O\":\n\t\t\t{\n\t\t\t\tlet oldpos;\n\t\t\t\tif (typecode === \"O\")\n\t\t\t\t\toldpos = this._beginfakeloading();\n\t\t\t\tlet name = this.load();\n\t\t\t\tthis.stack.push(name);\n\t\t\t\tlet constructor;\n\t\t\t\tif (this.registry !== null)\n\t\t\t\t{\n\t\t\t\t\tconstructor = this.registry[name];\n\t\t\t\t\tif (constructor === undefined)\n\t\t\t\t\t\tconstructor = _registry[name];\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tconstructor = _registry[name];\n\t\t\t\tif (constructor === undefined)\n\t\t\t\t\tthrow new ValueError(\"can't load object of type \" + _repr(name) + \" at position \" + this.pos + \" with path \" + this.stack.join(\"/\"));\n\t\t\t\tresult = new constructor();\n\t\t\t\tif (typecode === \"O\")\n\t\t\t\t\tthis._endfakeloading(oldpos, result);\n\t\t\t\tresult.ul4onload(this);\n\t\t\t\ttypecode = this.readblackchar();\n\t\t\t\tif (typecode !== \")\")\n\t\t\t\t\tthrow new ValueError(\"object terminator ')' for object of type '\" + name + \"' expected, got \" + _repr(typecode) + \" at position \" + this.pos + \" with path \" + this.stack.join(\"/\"));\n\t\t\t\tthis.stack.pop();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase \"p\":\n\t\t\tcase \"P\":\n\t\t\t{\n\t\t\t\tlet oldpos;\n\t\t\t\tif (typecode === \"P\")\n\t\t\t\t\toldpos = this._beginfakeloading();\n\t\t\t\tlet name = this.load();\n\t\t\t\tlet id = this.load();\n\t\t\t\tthis.stack.push(name);\n\t\t\t\tlet key = name + \"=\" + id;\n\t\t\t\tresult = this.persistent_objects[key];\n\t\t\t\tif (result === undefined)\n\t\t\t\t{\n\t\t\t\t\tlet constructor;\n\t\t\t\t\tif (this.registry !== null)\n\t\t\t\t\t{\n\t\t\t\t\t\tconstructor = this.registry[name];\n\t\t\t\t\t\tif (constructor === undefined)\n\t\t\t\t\t\t\tconstructor = _registry[name];\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\tconstructor = _registry[name];\n\t\t\t\t\tif (constructor === undefined)\n\t\t\t\t\t\tthrow new ValueError(\"can't load object of type \" + _repr(name) + \" with id \" + _repr(id) + \" at position \" + this.pos + \" with path \" + this.stack.join(\"/\"));\n\t\t\t\t\tresult = new constructor(id);\n\t\t\t\t\tthis.persistent_objects[key] = result;\n\t\t\t\t}\n\t\t\t\tif (typecode === \"P\")\n\t\t\t\t\tthis._endfakeloading(oldpos, result);\n\t\t\t\tresult.ul4onload(this);\n\t\t\t\ttypecode = this.readblackchar();\n\t\t\t\tif (typecode !== \")\")\n\t\t\t\t\tthrow new ValueError(\"object terminator ')' for object of type \" + _repr(name) + \" with id \" + _repr(id) + \" expected, got \" + _repr(typecode) + \" at position \" + this.pos + \" with path \" + this.stack.join(\"/\"));\n\t\t\t\tthis.stack.pop();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdefault:\n\t\t\t\tthrow new ValueError(\"unknown typecode \" + _repr(typecode) + \" at position \" + this.pos + \" with path \" + this.stack.join(\"/\"));\n\t\t}\n\t\tif (input !== null)\n\t\t{\n\t\t\tthis.input = null;\n\t\t\tthis.pos = 0;\n\t\t\tthis.stack = null;\n\t\t}\n\t\treturn result;\n\t}\n\n\t// Return an iterator for loading the content of a object\n\tloadcontent()\n\t{\n\t\tlet self = this;\n\t\treturn {\n\t\t\tnext: function()\n\t\t\t{\n\t\t\t\tlet typecode = self.readblackchar();\n\t\t\t\t// Always \"unread\" the typecode even at the end\n\t\t\t\t// so that at the end of a call to ul4onload()\n\t\t\t\t// the next input is the \"end of object\" marker\n\t\t\t\t// no matter whether ul4onload() uses loadcontent() or not.\n\t\t\t\tself.backup();\n\t\t\t\tif (typecode == \")\")\n\t\t\t\t\treturn {done: true};\n\t\t\t\telse\n\t\t\t\t\treturn {done: false, value: self.load()};\n\t\t\t}\n\t\t};\n\t}\n\n\t[symbols.getattr](attrname)\n\t{\n\t\tswitch (attrname)\n\t\t{\n\t\t\tcase \"loads\":\n\t\t\t\tlet loads = this.loads.bind(this);\n\t\t\t\texpose(loads, [\"dump\", \"p\"]);\n\t\t\t\treturn loads;\n\t\t\tdefault:\n\t\t\t\tthrow new ul4.AttributeError(this, attrname);\n\t\t}\n\t}\n};\n\n\n///\n/// UL4\n///\n\n// REs for parsing JSON\nconst _rvalidchars = /^[\\],:{}\\s]*$/;\nconst _rvalidescape = /\\\\(?:[\"\\\\\\/bfnrt]|u[0-9a-fA-F]{4})/g;\nconst _rvalidtokens = /\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g;\nconst _rvalidbraces = /(?:^|:|,)(?:\\s*\\[)+/g;\n\n/// Helper functions\n\n// Convert a map to an object\nexport function _map2object(obj)\n{\n\tif (_ismap(obj))\n\t{\n\t\tlet newobj = {};\n\t\tfor (let [key, value] of obj)\n\t\t{\n\t\t\tif (typeof(key) !== \"string\")\n\t\t\t\tthrow new TypeError(\"keys must be strings\");\n\t\t\tnewobj[key] = value;\n\t\t}\n\t\treturn newobj;\n\t}\n\treturn obj;\n};\n\n// Clip a number to the range [0;max]\nexport function _bound(value, upper)\n{\n\tif (value < 0)\n\t\treturn 0;\n\telse if (value > upper)\n\t\treturn upper;\n\telse\n\t\treturn value;\n};\n\n// Create a pretty stacktrace from an exception\nexport function _stacktrace(exc)\n{\n\tlet output = (exc instanceof Exception ? exc.constructor.name + \": \" : \"\") + exc.toString();\n\tif (exc.context)\n\t\toutput = _stacktrace(exc.context) + \"\\n\\n\" + output;\n\treturn output;\n};\n\n// Call a function ``f`` with UL4 argument handling\nexport function _internal_call(context, f, name, functioncontext, signature, needscontext, needsobject, args, kwargs)\n{\n\tlet finalargs;\n\tif (needsobject)\n\t{\n\t\tif (signature === null)\n\t\t{\n\t\t\tif (args.length)\n\t\t\t\tthrow new ArgumentError(_repr(f) + \" doesn't support positional arguments!\");\n\t\t\tfinalargs = [kwargs];\n\t\t}\n\t\telse\n\t\t\tfinalargs = [signature.bindObject(name, args, kwargs)];\n\t}\n\telse\n\t{\n\t\tif (signature === null)\n\t\t\tthrow new ArgumentError(_repr(f) + \" doesn't support positional arguments!\");\n\t\tfinalargs = signature.bindArray(name, args, kwargs);\n\t}\n\tif (needscontext)\n\t\tfinalargs.unshift(context);\n\treturn f.apply(functioncontext, finalargs);\n};\n\nexport function _callfunction(context, f, args, kwargs)\n{\n\tlet name = f._ul4_name || f.name;\n\tif (f._ul4_signature === undefined || f._ul4_needsobject === undefined || f._ul4_needscontext === undefined)\n\t\tthrow new TypeError(_repr(f) + \" is not callable by UL4\");\n\treturn _internal_call(context, f, name, null, f._ul4_signature, f._ul4_needscontext, f._ul4_needsobject, args, kwargs);\n};\n\nexport function _callobject(context, obj, args, kwargs)\n{\n\tif (obj._ul4_signature === undefined || obj._ul4_needsobject === undefined || obj._ul4_needscontext === undefined)\n\t\tthrow new TypeError(_repr(obj) + \" is not callable by UL4\");\n\treturn _internal_call(context, obj[symbols.call], obj.name, obj, obj._ul4_signature, obj._ul4_needscontext, obj._ul4_needsobject, args, kwargs);\n};\n\nexport function _callrender(context, obj, args, kwargs)\n{\n\tif (obj._ul4_signature === undefined || obj._ul4_needsobject === undefined || obj._ul4_needscontext === undefined)\n\t\tthrow new TypeError(_repr(obj) + \" is not renderable by UL4\");\n\treturn _internal_call(context, obj[symbols.render], obj.name, obj, obj._ul4_signature, obj._ul4_needscontext, obj._ul4_needsobject, args, kwargs);\n};\n\nexport function _call(context, f, args, kwargs)\n{\n\tif (typeof(f) === \"function\")\n\t\treturn _callfunction(context, f, args, kwargs);\n\telse if (f && typeof(f[symbols.call]) === \"function\")\n\t\treturn _callobject(context, f, args, kwargs);\n\telse\n\t\tthrow new TypeError(_type(f).fullname() + \" is not callable\");\n};\n\nexport function _unpackvar(lvalue, value)\n{\n\tif (!_islist(lvalue))\n\t\treturn [[lvalue, value]];\n\telse\n\t{\n\t\tlet newvalue = [];\n\t\tlet iter = _iter(value);\n\n\t\tfor (let i = 0;;++i)\n\t\t{\n\t\t\tlet item = iter.next();\n\n\t\t\tif (item.done)\n\t\t\t{\n\t\t\t\tif (i === lvalue.length)\n\t\t\t\t\tbreak;\n\t\t\t\telse\n\t\t\t\t\tthrow new ValueError(\"need \" + lvalue.length + \" value\" + (lvalue.length === 1 ? \"\" : \"s\") + \" to unpack, got \" + i);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (i < lvalue.length)\n\t\t\t\t\tnewvalue = newvalue.concat(_unpackvar(lvalue[i], item.value));\n\t\t\t\telse\n\t\t\t\t\tthrow new ValueError(\"too many values to unpack (expected \" + lvalue.length + \")\");\n\t\t\t}\n\t\t}\n\t\treturn newvalue;\n\t}\n};\n\nexport function _formatsource(out)\n{\n\tlet finalout = [];\n\tlet level = 0, needlf = false;\n\tfor (let part of out)\n\t{\n\t\tif (typeof(part) === \"number\")\n\t\t{\n\t\t\tlevel += part;\n\t\t\tneedlf = true;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (needlf)\n\t\t\t{\n\t\t\t\tfinalout.push(\"\\n\");\n\t\t\t\tfor (let j = 0; j < level; ++j)\n\t\t\t\t\tfinalout.push(\"\\t\");\n\t\t\t\tneedlf = false;\n\t\t\t}\n\t\t\tfinalout.push(part);\n\t\t}\n\t}\n\tif (needlf)\n\t\tfinalout.push(\"\\n\");\n\treturn finalout.join(\"\");\n};\n\n// Return a prefix of a location in source code\nfunction _sourceprefix(source, pos)\n{\n\tlet outerstartpos = pos;\n\tlet innerstartpos = outerstartpos;\n\n\tlet maxprefix = 40;\n\tlet preprefix = \"\\u2026\";\n\twhile (maxprefix > 0)\n\t{\n\t\t// We arrived at the start of the source code\n\t\tif (outerstartpos === 0)\n\t\t{\n\t\t\tpreprefix = \"\";\n\t\t\tbreak;\n\t\t}\n\t\t// We arrived at the start of the line\n\t\tif (source.charAt(outerstartpos-1) === \"\\n\")\n\t\t{\n\t\t\tpreprefix = \"\";\n\t\t\tbreak;\n\t\t}\n\t\t--maxprefix;\n\t\t--outerstartpos;\n\t}\n\treturn preprefix + source.substring(outerstartpos, innerstartpos);\n}\n\n// Return a suffix of a location in source code\nfunction _sourcesuffix(source, pos)\n{\n\tlet outerstoppos = pos;\n\tlet innerstoppos = outerstoppos;\n\n\tlet maxsuffix = 40;\n\tlet postsuffix = \"\\u2026\";\n\twhile (maxsuffix > 0)\n\t{\n\t\t// We arrived at the ed of the source code\n\t\tif (outerstoppos >= source.length)\n\t\t{\n\t\t\tpostsuffix = \"\";\n\t\t\tbreak;\n\t\t}\n\t\t// We arrived at the end of the line\n\t\tif (source.charAt(outerstoppos) === \"\\n\")\n\t\t{\n\t\t\tpostsuffix = \"\";\n\t\t\tbreak;\n\t\t}\n\t\t--maxsuffix;\n\t\t++outerstoppos;\n\t}\n\treturn source.substring(innerstoppos, outerstoppos) + postsuffix;\n}\n\n// Return line and column number of a location in source code\nfunction _lineColFromPos(source, pos)\n{\n\tlet line = 1\n\tlet col = 1;\n\tlet stop = pos;\n\tfor (let i = 0; i < stop; ++i)\n\t{\n\t\tif (source[i] === \"\\n\")\n\t\t{\n\t\t\t++line;\n\t\t\tcol = 1;\n\t\t}\n\t\telse\n\t\t\t++col;\n\t}\n\treturn [line, col];\n}\n\n// Compare ``obj1`` and ``obj2`` if they have the same value\nexport function _eq(obj1, obj2)\n{\n\tlet numbertypes = [\"boolean\", \"number\"];\n\n\tif (obj1 && typeof(obj1[symbols.eq]) === \"function\")\n\t\treturn obj1[symbols.eq](obj2);\n\telse if (obj2 && typeof(obj2[symbols.eq]) === \"function\")\n\t\treturn obj2[symbols.eq](obj1);\n\telse if (obj1 === null)\n\t\treturn obj2 === null;\n\telse if (numbertypes.indexOf(typeof(obj1)) != -1)\n\t{\n\t\tif (numbertypes.indexOf(typeof(obj2)) != -1)\n\t\t\treturn obj1 == obj2;\n\t\telse\n\t\t\treturn false;\n\t}\n\telse if (typeof(obj1) === \"string\")\n\t{\n\t\tif (typeof(obj2) === \"string\")\n\t\t\treturn obj1 == obj2;\n\t\telse\n\t\t\treturn false;\n\t}\n\telse if (_isdatetime(obj1))\n\t{\n\t\tif (_isdatetime(obj2))\n\t\t\treturn obj1.getTime() == obj2.getTime();\n\t\telse\n\t\t\treturn false;\n\t}\n\telse if (_islist(obj1))\n\t{\n\t\tif (_islist(obj2))\n\t\t{\n\t\t\t// Shortcut, if it's the same object\n\t\t\tif (obj1 === obj2)\n\t\t\t\treturn true;\n\t\t\tif (obj1.length != obj2.length)\n\t\t\t\treturn false;\n\t\t\tfor (let i = 0; i < obj1.length; ++i)\n\t\t\t{\n\t\t\t\tif (!_eq(obj1[i], obj2[i])) // This might lead to infinite recursion and a stackoverflow, but it does in all implementations\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\telse\n\t\t\treturn false;\n\t}\n\telse if (_isobject(obj1))\n\t{\n\t\tif (_isobject(obj2))\n\t\t{\n\t\t\t// Shortcut, if it's the same object\n\t\t\tif (obj1 === obj2)\n\t\t\t\treturn true;\n\t\t\t// Test that each attribute of ``obj1`` can also be found in ``obj2`` and has the same value\n\t\t\tfor (let key in obj1)\n\t\t\t{\n\t\t\t\tif (obj2.hasOwnProperty(key))\n\t\t\t\t{\n\t\t\t\t\tif (!_eq(obj1[key], obj2[key]))\n\t\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t\t// Test that each attribute of ``obj2`` is also in ``obj1`` (the value has been tested before)\n\t\t\tfor (let key in obj2)\n\t\t\t{\n\t\t\t\tif (!obj1.hasOwnProperty(key))\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\telse if (_ismap(obj2))\n\t\t{\n\t\t\t// Test that each attribute of ``obj1`` can also be found in ``obj2`` and has the same value\n\t\t\tfor (let key in obj1)\n\t\t\t{\n\t\t\t\tif (obj2.has(key))\n\t\t\t\t{\n\t\t\t\t\tif (!_eq(obj1[key], obj2.get(key)))\n\t\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t\t// Test that each attribute of ``obj2`` is also in ``obj1`` (the value has been tested before)\n\t\t\tfor (let [ket, value] of obj2)\n\t\t\t{\n\t\t\t\tif (!obj1.hasOwnProperty(key))\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\telse\n\t\t\treturn false;\n\t}\n\telse if (_ismap(obj1))\n\t{\n\t\tif (_isobject(obj2))\n\t\t{\n\t\t\t// Test that each attribute of ``obj1`` can also be found in ``obj2`` and has the same value\n\t\t\tfor (let [key, value] of obj1)\n\t\t\t{\n\t\t\t\tif (!obj2.hasOwnProperty(key))\n\t\t\t\t\treturn false;\n\t\t\t\telse if (!_eq(obj1.get(key), obj2[key]))\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t\t// Test that each attribute of ``obj2`` is also in ``obj1`` (the value has been tested before)\n\t\t\tfor (let key in obj2)\n\t\t\t{\n\t\t\t\tif (!obj1.has(key))\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\telse if (_ismap(obj2))\n\t\t{\n\t\t\t// Shortcut, if it's the same object\n\t\t\tif (obj1 === obj2)\n\t\t\t\treturn true;\n\t\t\tif (obj1.size != obj2.size)\n\t\t\t\treturn false;\n\t\t\tlet result = true;\n\t\t\t// Test that each attribute of ``obj1`` can also be found in ``obj2`` and has the same value\n\t\t\tfor (let [key, value] of obj1)\n\t\t\t{\n\t\t\t\tif (!obj2.has(key))\n\t\t\t\t\tresult = false;\n\t\t\t\telse if (!_eq(obj1.get(key), obj2.get(key)))\n\t\t\t\t\tresult = false;\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\t\telse\n\t\t\treturn false;\n\t}\n\telse if (_isset(obj1))\n\t{\n\t\tif (_isset(obj2))\n\t\t{\n\t\t\t// Shortcut, if it's the same object\n\t\t\tif (obj1 === obj2)\n\t\t\t\treturn true;\n\t\t\tif (obj1.size != obj2.size)\n\t\t\t\treturn false;\n\t\t\tlet result = true;\n\t\t\tfor (let value of obj1)\n\t\t\t{\n\t\t\t\tif (!obj2.has(value))\n\t\t\t\t\tresult = false;\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\t\telse\n\t\t\treturn false;\n\t}\n\telse\n\t\treturn obj1 === obj2;\n};\n\n// Compare ``obj1`` and ``obj2`` if they don't have the same value\nexport function _ne(obj1, obj2)\n{\n\tif (obj1 && typeof(obj1[symbols.ne]) === \"function\")\n\t\treturn obj1[symbols.ne](obj2);\n\telse if (obj2 && typeof(obj2[symbols.ne]) === \"function\")\n\t\treturn obj2[symbols.ne](obj1);\n\telse\n\t\treturn !_eq(obj1, obj2);\n};\n\nexport function _unorderable(operator, obj1, obj2)\n{\n\tthrow new TypeError(\"unorderable types: \" + _type(obj1).fullname() + \" \" + operator + \" \" + _type(obj2).fullname());\n};\n\n// Return:\n// -1 when ``obj1 < obj2``,\n//  0 when ``obj1 == obj2``,\n//  1 when ``obj1 > obj2``,\n//  null when ``obj1`` and ``obj2`` are comparable, but neither of the previous cases holds (only for sets)\n// raise TypeError if objects are uncomparable\n// This the purpose of ``_cmp`` is to support implementation of <, <=, > and >=\n// and dicts/maps are not comparable with the operator ``_cmp`` does not support dicts/maps\n\nexport function _cmp(operator, obj1, obj2)\n{\n\tlet numbertypes = [\"boolean\", \"number\"];\n\n\tif (numbertypes.indexOf(typeof(obj1)) != -1)\n\t{\n\t\tif (numbertypes.indexOf(typeof(obj2)) != -1)\n\t\t\treturn (obj1 > obj2) - (obj1 < obj2);\n\t}\n\telse if (typeof(obj1) === \"string\")\n\t{\n\t\tif (typeof(obj2) === \"string\")\n\t\t\treturn (obj1 > obj2) - (obj1 < obj2);\n\t}\n\telse if (_isdatetime(obj1))\n\t{\n\t\tif (_isdatetime(obj2))\n\t\t{\n\t\t\tlet v1 = obj1.getTime(), v2 = obj2.getTime();\n\t\t\treturn (v1 > v2) - (v1 < v2);\n\t\t}\n\t}\n\telse if (_islist(obj1))\n\t{\n\t\tif (_islist(obj2))\n\t\t{\n\t\t\tif (obj1 === obj2)\n\t\t\t\treturn 0;\n\t\t\tfor (let i = 0; i < obj1.length; ++i)\n\t\t\t{\n\t\t\t\tif (i >= obj2.length)\n\t\t\t\t\treturn 1;\n\t\t\t\tlet res = _cmp(operator, obj1[i], obj2[i]);\n\t\t\t\tif (res)\n\t\t\t\t\treturn res;\n\t\t\t}\n\t\t\treturn obj2.length > obj1.length ? -1 : 0;\n\t\t}\n\t}\n\telse if (_isset(obj1))\n\t{\n\t\tif (_isset(obj2))\n\t\t{\n\t\t\tlet in1only = false;\n\t\t\tlet in2only = false;\n\n\t\t\tfor (let iter = _iter(obj1);;)\n\t\t\t{\n\t\t\t\tlet item = iter.next();\n\t\t\t\tif (item.done)\n\t\t\t\t\tbreak;\n\t\t\t\tif (!obj2.has(item.value))\n\t\t\t\t{\n\t\t\t\t\tin1only = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (let iter = _iter(obj2);;)\n\t\t\t{\n\t\t\t\tlet item = iter.next();\n\t\t\t\tif (item.done)\n\t\t\t\t\tbreak;\n\t\t\t\tif (!obj1.has(item.value))\n\t\t\t\t{\n\t\t\t\t\tin2only = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (in1only)\n\t\t\t{\n\t\t\t\tif (in2only)\n\t\t\t\t\treturn null;\n\t\t\t\telse\n\t\t\t\t\treturn 1;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (in2only)\n\t\t\t\t\treturn -1;\n\t\t\t\telse\n\t\t\t\t\treturn 0;\n\t\t\t}\n\t\t}\n\t}\n\treturn _unorderable(operator, obj1, obj2);\n};\n\n// Return whether ``obj1 < obj2``\nexport function _lt(obj1, obj2)\n{\n\tlet numbertypes = [\"boolean\", \"number\"];\n\n\tif (obj1 && typeof(obj1[symbols.lt]) === \"function\")\n\t\treturn obj1[symbols.lt](obj2);\n\telse if (numbertypes.indexOf(typeof(obj1)) != -1)\n\t{\n\t\tif (numbertypes.indexOf(typeof(obj2)) != -1)\n\t\t\treturn obj1 < obj2;\n\t}\n\telse if (typeof(obj1) === \"string\")\n\t{\n\t\tif (typeof(obj2) === \"string\")\n\t\t\treturn obj1 < obj2;\n\t}\n\telse if (_isdatetime(obj1))\n\t{\n\t\tif (_isdatetime(obj2))\n\t\t\treturn obj1.getTime() < obj2.getTime();\n\t}\n\telse if (_islist(obj1))\n\t{\n\t\tif (_islist(obj2))\n\t\t{\n\t\t\tif (obj1 === obj2)\n\t\t\t\treturn false;\n\t\t\tfor (let i = 0; i < obj1.length; ++i)\n\t\t\t{\n\t\t\t\tif (i >= obj2.length)\n\t\t\t\t\treturn false;\n\t\t\t\tlet eq = _eq(obj1[i], obj2[i]);\n\t\t\t\tif (!eq)\n\t\t\t\t\treturn _lt(obj1[i], obj2[i]);\n\t\t\t}\n\t\t\treturn obj1.length < obj2.length;\n\t\t}\n\t}\n\t// FIXME: Set comparison\n\telse if (_isset(obj1))\n\t{\n\t\tif (_isset(obj2))\n\t\t{\n\t\t\tfor (let key in obj1)\n\t\t\t{\n\t\t\t\tif (!obj2.has(obj1[key]))\n\t\t\t\t\tin1only = true;\n\t\t\t}\n\t\t\tfor (let key in obj2)\n\t\t\t{\n\t\t\t\tif (!obj1.has(obj2[key]))\n\t\t\t\t\tin2only = true;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\t_unorderable(operator, obj1, obj2);\n\n\t\tif (in1only)\n\t\t{\n\t\t\tif (in2only)\n\t\t\t\treturn null;\n\t\t\telse\n\t\t\t\treturn 1;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (in2only)\n\t\t\t\treturn -1;\n\t\t\telse\n\t\t\t\treturn 0;\n\t\t}\n\t}\n\t_unorderable(\"<\", obj1, obj2);\n};\n\n// Return whether ``obj1 <= obj2``\nexport function _le(obj1, obj2)\n{\n\tlet numbertypes = [\"boolean\", \"number\"];\n\n\tif (obj1 && typeof(obj1[symbols.le]) === \"function\")\n\t\treturn obj1[symbols.le](obj2);\n\tif (numbertypes.indexOf(typeof(obj1)) != -1)\n\t{\n\t\tif (numbertypes.indexOf(typeof(obj2)) != -1)\n\t\t\treturn obj1 <= obj2;\n\t}\n\telse if (typeof(obj1) === \"string\")\n\t{\n\t\tif (typeof(obj2) === \"string\")\n\t\t\treturn obj1 <= obj2;\n\t}\n\telse if (_isdatetime(obj1))\n\t{\n\t\tif (_isdatetime(obj2))\n\t\t\treturn obj1.getTime() <= obj2.getTime();\n\t}\n\telse if (_islist(obj1))\n\t{\n\t\tif (_islist(obj2))\n\t\t{\n\t\t\tif (obj1 === obj2)\n\t\t\t\treturn true;\n\t\t\tfor (let i = 0; i < obj1.length; ++i)\n\t\t\t{\n\t\t\t\tif (i >= obj2.length)\n\t\t\t\t\treturn false;\n\t\t\t\tlet eq = _eq(obj1[i], obj2[i]);\n\t\t\t\tif (!eq)\n\t\t\t\t\treturn _lt(obj1[i], obj2[i]);\n\t\t\t}\n\t\t\treturn obj1.length <= obj2.length;\n\t\t}\n\t}\n\t// FIXME: Set comparison\n\telse if (_isset(obj1))\n\t{\n\t\tlet in1only = false;\n\t\tlet in2only = false;\n\n\t\tif (_isset(obj2))\n\t\t{\n\t\t\tif (_isset(obj2))\n\t\t\t{\n\t\t\t\tfor (let value of obj1)\n\t\t\t\t{\n\t\t\t\t\tif (!obj2.has(value))\n\t\t\t\t\t\tin1only = true;\n\t\t\t\t}\n\t\t\t\tfor (let value of obj2)\n\t\t\t\t{\n\t\t\t\t\tif (!obj1.has(value))\n\t\t\t\t\t\tin2only = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t\t_unorderable(operator, obj1, obj2);\n\t\t}\n\t\telse\n\t\t\t_unorderable(operator, obj1, obj2);\n\n\t\tif (in1only)\n\t\t{\n\t\t\tif (in2only)\n\t\t\t\treturn null;\n\t\t\telse\n\t\t\t\treturn 1;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (in2only)\n\t\t\t\treturn -1;\n\t\t\telse\n\t\t\t\treturn 0;\n\t\t}\n\t}\n\t_unorderable(\"<=\", obj1, obj2);\n};\n\n// Return whether ``obj1 > obj2``\nexport function _gt(obj1, obj2)\n{\n\tlet numbertypes = [\"boolean\", \"number\"];\n\n\tif (obj1 && typeof(obj1[symbols.gt]) === \"function\")\n\t\treturn obj1[symbols.gt](obj2);\n\tif (numbertypes.indexOf(typeof(obj1)) != -1)\n\t{\n\t\tif (numbertypes.indexOf(typeof(obj2)) != -1)\n\t\t\treturn obj1 > obj2;\n\t}\n\telse if (typeof(obj1) === \"string\")\n\t{\n\t\tif (typeof(obj2) === \"string\")\n\t\t\treturn obj1 > obj2;\n\t}\n\telse if (_isdatetime(obj1))\n\t{\n\t\tif (_isdatetime(obj2))\n\t\t\treturn obj1.getTime() > obj2.getTime();\n\t}\n\telse if (_islist(obj1))\n\t{\n\t\tif (_islist(obj2))\n\t\t{\n\t\t\tif (obj1 === obj2)\n\t\t\t\treturn false;\n\t\t\tfor (let i = 0; i < obj1.length; ++i)\n\t\t\t{\n\t\t\t\tif (i >= obj2.length)\n\t\t\t\t\treturn true;\n\t\t\t\tlet eq = _eq(obj1[i], obj2[i]);\n\t\t\t\tif (!eq)\n\t\t\t\t\treturn _gt(obj1[i], obj2[i]);\n\t\t\t}\n\t\t\treturn obj1.length > obj2.length;\n\t\t}\n\t}\n\t// FIXME: Set comparison\n\telse if (_isset(obj1))\n\t{\n\t\tlet in1only = false;\n\t\tlet in2only = false;\n\n\t\tif (_isset(obj2))\n\t\t{\n\t\t\tif (_isset(obj2))\n\t\t\t{\n\t\t\t\tfor (let value of obj1)\n\t\t\t\t{\n\t\t\t\t\tif (!obj2.has(value))\n\t\t\t\t\t\tin1only = true;\n\t\t\t\t}\n\t\t\t\tfor (let value of obj2)\n\t\t\t\t{\n\t\t\t\t\tif (!obj1.has(value))\n\t\t\t\t\t\tin2only = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t\t_unorderable(operator, obj1, obj2);\n\t\t}\n\t\telse\n\t\t\t_unorderable(operator, obj1, obj2);\n\n\t\tif (in1only)\n\t\t{\n\t\t\tif (in2only)\n\t\t\t\treturn null;\n\t\t\telse\n\t\t\t\treturn 1;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (in2only)\n\t\t\t\treturn -1;\n\t\t\telse\n\t\t\t\treturn 0;\n\t\t}\n\t}\n\t_unorderable(\">\", obj1, obj2);\n};\n\n// Return whether ``obj1 >= obj2``\nexport function _ge(obj1, obj2)\n{\n\tlet numbertypes = [\"boolean\", \"number\"];\n\n\tif (obj1 && typeof(obj1[symbols.ge]) === \"function\")\n\t\treturn obj1[symbols.ge](obj2);\n\telse if (numbertypes.indexOf(typeof(obj1)) != -1)\n\t{\n\t\tif (numbertypes.indexOf(typeof(obj2)) != -1)\n\t\t\treturn obj1 >= obj2;\n\t}\n\telse if (typeof(obj1) === \"string\")\n\t{\n\t\tif (typeof(obj2) === \"string\")\n\t\t\treturn obj1 >= obj2;\n\t}\n\telse if (_isdatetime(obj1))\n\t{\n\t\tif (_isdatetime(obj2))\n\t\t\treturn obj1.getTime() >= obj2.getTime();\n\t}\n\telse if (_islist(obj1))\n\t{\n\t\tif (_islist(obj2))\n\t\t{\n\t\t\tif (obj1 === obj2)\n\t\t\t\treturn true;\n\t\t\tfor (let i = 0; i < obj1.length; ++i)\n\t\t\t{\n\t\t\t\tif (i >= obj2.length)\n\t\t\t\t\treturn true;\n\t\t\t\tlet eq = _eq(obj1[i], obj2[i]);\n\t\t\t\tif (!eq)\n\t\t\t\t\treturn _gt(obj1[i], obj2[i]);\n\t\t\t}\n\t\t\treturn obj1.length >= obj2.length;\n\t\t}\n\t}\n\t// FIXME: Set comparison\n\telse if (_isset(obj1))\n\t{\n\t\tlet in1only = false;\n\t\tlet in2only = false;\n\n\t\tif (_isset(obj2))\n\t\t{\n\t\t\tif (_isset(obj2))\n\t\t\t{\n\t\t\t\tfor (let value of obj1)\n\t\t\t\t{\n\t\t\t\t\tif (!obj2.has(value))\n\t\t\t\t\t\tin1only = true;\n\t\t\t\t}\n\t\t\t\tfor (let value of obj2)\n\t\t\t\t{\n\t\t\t\t\tif (!obj1.has(value))\n\t\t\t\t\t\tin2only = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t\t_unorderable(operator, obj1, obj2);\n\t\t}\n\t\telse\n\t\t\t_unorderable(operator, obj1, obj2);\n\n\t\tif (in1only)\n\t\t{\n\t\t\tif (in2only)\n\t\t\t\treturn null;\n\t\t\telse\n\t\t\t\treturn 1;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (in2only)\n\t\t\t\treturn -1;\n\t\t\telse\n\t\t\t\treturn 0;\n\t\t}\n\t}\n\t_unorderable(\">=\", obj1, obj2);\n};\n\n// Return an iterator for ``obj``\nexport function _iter(obj)\n{\n\tif (typeof(obj) === \"string\" || _islist(obj))\n\t{\n\t\treturn {\n\t\t\tindex: 0,\n\t\t\tnext: function()\n\t\t\t{\n\t\t\t\tif (this.index < obj.length)\n\t\t\t\t\treturn {value: obj[this.index++], done: false};\n\t\t\t\telse\n\t\t\t\t\treturn {done: true};\n\t\t\t}\n\t\t};\n\t}\n\telse if (_isiter(obj))\n\t\treturn obj;\n\telse if (_ismap(obj))\n\t{\n\t\tlet keys = [];\n\t\tfor (let [key, value] of obj)\n\t\t\tkeys.push(key);\n\t\treturn {\n\t\t\tindex: 0,\n\t\t\tnext: function()\n\t\t\t{\n\t\t\t\tif (this.index >= keys.length)\n\t\t\t\t\treturn {done: true};\n\t\t\t\treturn {value: keys[this.index++], done: false};\n\t\t\t}\n\t\t};\n\t}\n\telse if (_isset(obj))\n\t{\n\t\tlet values = [];\n\t\tfor (let item of obj)\n\t\t\tvalues.push(item);\n\t\treturn {\n\t\t\tindex: 0,\n\t\t\tnext: function()\n\t\t\t{\n\t\t\t\tif (this.index >= values.length)\n\t\t\t\t\treturn {done: true};\n\t\t\t\treturn {value: values[this.index++], done: false};\n\t\t\t}\n\t\t};\n\t}\n\telse if (_isobject(obj))\n\t{\n\t\tlet keys = [];\n\t\tfor (let key in obj)\n\t\t\tkeys.push(key);\n\t\treturn {\n\t\t\tindex: 0,\n\t\t\tnext: function()\n\t\t\t{\n\t\t\t\tif (this.index >= keys.length)\n\t\t\t\t\treturn {done: true};\n\t\t\t\treturn {value: keys[this.index++], done: false};\n\t\t\t}\n\t\t};\n\t}\n\t// Check for an iterator implementation last, as otherwise, we'd get an item iterator for maps\n\telse if (obj !== null && typeof(obj[Symbol.iterator]) === \"function\")\n\t\treturn obj[Symbol.iterator]();\n\tthrow new TypeError(_type(obj).fullname() + \" object is not iterable\");\n};\n\nfunction _str_repr(str, ascii)\n{\n\tlet result = \"\";\n\tlet squote = false, dquote = false;\n\n\tfor (let c of str)\n\t{\n\t\tif (c == '\"')\n\t\t{\n\t\t\tdquote = true;\n\t\t\tif (squote)\n\t\t\t\tbreak;\n\t\t}\n\t\telse if (c == \"'\")\n\t\t{\n\t\t\tsquote = true;\n\t\t\tif (dquote)\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t// Prefer single quotes: Only use double quotes if the string contains single quotes, but no double quotes\n\tlet quote = (squote && !dquote) ? '\"' : \"'\";\n\n\tfor (let c of str)\n\t{\n\t\tswitch (c)\n\t\t{\n\t\t\tcase '\"':\n\t\t\t\tresult += (quote == c) ? '\\\\\"' : c;\n\t\t\t\tbreak;\n\t\t\tcase \"'\":\n\t\t\t\tresult += (quote == c) ? \"\\\\'\" : c;\n\t\t\t\tbreak;\n\t\t\tcase \"\\\\\":\n\t\t\t\tresult += \"\\\\\\\\\";\n\t\t\t\tbreak;\n\t\t\tcase \"\\t\":\n\t\t\t\tresult += \"\\\\t\";\n\t\t\t\tbreak;\n\t\t\tcase \"\\n\":\n\t\t\t\tresult += \"\\\\n\";\n\t\t\t\tbreak;\n\t\t\tcase \"\\r\":\n\t\t\t\tresult += \"\\\\r\";\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tlet code = c.charCodeAt(0);\n\t\t\t\tlet escape;\n\t\t\t\tif (code < 32)\n\t\t\t\t\tescape = 2;\n\t\t\t\telse if (code < 0x7f)\n\t\t\t\t\tescape = 0;\n\t\t\t\telse if (!ascii && !/[\\u007f-\\u00a0\\u00ad\\u0378-\\u0379\\u0380-\\u0383\\u038b\\u038d\\u03a2\\u0530\\u0557-\\u0558\\u0560\\u0588\\u058b-\\u058c\\u0590\\u05c8-\\u05cf\\u05eb-\\u05ef\\u05f5-\\u0605\\u061c-\\u061d\\u06dd\\u070e-\\u070f\\u074b-\\u074c\\u07b2-\\u07bf\\u07fb-\\u07ff\\u082e-\\u082f\\u083f\\u085c-\\u085d\\u085f-\\u089f\\u08b5-\\u08e2\\u0984\\u098d-\\u098e\\u0991-\\u0992\\u09a9\\u09b1\\u09b3-\\u09b5\\u09ba-\\u09bb\\u09c5-\\u09c6\\u09c9-\\u09ca\\u09cf-\\u09d6\\u09d8-\\u09db\\u09de\\u09e4-\\u09e5\\u09fc-\\u0a00\\u0a04\\u0a0b-\\u0a0e\\u0a11-\\u0a12\\u0a29\\u0a31\\u0a34\\u0a37\\u0a3a-\\u0a3b\\u0a3d\\u0a43-\\u0a46\\u0a49-\\u0a4a\\u0a4e-\\u0a50\\u0a52-\\u0a58\\u0a5d\\u0a5f-\\u0a65\\u0a76-\\u0a80\\u0a84\\u0a8e\\u0a92\\u0aa9\\u0ab1\\u0ab4\\u0aba-\\u0abb\\u0ac6\\u0aca\\u0ace-\\u0acf\\u0ad1-\\u0adf\\u0ae4-\\u0ae5\\u0af2-\\u0af8\\u0afa-\\u0b00\\u0b04\\u0b0d-\\u0b0e\\u0b11-\\u0b12\\u0b29\\u0b31\\u0b34\\u0b3a-\\u0b3b\\u0b45-\\u0b46\\u0b49-\\u0b4a\\u0b4e-\\u0b55\\u0b58-\\u0b5b\\u0b5e\\u0b64-\\u0b65\\u0b78-\\u0b81\\u0b84\\u0b8b-\\u0b8d\\u0b91\\u0b96-\\u0b98\\u0b9b\\u0b9d\\u0ba0-\\u0ba2\\u0ba5-\\u0ba7\\u0bab-\\u0bad\\u0bba-\\u0bbd\\u0bc3-\\u0bc5\\u0bc9\\u0bce-\\u0bcf\\u0bd1-\\u0bd6\\u0bd8-\\u0be5\\u0bfb-\\u0bff\\u0c04\\u0c0d\\u0c11\\u0c29\\u0c3a-\\u0c3c\\u0c45\\u0c49\\u0c4e-\\u0c54\\u0c57\\u0c5b-\\u0c5f\\u0c64-\\u0c65\\u0c70-\\u0c77\\u0c80\\u0c84\\u0c8d\\u0c91\\u0ca9\\u0cb4\\u0cba-\\u0cbb\\u0cc5\\u0cc9\\u0cce-\\u0cd4\\u0cd7-\\u0cdd\\u0cdf\\u0ce4-\\u0ce5\\u0cf0\\u0cf3-\\u0d00\\u0d04\\u0d0d\\u0d11\\u0d3b-\\u0d3c\\u0d45\\u0d49\\u0d4f-\\u0d56\\u0d58-\\u0d5e\\u0d64-\\u0d65\\u0d76-\\u0d78\\u0d80-\\u0d81\\u0d84\\u0d97-\\u0d99\\u0db2\\u0dbc\\u0dbe-\\u0dbf\\u0dc7-\\u0dc9\\u0dcb-\\u0dce\\u0dd5\\u0dd7\\u0de0-\\u0de5\\u0df0-\\u0df1\\u0df5-\\u0e00\\u0e3b-\\u0e3e\\u0e5c-\\u0e80\\u0e83\\u0e85-\\u0e86\\u0e89\\u0e8b-\\u0e8c\\u0e8e-\\u0e93\\u0e98\\u0ea0\\u0ea4\\u0ea6\\u0ea8-\\u0ea9\\u0eac\\u0eba\\u0ebe-\\u0ebf\\u0ec5\\u0ec7\\u0ece-\\u0ecf\\u0eda-\\u0edb\\u0ee0-\\u0eff\\u0f48\\u0f6d-\\u0f70\\u0f98\\u0fbd\\u0fcd\\u0fdb-\\u0fff\\u10c6\\u10c8-\\u10cc\\u10ce-\\u10cf\\u1249\\u124e-\\u124f\\u1257\\u1259\\u125e-\\u125f\\u1289\\u128e-\\u128f\\u12b1\\u12b6-\\u12b7\\u12bf\\u12c1\\u12c6-\\u12c7\\u12d7\\u1311\\u1316-\\u1317\\u135b-\\u135c\\u137d-\\u137f\\u139a-\\u139f\\u13f6-\\u13f7\\u13fe-\\u13ff\\u1680\\u169d-\\u169f\\u16f9-\\u16ff\\u170d\\u1715-\\u171f\\u1737-\\u173f\\u1754-\\u175f\\u176d\\u1771\\u1774-\\u177f\\u17de-\\u17df\\u17ea-\\u17ef\\u17fa-\\u17ff\\u180e-\\u180f\\u181a-\\u181f\\u1878-\\u187f\\u18ab-\\u18af\\u18f6-\\u18ff\\u191f\\u192c-\\u192f\\u193c-\\u193f\\u1941-\\u1943\\u196e-\\u196f\\u1975-\\u197f\\u19ac-\\u19af\\u19ca-\\u19cf\\u19db-\\u19dd\\u1a1c-\\u1a1d\\u1a5f\\u1a7d-\\u1a7e\\u1a8a-\\u1a8f\\u1a9a-\\u1a9f\\u1aae-\\u1aaf\\u1abf-\\u1aff\\u1b4c-\\u1b4f\\u1b7d-\\u1b7f\\u1bf4-\\u1bfb\\u1c38-\\u1c3a\\u1c4a-\\u1c4c\\u1c80-\\u1cbf\\u1cc8-\\u1ccf\\u1cf7\\u1cfa-\\u1cff\\u1df6-\\u1dfb\\u1f16-\\u1f17\\u1f1e-\\u1f1f\\u1f46-\\u1f47\\u1f4e-\\u1f4f\\u1f58\\u1f5a\\u1f5c\\u1f5e\\u1f7e-\\u1f7f\\u1fb5\\u1fc5\\u1fd4-\\u1fd5\\u1fdc\\u1ff0-\\u1ff1\\u1ff5\\u1fff-\\u200f\\u2028-\\u202f\\u205f-\\u206f\\u2072-\\u2073\\u208f\\u209d-\\u209f\\u20bf-\\u20cf\\u20f1-\\u20ff\\u218c-\\u218f\\u23fb-\\u23ff\\u2427-\\u243f\\u244b-\\u245f\\u2b74-\\u2b75\\u2b96-\\u2b97\\u2bba-\\u2bbc\\u2bc9\\u2bd2-\\u2beb\\u2bf0-\\u2bff\\u2c2f\\u2c5f\\u2cf4-\\u2cf8\\u2d26\\u2d28-\\u2d2c\\u2d2e-\\u2d2f\\u2d68-\\u2d6e\\u2d71-\\u2d7e\\u2d97-\\u2d9f\\u2da7\\u2daf\\u2db7\\u2dbf\\u2dc7\\u2dcf\\u2dd7\\u2ddf\\u2e43-\\u2e7f\\u2e9a\\u2ef4-\\u2eff\\u2fd6-\\u2fef\\u2ffc-\\u3000\\u3040\\u3097-\\u3098\\u3100-\\u3104\\u312e-\\u3130\\u318f\\u31bb-\\u31bf\\u31e4-\\u31ef\\u321f\\u32ff\\u4db6-\\u4dbf\\u9fd6-\\u9fff\\ua48d-\\ua48f\\ua4c7-\\ua4cf\\ua62c-\\ua63f\\ua6f8-\\ua6ff\\ua7ae-\\ua7af\\ua7b8-\\ua7f6\\ua82c-\\ua82f\\ua83a-\\ua83f\\ua878-\\ua87f\\ua8c5-\\ua8cd\\ua8da-\\ua8df\\ua8fe-\\ua8ff\\ua954-\\ua95e\\ua97d-\\ua97f\\ua9ce\\ua9da-\\ua9dd\\ua9ff\\uaa37-\\uaa3f\\uaa4e-\\uaa4f\\uaa5a-\\uaa5b\\uaac3-\\uaada\\uaaf7-\\uab00\\uab07-\\uab08\\uab0f-\\uab10\\uab17-\\uab1f\\uab27\\uab2f\\uab66-\\uab6f\\uabee-\\uabef\\uabfa-\\uabff\\ud7a4-\\ud7af\\ud7c7-\\ud7ca\\ud7fc-\\uf8ff\\ufa6e-\\ufa6f\\ufada-\\ufaff\\ufb07-\\ufb12\\ufb18-\\ufb1c\\ufb37\\ufb3d\\ufb3f\\ufb42\\ufb45\\ufbc2-\\ufbd2\\ufd40-\\ufd4f\\ufd90-\\ufd91\\ufdc8-\\ufdef\\ufdfe-\\ufdff\\ufe1a-\\ufe1f\\ufe53\\ufe67\\ufe6c-\\ufe6f\\ufe75\\ufefd-\\uff00\\uffbf-\\uffc1\\uffc8-\\uffc9\\uffd0-\\uffd1\\uffd8-\\uffd9\\uffdd-\\uffdf\\uffe7\\uffef-\\ufffb\\ufffe-\\uffff]/.test(c))\n\t\t\t\t\tescape = 0;\n\t\t\t\telse if (code <= 0xff)\n\t\t\t\t\tescape = 2;\n\t\t\t\telse if (code <= 0xffff)\n\t\t\t\t\tescape = 4;\n\t\t\t\telse\n\t\t\t\t\tescape = 8;\n\n\t\t\t\tif (escape === 0)\n\t\t\t\t\tresult += c;\n\t\t\t\telse if (escape === 2)\n\t\t\t\t\tresult += \"\\\\x\" + _lpad(code.toString(16), \"0\", 2);\n\t\t\t\telse if (escape === 4)\n\t\t\t\t\tresult += \"\\\\u\" + _lpad(code.toString(16), \"0\", 4);\n\t\t\t\telse\n\t\t\t\t\tresult += \"\\\\U\" + _lpad(code.toString(16), \"0\", 8);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\treturn quote + result + quote;\n};\n\nfunction _date_repr(obj, ascii)\n{\n\tlet year = obj._date.getFullYear();\n\tlet month = obj._date.getMonth()+1;\n\tlet day = obj._date.getDate();\n\tlet result = \"@(\" + year + \"-\" + _lpad(month.toString(), \"0\", 2) + \"-\" + _lpad(day.toString(), \"0\", 2) + \")\";\n\treturn result;\n};\n\nfunction _datetime_repr(obj, ascii)\n{\n\tlet year = obj.getFullYear();\n\tlet month = obj.getMonth()+1;\n\tlet day = obj.getDate();\n\tlet hour = obj.getHours();\n\tlet minute = obj.getMinutes();\n\tlet second = obj.getSeconds();\n\tlet ms = obj.getMilliseconds();\n\tlet result = \"@(\" + year + \"-\" + _lpad(month.toString(), \"0\", 2) + \"-\" + _lpad(day.toString(), \"0\", 2) + \"T\";\n\n\tif (hour || minute || second || ms)\n\t{\n\t\tresult += _lpad(hour.toString(), \"0\", 2) + \":\" + _lpad(minute.toString(), \"0\", 2);\n\t\tif (second || ms)\n\t\t{\n\t\t\tresult += \":\" + _lpad(second.toString(), \"0\", 2);\n\t\t\tif (ms)\n\t\t\t\tresult += \".\" + _lpad(ms.toString(), \"0\", 3) + \"000\";\n\t\t}\n\t}\n\tresult += \")\";\n\n\treturn result;\n};\n\nfunction _map_repr(obj, ascii)\n{\n\tlet v = [];\n\tv.push(\"{\");\n\n\tlet i = 0;\n\tfor (let [key, value] of obj)\n\t{\n\t\tif (i++)\n\t\t\tv.push(\", \");\n\t\tv.push(_repr_internal(key, ascii));\n\t\tv.push(\": \");\n\t\tv.push(_repr_internal(value, ascii));\n\t}\n\n\tv.push(\"}\");\n\treturn v.join(\"\");\n};\n\nfunction _list_repr(obj, ascii)\n{\n\tlet v = [];\n\tv.push(\"[\");\n\tlet first = true;\n\tfor (let item of obj)\n\t{\n\t\tif (first)\n\t\t\tfirst = false;\n\t\telse\n\t\t\tv.push(\", \");\n\t\tv.push(_repr_internal(item, ascii));\n\t}\n\tv.push(\"]\");\n\treturn v.join(\"\");\n};\n\nfunction _set_repr(obj, ascii)\n{\n\tlet v = [];\n\tv.push(\"{\");\n\tif (!obj.size)\n\t\tv.push(\"/\");\n\telse\n\t{\n\t\tlet i = 0;\n\t\tfor (let value of obj)\n\t\t{\n\t\t\tif (i++)\n\t\t\t\tv.push(\", \");\n\t\t\tv.push(_repr_internal(value, ascii));\n\t\t}\n\t}\n\tv.push(\"}\");\n\treturn v.join(\"\");\n};\n\nfunction _object_repr(obj, ascii)\n{\n\tlet v = [];\n\tv.push(\"{\");\n\tlet i = 0;\n\tfor (let key in obj)\n\t{\n\t\tif (!obj.hasOwnProperty(key))\n\t\t\tcontinue;\n\t\tif (i++)\n\t\t\tv.push(\", \");\n\t\tv.push(_repr_internal(key, ascii));\n\t\tv.push(\": \");\n\t\tv.push(_repr_internal(obj[key], ascii));\n\t}\n\tv.push(\"}\");\n\treturn v.join(\"\");\n};\n\nfunction _repr_internal(obj, ascii)\n{\n\tif (obj === null)\n\t\treturn \"None\";\n\telse if (obj === undefined)\n\t\treturn \"<undefined>\";\n\telse if (obj === false)\n\t\treturn \"False\";\n\telse if (obj === true)\n\t\treturn \"True\";\n\telse if (typeof(obj) === \"string\")\n\t\treturn _str_repr(obj, ascii);\n\telse if (typeof(obj) === \"number\")\n\t\treturn \"\" + obj;\n\telse if (typeof(obj) === \"function\")\n\t\tif (obj._ul4_name || obj.name)\n\t\t\treturn \"<function \" + (obj._ul4_name || obj.name) + \">\";\n\t\telse\n\t\t\treturn \"<anonymous function>\";\n\telse if (_isdate(obj))\n\t\treturn _date_repr(obj, ascii);\n\telse if (_isdatetime(obj))\n\t\treturn _datetime_repr(obj, ascii);\n\telse if (typeof(obj) === \"object\" && typeof(obj[symbols.repr]) === \"function\")\n\t\treturn obj[symbols.repr]();\n\telse if (_islist(obj))\n\t\treturn _list_repr(obj, ascii);\n\telse if (_ismap(obj))\n\t\treturn _map_repr(obj, ascii);\n\telse if (_isset(obj))\n\t\treturn _set_repr(obj, ascii);\n\telse if (_isobject(obj))\n\t\treturn _object_repr(obj, ascii);\n\treturn \"?\";\n};\n\n// Return a string representation of ``obj``: If possible this should be an object literal supported by UL4, otherwise the output should be bracketed with ``<`` and ``>``\nexport function _repr(obj)\n{\n\treturn _repr_internal(obj, false);\n};\n\nexport function _ascii(obj)\n{\n\treturn _repr_internal(obj, true);\n};\n\nfunction _date_str(obj)\n{\n\tlet year = obj._date.getFullYear();\n\tlet month = obj._date.getMonth()+1;\n\tlet day = obj._date.getDate();\n\n\treturn year + \"-\" + _lpad(month.toString(), \"0\", 2) + \"-\" + _lpad(day.toString(), \"0\", 2);\n};\n\nfunction _datetime_str(obj)\n{\n\tlet year = obj.getFullYear();\n\tlet month = obj.getMonth()+1;\n\tlet day = obj.getDate();\n\tlet hour = obj.getHours();\n\tlet minute = obj.getMinutes();\n\tlet second = obj.getSeconds();\n\tlet ms = obj.getMilliseconds();\n\n\tlet result = year + \"-\" + _lpad(month.toString(), \"0\", 2) + \"-\" + _lpad(day.toString(), \"0\", 2) + \" \" + _lpad(hour.toString(), \"0\", 2) + \":\" + _lpad(minute.toString(), \"0\", 2);\n\tif (second || ms)\n\t{\n\t\tresult += \":\" + _lpad(second.toString(), \"0\", 2);\n\t\tif (ms)\n\t\t\tresult += \".\" + _lpad(ms.toString(), \"0\", 3) + \"000\";\n\t}\n\treturn result;\n};\n\n// Convert ``obj`` to a string\nexport function _str(obj=\"\")\n{\n\treturn strtype[symbols.call](obj);\n}\n\n// Convert ``obj`` to bool, according to its \"truth value\"\nexport function _bool(obj)\n{\n\treturn booltype[symbols.call](obj);\n};\n\n// Convert ``obj`` to an integer (if ``base`` is given ``obj`` must be a string and ``base`` is the base for the conversion (default is 10))\nexport function _int(obj=0, base=null)\n{\n\treturn inttype[symbols.call](obj, base);\n};\n\n// Convert ``obj`` to a float\nexport function _float(obj)\n{\n\treturn floattype[symbols.call](obj);\n};\n\n// Convert ``obj`` to a list\nexport function _list(obj)\n{\n\treturn listtype[symbols.call](obj);\n};\n\n// Convert ``obj`` to a set\nexport function _set(obj=[])\n{\n\treturn settype[symbols.call](obj);\n};\n\n// Return the length of ``sequence``\nexport function _len(sequence)\n{\n\tif (typeof(sequence) === \"string\" || _islist(sequence))\n\t\treturn sequence.length;\n\telse if (_ismap(sequence) || _isset(sequence))\n\t\treturn sequence.size;\n\telse if (_isobject(sequence))\n\t{\n\t\tlet i = 0;\n\t\tfor (let key in sequence)\n\t\t\t++i;\n\t\treturn i;\n\t}\n\tthrow new TypeError(\"object of type '\" + _type(sequence).fullname() + \"' has no len()\");\n};\n\nexport let constructors2types = new Map();\n\nfunction _maketype(constructor)\n{\n\tlet type = new GenericType(constructor);\n\tconstructors2types.set(constructor, type);\n\treturn type;\n}\n\nexport function _type(obj)\n{\n\tif (obj === null)\n\t\treturn nonetype;\n\telse if (obj === undefined)\n\t\treturn undefinedtype;\n\telse if (typeof(obj[symbols.type]) === \"function\")\n\t\treturn obj[symbols.type]();\n\telse if (_isbool(obj))\n\t\treturn booltype;\n\telse if (_isint(obj))\n\t\treturn inttype;\n\telse if (_isfloat(obj))\n\t\treturn floattype;\n\telse if (_isstr(obj))\n\t\treturn strtype;\n\telse if (_islist(obj))\n\t\treturn listtype;\n\telse if (_isset(obj))\n\t\treturn settype;\n\telse if (_ismap(obj))\n\t\treturn maptype;\n\telse if (_isdatetime(obj))\n\t\treturn datetimetype;\n\telse if (_isobject(obj))\n\t\treturn objecttype;\n\telse\n\t{\n\t\tlet constructor = obj.constructor;\n\t\tlet type = constructors2types.get(constructor);\n\t\tif (type === undefined)\n\t\t\ttype = _maketype(constructor);\n\t\treturn type;\n\t}\n};\n\n// (this is non-trivial, because it follows the Python semantic of ``-5 % 2`` being ``1``)\nexport function _mod(obj1, obj2)\n{\n\tif (obj1 === null || obj1 === undefined || obj2 === null || obj2 === undefined)\n\t\tthrow new TypeError(_type(obj1).fullname() + \" % \" + _type(obj2).fullname() + \" is not supported\");\n\n\tlet div = Math.floor(obj1 / obj2);\n\tlet mod = obj1 - div * obj2;\n\n\tif (mod !== 0 && ((obj2 < 0 && mod > 0) || (obj2 > 0 && mod < 0)))\n\t{\n\t\tmod += obj2;\n\t\t--div;\n\t}\n\treturn obj1 - div * obj2;\n};\n\n// Return the attribute with the name ``attrname`` of the object ``obj``\n// If ``obj`` doesn't have such an attribute, return ``default_``\nexport function _getattr(obj, attrname, default_=null)\n{\n\ttry\n\t{\n\t\tlet type = _type(obj);\n\t\treturn type.getattr(obj, attrname);\n\t}\n\tcatch (exc)\n\t{\n\t\tif (exc instanceof AttributeError && exc.obj === obj)\n\t\t\treturn default_;\n\t\telse\n\t\t\tthrow exc;\n\t}\n};\n\n// Return wether the object ``obj`` has an attribute with the name ``attrname``\nexport function _hasattr(obj, attrname)\n{\n\tlet proto = Protocol.get(obj);\n\treturn proto.hasattr(obj, attrname);\n};\n\n// Return the names of the attributes of the object ``obj`` as a set.\nexport function _dir(obj)\n{\n\tlet proto = Protocol.get(obj);\n\treturn proto.dir();\n};\n\n// Return whether any of the items in ``iterable`` are true\nexport function _any(iterable)\n{\n\tif (typeof(iterable) === \"string\")\n\t{\n\t\tfor (let c of iterable)\n\t\t{\n\t\t\tif (c !== '\\x00')\n\t\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\telse\n\t{\n\t\tfor (let iter = _iter(iterable);;)\n\t\t{\n\t\t\tlet item = iter.next();\n\t\t\tif (item.done)\n\t\t\t\treturn false;\n\t\t\tif (_bool(item.value))\n\t\t\t\treturn true;\n\t\t}\n\t}\n};\n\n// Return whether all of the items in ``iterable`` are true\nexport function _all(iterable)\n{\n\tif (typeof(iterable) === \"string\")\n\t{\n\t\tfor (let c of iterable)\n\t\t{\n\t\t\tif (c === '\\x00')\n\t\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\telse\n\t{\n\t\tfor (let iter = _iter(iterable);;)\n\t\t{\n\t\t\tlet item = iter.next();\n\t\t\tif (item.done)\n\t\t\t\treturn true;\n\t\t\tif (!_bool(item.value))\n\t\t\t\treturn false;\n\t\t}\n\t}\n};\n\n// Check if ``obj`` is undefined\nexport function _isundefined(obj)\n{\n\treturn obj === undefined;\n};\n\n\n// Check if ``obj`` is *not* undefined\nexport function _isdefined(obj)\n{\n\treturn obj !== undefined;\n};\n\n// Check if ``obj`` is ``None``\nexport function _isnone(obj)\n{\n\treturn nonetype.instancecheck(obj);\n};\n\n// Check if ``obj`` is a boolean\nexport function _isbool(obj)\n{\n\treturn booltype.instancecheck(obj);\n};\n\n// Check if ``obj`` is a int\nexport function _isint(obj)\n{\n\treturn inttype.instancecheck(obj);\n};\n\n// Check if ``obj`` is a float\nexport function _isfloat(obj)\n{\n\treturn floattype.instancecheck(obj);\n};\n\n// Check if ``obj`` is a string\nexport function _isstr(obj)\n{\n\treturn strtype.instancecheck(obj);\n};\n\n// Check if ``obj`` is a datetime\nexport function _isdatetime(obj)\n{\n\treturn datetimetype.instancecheck(obj);\n};\n\nexport function _isdate(obj)\n{\n\treturn datetype.instancecheck(obj);\n};\n\n// Check if ``obj`` is a color\nexport function _iscolor(obj)\n{\n\treturn (obj instanceof Color);\n};\n\n// Check if ``obj`` is a timedelta object\nexport function _istimedelta(obj)\n{\n\treturn (obj instanceof TimeDelta);\n};\n\n// Check if ``obj`` is a monthdelta object\nexport function _ismonthdelta(obj)\n{\n\treturn (obj instanceof MonthDelta);\n};\n\n// Check if ``obj`` is a template\nexport function _istemplate(obj)\n{\n\treturn (obj instanceof Template || obj instanceof TemplateClosure);\n};\n\n// Check if ``obj`` is a function\nexport function _isfunction(obj)\n{\n\treturn typeof(obj) === \"function\" || (Object.prototype.toString.call(obj) === \"[object Object]\" && (obj instanceof Template || obj instanceof TemplateClosure));\n};\n\n// Check if ``obj`` is a list\nexport function _islist(obj)\n{\n\treturn Object.prototype.toString.call(obj) === \"[object Array]\";\n};\n\n// Check if ``obj`` is a set\nexport function _isset(obj)\n{\n\treturn Object.prototype.toString.call(obj) === \"[object Set]\";\n};\n\n// Check if ``obj`` is an exception (at least a UL4 exception)\nexport function _isexception(obj)\n{\n\treturn (obj instanceof Exception);\n};\n\n// Check if ``obj`` is an iterator\nexport function _isiter(obj)\n{\n\treturn obj !== null && typeof(obj) === \"object\" && typeof(obj.next) === \"function\";\n};\n\n// Check if ``obj`` is a JS object\nexport function _isobject(obj)\n{\n\treturn Object.prototype.toString.call(obj) === \"[object Object]\" && obj.__type__ === undefined && !(obj instanceof Proto);\n};\n\n// Check if ``obj`` is a ``Map``\nexport function _ismap(obj)\n{\n\treturn obj !== null && typeof(obj) === \"object\" && typeof(obj.__proto__) === \"object\" && obj.__proto__ === Map.prototype;\n};\n\n// Check if ``obj`` is a dict (i.e. a normal Javascript object or a ``Map``)\nexport function _isdict(obj)\n{\n\treturn _isobject(obj) || _ismap(obj);\n};\n\n// Check if ``obj`` is an instance of ``type``\nexport function _isinstance(obj, type)\n{\n\treturn type.instancecheck(obj);\n};\n\n// Repeat string ``str`` ``rep`` times\nexport function _str_repeat(str, rep)\n{\n\tlet result = \"\";\n\tfor (; rep>0; --rep)\n\t\tresult += str;\n\treturn result;\n};\n\nexport function _list_repeat(list, rep)\n{\n\tlet result = [];\n\tfor (; rep>0; --rep)\n\t\tfor (let item of list)\n\t\t\tresult.push(item);\n\treturn result;\n};\n\nfunction _str_json(str)\n{\n\tlet result = \"\";\n\tfor (let c of str)\n\t{\n\t\tswitch (c)\n\t\t{\n\t\t\tcase \"\\r\":\n\t\t\t\tresult += \"\\\\r\";\n\t\t\t\tbreak;\n\t\t\tcase \"\\n\":\n\t\t\t\tresult += \"\\\\n\";\n\t\t\t\tbreak;\n\t\t\tcase \"\\t\":\n\t\t\t\tresult += \"\\\\t\";\n\t\t\t\tbreak;\n\t\t\tcase \"\\\\\":\n\t\t\t\tresult += \"\\\\\\\\\";\n\t\t\t\tbreak;\n\t\t\tcase '\"':\n\t\t\t\tresult += '\\\\\"';\n\t\t\t\tbreak;\n\t\t\tcase '<':\n\t\t\t\tresult += '\\\\u003c';\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tlet code = c.charCodeAt(0);\n\t\t\t\tif (code >= 32 && code < 128)\n\t\t\t\t\tresult += c;\n\t\t\t\telse\n\t\t\t\t\tresult += \"\\\\u\" + _lpad(code.toString(16), \"0\", 4);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\treturn '\"' + result + '\"';\n};\n\n// Encodes ``obj`` in the Javascript Object Notation (see http://json.org/; with support for dates, colors and templates)\nexport function _asjson(obj)\n{\n\tif (obj === null)\n\t\treturn \"null\";\n\telse if (obj === undefined)\n\t\treturn \"undefined\";\n\telse if (obj === false)\n\t\treturn \"false\";\n\telse if (obj === true)\n\t\treturn \"true\";\n\telse if (typeof(obj) === \"string\")\n\t\treturn _str_json(obj);\n\telse if (typeof(obj) === \"number\")\n\t{\n\t\treturn \"\" + obj;\n\t}\n\telse if (_islist(obj))\n\t{\n\t\tlet v = [];\n\t\tv.push(\"[\");\n\t\tlet first = true;\n\t\tfor (let item of obj)\n\t\t{\n\t\t\tif (first)\n\t\t\t\tfirst = false;\n\t\t\telse\n\t\t\t\tv.push(\", \");\n\t\t\tv.push(_asjson(item));\n\t\t}\n\t\tv.push(\"]\");\n\t\treturn v.join(\"\");\n\t}\n\telse if (_ismap(obj))\n\t{\n\t\tlet v = [];\n\t\tv.push(\"{\");\n\t\tlet first = true;\n\t\tfor (let [key, value] of obj)\n\t\t{\n\t\t\tif (first)\n\t\t\t\tfirst = false;\n\t\t\telse\n\t\t\t\tv.push(\", \");\n\t\t\tv.push(_asjson(key));\n\t\t\tv.push(\": \");\n\t\t\tv.push(_asjson(value));\n\t\t}\n\t\tv.push(\"}\");\n\t\treturn v.join(\"\");\n\t}\n\telse if (_isobject(obj))\n\t{\n\t\tlet v = [];\n\t\tv.push(\"{\");\n\t\tlet first = true;\n\t\tfor (let key in obj)\n\t\t{\n\t\t\tif (first)\n\t\t\t\tfirst = false;\n\t\t\telse\n\t\t\t\tv.push(\", \");\n\t\t\tv.push(_asjson(key));\n\t\t\tv.push(\": \");\n\t\t\tv.push(_asjson(obj[key]));\n\t\t}\n\t\tv.push(\"}\");\n\t\treturn v.join(\"\");\n\t}\n\telse if (_isdate(obj))\n\t{\n\t\treturn \"new ul4.Date_(\" + obj._date.getFullYear() + \", \" + (obj._date.getMonth()+1) + \", \" + obj._date.getDate() + \")\";\n\t}\n\telse if (_isdatetime(obj))\n\t{\n\t\treturn \"new Date(\" + obj.getFullYear() + \", \" + obj.getMonth() + \", \" + obj.getDate() + \", \" + obj.getHours() + \", \" + obj.getMinutes() + \", \" + obj.getSeconds() + \", \" + obj.getMilliseconds() + \")\";\n\t}\n\telse if (_istimedelta(obj))\n\t{\n\t\treturn \"new ul4.TimeDelta(\" + obj._days + \", \" + obj._seconds + \", \" + obj._microseconds + \")\";\n\t}\n\telse if (_ismonthdelta(obj))\n\t{\n\t\treturn \"new ul4.MonthDelta(\" + obj._months + \")\";\n\t}\n\telse if (_iscolor(obj))\n\t{\n\t\treturn \"new ul4.Color(\" + obj._r + \", \" + obj._g + \", \" + obj._b + \", \" + obj._a + \")\";\n\t}\n\telse if (_istemplate(obj))\n\t{\n\t\treturn \"ul4.Template.loads(\" + _repr(obj.dumps()) + \")\";\n\t}\n\tthrow new TypeError(\"asjson() requires a serializable object\");\n};\n\n// Decodes the string ``string`` from the Javascript Object Notation (see http://json.org/) and returns the resulting object\nexport function _fromjson(string)\n{\n\t// The following is from jQuery's parseJSON function\n\tstring = StrProtocol.strip(string);\n\tif (JSON && JSON.parse)\n\t\treturn JSON.parse(string);\n\tif (_rvalidchars.test(string.replace(_rvalidescape, \"@\").replace(_rvalidtokens, \"]\").replace(_rvalidbraces, \"\")))\n\t\treturn (new Function(\"return \" + string))();\n\tthrow new TypeError(\"invalid JSON\");\n};\n\n// Encodes ``obj`` in the UL4 Object Notation format\nexport function _asul4on(obj, indent=null)\n{\n\treturn dumps(obj, indent);\n};\n\n// Decodes the string ``string`` from the UL4 Object Notation format and returns the resulting decoded object\nexport function _fromul4on(string)\n{\n\treturn loads(string);\n};\n\nfunction _format_datetime(obj, fmt, lang)\n{\n\tlet translations = {\n\t\tde: {\n\t\t\tms: [\"Jan\", \"Feb\", \"M\\u00e4r\", \"Apr\", \"Mai\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Dez\"],\n\t\t\tml: [\"Januar\", \"Februar\", \"M\\u00e4rz\", \"April\", \"Mai\", \"Juni\", \"Juli\", \"August\", \"September\", \"Oktober\", \"November\", \"Dezember\"],\n\t\t\tws: [\"So\", \"Mo\", \"Di\", \"Mi\", \"Do\", \"Fr\", \"Sa\"],\n\t\t\twl: [\"Sonntag\", \"Montag\", \"Dienstag\", \"Mittwoch\", \"Donnerstag\", \"Freitag\", \"Samstag\"],\n\t\t\txf: \"%d.%m.%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a %d %b %Y %H:%M:%S\"\n\t\t},\n\t\ten: {\n\t\t\tms: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"],\n\t\t\tml: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n\t\t\tws: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n\t\t\twl: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\n\t\t\txf: \"%m/%d/%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a %d %b %Y %I:%M:%S %p\"\n\t\t},\n\t\tfr: {\n\t\t\tms: [\"janv.\", \"f\\u00e9vr.\", \"mars\", \"avril\", \"mai\", \"juin\", \"juil.\", \"ao\\u00fbt\", \"sept.\", \"oct.\", \"nov.\", \"d\\u00e9c.\"],\n\t\t\tml: [\"janvier\", \"f\\u00e9vrier\", \"mars\", \"avril\", \"mai\", \"juin\", \"juillet\", \"ao\\u00fbt\", \"septembre\", \"octobre\", \"novembre\", \"d\\u00e9cembre\"],\n\t\t\tws: [\"dim.\", \"lun.\", \"mar.\", \"mer.\", \"jeu.\", \"ven.\", \"sam.\"],\n\t\t\twl: [\"dimanche\", \"lundi\", \"mardi\", \"mercredi\", \"jeudi\", \"vendredi\", \"samedi\"],\n\t\t\txf: \"%d/%m/%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a %d %b %Y %H:%M:%S\"\n\t\t},\n\t\tes: {\n\t\t\tms: [\"ene\", \"feb\", \"mar\", \"abr\", \"may\", \"jun\", \"jul\", \"ago\", \"sep\", \"oct\", \"nov\", \"dic\"],\n\t\t\tml: [\"enero\", \"febrero\", \"marzo\", \"abril\", \"mayo\", \"junio\", \"julio\", \"agosto\", \"septiembre\", \"octubre\", \"noviembre\", \"diciembre\"],\n\t\t\tws: [\"dom\", \"lun\", \"mar\", \"mi\\u00e9\", \"jue\", \"vie\", \"s\\u00e1b\"],\n\t\t\twl: [\"domingo\", \"lunes\", \"martes\", \"mi\\u00e9rcoles\", \"jueves\", \"viernes\", \"s\\u00e1bado\"],\n\t\t\txf: \"%d/%m/%y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a %d %b %Y %H:%M:%S\"\n\t\t},\n\t\tit: {\n\t\t\tms: [\"gen\", \"feb\", \"mar\", \"apr\", \"mag\", \"giu\", \"lug\", \"ago\", \"set\", \"ott\", \"nov\", \"dic\"],\n\t\t\tml: [\"gennaio\", \"febbraio\", \"marzo\", \"aprile\", \"maggio\", \"giugno\", \"luglio\", \"agosto\", \"settembre\", \"ottobre\", \"novembre\", \"dicembre\"],\n\t\t\tws: [\"dom\", \"lun\", \"mar\", \"mer\", \"gio\", \"ven\", \"sab\"],\n\t\t\twl: [\"domenica\", \"luned\\u00ec\", \"marted\\u00ec\", \"mercoled\\u00ec\", \"gioved\\u00ec\", \"venerd\\u00ec\", \"sabato\"],\n\t\t\txf: \"%d/%m/%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a %d %b %Y %H:%M:%S\"\n\t\t},\n\t\tda: {\n\t\t\tms: [\"jan\", \"feb\", \"mar\", \"apr\", \"maj\", \"jun\", \"jul\", \"aug\", \"sep\", \"okt\", \"nov\", \"dec\"],\n\t\t\tml: [\"januar\", \"februar\", \"marts\", \"april\", \"maj\", \"juni\", \"juli\", \"august\", \"september\", \"oktober\", \"november\", \"december\"],\n\t\t\tws: [\"s\\u00f8n\", \"man\", \"tir\", \"ons\", \"tor\", \"fre\", \"l\\u00f8r\"],\n\t\t\twl: [\"s\\u00f8ndag\", \"mandag\", \"tirsdag\", \"onsdag\", \"torsdag\", \"fredag\", \"l\\u00f8rdag\"],\n\t\t\txf: \"%d-%m-%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a %d %b %Y %H:%M:%S\"\n\t\t},\n\t\tsv: {\n\t\t\tms: [\"jan\", \"feb\", \"mar\", \"apr\", \"maj\", \"jun\", \"jul\", \"aug\", \"sep\", \"okt\", \"nov\", \"dec\"],\n\t\t\tml: [\"januari\", \"februari\", \"mars\", \"april\", \"maj\", \"juni\", \"juli\", \"augusti\", \"september\", \"oktober\", \"november\", \"december\"],\n\t\t\tws: [\"s\\u00f6n\", \"m\\u00e5n\", \"tis\", \"ons\", \"tor\", \"fre\", \"l\\u00f6r\"],\n\t\t\twl: [\"s\\u00f6ndag\", \"m\\u00e5ndag\", \"tisdag\", \"onsdag\", \"torsdag\", \"fredag\", \"l\\u00f6rdag\"],\n\t\t\txf: \"%Y-%m-%d\",\n\t\t\tXf: \"%H.%M.%S\",\n\t\t\tcf: \"%a %d %b %Y %H.%M.%S\"\n\t\t},\n\t\tnl: {\n\t\t\tms: [\"jan\", \"feb\", \"mrt\", \"apr\", \"mei\", \"jun\", \"jul\", \"aug\", \"sep\", \"okt\", \"nov\", \"dec\"],\n\t\t\tml: [\"januari\", \"februari\", \"maart\", \"april\", \"mei\", \"juni\", \"juli\", \"augustus\", \"september\", \"oktober\", \"november\", \"december\"],\n\t\t\tws: [\"zo\", \"ma\", \"di\", \"wo\", \"do\", \"vr\", \"za\"],\n\t\t\twl: [\"zondag\", \"maandag\", \"dinsdag\", \"woensdag\", \"donderdag\", \"vrijdag\", \"zaterdag\"],\n\t\t\txf: \"%d-%m-%y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a %d %b %Y %H:%M:%S\"\n\t\t},\n\t\tpt: {\n\t\t\tms: [\"Jan\", \"Fev\", \"Mar\", \"Abr\", \"Mai\", \"Jun\", \"Jul\", \"Ago\", \"Set\", \"Out\", \"Nov\", \"Dez\"],\n\t\t\tml: [\"Janeiro\", \"Fevereiro\", \"Mar\\u00e7o\", \"Abril\", \"Maio\", \"Junho\", \"Julho\", \"Agosto\", \"Setembro\", \"Outubro\", \"Novembro\", \"Dezembro\"],\n\t\t\tws: [\"Dom\", \"Seg\", \"Ter\", \"Qua\", \"Qui\", \"Sex\", \"S\\u00e1b\"],\n\t\t\twl: [\"Domingo\", \"Segunda\", \"Ter\\u00e7a\", \"Quarta\", \"Quinta\", \"Sexta\", \"S\\u00e1bado\"],\n\t\t\txf: \"%d-%m-%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a %d %b %Y %H:%M:%S\"\n\t\t},\n\t\tcs: {\n\t\t\tms: [\"led\", \"\\u00fano\", \"b\\u0159e\", \"dub\", \"kv\\u011b\", \"\\u010den\", \"\\u010dec\", \"srp\", \"z\\u00e1\\u0159\", \"\\u0159\\u00edj\", \"lis\", \"pro\"],\n\t\t\tml: [\"leden\", \"\\u00fanor\", \"b\\u0159ezen\", \"duben\", \"kv\\u011bten\", \"\\u010derven\", \"\\u010dervenec\", \"srpen\", \"z\\u00e1\\u0159\\u00ed\", \"\\u0159\\u00edjen\", \"listopad\", \"prosinec\"],\n\t\t\tws: [\"Ne\", \"Po\", \"\\u00dat\", \"St\", \"\\u010ct\", \"P\\u00e1\", \"So\"],\n\t\t\twl: [\"Ned\\u011ble\", \"Pond\\u011bl\\u00ed\", \"\\u00dater\\u00fd\", \"St\\u0159eda\", \"\\u010ctvrtek\", \"P\\u00e1tek\", \"Sobota\"],\n\t\t\txf: \"%d.%m.%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a\\u00a0%d.\\u00a0%B\\u00a0%Y,\\u00a0%H:%M:%S\"\n\t\t},\n\t\tsk: {\n\t\t\tms: [\"jan\", \"feb\", \"mar\", \"apr\", \"m\\u00e1j\", \"j\\u00fan\", \"j\\u00fal\", \"aug\", \"sep\", \"okt\", \"nov\", \"dec\"],\n\t\t\tml: [\"janu\\u00e1r\", \"febru\\u00e1r\", \"marec\", \"apr\\u00edl\", \"m\\u00e1j\", \"j\\u00fan\", \"j\\u00fal\", \"august\", \"september\", \"okt\\u00f3ber\", \"november\", \"december\"],\n\t\t\tws: [\"Ne\", \"Po\", \"Ut\", \"St\", \"\\u0160t\", \"Pi\", \"So\"],\n\t\t\twl: [\"Nede\\u013ea\", \"Pondelok\", \"Utorok\", \"Streda\", \"\\u0160tvrtok\", \"Piatok\", \"Sobota\"],\n\t\t\txf: \"%d.%m.%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a\\u00a0%d.\\u00a0%B\\u00a0%Y,\\u00a0%H:%M:%S\"\n\t\t},\n\t\tpl: {\n\t\t\tms: [\"sty\", \"lut\", \"mar\", \"kwi\", \"maj\", \"cze\", \"lip\", \"sie\", \"wrz\", \"pa\\u017a\", \"lis\", \"gru\"],\n\t\t\tml: [\"stycze\\u0144\", \"luty\", \"marzec\", \"kwiecie\\u0144\", \"maj\", \"czerwiec\", \"lipiec\", \"sierpie\\u0144\", \"wrzesie\\u0144\", \"pa\\u017adziernik\", \"listopad\", \"grudzie\\u0144\"],\n\t\t\tws: [\"nie\", \"pon\", \"wto\", \"\\u015bro\", \"czw\", \"pi\\u0105\", \"sob\"],\n\t\t\twl: [\"niedziela\", \"poniedzia\\u0142ek\", \"wtorek\", \"\\u015broda\", \"czwartek\", \"pi\\u0105tek\", \"sobota\"],\n\t\t\txf: \"%d.%m.%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a, %d %b %Y, %H:%M:%S\"\n\t\t},\n\t\thr: {\n\t\t\tms: [\"Sij\", \"Vel\", \"O\\u017eu\", \"Tra\", \"Svi\", \"Lip\", \"Srp\", \"Kol\", \"Ruj\", \"Lis\", \"Stu\", \"Pro\"],\n\t\t\tml: [\"Sije\\u010danj\", \"Velja\\u010da\", \"O\\u017eujak\", \"Travanj\", \"Svibanj\", \"Lipanj\", \"Srpanj\", \"Kolovoz\", \"Rujan\", \"Listopad\", \"Studeni\", \"Prosinac\"],\n\t\t\tws: [\"Ned\", \"Pon\", \"Uto\", \"Sri\", \"\\u010cet\", \"Pet\", \"Sub\"],\n\t\t\twl: [\"Nedjelja\", \"Ponedjeljak\", \"Utorak\", \"Srijeda\", \"\\u010cetvrtak\", \"Petak\", \"Subota\"],\n\t\t\txf: \"%d.%m.%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a %d %b %Y %H:%M:%S\"\n\t\t},\n\t\tsr: {\n\t\t\tms: [\"\\u0458\\u0430\\u043d\", \"\\u0444\\u0435\\u0431\", \"\\u043c\\u0430\\u0440\", \"\\u0430\\u043f\\u0440\", \"\\u043c\\u0430\\u0458\", \"\\u0458\\u0443\\u043d\", \"\\u0458\\u0443\\u043b\", \"\\u0430\\u0432\\u0433\", \"\\u0441\\u0435\\u043f\", \"\\u043e\\u043a\\u0442\", \"\\u043d\\u043e\\u0432\", \"\\u0434\\u0435\\u0446\"],\n\t\t\tml: [\"\\u0458\\u0430\\u043d\\u0443\\u0430\\u0440\", \"\\u0444\\u0435\\u0431\\u0440\\u0443\\u0430\\u0440\", \"\\u043c\\u0430\\u0440\\u0442\", \"\\u0430\\u043f\\u0440\\u0438\\u043b\", \"\\u043c\\u0430\\u0458\", \"\\u0458\\u0443\\u043d\", \"\\u0458\\u0443\\u043b\", \"\\u0430\\u0432\\u0433\\u0443\\u0441\\u0442\", \"\\u0441\\u0435\\u043f\\u0442\\u0435\\u043c\\u0431\\u0430\\u0440\", \"\\u043e\\u043a\\u0442\\u043e\\u0431\\u0430\\u0440\", \"\\u043d\\u043e\\u0432\\u0435\\u043c\\u0431\\u0430\\u0440\", \"\\u0434\\u0435\\u0446\\u0435\\u043c\\u0431\\u0430\\u0440\"],\n\t\t\tws: [\"\\u043d\\u0435\\u0434\", \"\\u043f\\u043e\\u043d\", \"\\u0443\\u0442\\u043e\", \"\\u0441\\u0440\\u0435\", \"\\u0447\\u0435\\u0442\", \"\\u043f\\u0435\\u0442\", \"\\u0441\\u0443\\u0431\"],\n\t\t\twl: [\"\\u043d\\u0435\\u0434\\u0435\\u0459\\u0430\", \"\\u043f\\u043e\\u043d\\u0435\\u0434\\u0435\\u0459\\u0430\\u043a\", \"\\u0443\\u0442\\u043e\\u0440\\u0430\\u043a\", \"\\u0441\\u0440\\u0435\\u0434\\u0430\", \"\\u0447\\u0435\\u0442\\u0432\\u0440\\u0442\\u0430\\u043a\", \"\\u043f\\u0435\\u0442\\u0430\\u043a\", \"\\u0441\\u0443\\u0431\\u043e\\u0442\\u0430\"],\n\t\t\txf: \"%d.%m.%Y.\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%A, %d. %B %Y. %H:%M:%S\"\n\t\t},\n\t\tro: {\n\t\t\tms: [\"ian\", \"feb\", \"mar\", \"apr\", \"mai\", \"iun\", \"iul\", \"aug\", \"sep\", \"oct\", \"nov\", \"dec\"],\n\t\t\tml: [\"ianuarie\", \"februarie\", \"martie\", \"aprilie\", \"mai\", \"iunie\", \"iulie\", \"august\", \"septembrie\", \"octombrie\", \"noiembrie\", \"decembrie\"],\n\t\t\tws: [\"Du\", \"Lu\", \"Ma\", \"Mi\", \"Jo\", \"Vi\", \"Sb\"],\n\t\t\twl: [\"duminic\\u0103\", \"luni\", \"mar\\u0163i\", \"miercuri\", \"joi\", \"vineri\", \"s\\u00e2mb\\u0103t\\u0103\"],\n\t\t\txf: \"%d.%m.%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a %d %b %Y %H:%M:%S\"\n\t\t},\n\t\thu: {\n\t\t\tms: [\"jan\", \"febr\", \"m\\u00e1rc\", \"\\u00e1pr\", \"m\\u00e1j\", \"j\\u00fan\", \"j\\u00fal\", \"aug\", \"szept\", \"okt\", \"nov\", \"dec\"],\n\t\t\tml: [\"janu\\u00e1r\", \"febru\\u00e1r\", \"m\\u00e1rcius\", \"\\u00e1prilis\", \"m\\u00e1jus\", \"j\\u00fanius\", \"j\\u00falius\", \"augusztus\", \"szeptember\", \"okt\\u00f3ber\", \"november\", \"december\"],\n\t\t\tws: [\"v\", \"h\", \"k\", \"sze\", \"cs\", \"p\", \"szo\"],\n\t\t\twl: [\"vas\\u00e1rnap\", \"h\\u00e9tf\\u0151\", \"kedd\", \"szerda\", \"cs\\u00fct\\u00f6rt\\u00f6k\", \"p\\u00e9ntek\", \"szombat\"],\n\t\t\txf: \"%Y-%m-%d\",\n\t\t\tXf: \"%H.%M.%S\",\n\t\t\tcf: \"%Y. %b. %d., %A, %H.%M.%S\"\n\t\t},\n\t\ttr: {\n\t\t\tms: [\"Oca\", \"\\u015eub\", \"Mar\", \"Nis\", \"May\", \"Haz\", \"Tem\", \"A\\u011fu\", \"Eyl\", \"Eki\", \"Kas\", \"Ara\"],\n\t\t\tml: [\"Ocak\", \"\\u015eubat\", \"Mart\", \"Nisan\", \"May\\u0131s\", \"Haziran\", \"Temmuz\", \"A\\u011fustos\", \"Eyl\\u00fcl\", \"Ekim\", \"Kas\\u0131m\", \"Aral\\u0131k\"],\n\t\t\tws: [\"Paz\", \"Pzt\", \"Sal\", \"\\u00c7r\\u015f\", \"Pr\\u015f\", \"Cum\", \"Cts\"],\n\t\t\twl: [\"Pazar\", \"Pazartesi\", \"Sal\\u0131\", \"\\u00c7ar\\u015famba\", \"Per\\u015fembe\", \"Cuma\", \"Cumartesi\"],\n\t\t\txf: \"%d-%m-%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a %d %b %Y %H:%M:%S\"\n\t\t},\n\t\tru: {\n\t\t\tms: [\"\\u042f\\u043d\\u0432\", \"\\u0424\\u0435\\u0432\", \"\\u041c\\u0430\\u0440\", \"\\u0410\\u043f\\u0440\", \"\\u041c\\u0430\\u0439\", \"\\u0418\\u044e\\u043d\", \"\\u0418\\u044e\\u043b\", \"\\u0410\\u0432\\u0433\", \"\\u0421\\u0435\\u043d\", \"\\u041e\\u043a\\u0442\", \"\\u041d\\u043e\\u044f\", \"\\u0414\\u0435\\u043a\"],\n\t\t\tml: [\"\\u042f\\u043d\\u0432\\u0430\\u0440\\u044c\", \"\\u0424\\u0435\\u0432\\u0440\\u0430\\u043b\\u044c\", \"\\u041c\\u0430\\u0440\\u0442\", \"\\u0410\\u043f\\u0440\\u0435\\u043b\\u044c\", \"\\u041c\\u0430\\u0439\", \"\\u0418\\u044e\\u043d\\u044c\", \"\\u0418\\u044e\\u043b\\u044c\", \"\\u0410\\u0432\\u0433\\u0443\\u0441\\u0442\", \"\\u0421\\u0435\\u043d\\u0442\\u044f\\u0431\\u0440\\u044c\", \"\\u041e\\u043a\\u0442\\u044f\\u0431\\u0440\\u044c\", \"\\u041d\\u043e\\u044f\\u0431\\u0440\\u044c\", \"\\u0414\\u0435\\u043a\\u0430\\u0431\\u0440\\u044c\"],\n\t\t\tws: [\"\\u0412\\u0441\\u043a\", \"\\u041f\\u043d\\u0434\", \"\\u0412\\u0442\\u0440\", \"\\u0421\\u0440\\u0434\", \"\\u0427\\u0442\\u0432\", \"\\u041f\\u0442\\u043d\", \"\\u0421\\u0431\\u0442\"],\n\t\t\twl: [\"\\u0412\\u043e\\u0441\\u043a\\u0440\\u0435\\u0441\\u0435\\u043d\\u044c\\u0435\", \"\\u041f\\u043e\\u043d\\u0435\\u0434\\u0435\\u043b\\u044c\\u043d\\u0438\\u043a\", \"\\u0412\\u0442\\u043e\\u0440\\u043d\\u0438\\u043a\", \"\\u0421\\u0440\\u0435\\u0434\\u0430\", \"\\u0427\\u0435\\u0442\\u0432\\u0435\\u0440\\u0433\", \"\\u041f\\u044f\\u0442\\u043d\\u0438\\u0446\\u0430\", \"\\u0421\\u0443\\u0431\\u0431\\u043e\\u0442\\u0430\"],\n\t\t\txf: \"%d.%m.%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a %d %b %Y %H:%M:%S\"\n\t\t},\n\t\tzh: {\n\t\t\tms: [\" 1\\u6708\", \" 2\\u6708\", \" 3\\u6708\", \" 4\\u6708\", \" 5\\u6708\", \" 6\\u6708\", \" 7\\u6708\", \" 8\\u6708\", \" 9\\u6708\", \"10\\u6708\", \"11\\u6708\", \"12\\u6708\"],\n\t\t\tml: [\"\\u4e00\\u6708\", \"\\u4e8c\\u6708\", \"\\u4e09\\u6708\", \"\\u56db\\u6708\", \"\\u4e94\\u6708\", \"\\u516d\\u6708\", \"\\u4e03\\u6708\", \"\\u516b\\u6708\", \"\\u4e5d\\u6708\", \"\\u5341\\u6708\", \"\\u5341\\u4e00\\u6708\", \"\\u5341\\u4e8c\\u6708\"],\n\t\t\tws: [\"\\u65e5\", \"\\u4e00\", \"\\u4e8c\", \"\\u4e09\", \"\\u56db\", \"\\u4e94\", \"\\u516d\"],\n\t\t\twl: [\"\\u661f\\u671f\\u65e5\", \"\\u661f\\u671f\\u4e00\", \"\\u661f\\u671f\\u4e8c\", \"\\u661f\\u671f\\u4e09\", \"\\u661f\\u671f\\u56db\", \"\\u661f\\u671f\\u4e94\", \"\\u661f\\u671f\\u516d\"],\n\t\t\txf: \"%Y\\u5e74%b%d\\u65e5\",\n\t\t\tXf: \"%H\\u65f6%M\\u5206%S\\u79d2\",\n\t\t\tcf: \"%Y\\u5e74%b%d\\u65e5 %A %H\\u65f6%M\\u5206%S\\u79d2\"\n\t\t},\n\t\tko: {\n\t\t\tms: [\" 1\\uc6d4\", \" 2\\uc6d4\", \" 3\\uc6d4\", \" 4\\uc6d4\", \" 5\\uc6d4\", \" 6\\uc6d4\", \" 7\\uc6d4\", \" 8\\uc6d4\", \" 9\\uc6d4\", \"10\\uc6d4\", \"11\\uc6d4\", \"12\\uc6d4\"],\n\t\t\tml: [\"1\\uc6d4\", \"2\\uc6d4\", \"3\\uc6d4\", \"4\\uc6d4\", \"5\\uc6d4\", \"6\\uc6d4\", \"7\\uc6d4\", \"8\\uc6d4\", \"9\\uc6d4\", \"10\\uc6d4\", \"11\\uc6d4\", \"12\\uc6d4\"],\n\t\t\tws: [\"\\uc77c\", \"\\uc6d4\", \"\\ud654\", \"\\uc218\", \"\\ubaa9\", \"\\uae08\", \"\\ud1a0\"],\n\t\t\twl: [\"\\uc77c\\uc694\\uc77c\", \"\\uc6d4\\uc694\\uc77c\", \"\\ud654\\uc694\\uc77c\", \"\\uc218\\uc694\\uc77c\", \"\\ubaa9\\uc694\\uc77c\", \"\\uae08\\uc694\\uc77c\", \"\\ud1a0\\uc694\\uc77c\"],\n\t\t\txf: \"%Y\\ub144 %B %d\\uc77c\",\n\t\t\tXf: \"%H\\uc2dc %M\\ubd84 %S\\ucd08\",\n\t\t\tcf: \"%Y\\ub144 %B %d\\uc77c (%a) %p %I\\uc2dc %M\\ubd84 %S\\ucd08\"\n\t\t},\n\t\tja: {\n\t\t\tms: [\" 1\\u6708\", \" 2\\u6708\", \" 3\\u6708\", \" 4\\u6708\", \" 5\\u6708\", \" 6\\u6708\", \" 7\\u6708\", \" 8\\u6708\", \" 9\\u6708\", \"10\\u6708\", \"11\\u6708\", \"12\\u6708\"],\n\t\t\tml: [\"1\\u6708\", \"2\\u6708\", \"3\\u6708\", \"4\\u6708\", \"5\\u6708\", \"6\\u6708\", \"7\\u6708\", \"8\\u6708\", \"9\\u6708\", \"10\\u6708\", \"11\\u6708\", \"12\\u6708\"],\n\t\t\tws: [\"\\u65e5\", \"\\u6708\", \"\\u706b\", \"\\u6c34\", \"\\u6728\", \"\\u91d1\", \"\\u571f\"],\n\t\t\twl: [\"\\u65e5\\u66dc\\u65e5\", \"\\u6708\\u66dc\\u65e5\", \"\\u706b\\u66dc\\u65e5\", \"\\u6c34\\u66dc\\u65e5\", \"\\u6728\\u66dc\\u65e5\", \"\\u91d1\\u66dc\\u65e5\", \"\\u571f\\u66dc\\u65e5\"],\n\t\t\txf: \"%Y\\u5e74%B%d\\u65e5\",\n\t\t\tXf: \"%H\\u6642%M\\u5206%S\\u79d2\",\n\t\t\tcf: \"%Y\\u5e74%B%d\\u65e5 %H\\u6642%M\\u5206%S\\u79d2\"\n\t\t}\n\t};\n\n\tlet translation = translations[lang];\n\n\tlet result = [];\n\tlet inspec = false;\n\tfor (let c of fmt)\n\t{\n\t\tif (inspec)\n\t\t{\n\t\t\tswitch (c)\n\t\t\t{\n\t\t\t\tcase \"a\":\n\t\t\t\t\tc = translation.ws[obj.getDay()];\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"A\":\n\t\t\t\t\tc = translation.wl[obj.getDay()];\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"b\":\n\t\t\t\t\tc = translation.ms[obj.getMonth()];\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"B\":\n\t\t\t\t\tc = translation.ml[obj.getMonth()];\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"c\":\n\t\t\t\t\tc = _format(obj, translation.cf, lang);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"d\":\n\t\t\t\t\tc = _lpad(obj.getDate(), \"0\", 2);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"f\":\n\t\t\t\t\tc = _lpad(obj.getMilliseconds(), \"0\", 3) + \"000\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"H\":\n\t\t\t\t\tc = _lpad(obj.getHours(), \"0\", 2);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"I\":\n\t\t\t\t\tc = _lpad(((obj.getHours()-1) % 12)+1, \"0\", 2);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"j\":\n\t\t\t\t\tc = _lpad(DateTimeProtocol.yearday(obj), \"0\", 3);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"m\":\n\t\t\t\t\tc = _lpad(obj.getMonth()+1, \"0\", 2);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"M\":\n\t\t\t\t\tc = _lpad(obj.getMinutes(), \"0\", 2);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"p\":\n\t\t\t\t\tc = obj.getHours() < 12 ? \"AM\" : \"PM\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"S\":\n\t\t\t\t\tc = _lpad(obj.getSeconds(), \"0\", 2);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"U\":\n\t\t\t\t\tc = _lpad(_week4format(obj, 6), \"0\", 2);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"w\":\n\t\t\t\t\tc = obj.getDay();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"W\":\n\t\t\t\t\tc = _lpad(_week4format(obj, 0), \"0\", 2);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"x\":\n\t\t\t\t\tc = _format(obj, translation.xf, lang);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"X\":\n\t\t\t\t\tc = _format(obj, translation.Xf, lang);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"y\":\n\t\t\t\t\tc = (obj.getFullYear() % 100).toString();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"Y\":\n\t\t\t\t\tc = obj.getFullYear().toString();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"z\":\n\t\t\t\t\t// UTC offset in the form +HHMM or -HHMM\n\t\t\t\t\tc = \"\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"Z\":\n\t\t\t\t\t// Time zone name\n\t\t\t\t\tc = \"\";\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tresult.push(c);\n\t\t\tinspec = false;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (c == \"%\")\n\t\t\t\tinspec = true;\n\t\t\telse\n\t\t\t\tresult.push(c);\n\t\t}\n\t}\n\treturn result.join(\"\");\n};\n\nfunction _format_int(obj, fmt, lang)\n{\n\tlet work = fmt;\n\n\t// Defaults\n\tlet fill = ' ';\n\tlet align = '>'; // '<', '>', '=' or '^'\n\tlet sign = '-'; // '+', '-' or ' '\n\tlet alternate = false;\n\tlet minimumwidth = 0;\n\tlet type = 'd'; // 'b', 'c', 'd', 'o', 'x', 'X' or 'n'\n\n\t// Determine output type\n\tif (/[bcdoxXn]$/.test(work))\n\t{\n\t\ttype = work.substring(work.length-1);\n\t\twork = work.substring(0, work.length-1);\n\t}\n\n\t// Extract minimum width\n\tif (/\\d+$/.test(work))\n\t{\n\t\tlet minimumwidthStr = /\\d+$/.exec(work);\n\t\twork = work.replace(/\\d+$/, \"\");\n\t\tif (/^0/.test(minimumwidthStr))\n\t\t{\n\t\t\talign = '=';\n\t\t\tfill = '0';\n\t\t}\n\t\tminimumwidth = parseInt(minimumwidthStr);\n\t}\n\n\t// Alternate form?\n\tif (/#$/.test(work))\n\t{\n\t\talternate = true;\n\t\twork = work.substring(0, work.length-1);\n\t}\n\n\t// Determine sign\n\tif (/[+ -]$/.test(work))\n\t{\n\t\tif (type == 'c')\n\t\t\tthrow new ValueError(\"sign not allowed for integer format type 'c'\");\n\t\tsign = work.substring(work.length-1);\n\t\twork = work.substring(0, work.length-1);\n\t}\n\n\t// Extract fill and align char\n\tif (work.length >= 3)\n\t\tthrow new ValueError(\"illegal integer format string \" + _repr(fmt));\n\telse if (work.length == 2)\n\t{\n\t\tif (/[<>=^]$/.test(work))\n\t\t{\n\t\t\talign = work[1];\n\t\t\tfill = work[0];\n\t\t}\n\t\telse\n\t\t\tthrow new ValueError(\"illegal integer format string \" + _repr(fmt));\n\t}\n\telse if (work.length == 1)\n\t{\n\t\tif (/^[<>=^]$/.test(work))\n\t\t\talign = work;\n\t\telse\n\t\t\tthrow new ValueError(\"illegal integer format string \" + _repr(fmt));\n\t}\n\n\t// Basic number formatting\n\tlet neg = obj < 0;\n\n\tif (neg)\n\t\tobj = -obj;\n\n\tlet output;\n\tswitch (type)\n\t{\n\t\tcase 'b':\n\t\t\toutput = obj.toString(2);\n\t\t\tbreak;\n\t\tcase 'c':\n\t\t\tif (neg || obj > 65535)\n\t\t\t\tthrow new ValueError(\"value out of bounds for c format\");\n\t\t\toutput = String.fromCharCode(obj);\n\t\t\tbreak;\n\t\tcase 'd':\n\t\t\toutput = obj.toString();\n\t\t\tbreak;\n\t\tcase 'o':\n\t\t\toutput = obj.toString(8);\n\t\t\tbreak;\n\t\tcase 'x':\n\t\t\toutput = obj.toString(16);\n\t\t\tbreak;\n\t\tcase 'X':\n\t\t\toutput = obj.toString(16).toUpperCase();\n\t\t\tbreak;\n\t\tcase 'n':\n\t\t\t// FIXME: locale formatting\n\t\t\toutput = obj.toString();\n\t\t\tbreak;\n\t}\n\n\t// The rest of the formatting\n\tif (align === '=')\n\t{\n\t\tif (neg || sign !== '-')\n\t\t\t--minimumwidth;\n\t\tif (alternate && (type === 'b' || type === 'o' || type === 'x' || type === 'X'))\n\t\t\tminimumwidth -= 2;\n\n\t\tif (output.length < minimumwidth)\n\t\t\toutput = _str_repeat(fill, minimumwidth-output.length) + output;\n\n\t\tif (alternate && (type === 'b' || type === 'o' || type === 'x' || type === 'X'))\n\t\t\toutput = \"0\" + type + output;\n\n\t\tif (neg)\n\t\t\toutput = \"-\" + output;\n\t\telse if (sign != '-')\n\t\t\toutput = sign + output;\n\t}\n\telse\n\t{\n\t\tif (alternate && (type == 'b' || type == 'o' || type == 'x' || type == 'X'))\n\t\t\toutput = \"0\" + type + output;\n\t\tif (neg)\n\t\t\toutput = \"-\" + output;\n\t\telse if (sign != '-')\n\t\t\toutput = sign + output;\n\t\tif (output.length < minimumwidth)\n\t\t{\n\t\t\tif (align == '<')\n\t\t\t\toutput = output + _str_repeat(fill, minimumwidth-output.length);\n\t\t\telse if (align == '>')\n\t\t\t\toutput = _str_repeat(fill, minimumwidth-output.length) + output;\n\t\t\telse // if (align == '^')\n\t\t\t{\n\t\t\t\tlet pad = minimumwidth - output.length;\n\t\t\t\tlet padBefore = Math.floor(pad/2);\n\t\t\t\tlet padAfter = pad-padBefore;\n\t\t\t\toutput = _str_repeat(fill, padBefore) + output + _str_repeat(fill, padAfter);\n\t\t\t}\n\t\t}\n\t}\n\treturn output;\n};\n\n// Format ``obj`` using the format string ``fmt`` in the language ``lang``\nexport function _format(obj, fmt, lang)\n{\n\tif (lang === undefined || lang === null)\n\t\tlang = \"en\";\n\telse\n\t{\n\t\tlet translations = {de: null, en: null, fr: null, es: null, it: null, da: null, sv: null, nl: null, pt: null, cs: null, sk: null, pl: null, hr: null, sr: null, ro: null, hu: null, tr: null, ru: null, zh: null, ko: null, ja: null};\n\t\tlang = lang.toLowerCase();\n\t\tif (translations[lang] === undefined)\n\t\t{\n\t\t\tlang = lang.split(/_/)[0];\n\t\t\tif (translations[lang] === undefined)\n\t\t\t\tlang = \"en\";\n\t\t}\n\t}\n\tif (_isdate(obj))\n\t\treturn _format_datetime(obj._date, fmt, lang);\n\tif (_isdatetime(obj))\n\t\treturn _format_datetime(obj, fmt, lang);\n\telse if (_isint(obj))\n\t\treturn _format_int(obj, fmt, lang);\n\telse if (obj === true)\n\t\treturn _format_int(1, fmt, lang);\n\telse if (obj === false)\n\t\treturn _format_int(0, fmt, lang);\n};\n\nexport function _lpad(string, pad, len)\n{\n\tif (typeof(string) === \"number\")\n\t\tstring = string.toString();\n\twhile (string.length < len)\n\t\tstring = pad + string;\n\treturn string;\n};\n\nexport function _rpad(string, pad, len)\n{\n\tif (typeof(string) === \"number\")\n\t\tstring = string.toString();\n\twhile (string.length < len)\n\t\tstring = string + pad;\n\treturn string;\n};\n\n// This is outside of ``Proto`` on purpose\n// This way reactive frameworks like ``Vue.js`` don't get to see it\n// and complain about mutating render functions when those create new objects.\nlet _nextid = 1;\n\nexport class Proto\n{\n\tconstructor()\n\t{\n\t\tthis.__id__ = _nextid++;\n\t}\n\n\tul4type()\n\t{\n\t\treturn this.constructor.name;\n\t}\n\n\t// equality comparison of objects defaults to identity comparison\n\t[symbols.eq](other)\n\t{\n\t\treturn this === other;\n\t}\n\n\t// To overwrite equality comparison, you only have to overwrite ``[symbols.eq]``,\n\t// ``[symbols.ne]`` will be synthesized from that\n\t[symbols.ne](other)\n\t{\n\t\treturn !this[symbols.eq](other);\n\t}\n\n\t// For other comparison operators, each method has to be implemented:\n\t// ``<`` calls ``[symbols.lt]``, ``<=`` calls ``[symbols.le]``, ``>`` calls ``[symbols.gt]`` and\n\t// ``>=`` calls ``[symbols.ge]``\n\n\t[symbols.bool]()\n\t{\n\t\treturn true;\n\t}\n};\n\nexport class Signature extends Proto\n{\n\tconstructor(...params)\n\t{\n\t\tsuper();\n\t\tthis.paramsByPos = [];\n\t\tthis.paramsByName = {};\n\t\tthis.countpos = 0;\n\t\tthis.countposdef = 0;\n\t\tthis.countposkw = 0;\n\t\tthis.countposkwdef = 0;\n\t\tthis.countkw = 0;\n\t\tthis.countkwdef = 0;\n\t\tthis.varpos = null;\n\t\tthis.varkw = null;\n\n\t\tlet state = 0;\n\t\tlet name = null;\n\t\tlet type = null;\n\t\tfor (let value of params)\n\t\t{\n\t\t\tif (state == 0)\n\t\t\t{\n\t\t\t\tname = value;\n\t\t\t\tstate = 1;\n\t\t\t}\n\t\t\telse if (state == 1)\n\t\t\t{\n\t\t\t\ttype = value;\n\t\t\t\tif (type.endsWith(\"=\"))\n\t\t\t\t\tstate = 2;\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.add(name, type, null);\n\t\t\t\t\tstate = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.add(name, type, value);\n\t\t\t\tstate = 0;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Add a parameter\n\tadd(name, type, defaultValue)\n\t{\n\t\tlet pos = this.paramsByPos.length;\n\t\tif (this.varpos !== null)\n\t\t\t++pos;\n\t\tif (this.varkw !== null)\n\t\t\t++pos;\n\t\tlet param = {name: name, pos: pos, type: type, defaultValue: defaultValue};\n\t\tswitch (type)\n\t\t{\n\t\t\tcase \"p\":\n\t\t\t\tif (this.countposdef > 0 || this.countposkwdef > 0 || this.countkwdef > 0)\n\t\t\t\t\tthrow new ParameterError(\"parameter without default after parameter with default\");\n\t\t\t\telse if (this.countposkw > 0 || this.countposkwdef > 0)\n\t\t\t\t\tthrow new ParameterError(\"positional-only parameter after positional/keyword parameter\");\n\t\t\t\telse if (this.countkw > 0 || this.countkwdef > 0)\n\t\t\t\t\tthrow new ParameterError(\"positional-only parameter after keyword-only parameter\");\n\t\t\t\telse if (this.varpos !== null)\n\t\t\t\t\tthrow new ParameterError(\"positional-only parameter after * parameter\");\n\t\t\t\telse if (this.varkw !== null)\n\t\t\t\t\tthrow new ParameterError(\"positional-only parameter after ** parameter\");\n\t\t\t\tthis.paramsByPos.push(param);\n\t\t\t\tthis.paramsByName[name] = param;\n\t\t\t\t++this.countpos;\n\t\t\t\tbreak;\n\t\t\tcase \"p=\":\n\t\t\t\tif (this.countposkw > 0 || this.countposkwdef > 0)\n\t\t\t\t\tthrow new ParameterError(\"positional-only parameter after positional/keyword parameter\");\n\t\t\t\telse if (this.countkw > 0 || this.countkwdef > 0)\n\t\t\t\t\tthrow new ParameterError(\"positional-only parameter after keyword-only parameter\");\n\t\t\t\telse if (this.varpos !== null)\n\t\t\t\t\tthrow new ParameterError(\"positional-only parameter after * parameter\");\n\t\t\t\telse if (this.varkw !== null)\n\t\t\t\t\tthrow new ParameterError(\"positional-only parameter after ** parameter\");\n\t\t\t\tthis.paramsByPos.push(param);\n\t\t\t\tthis.paramsByName[name] = param;\n\t\t\t\t++this.countposdef;\n\t\t\t\tbreak;\n\t\t\tcase \"pk\":\n\t\t\t\tif (this.countposdef > 0 || this.countposkwdef > 0 || this.countkwdef > 0)\n\t\t\t\t\tthrow new ParameterError(\"parameter without default after parameter with default\");\n\t\t\t\telse if (this.countkw > 0 || this.countkwdef > 0)\n\t\t\t\t\tthrow new ParameterError(\"positional/keyword parameter after keyword-only parameter\");\n\t\t\t\telse if (this.varpos !== null)\n\t\t\t\t\tthrow new ParameterError(\"positional/keyword parameter after * parameter\");\n\t\t\t\telse if (this.varkw !== null)\n\t\t\t\t\tthrow new ParameterError(\"positional/keyword parameter after ** parameter\");\n\t\t\t\tthis.paramsByPos.push(param);\n\t\t\t\tthis.paramsByName[name] = param;\n\t\t\t\t++this.countposkw;\n\t\t\t\tbreak;\n\t\t\tcase \"pk=\":\n\t\t\t\tif (this.countkw > 0 || this.countkwdef > 0)\n\t\t\t\t\tthrow new ParameterError(\"positional/keyword parameter after keyword-only parameter\");\n\t\t\t\telse if (this.varpos !== null)\n\t\t\t\t\tthrow new ParameterError(\"positional/keyword parameter after * parameter\");\n\t\t\t\telse if (this.varkw !== null)\n\t\t\t\t\tthrow new ParameterError(\"positional/keyword parameter after ** parameter\");\n\t\t\t\tthis.paramsByPos.push(param);\n\t\t\t\tthis.paramsByName[name] = param;\n\t\t\t\t++this.countposkwdef;\n\t\t\t\tbreak;\n\t\t\tcase \"k\":\n\t\t\t\tif (this.countposdef > 0 || this.countposkwdef > 0 || this.countkwdef > 0)\n\t\t\t\t\tthrow new ParameterError(\"parameter without default after parameter with default\");\n\t\t\t\telse if (this.varpos !== null)\n\t\t\t\t\tthrow new ParameterError(\"keyword-only parameter after * parameter\");\n\t\t\t\telse if (this.varkw !== null)\n\t\t\t\t\tthrow new ParameterError(\"keyword-only parameter after ** parameter\");\n\t\t\t\tthis.paramsByPos.push(param);\n\t\t\t\tthis.paramsByName[name] = param;\n\t\t\t\t++this.countkw;\n\t\t\t\tbreak;\n\t\t\tcase \"k=\":\n\t\t\t\tif (this.varpos !== null)\n\t\t\t\t\tthrow new ParameterError(\"keyword-only parameter after * parameter\");\n\t\t\t\telse if (this.varkw !== null)\n\t\t\t\t\tthrow new ParameterError(\"keyword-only parameter after ** parameter\");\n\t\t\t\tthis.paramsByPos.push(param);\n\t\t\t\tthis.paramsByName[name] = param;\n\t\t\t\t++this.countkwdef;\n\t\t\t\tbreak;\n\t\t\tcase \"*\":\n\t\t\t\tif (this.varpos !== null)\n\t\t\t\t\tthrow new ParameterError(\"* parameter specified twice!\");\n\t\t\t\telse if (this.varkw !== null)\n\t\t\t\t\tthrow new ParameterError(\"* parameter can come after ** parameter!\");\n\t\t\t\tthis.varpos = param;\n\t\t\t\tbreak;\n\t\t\tcase \"**\":\n\t\t\t\tif (this.varkw !== null)\n\t\t\t\t\tthrow new ParameterError(\"** parameter specified twice!\");\n\t\t\t\tthis.varkw = param;\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t// Create the argument array for calling a function with this signature with the arguments available from ``args``\n\tbindArray(name, args, kwargs)\n\t{\n\t\tlet decname = name !== null ? name + \"() \" : \"\";\n\n\t\tlet varpos = this.varpos != null ? [] : null;\n\t\tlet varkw = this.varkw != null ? new Map() : null;\n\n\t\tlet count = this.countpos + this.countposdef + this.countposkw + this.countposkwdef + this.countkw + this.countkwdef;\n\t\tlet finalargs = Array(count).fill(null);\n\t\tlet haveValues = Array(count).fill(false);\n\n\t\t// Handle psotional arguments\n\t\tif (args !== null)\n\t\t{\n\t\t\tlet i = 0;\n\t\t\tfor (let arg of args)\n\t\t\t{\n\t\t\t\tlet param = this.paramsByPos[i];\n\t\t\t\tif (param !== undefined && param.type.indexOf(\"p\") >= 0)\n\t\t\t\t{\n\t\t\t\t\tfinalargs[i] = arg;\n\t\t\t\t\thaveValues[i] = true;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (varpos !== null)\n\t\t\t\t\t\tvarpos.push(arg);\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tlet count_nodef = this.countpos + this.countposkw;\n\t\t\t\t\t\tlet count_def = this.countposdef + this.countposkwdef;\n\t\t\t\t\t\tif (count_def == 0)\n\t\t\t\t\t\t\tthrow new ArgumentError(name + \"() takes exactly \" + count_nodef + \" positional argument\" + (count_nodef != 1 ? \"s\" : \"\") + \", \" + args.length + \" given\");\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tthrow new ArgumentError(name + \"() takes at most \" + (count_nodef + count_def) + \" positional argument\" + ((count_nodef + count_def) != 1 ? \"s\" : \"\") + \", \" + args.length + \" given\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t++i;\n\t\t\t}\n\t\t}\n\n\t\t// Handle keyword arguments\n\t\tif (kwargs !== null)\n\t\t{\n\t\t\tfor (let [argname, argvalue] of Object.entries(kwargs))\n\t\t\t{\n\t\t\t\tlet param = this.paramsByName[argname];\n\n\t\t\t\tif (param !== undefined && param.type.indexOf(\"k\") >= 0)\n\t\t\t\t{\n\t\t\t\t\tif (haveValues[param.pos])\n\t\t\t\t\t\tthrow new ArgumentError(\"Duplicate keyword argument \" + argname + \" for \" + name + \"()\");\n\t\t\t\t\tfinalargs[param.pos] = argvalue;\n\t\t\t\t\thaveValues[param.pos] = true;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (varkw !== null)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (varkw.has(argname))\n\t\t\t\t\t\t\tthrow new ArgumentError(\"Duplicate keyword argument \" + argname + \" for \" + name + \"()\");\n\t\t\t\t\t\tvarkw.set(argname, argvalue);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\tthrow new ArgumentError(name + \"() doesn't support an argument named \" + argname);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Fill in default values and check that every parameter has a value\n\t\tlet i = 0;\n\t\tfor (let param of this.paramsByPos)\n\t\t{\n\t\t\tif (!haveValues[i])\n\t\t\t{\n\t\t\t\tif (param.type.endsWith(\"=\"))\n\t\t\t\t{\n\t\t\t\t\tfinalargs[i] = param.defaultValue;\n\t\t\t\t\thaveValues[i] = true;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tthrow new ArgumentError(\"Required \" + name + \"() argument \" + param.name + \" (position \" + param.pos + \") missing\");\n\t\t\t}\n\t\t\t++i;\n\t\t}\n\n\t\t// Set variable parameters\n\t\tif (varpos !== null)\n\t\t\tfinalargs.push(varpos);\n\t\tif (varkw !== null)\n\t\t\tfinalargs.push(varkw);\n\n\t\treturn finalargs;\n\t}\n\n\t// Create the argument object for calling a function with this signature with the arguments available from ``args``\n\tbindObject(name, args, kwargs)\n\t{\n\t\targs = this.bindArray(name, args, kwargs);\n\t\tlet argObject = {};\n\t\tlet i = 0;\n\t\tfor (let param of this.paramsByPos)\n\t\t\targObject[param.name] = args[i++];\n\t\tif (this.varpos !== null)\n\t\t\targObject[this.varpos.name] = args[i++];\n\t\tif (this.varkw !== null)\n\t\t\targObject[this.varkw.name] = args[i++];\n\t\treturn argObject;\n\t}\n\n\t[symbols.repr]()\n\t{\n\t\treturn \"<Signature \" + this.toString() + \">\";\n\t}\n\n\t[symbols.str]()\n\t{\n\t\treturn this.toString();\n\t}\n\n\t_appendParam(buffer, lasttype, param)\n\t{\n\t\tlet sep;\n\t\tif (lasttype === null)\n\t\t\tsep = [\"k\", \"k=\"].includes(param.type) ? \"*, \" : \"\";\n\t\telse if ([\"pk\", \"pk=\"].includes(lasttype))\n\t\t\tsep = [\"k\", \"k=\"].includes(param.type) ? \", *, \" : \", \";\n\t\telse if ([\"p\", \"p=\"].includes(lasttype))\n\t\t{\n\t\t\tif ([\"pk\", \"pk=\"].includes(param.type))\n\t\t\t\tsep = \", /, \";\n\t\t\telse if ([\"k\", \"k=\"].includes(param.type))\n\t\t\t\tsep = \", /, *, \";\n\t\t\telse\n\t\t\t\tsep = \", \";\n\t\t}\n\t\telse\n\t\t\tsep = \", \";\n\t\tlasttype = param.type;\n\t\tbuffer.push(sep);\n\t\tif ([\"*\", \"**\"].includes(param.type))\n\t\t\tbuffer.push(param.type);\n\t\tbuffer.push(param.name);\n\t\tif (param.type.endsWith(\"=\"))\n\t\t{\n\t\t\tbuffer.push(\"=\");\n\t\t\tbuffer.push(_repr(param.defaultValue));\n\t\t}\n\t}\n\n\ttoString()\n\t{\n\t\tlet v = [];\n\t\tlet lasttype = null;\n\t\tfor (let param of this.paramsByPos)\n\t\t{\n\t\t\tthis._appendParam(v, lasttype, param);\n\t\t\tlasttype = param.type;\n\t\t}\n\t\tif (this.varpos !== null)\n\t\t{\n\t\t\tthis._appendParam(v, lasttype, this.varpos);\n\t\t\tlasttype = this.varpos.type;\n\t\t}\n\t\tif (this.varkw !== null)\n\t\t{\n\t\t\tthis._appendParam(v, lasttype, this.varkw);\n\t\t\tlasttype = this.varkw.type;\n\t\t}\n\t\treturn \"(\" + v.join(\"\") + \")\";\n\t}\n};\n\n\n// Adds name and signature to a function/method and makes the method callable by UL4\nexport function expose(f, signature, options)\n{\n\toptions = options || {};\n\tif (options.name)\n\t\tf._ul4_name = options.name;\n\tif (_islist(signature))\n\t\tsignature = new Signature(...signature);\n\tf._ul4_signature = signature;\n\tf._ul4_needsobject = options.needsobject || false;\n\tf._ul4_needscontext = options.needscontext || false;\n\treturn f;\n};\n\n// Clone an object and extend it\nexport function _extend(baseobj, attrs)\n{\n\treturn Object.assign(Object.create(baseobj), attrs);\n};\n\n// Type objects for all builtin types\nexport class Type\n{\n\tconstructor(module, name, doc, constructor=null)\n\t{\n\t\tthis.module = module;\n\t\tthis.name = name;\n\t\tthis.doc = doc;\n\t\tthis._constructor = constructor;\n\t}\n\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof this._constructor;\n\t}\n\t[symbols.getattr](attrname)\n\t{\n\t\tswitch (attrname)\n\t\t{\n\t\t\tcase \"__module__\":\n\t\t\t\treturn this.module;\n\t\t\tcase \"__name__\":\n\t\t\t\treturn this.name;\n\t\t\tcase \"__doc__\":\n\t\t\t\treturn this.doc;\n\t\t\tdefault:\n\t\t\t\tthrow new AttributeError(this, attrname);\n\t\t}\n\t}\n\n\t[symbols.repr]()\n\t{\n\t\treturn this.toString();\n\t}\n\n\ttoString()\n\t{\n\t\treturn \"<type \" + this.fullname() + \">\";\n\t}\n\n\tfullname()\n\t{\n\t\tif (this.module === null)\n\t\t\treturn this.name;\n\t\telse\n\t\t\treturn this.module + \".\" + this.name;\n\t}\n\n\tdir()\n\t{\n\t\treturn this.attrs;\n\t}\n\n\tgetattr(obj, attrname)\n\t{\n\t\tif (obj === null || obj === undefined)\n\t\t\tthrow new AttributeError(obj, attrname);\n\t\telse if (typeof(obj[symbols.getattr]) === \"function\")\n\t\t\treturn obj[symbols.getattr](attrname);\n\t\telse if (this.attrs.has(attrname))\n\t\t{\n\t\t\tlet attr = this[attrname];\n\t\t\tlet realattr = function realattr(...args) {\n\t\t\t\treturn attr.apply(this, [obj, ...args]);\n\t\t\t};\n\t\t\t// Unfortunately we can't set ``realattr.name``;\n\t\t\trealattr._ul4_name = attr._ul4_name || attr.name;\n\t\t\trealattr._ul4_signature = attr._ul4_signature;\n\t\t\trealattr._ul4_needsobject = attr._ul4_needsobject;\n\t\t\trealattr._ul4_needscontext = attr._ul4_needscontext;\n\t\t\treturn realattr;\n\t\t}\n\t\telse\n\t\t\tthrow new AttributeError(obj, attrname);\n\t}\n\n\thasattr(obj, attrname)\n\t{\n\t\tif (obj === null || obj === undefined)\n\t\t\treturn false;\n\t\telse if (typeof(obj[symbols.getattr]) === \"function\")\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tobj[symbols.getattr](attrname);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tcatch (exc)\n\t\t\t{\n\t\t\t\tif (exc instanceof AttributeError && exc.obj === object)\n\t\t\t\t\treturn false;\n\t\t\t\telse\n\t\t\t\t\tthrow exc;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\treturn this.attrs.has(attrname);\n\t}\n};\n\nType.prototype.attrs = new Set();\n\n\nclass NoneType extends Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj === null;\n\t}\n};\n\nexport let nonetype = new NoneType(null, \"None\", \"The constant `None`.\");\n\n\nclass UndefinedType extends Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj === undefined;\n\t}\n};\n\nexport let undefinedtype = new UndefinedType(null, \"undefined\", \"An undefined variable or object attribute.\");\n\n\nclass BoolType extends Type\n{\n\t// Convert ``obj`` to bool, according to its \"truth value\"\n\t[symbols.call](obj=false)\n\t{\n\t\tif (obj === undefined || obj === null || obj === false || obj === 0 || obj === \"\")\n\t\t\treturn false;\n\t\telse if (typeof(obj) === \"object\" && typeof(obj[symbols.bool]) === \"function\")\n\t\t\treturn obj[symbols.bool]();\n\t\telse if (_islist(obj))\n\t\t\treturn obj.length !== 0;\n\t\telse if (_ismap(obj) || _isset(obj))\n\t\t\treturn obj.size != 0;\n\t\telse if (_isobject(obj))\n\t\t{\n\t\t\tfor (let key in obj)\n\t\t\t{\n\t\t\t\tif (!obj.hasOwnProperty(key))\n\t\t\t\t\tcontinue;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\tinstancecheck(obj)\n\t{\n\t\treturn typeof(obj) === \"boolean\";\n\t}\n};\n\nexpose(BoolType.prototype, [\"obj\", \"p=\", false], {name: \"bool\"});\n\nexport let booltype = new BoolType(null, \"bool\", \"An boolean value\");\n\n\nclass IntType extends Type\n{\n\t// Convert ``obj`` to an integer (if ``base`` is given ``obj`` must be a string and ``base`` is the base for the conversion (default is 10))\n\t[symbols.call](obj=0, base=null)\n\t{\n\t\tlet result;\n\t\tif (base !== null)\n\t\t{\n\t\t\tif (typeof(obj) !== \"string\" || !_isint(base))\n\t\t\t\tthrow new TypeError(\"int() requires a string and an integer\");\n\t\t\tresult = parseInt(obj, base);\n\t\t\tif (result.toString() == \"NaN\")\n\t\t\t\tthrow new TypeError(\"invalid literal for int()\");\n\t\t\treturn result;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (typeof(obj) === \"string\")\n\t\t\t{\n\t\t\t\tresult = parseInt(obj);\n\t\t\t\tif (result.toString() == \"NaN\")\n\t\t\t\tthrow new TypeError(\"invalid literal for int()\");\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\telse if (typeof(obj) === \"number\")\n\t\t\t\treturn Math.floor(obj);\n\t\t\telse if (obj === true)\n\t\t\t\treturn 1;\n\t\t\telse if (obj === false)\n\t\t\t\treturn 0;\n\t\t\tthrow new TypeError(\"int() argument must be a string or a number\");\n\t\t}\n\t}\n\n\tinstancecheck(obj)\n\t{\n\t\treturn (typeof(obj) === \"number\") && Math.round(obj) == obj;\n\t}\n};\n\nexpose(IntType.prototype, [\"obj\", \"p=\", 0, \"base\", \"pk=\", null], {name: \"int\"});\n\nexport let inttype = new IntType(null, \"int\", \"An integer\");\n\n\nclass FloatType extends Type\n{\n\t// Convert ``obj`` to a float\n\t[symbols.call](obj=0.0)\n\t{\n\t\tif (typeof(obj) === \"string\")\n\t\t\treturn parseFloat(obj);\n\t\telse if (typeof(obj) === \"number\")\n\t\t\treturn obj;\n\t\telse if (obj === true)\n\t\t\treturn 1.0;\n\t\telse if (obj === false)\n\t\t\treturn 0.0;\n\t\tthrow new TypeError(\"float() argument must be a string or a number\");\n\t}\n\n\tinstancecheck(obj)\n\t{\n\t\treturn (typeof(obj) === \"number\") && Math.round(obj) != obj;\n\t}\n};\n\nexpose(FloatType.prototype, [\"obj\", \"p=\", 0.0], {name: \"float\"});\n\nexport let floattype = new FloatType(null, \"float\", \"A floating point number\");\n\n\nexport class StrType extends Type\n{\n\t[symbols.call](obj=\"\")\n\t{\n\t\tif (obj === undefined)\n\t\t\treturn \"\";\n\t\telse if (obj === null)\n\t\t\treturn \"\";\n\t\telse if (obj === false)\n\t\t\treturn \"False\";\n\t\telse if (obj === true)\n\t\t\treturn \"True\";\n\t\telse if (typeof(obj) === \"string\")\n\t\t\treturn obj;\n\t\telse if (typeof(obj) === \"number\")\n\t\t\treturn obj.toString();\n\t\telse if (_isdate(obj))\n\t\t\treturn _date_str(obj);\n\t\telse if (_isdatetime(obj))\n\t\t\treturn _datetime_str(obj);\n\t\telse if (_islist(obj))\n\t\t\treturn _list_repr(obj);\n\t\telse if (_isset(obj))\n\t\t\treturn _set_repr(obj);\n\t\telse if (_ismap(obj))\n\t\t\treturn _map_repr(obj);\n\t\telse if (typeof(obj) === \"object\" && typeof(obj[symbols.str]) === \"function\")\n\t\t\treturn obj[symbols.str]();\n\t\telse if (typeof(obj) === \"object\" && typeof(obj[symbols.repr]) === \"function\")\n\t\t\treturn obj[symbols.repr]();\n\t\telse if (_isobject(obj))\n\t\t\treturn _object_repr(obj);\n\t\telse\n\t\t\treturn _repr(obj);\n\t}\n\n\tinstancecheck(obj)\n\t{\n\t\treturn typeof(obj) === \"string\";\n\t}\n\n\tcount(obj, sub, start=null, end=null)\n\t{\n\t\treturn _count(obj, sub, start, end);\n\t}\n\n\tfind(obj, sub, start=null, end=null)\n\t{\n\t\treturn _find(obj, sub, start, end);\n\t}\n\n\trfind(obj, sub, start=null, end=null)\n\t{\n\t\treturn _rfind(obj, sub, start, end);\n\t}\n\n\treplace(obj, old, new_, count=null)\n\t{\n\t\tif (count === null)\n\t\t\tcount = obj.length;\n\n\t\tlet result = [];\n\t\twhile (obj.length)\n\t\t{\n\t\t\tlet pos = obj.indexOf(old);\n\t\t\tif (pos === -1 || !count--)\n\t\t\t{\n\t\t\t\tresult.push(obj);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tresult.push(obj.substr(0, pos));\n\t\t\tresult.push(new_);\n\t\t\tobj = obj.substr(pos + old.length);\n\t\t}\n\t\treturn result.join(\"\");\n\t}\n\n\tstrip(obj, chars=null)\n\t{\n\t\tchars = chars || \" \\r\\n\\t\";\n\t\tif (typeof(chars) !== \"string\")\n\t\t\tthrow new TypeError(\"strip() requires a string argument\");\n\n\t\twhile (obj && chars.indexOf(obj[0]) >= 0)\n\t\t\tobj = obj.substr(1);\n\t\twhile (obj && chars.indexOf(obj[obj.length-1]) >= 0)\n\t\t\tobj = obj.substr(0, obj.length-1);\n\t\treturn obj;\n\t}\n\n\tlstrip(obj, chars=null)\n\t{\n\t\tchars = chars || \" \\r\\n\\t\";\n\t\tif (typeof(chars) !== \"string\")\n\t\t\tthrow new TypeError(\"lstrip() requires a string argument\");\n\n\t\twhile (obj && chars.indexOf(obj[0]) >= 0)\n\t\t\tobj = obj.substr(1);\n\t\treturn obj;\n\t}\n\n\trstrip(obj, chars=null)\n\t{\n\t\tchars = chars || \" \\r\\n\\t\";\n\t\tif (typeof(chars) !== \"string\")\n\t\t\tthrow new TypeError(\"rstrip() requires a string argument\");\n\n\t\twhile (obj && chars.indexOf(obj[obj.length-1]) >= 0)\n\t\t\tobj = obj.substr(0, obj.length-1);\n\t\treturn obj;\n\t}\n\n\tsplit(obj, sep=null, maxsplit=null)\n\t{\n\t\tif (sep !== null && typeof(sep) !== \"string\")\n\t\t\tthrow new TypeError(\"split() requires a string\");\n\n\t\tif (maxsplit === null)\n\t\t{\n\t\t\tlet result = obj.split(sep !== null ? sep : /[ \\n\\r\\t]+/);\n\t\t\tif (sep === null)\n\t\t\t{\n\t\t\t\tif (result.length && !result[0].length)\n\t\t\t\t\tresult.splice(0, 1);\n\t\t\t\tif (result.length && !result[result.length-1].length)\n\t\t\t\t\tresult.splice(-1);\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (sep !== null)\n\t\t\t{\n\t\t\t\tlet result = [];\n\t\t\t\twhile (obj.length)\n\t\t\t\t{\n\t\t\t\t\tlet pos = obj.indexOf(sep);\n\t\t\t\t\tif (pos === -1 || !maxsplit--)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.push(obj);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tresult.push(obj.substr(0, pos));\n\t\t\t\t\tobj = obj.substr(pos + sep.length);\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlet result = [];\n\t\t\t\twhile (obj.length)\n\t\t\t\t{\n\t\t\t\t\tobj = StrProtocol.lstrip(obj, null);\n\t\t\t\t\tlet part;\n\t\t\t\t\tif (!maxsplit--)\n\t\t\t\t\t\t part = obj; // Take the rest of the string\n\t\t\t\t\telse\n\t\t\t\t\t\tpart = obj.split(/[ \\n\\r\\t]+/, 1)[0];\n\t\t\t\t\tif (part.length)\n\t\t\t\t\t\tresult.push(part);\n\t\t\t\t\tobj = obj.substr(part.length);\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}\n\t}\n\n\trsplit(obj, sep=null, maxsplit=null)\n\t{\n\t\tif (sep !== null && typeof(sep) !== \"string\")\n\t\t\tthrow new TypeError(\"rsplit() requires a string as second argument\");\n\n\t\tif (maxsplit === null)\n\t\t{\n\t\t\tlet result = obj.split(sep !== null ? sep : /[ \\n\\r\\t]+/);\n\t\t\tif (sep === null)\n\t\t\t{\n\t\t\t\tif (result.length && !result[0].length)\n\t\t\t\t\tresult.splice(0, 1);\n\t\t\t\tif (result.length && !result[result.length-1].length)\n\t\t\t\t\tresult.splice(-1);\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (sep !== null)\n\t\t\t{\n\t\t\t\tlet result = [];\n\t\t\t\twhile (obj.length)\n\t\t\t\t{\n\t\t\t\t\tlet pos = obj.lastIndexOf(sep);\n\t\t\t\t\tif (pos === -1 || !maxsplit--)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.unshift(obj);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tresult.unshift(obj.substr(pos+sep.length));\n\t\t\t\t\tobj = obj.substr(0, pos);\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlet result = [];\n\t\t\t\twhile (obj.length)\n\t\t\t\t{\n\t\t\t\t\tobj = StrProtocol.rstrip(obj);\n\t\t\t\t\tlet part;\n\t\t\t\t\tif (!maxsplit--)\n\t\t\t\t\t\t part = obj; // Take the rest of the string\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tpart = obj.split(/[ \\n\\r\\t]+/);\n\t\t\t\t\t\tpart = part[part.length-1];\n\t\t\t\t\t}\n\t\t\t\t\tif (part.length)\n\t\t\t\t\t\tresult.unshift(part);\n\t\t\t\t\tobj = obj.substr(0, obj.length-part.length);\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}\n\t}\n\n\tsplitlines(obj, keepends=false)\n\t{\n\t\tlet pos = 0;\n\t\tlet startpos;\n\t\tlet lookingAtLineEnd = function lookingAtLineEnd()\n\t\t{\n\t\t\tlet c = obj[pos];\n\t\t\tif (c === '\\n' || c == '\\u000B' || c == '\\u000C' || c == '\\u001C' || c == '\\u001D' || c == '\\u001E' || c == '\\u0085' || c == '\\u2028' || c == '\\u2029')\n\t\t\t\treturn 1;\n\t\t\tif (c === '\\r')\n\t\t\t{\n\t\t\t\tif (pos == length-1)\n\t\t\t\t\treturn 1;\n\t\t\t\tif (obj[pos+1] === '\\n')\n\t\t\t\t\treturn 2;\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\treturn 0;\n\t\t};\n\n\t\tlet result = [], length = obj.length;\n\n\t\tfor (pos = 0, startpos = 0;;)\n\t\t{\n\t\t\tif (pos >= length)\n\t\t\t{\n\t\t\t\tif (startpos != pos)\n\t\t\t\t\tresult.push(obj.substring(startpos));\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\tlet lineendlen = lookingAtLineEnd();\n\t\t\tif (!lineendlen)\n\t\t\t\t++pos;\n\t\t\telse\n\t\t\t{\n\t\t\t\tlet endpos = pos + (keepends ? lineendlen : 0);\n\t\t\t\tresult.push(obj.substring(startpos, endpos));\n\t\t\t\tpos += lineendlen;\n\t\t\t\tstartpos = pos;\n\t\t\t}\n\t\t}\n\t}\n\n\tlower(obj)\n\t{\n\t\treturn obj.toLowerCase();\n\t}\n\n\tupper(obj)\n\t{\n\t\treturn obj.toUpperCase();\n\t}\n\n\tcapitalize(obj)\n\t{\n\t\tif (obj.length)\n\t\t\tobj = obj[0].toUpperCase() + obj.slice(1).toLowerCase();\n\t\treturn obj;\n\t}\n\n\tjoin(obj, iterable)\n\t{\n\t\tlet resultlist = [];\n\t\tfor (let iter = _iter(iterable);;)\n\t\t{\n\t\t\tlet item = iter.next();\n\t\t\tif (item.done)\n\t\t\t\tbreak;\n\t\t\tresultlist.push(item.value);\n\t\t}\n\t\treturn resultlist.join(obj);\n\t}\n\n\tstartswith(obj, prefix)\n\t{\n\t\tif (typeof(prefix) === \"string\")\n\t\t\treturn obj.substr(0, prefix.length) === prefix;\n\t\telse if (_islist(prefix))\n\t\t{\n\t\t\tfor (let singlepre of prefix)\n\t\t\t{\n\t\t\t\tif (obj.substr(0, singlepre.length) === singlepre)\n\t\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\telse\n\t\t\tthrow new TypeError(\"startswith() argument must be string\");\n\t}\n\n\tendswith(obj, suffix)\n\t{\n\t\tif (typeof(suffix) === \"string\")\n\t\t\treturn obj.substr(obj.length-suffix.length) === suffix;\n\t\telse if (_islist(suffix))\n\t\t{\n\t\t\tfor (let singlesuf of suffix)\n\t\t\t{\n\t\t\t\tif (obj.substr(obj.length-singlesuf.length) === singlesuf)\n\t\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\telse\n\t\t\tthrow new TypeError(\"endswith() argument must be string or list of strings\");\n\t}\n};\n\nStrType.prototype.attrs = new Set([\n\t\"split\",\n\t\"rsplit\",\n\t\"splitlines\",\n\t\"strip\",\n\t\"lstrip\",\n\t\"rstrip\",\n\t\"upper\",\n\t\"lower\",\n\t\"capitalize\",\n\t\"startswith\",\n\t\"endswith\",\n\t\"replace\",\n\t\"count\",\n\t\"find\",\n\t\"rfind\",\n\t\"join\"\n]);\n\nexpose(StrType.prototype.count, [\"sub\", \"p\", \"start\", \"p=\", null, \"end\", \"p=\", null]);\nexpose(StrType.prototype.find, [\"sub\", \"p\", \"start\", \"p=\", null, \"end\", \"p=\", null]);\nexpose(StrType.prototype.rfind, [\"sub\", \"p\", \"start\", \"p=\", null, \"end\", \"p=\", null]);\nexpose(StrType.prototype.replace, [\"old\", \"p\", \"new\", \"p\", \"count\", \"p=\", null]);\nexpose(StrType.prototype.strip, [\"chars\", \"p=\", null]);\nexpose(StrType.prototype.lstrip, [\"chars\", \"p=\", null]);\nexpose(StrType.prototype.rstrip, [\"chars\", \"p=\", null]);\nexpose(StrType.prototype.split, [\"sep\", \"pk=\", null, \"maxsplit\", \"pk=\", null]);\nexpose(StrType.prototype.rsplit, [\"sep\", \"pk=\", null, \"maxsplit\", \"pk=\", null]);\nexpose(StrType.prototype.splitlines, [\"keepends\", \"pk=\", false]);\nexpose(StrType.prototype.lower, []);\nexpose(StrType.prototype.upper, []);\nexpose(StrType.prototype.capitalize, []);\nexpose(StrType.prototype.join, [\"iterable\", \"p\"]);\nexpose(StrType.prototype.startswith, [\"prefix\", \"p\"]);\nexpose(StrType.prototype.endswith, [\"suffix\", \"p\"]);\nexpose(StrType.prototype, [\"obj\", \"p=\", \"\"], {name: \"str\"});\n\nexport let strtype = new StrType(null, \"str\", \"A string.\");\n\n\nexport class ListType extends Type\n{\n\t// Convert ``obj`` to a list\n\t[symbols.call](obj)\n\t{\n\t\tlet iter = _iter(obj);\n\n\t\tlet result = [];\n\t\tfor (;;)\n\t\t{\n\t\t\tlet value = iter.next();\n\t\t\tif (value.done)\n\t\t\t\treturn result;\n\t\t\tresult.push(value.value);\n\t\t}\n\t}\n\n\tappend(obj, items)\n\t{\n\t\tfor (let item of items)\n\t\t\tobj.push(item);\n\t\treturn null;\n\t}\n\n\tinsert(obj, pos, items)\n\t{\n\t\tif (pos < 0)\n\t\t\tpos += obj.length;\n\n\t\tfor (let item of items)\n\t\t\tobj.splice(pos++, 0, item);\n\t\treturn null;\n\t}\n\n\tpop(obj, pos)\n\t{\n\t\tif (pos < 0)\n\t\t\tpos += obj.length;\n\n\t\tlet result = obj[pos];\n\t\tobj.splice(pos, 1);\n\t\treturn result;\n\t}\n\n\tcount(obj, sub, start=null, end=null)\n\t{\n\t\treturn _count(obj, sub, start, end);\n\t}\n\n\tfind(obj, sub, start=null, end=null)\n\t{\n\t\treturn _find(obj, sub, start, end);\n\t}\n\n\trfind(obj, sub, start=null, end=null)\n\t{\n\t\treturn _rfind(obj, sub, start, end);\n\t}\n};\n\nListType.prototype.attrs = new Set([\n\t\"append\",\n\t\"insert\",\n\t\"pop\",\n\t\"count\",\n\t\"find\",\n\t\"rfind\"\n]);\n\nexpose(ListType.prototype.append, [\"items\", \"*\"]);\nexpose(ListType.prototype.insert, [\"pos\", \"p\", \"items\", \"*\"]);\nexpose(ListType.prototype.pop, [\"pos\", \"p=\", -1]);\nexpose(ListType.prototype.count, [\"sub\", \"p\", \"start\", \"p=\", null, \"end\", \"p=\", null]);\nexpose(ListType.prototype.find, [\"sub\", \"p\", \"start\", \"p=\", null, \"end\", \"p=\", null]);\nexpose(ListType.prototype.rfind, [\"sub\", \"p\", \"start\", \"p=\", null, \"end\", \"p=\", null]);\nexpose(ListType.prototype, [\"iterable\", \"p=\", []], {name: \"list\"});\n\nexport let listtype = new ListType(null, \"list\", \"A list.\");\n\n\nclass MapType extends Type\n{\n\tgetattr(obj, attrname)\n\t{\n\t\tif (this.attrs.has(attrname))\n\t\t{\n\t\t\tlet attr = this[attrname];\n\t\t\tlet realattr = function realattr(...args) {\n\t\t\t\treturn attr.apply(this, [obj, ...args]);\n\t\t\t};\n\t\t\t// Unfortunately we can't set ``realattr.name``;\n\t\t\trealattr._ul4_name = attr._ul4_name || attr.name;\n\t\t\trealattr._ul4_signature = attr._ul4_signature;\n\t\t\trealattr._ul4_needsobject = attr._ul4_needsobject;\n\t\t\trealattr._ul4_needscontext = attr._ul4_needscontext;\n\t\t\treturn realattr;\n\t\t}\n\t\telse\n\t\t\treturn obj.get(attrname);\n\t}\n\n\tget(obj, key, default_=null)\n\t{\n\t\tif (obj.has(key))\n\t\t\treturn obj.get(key);\n\t\treturn default_;\n\t}\n\n\titems(obj)\n\t{\n\t\tlet result = [];\n\t\tfor (let [key, value] of obj)\n\t\t\tresult.push([key, value]);\n\t\treturn result;\n\t}\n\n\tvalues(obj)\n\t{\n\t\tlet result = [];\n\t\tfor (let [key, value] of obj)\n\t\t\tresult.push(value);\n\t\treturn result;\n\t}\n\n\tupdate(obj, others, kwargs)\n\t{\n\t\treturn _update(obj, others, kwargs);\n\t}\n\n\tclear(obj)\n\t{\n\t\tobj.clear();\n\t\treturn null;\n\t}\n\n\tpop(obj, key, default_=Object)\n\t{\n\t\tif (!obj.has(key))\n\t\t{\n\t\t\tif (default_ === Object)\n\t\t\t\tthrow new KeyError(obj, key);\n\t\t\telse\n\t\t\t\treturn default_;\n\t\t}\n\t\tlet result = obj.get(key);\n\t\tobj.delete(key);\n\t\treturn result;\n\t}\n};\n\nMapType.prototype.attrs = new Set([\"get\", \"items\", \"values\", \"update\", \"clear\", \"pop\"]);\n\nexpose(MapType.prototype.get, [\"key\", \"p\", \"default\", \"p=\", null]);\nexpose(MapType.prototype.items, []);\nexpose(MapType.prototype.values, []);\nexpose(MapType.prototype.update, [\"others\", \"*\", \"kwargs\", \"**\"]);\nexpose(MapType.prototype.clear, []);\nexpose(MapType.prototype.pop, [\"key\", \"p\", \"default\", \"p=\", Object]);\n\nexport let maptype = new MapType(null, \"dict\", \"An object that maps keys to values.\");\n\n\nexport class SetType extends Type\n{\n\t// Convert ``obj`` to a set\n\t[symbols.call](obj=[])\n\t{\n\t\tlet iter = _iter(obj);\n\n\t\tlet result = new Set();\n\t\tfor (;;)\n\t\t{\n\t\t\tlet value = iter.next();\n\t\t\tif (value.done)\n\t\t\t\treturn result;\n\t\t\tresult.add(value.value);\n\t\t}\n\t}\n\n\tadd(obj, items)\n\t{\n\t\tfor (let item of items)\n\t\t\tobj.add(item);\n\t}\n\n\tclear(obj)\n\t{\n\t\tobj.clear();\n\t\treturn null;\n\t}\n};\n\nSetType.prototype.attrs = new Set([\"add\", \"clear\"]);\n\nexpose(SetType.prototype.add, [\"items\", \"*\"]);\nexpose(SetType.prototype.clear, []);\nexpose(SetType.prototype, [\"iterable\", \"p=\", []], {name: \"set\"});\n\nexport let settype = new SetType(null, \"set\", \"A set.\");\n\n\nexport class DateType extends Type\n{\n\t// Return a ``Date`` object from the arguments passed in\n\t[symbols.call](year, month, day)\n\t{\n\t\treturn new Date_(year, month, day);\n\t}\n\n\tinstancecheck(obj)\n\t{\n\t\treturn (obj instanceof Date_);\n\t}\n\n\tweekday(obj)\n\t{\n\t\treturn datetimetype.weekday(obj._date);\n\t}\n\n\tcalendar(obj, firstweekday=0, mindaysinfirstweek=4)\n\t{\n\t\treturn datetimetype.calendar(obj._date, firstweekday, mindaysinfirstweek);\n\t}\n\n\tweek(obj, firstweekday=0, mindaysinfirstweek=4)\n\t{\n\t\treturn datetimetype.calendar(obj._date, firstweekday, mindaysinfirstweek)[1];\n\t}\n\n\tday(obj)\n\t{\n\t\treturn obj._date.getDate();\n\t}\n\n\tmonth(obj)\n\t{\n\t\treturn obj._date.getMonth()+1;\n\t}\n\n\tyear(obj)\n\t{\n\t\treturn obj._date.getFullYear();\n\t}\n\n\tdate(obj)\n\t{\n\t\treturn obj;\n\t}\n\n\tmimeformat(obj)\n\t{\n\t\tlet weekdayname = [\"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\"];\n\t\tlet monthname = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\n\t\tlet d = obj._date;\n\n\t\treturn weekdayname[datetimetype.weekday(d)] + \", \" + _lpad(d.getDate(), \"0\", 2) + \" \" + monthname[d.getMonth()] + \" \" + d.getFullYear();\n\t}\n\n\tisoformat(obj)\n\t{\n\t\tlet d = obj._date;\n\t\treturn d.getFullYear() + \"-\" + _lpad((d.getMonth()+1).toString(), \"0\", 2) + \"-\" + _lpad(d.getDate().toString(), \"0\", 2);\n\t}\n\n\tyearday(obj)\n\t{\n\t\treturn datetimetype.yearday(obj._date);\n\t}\n};\n\nDateType.prototype.attrs = new Set([\n\t\"weekday\",\n\t\"week\",\n\t\"calendar\",\n\t\"day\",\n\t\"month\",\n\t\"year\",\n\t\"date\",\n\t\"mimeformat\",\n\t\"isoformat\",\n\t\"yearday\"\n]);\n\nexpose(DateType.prototype.weekday, []);\nexpose(DateType.prototype.calendar, [\"firstweekday\", \"pk=\", 0, \"mindaysinfirstweek\", \"pk=\", 4]);\nexpose(DateType.prototype.week, [\"firstweekday\", \"pk=\", 0, \"mindaysinfirstweek\", \"pk=\", 4]);\nexpose(DateType.prototype.day, []);\nexpose(DateType.prototype.month, []);\nexpose(DateType.prototype.year, []);\nexpose(DateType.prototype.date, []);\nexpose(DateType.prototype.mimeformat, []);\nexpose(DateType.prototype.isoformat, []);\nexpose(DateType.prototype.yearday, []);\nexpose(DateType.prototype, [\"year\", \"pk\", \"month\", \"pk\", \"day\", \"pk\"], {name: \"date\"});\n\nexport let datetype = new DateType(null, \"date\", \"A date\");\n\n\nexport class DateTimeType extends Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn Object.prototype.toString.call(obj) == \"[object Date]\";\n\t}\n\n\tweekday(obj)\n\t{\n\t\tlet d = obj.getDay();\n\t\treturn d ? d-1 : 6;\n\t}\n\n\tcalendar(obj, firstweekday=0, mindaysinfirstweek=4)\n\t{\n\t\t// Normalize parameters\n\t\tfirstweekday = _mod(firstweekday, 7);\n\t\tif (mindaysinfirstweek < 1)\n\t\t\tmindaysinfirstweek = 1;\n\t\telse if (mindaysinfirstweek > 7)\n\t\t\tmindaysinfirstweek = 7;\n\n\t\t// ``obj`` might be in the first week of the next year, or last week of\n\t\t// the previous year, so we might have to try those too.\n\t\tfor (let offset = +1; offset >= -1; --offset)\n\t\t{\n\t\t\tlet year = obj.getFullYear() + offset;\n\t\t\t// ``refdate`` will always be in week 1\n\t\t\tlet refDate = new Date(year, 0, mindaysinfirstweek);\n\t\t\t// Go back to the start of ``refdate``s week (i.e. day 1 of week 1)\n\t\t\tlet weekDayDiff = _mod(this.weekday(refDate) - firstweekday, 7);\n\t\t\tlet weekStartYear = refDate.getFullYear();\n\t\t\tlet weekStartMonth = refDate.getMonth();\n\t\t\tlet weekStartDay = refDate.getDate() - weekDayDiff;\n\t\t\tlet weekStart = new Date(weekStartYear, weekStartMonth, weekStartDay);\n\t\t\t// Is our date ``obj`` at or after day 1 of week 1?\n\t\t\tif (obj.getTime() >= weekStart.getTime())\n\t\t\t{\n\t\t\t\tlet diff = SubAST.prototype._do(obj, weekStart);\n\t\t\t\t// Add 1, because the first week is week 1, not week 0\n\t\t\t\tlet week = Math.floor(diff.days()/7) + 1;\n\t\t\t\treturn [year, week, this.weekday(obj)];\n\t\t\t}\n\t\t}\n\t}\n\n\tweek(obj, firstweekday=0, mindaysinfirstweek=4)\n\t{\n\t\treturn this.calendar(obj, firstweekday, mindaysinfirstweek)[1];\n\t}\n\n\tday(obj)\n\t{\n\t\treturn obj.getDate();\n\t}\n\n\tmonth(obj)\n\t{\n\t\treturn obj.getMonth()+1;\n\t}\n\n\tyear(obj)\n\t{\n\t\treturn obj.getFullYear();\n\t}\n\n\thour(obj)\n\t{\n\t\treturn obj.getHours();\n\t}\n\n\tminute(obj)\n\t{\n\t\treturn obj.getMinutes();\n\t}\n\n\tsecond(obj)\n\t{\n\t\treturn obj.getSeconds();\n\t}\n\n\tmicrosecond(obj)\n\t{\n\t\treturn obj.getMilliseconds() * 1000;\n\t}\n\n\tdate(obj)\n\t{\n\t\treturn new Date_(this.year(obj), this.month(obj), this.day(obj));\n\t}\n\n\tmimeformat(obj)\n\t{\n\t\tlet weekdayname = [\"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\"];\n\t\tlet monthname = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\n\n\t\treturn weekdayname[this.weekday(obj)] + \", \" + _lpad(obj.getDate(), \"0\", 2) + \" \" + monthname[obj.getMonth()] + \" \" + obj.getFullYear() + \" \" + _lpad(obj.getHours(), \"0\", 2) + \":\" + _lpad(obj.getMinutes(), \"0\", 2) + \":\" + _lpad(obj.getSeconds(), \"0\", 2) + \" GMT\";\n\t}\n\n\tisoformat(obj)\n\t{\n\t\tlet year = obj.getFullYear();\n\t\tlet month = obj.getMonth()+1;\n\t\tlet day = obj.getDate();\n\t\tlet hour = obj.getHours();\n\t\tlet minute = obj.getMinutes();\n\t\tlet second = obj.getSeconds();\n\t\tlet ms = obj.getMilliseconds();\n\t\tlet result = year + \"-\" + _lpad(month.toString(), \"0\", 2) + \"-\" + _lpad(day.toString(), \"0\", 2) + \"T\" + _lpad(hour.toString(), \"0\", 2) + \":\" + _lpad(minute.toString(), \"0\", 2) + \":\" + _lpad(second.toString(), \"0\", 2);\n\t\tif (ms)\n\t\t\tresult += \".\" + _lpad(ms.toString(), \"0\", 3) + \"000\";\n\t\treturn result;\n\t}\n\n\tyearday(obj)\n\t{\n\t\tlet leap = _isleap(obj) ? 1 : 0;\n\t\tlet day = obj.getDate();\n\t\tswitch (obj.getMonth())\n\t\t{\n\t\t\tcase 0:\n\t\t\t\treturn day;\n\t\t\tcase 1:\n\t\t\t\treturn 31 + day;\n\t\t\tcase 2:\n\t\t\t\treturn 31 + 28 + leap + day;\n\t\t\tcase 3:\n\t\t\t\treturn 31 + 28 + leap + 31 + day;\n\t\t\tcase 4:\n\t\t\t\treturn 31 + 28 + leap + 31 + 30 + day;\n\t\t\tcase 5:\n\t\t\t\treturn 31 + 28 + leap + 31 + 30 + 31 + day;\n\t\t\tcase 6:\n\t\t\t\treturn 31 + 28 + leap + 31 + 30 + 31 + 30 + day;\n\t\t\tcase 7:\n\t\t\t\treturn 31 + 28 + leap + 31 + 30 + 31 + 30 + 31 + day;\n\t\t\tcase 8:\n\t\t\t\treturn 31 + 28 + leap + 31 + 30 + 31 + 30 + 31 + 31 + day;\n\t\t\tcase 9:\n\t\t\t\treturn 31 + 28 + leap + 31 + 30 + 31 + 30 + 31 + 31 + 30 + day;\n\t\t\tcase 10:\n\t\t\t\treturn 31 + 28 + leap + 31 + 30 + 31 + 30 + 31 + 31 + 30 + 31 + day;\n\t\t\tcase 11:\n\t\t\t\treturn 31 + 28 + leap + 31 + 30 + 31 + 30 + 31 + 31 + 30 + 31 + 30 + day;\n\t\t}\n\t}\n};\n\nDateTimeType.prototype.attrs = new Set([\n\t\"weekday\",\n\t\"week\",\n\t\"calendar\",\n\t\"day\",\n\t\"month\",\n\t\"year\",\n\t\"hour\",\n\t\"minute\",\n\t\"second\",\n\t\"microsecond\",\n\t\"date\",\n\t\"mimeformat\",\n\t\"isoformat\",\n\t\"yearday\"\n]);\n\nexpose(DateTimeType.prototype.weekday, []);\nexpose(DateTimeType.prototype.calendar, [\"firstweekday\", \"pk=\", 0, \"mindaysinfirstweek\", \"pk=\", 4]);\nexpose(DateTimeType.prototype.week, [\"firstweekday\", \"pk=\", 0, \"mindaysinfirstweek\", \"pk=\", 4]);\nexpose(DateTimeType.prototype.day, []);\nexpose(DateTimeType.prototype.month, []);\nexpose(DateTimeType.prototype.year, []);\nexpose(DateTimeType.prototype.hour, []);\nexpose(DateTimeType.prototype.minute, []);\nexpose(DateTimeType.prototype.second, []);\nexpose(DateTimeType.prototype.microsecond, []);\nexpose(DateTimeType.prototype.date, []);\nexpose(DateTimeType.prototype.mimeformat, []);\nexpose(DateTimeType.prototype.isoformat, []);\nexpose(DateTimeType.prototype.yearday, []);\nexpose(DateTimeType.prototype, [\"year\", \"pk\", \"month\", \"pk\", \"day\", \"pk\", \"hour\", \"pk=\", 0, \"minute\", \"pk=\", 0, \"second\", \"pk=\", 0, \"microsecond\", \"pk=\", 0], {name: \"datetime\"});\n\nexport let datetimetype = new DateTimeType(null, \"datetime\", \"A datetime\");\n\n\nexport class ObjectType extends Type\n{\n\tgetattr(obj, attrname)\n\t{\n\t\tlet result;\n\t\tif (obj && typeof(obj[symbols.getattr]) === \"function\") // test this before the generic object test\n\t\t\tresult = obj[symbols.getattr](attrname);\n\t\telse\n\t\t\tresult = obj[attrname];\n\t\tif (typeof(result) !== \"function\")\n\t\t\treturn result;\n\t\tlet realresult = function(...args) {\n\t\t\t// We can use ``apply`` here, as we know that ``obj`` is a real object.\n\t\t\treturn result.apply(obj, args);\n\t\t};\n\t\trealresult._ul4_name = result._ul4_name || result.name;\n\t\trealresult._ul4_signature = result._ul4_signature;\n\t\trealresult._ul4_needsobject = result._ul4_needsobject;\n\t\trealresult._ul4_needscontext = result._ul4_needscontext;\n\t\treturn realresult;\n\t}\n\n\tget(obj, key, default_=null)\n\t{\n\t\tlet result = obj[key];\n\t\tif (result === undefined)\n\t\t\treturn default_;\n\t\treturn result;\n\t}\n\n\titems(obj)\n\t{\n\t\tlet result = [];\n\t\tfor (let key in obj)\n\t\t\tresult.push([key, obj[key]]);\n\t\treturn result;\n\t}\n\n\tvalues(obj)\n\t{\n\t\tlet result = [];\n\t\tfor (let key in obj)\n\t\t\tresult.push(obj[key]);\n\t\treturn result;\n\t}\n\n\tclear(obj)\n\t{\n\t\tfor (let key in obj)\n\t\t\tdelete obj[key];\n\t}\n};\n\nObjectType.prototype.attrs = new Set([\"get\", \"items\", \"values\", \"update\", \"clear\"]);\n\nexpose(ObjectType.prototype.get, [\"key\", \"p\", \"default\", \"p=\", null]);\nexpose(ObjectType.prototype.items, []);\nexpose(ObjectType.prototype.values, []);\nexpose(ObjectType.prototype.clear, []);\n\nexport let objecttype = new ObjectType(null, \"dict\", \"An object that maps keys to values.\");\n\n\nexport class GenericType extends Type\n{\n\tconstructor(constructor)\n\t{\n\t\tsuper(constructor.classmodule || null, constructor.classname || constructor.name, constructor.classdoc || null);\n\t\tthis._constructor = constructor;\n\t}\n\n\tgetattr(obj, attrname)\n\t{\n\t\tif (typeof(obj[symbols.getattr]) === \"function\")\n\t\t\treturn obj[symbols.getattr](attrname);\n\t\telse\n\t\t\tthrow new AttributeError(obj, attrname);\n\t}\n\n\thasattr(obj, attrname)\n\t{\n\t\tif (typeof(obj[symbols.getattr]) === \"function\")\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tobj[symbols.getattr](attrname);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tcatch (exc)\n\t\t\t{\n\t\t\t\tif (exc instanceof AttributeError && exc.obj === object)\n\t\t\t\t\treturn false;\n\t\t\t\telse\n\t\t\t\t\tthrow exc;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\treturn false;\n\t}\n\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof this._constructor;\n\t}\n}\n\nexport let Protocol = {\n\tattrs: new Set(),\n\n\tul4type: function ul4type()\n\t{\n\t\treturn \"Protocol\";\n\t},\n\n\tdir: function dir()\n\t{\n\t\treturn this.attrs;\n\t},\n\n\tget: function get(obj)\n\t{\n\t\tif (_isstr(obj))\n\t\t\treturn StrProtocol;\n\t\telse if (_islist(obj))\n\t\t\treturn ListProtocol;\n\t\telse if (_isdate(obj))\n\t\t\treturn DateProtocol;\n\t\telse if (_isset(obj))\n\t\t\treturn SetProtocol;\n\t\telse if (_ismap(obj))\n\t\t\treturn MapProtocol;\n\t\telse if (_isdatetime(obj))\n\t\t\treturn DateTimeProtocol;\n\t\telse if (_isobject(obj))\n\t\t\treturn ObjectProtocol;\n\t\telse\n\t\t\treturn Protocol;\n\t},\n\n\tgetattr: function getattr(obj, attrname)\n\t{\n\t\tif (obj === null || obj === undefined)\n\t\t\tthrow new AttributeError(obj, attrname);\n\t\telse if (typeof(obj[symbols.getattr]) === \"function\")\n\t\t\treturn obj[symbols.getattr](attrname);\n\t\telse if (this.attrs.has(attrname))\n\t\t{\n\t\t\tlet attr = this[attrname];\n\t\t\tlet realattr = function realattr(...args) {\n\t\t\t\treturn attr.apply(this, [obj, ...args]);\n\t\t\t};\n\t\t\t// Unfortunately we can't set ``realattr.name``;\n\t\t\trealattr._ul4_name = attr._ul4_name || attr.name;\n\t\t\trealattr._ul4_signature = attr._ul4_signature;\n\t\t\trealattr._ul4_needsobject = attr._ul4_needsobject;\n\t\t\trealattr._ul4_needscontext = attr._ul4_needscontext;\n\t\t\treturn realattr;\n\t\t}\n\t\telse\n\t\t\tthrow new AttributeError(obj, attrname);\n\t},\n\n\thasattr: function hasattr(obj, attrname)\n\t{\n\t\tif (obj === null || obj === undefined)\n\t\t\treturn false;\n\t\telse if (typeof(obj[symbols.getattr]) === \"function\")\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tobj[symbols.getattr](attrname);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tcatch (exc)\n\t\t\t{\n\t\t\t\tif (exc instanceof AttributeError && exc.obj === object)\n\t\t\t\t\treturn false;\n\t\t\t\telse\n\t\t\t\t\tthrow exc;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\treturn this.attrs.has(attrname);\n\t}\n};\n\n\nexport let StrProtocol = _extend(Protocol,\n{\n\tattrs: new Set([\n\t\t\"split\",\n\t\t\"rsplit\",\n\t\t\"splitlines\",\n\t\t\"strip\",\n\t\t\"lstrip\",\n\t\t\"rstrip\",\n\t\t\"upper\",\n\t\t\"lower\",\n\t\t\"capitalize\",\n\t\t\"startswith\",\n\t\t\"endswith\",\n\t\t\"replace\",\n\t\t\"count\",\n\t\t\"find\",\n\t\t\"rfind\",\n\t\t\"join\"\n\t]),\n\n\tul4type: function ul4type(obj)\n\t{\n\t\treturn \"str\";\n\t},\n\n\tcount: function count(obj, sub, start=null, end=null)\n\t{\n\t\treturn _count(obj, sub, start, end);\n\t},\n\n\tfind: function find(obj, sub, start=null, end=null)\n\t{\n\t\treturn _find(obj, sub, start, end);\n\t},\n\n\trfind: function rfind(obj, sub, start=null, end=null)\n\t{\n\t\treturn _rfind(obj, sub, start, end);\n\t},\n\n\treplace: function replace(obj, old, new_, count=null)\n\t{\n\t\tif (count === null)\n\t\t\tcount = obj.length;\n\n\t\tlet result = [];\n\t\twhile (obj.length)\n\t\t{\n\t\t\tlet pos = obj.indexOf(old);\n\t\t\tif (pos === -1 || !count--)\n\t\t\t{\n\t\t\t\tresult.push(obj);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tresult.push(obj.substr(0, pos));\n\t\t\tresult.push(new_);\n\t\t\tobj = obj.substr(pos + old.length);\n\t\t}\n\t\treturn result.join(\"\");\n\t},\n\n\tstrip: function strip(obj, chars=null)\n\t{\n\t\tchars = chars || \" \\r\\n\\t\";\n\t\tif (typeof(chars) !== \"string\")\n\t\t\tthrow new TypeError(\"strip() requires a string argument\");\n\n\t\twhile (obj && chars.indexOf(obj[0]) >= 0)\n\t\t\tobj = obj.substr(1);\n\t\twhile (obj && chars.indexOf(obj[obj.length-1]) >= 0)\n\t\t\tobj = obj.substr(0, obj.length-1);\n\t\treturn obj;\n\t},\n\n\tlstrip: function lstrip(obj, chars=null)\n\t{\n\t\tchars = chars || \" \\r\\n\\t\";\n\t\tif (typeof(chars) !== \"string\")\n\t\t\tthrow new TypeError(\"lstrip() requires a string argument\");\n\n\t\twhile (obj && chars.indexOf(obj[0]) >= 0)\n\t\t\tobj = obj.substr(1);\n\t\treturn obj;\n\t},\n\n\trstrip: function rstrip(obj, chars=null)\n\t{\n\t\tchars = chars || \" \\r\\n\\t\";\n\t\tif (typeof(chars) !== \"string\")\n\t\t\tthrow new TypeError(\"rstrip() requires a string argument\");\n\n\t\twhile (obj && chars.indexOf(obj[obj.length-1]) >= 0)\n\t\t\tobj = obj.substr(0, obj.length-1);\n\t\treturn obj;\n\t},\n\n\tsplit: function split(obj, sep=null, maxsplit=null)\n\t{\n\t\tif (sep !== null && typeof(sep) !== \"string\")\n\t\t\tthrow new TypeError(\"split() requires a string\");\n\n\t\tif (maxsplit === null)\n\t\t{\n\t\t\tlet result = obj.split(sep !== null ? sep : /[ \\n\\r\\t]+/);\n\t\t\tif (sep === null)\n\t\t\t{\n\t\t\t\tif (result.length && !result[0].length)\n\t\t\t\t\tresult.splice(0, 1);\n\t\t\t\tif (result.length && !result[result.length-1].length)\n\t\t\t\t\tresult.splice(-1);\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (sep !== null)\n\t\t\t{\n\t\t\t\tlet result = [];\n\t\t\t\twhile (obj.length)\n\t\t\t\t{\n\t\t\t\t\tlet pos = obj.indexOf(sep);\n\t\t\t\t\tif (pos === -1 || !maxsplit--)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.push(obj);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tresult.push(obj.substr(0, pos));\n\t\t\t\t\tobj = obj.substr(pos + sep.length);\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlet result = [];\n\t\t\t\twhile (obj.length)\n\t\t\t\t{\n\t\t\t\t\tobj = StrProtocol.lstrip(obj, null);\n\t\t\t\t\tlet part;\n\t\t\t\t\tif (!maxsplit--)\n\t\t\t\t\t\t part = obj; // Take the rest of the string\n\t\t\t\t\telse\n\t\t\t\t\t\tpart = obj.split(/[ \\n\\r\\t]+/, 1)[0];\n\t\t\t\t\tif (part.length)\n\t\t\t\t\t\tresult.push(part);\n\t\t\t\t\tobj = obj.substr(part.length);\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}\n\t},\n\n\trsplit: function rsplit(obj, sep=null, maxsplit=null)\n\t{\n\t\tif (sep !== null && typeof(sep) !== \"string\")\n\t\t\tthrow new TypeError(\"rsplit() requires a string as second argument\");\n\n\t\tif (maxsplit === null)\n\t\t{\n\t\t\tlet result = obj.split(sep !== null ? sep : /[ \\n\\r\\t]+/);\n\t\t\tif (sep === null)\n\t\t\t{\n\t\t\t\tif (result.length && !result[0].length)\n\t\t\t\t\tresult.splice(0, 1);\n\t\t\t\tif (result.length && !result[result.length-1].length)\n\t\t\t\t\tresult.splice(-1);\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (sep !== null)\n\t\t\t{\n\t\t\t\tlet result = [];\n\t\t\t\twhile (obj.length)\n\t\t\t\t{\n\t\t\t\t\tlet pos = obj.lastIndexOf(sep);\n\t\t\t\t\tif (pos === -1 || !maxsplit--)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.unshift(obj);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tresult.unshift(obj.substr(pos+sep.length));\n\t\t\t\t\tobj = obj.substr(0, pos);\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlet result = [];\n\t\t\t\twhile (obj.length)\n\t\t\t\t{\n\t\t\t\t\tobj = StrProtocol.rstrip(obj);\n\t\t\t\t\tlet part;\n\t\t\t\t\tif (!maxsplit--)\n\t\t\t\t\t\t part = obj; // Take the rest of the string\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tpart = obj.split(/[ \\n\\r\\t]+/);\n\t\t\t\t\t\tpart = part[part.length-1];\n\t\t\t\t\t}\n\t\t\t\t\tif (part.length)\n\t\t\t\t\t\tresult.unshift(part);\n\t\t\t\t\tobj = obj.substr(0, obj.length-part.length);\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}\n\t},\n\n\tsplitlines: function splitlines(obj, keepends=false)\n\t{\n\t\tlet pos = 0;\n\t\tlet startpos;\n\t\tlet lookingAtLineEnd = function lookingAtLineEnd()\n\t\t{\n\t\t\tlet c = obj[pos];\n\t\t\tif (c === '\\n' || c == '\\u000B' || c == '\\u000C' || c == '\\u001C' || c == '\\u001D' || c == '\\u001E' || c == '\\u0085' || c == '\\u2028' || c == '\\u2029')\n\t\t\t\treturn 1;\n\t\t\tif (c === '\\r')\n\t\t\t{\n\t\t\t\tif (pos == length-1)\n\t\t\t\t\treturn 1;\n\t\t\t\tif (obj[pos+1] === '\\n')\n\t\t\t\t\treturn 2;\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\treturn 0;\n\t\t};\n\n\t\tlet result = [], length = obj.length;\n\n\t\tfor (pos = 0, startpos = 0;;)\n\t\t{\n\t\t\tif (pos >= length)\n\t\t\t{\n\t\t\t\tif (startpos != pos)\n\t\t\t\t\tresult.push(obj.substring(startpos));\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\tlet lineendlen = lookingAtLineEnd();\n\t\t\tif (!lineendlen)\n\t\t\t\t++pos;\n\t\t\telse\n\t\t\t{\n\t\t\t\tlet endpos = pos + (keepends ? lineendlen : 0);\n\t\t\t\tresult.push(obj.substring(startpos, endpos));\n\t\t\t\tpos += lineendlen;\n\t\t\t\tstartpos = pos;\n\t\t\t}\n\t\t}\n\t},\n\n\tlower: function lower(obj)\n\t{\n\t\treturn obj.toLowerCase();\n\t},\n\n\tupper: function upper(obj)\n\t{\n\t\treturn obj.toUpperCase();\n\t},\n\n\tcapitalize: function capitalize(obj)\n\t{\n\t\tif (obj.length)\n\t\t\tobj = obj[0].toUpperCase() + obj.slice(1).toLowerCase();\n\t\treturn obj;\n\t},\n\n\tjoin: function join(obj, iterable)\n\t{\n\t\tlet resultlist = [];\n\t\tfor (let iter = _iter(iterable);;)\n\t\t{\n\t\t\tlet item = iter.next();\n\t\t\tif (item.done)\n\t\t\t\tbreak;\n\t\t\tresultlist.push(item.value);\n\t\t}\n\t\treturn resultlist.join(obj);\n\t},\n\n\tstartswith: function startswith(obj, prefix)\n\t{\n\t\tif (typeof(prefix) === \"string\")\n\t\t\treturn obj.substr(0, prefix.length) === prefix;\n\t\telse if (_islist(prefix))\n\t\t{\n\t\t\tfor (let singlepre of prefix)\n\t\t\t{\n\t\t\t\tif (obj.substr(0, singlepre.length) === singlepre)\n\t\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\telse\n\t\t\tthrow new TypeError(\"startswith() argument must be string\");\n\t},\n\n\tendswith: function endswith(obj, suffix)\n\t{\n\t\tif (typeof(suffix) === \"string\")\n\t\t\treturn obj.substr(obj.length-suffix.length) === suffix;\n\t\telse if (_islist(suffix))\n\t\t{\n\t\t\tfor (let singlesuf of suffix)\n\t\t\t{\n\t\t\t\tif (obj.substr(obj.length-singlesuf.length) === singlesuf)\n\t\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\telse\n\t\t\tthrow new TypeError(\"endswith() argument must be string or list of strings\");\n\t}\n});\n\nexpose(StrProtocol.count, [\"sub\", \"p\", \"start\", \"p=\", null, \"end\", \"p=\", null]);\nexpose(StrProtocol.find, [\"sub\", \"p\", \"start\", \"p=\", null, \"end\", \"p=\", null]);\nexpose(StrProtocol.rfind, [\"sub\", \"p\", \"start\", \"p=\", null, \"end\", \"p=\", null]);\nexpose(StrProtocol.replace, [\"old\", \"p\", \"new\", \"p\", \"count\", \"p=\", null]);\nexpose(StrProtocol.strip, [\"chars\", \"p=\", null]);\nexpose(StrProtocol.lstrip, [\"chars\", \"p=\", null]);\nexpose(StrProtocol.rstrip, [\"chars\", \"p=\", null]);\nexpose(StrProtocol.split, [\"sep\", \"pk=\", null, \"maxsplit\", \"pk=\", null]);\nexpose(StrProtocol.rsplit, [\"sep\", \"pk=\", null, \"maxsplit\", \"pk=\", null]);\nexpose(StrProtocol.splitlines, [\"keepends\", \"pk=\", false]);\nexpose(StrProtocol.lower, []);\nexpose(StrProtocol.upper, []);\nexpose(StrProtocol.capitalize, []);\nexpose(StrProtocol.join, [\"iterable\", \"p\"]);\nexpose(StrProtocol.startswith, [\"prefix\", \"p\"]);\nexpose(StrProtocol.endswith, [\"suffix\", \"p\"]);\n\n\nexport let ListProtocol = _extend(Protocol,\n{\n\tattrs: new Set([\n\t\t\"append\",\n\t\t\"insert\",\n\t\t\"pop\",\n\t\t\"count\",\n\t\t\"find\",\n\t\t\"rfind\"\n\t]),\n\n\tul4type: function ul4type(obj)\n\t{\n\t\treturn \"list\";\n\t},\n\n\tappend: function append(obj, items)\n\t{\n\t\tfor (let item of items)\n\t\t\tobj.push(item);\n\t\treturn null;\n\t},\n\n\tinsert: function insert(obj, pos, items)\n\t{\n\t\tif (pos < 0)\n\t\t\tpos += obj.length;\n\n\t\tfor (let item of items)\n\t\t\tobj.splice(pos++, 0, item);\n\t\treturn null;\n\t},\n\n\tpop: function pop(obj, pos)\n\t{\n\t\tif (pos < 0)\n\t\t\tpos += obj.length;\n\n\t\tlet result = obj[pos];\n\t\tobj.splice(pos, 1);\n\t\treturn result;\n\t},\n\n\tcount: function count(obj, sub, start=null, end=null)\n\t{\n\t\treturn _count(obj, sub, start, end);\n\t},\n\n\tfind: function find(obj, sub, start=null, end=null)\n\t{\n\t\treturn _find(obj, sub, start, end);\n\t},\n\n\trfind: function rfind(obj, sub, start=null, end=null)\n\t{\n\t\treturn _rfind(obj, sub, start, end);\n\t}\n});\n\nexpose(ListProtocol.append, [\"items\", \"*\"]);\nexpose(ListProtocol.insert, [\"pos\", \"p\", \"items\", \"*\"]);\nexpose(ListProtocol.pop, [\"pos\", \"p=\", -1]);\nexpose(ListProtocol.count, [\"sub\", \"p\", \"start\", \"p=\", null, \"end\", \"p=\", null]);\nexpose(ListProtocol.find, [\"sub\", \"p\", \"start\", \"p=\", null, \"end\", \"p=\", null]);\nexpose(ListProtocol.rfind, [\"sub\", \"p\", \"start\", \"p=\", null, \"end\", \"p=\", null]);\n\n\nexport let MapProtocol = _extend(Protocol,\n{\n\tattrs: new Set([\"get\", \"items\", \"values\", \"update\", \"clear\", \"pop\"]),\n\n\tul4type: function ul4type(obj)\n\t{\n\t\treturn \"dict\";\n\t},\n\n\tgetattr: function getattr(obj, attrname)\n\t{\n\t\tif (this.attrs.has(attrname))\n\t\t{\n\t\t\tlet attr = this[attrname];\n\t\t\tlet realattr = function realattr(...args) {\n\t\t\t\treturn attr.apply(this, [obj, ...args]);\n\t\t\t};\n\t\t\t// Unfortunately we can't set ``realattr.name``;\n\t\t\trealattr._ul4_name = attr._ul4_name || attr.name;\n\t\t\trealattr._ul4_signature = attr._ul4_signature;\n\t\t\trealattr._ul4_needsobject = attr._ul4_needsobject;\n\t\t\trealattr._ul4_needscontext = attr._ul4_needscontext;\n\t\t\treturn realattr;\n\t\t}\n\t\telse\n\t\t\treturn obj.get(attrname);\n\t},\n\n\tget: function get(obj, key, default_=null)\n\t{\n\t\tif (obj.has(key))\n\t\t\treturn obj.get(key);\n\t\treturn default_;\n\t},\n\n\titems: function items(obj)\n\t{\n\t\tlet result = [];\n\t\tfor (let [key, value] of obj)\n\t\t\tresult.push([key, value]);\n\t\treturn result;\n\t},\n\n\tvalues: function values(obj)\n\t{\n\t\tlet result = [];\n\t\tfor (let [key, value] of obj)\n\t\t\tresult.push(value);\n\t\treturn result;\n\t},\n\n\tupdate: function update(obj, others, kwargs)\n\t{\n\t\treturn _update(obj, others, kwargs);\n\t},\n\n\tclear: function clear(obj)\n\t{\n\t\tobj.clear();\n\t\treturn null;\n\t},\n\n\tpop: function pop(obj, key, default_=Object)\n\t{\n\t\tif (!obj.has(key))\n\t\t{\n\t\t\tif (default_ === Object)\n\t\t\t\tthrow new KeyError(obj, key);\n\t\t\telse\n\t\t\t\treturn default_;\n\t\t}\n\t\tlet result = obj.get(key);\n\t\tobj.delete(key);\n\t\treturn result;\n\t}\n});\n\nexpose(MapProtocol.get, [\"key\", \"p\", \"default\", \"p=\", null]);\nexpose(MapProtocol.items, []);\nexpose(MapProtocol.values, []);\nexpose(MapProtocol.update, [\"others\", \"*\", \"kwargs\", \"**\"]);\nexpose(MapProtocol.clear, []);\nexpose(MapProtocol.pop, [\"key\", \"p\", \"default\", \"p=\", Object]);\n\nexport let SetProtocol = _extend(Protocol,\n{\n\tattrs: new Set([\"add\", \"clear\"]),\n\n\tul4type: function ul4type(obj)\n\t{\n\t\treturn \"set\";\n\t},\n\n\tadd: function add(obj, items)\n\t{\n\t\tfor (let item of items)\n\t\t\tobj.add(item);\n\t},\n\n\tclear: function clear(obj)\n\t{\n\t\tobj.clear();\n\t\treturn null;\n\t}\n});\n\nexpose(SetProtocol.add, [\"items\", \"*\"]);\nexpose(SetProtocol.clear, []);\n\nexport let DateProtocol = _extend(Protocol,\n{\n\tattrs: new Set([\n\t\t\"weekday\",\n\t\t\"week\",\n\t\t\"calendar\",\n\t\t\"day\",\n\t\t\"month\",\n\t\t\"year\",\n\t\t\"date\",\n\t\t\"mimeformat\",\n\t\t\"isoformat\",\n\t\t\"yearday\"\n\t]),\n\n\tul4type: function ul4type(obj)\n\t{\n\t\treturn \"date\";\n\t},\n\n\tweekday: function weekday(obj)\n\t{\n\t\treturn DateTimeProtocol.weekday(obj._date);\n\t},\n\n\tcalendar: function calendar(obj, firstweekday=0, mindaysinfirstweek=4)\n\t{\n\t\treturn DateTimeProtocol.calendar(obj._date, firstweekday, mindaysinfirstweek);\n\t},\n\n\tweek: function week(obj, firstweekday=0, mindaysinfirstweek=4)\n\t{\n\t\treturn DateTimeProtocol.calendar(obj._date, firstweekday, mindaysinfirstweek)[1];\n\t},\n\n\tday: function day(obj)\n\t{\n\t\treturn obj._date.getDate();\n\t},\n\n\tmonth: function month(obj)\n\t{\n\t\treturn obj._date.getMonth()+1;\n\t},\n\n\tyear: function year(obj)\n\t{\n\t\treturn obj._date.getFullYear();\n\t},\n\n\tdate: function date(obj)\n\t{\n\t\treturn obj;\n\t},\n\n\tmimeformat: function mimeformat(obj)\n\t{\n\t\tlet weekdayname = [\"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\"];\n\t\tlet monthname = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\n\t\tlet d = obj._date;\n\n\t\treturn weekdayname[DateTimeProtocol.weekday(d)] + \", \" + _lpad(d.getDate(), \"0\", 2) + \" \" + monthname[d.getMonth()] + \" \" + d.getFullYear();\n\t},\n\n\tisoformat: function isoformat(obj)\n\t{\n\t\tlet d = obj._date;\n\t\treturn d.getFullYear() + \"-\" + _lpad((d.getMonth()+1).toString(), \"0\", 2) + \"-\" + _lpad(d.getDate().toString(), \"0\", 2);\n\t},\n\n\tyearday: function yearday(obj)\n\t{\n\t\treturn DateTimeProtocol.yearday(obj._date);\n\t}\n});\n\nexpose(DateProtocol.weekday, []);\nexpose(DateProtocol.calendar, [\"firstweekday\", \"pk=\", 0, \"mindaysinfirstweek\", \"pk=\", 4]);\nexpose(DateProtocol.week, [\"firstweekday\", \"pk=\", 0, \"mindaysinfirstweek\", \"pk=\", 4]);\nexpose(DateProtocol.day, []);\nexpose(DateProtocol.month, []);\nexpose(DateProtocol.year, []);\nexpose(DateProtocol.date, []);\nexpose(DateProtocol.mimeformat, []);\nexpose(DateProtocol.isoformat, []);\nexpose(DateProtocol.yearday, []);\n\n\nexport let DateTimeProtocol = _extend(Protocol,\n{\n\tattrs: new Set([\n\t\t\"weekday\",\n\t\t\"week\",\n\t\t\"calendar\",\n\t\t\"day\",\n\t\t\"month\",\n\t\t\"year\",\n\t\t\"hour\",\n\t\t\"minute\",\n\t\t\"second\",\n\t\t\"microsecond\",\n\t\t\"date\",\n\t\t\"mimeformat\",\n\t\t\"isoformat\",\n\t\t\"yearday\"\n\t]),\n\n\tul4type: function ul4type(obj)\n\t{\n\t\treturn \"datetime\";\n\t},\n\n\tweekday: function weekday(obj)\n\t{\n\t\tlet d = obj.getDay();\n\t\treturn d ? d-1 : 6;\n\t},\n\n\tcalendar: function calendar(obj, firstweekday=0, mindaysinfirstweek=4)\n\t{\n\t\t// Normalize parameters\n\t\tfirstweekday = _mod(firstweekday, 7);\n\t\tif (mindaysinfirstweek < 1)\n\t\t\tmindaysinfirstweek = 1;\n\t\telse if (mindaysinfirstweek > 7)\n\t\t\tmindaysinfirstweek = 7;\n\n\t\t// ``obj`` might be in the first week of the next year, or last week of\n\t\t// the previous year, so we might have to try those too.\n\t\tfor (let offset = +1; offset >= -1; --offset)\n\t\t{\n\t\t\tlet year = obj.getFullYear() + offset;\n\t\t\t// ``refdate`` will always be in week 1\n\t\t\tlet refDate = new Date(year, 0, mindaysinfirstweek);\n\t\t\t// Go back to the start of ``refdate``s week (i.e. day 1 of week 1)\n\t\t\tlet weekDayDiff = _mod(DateTimeProtocol.weekday(refDate) - firstweekday, 7);\n\t\t\tlet weekStartYear = refDate.getFullYear();\n\t\t\tlet weekStartMonth = refDate.getMonth();\n\t\t\tlet weekStartDay = refDate.getDate() - weekDayDiff;\n\t\t\tlet weekStart = new Date(weekStartYear, weekStartMonth, weekStartDay);\n\t\t\t// Is our date ``obj`` at or after day 1 of week 1?\n\t\t\tif (obj.getTime() >= weekStart.getTime())\n\t\t\t{\n\t\t\t\tlet diff = SubAST.prototype._do(obj, weekStart);\n\t\t\t\t// Add 1, because the first week is week 1, not week 0\n\t\t\t\tlet week = Math.floor(diff.days()/7) + 1;\n\t\t\t\treturn [year, week, DateTimeProtocol.weekday(obj)];\n\t\t\t}\n\t\t}\n\t},\n\n\tweek: function week(obj, firstweekday=0, mindaysinfirstweek=4)\n\t{\n\t\treturn DateTimeProtocol.calendar(obj, firstweekday, mindaysinfirstweek)[1];\n\t},\n\n\tday: function day(obj)\n\t{\n\t\treturn obj.getDate();\n\t},\n\n\tmonth: function month(obj)\n\t{\n\t\treturn obj.getMonth()+1;\n\t},\n\n\tyear: function year(obj)\n\t{\n\t\treturn obj.getFullYear();\n\t},\n\n\thour: function hour(obj)\n\t{\n\t\treturn obj.getHours();\n\t},\n\n\tminute: function minute(obj)\n\t{\n\t\treturn obj.getMinutes();\n\t},\n\n\tsecond: function second(obj)\n\t{\n\t\treturn obj.getSeconds();\n\t},\n\n\tmicrosecond: function microsecond(obj)\n\t{\n\t\treturn obj.getMilliseconds() * 1000;\n\t},\n\n\tdate: function date(obj)\n\t{\n\t\treturn new Date_(DateTimeProtocol.year(obj), DateTimeProtocol.month(obj), DateTimeProtocol.day(obj));\n\t},\n\n\tmimeformat: function mimeformat(obj)\n\t{\n\t\tlet weekdayname = [\"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\"];\n\t\tlet monthname = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\n\n\t\treturn weekdayname[DateTimeProtocol.weekday(obj)] + \", \" + _lpad(obj.getDate(), \"0\", 2) + \" \" + monthname[obj.getMonth()] + \" \" + obj.getFullYear() + \" \" + _lpad(obj.getHours(), \"0\", 2) + \":\" + _lpad(obj.getMinutes(), \"0\", 2) + \":\" + _lpad(obj.getSeconds(), \"0\", 2) + \" GMT\";\n\t},\n\n\tisoformat: function isoformat(obj)\n\t{\n\t\tlet year = obj.getFullYear();\n\t\tlet month = obj.getMonth()+1;\n\t\tlet day = obj.getDate();\n\t\tlet hour = obj.getHours();\n\t\tlet minute = obj.getMinutes();\n\t\tlet second = obj.getSeconds();\n\t\tlet ms = obj.getMilliseconds();\n\t\tlet result = year + \"-\" + _lpad(month.toString(), \"0\", 2) + \"-\" + _lpad(day.toString(), \"0\", 2) + \"T\" + _lpad(hour.toString(), \"0\", 2) + \":\" + _lpad(minute.toString(), \"0\", 2) + \":\" + _lpad(second.toString(), \"0\", 2);\n\t\tif (ms)\n\t\t\tresult += \".\" + _lpad(ms.toString(), \"0\", 3) + \"000\";\n\t\treturn result;\n\t},\n\n\tyearday: function yearday(obj)\n\t{\n\t\tlet leap = _isleap(obj) ? 1 : 0;\n\t\tlet day = obj.getDate();\n\t\tswitch (obj.getMonth())\n\t\t{\n\t\t\tcase 0:\n\t\t\t\treturn day;\n\t\t\tcase 1:\n\t\t\t\treturn 31 + day;\n\t\t\tcase 2:\n\t\t\t\treturn 31 + 28 + leap + day;\n\t\t\tcase 3:\n\t\t\t\treturn 31 + 28 + leap + 31 + day;\n\t\t\tcase 4:\n\t\t\t\treturn 31 + 28 + leap + 31 + 30 + day;\n\t\t\tcase 5:\n\t\t\t\treturn 31 + 28 + leap + 31 + 30 + 31 + day;\n\t\t\tcase 6:\n\t\t\t\treturn 31 + 28 + leap + 31 + 30 + 31 + 30 + day;\n\t\t\tcase 7:\n\t\t\t\treturn 31 + 28 + leap + 31 + 30 + 31 + 30 + 31 + day;\n\t\t\tcase 8:\n\t\t\t\treturn 31 + 28 + leap + 31 + 30 + 31 + 30 + 31 + 31 + day;\n\t\t\tcase 9:\n\t\t\t\treturn 31 + 28 + leap + 31 + 30 + 31 + 30 + 31 + 31 + 30 + day;\n\t\t\tcase 10:\n\t\t\t\treturn 31 + 28 + leap + 31 + 30 + 31 + 30 + 31 + 31 + 30 + 31 + day;\n\t\t\tcase 11:\n\t\t\t\treturn 31 + 28 + leap + 31 + 30 + 31 + 30 + 31 + 31 + 30 + 31 + 30 + day;\n\t\t}\n\t}\n});\n\nexpose(DateTimeProtocol.weekday, []);\nexpose(DateTimeProtocol.calendar, [\"firstweekday\", \"pk=\", 0, \"mindaysinfirstweek\", \"pk=\", 4]);\nexpose(DateTimeProtocol.week, [\"firstweekday\", \"pk=\", 0, \"mindaysinfirstweek\", \"pk=\", 4]);\nexpose(DateTimeProtocol.day, []);\nexpose(DateTimeProtocol.month, []);\nexpose(DateTimeProtocol.year, []);\nexpose(DateTimeProtocol.hour, []);\nexpose(DateTimeProtocol.minute, []);\nexpose(DateTimeProtocol.second, []);\nexpose(DateTimeProtocol.microsecond, []);\nexpose(DateTimeProtocol.date, []);\nexpose(DateTimeProtocol.mimeformat, []);\nexpose(DateTimeProtocol.isoformat, []);\nexpose(DateTimeProtocol.yearday, []);\n\n\nexport let ObjectProtocol = _extend(Protocol,\n{\n\tattrs: new Set([\"get\", \"items\", \"values\", \"update\", \"clear\"]),\n\n\tul4type: function ul4type(obj)\n\t{\n\t\treturn \"dict\";\n\t},\n\n\tgetattr: function getattr(obj, attrname)\n\t{\n\t\tlet result;\n\t\tif (obj && typeof(obj[symbols.getattr]) === \"function\") // test this before the generic object test\n\t\t\tresult = obj[symbols.getattr](attrname);\n\t\telse\n\t\t\tresult = obj[attrname];\n\t\tif (typeof(result) !== \"function\")\n\t\t\treturn result;\n\t\tlet realresult = function(...args) {\n\t\t\t// We can use ``apply`` here, as we know that ``obj`` is a real object.\n\t\t\treturn result.apply(obj, args);\n\t\t};\n\t\trealresult._ul4_name = result._ul4_name || result.name;\n\t\trealresult._ul4_signature = result._ul4_signature;\n\t\trealresult._ul4_needsobject = result._ul4_needsobject;\n\t\trealresult._ul4_needscontext = result._ul4_needscontext;\n\t\treturn realresult;\n\t},\n\n\tget: function get(obj, key, default_=null)\n\t{\n\t\tlet result = obj[key];\n\t\tif (result === undefined)\n\t\t\treturn default_;\n\t\treturn result;\n\t},\n\n\titems: function items(obj)\n\t{\n\t\tlet result = [];\n\t\tfor (let key in obj)\n\t\t\tresult.push([key, obj[key]]);\n\t\treturn result;\n\t},\n\n\tvalues: function values(obj)\n\t{\n\t\tlet result = [];\n\t\tfor (let key in obj)\n\t\t\tresult.push(obj[key]);\n\t\treturn result;\n\t},\n\n\tclear: function clear(obj)\n\t{\n\t\tfor (let key in obj)\n\t\t\tdelete obj[key];\n\t}\n});\n\nexpose(ObjectProtocol.get, [\"key\", \"p\", \"default\", \"p=\", null]);\nexpose(ObjectProtocol.items, []);\nexpose(ObjectProtocol.values, []);\nexpose(ObjectProtocol.clear, []);\n\n\nexport class Context\n{\n\tconstructor(vars=null, globals=null)\n\t{\n\t\tthis.vars = vars || {};\n\t\tthis.globals = _extend(builtins, globals || {});\n\t\tthis.indents = [];\n\t\tthis.escapes = [];\n\t\tthis._output = [];\n\t}\n\n\t/* Return a clone of the ``Context``, but with a fresh empty ``vars`` objects that inherits from the previous one.\n\t * This is used by the various comprehensions to avoid leaking loop variables.\n\t */\n\tinheritvars()\n\t{\n\t\tlet context = Object.create(this);\n\t\tcontext.vars = Object.create(this.vars);\n\t\treturn context;\n\t}\n\n\t/* Return a clone of the ``Context`` with one additional indentation (this is used by ``RenderAST``) */\n\twithindent(indent)\n\t{\n\t\tlet context = Object.create(this);\n\t\tif (indent !== null)\n\t\t{\n\t\t\tcontext.indents = this.indents.slice();\n\t\t\tcontext.indents.push(indent);\n\t\t}\n\t\treturn context;\n\t}\n\n\t/* Return a clone of the ``Context`` with the output buffer replaced (this is used by ``renders`` to collect the output in a separate buffer) */\n\treplaceoutput()\n\t{\n\t\tlet context = Object.create(this);\n\t\tcontext._output = [];\n\t\treturn context;\n\t}\n\n\treplacevars(vars)\n\t{\n\t\tlet context = Object.create(this);\n\t\tcontext.vars = vars;\n\t\treturn context;\n\t}\n\n\toutput(value)\n\t{\n\t\tfor (let escape of this.escapes)\n\t\t\tvalue = escape(value);\n\t\tthis._output.push(value);\n\t}\n\n\tgetoutput()\n\t{\n\t\treturn this._output.join(\"\");\n\t}\n\n\tget(name)\n\t{\n\t\tlet result = this.vars[name];\n\t\tif (result === undefined)\n\t\t\tresult = this.globals[name];\n\t\treturn result;\n\t}\n\n\tset(name, value)\n\t{\n\t\tthis.vars[name] = value;\n\t}\n};\n\n/// Exceptions\n\n// Note that extending ``Error`` doesn't work, so we do it the \"clasr\" way\nexport function Exception(message, fileName, lineNumber)\n{\n\tlet instance = new Error(message, fileName, lineNumber);\n\tif (Object.setPrototypeOf)\n\t\tObject.setPrototypeOf(instance, Object.getPrototypeOf(this));\n\telse\n\t\tinstance.__proto__ = this;\n\tinstance.__id__ = _nextid++;\n\tinstance.context = null;\n\treturn instance;\n};\n\nException.prototype = Object.create(Error.prototype, {\n\tconstructor: {\n\t\tvalue: Error,\n\t\tenumerable: false,\n\t\twritable: true,\n\t\tconfigurable: true\n\t}\n});\n\nif (Object.setPrototypeOf)\n\tObject.setPrototypeOf(Exception, Error);\nelse\n\tException.__proto__ = Error;\n\nException.prototype[symbols.getattr] = function getattr(attrname)\n{\n\tswitch (attrname)\n\t{\n\t\tcase \"context\":\n\t\t\treturn this.context;\n\t\tdefault:\n\t\t\tthrow new AttributeError(this, attrname);\n\t}\n};\n\n// Exceptions used internally by UL4 for flow control\nexport class InternalException extends Exception\n{\n};\n\n// Control flow exceptions\nexport class ReturnException extends InternalException\n{\n\tconstructor(result)\n\t{\n\t\tsuper(\"return\");\n\t\tthis.result = result;\n\t}\n};\n\nexport class BreakException extends InternalException\n{\n\tconstructor()\n\t{\n\t\tsuper(\"break\");\n\t}\n};\n\nexport class ContinueException extends InternalException\n{\n\tconstructor()\n\t{\n\t\tsuper(\"continue\");\n\t}\n};\n\n// Real exceptions raised by various parts of UL4\nexport class SyntaxError extends Exception\n{\n};\n\nexport class LValueRequiredError extends SyntaxError\n{\n\tconstructor()\n\t{\n\t\tsuper(\"lvalue required\");\n\t}\n};\n\nexport class TypeError extends Exception\n{\n};\n\nexport class ValueError extends Exception\n{\n};\n\nexport class ArgumentError extends Exception\n{\n};\n\nexport class ParameterError extends Exception\n{\n};\n\nexport class NotSubscriptableError extends Exception\n{\n\tconstructor(obj)\n\t{\n\t\tsuper(\"Object of type \" + _type(obj).fullname() + \" is not subscriptable\");\n\t\tthis.obj = obj;\n\t}\n\n\ttoString()\n\t{\n\t\treturn \"Object of type \" + _type(this.obj).fullname() + \" is not subscriptable\";\n\t}\n};\n\nexport class ZeroDivisionError extends Exception\n{\n\tconstructor()\n\t{\n\t\tsuper(\"division by zero\");\n\t}\n};\n\nexport class IndexError extends Exception\n{\n\tconstructor(obj, index)\n\t{\n\t\tsuper(\"index \" + _repr(index) + \" out of range\");\n\t\tthis.obj = obj;\n\t\tthis.index = index;\n\t}\n\n\ttoString()\n\t{\n\t\treturn \"index \" + this.index + \" out of range for \" + _type(this.obj).fullname();\n\t}\n};\n\nexport class AttributeError extends Exception\n{\n\tconstructor(obj, attrname)\n\t{\n\t\tsuper(\"object of type \" + _type(obj).fullname() + \" has no attribute \" + _repr(attrname));\n\t\tthis.obj = obj;\n\t\tthis.attrname = attrname;\n\t}\n};\n\nexport class KeyError extends Exception\n{\n\tconstructor(obj, key)\n\t{\n\t\tsuper(\"key \"  + _repr(key) + \" not found in object of type \" + _type(obj).fullname());\n\t\tthis.obj = obj;\n\t\tthis.key = key;\n\t}\n};\n\nexport class NotImplementedError extends Exception\n{\n};\n\n/// Exception that wraps other exceptions while they bubble up the stack\nexport class LocationError extends Exception\n{\n\tconstructor(location)\n\t{\n\t\tsuper(\"nested exception in \" + _repr(location));\n\t\tthis.location = location;\n\t}\n\n\t_templateprefix()\n\t{\n\t\tlet template = this.location.template;\n\t\tlet out = [];\n\t\tif (template.parenttemplate !== null)\n\t\t\tout.push(\"in local template \");\n\t\telse\n\t\t\tout.push(\"in template \");\n\t\tlet first = true;\n\t\twhile (template != null)\n\t\t{\n\t\t\tif (first)\n\t\t\t\tfirst = false;\n\t\t\telse\n\t\t\t\tout.push(\" in \");\n\t\t\tout.push(template.name ? _repr(template.name) : \"(unnamed)\");\n\t\t\ttemplate = template.parenttemplate;\n\t\t}\n\t\treturn out.join(\"\");\n\t}\n\n\ttoString()\n\t{\n\t\tlet template = this.location.template;\n\t\tlet templateprefix = this._templateprefix();\n\n\t\tlet prefix = this.location.startsourceprefix;\n\t\tlet code = this.location.startsource;\n\t\tlet suffix = this.location.startsourcesuffix;\n\t\tprefix = _repr(prefix).slice(1, -1);\n\t\tcode = _repr(code).slice(1, -1);\n\t\tsuffix = _repr(suffix).slice(1, -1);\n\n\t\tlet text = prefix + code + suffix;\n\t\tlet underline = _str_repeat(\"\\u00a0\", prefix.length) + _str_repeat(\"~\", code.length);\n\n\t\tlet pos = \"offset \" + this.location.pos.start + \":\" + this.location.pos.stop + \"; line \" + this.location.startline + \"; col \" + this.location.startcol;\n\n\t\tlet message = templateprefix + \": \" + pos + \"\\n\" + text + \"\\n\" + underline;\n\t\treturn message;\n\t}\n\n\t[symbols.getattr](attrname)\n\t{\n\t\tswitch (attrname)\n\t\t{\n\t\t\tcase \"context\":\n\t\t\t\treturn this.context;\n\t\t\tcase \"location\":\n\t\t\t\treturn this.location;\n\t\t\tdefault:\n\t\t\t\tthrow new AttributeError(this, attrname);\n\t\t}\n\t}\n};\n\n/// Classes for the syntax tree\nexport class AST extends Proto\n{\n\tstatic classmodule = \"ul4\";\n\tstatic classdoc = \"Base type of all UL4 syntax tree nodes\";\n\n\tconstructor(template, startpos, stoppos=null)\n\t{\n\t\tsuper();\n\t\tthis.template = template;\n\t\tthis.startpos = startpos;\n\t\tthis._startline = null;\n\t\tthis._startcol = null;\n\t\tthis.stoppos = stoppos;\n\t\tthis._stopline = null;\n\t\tthis._stopcol = null;\n\t}\n\n\tget startline()\n\t{\n\t\tif (this._startline === null)\n\t\t\t[this._startline, this._startcol] = _lineColFromPos(this.template._source, this.startpos.start);\n\t\treturn this._startline;\n\t}\n\n\tget startcol()\n\t{\n\t\tif (this._startcol === null)\n\t\t\t[this._startline, this._startcol] = _lineColFromPos(this.template._source, this.startpos.start);\n\t\treturn this._startcol;\n\t}\n\n\tget startsource()\n\t{\n\t\treturn this.startpos.of(this.template._source);\n\t}\n\n\tget startsourceprefix()\n\t{\n\t\treturn _sourceprefix(this.template._source, this.startpos.start);\n\t}\n\n\tget startsourcesuffix()\n\t{\n\t\treturn _sourcesuffix(this.template._source, this.startpos.stop);\n\t}\n\n\tget fullsource()\n\t{\n\t\treturn this.template._source;\n\t}\n\n\tget pos()\n\t{\n\t\tif (this.stoppos === null)\n\t\t\treturn this.startpos;\n\t\telse\n\t\t\treturn new slice(this.startpos.start, this.stoppos.stop);\n\t}\n\n\tget source()\n\t{\n\t\treturn this.pos.of(this.template._source);\n\t}\n\n\tget sourceprefix()\n\t{\n\t\treturn _sourceprefix(this.template._source, this.pos.start);\n\t}\n\n\tget sourcesuffix()\n\t{\n\t\treturn _sourcesuffix(this.template._source, this.pos.stop);\n\t}\n\n\tget stopline()\n\t{\n\t\tif (this._stopline === null)\n\t\t\t[this._stopline, this._stopcol] = _lineColFromPos(this.template._source, this.stoppos.stop);\n\t\treturn this._stopline;\n\t}\n\n\tget stopcol()\n\t{\n\t\tif (this._stopcol === null)\n\t\t\t[this._stopline, this._stopcol] = _lineColFromPos(this.template._source, this.stoppos.stop);\n\t\treturn this._stopcol;\n\t}\n\n\tget stopsource()\n\t{\n\t\treturn this.stoppos != null ? this.stoppos.of(this.template._source) : null;\n\t}\n\n\tget stopsourceprefix()\n\t{\n\t\treturn this.stoppos != null ? _sourceprefix(this.template._source, this.stoppos.start) : null;\n\t}\n\n\tget stopsourcesuffix()\n\t{\n\t\treturn this.stoppos != null ? _sourcesuffix(this.template._source, this.stoppos.stop) : null;\n\t}\n\n\t[symbols.getattr](attrname)\n\t{\n\t\tif (\n\t\t\tattrname === \"type\" ||\n\t\t\tattrname === \"startpos\" ||\n\t\t\tattrname === \"startline\" ||\n\t\t\tattrname === \"startcol\" ||\n\t\t\tattrname === \"startsource\" ||\n\t\t\tattrname === \"startsourceprefix\" ||\n\t\t\tattrname === \"startsourcesuffix\" ||\n\t\t\tattrname === \"pos\" ||\n\t\t\tattrname === \"source\" ||\n\t\t\tattrname === \"sourceprefix\" ||\n\t\t\tattrname === \"sourcesuffix\" ||\n\t\t\tattrname === \"fullsource\"\n\t\t)\n\t\t\treturn this[attrname];\n\t\telse if (this._ul4onattrs.indexOf(attrname) >= 0)\n\t\t\treturn this[attrname];\n\t\tthrow new AttributeError(this, attrname);\n\t}\n\n\t[symbols.setitem](attrname, value)\n\t{\n\t\tthrow new TypeError(\"object is immutable\");\n\t}\n\n\t[symbols.str]()\n\t{\n\t\tlet out = [];\n\t\tthis._str(out);\n\t\treturn _formatsource(out);\n\t}\n\n\t[symbols.repr]()\n\t{\n\t\tlet out = [];\n\t\tthis._repr(out);\n\t\treturn _formatsource(out);\n\t}\n\n\t_decorate_exception(exc)\n\t{\n\t\twhile (exc.context !== undefined && exc.context !== null)\n\t\t\texc = exc.context;\n\t\texc.context = new LocationError(this);\n\t}\n\n\t_handle_eval(context)\n\t{\n\t\ttry\n\t\t{\n\t\t\treturn this._eval(context);\n\t\t}\n\t\tcatch (exc)\n\t\t{\n\t\t\tif (!(exc instanceof InternalException) && !(exc instanceof LocationError))\n\t\t\t\tthis._decorate_exception(exc);\n\t\t\tthrow exc;\n\t\t}\n\t}\n\n\t_handle_eval_set(context, value)\n\t{\n\t\ttry\n\t\t{\n\t\t\treturn this._eval_set(context, value);\n\t\t}\n\t\tcatch (exc)\n\t\t{\n\t\t\tif (!(exc instanceof LocationError))\n\t\t\t\tthis._decorate_exception(exc);\n\t\t\tthrow exc;\n\t\t}\n\t}\n\n\t_eval_set(context, value)\n\t{\n\t\tthrow new LValueRequiredError();\n\t}\n\n\t_handle_eval_modify(context, operator, value)\n\t{\n\t\ttry\n\t\t{\n\t\t\treturn this._eval_modify(context, operator, value);\n\t\t}\n\t\tcatch (exc)\n\t\t{\n\t\t\tif (!(exc instanceof LocationError))\n\t\t\t\tthis._decorate_exception(exc);\n\t\t\tthrow exc;\n\t\t}\n\t}\n\n\t_eval_modify(context, operator, value)\n\t{\n\t\tthrow new LValueRequiredError();\n\t}\n\n\t_repr(out)\n\t{\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(this.source.replace(/\\r?\\n/g, ' '));\n\t}\n\n\tul4ondump(encoder)\n\t{\n\t\tfor (let attrname of this._ul4onattrs)\n\t\t\tencoder.dump(this[attrname]);\n\t}\n\n\tul4onload(decoder)\n\t{\n\t\tfor (let attrname of this._ul4onattrs)\n\t\t\tthis[attrname] = decoder.load();\n\t}\n};\n\n// used in ul4ondump/ul4ondump to automatically dump these attributes\nAST.prototype._ul4onattrs = [\"template\", \"startpos\"];\n\nexport class TextAST extends AST\n{\n\tconstructor(template, pos)\n\t{\n\t\tsuper(template, pos);\n\t}\n\n\tget text()\n\t{\n\t\treturn this.source;\n\t}\n\n\t_eval(context)\n\t{\n\t\tcontext.output(this.text);\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(\"text \");\n\t\tout.push(_repr(this.text));\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<TextAST \");\n\t\tout.push(_repr(this.text));\n\t\tout.push(\">\");\n\t}\n};\n\nexport class IndentAST extends TextAST\n{\n\tconstructor(template, pos, text)\n\t{\n\t\tsuper(template, pos);\n\t\tthis._text = text;\n\t}\n\n\tget text()\n\t{\n\t\tif (this.template !== undefined)\n\t\t\treturn this._text === null ? this.source : this._text;\n\t\telse\n\t\t\treturn null;\n\t}\n\n\t_eval(context)\n\t{\n\t\tfor (let indent of context.indents)\n\t\t\tcontext.output(indent);\n\t\tcontext.output(this.text);\n\t}\n\n\tul4ondump(encoder)\n\t{\n\t\tsuper.ul4ondump(encoder);\n\n\t\tif (this._text === this.source)\n\t\t\tencoder.dump(null);\n\t\telse\n\t\t\tencoder.dump(this._text);\n\t}\n\n\tul4onload(decoder)\n\t{\n\t\tsuper.ul4onload(decoder);\n\t\tthis._text = decoder.load();\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(\"indent \");\n\t\tout.push(_repr(this.text));\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<IndentAST \");\n\t\tout.push(_repr(this.text));\n\t\tout.push(\">\");\n\t}\n};\n\nexport class LineEndAST extends TextAST\n{\n\t_str(out)\n\t{\n\t\tout.push(\"lineend \");\n\t\tout.push(_repr(this.text));\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<LineEndAST \");\n\t\tout.push(_repr(this.text));\n\t\tout.push(\">\");\n\t}\n};\n\nexport class CodeAST extends AST\n{\n};\n\nexport class ConstAST extends CodeAST\n{\n\tconstructor(template, pos, value)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.value = value;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<ConstAST value=\");\n\t\tout.push(_repr(this.value));\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\treturn this.value;\n\t}\n};\n\nConstAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"value\"]);\n\nexport class ItemArgBase extends CodeAST\n{\n\t_handle_eval_list(context, result)\n\t{\n\t\ttry\n\t\t{\n\t\t\treturn this._eval_list(context, result);\n\t\t}\n\t\tcatch (exc)\n\t\t{\n\t\t\tif (!(exc instanceof InternalException) && !(exc instanceof LocationError))\n\t\t\t\tthis._decorate_exception(exc);\n\t\t\tthrow exc;\n\t\t}\n\t}\n\n\t_handle_eval_set(context, result)\n\t{\n\t\ttry\n\t\t{\n\t\t\treturn this._eval_set(context, result);\n\t\t}\n\t\tcatch (exc)\n\t\t{\n\t\t\tif (!(exc instanceof InternalException) && !(exc instanceof LocationError))\n\t\t\t\tthis._decorate_exception(exc);\n\t\t\tthrow exc;\n\t\t}\n\t}\n\n\t_handle_eval_dict(context, result)\n\t{\n\t\ttry\n\t\t{\n\t\t\treturn this._eval_dict(context, result);\n\t\t}\n\t\tcatch (exc)\n\t\t{\n\t\t\tif (!(exc instanceof InternalException) && !(exc instanceof LocationError))\n\t\t\t\tthis._decorate_exception(exc);\n\t\t\tthrow exc;\n\t\t}\n\t}\n\n\t_handle_eval_call(context, args, kwargs)\n\t{\n\t\ttry\n\t\t{\n\t\t\treturn this._eval_call(context, args, kwargs);\n\t\t}\n\t\tcatch (exc)\n\t\t{\n\t\t\tif (!(exc instanceof InternalException) && !(exc instanceof LocationError))\n\t\t\t\tthis._decorate_exception(exc);\n\t\t\tthrow exc;\n\t\t}\n\t}\n};\n\nexport class SeqItemAST extends ItemArgBase\n{\n\tconstructor(template, pos, value)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.value = value;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<SeqItemAST value=\");\n\t\tout.push(_repr(this.value));\n\t\tout.push(\">\");\n\t}\n\n\t_eval_list(context, result)\n\t{\n\t\tlet value = this.value._handle_eval(context);\n\t\tresult.push(value);\n\t}\n\n\t_eval_set(context, result)\n\t{\n\t\tlet value = this.value._handle_eval(context);\n\t\tresult.add(value);\n\t}\n};\n\nSeqItemAST.prototype._ul4onattrs = ItemArgBase.prototype._ul4onattrs.concat([\"value\"]);\n\nexport class UnpackSeqItemAST extends ItemArgBase\n{\n\tconstructor(template, pos, value)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.value = value;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<UnpackSeqItemAST value=\");\n\t\tout.push(_repr(this.value));\n\t\tout.push(\">\");\n\t}\n\n\t_eval_list(context, result)\n\t{\n\t\tlet value = this.value._handle_eval(context);\n\t\tfor (let iter = _iter(value);;)\n\t\t{\n\t\t\tlet item = iter.next();\n\t\t\tif (item.done)\n\t\t\t\tbreak;\n\t\t\tresult.push(item.value);\n\t\t}\n\t}\n\n\t_eval_set(context, result)\n\t{\n\t\tlet value = this.value._handle_eval(context);\n\t\tfor (let iter = _iter(value);;)\n\t\t{\n\t\t\tlet item = iter.next();\n\t\t\tif (item.done)\n\t\t\t\tbreak;\n\t\t\tresult.add(item.value);\n\t\t}\n\t}\n};\n\nUnpackSeqItemAST.prototype._ul4onattrs = ItemArgBase.prototype._ul4onattrs.concat([\"value\"]);\n\nexport class DictItemAST extends ItemArgBase\n{\n\tconstructor(template, pos, key, value)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.key = key;\n\t\tthis.value = value;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<DictItemAST key=\");\n\t\tout.push(_repr(this.key));\n\t\tout.push(\" value=\");\n\t\tout.push(_repr(this.value));\n\t\tout.push(\">\");\n\t}\n\n\t_eval_dict(context, result)\n\t{\n\t\tlet key = this.key._handle_eval(context);\n\t\tlet value = this.value._handle_eval(context);\n\t\tresult.set(key, value);\n\t}\n};\n\nDictItemAST.prototype._ul4onattrs = ItemArgBase.prototype._ul4onattrs.concat([\"key\", \"value\"]);\n\nexport class UnpackDictItemAST extends ItemArgBase\n{\n\tconstructor(template, pos, item)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.item = item;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<UnpackDictItemAST item=\");\n\t\tout.push(_repr(this.item));\n\t\tout.push(\">\");\n\t}\n\n\t_eval_dict(context, result)\n\t{\n\t\tlet item = this.item._handle_eval(context);\n\t\tif (_islist(item))\n\t\t{\n\t\t\tfor (let subitem of item)\n\t\t\t{\n\t\t\t\tif (!_islist(subitem) || subitem.length != 2)\n\t\t\t\t\tthrow new ArgumentError(\"** requires a list of (key, value) pairs\");\n\t\t\t\tresult.set(subitem[0], subitem[1]);\n\t\t\t}\n\t\t}\n\t\telse if (_ismap(item))\n\t\t{\n\t\t\tfor (let [key, value] of item)\n\t\t\t\tresult.set(key, value);\n\t\t}\n\t\telse if (_isobject(item))\n\t\t{\n\t\t\tfor (let key in item)\n\t\t\t\tresult.set(key, item[key]);\n\t\t}\n\t}\n};\n\nUnpackDictItemAST.prototype._ul4onattrs = ItemArgBase.prototype._ul4onattrs.concat([\"item\"]);\n\nexport class PositionalArgumentAST extends ItemArgBase\n{\n\tconstructor(template, pos, value)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.value = value;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<PositionalArgumentAST value=\");\n\t\tthis.value._repr(out);\n\t\tout.push(\">\");\n\t}\n\n\t_eval_call(context, args, kwargs)\n\t{\n\t\tlet value = this.value._handle_eval(context);\n\t\targs.push(value);\n\t}\n};\n\nPositionalArgumentAST.prototype._ul4onattrs = ItemArgBase.prototype._ul4onattrs.concat([\"value\"]);\n\nexport class KeywordArgumentAST extends ItemArgBase\n{\n\tconstructor(template, pos, name, value)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.name = name;\n\t\tthis.value = value;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<KeywordArgumentAST name=\");\n\t\tout.push(_repr(this.name));\n\t\tout.push(\" value=\");\n\t\tthis.value._repr(out);\n\t\tout.push(\">\");\n\t}\n\n\t_eval_call(context, args, kwargs)\n\t{\n\t\tif (kwargs.hasOwnProperty(this.name))\n\t\t\tthrow new ArgumentError(\"duplicate keyword argument \" + this.name);\n\t\tlet value = this.value._handle_eval(context);\n\t\tkwargs[this.name] = value;\n\t}\n};\n\nKeywordArgumentAST.prototype._ul4onattrs = ItemArgBase.prototype._ul4onattrs.concat([\"name\", \"value\"]);\n\nexport class UnpackListArgumentAST extends ItemArgBase\n{\n\tconstructor(template, pos, item)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.item = item;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<UnpackListArgumentAST item=\");\n\t\tthis.item._repr(out);\n\t\tout.push(\">\");\n\t}\n\n\t_eval_call(context, args, kwargs)\n\t{\n\t\tlet item = this.item._handle_eval(context);\n\t\targs.push(...item);\n\t}\n};\n\nUnpackListArgumentAST.prototype._ul4onattrs = ItemArgBase.prototype._ul4onattrs.concat([\"item\"]);\n\nexport class UnpackDictArgumentAST extends ItemArgBase\n{\n\tconstructor(template, pos, item)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.item = item;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<UnpackDictArgumentAST item=\");\n\t\tthis.item._repr(out);\n\t\tout.push(\">\");\n\t}\n\n\t_eval_call(context, args, kwargs)\n\t{\n\t\tlet item = this.item._handle_eval(context);\n\t\tif (_islist(item))\n\t\t{\n\t\t\tfor (let subitem of item)\n\t\t\t{\n\t\t\t\tif (!_islist(subitem) || subitem.length != 2)\n\t\t\t\t\tthrow new ArgumentError(\"** requires a list of (key, value) pairs\");\n\t\t\t\tlet [key, value] = subitem;\n\t\t\t\tif (kwargs.hasOwnProperty(key))\n\t\t\t\t\tthrow new ArgumentError(\"duplicate keyword argument \" + key);\n\t\t\t\tkwargs[key] = value;\n\t\t\t}\n\t\t}\n\t\telse if (_ismap(item))\n\t\t{\n\t\t\tfor (let [key, value] of item)\n\t\t\t{\n\t\t\t\tif (kwargs.hasOwnProperty(key))\n\t\t\t\t\tthrow new ArgumentError(\"duplicate keyword argument \" + key);\n\t\t\t\tkwargs[key] = value;\n\t\t\t}\n\t\t}\n\t\telse if (_isobject(item))\n\t\t{\n\t\t\tfor (let key in item)\n\t\t\t{\n\t\t\t\tif (kwargs.hasOwnProperty(key))\n\t\t\t\t\tthrow new ArgumentError(\"duplicate keyword argument \" + key);\n\t\t\t\tkwargs[key] = item[key];\n\t\t\t}\n\t\t}\n\t}\n};\n\nUnpackDictArgumentAST.prototype._ul4onattrs = ItemArgBase.prototype._ul4onattrs.concat([\"item\"]);\n\nexport class ListAST extends CodeAST\n{\n\tconstructor(template, pos)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.items = [];\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<ListAST\");\n\t\tfor (let item of this.items)\n\t\t{\n\t\t\tout.push(\" \");\n\t\t\titem._repr(out);\n\t\t}\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet result = [];\n\t\tfor (let item of this.items)\n\t\t\titem._handle_eval_list(context, result);\n\t\treturn result;\n\t}\n};\n\nListAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"items\"]);\n\nexport class ListComprehensionAST extends CodeAST\n{\n\tconstructor(template, pos, item, varname, container, condition)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.item = item;\n\t\tthis.varname = varname;\n\t\tthis.container = container;\n\t\tthis.condition = condition;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<ListComprehensionAST\");\n\t\tout.push(\" item=\");\n\t\tthis.item._repr(out);\n\t\tout.push(\" varname=\");\n\t\tout.push(_repr(this.varname));\n\t\tout.push(\" container=\");\n\t\tthis.container._repr(out);\n\t\tif (this.condition !== null)\n\t\t{\n\t\t\tout.push(\" condition=\");\n\t\t\tthis.condition._repr(out);\n\t\t}\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet container = this.container._handle_eval(context);\n\n\t\tlet localcontext = context.inheritvars();\n\n\t\tlet result = [];\n\t\tfor (let iter = _iter(container);;)\n\t\t{\n\t\t\tlet item = iter.next();\n\t\t\tif (item.done)\n\t\t\t\tbreak;\n\t\t\tlet varitems = _unpackvar(this.varname, item.value);\n\t\t\tfor (let [lvalue, value] of varitems)\n\t\t\t\tlvalue._handle_eval_set(localcontext, value);\n\t\t\tif (this.condition === null || _bool(this.condition._handle_eval(localcontext)))\n\t\t\t\tresult.push(this.item._handle_eval(localcontext));\n\t\t}\n\t\treturn result;\n\t}\n};\n\nListComprehensionAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"item\", \"varname\", \"container\", \"condition\"]);\n\nexport class SetAST extends CodeAST\n{\n\tconstructor(template, pos)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.items = [];\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<SetAST\");\n\t\tfor (let item of this.items)\n\t\t{\n\t\t\tout.push(\" \");\n\t\t\titem._repr(out);\n\t\t}\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet result = new Set();\n\n\t\tfor (let item of this.items)\n\t\t\titem._handle_eval_set(context, result);\n\n\t\treturn result;\n\t}\n};\n\nSetAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"items\"]);\n\nexport class SetComprehensionAST extends CodeAST\n{\n\tconstructor(template, pos, item, varname, container, condition)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.item = item;\n\t\tthis.varname = varname;\n\t\tthis.container = container;\n\t\tthis.condition = condition;\n\t}\n\n\t[symbols.getattr](attrname)\n\t{\n\t\tswitch (attrname)\n\t\t{\n\t\t\tcase \"item\":\n\t\t\t\treturn this.item;\n\t\t\tcase \"varname\":\n\t\t\t\treturn this.varname;\n\t\t\tcase \"container\":\n\t\t\t\treturn this.container;\n\t\t\tcase \"condition\":\n\t\t\t\treturn this.condition;\n\t\t\tdefault:\n\t\t\t\treturn super[symbols.getattr](attrname);\n\t\t}\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<SetComprehensionAST\");\n\t\tout.push(\" item=\");\n\t\tthis.item._repr(out);\n\t\tout.push(\" varname=\");\n\t\tthis.varname._repr(out);\n\t\tout.push(\" container=\");\n\t\tthis.container._repr(out);\n\t\tif (this.condition !== null)\n\t\t{\n\t\t\tout.push(\" condition=\");\n\t\t\tthis.condition._repr(out);\n\t\t}\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet container = this.container._handle_eval(context);\n\n\t\tlet localcontext = context.inheritvars();\n\n\t\tlet result = new Set();\n\t\tfor (let iter = _iter(container);;)\n\t\t{\n\t\t\tlet item = iter.next();\n\t\t\tif (item.done)\n\t\t\t\tbreak;\n\t\t\tlet varitems = _unpackvar(this.varname, item.value);\n\t\t\tfor (let [lvalue, value] of varitems)\n\t\t\t\tlvalue._handle_eval_set(localcontext, value);\n\t\t\tif (this.condition === null || _bool(this.condition._handle_eval(localcontext)))\n\t\t\t\tresult.add(this.item._handle_eval(localcontext));\n\t\t}\n\n\t\treturn result;\n\t}\n};\n\nSetComprehensionAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"item\", \"varname\", \"container\", \"condition\"]);\n\nexport class DictAST extends CodeAST\n{\n\tconstructor(template, pos)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.items = [];\n\t}\n\n\t[symbols.getattr](attrname)\n\t{\n\t\tswitch (attrname)\n\t\t{\n\t\t\tcase \"items\":\n\t\t\t\treturn this.items;\n\t\t\tdefault:\n\t\t\t\treturn super[symbols.getattr](attrname);\n\t\t}\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<DictAST\");\n\t\tfor (let item of this.items)\n\t\t{\n\t\t\tout.push(\" \");\n\t\t\titem._repr(out);\n\t\t}\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet result = new Map();\n\t\tfor (let item of this.items)\n\t\t\titem._handle_eval_dict(context, result);\n\t\treturn result;\n\t}\n};\n\nDictAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"items\"]);\n\nexport class DictComprehensionAST extends CodeAST\n{\n\tconstructor(template, pos, key, value, varname, container, condition)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.key = key;\n\t\tthis.value = value;\n\t\tthis.varname = varname;\n\t\tthis.container = container;\n\t\tthis.condition = condition;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<DictComprehensionAST\");\n\t\tout.push(\" key=\");\n\t\tthis.key._repr(out);\n\t\tout.push(\" value=\");\n\t\tthis.value._repr(out);\n\t\tout.push(\" varname=\");\n\t\tthis.varname._repr(out);\n\t\tout.push(\" container=\");\n\t\tthis.container._repr(out);\n\t\tif (this.condition !== null)\n\t\t{\n\t\t\tout.push(\" condition=\");\n\t\t\tthis.condition._repr(out);\n\t\t}\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet container = this.container._handle_eval(context);\n\n\t\tlet localcontext = context.inheritvars();\n\n\t\tlet result = new Map();\n\n\t\tfor (let iter = _iter(container);;)\n\t\t{\n\t\t\tlet item = iter.next();\n\t\t\tif (item.done)\n\t\t\t\tbreak;\n\t\t\tlet varitems = _unpackvar(this.varname, item.value);\n\t\t\tfor (let [lvalue, value] of varitems)\n\t\t\t\tlvalue._handle_eval_set(localcontext, value);\n\t\t\tif (this.condition === null || _bool(this.condition._handle_eval(localcontext)))\n\t\t\t{\n\t\t\t\tlet key = this.key._handle_eval(localcontext);\n\t\t\t\tlet value = this.value._handle_eval(localcontext);\n\t\t\t\tresult.set(key, value);\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n};\n\nDictComprehensionAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"key\", \"value\", \"varname\", \"container\", \"condition\"]);\n\nexport class GeneratorExpressionAST extends CodeAST\n{\n\tconstructor(template, pos, item, varname, container, condition)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.item = item;\n\t\tthis.varname = varname;\n\t\tthis.container = container;\n\t\tthis.condition = condition;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<GeneratorExpressionAST\");\n\t\tout.push(\" item=\");\n\t\tthis.item._repr(out);\n\t\tout.push(\" varname=\");\n\t\tthis.varname._repr(out);\n\t\tout.push(\" container=\");\n\t\tthis.container._repr(out);\n\t\tif (this.condition !== null)\n\t\t{\n\t\t\tout.push(\" condition=\");\n\t\t\tthis.condition._repr(out);\n\t\t}\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet container = this.container._handle_eval(context);\n\t\tlet iter = _iter(container);\n\n\t\tlet localcontext = context.inheritvars();\n\n\t\tlet self = this;\n\n\t\tlet result = {\n\t\t\tnext: function(){\n\t\t\t\twhile (true)\n\t\t\t\t{\n\t\t\t\t\tlet item = iter.next();\n\t\t\t\t\tif (item.done)\n\t\t\t\t\t\treturn item;\n\t\t\t\t\tlet varitems = _unpackvar(self.varname, item.value);\n\t\t\t\t\tfor (let [lvalue, value] of varitems)\n\t\t\t\t\t\tlvalue._handle_eval_set(localcontext, value);\n\t\t\t\t\tif (self.condition === null || _bool(self.condition._handle_eval(localcontext)))\n\t\t\t\t\t{\n\t\t\t\t\t\tlet value = self.item._handle_eval(localcontext);\n\t\t\t\t\t\treturn {value: value, done: false};\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\treturn result;\n\t}\n};\n\nGeneratorExpressionAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"item\", \"varname\", \"container\", \"condition\"]);\n\nexport class VarAST extends CodeAST\n{\n\tconstructor(template, pos, name)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.name = name;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<VarAST name=\");\n\t\tout.push(_repr(this.name));\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\treturn this._get(context, this.name);\n\t}\n\n\t_eval_set(context, value)\n\t{\n\t\tthis._set(context, this.name, value);\n\t}\n\n\t_eval_modify(context, operator, value)\n\t{\n\t\tthis._modify(context, operator, this.name, value);\n\t}\n\n\t_get(context, name)\n\t{\n\t\treturn context.get(name);\n\t}\n\n\t_set(context, name, value)\n\t{\n\t\tcontext.set(name, value);\n\t}\n\n\t_modify(context, operator, name, value)\n\t{\n\t\tlet newvalue = operator._ido(context.get(name), value);\n\t\tcontext.set(name, newvalue);\n\t}\n};\n\nVarAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"name\"]);\n\nexport class UnaryAST extends CodeAST\n{\n\tconstructor(template, pos, obj)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.obj = obj;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<\");\n\t\tout.push(this.constructor.name);\n\t\tout.push(\" obj=\");\n\t\tthis.obj._repr(out);\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet obj = this.obj._handle_eval(context);\n\t\treturn this._do(obj);\n\t}\n};\n\nUnaryAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"obj\"]);\n\n// Negation\nexport class NegAST extends UnaryAST\n{\n\t_do(obj)\n\t{\n\t\tif (obj !== null && typeof(obj[symbols.neg]) === \"function\")\n\t\t\treturn obj[symbols.neg]();\n\t\treturn -obj;\n\t}\n};\n\n// Bitwise not\nexport class BitNotAST extends UnaryAST\n{\n\t_do(obj)\n\t{\n\t\treturn -obj-1;\n\t}\n};\n\n// Not\nexport class NotAST extends UnaryAST\n{\n\t_do(obj)\n\t{\n\t\treturn !_bool(obj);\n\t}\n};\n\n// If expression\nexport class IfAST extends CodeAST\n{\n\tconstructor(template, pos, objif, objcond, objelse)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.objif = objif;\n\t\tthis.objcond = objcond;\n\t\tthis.objelse = objelse;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<\");\n\t\tout.push(this.constructor.name);\n\t\tout.push(+1);\n\t\tout.push(\"objif=\");\n\t\tthis.objif._repr(out);\n\t\tout.push(0);\n\t\tout.push(\"objcond=\");\n\t\tthis.objcond._repr(out);\n\t\tout.push(0);\n\t\tout.push(\"objelse=\");\n\t\tthis.objelse._repr(out);\n\t\tout.push(-1);\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet result;\n\t\tlet condvalue = this.objcond._handle_eval(context);\n\t\tif (_bool(condvalue))\n\t\t\tresult = this.objif._handle_eval(context);\n\t\telse\n\t\t\tresult = this.objelse._handle_eval(context);\n\t\treturn result;\n\t}\n};\n\nIfAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"objif\", \"objcond\", \"objelse\"]);\n\nexport class ReturnAST extends UnaryAST\n{\n\t_eval(context)\n\t{\n\t\tlet result = this.obj._handle_eval(context);\n\t\tthrow new ReturnException(result);\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(\"return \");\n\t\tthis.obj._str(out);\n\t}\n};\n\nexport class PrintAST extends UnaryAST\n{\n\t_eval(context)\n\t{\n\t\tlet obj = this.obj._handle_eval(context);\n\t\tlet output = _str(obj);\n\t\tcontext.output(output);\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(\"print \");\n\t\tthis.obj._str(out);\n\t}\n};\n\nexport class PrintXAST extends UnaryAST\n{\n\t_eval(context)\n\t{\n\t\tlet obj = this.obj._handle_eval(context);\n\t\tlet output = _xmlescape(obj);\n\t\tcontext.output(output);\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(\"printx \");\n\t\tthis.obj._str(out);\n\t}\n};\n\nexport class BinaryAST extends CodeAST\n{\n\tconstructor(template, pos, obj1, obj2)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.obj1 = obj1;\n\t\tthis.obj2 = obj2;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<\");\n\t\tout.push(this.constructor.name);\n\t\tout.push(\" obj1=\");\n\t\tthis.obj1._repr(out);\n\t\tout.push(\" obj2=\");\n\t\tthis.obj2._repr(out);\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet obj1 = this.obj1._handle_eval(context);\n\t\tlet obj2 = this.obj2._handle_eval(context);\n\t\treturn this._do(obj1, obj2);\n\t}\n};\n\nBinaryAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"obj1\", \"obj2\"]);\n\n// Item access and assignment: dict[key], list[index], string[index], color[index]\nexport class ItemAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\tlet result = this._get(obj1, obj2);\n\t\treturn result;\n\t}\n\n\t_eval_set(context, value)\n\t{\n\t\tlet obj1 = this.obj1._handle_eval(context);\n\t\tlet obj2 = this.obj2._handle_eval(context);\n\t\tthis._set(obj1, obj2, value);\n\t}\n\n\t_eval_modify(context, operator, value)\n\t{\n\t\tlet obj1 = this.obj1._handle_eval(context);\n\t\tlet obj2 = this.obj2._handle_eval(context);\n\t\tthis._modify(operator, obj1, obj2, value);\n\t}\n\n\t_get(container, key)\n\t{\n\t\tif (typeof(container) === \"string\" || _islist(container))\n\t\t{\n\t\t\tif (key instanceof slice)\n\t\t\t{\n\t\t\t\tlet start = key.start, stop = key.stop;\n\t\t\t\tif (start === undefined || start === null)\n\t\t\t\t\tstart = 0;\n\t\t\t\tif (stop === undefined || stop === null)\n\t\t\t\t\tstop = container.length;\n\t\t\t\treturn container.slice(start, stop);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlet orgkey = key;\n\t\t\t\tif (key < 0)\n\t\t\t\t\tkey += container.length;\n\t\t\t\tif (key < 0 || key >= container.length)\n\t\t\t\t\tthrow new IndexError(container, orgkey);\n\t\t\t\treturn container[key];\n\t\t\t}\n\t\t}\n\t\telse if (container && typeof(container[symbols.getitem]) === \"function\") // objects without ``_getitem__`` don't support item access\n\t\t\treturn container[symbols.getitem](key);\n\t\telse if (_ismap(container))\n\t\t\treturn container.get(key);\n\t\telse\n\t\t\tthrow new TypeError(_type(container).fullname() + \" object is not subscriptable\");\n\t}\n\n\t_set(container, key, value)\n\t{\n\t\tif (_islist(container))\n\t\t{\n\t\t\tif (key instanceof slice)\n\t\t\t{\n\t\t\t\tlet start = key.start, stop = key.stop;\n\t\t\t\tif (start === null)\n\t\t\t\t\tstart = 0;\n\t\t\t\telse if (start < 0)\n\t\t\t\t\tstart += container.length;\n\t\t\t\tif (start < 0)\n\t\t\t\t\tstart = 0;\n\t\t\t\telse if (start > container.length)\n\t\t\t\t\tstart = container.length;\n\t\t\t\tif (stop === null)\n\t\t\t\t\tstop = container.length;\n\t\t\t\telse if (stop < 0)\n\t\t\t\t\tstop += container.length;\n\t\t\t\tif (stop < 0)\n\t\t\t\t\tstop = 0;\n\t\t\t\telse if (stop > container.length)\n\t\t\t\t\tstop = container.length;\n\t\t\t\tif (stop < start)\n\t\t\t\t\tstop = start;\n\t\t\t\tcontainer.splice(start, stop-start); // Remove old element\n\t\t\t\tfor (let iter = _iter(value);;)\n\t\t\t\t{\n\t\t\t\t\tlet item = iter.next();\n\t\t\t\t\tif (item.done)\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcontainer.splice(start++, 0, item.value);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlet orgkey = key;\n\t\t\t\tif (key < 0)\n\t\t\t\t\tkey += container.length;\n\t\t\t\tif (key < 0 || key >= container.length)\n\t\t\t\t\tthrow new IndexError(container, orgkey);\n\t\t\t\tcontainer[key] = value;\n\t\t\t}\n\t\t}\n\t\telse if (container && typeof(container[symbols.setitem]) === \"function\") // test this before the generic object test\n\t\t\tcontainer[symbols.setitem](key, value);\n\t\telse if (_ismap(container))\n\t\t\tcontainer.set(key, value);\n\t\telse if (_isobject(container))\n\t\t\tcontainer[key] = value;\n\t\telse\n\t\t\tthrow new NotSubscriptableError(container);\n\t}\n\n\t_modify(operator, container, key, value)\n\t{\n\t\tthis._set(container, key, operator._ido(this._get(container, key), value));\n\t}\n};\n\n// Identifty test operator ``is``\nexport class IsAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\treturn obj1 === obj2;\n\t}\n};\n\n// Inverted identity test operator ``is not``\nexport class IsNotAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\treturn obj1 !== obj2;\n\t}\n};\n\n// Comparison operator ==\nexport class EQAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\treturn _eq(obj1, obj2);\n\t}\n};\n\n// Comparison operator !=\nexport class NEAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\treturn _ne(obj1, obj2);\n\t}\n};\n\n// Comparison operator <\nexport class LTAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\treturn _lt(obj1, obj2);\n\t}\n};\n\n// Comparison operator <=\nexport class LEAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\treturn _le(obj1, obj2);\n\t}\n};\n\n// Comparison operator >\nexport class GTAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\treturn _gt(obj1, obj2);\n\t}\n};\n\n// Comparison operator >=\nexport class GEAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\treturn _ge(obj1, obj2);\n\t}\n};\n\n// Containment test: string in string, obj in list, key in dict, value in rgb\nexport class ContainsAST extends BinaryAST\n{\n\t_do(obj, container)\n\t{\n\t\tif (typeof(obj) === \"string\" && typeof(container) === \"string\")\n\t\t{\n\t\t\treturn container.indexOf(obj) !== -1;\n\t\t}\n\t\telse if (_islist(container))\n\t\t{\n\t\t\treturn container.indexOf(obj) !== -1;\n\t\t}\n\t\telse if (container && typeof(container[symbols.contains]) === \"function\") // test this before the generic object test\n\t\t\treturn container[symbols.contains](obj);\n\t\telse if (_ismap(container) || _isset(container))\n\t\t\treturn container.has(obj);\n\t\telse if (_isobject(container))\n\t\t{\n\t\t\tfor (let key in container)\n\t\t\t{\n\t\t\t\tif (key === obj)\n\t\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\telse if (_iscolor(container))\n\t\t{\n\t\t\treturn container._r === obj || container._g === obj || container._b === obj || container._a === obj;\n\t\t}\n\t\tthrow new TypeError(_type(container).fullname() + \" object is not iterable\");\n\t}\n};\n\n// Inverted containment test\nexport class NotContainsAST extends BinaryAST\n{\n\t_do(obj, container)\n\t{\n\t\treturn !ContainsAST.prototype._do(obj, container);\n\t}\n};\n\n// Addition: num + num, string + string\nexport class AddAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\tif (obj1 && typeof(obj1[symbols.add]) === \"function\")\n\t\t\treturn obj1[symbols.add](obj2);\n\t\telse if (obj2 && typeof(obj2[symbols.radd]) === \"function\")\n\t\t\treturn obj2[symbols.radd](obj1);\n\t\tif (obj1 === null || obj1 === undefined || obj2 === null || obj2 === undefined)\n\t\t\tthrow new TypeError(_type(obj1).fullname() + \" + \" + _type(obj2).fullname() + \" is not supported\");\n\t\tif (_islist(obj1) && _islist(obj2))\n\t\t\treturn [...obj1, ...obj2];\n\t\telse\n\t\t\treturn obj1 + obj2;\n\t}\n\n\t_ido(obj1, obj2)\n\t{\n\t\tif (_islist(obj1) && _islist(obj2))\n\t\t{\n\t\t\tListProtocol.append(obj1, obj2);\n\t\t\treturn obj1;\n\t\t}\n\t\telse\n\t\t\treturn this._do(obj1, obj2);\n\t}\n};\n\n// Substraction: num - num\nexport class SubAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\tif (obj1 && typeof(obj1[symbols.sub]) === \"function\")\n\t\t\treturn obj1[symbols.sub](obj2);\n\t\telse if (obj2 && typeof(obj2[symbols.rsub]) === \"function\")\n\t\t\treturn obj2[symbols.rsub](obj1);\n\t\telse if (_isdate(obj1) && _isdate(obj2))\n\t\t\treturn this._date_sub(obj1, obj2);\n\t\telse if (_isdatetime(obj1) && _isdatetime(obj2))\n\t\t\treturn this._datetime_sub(obj1, obj2);\n\t\tif (obj1 === null || obj1 === undefined || obj2 === null || obj2 === undefined)\n\t\t\tthrow new TypeError(_type(obj1).fullname() + \" - \" + _type(obj2).fullname() + \" is not supported\");\n\t\treturn obj1 - obj2;\n\t}\n\n\t_date_sub(obj1, obj2)\n\t{\n\t\treturn this._datetime_sub(obj1._date, obj2._date);\n\t}\n\n\t_datetime_sub(obj1, obj2)\n\t{\n\t\tlet swap = (obj2 > obj1);\n\n\t\tif (swap)\n\t\t{\n\t\t\tlet t = obj1;\n\t\t\tobj1 = obj2;\n\t\t\tobj2 = t;\n\t\t}\n\t\t// From now on obj1 is > than obj2\n\n\t\tlet year1 = obj1.getFullYear();\n\t\tlet yearday1 = DateTimeProtocol.yearday(obj1);\n\t\tlet year2 = obj2.getFullYear();\n\t\tlet yearday2 = DateTimeProtocol.yearday(obj2);\n\n\t\tlet diffdays = 0;\n\n\t\twhile (year1 > year2)\n\t\t{\n\t\t\tdiffdays += DateProtocol.yearday(_date(year2, 12, 31));\n\t\t\t++year2;\n\t\t}\n\t\tdiffdays += yearday1 - yearday2;\n\n\t\tlet hours1 = obj1.getHours();\n\t\tlet minutes1 = obj1.getMinutes();\n\t\tlet seconds1 = obj1.getSeconds();\n\t\tlet hours2 = obj2.getHours();\n\t\tlet minutes2 = obj2.getMinutes();\n\t\tlet seconds2 = obj2.getSeconds();\n\n\t\tlet diffseconds = (seconds1 - seconds2) + 60 * ((minutes1 - minutes2) + 60 * (hours1 - hours2));\n\n\t\tlet diffmilliseconds = obj1.getMilliseconds() - obj2.getMilliseconds();\n\n\t\tif (swap)\n\t\t{\n\t\t\tdiffdays = -diffdays;\n\t\t\tdiffseconds = -diffseconds;\n\t\t\tdiffmilliseconds = -diffmilliseconds;\n\t\t}\n\t\treturn new TimeDelta(diffdays, diffseconds, 1000*diffmilliseconds);\n\t}\n\n\t_ido(obj1, obj2)\n\t{\n\t\treturn this._do(obj1, obj2);\n\t}\n};\n\n\n// Multiplication: num * num, int * str, str * int, int * list, list * int\nexport class MulAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\tif (obj1 && typeof(obj1[symbols.mul]) === \"function\")\n\t\t\treturn obj1[symbols.mul](obj2);\n\t\telse if (obj2 && typeof(obj2[symbols.rmul]) === \"function\")\n\t\t\treturn obj2[symbols.rmul](obj1);\n\t\tif (obj1 === null || obj1 === undefined || obj2 === null || obj2 === undefined)\n\t\t\tthrow new TypeError(obj1 + \" * \" + obj2 + \" not supported\");\n\t\telse if (_isint(obj1) || _isbool(obj1))\n\t\t{\n\t\t\tif (typeof(obj2) === \"string\")\n\t\t\t{\n\t\t\t\tif (obj1 < 0)\n\t\t\t\t\tthrow new ValueError(\"repetition counter must be positive\");\n\t\t\t\treturn _str_repeat(obj2, obj1);\n\t\t\t}\n\t\t\telse if (_islist(obj2))\n\t\t\t{\n\t\t\t\tif (obj1 < 0)\n\t\t\t\t\tthrow new ValueError(\"repetition counter must be positive\");\n\t\t\t\treturn _list_repeat(obj2, obj1);\n\t\t\t}\n\t\t}\n\t\telse if (_isint(obj2) || _isbool(obj2))\n\t\t{\n\t\t\tif (typeof(obj1) === \"string\")\n\t\t\t{\n\t\t\t\tif (obj2 < 0)\n\t\t\t\t\tthrow new ValueError(\"repetition counter must be positive\");\n\t\t\t\treturn _str_repeat(obj1, obj2);\n\t\t\t}\n\t\t\telse if (_islist(obj1))\n\t\t\t{\n\t\t\t\tif (obj2 < 0)\n\t\t\t\t\tthrow new ValueError(\"repetition counter must be positive\");\n\t\t\t\treturn _list_repeat(obj1, obj2);\n\t\t\t}\n\t\t}\n\t\treturn obj1 * obj2;\n\t}\n\n\t_ido(obj1, obj2)\n\t{\n\t\tif (_islist(obj1) && _isint(obj2))\n\t\t{\n\t\t\tif (obj2 > 0)\n\t\t\t{\n\t\t\t\tlet i = 0;\n\t\t\t\tlet targetsize = obj1.length * obj2;\n\t\t\t\twhile (obj1.length < targetsize)\n\t\t\t\t\tobj1.push(obj1[i++]);\n\t\t\t}\n\t\t\telse\n\t\t\t\tobj1.splice(0, obj1.length);\n\t\t\treturn obj1;\n\t\t}\n\t\telse\n\t\t\treturn this._do(obj1, obj2);\n\t}\n};\n\n// Truncating division\nexport class FloorDivAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\tif (obj1 && typeof(obj1[symbols.floordiv]) === \"function\")\n\t\t\treturn obj1[symbols.floordiv](obj2);\n\t\telse if (obj2 && typeof(obj2[symbols.rfloordiv]) === \"function\")\n\t\t\treturn obj2[symbols.rfloordiv](obj1);\n\t\tif (obj1 === null || obj1 === undefined || obj2 === null || obj2 === undefined)\n\t\t\tthrow new TypeError(_type(obj1).fullname() + \" // \" + _type(obj2).fullname() + \" not supported\");\n\t\telse if ((typeof(obj1) === \"number\" || typeof(obj1) === \"boolean\") && (typeof(obj2) === \"number\" || typeof(obj2) === \"boolean\") && obj2 == 0)\n\t\t\tthrow new ZeroDivisionError();\n\t\treturn Math.floor(obj1 / obj2);\n\t}\n\n\t_ido(obj1, obj2)\n\t{\n\t\treturn this._do(obj1, obj2);\n\t}\n};\n\n// \"Real\" division\nexport class TrueDivAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\tif (obj1 && typeof(obj1[symbols.truediv]) === \"function\")\n\t\t\treturn obj1[symbols.truediv](obj2);\n\t\telse if (obj2 && typeof(obj2[symbols.rtruediv]) === \"function\")\n\t\t\treturn obj2[symbols.rtruediv](obj1);\n\t\tif (obj1 === null || obj1 === undefined || obj2 === null || obj2 === undefined)\n\t\t\tthrow new TypeError(_type(obj1).fullname() + \" / \" + _type(obj2).fullname() + \" not supported\");\n\t\telse if ((typeof(obj1) === \"number\" || typeof(obj1) === \"boolean\") && (typeof(obj2) === \"number\" || typeof(obj2) === \"boolean\") && obj2 == 0)\n\t\t\tthrow new ZeroDivisionError();\n\t\treturn obj1 / obj2;\n\t}\n\n\t_ido(obj1, obj2)\n\t{\n\t\treturn this._do(obj1, obj2);\n\t}\n};\n\n// Modulo\nexport class ModAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\treturn _mod(obj1, obj2);\n\t}\n\n\t_ido(obj1, obj2)\n\t{\n\t\treturn this._do(obj1, obj2);\n\t}\n};\n\n// Bitwise left shift\nexport class ShiftLeftAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\tif (obj2 === false)\n\t\t\tobj2 = 0;\n\t\telse if (obj2 === true)\n\t\t\tobj2 = 1;\n\t\tif (obj2 < 0)\n\t\t\treturn ShiftRightAST.prototype._do(obj1, -obj2);\n\t\tif (obj1 === false)\n\t\t\tobj1 = 0;\n\t\telse if (obj1 === true)\n\t\t\tobj1 = 1;\n\t\twhile (obj2--)\n\t\t\tobj1 *= 2;\n\t\treturn obj1;\n\t}\n\n\t_ido(obj1, obj2)\n\t{\n\t\treturn this._do(obj1, obj2);\n\t}\n};\n\n// Bitwise right shift\nexport class ShiftRightAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\tif (obj2 === false)\n\t\t\tobj2 = 0;\n\t\telse if (obj2 === true)\n\t\t\tobj2 = 1;\n\t\tif (obj2 < 0)\n\t\t\treturn ShiftLeftAST.prototype._do(obj1, -obj2);\n\t\tif (obj1 === false)\n\t\t\tobj1 = 0;\n\t\telse if (obj1 === true)\n\t\t\tobj1 = 1;\n\t\twhile (obj2--)\n\t\t\tobj1 /= 2;\n\t\treturn Math.floor(obj1);\n\t}\n\n\t_ido(obj1, obj2)\n\t{\n\t\treturn this._do(obj1, obj2);\n\t}\n};\n\n// Bitwise and\nexport class BitAndAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\tif (obj2 === false)\n\t\t\tobj2 = 0;\n\t\telse if (obj2 === true)\n\t\t\tobj2 = 1;\n\t\treturn obj1 & obj2;\n\t}\n\n\t_ido(obj1, obj2)\n\t{\n\t\treturn this._do(obj1, obj2);\n\t}\n};\n\n// Bitwise exclusive or\nexport class BitXOrAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\tif (obj2 === false)\n\t\t\tobj2 = 0;\n\t\telse if (obj2 === true)\n\t\t\tobj2 = 1;\n\t\treturn obj1 ^ obj2;\n\t}\n\n\t_ido(obj1, obj2)\n\t{\n\t\treturn this._do(obj1, obj2);\n\t}\n};\n\n// Bitwise or\nexport class BitOrAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\tif (obj2 === false)\n\t\t\tobj2 = 0;\n\t\telse if (obj2 === true)\n\t\t\tobj2 = 1;\n\t\treturn obj1 | obj2;\n\t}\n\n\t_ido(obj1, obj2)\n\t{\n\t\treturn this._do(obj1, obj2);\n\t}\n};\n\nexport class AndAST extends BinaryAST\n{\n\t_eval(context)\n\t{\n\t\tlet obj1 = this.obj1._handle_eval(context);\n\t\tif (!_bool(obj1))\n\t\t\treturn obj1;\n\t\tlet obj2 = this.obj2._handle_eval(context);\n\t\treturn obj2;\n\t}\n};\n\nexport class OrAST extends BinaryAST\n{\n\t_eval(context)\n\t{\n\t\tlet obj1 = this.obj1._handle_eval(context);\n\t\tif (_bool(obj1))\n\t\t\treturn obj1;\n\t\tlet obj2 = this.obj2._handle_eval(context);\n\t\treturn obj2;\n\t}\n};\n\nexport class AttrAST extends CodeAST\n{\n\tconstructor(template, pos, obj, attrname)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.obj = obj;\n\t\tthis.attrname = attrname;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<AttrAST\");\n\t\tout.push(\" obj=\");\n\t\tthis.obj._repr(out);\n\t\tout.push(\" attrname=\");\n\t\tout.push(_repr(this.attrname));\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet obj = this.obj._handle_eval(context);\n\t\tlet result = this._get(obj, this.attrname);\n\t\treturn result;\n\t}\n\n\t_eval_set(context, value)\n\t{\n\t\tlet obj = this.obj._handle_eval(context);\n\t\tthis._set(obj, this.attrname, value);\n\t}\n\n\t_eval_modify(context, operator, value)\n\t{\n\t\tlet obj = this.obj._handle_eval(context);\n\t\tthis._modify(operator, obj, this.attrname, value);\n\t}\n\n\t_get(object, attrname)\n\t{\n\t\tlet type = _type(object);\n\t\ttry\n\t\t{\n\t\t\treturn type.getattr(object, attrname);\n\t\t}\n\t\tcatch (exc)\n\t\t{\n\t\t\tif (exc instanceof AttributeError && exc.obj === object)\n\t\t\t\treturn undefined;\n\t\t\telse\n\t\t\t\tthrow exc;\n\t\t}\n\t}\n\n\t_set(object, attrname, value)\n\t{\n\t\tif (typeof(object) === \"object\" && typeof(object[symbols.setattr]) === \"function\")\n\t\t\tobject[symbols.setattr](attrname, value);\n\t\telse if (_ismap(object))\n\t\t\tobject.set(attrname, value);\n\t\telse if (_isobject(object))\n\t\t\tobject[attrname] = value;\n\t\telse\n\t\t\tthrow new TypeError(_type(object).fullname() + \" object has no writable attributes\");\n\t}\n\n\t_modify(operator, object, attrname, value)\n\t{\n\t\tlet oldvalue = this._get(object, attrname);\n\t\tlet newvalue = operator._ido(oldvalue, value);\n\t\tthis._set(object, attrname, newvalue);\n\t}\n};\n\nAttrAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"obj\", \"attrname\"]);\n\nexport class CallAST extends CodeAST\n{\n\tconstructor(template, pos, obj, args)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.obj = obj;\n\t\tthis.args = args;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<CallAST\");\n\t\tout.push(\" obj=\");\n\t\tthis.obj._repr(out);\n\t\tfor (let arg of this.args)\n\t\t{\n\t\t\tout.push(\" \");\n\t\t\targ._repr(out);\n\t\t}\n\t\tout.push(\">\");\n\t}\n\n\t_makeargs(context)\n\t{\n\t\tlet args = [], kwargs = {};\n\t\tfor (let arg of this.args)\n\t\t\targ._handle_eval_call(context, args, kwargs);\n\t\treturn [args, kwargs];\n\t}\n\n\t_handle_eval(context)\n\t{\n\t\ttry\n\t\t{\n\t\t\treturn this._eval(context);\n\t\t}\n\t\tcatch (exc)\n\t\t{\n\t\t\tthis._decorate_exception(exc);\n\t\t\tthrow exc;\n\t\t}\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet obj = this.obj._handle_eval(context);\n\t\tlet [args, kwargs] = this._makeargs(context);\n\t\tlet result = _call(context, obj, args, kwargs);\n\t\treturn result;\n\t}\n};\n\nCallAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"obj\", \"args\"]);\n\nexport class RenderAST extends CallAST\n{\n\tconstructor(template, pos, obj, args)\n\t{\n\t\tsuper(template, pos, obj, args);\n\t\tthis.indent = null;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<\");\n\t\tout.push(this._reprname);\n\t\tout.push(\"<RenderAST\");\n\t\tout.push(\" indent=\");\n\t\tout.push(_repr(this.indent));\n\t\tout.push(\" obj=\");\n\t\tthis.obj._repr(out);\n\t\tout.push(0);\n\t\tfor (let arg of this.args)\n\t\t{\n\t\t\tout.push(\" \");\n\t\t\targ._repr(out);\n\t\t\tout.push(0);\n\t\t}\n\t\tout.push(-1);\n\t\tout.push(\">\");\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(\"render \");\n\t\tout.push(this.tag.code.replace(/\\r?\\n/g, ' '));\n\t\tif (this.indent !== null)\n\t\t{\n\t\t\tout.push(\" with indent \");\n\t\t\tout.push(_repr(this.indent.text));\n\t\t}\n\t}\n\n\t_handle_eval(context)\n\t{\n\t\tlet localcontext = context.withindent(this.indent !== null ? this.indent.text : null);\n\t\tlet obj = this.obj._handle_eval(localcontext);\n\t\tlet [args, kwargs] = this._makeargs(localcontext);\n\t\tthis._handle_additional_arguments(localcontext, args, kwargs);\n\n\t\ttry\n\t\t{\n\t\t\tlet result = _callrender(localcontext, obj, args, kwargs);\n\t\t\treturn result;\n\t\t}\n\t\tcatch (exc)\n\t\t{\n\t\t\tthis._decorate_exception(exc);\n\t\t\tthrow exc;\n\t\t}\n\t}\n\n\t_handle_additional_arguments(context, args)\n\t{\n\t}\n};\n\nRenderAST.prototype._ul4onattrs = CallAST.prototype._ul4onattrs.concat([\"indent\"]);\nRenderAST.prototype._reprname = \"RenderAST\";\n\nexport class RenderXAST extends RenderAST\n{\n\t_handle_eval(context)\n\t{\n\t\tcontext.escapes.push(_xmlescape);\n\n\t\tlet result = null;\n\t\ttry\n\t\t{\n\t\t\tresult = super._handle_eval(context);\n\t\t}\n\t\tfinally\n\t\t{\n\t\t\tcontext.escapes.splice(context.escapes.length-1, 1);\n\t\t}\n\t\treturn result;\n\t}\n};\n\nexport class RenderBlockAST extends RenderAST\n{\n\t_handle_additional_arguments(context, args, kwargs)\n\t{\n\t\tif (kwargs.hasOwnProperty(\"content\"))\n\t\t\tthrow new ArgumentError(\"duplicate keyword argument content\");\n\t\tlet closure = new TemplateClosure(this.content, this.content.signature, context.vars);\n\t\tkwargs.content = closure;\n\t}\n\n\t[symbols.getattr](attrname)\n\t{\n\t\tif (\n\t\t\tattrname === \"stoppos\" ||\n\t\t\tattrname === \"stopsource\" ||\n\t\t\tattrname === \"stopsourceprefix\" ||\n\t\t\tattrname === \"stopsourcesuffix\"\n\t\t)\n\t\t\treturn this[attrname];\n\t\telse\n\t\t\treturn super[symbols.getattr](attrname);\n\t}\n};\n\nRenderBlockAST.prototype._ul4onattrs = RenderAST.prototype._ul4onattrs.concat([\"stoppos\", \"content\"]);\n\nexport class RenderBlocksAST extends RenderAST\n{\n\t_handle_additional_arguments(context, args, kwargs)\n\t{\n\t\tlet localcontext = context.inheritvars();\n\t\tBlockAST.prototype._eval.call(this, localcontext);\n\n\t\tfor (let key in localcontext.vars)\n\t\t{\n\t\t\tif (localcontext.vars.hasOwnProperty(key))\n\t\t\t{\n\t\t\t\tif (key in kwargs)\n\t\t\t\t\tthrow new ArgumentError(\"duplicate keyword argument \" + key);\n\t\t\t\tkwargs[key] = localcontext.get(key);\n\t\t\t}\n\t\t}\n\t}\n\n\t[symbols.getattr](attrname)\n\t{\n\t\tif (\n\t\t\tattrname === \"stoppos\" ||\n\t\t\tattrname === \"stopsource\" ||\n\t\t\tattrname === \"stopsourceprefix\" ||\n\t\t\tattrname === \"stopsourcesuffix\"\n\t\t)\n\t\t\treturn this[attrname];\n\t\telse\n\t\t\treturn super[symbols.getattr](attrname);\n\t}\n};\n\nRenderBlocksAST.prototype._ul4onattrs = RenderAST.prototype._ul4onattrs.concat([\"stoppos\", \"content\"]);\n\n// Slice object\nexport class slice extends Proto\n{\n\tconstructor(start, stop)\n\t{\n\t\tsuper();\n\t\tthis.start = start;\n\t\tthis.stop = stop;\n\t}\n\n\t[symbols.type]()\n\t{\n\t\treturn this.type;\n\t}\n\n\tof(string)\n\t{\n\t\tlet start = this.start || 0;\n\t\tlet stop = this.stop === null ? string.length : this.stop;\n\t\treturn string.slice(start, stop);\n\t}\n\n\t[symbols.repr]()\n\t{\n\t\treturn \"slice(\" + _repr(this.start) + \", \" + _repr(this.stop) + \", None)\";\n\t}\n\n\t[symbols.getattr](attrname)\n\t{\n\t\tswitch (attrname)\n\t\t{\n\t\t\tcase \"start\":\n\t\t\t\treturn this.start;\n\t\t\tcase \"stop\":\n\t\t\t\treturn this.stop;\n\t\t\tdefault:\n\t\t\t\tthrow new AttributeError(this, attrname);\n\t\t}\n\t}\n};\n\nslice.prototype.type = new Type(null, \"slice\", \"A slice specification.\");\n\n\n// List/String slice\nexport class SliceAST extends CodeAST\n{\n\tconstructor(template, pos, index1, index2)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.index1 = index1;\n\t\tthis.index2 = index2;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<SliceAST\");\n\t\tif (this.index1 !== null)\n\t\t{\n\t\t\tout.push(\" index1=\");\n\t\t\tthis.index1._repr(out);\n\t\t}\n\t\tif (this.index2 !== null)\n\t\t{\n\t\t\tout.push(\" index2=\");\n\t\t\tthis.index2._repr(out);\n\t\t}\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet index1 = this.index1 !== null ? this.index1._handle_eval(context) : null;\n\t\tlet index2 = this.index2 !== null ? this.index2._handle_eval(context) : null;\n\t\treturn new slice(index1, index2);\n\t}\n};\n\nSliceAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"index1\", \"index2\"]);\n\nexport class SetVarAST extends CodeAST\n{\n\tconstructor(template, pos, lvalue, value)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.lvalue = lvalue;\n\t\tthis.value = value;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<\");\n\t\tout.push(this.constructor.name);\n\t\tout.push(\" lvalue=\");\n\t\tout.push(_repr(this.lvalue));\n\t\tout.push(\" value=\");\n\t\tthis.value._repr(out);\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet value = this.value._handle_eval(context);\n\t\tlet items = _unpackvar(this.lvalue, value);\n\t\tfor (let [lvalue, value] of items)\n\t\t\tlvalue._handle_eval_set(context, value);\n\t}\n};\n\nSetVarAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"lvalue\", \"value\"]);\n\nexport class ModifyVarAST extends SetVarAST\n{\n\t_eval(context)\n\t{\n\t\tlet value = this.value._handle_eval(context);\n\t\tlet items = _unpackvar(this.lvalue, value);\n\t\tfor (let [lvalue, value] of items)\n\t\t\tlvalue._handle_eval_modify(context, this._operator, value);\n\t}\n};\n\nexport class AddVarAST extends ModifyVarAST\n{\n};\n\nAddVarAST.prototype._operator = AddAST.prototype;\n\nexport class SubVarAST extends ModifyVarAST\n{\n};\n\nSubVarAST.prototype._operator = SubAST.prototype;\n\nexport class MulVarAST extends ModifyVarAST\n{\n};\n\nMulVarAST.prototype._operator = MulAST.prototype;\n\nexport class TrueDivVarAST extends ModifyVarAST\n{\n};\n\nTrueDivVarAST.prototype._operator = TrueDivAST.prototype;\n\nexport class FloorDivVarAST extends ModifyVarAST\n{\n};\n\nFloorDivVarAST.prototype._operator = FloorDivAST.prototype;\n\nexport class ModVarAST extends ModifyVarAST\n{\n};\n\nModVarAST.prototype._operator = ModAST.prototype;\n\nexport class ShiftLeftVarAST extends ModifyVarAST\n{\n};\n\nShiftLeftVarAST.prototype._operator = ShiftLeftAST.prototype;\n\nexport class ShiftRightVarAST extends ModifyVarAST\n{\n};\n\nShiftRightVarAST.prototype._operator = ShiftRightAST.prototype;\n\nexport class BitAndVarAST extends ModifyVarAST\n{\n};\n\nBitAndVarAST.prototype._operator = BitAndAST.prototype;\n\nexport class BitXOrVarAST extends ModifyVarAST\n{\n};\n\nBitXOrVarAST.prototype._operator = BitXOrAST.prototype;\n\nexport class BitOrVarAST extends ModifyVarAST\n{\n};\n\nBitOrVarAST.prototype._operator = BitOrAST.prototype;\n\nexport class BlockAST extends CodeAST\n{\n\tconstructor(template, startpos, stoppos)\n\t{\n\t\tsuper(template, startpos, stoppos);\n\t\tthis.content = [];\n\t}\n\n\t_eval(context)\n\t{\n\t\tfor (let item of this.content)\n\t\t\titem._handle_eval(context);\n\t}\n\n\t_str(out)\n\t{\n\t\tif (this.content.length)\n\t\t{\n\t\t\tfor (let item of this.content)\n\t\t\t{\n\t\t\t\titem._str(out);\n\t\t\t\tout.push(0);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tout.push(\"pass\");\n\t\t\tout.push(0);\n\t\t}\n\t}\n\n\t[symbols.getattr](attrname)\n\t{\n\t\tif (\n\t\t\tattrname === \"stoppos\" ||\n\t\t\tattrname === \"stopsource\" ||\n\t\t\tattrname === \"stopsourceprefix\" ||\n\t\t\tattrname === \"stopsourcesuffix\"\n\t\t)\n\t\t\treturn this[attrname];\n\t\telse\n\t\t\treturn super[symbols.getattr](attrname);\n\t}\n};\n\nBlockAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"stoppos\", \"content\"]);\n\nexport class ForBlockAST extends BlockAST\n{\n\tconstructor(template, pos, varname, container)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.varname = varname;\n\t\tthis.container = container;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<ForBlockAST\");\n\t\tout.push(\" varname=\");\n\t\tout.push(_repr(this.varname));\n\t\tout.push(\" container=\");\n\t\tthis.container._repr(out);\n\t\tout.push(\">\");\n\t}\n\n\t_str_varname(out, varname)\n\t{\n\t\tif (_islist(varname))\n\t\t{\n\t\t\tout.push(\"(\");\n\t\t\tlet first = truel\n\t\t\tfor (let subname of varname)\n\t\t\t{\n\t\t\t\tif (first)\n\t\t\t\t\tfirst = false;\n\t\t\t\telse\n\t\t\t\t\tout.push(\", \");\n\t\t\t\tthis._str_varname(out, subname);\n\t\t\t}\n\t\t\tif (varname.length == 1)\n\t\t\t\tout.push(\",\");\n\t\t\tout.push(\")\");\n\t\t}\n\t\telse\n\t\t\tvarname._str(out);\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet container = this.container._handle_eval(context);\n\n\t\tfor (let iter = _iter(container);;)\n\t\t{\n\t\t\tlet value = iter.next();\n\t\t\tif (value.done)\n\t\t\t\tbreak;\n\t\t\tlet varitems = _unpackvar(this.varname, value.value);\n\t\t\tfor (let [lvalue, value] of varitems)\n\t\t\t\tlvalue._handle_eval_set(context, value);\n\t\t\ttry\n\t\t\t{\n\t\t\t\t// We can't call _handle_eval() here, as this would in turn call this function again, leading to infinite recursion\n\t\t\t\t// But we don't have to, as wrapping original exception in ``Error`` has already been done by the lower levels\n\t\t\t\tsuper._eval(context);\n\t\t\t}\n\t\t\tcatch (exc)\n\t\t\t{\n\t\t\t\tif (exc instanceof BreakException)\n\t\t\t\t\tbreak;\n\t\t\t\telse if (exc instanceof ContinueException)\n\t\t\t\t\t;\n\t\t\t\telse\n\t\t\t\t\tthrow exc;\n\t\t\t}\n\t\t}\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(\"for \");\n\t\tthis._str_varname(out, this.varname);\n\t\tout.push(\" in \");\n\t\tthis.container._str(out);\n\t\tout.push(\":\");\n\t\tout.push(+1);\n\t\tBlockAST.prototype._str.call(this, out);\n\t\tout.push(-1);\n\t}\n};\n\nForBlockAST.prototype._ul4onattrs = BlockAST.prototype._ul4onattrs.concat([\"varname\", \"container\"]);\n\nexport class WhileBlockAST extends BlockAST\n{\n\tconstructor(template, pos, condition)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.condition = condition;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<WhileAST\");\n\t\tout.push(\" condition=\");\n\t\tthis.condition._repr(out);\n\t\tout.push(\">\");\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(\"while \");\n\t\tthis.condition._repr(out);\n\t\tout.push(\":\");\n\t\tout.push(+1);\n\t\tBlockAST.prototype._str.call(this, out);\n\t\tout.push(-1);\n\t}\n\n\t_eval(context)\n\t{\n\t\twhile (true)\n\t\t{\n\t\t\tlet cond = this.condition._handle_eval(context);\n\t\t\tif (!_bool(cond))\n\t\t\t\tbreak;\n\t\t\ttry\n\t\t\t{\n\t\t\t\t// We can't call _handle_eval() here, as this would in turn call this function again, leading to infinite recursion\n\t\t\t\t// But we don't have to, as wrapping the original exception in ``Error`` has already been done by the lower levels\n\t\t\t\tsuper._eval(context);\n\t\t\t}\n\t\t\tcatch (exc)\n\t\t\t{\n\t\t\t\tif (exc instanceof BreakException)\n\t\t\t\t\tbreak;\n\t\t\t\telse if (exc instanceof ContinueException)\n\t\t\t\t\t;\n\t\t\t\telse\n\t\t\t\t\tthrow exc;\n\t\t\t}\n\t\t}\n\t}\n};\n\nWhileBlockAST.prototype._ul4onattrs = BlockAST.prototype._ul4onattrs.concat([\"condition\"]);\n\nexport class BreakAST extends CodeAST\n{\n\t_eval(context)\n\t{\n\t\tthrow new BreakException();\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(\"break\");\n\t\tout.push(0);\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<BreakAST>\");\n\t}\n};\n\nexport class ContinueAST extends CodeAST\n{\n\t_eval(context)\n\t{\n\t\tthrow new ContinueException();\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(\"continue\");\n\t\tout.push(0);\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<ContinueAST>\");\n\t}\n};\n\nexport class ConditionalBlocksAST extends BlockAST\n{\n\t_eval(context)\n\t{\n\t\tfor (let block of this.content)\n\t\t{\n\t\t\tlet execute = block._execute(context);\n\t\t\tif (execute)\n\t\t\t{\n\t\t\t\tblock._handle_eval(context);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n};\n\nexport class ConditionalBlockAST extends  BlockAST\n{\n\tconstructor(template, pos, condition)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.condition = condition;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<\");\n\t\tout.push(this.constructor.name);\n\t\tout.push(\" condition=\");\n\t\tthis.condition._repr(out);\n\t\tout.push(\">\");\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(this._strname);\n\t\tout.push(\" \");\n\t\tthis.condition._str(out);\n\t\tout.push(\":\");\n\t\tout.push(+1);\n\t\tBlockAST.prototype._str.call(this, out);\n\t\tout.push(-1);\n\t}\n\n\t_execute(context)\n\t{\n\t\tlet cond = this.condition._handle_eval(context);\n\t\tlet result = _bool(cond);\n\t\treturn result;\n\t}\n};\n\nConditionalBlockAST.prototype._ul4onattrs = BlockAST.prototype._ul4onattrs.concat([\"condition\"]);\n\nexport class IfBlockAST extends ConditionalBlockAST\n{\n};\n\nIfBlockAST.prototype._strname = \"if\";\n\nexport class ElIfBlockAST extends ConditionalBlockAST\n{\n};\n\nElIfBlockAST.prototype._strname = \"else if\";\n\nexport class ElseBlockAST extends BlockAST\n{\n\t_repr(out)\n\t{\n\t\tout.push(\"<ElseAST\");\n\t\tout.push(\">\");\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(\"else:\");\n\t\tout.push(+1);\n\t\tBlockAST.prototype._str.call(this, out);\n\t\tout.push(-1);\n\t}\n\n\t_execute(context)\n\t{\n\t\treturn true;\n\t}\n};\n\nexport class Template extends BlockAST\n{\n\tconstructor(template, pos, source, name, whitespace, startdelim, enddelim, signature)\n\t{\n\t\tsuper(template, pos);\n\t\tthis._source = source;\n\t\tthis.name = name;\n\t\tthis.whitespace = whitespace;\n\t\tthis.startdelim = startdelim;\n\t\tthis.enddelim = enddelim;\n\t\tthis.docpos = null;\n\t\tthis.signature = signature;\n\t\tthis._asts = null;\n\t\tthis._ul4_signature = signature;\n\t\tthis.parenttemplate = null;\n\t}\n\n\t[symbols.getattr](attrname)\n\t{\n\t\tlet self = this;\n\t\tswitch (attrname)\n\t\t{\n\t\t\tcase \"content\":\n\t\t\t\treturn this.content;\n\t\t\tcase \"source\":\n\t\t\t\treturn this.source;\n\t\t\tcase \"name\":\n\t\t\t\treturn this.name;\n\t\t\tcase \"whitespace\":\n\t\t\t\treturn this.whitespace;\n\t\t\tcase \"startdelim\":\n\t\t\t\treturn this.startdelim;\n\t\t\tcase \"enddelim\":\n\t\t\t\treturn this.enddelim;\n\t\t\tcase \"doc\":\n\t\t\t\treturn this.doc();\n\t\t\tcase \"signature\":\n\t\t\t\treturn this.signature;\n\t\t\tcase \"parenttemplate\":\n\t\t\t\treturn this.parenttemplate;\n\t\t\tcase \"render\":\n\t\t\t\tlet render = function render(context, vars){ self._renderbound(context, vars); };\n\t\t\t\texpose(render, this.signature, {needscontext: true, needsobject: true});\n\t\t\t\treturn render;\n\t\t\tcase \"renders\":\n\t\t\t\tlet renders = function renders(context, vars){ return self._rendersbound(context, vars); };\n\t\t\t\texpose(renders, this.signature, {needscontext: true, needsobject: true});\n\t\t\t\treturn renders;\n\t\t\tdefault:\n\t\t\t\treturn super[symbols.getattr](attrname);\n\t\t}\n\t}\n\n\tul4ondump(encoder)\n\t{\n\t\tlet signature;\n\t\tencoder.dump(api_version);\n\t\tencoder.dump(this.name);\n\t\tencoder.dump(this._source);\n\t\tencoder.dump(this.whitespace);\n\t\tencoder.dump(this.startdelim);\n\t\tencoder.dump(this.enddelim);\n\t\tencoder.dump(this.docpos);\n\t\tencoder.dump(this.parenttemplate);\n\t\tif (this.signature === null || this.signature instanceof SignatureAST)\n\t\t\tsignature = this.signature;\n\t\telse\n\t\t{\n\t\t\tsignature = [];\n\t\t\tfor (let param of this.signature.params)\n\t\t\t{\n\t\t\t\tsignature.push(param.name);\n\t\t\t\tsignature.push(param.type);\n\t\t\t\tif (param.type.endsWith(\"=\"))\n\t\t\t\t\tsignature.push(param.defaultValue);\n\t\t\t}\n\t\t}\n\t\tencoder.dump(signature);\n\t\tsuper.ul4ondump(encoder);\n\t}\n\n\tul4onload(decoder)\n\t{\n\t\tlet loaded_api_version = decoder.load();\n\t\tlet signature;\n\n\t\tif (loaded_api_version === null)\n\t\t\tthrow new ValueError(\"UL4ON doesn't support templates in 'source' format in Javascript implementation\");\n\n\t\tif (loaded_api_version !== api_version)\n\t\t\tthrow new ValueError(\"invalid version, expected \" + api_version + \", got \" + loaded_api_version);\n\n\t\tthis.name = decoder.load();\n\t\tthis._source = decoder.load();\n\t\tthis.whitespace = decoder.load();\n\t\tthis.startdelim = decoder.load();\n\t\tthis.enddelim = decoder.load();\n\t\tthis.docpos = decoder.load();\n\t\tthis.parenttemplate = decoder.load();\n\t\tsignature = decoder.load();\n\t\tif (_islist(signature))\n\t\t\tsignature = new Signature(...signature);\n\t\tthis.signature = signature;\n\t\tthis._ul4_signature = signature;\n\t\tsuper.ul4onload(decoder);\n\t}\n\n\tloads(string)\n\t{\n\t\treturn loads(string);\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet signature = null;\n\t\tif (this.signature !== null)\n\t\t\tsignature = this.signature._handle_eval(context);\n\t\tlet closure = new TemplateClosure(this, signature, context.vars);\n\t\tcontext.set(this.name, closure);\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<Template\");\n\t\tif (this.name !== null)\n\t\t{\n\t\t\tout.push(\" name=\");\n\t\t\tout.push(_repr(this.name));\n\t\t}\n\t\tout.push(\" whitespace=\");\n\t\tout.push(_repr(this.whitespace));\n\t\tif (this.startdelim !== \"<?\")\n\t\t{\n\t\t\tout.push(\" startdelim=\");\n\t\t\tout.push(_repr(this.startdelim));\n\t\t}\n\t\tif (this.enddelim !== \"?>\")\n\t\t{\n\t\t\tout.push(\" enddelim=\");\n\t\t\tout.push(_repr(this.enddelim));\n\t\t}\n\t\tout.push(\">\");\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(\"def \");\n\t\tout.push(this.name ? this.name : \"unnamed\");\n\t\tout.push(\":\");\n\t\tout.push(+1);\n\t\tBlockAST.prototype._str.call(this, out);\n\t\tout.push(-1);\n\t}\n\n\t_renderbound(context, vars)\n\t{\n\t\tlet localcontext = context.replacevars(vars);\n\t\ttry\n\t\t{\n\t\t\tBlockAST.prototype._eval.call(this, localcontext);\n\t\t}\n\t\tcatch (exc)\n\t\t{\n\t\t\tif (!(exc instanceof ReturnException))\n\t\t\t\tthrow exc;\n\t\t}\n\t}\n\n\t[symbols.render](context, vars)\n\t{\n\t\tthis._renderbound(context, vars);\n\t}\n\n\trender(context, vars)\n\t{\n\t\tthis._renderbound(context, vars);\n\t}\n\n\t_rendersbound(context, vars)\n\t{\n\t\tlet localcontext = context.replaceoutput();\n\t\tthis._renderbound(localcontext, vars);\n\t\treturn localcontext.getoutput();\n\t}\n\n\trenders(vars=null, globals=null)\n\t{\n\t\tlet context = new Context({}, globals);\n\t\tvars = vars || {};\n\t\tif (this.signature !== null)\n\t\t\tvars = this.signature.bindObject(this.name, [], vars);\n\t\treturn this._rendersbound(context, vars);\n\t}\n\n\tdoc()\n\t{\n\t\treturn this.docpos != null ? this.docpos.of(this._source) : null;\n\t}\n\n\t_callbound(context, vars)\n\t{\n\t\tlet localcontext = context.replacevars(vars);\n\t\ttry\n\t\t{\n\t\t\tBlockAST.prototype._eval.call(this, localcontext);\n\t\t}\n\t\tcatch (exc)\n\t\t{\n\t\t\tif (exc instanceof ReturnException)\n\t\t\t\treturn exc.result;\n\t\t\telse\n\t\t\t\tthrow exc;\n\t\t}\n\t\treturn null;\n\t}\n\n\tcall(vars=null, globals=null)\n\t{\n\t\tlet context = new Context({}, globals);\n\t\tvars = vars || {};\n\t\tif (this.signature !== null)\n\t\t\tvars = this.signature.bindObject(this.name, [], vars);\n\t\treturn this._callbound(context, vars);\n\t}\n\n\t[symbols.call](context, vars)\n\t{\n\t\treturn this._callbound(context, vars);\n\t}\n\n\tul4type()\n\t{\n\t\treturn \"template\";\n\t}\n};\n\nTemplate.prototype._ul4_needsobject = true;\nTemplate.prototype._ul4_needscontext = true;\n\nexport class SignatureAST extends CodeAST\n{\n\tconstructor(template, pos)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.params = [];\n\t}\n\n\tul4ondump(encoder)\n\t{\n\t\tsuper.ul4ondump(encoder);\n\n\t\tlet dump = [];\n\n\t\tfor (let param of this.params)\n\t\t{\n\t\t\tdump.push(param[0]);\n\t\t\tdump.push(param[1]);\n\t\t\tif (param[1].endsWith(\"=\"))\n\t\t\t\tdump.push(param[2]);\n\t\t}\n\t\tencoder.dump(dump);\n\t}\n\n\tul4onload(decoder)\n\t{\n\t\tsuper.ul4onload(decoder);\n\t\tlet dump = decoder.load();\n\t\tthis.params = [];\n\t\tlet name;\n\t\tlet type;\n\t\tlet state = 0;\n\t\tfor (let param of dump)\n\t\t{\n\t\t\tif (state == 0)\n\t\t\t{\n\t\t\t\tname = param;\n\t\t\t\tstate = 1;\n\t\t\t}\n\t\t\telse if (state == 1)\n\t\t\t{\n\t\t\t\ttype = param;\n\t\t\t\tif (type.endsWith(\"=\"))\n\t\t\t\t\tstate = 2;\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.params.push({name: name, type: type, defaultValue: null});\n\t\t\t\t\tstate = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.params.push({name: name, type: type, defaultValue: param});\n\t\t\t\tstate = 0;\n\t\t\t}\n\t\t}\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet args = [];\n\t\tfor (let param of this.params)\n\t\t{\n\t\t\targs.push(param.name);\n\t\t\targs.push(param.type);\n\t\t\tif (param.type.endsWith(\"=\"))\n\t\t\t\targs.push(param.defaultValue._handle_eval(context));\n\t\t}\n\t\treturn new Signature(...args);\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<\");\n\t\tout.push(this.constructor.name);\n\t\tout.push(\" params=\");\n\t\tthis.params._repr(out);\n\t\tout.push(\">\");\n\t}\n};\n\nexport class TemplateClosure extends Proto\n{\n\tstatic classmodule = \"ul4\";\n\tstatic classdoc = \"A locally defined UL4 template.\";\n\n\tconstructor(template, signature, vars)\n\t{\n\t\tsuper();\n\t\tthis.template = template;\n\t\tthis.signature = signature;\n\t\tthis.vars = vars;\n\t\tthis._ul4_signature = signature;\n\t\t// Copy over the required attribute from the template\n\t\tthis.name = template.name;\n\t\tthis.tag = template.tag;\n\t\tthis.endtag = template.endtag;\n\t\tthis._source = template._source;\n\t\tthis.startdelim = template.startdelim;\n\t\tthis.enddelim = template.enddelim;\n\t\tthis.docpos = template.docpos;\n\t\tthis.content = template.content;\n\t}\n\n\t[symbols.render](context, vars)\n\t{\n\t\tthis.template._renderbound(context, _extend(this.vars, vars));\n\t}\n\n\trender(context, vars)\n\t{\n\t\tthis.template._renderbound(context, _extend(this.vars, vars));\n\t}\n\n\t[symbols.call](context, vars)\n\t{\n\t\treturn this.template._callbound(context, _extend(this.vars, vars));\n\t}\n\n\t_renderbound(context, vars)\n\t{\n\t\tthis.template._renderbound(context, _extend(this.vars, vars));\n\t}\n\n\t_rendersbound(context, vars)\n\t{\n\t\treturn this.template._rendersbound(context, _extend(this.vars, vars));\n\t}\n\n\t[symbols.getattr](attrname)\n\t{\n\t\tlet self = this;\n\t\tswitch (attrname)\n\t\t{\n\t\t\tcase \"render\":\n\t\t\t\tlet render = function render(context, vars){ self._renderbound(context, vars); };\n\t\t\t\texpose(render, this.signature, {needscontext: true, needsobject: true});\n\t\t\t\treturn render;\n\t\t\tcase \"renders\":\n\t\t\t\tlet renders = function renders(context, vars){ return self._rendersbound(context, vars); };\n\t\t\t\texpose(renders, this.signature, {needscontext: true, needsobject: true});\n\t\t\t\treturn renders;\n\t\t\tcase \"signature\":\n\t\t\t\treturn this.signature;\n\t\t\tdefault:\n\t\t\t\treturn this.template[symbols.getattr](attrname);\n\t\t}\n\t}\n\n\tul4type()\n\t{\n\t\treturn \"template\";\n\t}\n};\n\nTemplateClosure.prototype._ul4_needsobject = true;\nTemplateClosure.prototype._ul4_needscontext = true;\n\n// Create a color object from the red, green, blue and alpha values ``r``, ``g``, ``b`` and ``b``\nexport function _rgb(r, g, b, a)\n{\n\treturn new Color(255*r, 255*g, 255*b, 255*a);\n};\n\n// Convert ``obj`` to a string and escape the characters ``&``, ``<``, ``>``, ``'`` and ``\"`` with their XML character/entity reference\nexport function _xmlescape(obj)\n{\n\tobj = _str(obj);\n\tobj = obj.replace(/&/g, \"&amp;\");\n\tobj = obj.replace(/</g, \"&lt;\");\n\tobj = obj.replace(/>/g, \"&gt;\");\n\tobj = obj.replace(/'/g, \"&#39;\");\n\tobj = obj.replace(/\"/g, \"&quot;\");\n\treturn obj;\n};\n\n// Convert ``obj`` to a string suitable for output into a CSV file\nexport function _csv(obj)\n{\n\tif (obj === null)\n\t\treturn \"\";\n\telse if (typeof(obj) !== \"string\")\n\t\tobj = _repr(obj);\n\tif (obj.indexOf(\",\") !== -1 || obj.indexOf('\"') !== -1 || obj.indexOf(\"\\n\") !== -1)\n\t\tobj = '\"' + obj.replace(/\"/g, '\"\"') + '\"';\n\treturn obj;\n};\n\n// Return a string containing one character with the codepoint ``i``\nexport function _chr(i)\n{\n\tif (typeof(i) !== \"number\")\n\t\tthrow new TypeError(\"chr() requires an int\");\n\treturn String.fromCharCode(i);\n};\n\n// Return the codepoint for the one and only character in the string ``c``\nexport function _ord(c)\n{\n\tif (typeof(c) !== \"string\" || c.length != 1)\n\t\tthrow new TypeError(\"ord() requires a string of length 1\");\n\treturn c.charCodeAt(0);\n};\n\n// Convert an integer to a hexadecimal string\nexport function _hex(number)\n{\n\tif (typeof(number) !== \"number\")\n\t\tthrow new TypeError(\"hex() requires an int\");\n\tif (number < 0)\n\t\treturn \"-0x\" + number.toString(16).substr(1);\n\telse\n\t\treturn \"0x\" + number.toString(16);\n};\n\n// Convert an integer to a octal string\nexport function _oct(number)\n{\n\tif (typeof(number) !== \"number\")\n\t\tthrow new TypeError(\"oct() requires an int\");\n\tif (number < 0)\n\t\treturn \"-0o\" + number.toString(8).substr(1);\n\telse\n\t\treturn \"0o\" + number.toString(8);\n};\n\n// Convert an integer to a binary string\nexport function _bin(number)\n{\n\tif (typeof(number) !== \"number\")\n\t\tthrow new TypeError(\"bin() requires an int\");\n\tif (number < 0)\n\t\treturn \"-0b\" + number.toString(2).substr(1);\n\telse\n\t\treturn \"0b\" + number.toString(2);\n};\n\n// Return the minimum value\nexport function _min(context, defaultValue=Object, key=null, args=[])\n{\n\tif (args.length == 0)\n\t\tthrow new ArgumentError(\"min() requires at least 1 argument, 0 given\");\n\telse if (args.length == 1)\n\t\targs = args[0];\n\tlet iter = _iter(args);\n\tlet result;\n\tlet minvalue;\n\tlet first = true;\n\twhile (true)\n\t{\n\t\tlet item = iter.next();\n\t\tif (item.done)\n\t\t{\n\t\t\tif (first)\n\t\t\t{\n\t\t\t\tif (defaultValue === Object)\n\t\t\t\t\tthrow new ValueError(\"min() argument is an empty sequence!\");\n\t\t\t\treturn defaultValue;\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\t\tlet testvalue = item.value;\n\t\tif (key !== null)\n\t\t\ttestvalue = _call(context, key, [testvalue], {});\n\t\tif (first || (testvalue < minvalue))\n\t\t{\n\t\t\tresult = item.value;\n\t\t\tminvalue = testvalue;\n\t\t}\n\t\tfirst = false;\n\t}\n};\n\n// Return the maximum value\nexport function _max(context, defaultValue=Object, key=null, args=[])\n{\n\tif (args.length == 0)\n\t\tthrow new ArgumentError(\"max() requires at least 1 argument, 0 given\");\n\telse if (args.length == 1)\n\t\targs = args[0];\n\tlet iter = _iter(args);\n\tlet result;\n\tlet minvalue;\n\tlet first = true;\n\twhile (true)\n\t{\n\t\tlet item = iter.next();\n\t\tif (item.done)\n\t\t{\n\t\t\tif (first)\n\t\t\t{\n\t\t\t\tif (defaultValue === Object)\n\t\t\t\t\tthrow new ValueError(\"max() argument is an empty sequence!\");\n\t\t\t\treturn defaultValue;\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\t\tlet testvalue = item.value;\n\t\tif (key !== null)\n\t\t\ttestvalue = _call(context, key, [testvalue], {});\n\t\tif (first || (testvalue > minvalue))\n\t\t{\n\t\t\tresult = item.value;\n\t\t\tminvalue = testvalue;\n\t\t}\n\t\tfirst = false;\n\t}\n};\n\n// Return the of the values from the iterable starting with ``start`` (default ``0``)\nexport function _sum(iterable, start=0)\n{\n\tfor (let iter = _iter(iterable);;)\n\t{\n\t\tlet item = iter.next();\n\t\tif (item.done)\n\t\t\tbreak;\n\t\tstart += item.value;\n\t}\n\treturn start;\n};\n\n// Return the first value produced by iterating through ``iterable`` (defaulting to ``defaultValue`` if the iterator is empty)\nexport function _first(iterable, defaultValue=null)\n{\n\tlet item = _iter(iterable).next();\n\treturn item.done ? defaultValue : item.value;\n};\n\n// Return the last value produced by iterating through ``iterable`` (defaulting to ``defaultValue`` if the iterator is empty)\nexport function _last(iterable, defaultValue=null)\n{\n\tlet value = defaultValue;\n\n\tfor (let iter = _iter(iterable);;)\n\t{\n\t\tlet item = iter.next();\n\t\tif (item.done)\n\t\t\tbreak;\n\t\tvalue = item.value;\n\t}\n\treturn value;\n};\n\n// Return a sorted version of ``iterable``\nexport function _sorted(context, iterable, key=null, reverse=false)\n{\n\tif (key === null)\n\t{\n\t\t// FIXME: stability\n\t\tlet cmp = reverse ? function cmp(a, b)\n\t\t{\n\t\t\treturn -_cmp(\"<=>\", a, b);\n\t\t} : function cmp(a, b)\n\t\t{\n\t\t\treturn _cmp(\"<=>\", a, b);\n\t\t};\n\t\tlet result = _list(iterable);\n\t\tresult.sort(cmp);\n\t\treturn result;\n\t}\n\telse\n\t{\n\t\tlet sort = [];\n\n\t\tfor (let i = 0, iter = _iter(iterable);;++i)\n\t\t{\n\t\t\tlet item = iter.next();\n\t\t\tif (item.done)\n\t\t\t\tbreak;\n\t\t\tlet keyvalue = _call(context, key, [item.value], {});\n\t\t\t// For a stable sorting we have to use the negative index if\n\t\t\t// reverse sorting is specified\n\t\t\tsort.push([keyvalue, reverse ? -i : i, item.value]);\n\t\t}\n\t\tfunction cmp(s1, s2)\n\t\t{\n\t\t\tlet res = _cmp(\"<=>\", s1[0], s2[0]);\n\t\t\tif (res)\n\t\t\t\treturn reverse ? -res : res;\n\t\t\tres = _cmp(\"<=>\", s1[1], s2[1]);\n\t\t\treturn reverse ? -res : res;\n\t\t};\n\n\t\tsort.sort(cmp);\n\n\t\tlet result = [];\n\t\tfor (let item of sort)\n\t\t\tresult.push(item[2]);\n\t\treturn result;\n\t}\n};\n\n// Return a iterable object iterating from ``start`` up to (but not including) ``stop`` with a step size of ``step``\nexport function _range(start, stop=Object, step=Object)\n{\n\tif (step === Object)\n\t\tstep = 1;\n\tif (stop === Object)\n\t{\n\t\tstop = start;\n\t\tstart = 0;\n\t}\n\tlet lower, higher;\n\tif (step === 0)\n\t\tthrow new ValueError(\"range() requires a step argument != 0\");\n\telse if (step > 0)\n\t{\n\t\tlower = start;\n\t\thigher = stop;\n\t}\n\telse\n\t{\n\t\tlower = stop;\n\t\thigher = start;\n\t}\n\tlet length = (lower < higher) ? Math.floor((higher - lower - 1)/Math.abs(step)) + 1 : 0;\n\n\treturn {\n\t\tindex: 0,\n\t\tnext: function()\n\t\t{\n\t\t\tif (this.index >= length)\n\t\t\t\treturn {done: true};\n\t\t\treturn {value: start + (this.index++) * step, done: false};\n\t\t}\n\t};\n};\n\n// Return a iterable object returning a slice from the argument\nexport function _slice(iterable, start, stop=Object, step=Object)\n{\n\tif (step === Object)\n\t\tstep = 1;\n\tif (stop === Object)\n\t{\n\t\tstop = start;\n\t\tstart = 0;\n\t}\n\tif (start < 0)\n\t\tthrow new ValueError(\"slice() requires a start argument >= 0\");\n\tif (stop < 0)\n\t\tthrow new ValueError(\"slice() requires a stop argument >= 0\");\n\tif (step <= 0)\n\t\tthrow new ValueError(\"slice() requires a step argument > 0\");\n\n\tlet next = start, count = 0;\n\tlet iter = _iter(iterable);\n\treturn {\n\t\tnext: function() {\n\t\t\tlet result;\n\t\t\twhile (count < next)\n\t\t\t{\n\t\t\t\tresult = iter.next();\n\t\t\t\tif (result.done)\n\t\t\t\t\treturn result;\n\t\t\t\t++count;\n\t\t\t}\n\t\t\tif (stop !== null && count >= stop)\n\t\t\t\treturn {done: true};\n\t\t\tresult = iter.next();\n\t\t\tif (result.done)\n\t\t\t\treturn result;\n\t\t\t++count;\n\t\t\tnext += step;\n\t\t\tif (stop !== null && next > stop)\n\t\t\t\tnext = stop;\n\t\t\treturn result;\n\t\t}\n\t};\n};\n\n// ``%`` escape unsafe characters in the string ``string``\nexport function _urlquote(string)\n{\n\treturn encodeURIComponent(string);\n};\n\n// The inverse function of ``urlquote``\nexport function _urlunquote(string)\n{\n\treturn decodeURIComponent(string);\n};\n\n// Return a reverse iterator over ``sequence``\nexport function _reversed(sequence)\n{\n\tif (typeof(sequence) !== \"string\" && !_islist(sequence)) // We don't have to materialize strings or lists\n\t\tsequence = _list(sequence);\n\treturn {\n\t\tindex: sequence.length-1,\n\t\tnext: function() {\n\t\t\treturn this.index >= 0 ? {value: sequence[this.index--], done: false} : {done: true};\n\t\t}\n\t};\n};\n\n// Returns a random number in the interval ``[0;1[``\nexport function _random()\n{\n\treturn Math.random();\n};\n\n// Return a randomly select item from ``range(start, stop, step)``\nexport function _randrange(start, stop=Object, step=Object)\n{\n\tif (step === Object)\n\t\tstep = 1;\n\tif (stop === Object)\n\t{\n\t\tstop = start;\n\t\tstart = 0;\n\t}\n\tlet width = stop-start;\n\n\tlet value = Math.random();\n\n\tlet n;\n\tif (step > 0)\n\t\tn = Math.floor((width + step - 1) / step);\n\telse if (step < 0)\n\t\tn = Math.floor((width + step + 1) / step);\n\telse\n\t\tthrow new ValueError(\"randrange() requires a step argument != 0\");\n\treturn start + step*Math.floor(value * n);\n};\n\n// Return a random item/char from the list/string ``sequence``\nexport function _randchoice(sequence)\n{\n\tlet iscolor = _iscolor(sequence);\n\tif (typeof(sequence) !== \"string\" && !_islist(sequence) && !iscolor)\n\t\tthrow new TypeError(\"randchoice() requires a string or list\");\n\tif (iscolor)\n\t\tsequence = _list(sequence);\n\treturn sequence[Math.floor(Math.random() * sequence.length)];\n};\n\n// Round a number ``x`` to ``digits`` decimal places (may be negative)\nexport function _round(x, digits=0)\n{\n\tif (digits)\n\t{\n\t\tlet threshold = Math.pow(10, digits);\n\t\treturn Math.round(x*threshold)/threshold;\n\t}\n\telse\n\t\treturn Math.round(x);\n};\n\n// Round a number ``x`` down to ``digits`` decimal places (may be negative)\nexport function _floor(x, digits=0)\n{\n\tif (digits)\n\t{\n\t\tlet threshold = Math.pow(10, digits);\n\t\treturn Math.floor(x*threshold)/threshold;\n\t}\n\telse\n\t\treturn Math.floor(x);\n};\n\n// Round a number ``x`` up to ``digits`` decimal places (may be negative)\nexport function _ceil(x, digits=0)\n{\n\tif (digits)\n\t{\n\t\tlet threshold = Math.pow(10, digits);\n\t\treturn Math.ceil(x*threshold)/threshold;\n\t}\n\telse\n\t\treturn Math.ceil(x);\n};\n\n// Return a hex-encode MD5 hash of the argument\n// This uses the md5 function from https://github.com/blueimp/JavaScript-MD5\nimport md5 from 'blueimp-md5';\n\nexport function _md5(string)\n{\n\treturn md5(string);\n}\n\nexport function _scrypt(string, salt)\n{\n\tthrow new NotImplementedError(\"scrypt() is not implemented\");\n}\n\n// Return an iterator over ``[index, item]`` lists from the iterable object ``iterable``. ``index`` starts at ``start`` (defaulting to 0)\nexport function _enumerate(iterable, start=0)\n{\n\treturn {\n\t\titer: _iter(iterable),\n\t\tindex: start,\n\t\tnext: function() {\n\t\t\tlet item = this.iter.next();\n\t\t\treturn item.done ? item : {value: [this.index++, item.value], done: false};\n\t\t}\n\t};\n};\n\n// Return an iterator over ``[isfirst, item]`` lists from the iterable object ``iterable`` (``isfirst`` is true for the first item, false otherwise)\nexport function _isfirst(iterable)\n{\n\tlet iter = _iter(iterable);\n\tlet isfirst = true;\n\treturn {\n\t\tnext: function() {\n\t\t\tlet item = iter.next();\n\t\t\tlet result = item.done ? item : {value: [isfirst, item.value], done: false};\n\t\t\tisfirst = false;\n\t\t\treturn result;\n\t\t}\n\t};\n};\n\n// Return an iterator over ``[islast, item]`` lists from the iterable object ``iterable`` (``islast`` is true for the last item, false otherwise)\nexport function _islast(iterable)\n{\n\tlet iter = _iter(iterable);\n\tlet lastitem = iter.next();\n\treturn {\n\t\tnext: function() {\n\t\t\tif (lastitem.done)\n\t\t\t\treturn lastitem;\n\t\t\tlet item = iter.next();\n\t\t\tlet result = {value: [item.done, lastitem.value], done: false};\n\t\t\tlastitem = item;\n\t\t\treturn result;\n\t\t}\n\t};\n};\n\n// Return an iterator over ``[isfirst, islast, item]`` lists from the iterable object ``iterable`` (``isfirst`` is true for the first item, ``islast`` is true for the last item. Both are false otherwise)\nexport function _isfirstlast(iterable)\n{\n\tlet iter = _iter(iterable);\n\tlet isfirst = true;\n\tlet lastitem = iter.next();\n\treturn {\n\t\tnext: function() {\n\t\t\tif (lastitem.done)\n\t\t\t\treturn lastitem;\n\t\t\tlet item = iter.next();\n\t\t\tlet result = {value: [isfirst, item.done, lastitem.value], done: false};\n\t\t\tlastitem = item;\n\t\t\tisfirst = false;\n\t\t\treturn result;\n\t\t}\n\t};\n};\n\n// Return an iterator over ``[index, isfirst, islast, item]`` lists from the iterable object ``iterable`` (``isfirst`` is true for the first item, ``islast`` is true for the last item. Both are false otherwise)\nexport function _enumfl(iterable, start=0)\n{\n\tlet iter = _iter(iterable);\n\tlet i = start;\n\tlet isfirst = true;\n\tlet lastitem = iter.next();\n\treturn {\n\t\tnext: function() {\n\t\t\tif (lastitem.done)\n\t\t\t\treturn lastitem;\n\t\t\tlet item = iter.next();\n\t\t\tlet result = {value: [i++, isfirst, item.done, lastitem.value], done: false};\n\t\t\tlastitem = item;\n\t\t\tisfirst = false;\n\t\t\treturn result;\n\t\t}\n\t};\n};\n\n// Return an iterator over lists, where the i'th list consists of all i'th items from the arguments (terminating when the shortest argument ends)\nexport function _zip(iterables)\n{\n\tlet result;\n\tif (iterables.length)\n\t{\n\t\tlet iters = [];\n\t\tfor (let iterable of iterables)\n\t\t\titers.push(_iter(iterable));\n\n\t\treturn {\n\t\t\tnext: function() {\n\t\t\t\tlet items = [];\n\t\t\t\tfor (let iter of iters)\n\t\t\t\t{\n\t\t\t\t\tlet item = iter.next();\n\t\t\t\t\tif (item.done)\n\t\t\t\t\t\treturn item;\n\t\t\t\t\titems.push(item.value);\n\t\t\t\t}\n\t\t\t\treturn {value: items, done: false};\n\t\t\t}\n\t\t};\n\t}\n\telse\n\t{\n\t\treturn {\n\t\t\tnext: function() {\n\t\t\t\treturn {done: true};\n\t\t\t}\n\t\t};\n\t}\n};\n\n// Return the absolute value for the number ``number``\nexport function _abs(number)\n{\n\tif (number !== null && typeof(number[symbols.abs]) === \"function\")\n\t\treturn number[symbols.abs]();\n\treturn Math.abs(number);\n};\n\n// Return a ``Date`` object from the arguments passed in\nexport function _date(year, month, day)\n{\n\treturn datetype[symbols.call](year, month, day);\n};\n\nexport function _datetime(year, month, day, hour=0, minute=0, second=0, microsecond=0)\n{\n\treturn datetimetype[symbols.call](year, month, day, hour, minute, second, microsecond);\n};\n\n// Return a ``TimeDelta`` object from the arguments passed in\nexport function _timedelta(days=0, seconds=0, microseconds=0)\n{\n\treturn TimeDelta.type[symbols.call](days, seconds, microseconds);\n};\n\n// Return a ``MonthDelta`` object from the arguments passed in\nexport function _monthdelta(months=0)\n{\n\treturn MonthDelta.type[symbols.call](months);\n};\n\n// Return a ``Color`` object from the hue, luminescence, saturation and alpha values ``h``, ``l``, ``s`` and ``a`` (i.e. using the HLS color model)\nexport function _hls(h, l, s, a)\n{\n\tlet _v = function _v(m1, m2, hue)\n\t{\n\t\thue = hue % 1.0;\n\t\tif (hue < 1/6)\n\t\t\treturn m1 + (m2-m1)*hue*6.0;\n\t\telse if (hue < 0.5)\n\t\t\treturn m2;\n\t\telse if (hue < 2/3)\n\t\t\treturn m1 + (m2-m1)*(2/3-hue)*6.0;\n\t\treturn m1;\n\t};\n\n\tlet m1, m2;\n\tif (a === undefined)\n\t\ta = 1;\n\tif (s === 0.0)\n\t\treturn _rgb(l, l, l, a);\n\tif (l <= 0.5)\n\t\tm2 = l * (1.0+s);\n\telse\n\t\tm2 = l+s-(l*s);\n\tm1 = 2.0*l - m2;\n\treturn _rgb(_v(m1, m2, h+1/3), _v(m1, m2, h), _v(m1, m2, h-1/3), a);\n};\n\n// Return a ``Color`` object from the hue, saturation, value and alpha values ``h``, ``s``, ``v`` and ``a`` (i.e. using the HSV color model)\nexport function _hsv(h, s, v, a)\n{\n\tif (s === 0.0)\n\t\treturn _rgb(v, v, v, a);\n\tlet i = Math.floor(h*6.0);\n\tlet f = (h*6.0) - i;\n\tlet p = v*(1.0 - s);\n\tlet q = v*(1.0 - s*f);\n\tlet t = v*(1.0 - s*(1.0-f));\n\tswitch (i%6)\n\t{\n\t\tcase 0:\n\t\t\treturn _rgb(v, t, p, a);\n\t\tcase 1:\n\t\t\treturn _rgb(q, v, p, a);\n\t\tcase 2:\n\t\t\treturn _rgb(p, v, t, a);\n\t\tcase 3:\n\t\t\treturn _rgb(p, q, v, a);\n\t\tcase 4:\n\t\t\treturn _rgb(t, p, v, a);\n\t\tcase 5:\n\t\t\treturn _rgb(v, p, q, a);\n\t}\n};\n\n// Return the item with the key ``key`` from the dict ``container``. If ``container`` doesn't have this key, return ``defaultvalue``\nexport function _get(container, key, defaultvalue)\n{\n\tif (_ismap(container))\n\t{\n\t\tif (container.has(key))\n\t\t\treturn container.get(key);\n\t\treturn defaultvalue;\n\t}\n\telse if (_isobject(container))\n\t{\n\t\tlet result = container[key];\n\t\tif (result === undefined)\n\t\t\treturn defaultvalue;\n\t\treturn result;\n\t}\n\tthrow new TypeError(\"get() requires a dict\");\n};\n\n// Return a ``Date`` object for the current time\nexport function now()\n{\n\treturn new Date();\n};\n\n// Return a ``Date`` object for the current time in UTC\nexport function utcnow()\n{\n\tlet now = new Date();\n\t// FIXME: The timezone is wrong for the new ``Date`` object.\n\treturn new Date(now.getUTCFullYear(), now.getUTCMonth(), now.getUTCDate(), now.getUTCHours(), now.getUTCMinutes(), now.getUTCSeconds(), now.getUTCMilliseconds());\n};\n\n// Return an ``Date`` object for today\nexport function today()\n{\n\tlet now = new Date();\n\treturn new Date_(now.getFullYear(), now.getMonth()+1, now.getDate());\n};\n\nexport class Module\n{\n\tconstructor(name, doc, content={})\n\t{\n\t\tthis.__name__ = name;\n\t\tthis.__doc__ = doc;\n\t\tfor (let [key, value] of Object.entries(content))\n\t\t\tthis[key] = value;\n\t}\n\n\t[symbols.getattr](attrname)\n\t{\n\t\tif (this.hasOwnProperty(attrname))\n\t\t\treturn this[attrname];\n\t\tthrow new ul4.AttributeError(this, attrname);\n\t}\n};\n\nfunction _ul4on_loads(dump)\n{\n\treturn loads(dump);\n};\n\nexpose(_ul4on_loads, [\"dump\", \"p\"], {name: \"loads\"});\n\nfunction _ul4on_dumps(obj, indent=null)\n{\n\treturn dumps(obj, indent);\n};\n\nexpose(_ul4on_dumps, [\"obj\", \"p\", \"indent\", \"pk=\", null], {name: \"dumps\"});\n\nfunction _ul4on_encoder(indent=null)\n{\n\treturn new Encoder(indent);\n}\n\nexpose(_ul4on_encoder, [\"indent\", \"pk=\", null], {name: \"Encoder\"});\n\nfunction _ul4on_decoder()\n{\n\treturn new Decoder();\n}\n\nexpose(_ul4on_decoder, [], {name: \"Decoder\"});\n\nexport const _ul4on = new Module(\n\t\"ul4on\",\n\t\"Object serialization\",\n\t{\n\t\tloads: _ul4on_loads,\n\t\tdumps: _ul4on_dumps,\n\t\tEncoder: _ul4on_encoder,\n\t\tDecoder: _ul4on_decoder\n\t}\n);\n\nfunction isclose(a, b, rel_tol=1e-9, abs_tol=0.0)\n{\n\tif (a === b)\n\t\treturn true;\n\n\tif (a === Infinity || a === -Infinity || b === Infinity || b === -Infinity)\n\t\treturn false;\n\n\tlet diff = Math.abs(b - a);\n\n\tif (diff <= Math.abs(rel_tol * a))\n\t\treturn true;\n\tif (diff <= Math.abs(rel_tol * b))\n\t\treturn true;\n\tif (diff <= abs_tol)\n\t\treturn true;\n\treturn false;\n}\n\nexpose(Math.cos, [\"x\", \"p\"]);\nexpose(Math.sin, [\"x\", \"p\"]);\nexpose(Math.tan, [\"x\", \"p\"]);\nexpose(Math.sqrt, [\"x\", \"p\"]);\nexpose(isclose, [\"a\", \"pk\", \"b\", \"pk\", \"rel_tol\", \"k=\", 1e-9, \"abs_tol\", \"k=\", 0.0]);\n\nexport const _math = new Module(\n\t\"math\",\n\t\"Math related functions and constants\",\n\t{\n\t\tpi: Math.PI,\n\t\te: Math.E,\n\t\ttau: 2 * Math.PI,\n\t\tcos: Math.cos,\n\t\tsin: Math.sin,\n\t\ttan: Math.tan,\n\t\tsqrt: Math.sqrt,\n\t\tisclose: isclose\n\t}\n);\n\n\nexport function _attrgetter(attrnames)\n{\n\tfunction getone(obj, dottedname)\n\t{\n\t\tlet result = obj;\n\t\tfor (let name of dottedname.split(\".\"))\n\t\t\tresult = AttrAST.prototype._get(result, name);\n\t\treturn result;\n\t}\n\n\tfunction get(obj)\n\t{\n\t\tif (attrnames.length === 1)\n\t\t\treturn getone(obj, attrnames[0]);\n\t\telse\n\t\t{\n\t\t\tlet result = [];\n\t\t\tfor (let dottedattrname of attrnames)\n\t\t\t\tresult.push(getone(obj, dottedattrname));\n\t\t\treturn result;\n\t\t}\n\t}\n\texpose(get, [\"obj\", \"p\"]);\n\treturn get;\n}\n\nexpose(_attrgetter, [\"attrs\", \"*\"]);\n\nexport const _operator = new Module(\n\t\"operator\",\n\t\"Various operators as functions\",\n\t{\n\t\tattrgetter: _attrgetter\n\t}\n);\n\nexport const _ul4 = new Module(\n\t\"ul4\",\n\t\"UL4 - A templating language\",\n\t{\n\t\tTextAST: _maketype(TextAST),\n\t\tIndentAST: _maketype(IndentAST),\n\t\tLineEndAST: _maketype(LineEndAST),\n\t\tConstAST: _maketype(ConstAST),\n\t\tSeqItemAST: _maketype(SeqItemAST),\n\t\tUnpackSeqItemAST: _maketype(UnpackSeqItemAST),\n\t\tListAST: _maketype(ListAST),\n\t\tListComprehensionAST: _maketype(ListComprehensionAST),\n\t\tSetAST: _maketype(SetAST),\n\t\tSetComprehensionAST: _maketype(SetComprehensionAST),\n\t\tDictItemAST: _maketype(DictItemAST),\n\t\tUnpackDictItemAST: _maketype(UnpackDictItemAST),\n\t\tDictAST: _maketype(DictAST),\n\t\tDictComprehensionAST: _maketype(DictComprehensionAST),\n\t\tGeneratorExpressionAST: _maketype(GeneratorExpressionAST),\n\t\tVarAST: _maketype(VarAST),\n\t\tConditionalBlocksAST: _maketype(ConditionalBlocksAST),\n\t\tIfBlockAST: _maketype(IfBlockAST),\n\t\tElIfBlockAST: _maketype(ElIfBlockAST),\n\t\tElseBlockAST: _maketype(ElseBlockAST),\n\t\tForBlockAST: _maketype(ForBlockAST),\n\t\tWhileBlockAST: _maketype(WhileBlockAST),\n\t\tBreakAST: _maketype(BreakAST),\n\t\tContinueAST: _maketype(ContinueAST),\n\t\tAttrAST: _maketype(AttrAST),\n\t\tSliceAST: _maketype(SliceAST),\n\t\tNotAST: _maketype(NotAST),\n\t\tIfAST: _maketype(IfAST),\n\t\tNegAST: _maketype(NegAST),\n\t\tBitNotAST: _maketype(BitNotAST),\n\t\tPrintAST: _maketype(PrintAST),\n\t\tPrintXAST: _maketype(PrintXAST),\n\t\tReturnAST: _maketype(ReturnAST),\n\t\tItemAST: _maketype(ItemAST),\n\t\tShiftLeftAST: _maketype(ShiftLeftAST),\n\t\tShiftRightAST: _maketype(ShiftRightAST),\n\t\tBitAndAST: _maketype(BitAndAST),\n\t\tBitXOrAST: _maketype(BitXOrAST),\n\t\tBitOrAST: _maketype(BitOrAST),\n\t\tIsAST: _maketype(IsAST),\n\t\tIsNotAST: _maketype(IsNotAST),\n\t\tEQAST: _maketype(EQAST),\n\t\tNEAST: _maketype(NEAST),\n\t\tLTAST: _maketype(LTAST),\n\t\tLEAST: _maketype(LEAST),\n\t\tGTAST: _maketype(GTAST),\n\t\tGEAST: _maketype(GEAST),\n\t\tContainsAST: _maketype(ContainsAST),\n\t\tNotContainsAST: _maketype(NotContainsAST),\n\t\tAddAST: _maketype(AddAST),\n\t\tSubAST: _maketype(SubAST),\n\t\tMulAST: _maketype(MulAST),\n\t\tFloorDivAST: _maketype(FloorDivAST),\n\t\tTrueDivAST: _maketype(TrueDivAST),\n\t\tOrAST: _maketype(OrAST),\n\t\tAndAST: _maketype(AndAST),\n\t\tModAST: _maketype(ModAST),\n\t\tSetVarAST: _maketype(SetVarAST),\n\t\tAddVarAST: _maketype(AddVarAST),\n\t\tSubVarAST: _maketype(SubVarAST),\n\t\tMulVarAST: _maketype(MulVarAST),\n\t\tFloorDivVarAST: _maketype(FloorDivVarAST),\n\t\tTrueDivVarAST: _maketype(TrueDivVarAST),\n\t\tModVarAST: _maketype(ModVarAST),\n\t\tShiftLeftVarAST: _maketype(ShiftLeftVarAST),\n\t\tShiftRightVarAST: _maketype(ShiftRightVarAST),\n\t\tBitAndVarAST: _maketype(BitAndVarAST),\n\t\tBitXOrVarAST: _maketype(BitXOrVarAST),\n\t\tBitOrVarAST: _maketype(BitOrVarAST),\n\t\tPositionalArgumentAST: _maketype(PositionalArgumentAST),\n\t\tKeywordArgumentAST: _maketype(KeywordArgumentAST),\n\t\tUnpackListArgumentAST: _maketype(UnpackListArgumentAST),\n\t\tUnpackDictArgumentAST: _maketype(UnpackDictArgumentAST),\n\t\tCallAST: _maketype(CallAST),\n\t\tRenderAST: _maketype(RenderAST),\n\t\tRenderXAST: _maketype(RenderXAST),\n\t\tRenderBlockAST: _maketype(RenderBlockAST),\n\t\tRenderBlocksAST: _maketype(RenderBlocksAST),\n\t\tSignatureAST: _maketype(SignatureAST),\n\t\tTemplate: _maketype(Template),\n\t\tTemplateClosure: _maketype(TemplateClosure),\n\t}\n);\n\n\nexpose(_repr, [\"obj\", \"p\"], {name: \"repr\"});\nexpose(_ascii, [\"obj\", \"p\"], {name: \"ascii\"});\nexpose(_len, [\"sequence\", \"p\"], {name: \"len\"});\nexpose(_type, [\"obj\", \"p\"], {name: \"type\"});\nexpose(_format, [\"obj\", \"pk\", \"fmt\", \"pk\", \"lang\", \"pk=\", null], {name: \"format\"});\nexpose(_any, [\"iterable\", \"p\"], {name: \"any\"});\nexpose(_all, [\"iterable\", \"p\"], {name: \"all\"});\nexpose(_zip, [\"iterables\", \"*\"], {name: \"zip\"});\nexpose(_getattr, [\"obj\", \"p\", \"attrname\", \"p\", \"default\", \"p=\", null], {name: \"getattr\"});\nexpose(_hasattr, [\"obj\", \"p\", \"attrname\", \"p\"], {name: \"hasattr\"});\nexpose(_dir, [\"obj\", \"p\"], {name: \"dir\"});\nexpose(_isundefined, [\"obj\", \"p\"], {name: \"isundefined\"});\nexpose(_isdefined, [\"obj\", \"p\"], {name: \"isdefined\"});\nexpose(_isnone, [\"obj\", \"p\"], {name: \"isnone\"});\nexpose(_isbool, [\"obj\", \"p\"], {name: \"isbool\"});\nexpose(_isint, [\"obj\", \"p\"], {name: \"isint\"});\nexpose(_isfloat, [\"obj\", \"p\"], {name: \"isfloat\"});\nexpose(_isstr, [\"obj\", \"p\"], {name: \"isstr\"});\nexpose(_isdate, [\"obj\", \"p\"], {name: \"isdate\"});\nexpose(_isdatetime, [\"obj\", \"p\"], {name: \"isdatetime\"});\nexpose(_iscolor, [\"obj\", \"p\"], {name: \"iscolor\"});\nexpose(_istimedelta, [\"obj\", \"p\"], {name: \"istimedelta\"});\nexpose(_ismonthdelta, [\"obj\", \"p\"], {name: \"ismonthdelta\"});\nexpose(_istemplate, [\"obj\", \"p\"], {name: \"istemplate\"});\nexpose(_isfunction, [\"obj\", \"p\"], {name: \"isfunction\"});\nexpose(_islist, [\"obj\", \"p\"], {name: \"islist\"});\nexpose(_isset, [\"obj\", \"p\"], {name: \"isset\"});\nexpose(_isdict, [\"obj\", \"p\"], {name: \"isdict\"});\nexpose(_isexception, [\"obj\", \"p\"], {name: \"isexception\"});\nexpose(_isinstance, [\"obj\", \"p\", \"type\", \"p\"], {name: \"isinstance\"});\nexpose(_asjson, [\"obj\", \"p\"], {name: \"asjson\"});\nexpose(_fromjson, [\"string\", \"p\"], {name: \"fromjson\"});\nexpose(_asul4on, [\"obj\", \"p\", \"indent\", \"pk=\",null], {name: \"asul4on\"});\nexpose(_fromul4on, [\"dump\", \"p\"], {name: \"fromul4on\"});\nexpose(now, []);\nexpose(utcnow, []);\nexpose(today, []);\nexpose(_enumerate, [\"iterable\", \"pk\", \"start\", \"pk=\", 0], {name: \"enumerate\"});\nexpose(_isfirst, [\"iterable\", \"p\"], {name: \"isfirst\"});\nexpose(_islast, [\"iterable\", \"p\"], {name: \"islast\"});\nexpose(_isfirstlast, [\"iterable\", \"p\"], {name: \"isfirstlast\"});\nexpose(_enumfl, [\"iterable\", \"p\", \"start\", \"pk=\", 0], {name: \"enumfl\"});\nexpose(_abs, [\"number\", \"p\"], {name: \"abs\"});\nexpose(_rgb, [\"r\", \"pk\", \"g\", \"pk\", \"b\", \"pk\", \"a\", \"pk=\", 1.0], {name: \"rgb\"});\nexpose(_hls, [\"h\", \"pk\", \"l\", \"pk\", \"s\", \"pk\", \"a\", \"pk=\", 1.0], {name: \"hls\"});\nexpose(_hsv, [\"h\", \"pk\", \"s\", \"pk\", \"v\", \"pk\", \"a\", \"pk=\", 1.0], {name: \"hsv\"});\nexpose(_xmlescape, [\"obj\", \"p\"], {name: \"xmlescape\"});\nexpose(_csv, [\"obj\", \"p\"], {name: \"csv\"});\nexpose(_chr, [\"i\", \"p\"], {name: \"chr\"});\nexpose(_ord, [\"c\", \"p\"], {name: \"ord\"});\nexpose(_hex, [\"number\", \"p\"], {name: \"hex\"});\nexpose(_oct, [\"number\", \"p\"], {name: \"oct\"});\nexpose(_bin, [\"number\", \"p\"], {name: \"bin\"});\nexpose(_min, [\"default\", \"k=\", Object, \"key\", \"k=\", null, \"args\", \"*\"], {name: \"min\", needscontext: true});\nexpose(_max, [\"default\", \"k=\", Object, \"key\", \"k=\", null, \"args\", \"*\"], {name: \"max\", needscontext: true});\nexpose(_sum, [\"iterable\", \"p\", \"start\", \"pk=\", 0], {name: \"sum\"});\nexpose(_first, [\"iterable\", \"p\", \"default\", \"pk=\", null], {name: \"first\"});\nexpose(_last, [\"iterable\", \"p\", \"default\", \"pk=\", null], {name: \"last\"});\nexpose(_sorted, [\"iterable\", \"p\", \"key\", \"pk=\", null, \"reverse\", \"pk=\", false], {name: \"sorted\", needscontext: true});\nexpose(_range, [\"start\", \"p\", \"stop\", \"p=\", Object, \"step\", \"p=\", Object], {name: \"range\"});\nexpose(_slice, [\"iterable\", \"p\", \"start\", \"p\", \"stop\", \"p=\", Object, \"step\", \"p=\", Object], {name: \"slice\"});\nexpose(_urlquote, [\"string\", \"pk\"], {name: \"urlquote\"});\nexpose(_urlunquote, [\"string\", \"pk\"], {name: \"urlunquote\"});\nexpose(_reversed, [\"sequence\", \"p\"], {name: \"reversed\"});\nexpose(_random, [], {name: \"random\"});\nexpose(_randrange, [\"start\", \"p\", \"stop\", \"p=\", Object, \"step\", \"p=\", Object], {name: \"randrange\"});\nexpose(_randchoice, [\"seq\", \"pk\"], {name: \"randchoice\"});\nexpose(_round, [\"x\", \"p\", \"digits\", \"pk=\", 0], {name: \"round\"});\nexpose(_floor, [\"x\", \"p\", \"digits\", \"pk=\", 0], {name: \"floor\"});\nexpose(_ceil, [\"x\", \"p\", \"digits\", \"pk=\", 0], {name: \"ceil\"});\nexpose(_md5, [\"string\", \"p\"], {name: \"md5\"});\nexpose(_scrypt, [\"string\", \"p\", \"salt\", \"pk\"], {name: \"scrypt\"});\n\n// Functions implementing UL4 methods\nexport function _count(obj, sub, start=null, end=null)\n{\n\tif (start < 0)\n\t\tstart += obj.length;\n\tif (start === null)\n\t\tstart = 0;\n\n\tif (end < 0)\n\t\tend += obj.length;\n\tif (end === null)\n\t\tend = obj.length;\n\n\tlet isstr = _isstr(obj);\n\n\tif (isstr && !sub.length)\n\t{\n\t\tif (end < 0 || start > obj.length || start > end)\n\t\t\treturn 0;\n\t\tlet result = end - start + 1;\n\t\tif (result > obj.length + 1)\n\t\t\tresult = obj.length + 1;\n\t\treturn result;\n\t}\n\n\tstart = _bound(start, obj.length);\n\tend = _bound(end, obj.length);\n\n\tlet count = 0;\n\tif (_islist(obj))\n\t{\n\t\tfor (let i = start; i < end; ++i)\n\t\t{\n\t\t\tif (_eq(obj[i], sub))\n\t\t\t\t++count;\n\t\t}\n\t\treturn count;\n\t}\n\telse // string\n\t{\n\t\tlet lastIndex = start;\n\n\t\tfor (;;)\n\t\t{\n\t\t\tlastIndex = obj.indexOf(sub, lastIndex);\n\t\t\tif (lastIndex == -1)\n\t\t\t\tbreak;\n\t\t\tif (lastIndex + sub.length > end)\n\t\t\t\tbreak;\n\t\t\t++count;\n\t\t\tlastIndex += sub.length;\n\t\t}\n\t\treturn count;\n\t}\n};\n\nexport function _find(obj, sub, start=null, end=null)\n{\n\tif (start < 0)\n\t\tstart += obj.length;\n\tif (start === null)\n\t\tstart = 0;\n\tif (end < 0)\n\t\tend += obj.length;\n\tif (end === null)\n\t\tend = obj.length;\n\tstart = _bound(start, obj.length);\n\tend = _bound(end, obj.length);\n\n\tif (start !== 0 || end !== obj.length)\n\t{\n\t\tif (typeof(obj) === \"string\")\n\t\t\tobj = obj.substring(start, end);\n\t\telse\n\t\t\tobj = obj.slice(start, end);\n\t}\n\tlet result = obj.indexOf(sub);\n\tif (result !== -1)\n\t\tresult += start;\n\treturn result;\n};\n\nexport function _rfind(obj, sub, start=null, end=null)\n{\n\tif (start < 0)\n\t\tstart += obj.length;\n\tif (start === null)\n\t\tstart = 0;\n\tif (end < 0)\n\t\tend += obj.length;\n\tif (end === null)\n\t\tend = obj.length;\n\tstart = _bound(start, obj.length);\n\tend = _bound(end, obj.length);\n\n\tif (start !== 0 || end !== obj.length)\n\t{\n\t\tif (typeof(obj) === \"string\")\n\t\t\tobj = obj.substring(start, end);\n\t\telse\n\t\t\tobj = obj.slice(start, end);\n\t}\n\tlet result = obj.lastIndexOf(sub);\n\tif (result !== -1)\n\t\tresult += start;\n\treturn result;\n};\n\nexport function _week4format(obj, firstweekday=null)\n{\n\tif (firstweekday === null)\n\t\tfirstweekday = 0;\n\telse\n\t\tfirstweekday %= 7;\n\n\tlet yearday = DateTimeProtocol.yearday(obj)+6;\n\tlet jan1 = new Date(obj.getFullYear(), 0, 1);\n\tlet jan1weekday = jan1.getDay();\n\tif (--jan1weekday < 0)\n\t\tjan1weekday = 6;\n\n\twhile (jan1weekday != firstweekday)\n\t{\n\t\t--yearday;\n\t\tif (++jan1weekday == 7)\n\t\t\tjan1weekday = 0;\n\t}\n\treturn Math.floor(yearday/7);\n};\n\nexport function _isleap(obj)\n{\n\treturn new Date(obj.getFullYear(), 1, 29).getMonth() === 1;\n};\n\nexport function _update(obj, others, kwargs)\n{\n\tif (!_isdict(obj))\n\t\tthrow new TypeError(\"update() requires a dict\");\n\tfor (let other of others)\n\t{\n\t\tif (_ismap(other))\n\t\t{\n\t\t\tfor (let [key, value] of other)\n\t\t\t\tobj.set(key, value);\n\t\t}\n\t\telse if (_isobject(other))\n\t\t{\n\t\t\tfor (let key in other)\n\t\t\t\tobj.set(key, other[key]);\n\t\t}\n\t\telse if (_islist(other))\n\t\t{\n\t\t\tfor (let item of other)\n\t\t\t{\n\t\t\t\tif (!_islist(item) || (item.length != 2))\n\t\t\t\t\tthrow new TypeError(\"update() requires a dict or a list of (key, value) pairs\");\n\t\t\t\tobj.set(item[0], item[1]);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\tthrow new TypeError(\"update() requires a dict or a list of (key, value) pairs\");\n\t}\n\tfor (let [key, value] of kwargs)\n\t\tobj.set(key, value);\n\treturn null;\n};\n\nexport class ColorType extends Type\n{\n\t[symbols.call](r=0, g=0, b=0, a=255)\n\t{\n\t\treturn new Color(r, g, b, a);\n\t}\n\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof Color;\n\t}\n};\n\nexpose(ColorType.prototype, [\"r\", \"pk=\", 0, \"g\", \"pk=\", 0, \"b\", \"pk=\", 0, \"a\", \"pk=\", 255], {name: \"color\"});\n\nlet colortype = new ColorType(null, \"color\", \"An RGBA color (with 8-bit red, green, blue and alpha values).\");\n\nexport class Color extends Proto\n{\n\tconstructor(r=0, g=0, b=0, a=255)\n\t{\n\t\tsuper();\n\t\tthis._r = r;\n\t\tthis._g = g;\n\t\tthis._b = b;\n\t\tthis._a = a;\n\t}\n\n\t[symbols.type]()\n\t{\n\t\treturn colortype;\n\t}\n\n\t[symbols.repr]()\n\t{\n\t\tlet r = _lpad(this._r.toString(16), \"0\", 2);\n\t\tlet g = _lpad(this._g.toString(16), \"0\", 2);\n\t\tlet b = _lpad(this._b.toString(16), \"0\", 2);\n\t\tlet a = _lpad(this._a.toString(16), \"0\", 2);\n\t\tif (this._a !== 0xff)\n\t\t{\n\t\t\tif (r[0] === r[1] && g[0] === g[1] && b[0] === b[1] && a[0] === a[1])\n\t\t\t\treturn \"#\" + r[0] + g[0] + b[0] + a[0];\n\t\t\telse\n\t\t\t\treturn \"#\" + r + g + b + a;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (r[0] === r[1] && g[0] === g[1] && b[0] === b[1])\n\t\t\t\treturn \"#\" + r[0] + g[0] + b[0];\n\t\t\telse\n\t\t\t\treturn \"#\" + r + g + b;\n\t\t}\n\t}\n\n\t[symbols.str]()\n\t{\n\t\tif (this._a !== 0xff)\n\t\t{\n\t\t\treturn \"rgba(\" + this._r + \", \" + this._g + \", \" + this._b + \", \" + (this._a/255) + \")\";\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlet r = _lpad(this._r.toString(16), \"0\", 2);\n\t\t\tlet g = _lpad(this._g.toString(16), \"0\", 2);\n\t\t\tlet b = _lpad(this._b.toString(16), \"0\", 2);\n\t\t\tif (r[0] === r[1] && g[0] === g[1] && b[0] === b[1])\n\t\t\t\treturn \"#\" + r[0] + g[0] + b[0];\n\t\t\telse\n\t\t\t\treturn \"#\" + r + g + b;\n\t\t}\n\t}\n\n\t[Symbol.iterator]()\n\t{\n\t\treturn {\n\t\t\tobj: this,\n\t\t\tindex: 0,\n\t\t\tnext: function() {\n\t\t\t\tif (this.index == 0)\n\t\t\t\t{\n\t\t\t\t\t++this.index;\n\t\t\t\t\treturn {value: this.obj._r, done: false};\n\t\t\t\t}\n\t\t\t\telse if (this.index == 1)\n\t\t\t\t{\n\t\t\t\t\t++this.index;\n\t\t\t\t\treturn {value: this.obj._g, done: false};\n\t\t\t\t}\n\t\t\t\telse if (this.index == 2)\n\t\t\t\t{\n\t\t\t\t\t++this.index;\n\t\t\t\t\treturn {value: this.obj._b, done: false};\n\t\t\t\t}\n\t\t\t\telse if (this.index == 3)\n\t\t\t\t{\n\t\t\t\t\t++this.index;\n\t\t\t\t\treturn {value: this.obj._a, done: false};\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\treturn {done: true};\n\t\t\t}\n\t\t};\n\t}\n\n\t[symbols.getattr](attrname)\n\t{\n\t\tlet self = this;\n\t\tswitch (attrname)\n\t\t{\n\t\t\tcase \"r\":\n\t\t\t\tlet r = function r(){ return self._r; };\n\t\t\t\texpose(r, []);\n\t\t\t\treturn r;\n\t\t\tcase \"g\":\n\t\t\t\tlet g = function g(){ return self._g; };\n\t\t\t\texpose(g, []);\n\t\t\t\treturn g;\n\t\t\tcase \"b\":\n\t\t\t\tlet b = function b(){ return self._b; };\n\t\t\t\texpose(b, []);\n\t\t\t\treturn b;\n\t\t\tcase \"a\":\n\t\t\t\tlet a = function a(){ return self._a; };\n\t\t\t\texpose(a, []);\n\t\t\t\treturn a;\n\t\t\tcase \"lum\":\n\t\t\t\treturn expose(this.lum.bind(this), []);\n\t\t\tcase \"hls\":\n\t\t\t\treturn expose(this.hls.bind(this), []);\n\t\t\tcase \"hlsa\":\n\t\t\t\treturn expose(this.hlsa.bind(this), []);\n\t\t\tcase \"hsv\":\n\t\t\t\treturn expose(this.hsv.bind(this), []);\n\t\t\tcase \"hsva\":\n\t\t\t\treturn expose(this.hsva.bind(this), []);\n\t\t\tcase \"witha\":\n\t\t\t\treturn expose(this.witha.bind(this), [\"a\", \"pk\"]);\n\t\t\tcase \"withlum\":\n\t\t\t\treturn expose(this.withlum.bind(this), [\"lum\", \"pk\"]);\n\t\t\tcase \"abslum\":\n\t\t\t\treturn expose(this.abslum.bind(this), [\"lum\", \"pk\"]);\n\t\t\tcase \"rellum\":\n\t\t\t\treturn expose(this.rellum.bind(this), [\"lum\", \"pk\"]);\n\t\t\tdefault:\n\t\t\t\tthrow new AttributeError(this, attrname);\n\t\t}\n\t}\n\n\t[symbols.getitem](key)\n\t{\n\t\tlet orgkey = key;\n\t\tif (key < 0)\n\t\t\tkey += 4;\n\t\tswitch (key)\n\t\t{\n\t\t\tcase 0:\n\t\t\t\treturn this._r;\n\t\t\tcase 1:\n\t\t\t\treturn this._g;\n\t\t\tcase 2:\n\t\t\t\treturn this._b;\n\t\t\tcase 3:\n\t\t\t\treturn this._a;\n\t\t\tdefault:\n\t\t\t\tthrow new IndexError(this, orgkey);\n\t\t}\n\t}\n\n\t[symbols.eq](other)\n\t{\n\t\tif (other instanceof Color)\n\t\t\treturn this._r == other._r && this._g == other._g && this._b == other._b && this._a == other._a;\n\t\treturn false;\n\t}\n\n\tr()\n\t{\n\t\t\treturn this._r;\n\t}\n\n\tg()\n\t{\n\t\treturn this._g;\n\t}\n\n\tb()\n\t{\n\t\treturn this._b;\n\t}\n\n\ta()\n\t{\n\t\treturn this._a;\n\t}\n\n\tlum()\n\t{\n\t\treturn this.hls()[1];\n\t}\n\n\thls()\n\t{\n\t\tlet r = this._r/255.0;\n\t\tlet g = this._g/255.0;\n\t\tlet b = this._b/255.0;\n\t\tlet maxc = Math.max(r, g, b);\n\t\tlet minc = Math.min(r, g, b);\n\t\tlet h, l, s;\n\t\tlet rc, gc, bc;\n\n\t\tl = (minc+maxc)/2.0;\n\t\tif (minc == maxc)\n\t\t\treturn [0.0, l, 0.0];\n\t\tif (l <= 0.5)\n\t\t\ts = (maxc-minc) / (maxc+minc);\n\t\telse\n\t\t\ts = (maxc-minc) / (2.0-maxc-minc);\n\t\trc = (maxc-r) / (maxc-minc);\n\t\tgc = (maxc-g) / (maxc-minc);\n\t\tbc = (maxc-b) / (maxc-minc);\n\t\tif (r == maxc)\n\t\t\th = bc-gc;\n\t\telse if (g == maxc)\n\t\t\th = 2.0+rc-bc;\n\t\telse\n\t\t\th = 4.0+gc-rc;\n\t\th = (h/6.0) % 1.0;\n\t\treturn [h, l, s];\n\t}\n\n\thlsa()\n\t{\n\t\tlet hls = this.hls();\n\t\treturn hls.concat(this._a/255.0);\n\t}\n\n\thsv()\n\t{\n\t\tlet r = this._r/255.0;\n\t\tlet g = this._g/255.0;\n\t\tlet b = this._b/255.0;\n\t\tlet maxc = Math.max(r, g, b);\n\t\tlet minc = Math.min(r, g, b);\n\t\tlet v = maxc;\n\t\tif (minc == maxc)\n\t\t\treturn [0.0, 0.0, v];\n\t\tlet s = (maxc-minc) / maxc;\n\t\tlet rc = (maxc-r) / (maxc-minc);\n\t\tlet gc = (maxc-g) / (maxc-minc);\n\t\tlet bc = (maxc-b) / (maxc-minc);\n\t\tlet h;\n\t\tif (r == maxc)\n\t\t\th = bc-gc;\n\t\telse if (g == maxc)\n\t\t\th = 2.0+rc-bc;\n\t\telse\n\t\t\th = 4.0+gc-rc;\n\t\th = (h/6.0) % 1.0;\n\t\treturn [h, s, v];\n\t}\n\n\thsva()\n\t{\n\t\tlet hsv = this.hsv();\n\t\treturn hsv.concat(this._a/255.0);\n\t}\n\n\twitha(a)\n\t{\n\t\tif (typeof(a) !== \"number\")\n\t\t\tthrow new TypeError(\"witha() requires a number\");\n\t\treturn new Color(this._r, this._g, this._b, a);\n\t}\n\n\twithlum(lum)\n\t{\n\t\tif (typeof(lum) !== \"number\")\n\t\t\tthrow new TypeError(\"witha() requires a number\");\n\t\tlet hlsa = this.hlsa();\n\t\treturn _hls(hlsa[0], lum, hlsa[2], hlsa[3]);\n\t}\n\n\tul4type()\n\t{\n\t\treturn \"color\";\n\t}\n};\n\nexpose(Color.prototype.r, []);\nexpose(Color.prototype.g, []);\nexpose(Color.prototype.b, []);\nexpose(Color.prototype.a, []);\nexpose(Color.prototype.lum, []);\nexpose(Color.prototype.hls, []);\nexpose(Color.prototype.hlsa, []);\nexpose(Color.prototype.hsv, []);\nexpose(Color.prototype.hsva, []);\nexpose(Color.prototype.witha, [\"a\", \"pk\"]);\nexpose(Color.prototype.withlum, [\"lum\", \"pk\"]);\n\nexport class Date_ extends Proto\n{\n\tconstructor(year, month, day)\n\t{\n\t\tsuper();\n\t\tthis._date = new Date(year, month-1, day);\n\t}\n\n\t[symbols.type]()\n\t{\n\t\treturn datetype;\n\t}\n\n\t[symbols.repr]()\n\t{\n\t\treturn '@(' + this[symbols.str]() + \")\";\n\t}\n\n\t[symbols.str]()\n\t{\n\t\treturn _lpad(this._date.getFullYear(), \"0\", 4) + \"-\" + _lpad(this._date.getMonth()+1, \"0\", 2) + \"-\" + _lpad(this._date.getDate(), \"0\", 2);\n\t}\n\n\t[symbols.eq](other)\n\t{\n\t\tif (other instanceof Date_)\n\t\t\treturn this._date.getTime() === other._date.getTime();\n\t\treturn false;\n\t}\n\n\t[symbols.lt](other)\n\t{\n\t\tif (other instanceof Date_)\n\t\t\treturn this._date < other._date;\n\t\t_unorderable(\"<\", this, other);\n\t}\n\n\t[symbols.le](other)\n\t{\n\t\tif (other instanceof Date_)\n\t\t\treturn this._date <= other._date;\n\t\t_unorderable(\"<=\", this, other);\n\t}\n\n\t[symbols.gt](other)\n\t{\n\t\tif (other instanceof Date_)\n\t\t\treturn this._date > other._date;\n\t\t_unorderable(\">\", this, other);\n\t}\n\n\t[symbols.ge](other)\n\t{\n\t\tif (other instanceof Date_)\n\t\t\treturn this._date >= other._date;\n\t\t_unorderable(\">=\", this, other);\n\t}\n\n\tyear()\n\t{\n\t\treturn this._date.getFullYear();\n\t}\n\n\tmonth()\n\t{\n\t\treturn this._date.getMonth()+1;\n\t}\n\n\tday()\n\t{\n\t\treturn this._date.getDate();\n\t}\n\n\tul4type()\n\t{\n\t\treturn \"date\";\n\t}\n};\n\n\nexport class TimeDeltaType extends Type\n{\n\t[symbols.call](days=0, seconds=0, microseconds=0)\n\t{\n\t\treturn new TimeDelta(days, seconds, microseconds);\n\t}\n\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof TimeDelta;\n\t}\n}\n\nexpose(TimeDeltaType.prototype, [\"days\", \"pk=\", 0, \"seconds\", \"pk=\", 0, \"microseconds\", \"pk=\", 0], {name: \"timedelta\"});\n\nexport let timedeltatype = new TimeDeltaType(null, \"timedelta\", \"A time span (days/seconds/microseconds).\");\n\nexport class TimeDelta extends Proto\n{\n\tconstructor(days=0, seconds=0, microseconds=0)\n\t{\n\t\tsuper();\n\t\tlet total_microseconds = Math.floor((days * 86400 + seconds)*1000000 + microseconds);\n\n\t\tmicroseconds = ModAST.prototype._do(total_microseconds, 1000000);\n\t\tlet total_seconds = Math.floor(total_microseconds / 1000000);\n\t\tseconds = ModAST.prototype._do(total_seconds, 86400);\n\t\tdays = Math.floor(total_seconds / 86400);\n\t\tif (seconds < 0)\n\t\t{\n\t\t\tseconds += 86400;\n\t\t\t--days;\n\t\t}\n\n\t\tthis._microseconds = microseconds;\n\t\tthis._seconds = seconds;\n\t\tthis._days = days;\n\t}\n\n\t[symbols.type]()\n\t{\n\t\treturn timedeltatype;\n\t}\n\n\ttotal_seconds()\n\t{\n\t\treturn this._days * 24 * 60 * 60 + this._seconds;\n\t}\n\n\t[symbols.repr]()\n\t{\n\t\tlet v = [], first = true;\n\t\tv.push(\"timedelta(\");\n\t\tif (this._days)\n\t\t{\n\t\t\tv.push(\"days=\" + this._days);\n\t\t\tfirst = false;\n\t\t}\n\t\tif (this._seconds)\n\t\t{\n\t\t\tif (!first)\n\t\t\t\tv.push(\", \");\n\t\t\tv.push(\"seconds=\" + this._seconds);\n\t\t\tfirst = false;\n\t\t}\n\t\tif (this._microseconds)\n\t\t{\n\t\t\tif (!first)\n\t\t\t\tv.push(\", \");\n\t\t\tv.push(\"microseconds=\" + this._microseconds);\n\t\t}\n\t\tv.push(\")\");\n\t\treturn v.join(\"\");\n\t}\n\n\t[symbols.str]()\n\t{\n\t\tlet v = [];\n\t\tif (this._days)\n\t\t{\n\t\t\tv.push(this._days + \" day\");\n\t\t\tif (this._days !== -1 && this._days !== 1)\n\t\t\t\tv.push(\"s\");\n\t\t\tv.push(\", \");\n\t\t}\n\t\tlet seconds = this._seconds % 60;\n\t\tlet minutes = Math.floor(this._seconds / 60);\n\t\tlet hours = Math.floor(minutes / 60);\n\t\tminutes = minutes % 60;\n\n\t\tv.push(\"\" + hours);\n\t\tv.push(\":\");\n\t\tv.push(_lpad(minutes.toString(), \"0\", 2));\n\t\tv.push(\":\");\n\t\tv.push(_lpad(seconds.toString(), \"0\", 2));\n\t\tif (this._microseconds)\n\t\t{\n\t\t\tv.push(\".\");\n\t\t\tv.push(_lpad(this._microseconds.toString(), \"0\", 6));\n\t\t}\n\t\treturn v.join(\"\");\n\t}\n\n\t[symbols.bool]()\n\t{\n\t\treturn this._days !== 0 || this._seconds !== 0 || this._microseconds !== 0;\n\t}\n\n\t[symbols.abs]()\n\t{\n\t\treturn this._days < 0 ? new TimeDelta(-this._days, -this._seconds, -this._microseconds) : this;\n\t}\n\n\t[symbols.eq](other)\n\t{\n\t\tif (other instanceof TimeDelta)\n\t\t\treturn (this._days === other._days) && (this._seconds === other._seconds) && (this._microseconds === other._microseconds);\n\t\treturn false;\n\t}\n\n\t[symbols.lt](other)\n\t{\n\t\tif (other instanceof TimeDelta)\n\t\t{\n\t\t\tif (this._days != other._days)\n\t\t\t\treturn this._days < other._days;\n\t\t\tif (this._seconds != other._seconds)\n\t\t\t\treturn this._seconds < other._seconds;\n\t\t\treturn this._microseconds < other._microseconds;\n\t\t}\n\t\t_unorderable(\"<\", this, other);\n\t}\n\n\t[symbols.le](other)\n\t{\n\t\tif (other instanceof TimeDelta)\n\t\t{\n\t\t\tif (this._days != other._days)\n\t\t\t\treturn this._days < other._days;\n\t\t\tif (this._seconds != other._seconds)\n\t\t\t\treturn this._seconds < other._seconds;\n\t\t\treturn this._microseconds <= other._microseconds;\n\t\t}\n\t\t_unorderable(\"<=\", this, other);\n\t}\n\n\t[symbols.gt](other)\n\t{\n\t\tif (other instanceof TimeDelta)\n\t\t{\n\t\t\tif (this._days != other._days)\n\t\t\t\treturn this._days > other._days;\n\t\t\tif (this._seconds != other._seconds)\n\t\t\t\treturn this._seconds > other._seconds;\n\t\t\treturn this._microseconds > other._microseconds;\n\t\t}\n\t\t_unorderable(\">\", this, other);\n\t}\n\n\t[symbols.ge](other)\n\t{\n\t\tif (other instanceof TimeDelta)\n\t\t{\n\t\t\tif (this._days != other._days)\n\t\t\t\treturn this._days > other._days;\n\t\t\tif (this._seconds != other._seconds)\n\t\t\t\treturn this._seconds > other._seconds;\n\t\t\treturn this._microseconds >= other._microseconds;\n\t\t}\n\t\t_unorderable(\">=\", this, other);\n\t}\n\n\t[symbols.neg]()\n\t{\n\t\treturn new TimeDelta(-this._days, -this._seconds, -this._microseconds);\n\t}\n\n\t_adddate(date, days)\n\t{\n\t\tlet year = date._date.getFullYear();\n\t\tlet month = date._date.getMonth();\n\t\tlet day = date._date.getDate() + days;\n\t\treturn new Date(year, month, day);\n\t}\n\n\t_adddatetime(date, days, seconds, microseconds)\n\t{\n\t\tlet year = date.getFullYear();\n\t\tlet month = date.getMonth();\n\t\tlet day = date.getDate() + days;\n\t\tlet hour = date.getHours();\n\t\tlet minute = date.getMinutes();\n\t\tlet second = date.getSeconds() + seconds;\n\t\tlet millisecond = date.getMilliseconds() + microseconds/1000;\n\t\treturn new Date(year, month, day, hour, minute, second, millisecond);\n\t}\n\n\t[symbols.add](other)\n\t{\n\t\tif (other instanceof TimeDelta)\n\t\t\treturn new TimeDelta(this._days + other._days, this._seconds + other._seconds, this._microseconds + other._microseconds);\n\t\telse if (_isdate(other))\n\t\t\treturn this._adddate(other, this._days);\n\t\telse if (_isdatetime(other))\n\t\t\treturn this._adddatetime(other, this._days, this._seconds, this._microseconds);\n\t\tthrow new TypeError(_type(this).fullname() + \" + \" + _type(other).fullname() + \" not supported\");\n\t}\n\n\t[symbols.radd](other)\n\t{\n\t\tif (_isdate(other))\n\t\t\treturn this._adddate(other, this._days);\n\t\telse if (_isdatetime(other))\n\t\t\treturn this._adddatetime(other, this._days, this._seconds, this._microseconds);\n\t\tthrow new TypeError(_type(this).fullname() + \" + \" + _type(other).fullname() + \" not supported\");\n\t}\n\n\t[symbols.sub](other)\n\t{\n\t\tif (other instanceof TimeDelta)\n\t\t\treturn new TimeDelta(this._days - other._days, this._seconds - other._seconds, this._microseconds - other._microseconds);\n\t\tthrow new TypeError(_type(this).fullname() + \" - \" + _type(other).fullname() + \" not supported\");\n\t}\n\n\t[symbols.rsub](other)\n\t{\n\t\tif (_isdate(other))\n\t\t\treturn this._adddate(other, -this._days);\n\t\telse if (_isdatetime(other))\n\t\t\treturn this._adddatetime(other, -this._days, -this._seconds, -this._microseconds);\n\t\tthrow new TypeError(_type(this).fullname() + \" - \" + _type(other).fullname() + \" not supported\");\n\t}\n\n\t[symbols.mul](other)\n\t{\n\t\tif (typeof(other) === \"number\")\n\t\t\treturn new TimeDelta(this._days * other, this._seconds * other, this._microseconds * other);\n\t\tthrow new TypeError(_type(this).fullname() + \" * \" + _type(other).fullname() + \" not supported\");\n\t}\n\n\t[symbols.rmul](other)\n\t{\n\t\tif (typeof(other) === \"number\")\n\t\t\treturn new TimeDelta(this._days * other, this._seconds * other, this._microseconds * other);\n\t\tthrow new TypeError(_type(this).fullname() + \" * \" + _type(other).fullname() + \" not supported\");\n\t}\n\n\t[symbols.truediv](other)\n\t{\n\t\tif (typeof(other) === \"number\" || typeof(other) === \"boolean\")\n\t\t{\n\t\t\tif (other == 0)\n\t\t\t\tthrow new ZeroDivisionError();\n\t\t\treturn new TimeDelta(this._days / other, this._seconds / other, this._microseconds / other);\n\t\t}\n\t\telse if (other instanceof TimeDelta)\n\t\t{\n\t\t\tlet myValue = this._days;\n\t\t\tlet otherValue = other._days;\n\t\t\tlet hasSeconds = this._seconds || other._seconds;\n\t\t\tlet hasMicroseconds = this._microseconds || other._microseconds;\n\t\t\tif (hasSeconds || hasMicroseconds)\n\t\t\t{\n\t\t\t\tmyValue = myValue*86400+this._seconds;\n\t\t\t\totherValue = otherValue*86400 + other._seconds;\n\t\t\t\tif (hasMicroseconds)\n\t\t\t\t{\n\t\t\t\t\tmyValue = myValue * 1000000 + this._microseconds;\n\t\t\t\t\totherValue = otherValue * 1000000 + other._microseconds;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (otherValue == 0)\n\t\t\t\tthrow new ZeroDivisionError();\n\t\t\treturn myValue/otherValue;\n\t\t}\n\t\tthrow new TypeError(_type(this).fullname() + \" / \" + _type(other).fullname() + \" not supported\");\n\t}\n\n\t[symbols.floordiv](other)\n\t{\n\t\tif (typeof(other) === \"number\" || typeof(other) === \"boolean\")\n\t\t{\n\t\t\tif (other == 0)\n\t\t\t\tthrow new ZeroDivisionError();\n\t\t\tif (_isint(other))\n\t\t\t{\n\t\t\t\treturn new TimeDelta(this._days / other, this._seconds / other, this._microseconds / other);\n\t\t\t}\n\t\t}\n\t\telse if (other instanceof TimeDelta)\n\t\t{\n\t\t\tlet result = this[symbols.truediv](other);\n\t\t\treturn Math.floor(result);\n\t\t}\n\t}\n\n\t[symbols.getattr](attrname)\n\t{\n\t\tlet self = this;\n\t\tswitch (attrname)\n\t\t{\n\t\t\tcase \"days\":\n\t\t\t\tlet days = function days(){ return self._days; };\n\t\t\t\texpose(days, []);\n\t\t\t\treturn days;\n\t\t\tcase \"seconds\":\n\t\t\t\tlet seconds = function seconds(){ return self._seconds; };\n\t\t\t\texpose(seconds, []);\n\t\t\t\treturn seconds;\n\t\t\tcase \"microseconds\":\n\t\t\t\tlet microseconds = function microseconds(){ return self._microseconds; };\n\t\t\t\texpose(microseconds, []);\n\t\t\t\treturn microseconds;\n\t\t\tdefault:\n\t\t\t\tthrow new AttributeError(this, attrname);\n\t\t}\n\t}\n\n\tdays()\n\t{\n\t\treturn this._days;\n\t}\n\n\tseconds()\n\t{\n\t\treturn this._seconds;\n\t}\n\n\tmicroseconds()\n\t{\n\t\treturn this._microseconds;\n\t}\n\n\tul4type()\n\t{\n\t\treturn \"timedelta\";\n\t}\n};\n\n\nexport class MonthDeltaType extends Type\n{\n\t// Return a ``MonthDelta`` object from the arguments passed in\n\t[symbols.call](months=0)\n\t{\n\t\treturn new MonthDelta(months);\n\t}\n\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof MonthDelta;\n\t}\n}\n\nexport let monthdeltatype = new MonthDeltaType(null, \"monthdelta\", \"A time span of a number of months.\");\n\nexpose(MonthDeltaType.prototype, [\"months\", \"p=\", 0], {name: \"monthdelta\"});\n\nexport class MonthDelta extends Proto\n{\n\tstatic classname = \"monthdelta\";\n\tstatic classdoc = \"A time span of a number of months.\";\n\n\tconstructor(months=0)\n\t{\n\t\tsuper();\n\t\tthis._months = months;\n\t}\n\n\t[symbols.type]()\n\t{\n\t\treturn monthdeltatype;\n\t}\n\n\t[symbols.repr]()\n\t{\n\t\tif (!this._months)\n\t\t\treturn \"monthdelta()\";\n\t\treturn \"monthdelta(\" + this._months + \")\";\n\t}\n\n\t[symbols.str]()\n\t{\n\t\tif (this._months)\n\t\t{\n\t\t\tif (this._months !== -1 && this._months !== 1)\n\t\t\t\treturn this._months + \" months\";\n\t\t\treturn this._months + \" month\";\n\t\t}\n\t\treturn \"0 months\";\n\t}\n\n\ttoString()\n\t{\n\t\treturn this[symbols.str]();\n\t}\n\n\t[symbols.bool]()\n\t{\n\t\treturn this._months !== 0;\n\t}\n\n\t[symbols.abs]()\n\t{\n\t\treturn this._months < 0 ? new MonthDelta(-this._months) : this;\n\t}\n\n\t[symbols.eq](other)\n\t{\n\t\tif (other instanceof MonthDelta)\n\t\t\treturn this._months === other._months;\n\t\treturn false;\n\t}\n\n\t[symbols.lt](other)\n\t{\n\t\tif (other instanceof MonthDelta)\n\t\t\treturn this._months < other._months;\n\t\t_unorderable(\"<\", this, other);\n\t}\n\n\t[symbols.le](other)\n\t{\n\t\tif (other instanceof MonthDelta)\n\t\t\treturn this._months <= other._months;\n\t\t_unorderable(\"<=\", this, other);\n\t}\n\n\t[symbols.gt](other)\n\t{\n\t\tif (other instanceof MonthDelta)\n\t\t\treturn this._months > other._months;\n\t\t_unorderable(\">\", this, other);\n\t}\n\n\t[symbols.ge](other)\n\t{\n\t\tif (other instanceof MonthDelta)\n\t\t\treturn this._months >= other._months;\n\t\t_unorderable(\">=\", this, other);\n\t}\n\n\t[symbols.neg]()\n\t{\n\t\treturn new MonthDelta(-this._months);\n\t}\n\n\t_adddate(date, months)\n\t{\n\t\tlet result = this._adddatetime(date._date, months);\n\t\treturn new Date_(result.getFullYear(), result.getMonth()+1, result.getDate());\n\t}\n\n\t_adddatetime(date, months)\n\t{\n\t\tlet year = date.getFullYear();\n\t\tlet month = date.getMonth() + months;\n\t\tlet day = date.getDate();\n\t\tlet hour = date.getHours();\n\t\tlet minute = date.getMinutes();\n\t\tlet second = date.getSeconds();\n\t\tlet millisecond = date.getMilliseconds();\n\n\t\twhile (true)\n\t\t{\n\t\t\t// As the month might be out of bounds, we have to find out what the real target month is\n\t\t\tlet targetmonth = new Date(year, month, 1, hour, minute, second, millisecond).getMonth();\n\t\t\tlet result = new Date(year, month, day, hour, minute, second, millisecond);\n\t\t\tif (result.getMonth() === targetmonth)\n\t\t\t\treturn result;\n\t\t\t--day;\n\t\t}\n\t}\n\n\t[symbols.add](other)\n\t{\n\t\tif (_ismonthdelta(other))\n\t\t\treturn new MonthDelta(this._months + other._months);\n\t\telse if (_isdate(other))\n\t\t\treturn this._adddate(other, this._months);\n\t\telse if (_isdatetime(other))\n\t\t\treturn this._adddatetime(other, this._months);\n\t\tthrow new ArgumentError(_type(this).fullname() + \" + \" + _type(other).fullname() + \" not supported\");\n\t}\n\n\t[symbols.radd](other)\n\t{\n\t\tif (_isdate(other))\n\t\t\treturn this._adddate(other, this._months);\n\t\telse if (_isdatetime(other))\n\t\t\treturn this._adddatetime(other, this._months);\n\t\tthrow new ArgumentError(_type(this).fullname() + \" + \" + _type(other).fullname() + \" not supported\");\n\t}\n\n\t[symbols.sub](other)\n\t{\n\t\tif (_ismonthdelta(other))\n\t\t\treturn new MonthDelta(this._months - other._months);\n\t\tthrow new ArgumentError(_type(this).fullname() + \" - \" + _type(other).fullname() + \" not supported\");\n\t}\n\n\t[symbols.rsub](other)\n\t{\n\t\tif (_isdate(other))\n\t\t\treturn this._adddate(other, -this._months);\n\t\telse if (_isdatetime(other))\n\t\t\treturn this._adddatetime(other, -this._months);\n\t\tthrow new ArgumentError(_type(this).fullname() + \" - \" + _type(other).fullname() + \" not supported\");\n\t}\n\n\t[symbols.mul](other)\n\t{\n\t\tif (typeof(other) === \"number\" || typeof(other) === \"boolean\")\n\t\t\treturn new MonthDelta(this._months * Math.floor(other));\n\t\tthrow new ArgumentError(_type(this).fullname() + \" * \" + _type(other).fullname() + \" not supported\");\n\t}\n\n\t[symbols.rmul](other)\n\t{\n\t\tif (typeof(other) === \"number\" || typeof(other) === \"boolean\")\n\t\t\treturn new MonthDelta(this._months * Math.floor(other));\n\t\tthrow new ArgumentError(_type(this).fullname() + \" * \" + _type(other).fullname() + \" not supported\");\n\t}\n\n\t[symbols.truediv](other)\n\t{\n\t\tif (_ismonthdelta(other))\n\t\t\treturn this._months / other._months;\n\t\tthrow new ArgumentError(_type(this).fullname() + \" / \" + _type(other).fullname() + \" not supported\");\n\t}\n\n\t[symbols.floordiv](other)\n\t{\n\t\tif (typeof(other) === \"number\" || typeof(other) === \"boolean\")\n\t\t{\n\t\t\tif (other == 0)\n\t\t\t\tthrow new ZeroDivisionError();\n\t\t\tif (_isint(other))\n\t\t\t\treturn new MonthDelta(Math.floor(this._months / other));\n\t\t}\n\t\telse if (_ismonthdelta(other))\n\t\t{\n\t\t\tif (other._months == 0)\n\t\t\t\tthrow new ZeroDivisionError();\n\t\t\treturn Math.floor(this._months / other._months);\n\t\t}\n\t\tthrow new ArgumentError(_type(this).fullname() + \" // \" + _type(other).fullname() + \" not supported\");\n\t}\n\n\t[symbols.getattr](attrname)\n\t{\n\t\tlet self = this;\n\t\tswitch (attrname)\n\t\t{\n\t\t\tcase \"months\":\n\t\t\t\tlet months = function months(){ return self._months; };\n\t\t\t\texpose(months, []);\n\t\t\t\treturn months;\n\t\t\tdefault:\n\t\t\t\tthrow new AttributeError(this, attrname);\n\t\t}\n\t}\n\n\tmonths()\n\t{\n\t\treturn this._months;\n\t}\n};\n\n\nexport let builtins = {\n\trepr: _repr,\n\tascii: _ascii,\n\tstr: strtype,\n\tint: inttype,\n\tfloat: floattype,\n\tlist: listtype,\n\tset: settype,\n\tbool: booltype,\n\tlen: _len,\n\ttype: _type,\n\tformat: _format,\n\tany: _any,\n\tall: _all,\n\tzip: _zip,\n\tgetattr: _getattr,\n\thasattr: _hasattr,\n\tdir: _dir,\n\tisundefined: _isundefined,\n\tisdefined: _isdefined,\n\tisnone: _isnone,\n\tisbool: _isbool,\n\tisint: _isint,\n\tisfloat: _isfloat,\n\tisstr: _isstr,\n\tisdate: _isdate,\n\tisdatetime: _isdatetime,\n\tiscolor: _iscolor,\n\tistimedelta: _istimedelta,\n\tismonthdelta: _ismonthdelta,\n\tistemplate: _istemplate,\n\tisfunction: _isfunction,\n\tislist: _islist,\n\tisset: _isset,\n\tisdict: _isdict,\n\tisexception: _isexception,\n\tisinstance: _isinstance,\n\tasjson: _asjson,\n\tfromjson: _fromjson,\n\tasul4on: _asul4on,\n\tfromul4on: _fromul4on,\n\tnow: now,\n\tutcnow: utcnow,\n\ttoday: today,\n\tenumerate: _enumerate,\n\tisfirst: _isfirst,\n\tislast: _islast,\n\tisfirstlast: _isfirstlast,\n\tenumfl: _enumfl,\n\tabs: _abs,\n\tdate: datetype,\n\tdatetime: datetimetype,\n\ttimedelta: timedeltatype,\n\tmonthdelta: monthdeltatype,\n\trgb: _rgb,\n\thls: _hls,\n\thsv: _hsv,\n\txmlescape: _xmlescape,\n\tcsv: _csv,\n\tchr: _chr,\n\tord: _ord,\n\thex: _hex,\n\toct: _oct,\n\tbin: _bin,\n\tmin: _min,\n\tmax: _max,\n\tsum: _sum,\n\tfirst: _first,\n\tlast: _last,\n\tsorted: _sorted,\n\trange: _range,\n\tslice: _slice,\n\turlquote: _urlquote,\n\turlunquote: _urlunquote,\n\treversed: _reversed,\n\trandom: _random,\n\trandrange: _randrange,\n\trandchoice: _randchoice,\n\tround: _round,\n\tfloor: _floor,\n\tceil: _ceil,\n\tmd5: _md5,\n\tscrypt: _scrypt,\n\tul4on: _ul4on,\n\tul4: _ul4,\n\tmath: _math,\n\toperator: _operator\n};\n\n\nconst constructors = [\n\t[TextAST, \"text\"],\n\t[IndentAST, \"indent\"],\n\t[LineEndAST, \"lineend\"],\n\t[ConstAST, \"const\"],\n\t[SeqItemAST, \"seqitem\"],\n\t[UnpackSeqItemAST, \"unpackseqitem\"],\n\t[DictItemAST, \"dictitem\"],\n\t[UnpackDictItemAST, \"unpackdictitem\"],\n\t[PositionalArgumentAST, \"posarg\"],\n\t[KeywordArgumentAST, \"keywordarg\"],\n\t[UnpackListArgumentAST, \"unpacklistarg\"],\n\t[UnpackDictArgumentAST, \"unpackdictarg\"],\n\t[ListAST, \"list\"],\n\t[ListComprehensionAST, \"listcomp\"],\n\t[DictAST, \"dict\"],\n\t[DictComprehensionAST, \"dictcomp\"],\n\t[SetAST, \"set\"],\n\t[SetComprehensionAST, \"setcomp\"],\n\t[GeneratorExpressionAST, \"genexpr\"],\n\t[VarAST, \"var\"],\n\t[NotAST, \"not\"],\n\t[NegAST, \"neg\"],\n\t[BitNotAST, \"bitnot\"],\n\t[IfAST, \"if\"],\n\t[ReturnAST, \"return\"],\n\t[PrintAST, \"print\"],\n\t[PrintXAST, \"printx\"],\n\t[ItemAST, \"item\"],\n\t[IsAST, \"is\"],\n\t[IsNotAST, \"isnot\"],\n\t[EQAST, \"eq\"],\n\t[NEAST, \"ne\"],\n\t[LTAST, \"lt\"],\n\t[LEAST, \"le\"],\n\t[GTAST, \"gt\"],\n\t[GEAST, \"ge\"],\n\t[NotContainsAST, \"notcontains\"],\n\t[ContainsAST, \"contains\"],\n\t[AddAST, \"add\"],\n\t[SubAST, \"sub\"],\n\t[MulAST, \"mul\"],\n\t[FloorDivAST, \"floordiv\"],\n\t[TrueDivAST, \"truediv\"],\n\t[ModAST, \"mod\"],\n\t[ShiftLeftAST, \"shiftleft\"],\n\t[ShiftRightAST, \"shiftright\"],\n\t[BitAndAST, \"bitand\"],\n\t[BitXOrAST, \"bitxor\"],\n\t[BitOrAST, \"bitor\"],\n\t[AndAST, \"and\"],\n\t[OrAST, \"or\"],\n\t[SliceAST, \"slice\"],\n\t[AttrAST, \"attr\"],\n\t[CallAST, \"call\"],\n\t[RenderAST, \"render\"],\n\t[RenderXAST, \"renderx\"],\n\t[RenderBlockAST, \"renderblock\"],\n\t[RenderBlocksAST, \"renderblocks\"],\n\t[SetVarAST, \"setvar\"],\n\t[AddVarAST, \"addvar\"],\n\t[SubVarAST, \"subvar\"],\n\t[MulVarAST, \"mulvar\"],\n\t[TrueDivVarAST, \"truedivvar\"],\n\t[FloorDivVarAST, \"floordivvar\"],\n\t[ModVarAST, \"modvar\"],\n\t[ShiftLeftVarAST, \"shiftleftvar\"],\n\t[ShiftRightVarAST, \"shiftrightvar\"],\n\t[BitAndVarAST, \"bitandvar\"],\n\t[BitXOrVarAST, \"bitxorvar\"],\n\t[BitOrVarAST, \"bitorvar\"],\n\t[ForBlockAST, \"forblock\"],\n\t[WhileBlockAST, \"whileblock\"],\n\t[BreakAST, \"break\"],\n\t[ContinueAST, \"continue\"],\n\t[ConditionalBlocksAST, \"condblock\"],\n\t[IfBlockAST, \"ifblock\"],\n\t[ElIfBlockAST, \"elifblock\"],\n\t[ElseBlockAST, \"elseblock\"],\n\t[SignatureAST, \"signature\"],\n\t[Template, \"template\"],\n];\n\nfor (let [constructor, name] of constructors)\n{\n\tconstructor.prototype.type = name;\n\tregister(\"de.livinglogic.ul4.\" + name, constructor);\n}\n\n// Report an exception `exc` originating from an UL4 on the browser console.\nexport function report_exc(exc)\n{\n\tlet original_exc = exc;\n\tif (console && console.error)\n\t{\n\t\tlet errors = [];\n\t\tfor (;;) \n\t\t{\n\t\t\terrors.unshift(exc);\n\t\t\tif (exc.context !== undefined && exc.context !== null)\n\t\t\t\texc = exc.context;\n\t\t\telse\n\t\t\t\tbreak;\n\t\t}\n\n\t\tlet texts = [];\n\t\tlet args = [];\n\n\t\tfunction text(s)\n\t\t{\n\t\t\ttexts.push(s);\n\t\t}\n\n\t\tfunction css(text, style)\n\t\t{\n\t\t\ttexts.push(\"%c\");\n\t\t\targs.push(style);\n\t\t\ttexts.push(text);\n\t\t\ttexts.push(\"%c\");\n\t\t\targs.push(\"\");\n\t\t}\n\n\t\tfunction em(s)\n\t\t{\n\t\t\tcss(s, \"font-weight: bold\");\n\t\t}\n\n\t\tfunction focus(s)\n\t\t{\n\t\t\tcss(s, \"border-bottom: 2px solid #b22\");\n\t\t}\n\n\t\tfor (let exc of errors)\n\t\t{\n\t\t\tif (texts.length)\n\t\t\t\ttext(\"\\n\\n\");\n\n\t\t\tif (exc instanceof ul4.LocationError)\n\t\t\t{\n\t\t\t\tlet template = exc.location.template;\n\t\t\t\tif (template.parenttemplate !== null)\n\t\t\t\t\ttext(\"in local template \");\n\t\t\t\telse\n\t\t\t\t\ttext(\"in template \");\n\t\t\t\tlet first = true;\n\t\t\t\twhile (template != null)\n\t\t\t\t{\n\t\t\t\t\tif (first)\n\t\t\t\t\t\tfirst = false;\n\t\t\t\t\telse\n\t\t\t\t\t\ttext(\" in \");\n\t\t\t\t\tem(template.name ? _repr(template.name) : \"(unnamed)\");\n\t\t\t\t\ttemplate = template.parenttemplate;\n\t\t\t\t}\n\t\t\t\ttext(\" offset \");\n\t\t\t\tem(exc.location.pos.start + \"\");\n\t\t\t\ttext(\":\");\n\t\t\t\tem(exc.location.pos.stop + \"\");\n\t\t\t\ttext(\"; line \");\n\t\t\t\tem(exc.location.startline + \"\");\n\t\t\t\ttext(\"; column \");\n\t\t\t\tem(exc.location.startcol + \"\");\n\t\t\t\ttext(\"\\n\");\n\t\t\t\ttext(exc.location.startsourceprefix);\n\t\t\t\tfocus(exc.location.startsource);\n\t\t\t\ttext(exc.location.startsourcesuffix);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tem(exc.constructor.name);\n\t\t\t\ttext(\": \");\n\t\t\t\ttext(exc.message);\n\t\t\t}\n\t\t}\n\t\tconsole.error(texts.join(\"\"), ...args);\n\t}\n};"],"names":["$","safeAdd","x","y","lsw","md5cmn","q","a","b","s","t","bitRotateLeft","num","cnt","md5ff","c","d","md5gg","md5hh","md5ii","binlMD5","len","i","olda","oldb","oldc","oldd","length","binl2rstr","input","output","length32","String","fromCharCode","rstr2binl","undefined","length8","charCodeAt","rstr2hex","hexTab","charAt","str2rstrUTF8","unescape","encodeURIComponent","rawMD5","rstrMD5","rawHMACMD5","k","rstrHMACMD5","key","data","hash","bkey","ipad","opad","concat","md5","string","raw","hexHMACMD5","hexMD5","module","exports","this","api_version","symbols","str","Symbol","repr","bool","call","render","contains","eq","ne","lt","le","gt","ge","neg","abs","add","radd","sub","rsub","mul","rmul","truediv","rtruediv","floordiv","rfloordiv","getattr","setattr","getitem","setitem","type","_registry","register","name","f","prototype","ul4onname","dumps","obj","indent","encoder","Encoder","dump","join","loads","registry","decoder","Decoder","_level","_strings2index","_ids2index","_backrefs","line","push","args","oldindent","arg","_line","Math","round","index","_str_repr","replace","_iscolor","r","g","_isdate","year","month","day","_isdatetime","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getMilliseconds","_istimedelta","days","seconds","microseconds","_ismonthdelta","months","slice","start","stop","ul4ondump","__id__","ul4onid","_islist","item","_ismap","value","_isdict","_isset","ValueError","_repr","attrname","bind","expose","ul4","AttributeError","pos","backrefs","persistent_objects","stack","re_white","match","size","result","substring","re_digits","readcharoreof","parseFloat","isNaN","oldpos","escapechar","chars","read","codepoint","parseInt","load","typecode","readblackchar","readnumber","readchar","delimiter","c2","_readescape","Color","_r","_g","_b","_a","Date_","Date","setFullYear","setDate","setMonth","setHours","setMinutes","setSeconds","setMilliseconds","TimeDelta","_days","_seconds","_microseconds","MonthDelta","_months","backup","pop","Map","set","Set","_beginfakeloading","constructor","_endfakeloading","ul4onload","id","self","next","done","_rvalidchars","_rvalidescape","_rvalidtokens","_rvalidbraces","_bound","upper","_internal_call","context","functioncontext","signature","needscontext","needsobject","kwargs","finalargs","ArgumentError","bindObject","bindArray","unshift","apply","_callfunction","_ul4_name","_ul4_signature","_ul4_needsobject","_ul4_needscontext","TypeError","_callobject","_callrender","_call","_type","fullname","_unpackvar","lvalue","newvalue","iter","_iter","_formatsource","out","finalout","level","needlf","part","j","_sourceprefix","source","outerstartpos","innerstartpos","maxprefix","preprefix","_sourcesuffix","outerstoppos","innerstoppos","maxsuffix","postsuffix","_lineColFromPos","col","_eq","obj1","obj2","numbertypes","indexOf","getTime","_isobject","hasOwnProperty","has","get","_ne","_unorderable","operator","_cmp","v1","v2","res","in1only","in2only","_lt","_le","_gt","_ge","_isiter","keys","values","iterator","ascii","squote","dquote","quote","code","escape","test","_lpad","toString","_map_repr","v","_repr_internal","_list_repr","first","_set_repr","_object_repr","_date_repr","_date","_datetime_repr","hour","minute","second","ms","_typeof","_ascii","_date_str","_datetime_str","_str","strtype","_bool","booltype","_list","listtype","_len","sequence","constructors2types","_maketype","GenericType","nonetype","undefinedtype","_isbool","_isint","inttype","_isfloat","floattype","_isstr","settype","maptype","datetimetype","objecttype","_mod","div","floor","mod","_getattr","default_","exc","_hasattr","Protocol","hasattr","_dir","dir","_any","iterable","_all","_isundefined","_isdefined","_isnone","instancecheck","datetype","_istemplate","Template","TemplateClosure","_isfunction","Object","_isexception","Exception","__type__","Proto","__proto__","_isinstance","_str_repeat","rep","_list_repeat","list","_asjson","_str_json","_fromjson","StrProtocol","strip","JSON","parse","Function","_asul4on","_fromul4on","_format_datetime","fmt","lang","translation","de","ml","ws","wl","xf","Xf","cf","en","fr","es","it","da","sv","nl","pt","cs","sk","pl","hr","sr","ro","hu","tr","ru","zh","ko","ja","inspec","getDay","_format","DateTimeProtocol","yearday","_week4format","_format_int","work","fill","align","sign","alternate","minimumwidth","minimumwidthStr","exec","toUpperCase","pad","padBefore","padAfter","translations","toLowerCase","split","_nextid","other","Signature","paramsByPos","paramsByName","countpos","countposdef","countposkw","countposkwdef","countkw","countkwdef","varpos","varkw","state","params","endsWith","defaultValue","param","ParameterError","count","Array","haveValues","count_nodef","count_def","entries","argname","argvalue","argObject","buffer","lasttype","sep","includes","_appendParam","options","_extend","baseobj","attrs","assign","create","Type","doc","_constructor","attr","realattr","object","BoolType","IntType","base","FloatType","StrType","end","_count","_find","_rfind","old","new_","substr","maxsplit","splice","lstrip","lastIndexOf","rstrip","startpos","keepends","lookingAtLineEnd","lineendlen","endpos","resultlist","prefix","singlepre","suffix","singlesuf","find","rfind","rsplit","splitlines","lower","capitalize","startswith","endswith","ListType","items","append","insert","MapType","others","_update","clear","KeyError","update","SetType","DateType","weekday","firstweekday","mindaysinfirstweek","calendar","week","date","mimeformat","isoformat","DateTimeType","offset","refDate","weekDayDiff","weekStartYear","weekStartMonth","weekStartDay","weekStart","diff","SubAST","_do","leap","_isleap","microsecond","ObjectType","realresult","classmodule","classname","classdoc","ul4type","ListProtocol","DateProtocol","SetProtocol","MapProtocol","ObjectProtocol","Context","vars","globals","builtins","indents","escapes","_output","message","fileName","lineNumber","instance","Error","setPrototypeOf","getPrototypeOf","enumerable","writable","configurable","InternalException","ReturnException","BreakException","ContinueException","SyntaxError","LValueRequiredError","NotSubscriptableError","ZeroDivisionError","IndexError","NotImplementedError","LocationError","location","template","parenttemplate","templateprefix","_templateprefix","startsourceprefix","startsource","startsourcesuffix","text","underline","startline","startcol","AST","stoppos","_startline","_startcol","_stopline","_stopcol","_source","of","_ul4onattrs","_eval","_decorate_exception","_eval_set","_eval_modify","TextAST","IndentAST","_text","LineEndAST","CodeAST","ConstAST","ItemArgBase","_eval_list","_eval_dict","_eval_call","SeqItemAST","_handle_eval","UnpackSeqItemAST","DictItemAST","UnpackDictItemAST","subitem","PositionalArgumentAST","KeywordArgumentAST","UnpackListArgumentAST","UnpackDictArgumentAST","ListAST","_handle_eval_list","ListComprehensionAST","varname","container","condition","localcontext","inheritvars","_handle_eval_set","SetAST","SetComprehensionAST","DictAST","_handle_eval_dict","DictComprehensionAST","GeneratorExpressionAST","VarAST","_get","_set","_modify","_ido","UnaryAST","NegAST","BitNotAST","NotAST","IfAST","objif","objcond","objelse","ReturnAST","PrintAST","PrintXAST","_xmlescape","BinaryAST","ItemAST","orgkey","IsAST","IsNotAST","EQAST","NEAST","LTAST","LEAST","GTAST","GEAST","ContainsAST","NotContainsAST","AddAST","_date_sub","_datetime_sub","swap","year1","yearday1","year2","yearday2","diffdays","hours1","minutes1","seconds1","hours2","minutes2","diffseconds","diffmilliseconds","MulAST","targetsize","FloorDivAST","TrueDivAST","ModAST","ShiftLeftAST","ShiftRightAST","BitAndAST","BitXOrAST","BitOrAST","AndAST","OrAST","AttrAST","oldvalue","CallAST","_handle_eval_call","_makeargs","RenderAST","_reprname","tag","withindent","_handle_additional_arguments","RenderXAST","RenderBlockAST","closure","content","RenderBlocksAST","BlockAST","SliceAST","index1","index2","SetVarAST","ModifyVarAST","_handle_eval_modify","_operator","AddVarAST","SubVarAST","MulVarAST","TrueDivVarAST","FloorDivVarAST","ModVarAST","ShiftLeftVarAST","ShiftRightVarAST","BitAndVarAST","BitXOrVarAST","BitOrVarAST","ForBlockAST","truel","subname","_str_varname","WhileBlockAST","BreakAST","ContinueAST","ConditionalBlocksAST","block","_execute","ConditionalBlockAST","_strname","IfBlockAST","ElIfBlockAST","ElseBlockAST","whitespace","startdelim","enddelim","docpos","_asts","_renderbound","renders","_rendersbound","SignatureAST","loaded_api_version","replacevars","replaceoutput","getoutput","_callbound","endtag","_rgb","_csv","_chr","_ord","_hex","number","_oct","_bin","_min","minvalue","testvalue","_max","_sum","_first","_last","_sorted","reverse","cmp","sort","s1","s2","keyvalue","_range","higher","step","_slice","_urlquote","_urlunquote","decodeURIComponent","_reversed","_random","random","_randrange","n","width","_randchoice","iscolor","_round","digits","threshold","pow","_floor","_ceil","ceil","_md5","_scrypt","salt","_enumerate","_isfirst","isfirst","_islast","lastitem","_isfirstlast","_enumfl","_zip","iterables","iters","_abs","_hls","h","l","m1","m2","_v","hue","_hsv","p","now","utcnow","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCMilliseconds","today","Module","__name__","__doc__","_ul4on_loads","_ul4on_dumps","_ul4on_encoder","_ul4on_decoder","_ul4on","isclose","rel_tol","abs_tol","Infinity","cos","sin","tan","sqrt","_math","pi","PI","e","E","tau","_attrgetter","attrnames","getone","dottedname","dottedattrname","attrgetter","_ul4","isstr","lastIndex","jan1","jan1weekday","ColorType","colortype","lum","hls","hlsa","hsv","hsva","witha","withlum","abslum","rellum","rc","gc","bc","maxc","max","minc","min","TimeDeltaType","timedeltatype","total_microseconds","total_seconds","minutes","hours","millisecond","_adddate","_adddatetime","myValue","otherValue","hasSeconds","hasMicroseconds","MonthDeltaType","monthdeltatype","targetmonth","format","any","all","zip","isundefined","isdefined","isnone","isbool","isint","isfloat","isdate","isdatetime","istimedelta","ismonthdelta","istemplate","isfunction","islist","isset","isdict","isexception","isinstance","asjson","fromjson","asul4on","fromul4on","enumerate","islast","isfirstlast","enumfl","datetime","timedelta","monthdelta","rgb","xmlescape","csv","chr","ord","hex","oct","bin","sum","last","sorted","range","urlquote","urlunquote","reversed","randrange","randchoice","scrypt","ul4on","math","_datetime","_float","defaultvalue","_int","_map2object","newobj","_monthdelta","_rpad","_stacktrace","_timedelta","report_exc","console","error","texts","css","style","em","focus","errors"],"mappings":"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"}