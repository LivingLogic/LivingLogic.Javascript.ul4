{"version":3,"file":"ul4.js","sources":["../../node_modules/blueimp-md5/js/md5.js","../../src/ul4.js"],"sourcesContent":["/*\n * JavaScript MD5\n * https://github.com/blueimp/JavaScript-MD5\n *\n * Copyright 2011, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n *\n * Based on\n * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message\n * Digest Algorithm, as defined in RFC 1321.\n * Version 2.2 Copyright (C) Paul Johnston 1999 - 2009\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n * Distributed under the BSD License\n * See http://pajhome.org.uk/crypt/md5 for more info.\n */\n\n/* global define */\n\n/* eslint-disable strict */\n\n;(function ($) {\n  'use strict'\n\n  /**\n   * Add integers, wrapping at 2^32.\n   * This uses 16-bit operations internally to work around bugs in interpreters.\n   *\n   * @param {number} x First integer\n   * @param {number} y Second integer\n   * @returns {number} Sum\n   */\n  function safeAdd(x, y) {\n    var lsw = (x & 0xffff) + (y & 0xffff)\n    var msw = (x >> 16) + (y >> 16) + (lsw >> 16)\n    return (msw << 16) | (lsw & 0xffff)\n  }\n\n  /**\n   * Bitwise rotate a 32-bit number to the left.\n   *\n   * @param {number} num 32-bit number\n   * @param {number} cnt Rotation count\n   * @returns {number} Rotated number\n   */\n  function bitRotateLeft(num, cnt) {\n    return (num << cnt) | (num >>> (32 - cnt))\n  }\n\n  /**\n   * Basic operation the algorithm uses.\n   *\n   * @param {number} q q\n   * @param {number} a a\n   * @param {number} b b\n   * @param {number} x x\n   * @param {number} s s\n   * @param {number} t t\n   * @returns {number} Result\n   */\n  function md5cmn(q, a, b, x, s, t) {\n    return safeAdd(bitRotateLeft(safeAdd(safeAdd(a, q), safeAdd(x, t)), s), b)\n  }\n  /**\n   * Basic operation the algorithm uses.\n   *\n   * @param {number} a a\n   * @param {number} b b\n   * @param {number} c c\n   * @param {number} d d\n   * @param {number} x x\n   * @param {number} s s\n   * @param {number} t t\n   * @returns {number} Result\n   */\n  function md5ff(a, b, c, d, x, s, t) {\n    return md5cmn((b & c) | (~b & d), a, b, x, s, t)\n  }\n  /**\n   * Basic operation the algorithm uses.\n   *\n   * @param {number} a a\n   * @param {number} b b\n   * @param {number} c c\n   * @param {number} d d\n   * @param {number} x x\n   * @param {number} s s\n   * @param {number} t t\n   * @returns {number} Result\n   */\n  function md5gg(a, b, c, d, x, s, t) {\n    return md5cmn((b & d) | (c & ~d), a, b, x, s, t)\n  }\n  /**\n   * Basic operation the algorithm uses.\n   *\n   * @param {number} a a\n   * @param {number} b b\n   * @param {number} c c\n   * @param {number} d d\n   * @param {number} x x\n   * @param {number} s s\n   * @param {number} t t\n   * @returns {number} Result\n   */\n  function md5hh(a, b, c, d, x, s, t) {\n    return md5cmn(b ^ c ^ d, a, b, x, s, t)\n  }\n  /**\n   * Basic operation the algorithm uses.\n   *\n   * @param {number} a a\n   * @param {number} b b\n   * @param {number} c c\n   * @param {number} d d\n   * @param {number} x x\n   * @param {number} s s\n   * @param {number} t t\n   * @returns {number} Result\n   */\n  function md5ii(a, b, c, d, x, s, t) {\n    return md5cmn(c ^ (b | ~d), a, b, x, s, t)\n  }\n\n  /**\n   * Calculate the MD5 of an array of little-endian words, and a bit length.\n   *\n   * @param {Array} x Array of little-endian words\n   * @param {number} len Bit length\n   * @returns {Array<number>} MD5 Array\n   */\n  function binlMD5(x, len) {\n    /* append padding */\n    x[len >> 5] |= 0x80 << len % 32\n    x[(((len + 64) >>> 9) << 4) + 14] = len\n\n    var i\n    var olda\n    var oldb\n    var oldc\n    var oldd\n    var a = 1732584193\n    var b = -271733879\n    var c = -1732584194\n    var d = 271733878\n\n    for (i = 0; i < x.length; i += 16) {\n      olda = a\n      oldb = b\n      oldc = c\n      oldd = d\n\n      a = md5ff(a, b, c, d, x[i], 7, -680876936)\n      d = md5ff(d, a, b, c, x[i + 1], 12, -389564586)\n      c = md5ff(c, d, a, b, x[i + 2], 17, 606105819)\n      b = md5ff(b, c, d, a, x[i + 3], 22, -1044525330)\n      a = md5ff(a, b, c, d, x[i + 4], 7, -176418897)\n      d = md5ff(d, a, b, c, x[i + 5], 12, 1200080426)\n      c = md5ff(c, d, a, b, x[i + 6], 17, -1473231341)\n      b = md5ff(b, c, d, a, x[i + 7], 22, -45705983)\n      a = md5ff(a, b, c, d, x[i + 8], 7, 1770035416)\n      d = md5ff(d, a, b, c, x[i + 9], 12, -1958414417)\n      c = md5ff(c, d, a, b, x[i + 10], 17, -42063)\n      b = md5ff(b, c, d, a, x[i + 11], 22, -1990404162)\n      a = md5ff(a, b, c, d, x[i + 12], 7, 1804603682)\n      d = md5ff(d, a, b, c, x[i + 13], 12, -40341101)\n      c = md5ff(c, d, a, b, x[i + 14], 17, -1502002290)\n      b = md5ff(b, c, d, a, x[i + 15], 22, 1236535329)\n\n      a = md5gg(a, b, c, d, x[i + 1], 5, -165796510)\n      d = md5gg(d, a, b, c, x[i + 6], 9, -1069501632)\n      c = md5gg(c, d, a, b, x[i + 11], 14, 643717713)\n      b = md5gg(b, c, d, a, x[i], 20, -373897302)\n      a = md5gg(a, b, c, d, x[i + 5], 5, -701558691)\n      d = md5gg(d, a, b, c, x[i + 10], 9, 38016083)\n      c = md5gg(c, d, a, b, x[i + 15], 14, -660478335)\n      b = md5gg(b, c, d, a, x[i + 4], 20, -405537848)\n      a = md5gg(a, b, c, d, x[i + 9], 5, 568446438)\n      d = md5gg(d, a, b, c, x[i + 14], 9, -1019803690)\n      c = md5gg(c, d, a, b, x[i + 3], 14, -187363961)\n      b = md5gg(b, c, d, a, x[i + 8], 20, 1163531501)\n      a = md5gg(a, b, c, d, x[i + 13], 5, -1444681467)\n      d = md5gg(d, a, b, c, x[i + 2], 9, -51403784)\n      c = md5gg(c, d, a, b, x[i + 7], 14, 1735328473)\n      b = md5gg(b, c, d, a, x[i + 12], 20, -1926607734)\n\n      a = md5hh(a, b, c, d, x[i + 5], 4, -378558)\n      d = md5hh(d, a, b, c, x[i + 8], 11, -2022574463)\n      c = md5hh(c, d, a, b, x[i + 11], 16, 1839030562)\n      b = md5hh(b, c, d, a, x[i + 14], 23, -35309556)\n      a = md5hh(a, b, c, d, x[i + 1], 4, -1530992060)\n      d = md5hh(d, a, b, c, x[i + 4], 11, 1272893353)\n      c = md5hh(c, d, a, b, x[i + 7], 16, -155497632)\n      b = md5hh(b, c, d, a, x[i + 10], 23, -1094730640)\n      a = md5hh(a, b, c, d, x[i + 13], 4, 681279174)\n      d = md5hh(d, a, b, c, x[i], 11, -358537222)\n      c = md5hh(c, d, a, b, x[i + 3], 16, -722521979)\n      b = md5hh(b, c, d, a, x[i + 6], 23, 76029189)\n      a = md5hh(a, b, c, d, x[i + 9], 4, -640364487)\n      d = md5hh(d, a, b, c, x[i + 12], 11, -421815835)\n      c = md5hh(c, d, a, b, x[i + 15], 16, 530742520)\n      b = md5hh(b, c, d, a, x[i + 2], 23, -995338651)\n\n      a = md5ii(a, b, c, d, x[i], 6, -198630844)\n      d = md5ii(d, a, b, c, x[i + 7], 10, 1126891415)\n      c = md5ii(c, d, a, b, x[i + 14], 15, -1416354905)\n      b = md5ii(b, c, d, a, x[i + 5], 21, -57434055)\n      a = md5ii(a, b, c, d, x[i + 12], 6, 1700485571)\n      d = md5ii(d, a, b, c, x[i + 3], 10, -1894986606)\n      c = md5ii(c, d, a, b, x[i + 10], 15, -1051523)\n      b = md5ii(b, c, d, a, x[i + 1], 21, -2054922799)\n      a = md5ii(a, b, c, d, x[i + 8], 6, 1873313359)\n      d = md5ii(d, a, b, c, x[i + 15], 10, -30611744)\n      c = md5ii(c, d, a, b, x[i + 6], 15, -1560198380)\n      b = md5ii(b, c, d, a, x[i + 13], 21, 1309151649)\n      a = md5ii(a, b, c, d, x[i + 4], 6, -145523070)\n      d = md5ii(d, a, b, c, x[i + 11], 10, -1120210379)\n      c = md5ii(c, d, a, b, x[i + 2], 15, 718787259)\n      b = md5ii(b, c, d, a, x[i + 9], 21, -343485551)\n\n      a = safeAdd(a, olda)\n      b = safeAdd(b, oldb)\n      c = safeAdd(c, oldc)\n      d = safeAdd(d, oldd)\n    }\n    return [a, b, c, d]\n  }\n\n  /**\n   * Convert an array of little-endian words to a string\n   *\n   * @param {Array<number>} input MD5 Array\n   * @returns {string} MD5 string\n   */\n  function binl2rstr(input) {\n    var i\n    var output = ''\n    var length32 = input.length * 32\n    for (i = 0; i < length32; i += 8) {\n      output += String.fromCharCode((input[i >> 5] >>> i % 32) & 0xff)\n    }\n    return output\n  }\n\n  /**\n   * Convert a raw string to an array of little-endian words\n   * Characters >255 have their high-byte silently ignored.\n   *\n   * @param {string} input Raw input string\n   * @returns {Array<number>} Array of little-endian words\n   */\n  function rstr2binl(input) {\n    var i\n    var output = []\n    output[(input.length >> 2) - 1] = undefined\n    for (i = 0; i < output.length; i += 1) {\n      output[i] = 0\n    }\n    var length8 = input.length * 8\n    for (i = 0; i < length8; i += 8) {\n      output[i >> 5] |= (input.charCodeAt(i / 8) & 0xff) << i % 32\n    }\n    return output\n  }\n\n  /**\n   * Calculate the MD5 of a raw string\n   *\n   * @param {string} s Input string\n   * @returns {string} Raw MD5 string\n   */\n  function rstrMD5(s) {\n    return binl2rstr(binlMD5(rstr2binl(s), s.length * 8))\n  }\n\n  /**\n   * Calculates the HMAC-MD5 of a key and some data (raw strings)\n   *\n   * @param {string} key HMAC key\n   * @param {string} data Raw input string\n   * @returns {string} Raw MD5 string\n   */\n  function rstrHMACMD5(key, data) {\n    var i\n    var bkey = rstr2binl(key)\n    var ipad = []\n    var opad = []\n    var hash\n    ipad[15] = opad[15] = undefined\n    if (bkey.length > 16) {\n      bkey = binlMD5(bkey, key.length * 8)\n    }\n    for (i = 0; i < 16; i += 1) {\n      ipad[i] = bkey[i] ^ 0x36363636\n      opad[i] = bkey[i] ^ 0x5c5c5c5c\n    }\n    hash = binlMD5(ipad.concat(rstr2binl(data)), 512 + data.length * 8)\n    return binl2rstr(binlMD5(opad.concat(hash), 512 + 128))\n  }\n\n  /**\n   * Convert a raw string to a hex string\n   *\n   * @param {string} input Raw input string\n   * @returns {string} Hex encoded string\n   */\n  function rstr2hex(input) {\n    var hexTab = '0123456789abcdef'\n    var output = ''\n    var x\n    var i\n    for (i = 0; i < input.length; i += 1) {\n      x = input.charCodeAt(i)\n      output += hexTab.charAt((x >>> 4) & 0x0f) + hexTab.charAt(x & 0x0f)\n    }\n    return output\n  }\n\n  /**\n   * Encode a string as UTF-8\n   *\n   * @param {string} input Input string\n   * @returns {string} UTF8 string\n   */\n  function str2rstrUTF8(input) {\n    return unescape(encodeURIComponent(input))\n  }\n\n  /**\n   * Encodes input string as raw MD5 string\n   *\n   * @param {string} s Input string\n   * @returns {string} Raw MD5 string\n   */\n  function rawMD5(s) {\n    return rstrMD5(str2rstrUTF8(s))\n  }\n  /**\n   * Encodes input string as Hex encoded string\n   *\n   * @param {string} s Input string\n   * @returns {string} Hex encoded string\n   */\n  function hexMD5(s) {\n    return rstr2hex(rawMD5(s))\n  }\n  /**\n   * Calculates the raw HMAC-MD5 for the given key and data\n   *\n   * @param {string} k HMAC key\n   * @param {string} d Input string\n   * @returns {string} Raw MD5 string\n   */\n  function rawHMACMD5(k, d) {\n    return rstrHMACMD5(str2rstrUTF8(k), str2rstrUTF8(d))\n  }\n  /**\n   * Calculates the Hex encoded HMAC-MD5 for the given key and data\n   *\n   * @param {string} k HMAC key\n   * @param {string} d Input string\n   * @returns {string} Raw MD5 string\n   */\n  function hexHMACMD5(k, d) {\n    return rstr2hex(rawHMACMD5(k, d))\n  }\n\n  /**\n   * Calculates MD5 value for a given string.\n   * If a key is provided, calculates the HMAC-MD5 value.\n   * Returns a Hex encoded string unless the raw argument is given.\n   *\n   * @param {string} string Input string\n   * @param {string} [key] HMAC key\n   * @param {boolean} [raw] Raw output switch\n   * @returns {string} MD5 output\n   */\n  function md5(string, key, raw) {\n    if (!key) {\n      if (!raw) {\n        return hexMD5(string)\n      }\n      return rawMD5(string)\n    }\n    if (!raw) {\n      return hexHMACMD5(key, string)\n    }\n    return rawHMACMD5(key, string)\n  }\n\n  if (typeof define === 'function' && define.amd) {\n    define(function () {\n      return md5\n    })\n  } else if (typeof module === 'object' && module.exports) {\n    module.exports = md5\n  } else {\n    $.md5 = md5\n  }\n})(this)\n","/*!\n * UL4/UL4ON JavaScript Library\n * http://www.livinglogic.de/Python/ul4c/\n * http://www.livinglogic.de/Python/ul4on/\n *\n * Copyright 2011-2021 by LivingLogic AG, Bayreuth/Germany\n * Copyright 2011-2021 by Walter Dörwald\n *\n * All Rights Reserved\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\n/*jslint vars: true */\n\n// Version of this Javascript package\nimport packageInfo from '../package.json';\n\nexport const version = packageInfo.version;\n\n// Version of the UL4 API\n// I.e. this version should be compatible with the Python and Java\n// implementations that support the same API version.\nexport const api_version = \"51\";\n\n\n/// Symbols for interfaces implemented in UL4\n\nexport let symbols = {\n\t// Convert an object to a string via UL4s `str()` function\n\tstr: Symbol.for(\"ul4.str\"),\n\t// Return a unambiguous string representation of the object via UL4s `repr()` function\n\trepr: Symbol.for(\"ul4.repr\"),\n\t// Convert an object to a boolean value via UL4s `bool()` function\n\tbool: Symbol.for(\"ul4.bool\"),\n\t// Implementing this interface makes an object callable in UL4\n\tcall: Symbol.for(\"ul4.call\"),\n\t// Implementing this interface makes an object renderable in UL4\n\trender: Symbol.for(\"ul4.render\"),\n\t// Test whether an object is contained in this object via UL4s `in` operator\n\tcontains: Symbol.for(\"ul4.contains\"),\n\t// Compare two objects for equality via UL4s `==` operator\n\teq: Symbol.for(\"ul4.eq\"),\n\t// Compare two objects for inequality via UL4s `!=` operator\n\tne: Symbol.for(\"ul4.ne\"),\n\t// Compare two objects for \"less then\" via UL4s `<` operator\n\tlt: Symbol.for(\"ul4.lt\"),\n\t// Compare two objects for \"less then or equal\" via UL4s `<=` operator\n\tle: Symbol.for(\"ul4.le\"),\n\t// Compare two objects for \"greater then\" via UL4s `>` operator\n\tgt: Symbol.for(\"ul4.gt\"),\n\t// Compare two objects for \"greater then or equal\" via UL4s `>=` operator\n\tge: Symbol.for(\"ul4.ge\"),\n\t// Negate an object via UL4s unary `-` operator\n\tneg: Symbol.for(\"ul4.neg\"),\n\t// Return the absolute value of an object via UL4s `abs()` function\n\tabs: Symbol.for(\"ul4.abs\"),\n\t// Add two objects via UL4s `+` operator (as a method of the left operand)\n\tadd: Symbol.for(\"ul4.add\"),\n\t// Add two objects via UL4s `+` operator (as a method of the right operand)\n\tradd: Symbol.for(\"ul4.radd\"),\n\t// Subtract two objects via UL4s `-` operator (as a method of the left operand)\n\tsub: Symbol.for(\"ul4.sub\"),\n\t// Subtract two objects via UL4s `-` operator (as a method of the right operand)\n\trsub: Symbol.for(\"ul4.rsub\"),\n\t// Multiply two objects via UL4s `*` operator (as a method of the left operand)\n\tmul: Symbol.for(\"ul4.mul\"),\n\t// Multiply two objects via UL4s `*` operator (as a method of the right operand)\n\trmul: Symbol.for(\"ul4.rmul\"),\n\t// Divide two objects via UL4s `/` operator (as a method of the left operand)\n\ttruediv: Symbol.for(\"ul4.truediv\"),\n\t// Divide two objects via UL4s `/` operator (as a method of the right operand)\n\trtruediv: Symbol.for(\"ul4.rtruediv\"),\n\t// Divide two objects via UL4s `//` operator (as a method of the left operand)\n\tfloordiv: Symbol.for(\"ul4.floordiv\"),\n\t// Divide two objects via UL4s `//` operator (as a method of the right operand)\n\trfloordiv: Symbol.for(\"ul4.rfloordiv\"),\n\t// Get an attribute of an object via UL4\n\tgetattr: Symbol.for(\"ul4.getattr\"),\n\t// Set an attribute of an object via UL4\n\tsetattr: Symbol.for(\"ul4.setattr\"),\n\t// Get an item of a container object via UL4s `[]` operator\n\tgetitem: Symbol.for(\"ul4.getitem\"),\n\t// Set an item of a container object via UL4 UL4s `[] =` operator\n\tsetitem: Symbol.for(\"ul4.setitem\"),\n\t// Return the UL4 type of an object\n\ttype: Symbol.for(\"ul4.type\"),\n};\n\n\n// Adds name and signature to a function/method and makes the method callable by UL4\nexport function expose(f, signature, options)\n{\n\toptions = options || {};\n\tif (options.name)\n\t\tf._ul4_name = options.name;\n\t// This is the `_islist` function, inlined here because of order problems.\n\tif (Object.prototype.toString.call(signature) === \"[object Array]\")\n\t\tsignature = new Signature(...signature);\n\tf._ul4_signature = signature;\n\tf._ul4_needsobject = options.needsobject || false;\n\tf._ul4_needscontext = options.needscontext || false;\n\treturn f;\n};\n\n\n// This is outside of `Proto` on purpose\n// This way reactive frameworks like `Vue.js` don't get to see it\n// and complain about mutating render functions when those create new objects.\nlet _nextid = 1;\n\n///\n/// Base class for all our classes.\n/// This implements support for proper UL4ON serialization:\n/// As Javascript has no way to look up an object by its identity, we need to\n/// give each instance a unique identifier ourselves.\n///\nexport class Proto\n{\n\tconstructor()\n\t{\n\t\tthis.__id__ = _nextid++;\n\t}\n\n\t// equality comparison of objects defaults to identity comparison\n\t[symbols.eq](other)\n\t{\n\t\treturn this === other;\n\t}\n\n\t// To overwrite equality comparison, you only have to overwrite `[symbols.eq]`,\n\t// `[symbols.ne]` will be synthesized from that\n\t[symbols.ne](other)\n\t{\n\t\treturn !this[symbols.eq](other);\n\t}\n\n\t// For other comparison operators, each method has to be implemented:\n\t// `<` calls `[symbols.lt]`, `<=` calls `[symbols.le]`, `>` calls `[symbols.gt]` and\n\t// `>=` calls `[symbols.ge]`\n\n\t[symbols.bool]()\n\t{\n\t\treturn true;\n\t}\n};\n\n\n///\n/// The signature of a callable (i.e. which arguments it takes, their default, etc.)\n///\nexport class Signature extends Proto\n{\n\tconstructor(...params)\n\t{\n\t\tsuper();\n\t\tthis.paramsByPos = [];\n\t\tthis.paramsByName = {};\n\t\tthis.countpos = 0;\n\t\tthis.countposdef = 0;\n\t\tthis.countposkw = 0;\n\t\tthis.countposkwdef = 0;\n\t\tthis.countkw = 0;\n\t\tthis.countkwdef = 0;\n\t\tthis.varpos = null;\n\t\tthis.varkw = null;\n\n\t\tlet state = 0;\n\t\tlet name = null;\n\t\tlet type = null;\n\t\tfor (let value of params)\n\t\t{\n\t\t\tif (state == 0)\n\t\t\t{\n\t\t\t\tname = value;\n\t\t\t\tstate = 1;\n\t\t\t}\n\t\t\telse if (state == 1)\n\t\t\t{\n\t\t\t\ttype = value;\n\t\t\t\tif (type.endsWith(\"=\"))\n\t\t\t\t\tstate = 2;\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.add(name, type, null);\n\t\t\t\t\tstate = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.add(name, type, value);\n\t\t\t\tstate = 0;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Add a parameter\n\tadd(name, type, defaultValue)\n\t{\n\t\tlet pos = this.paramsByPos.length;\n\t\tif (this.varpos !== null)\n\t\t\t++pos;\n\t\tif (this.varkw !== null)\n\t\t\t++pos;\n\t\tlet param = {name: name, pos: pos, type: type, defaultValue: defaultValue};\n\t\tswitch (type)\n\t\t{\n\t\t\tcase \"p\":\n\t\t\t\tif (this.countposdef > 0 || this.countposkwdef > 0 || this.countkwdef > 0)\n\t\t\t\t\tthrow new ParameterError(\"parameter without default after parameter with default\");\n\t\t\t\telse if (this.countposkw > 0 || this.countposkwdef > 0)\n\t\t\t\t\tthrow new ParameterError(\"positional-only parameter after positional/keyword parameter\");\n\t\t\t\telse if (this.countkw > 0 || this.countkwdef > 0)\n\t\t\t\t\tthrow new ParameterError(\"positional-only parameter after keyword-only parameter\");\n\t\t\t\telse if (this.varpos !== null)\n\t\t\t\t\tthrow new ParameterError(\"positional-only parameter after * parameter\");\n\t\t\t\telse if (this.varkw !== null)\n\t\t\t\t\tthrow new ParameterError(\"positional-only parameter after ** parameter\");\n\t\t\t\tthis.paramsByPos.push(param);\n\t\t\t\tthis.paramsByName[name] = param;\n\t\t\t\t++this.countpos;\n\t\t\t\tbreak;\n\t\t\tcase \"p=\":\n\t\t\t\tif (this.countposkw > 0 || this.countposkwdef > 0)\n\t\t\t\t\tthrow new ParameterError(\"positional-only parameter after positional/keyword parameter\");\n\t\t\t\telse if (this.countkw > 0 || this.countkwdef > 0)\n\t\t\t\t\tthrow new ParameterError(\"positional-only parameter after keyword-only parameter\");\n\t\t\t\telse if (this.varpos !== null)\n\t\t\t\t\tthrow new ParameterError(\"positional-only parameter after * parameter\");\n\t\t\t\telse if (this.varkw !== null)\n\t\t\t\t\tthrow new ParameterError(\"positional-only parameter after ** parameter\");\n\t\t\t\tthis.paramsByPos.push(param);\n\t\t\t\tthis.paramsByName[name] = param;\n\t\t\t\t++this.countposdef;\n\t\t\t\tbreak;\n\t\t\tcase \"pk\":\n\t\t\t\tif (this.countposdef > 0 || this.countposkwdef > 0 || this.countkwdef > 0)\n\t\t\t\t\tthrow new ParameterError(\"parameter without default after parameter with default\");\n\t\t\t\telse if (this.countkw > 0 || this.countkwdef > 0)\n\t\t\t\t\tthrow new ParameterError(\"positional/keyword parameter after keyword-only parameter\");\n\t\t\t\telse if (this.varpos !== null)\n\t\t\t\t\tthrow new ParameterError(\"positional/keyword parameter after * parameter\");\n\t\t\t\telse if (this.varkw !== null)\n\t\t\t\t\tthrow new ParameterError(\"positional/keyword parameter after ** parameter\");\n\t\t\t\tthis.paramsByPos.push(param);\n\t\t\t\tthis.paramsByName[name] = param;\n\t\t\t\t++this.countposkw;\n\t\t\t\tbreak;\n\t\t\tcase \"pk=\":\n\t\t\t\tif (this.countkw > 0 || this.countkwdef > 0)\n\t\t\t\t\tthrow new ParameterError(\"positional/keyword parameter after keyword-only parameter\");\n\t\t\t\telse if (this.varpos !== null)\n\t\t\t\t\tthrow new ParameterError(\"positional/keyword parameter after * parameter\");\n\t\t\t\telse if (this.varkw !== null)\n\t\t\t\t\tthrow new ParameterError(\"positional/keyword parameter after ** parameter\");\n\t\t\t\tthis.paramsByPos.push(param);\n\t\t\t\tthis.paramsByName[name] = param;\n\t\t\t\t++this.countposkwdef;\n\t\t\t\tbreak;\n\t\t\tcase \"k\":\n\t\t\t\tif (this.countposdef > 0 || this.countposkwdef > 0 || this.countkwdef > 0)\n\t\t\t\t\tthrow new ParameterError(\"parameter without default after parameter with default\");\n\t\t\t\telse if (this.varpos !== null)\n\t\t\t\t\tthrow new ParameterError(\"keyword-only parameter after * parameter\");\n\t\t\t\telse if (this.varkw !== null)\n\t\t\t\t\tthrow new ParameterError(\"keyword-only parameter after ** parameter\");\n\t\t\t\tthis.paramsByPos.push(param);\n\t\t\t\tthis.paramsByName[name] = param;\n\t\t\t\t++this.countkw;\n\t\t\t\tbreak;\n\t\t\tcase \"k=\":\n\t\t\t\tif (this.varpos !== null)\n\t\t\t\t\tthrow new ParameterError(\"keyword-only parameter after * parameter\");\n\t\t\t\telse if (this.varkw !== null)\n\t\t\t\t\tthrow new ParameterError(\"keyword-only parameter after ** parameter\");\n\t\t\t\tthis.paramsByPos.push(param);\n\t\t\t\tthis.paramsByName[name] = param;\n\t\t\t\t++this.countkwdef;\n\t\t\t\tbreak;\n\t\t\tcase \"*\":\n\t\t\t\tif (this.varpos !== null)\n\t\t\t\t\tthrow new ParameterError(\"* parameter specified twice!\");\n\t\t\t\telse if (this.varkw !== null)\n\t\t\t\t\tthrow new ParameterError(\"* parameter can come after ** parameter!\");\n\t\t\t\tthis.varpos = param;\n\t\t\t\tbreak;\n\t\t\tcase \"**\":\n\t\t\t\tif (this.varkw !== null)\n\t\t\t\t\tthrow new ParameterError(\"** parameter specified twice!\");\n\t\t\t\tthis.varkw = param;\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t// Create the argument array for calling a function with this signature with the arguments available from `args`\n\tbindArray(name, args, kwargs)\n\t{\n\t\tlet decname = name !== null ? name + \"() \" : \"\";\n\n\t\tlet varpos = this.varpos != null ? [] : null;\n\t\tlet varkw = this.varkw != null ? new Map() : null;\n\n\t\tlet count = this.countpos + this.countposdef + this.countposkw + this.countposkwdef + this.countkw + this.countkwdef;\n\t\tlet finalargs = Array(count).fill(null);\n\t\tlet haveValues = Array(count).fill(false);\n\n\t\t// Handle psotional arguments\n\t\tif (args !== null)\n\t\t{\n\t\t\tlet i = 0;\n\t\t\tfor (let arg of args)\n\t\t\t{\n\t\t\t\tlet param = this.paramsByPos[i];\n\t\t\t\tif (param !== undefined && param.type.indexOf(\"p\") >= 0)\n\t\t\t\t{\n\t\t\t\t\tfinalargs[i] = arg;\n\t\t\t\t\thaveValues[i] = true;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (varpos !== null)\n\t\t\t\t\t\tvarpos.push(arg);\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tlet count_nodef = this.countpos + this.countposkw;\n\t\t\t\t\t\tlet count_def = this.countposdef + this.countposkwdef;\n\t\t\t\t\t\tif (count_def == 0)\n\t\t\t\t\t\t\tthrow new ArgumentError(name + \"() takes exactly \" + count_nodef + \" positional argument\" + (count_nodef != 1 ? \"s\" : \"\") + \", \" + args.length + \" given\");\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tthrow new ArgumentError(name + \"() takes at most \" + (count_nodef + count_def) + \" positional argument\" + ((count_nodef + count_def) != 1 ? \"s\" : \"\") + \", \" + args.length + \" given\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t++i;\n\t\t\t}\n\t\t}\n\n\t\t// Handle keyword arguments\n\t\tif (kwargs !== null)\n\t\t{\n\t\t\tfor (let [argname, argvalue] of Object.entries(kwargs))\n\t\t\t{\n\t\t\t\tlet param = this.paramsByName[argname];\n\n\t\t\t\tif (param !== undefined && param.type.indexOf(\"k\") >= 0)\n\t\t\t\t{\n\t\t\t\t\tif (haveValues[param.pos])\n\t\t\t\t\t\tthrow new ArgumentError(\"Duplicate keyword argument \" + _repr(argname) + \" for \" + name + \"()\");\n\t\t\t\t\tfinalargs[param.pos] = argvalue;\n\t\t\t\t\thaveValues[param.pos] = true;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (varkw !== null)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (varkw.has(argname))\n\t\t\t\t\t\t\tthrow new ArgumentError(\"Duplicate keyword argument \" + _repr(argname) + \" for \" + name + \"()\");\n\t\t\t\t\t\tvarkw.set(argname, argvalue);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\tthrow new ArgumentError(name + \"() doesn't support an argument named \" + _repr(argname));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Fill in default values and check that every parameter has a value\n\t\tlet i = 0;\n\t\tfor (let param of this.paramsByPos)\n\t\t{\n\t\t\tif (!haveValues[i])\n\t\t\t{\n\t\t\t\tif (param.type.endsWith(\"=\"))\n\t\t\t\t{\n\t\t\t\t\tfinalargs[i] = param.defaultValue;\n\t\t\t\t\thaveValues[i] = true;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tthrow new ArgumentError(\"Required \" + name + \"() argument \" + param.name + \" (position \" + param.pos + \") missing\");\n\t\t\t}\n\t\t\t++i;\n\t\t}\n\n\t\t// Set variable parameters\n\t\tif (varpos !== null)\n\t\t\tfinalargs.push(varpos);\n\t\tif (varkw !== null)\n\t\t\tfinalargs.push(varkw);\n\n\t\treturn finalargs;\n\t}\n\n\t// Create the argument object for calling a function with this signature with the arguments available from `args`\n\tbindObject(name, args, kwargs)\n\t{\n\t\targs = this.bindArray(name, args, kwargs);\n\t\tlet argObject = {};\n\t\tlet i = 0;\n\t\tfor (let param of this.paramsByPos)\n\t\t\targObject[param.name] = args[i++];\n\t\tif (this.varpos !== null)\n\t\t\targObject[this.varpos.name] = args[i++];\n\t\tif (this.varkw !== null)\n\t\t\targObject[this.varkw.name] = args[i++];\n\t\treturn argObject;\n\t}\n\n\t[symbols.repr]()\n\t{\n\t\treturn \"<Signature \" + this.toString() + \">\";\n\t}\n\n\t[symbols.str]()\n\t{\n\t\treturn this.toString();\n\t}\n\n\t_appendParam(buffer, lasttype, param)\n\t{\n\t\tlet sep;\n\t\tif (lasttype === null)\n\t\t\tsep = [\"k\", \"k=\"].includes(param.type) ? \"*, \" : \"\";\n\t\telse if ([\"pk\", \"pk=\"].includes(lasttype))\n\t\t\tsep = [\"k\", \"k=\"].includes(param.type) ? \", *, \" : \", \";\n\t\telse if ([\"p\", \"p=\"].includes(lasttype))\n\t\t{\n\t\t\tif ([\"pk\", \"pk=\"].includes(param.type))\n\t\t\t\tsep = \", /, \";\n\t\t\telse if ([\"k\", \"k=\"].includes(param.type))\n\t\t\t\tsep = \", /, *, \";\n\t\t\telse\n\t\t\t\tsep = \", \";\n\t\t}\n\t\telse\n\t\t\tsep = \", \";\n\t\tlasttype = param.type;\n\t\tbuffer.push(sep);\n\t\tif ([\"*\", \"**\"].includes(param.type))\n\t\t\tbuffer.push(param.type);\n\t\tbuffer.push(param.name);\n\t\tif (param.type.endsWith(\"=\"))\n\t\t{\n\t\t\tbuffer.push(\"=\", _repr(param.defaultValue));\n\t\t}\n\t}\n\n\ttoString()\n\t{\n\t\tlet v = [];\n\t\tlet lasttype = null;\n\t\tfor (let param of this.paramsByPos)\n\t\t{\n\t\t\tthis._appendParam(v, lasttype, param);\n\t\t\tlasttype = param.type;\n\t\t}\n\t\tif (this.varpos !== null)\n\t\t{\n\t\t\tthis._appendParam(v, lasttype, this.varpos);\n\t\t\tlasttype = this.varpos.type;\n\t\t}\n\t\tif (this.varkw !== null)\n\t\t{\n\t\t\tthis._appendParam(v, lasttype, this.varkw);\n\t\t\tlasttype = this.varkw.type;\n\t\t}\n\t\treturn \"(\" + v.join(\"\") + \")\";\n\t}\n};\n\n\n///\n/// Base class for type objects of all types\n/// Must be defined first, as it's used by many classes\n///\nexport class Type\n{\n\tconstructor(module, name, doc)\n\t{\n\t\tthis.module = module;\n\t\tthis.name = name;\n\t\tthis.doc = doc;\n\t\tthis._constructor = constructor;\n\t}\n\n\t[symbols.getattr](attrname)\n\t{\n\t\tswitch (attrname)\n\t\t{\n\t\t\tcase \"__module__\":\n\t\t\t\treturn this.module;\n\t\t\tcase \"__name__\":\n\t\t\t\treturn this.name;\n\t\t\tcase \"__doc__\":\n\t\t\t\treturn this.doc;\n\t\t\tdefault:\n\t\t\t\tthrow new AttributeError(this, attrname);\n\t\t}\n\t}\n\n\t[symbols.repr]()\n\t{\n\t\treturn this.toString();\n\t}\n\n\ttoString()\n\t{\n\t\treturn \"<type \" + this.fullname() + \">\";\n\t}\n\n\tfullname()\n\t{\n\t\tif (this.module === null)\n\t\t\treturn this.name;\n\t\telse\n\t\t\treturn this.module + \".\" + this.name;\n\t}\n\n\tdir()\n\t{\n\t\treturn this.attrs;\n\t}\n\n\tgetattr(obj, attrname)\n\t{\n\t\tif (typeof(obj) === \"object\" && typeof(obj[symbols.getattr]) === \"function\")\n\t\t\treturn obj[symbols.getattr](attrname);\n\t\telse if (this.attrs.has(attrname))\n\t\t{\n\t\t\tlet attr = this[attrname];\n\t\t\tlet realattr = function realattr(...args) {\n\t\t\t\treturn attr.apply(this, [obj, ...args]);\n\t\t\t};\n\t\t\t// Unfortunately we can't set `realattr.name`;\n\t\t\trealattr._ul4_name = attr._ul4_name || attr.name;\n\t\t\trealattr._ul4_signature = attr._ul4_signature;\n\t\t\trealattr._ul4_needsobject = attr._ul4_needsobject;\n\t\t\trealattr._ul4_needscontext = attr._ul4_needscontext;\n\t\t\treturn realattr;\n\t\t}\n\t\telse\n\t\t\tthrow new AttributeError(obj, attrname);\n\t}\n\n\thasattr(obj, attrname)\n\t{\n\t\tif (typeof(obj) === \"object\" && typeof(obj[symbols.getattr]) === \"function\")\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tobj[symbols.getattr](attrname);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tcatch (exc)\n\t\t\t{\n\t\t\t\tif (exc instanceof AttributeError && exc.obj === object)\n\t\t\t\t\treturn false;\n\t\t\t\telse\n\t\t\t\t\tthrow exc;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\treturn this.attrs.has(attrname);\n\t}\n};\n\nType.prototype.attrs = new Set();\n\n\n///\n/// UL4ON\n///\n\nconst _registry = {};\n\n// Register the constructor function `f` under the name `name` with the UL4ON machinery\nexport function register(name, f)\n{\n\tf.prototype.ul4onname = name;\n\t_registry[name] = f;\n};\n\n// Return a string that contains the object `obj` in the UL4ON serialization format\nexport function dumps(obj, indent=null)\n{\n\tlet encoder = new Encoder(indent);\n\tlet output = [];\n\tencoder.dump(obj, output);\n\treturn output.join(\"\");\n};\n\n// Load an object from the string `dump`.\n// `dump` must contain the object in the UL4ON serialization format\n// `registry` may be null or a dictionary mapping type names to constructor functions\nexport function loads(dump, registry=null)\n{\n\tlet decoder = new Decoder(registry);\n\treturn decoder.loads(dump);\n};\n\nexport class EncoderType extends Type\n{\n\t[symbols.call](indent=null)\n\t{\n\t\treturn new Encoder(indent);\n\t}\n\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof Encoder;\n\t}\n};\n\nexpose(EncoderType.prototype, [\"indent\", \"pk=\", null], {name: \"Encoder\"});\n\nlet encodertype = new EncoderType(\"ul4on\", \"Encoder\", \"An UL4ON encoder\");\n\n// Helper class for encoding\nexport class Encoder\n{\n\t// Create a new Encoder object\n\tconstructor(indent=null)\n\t{\n\t\tthis.indent = indent;\n\t\tthis.output = null;\n\t\tthis._level = 0;\n\t\tthis._strings2index = {};\n\t\tthis._ids2index = {};\n\t\tthis._backrefs = 0;\n\t}\n\n\t[symbols.type]()\n\t{\n\t\treturn encodertype;\n\t}\n\n\t_line(line, ...args)\n\t{\n\t\tif (this.indent !== null)\n\t\t{\n\t\t\tfor (let i = 0; i < this._level; ++i)\n\t\t\t\tthis.output.push(this.indent);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (this.output.length)\n\t\t\t\tthis.output.push(\" \");\n\t\t}\n\t\tthis.output.push(line);\n\n\t\tif (args.length)\n\t\t{\n\t\t\tlet oldindent = this.indent;\n\t\t\tthis.indent = null;\n\t\t\tfor (let arg of args)\n\t\t\t\tthis.dump(arg);\n\t\t\tthis.indent = oldindent;\n\t\t}\n\n\t\tif (this.indent !== null)\n\t\t\tthis.output.push(\"\\n\");\n\t}\n\n\tdumps(obj)\n\t{\n\t\tlet output = [];\n\t\tthis.dump(obj, output);\n\t\treturn output.join(\"\");\n\t}\n\n\tdump(obj, output=null)\n\t{\n\t\tif (output !== null)\n\t\t{\n\t\t\tthis._level = 0;\n\t\t\tthis.output = output;\n\t\t}\n\t\tif (obj === null)\n\t\t\tthis._line(\"n\");\n\t\telse if (typeof(obj) === \"boolean\")\n\t\t\tthis._line(obj ? \"bT\" : \"bF\");\n\t\telse if (typeof(obj) === \"number\")\n\t\t{\n\t\t\tlet type = (Math.round(obj) == obj) ? \"i\" : \"f\";\n\t\t\tthis._line(type + obj);\n\t\t}\n\t\telse if (typeof(obj) === \"string\")\n\t\t{\n\t\t\tlet index = this._strings2index[obj];\n\t\t\tif (index !== undefined)\n\t\t\t{\n\t\t\t\tthis._line(\"^\" + index);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis._strings2index[obj] = this._backrefs++;\n\t\t\t\tlet dump = _str_repr(obj).replace(\"<\", \"\\\\x3c\");\n\t\t\t\tthis._line(\"S\" + dump);\n\t\t\t}\n\t\t}\n\t\telse if (_iscolor(obj))\n\t\t\tthis._line(\"c\", obj.r(), obj.g(), obj.b(), obj.a());\n\t\telse if (_isdate(obj))\n\t\t\tthis._line(\"x\", obj.year(), obj.month(), obj.day());\n\t\telse if (_isdatetime(obj))\n\t\t\tthis._line(\"z\", obj.getFullYear(), obj.getMonth()+1, obj.getDate(), obj.getHours(), obj.getMinutes(), obj.getSeconds(), obj.getMilliseconds() * 1000);\n\t\telse if (_istimedelta(obj))\n\t\t\tthis._line(\"t\", obj.days(), obj.seconds(), obj.microseconds());\n\t\telse if (_ismonthdelta(obj))\n\t\t\tthis._line(\"m\", obj.months());\n\t\telse if (obj instanceof slice)\n\t\t\tthis._line(\"r\", obj.start, obj.stop);\n\t\telse if (obj.ul4onname && obj.ul4ondump)\n\t\t{\n\t\t\tif (obj.__id__)\n\t\t\t{\n\t\t\t\tlet index = this._ids2index[obj.__id__];\n\t\t\t\tif (index !== undefined)\n\t\t\t\t{\n\t\t\t\t\tthis._line(\"^\" + index);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis._ids2index[obj.__id__] = this._backrefs++;\n\t\t\t}\n\t\t\tif (obj.ul4onid)\n\t\t\t\tthis._line(\"P\", obj.ul4onname, obj.ul4onid);\n\t\t\telse\n\t\t\t\tthis._line(\"O\", obj.ul4onname);\n\t\t\t++this._level;\n\t\t\tobj.ul4ondump(this);\n\t\t\t--this._level;\n\t\t\tthis._line(\")\");\n\t\t}\n\t\telse if (_islist(obj))\n\t\t{\n\t\t\tthis._line(\"l\");\n\t\t\t++this._level;\n\t\t\tfor (let item of obj)\n\t\t\t\tthis.dump(item);\n\t\t\t--this._level;\n\t\t\tthis._line(\"]\");\n\t\t}\n\t\telse if (_ismap(obj))\n\t\t{\n\t\t\tthis._line(\"e\");\n\t\t\t++this._level;\n\t\t\tfor (let [key, value] of obj)\n\t\t\t{\n\t\t\t\tthis.dump(key);\n\t\t\t\tthis.dump(value);\n\t\t\t}\n\t\t\t--this._level;\n\t\t\tthis._line(\"}\");\n\t\t}\n\t\telse if (_isdict(obj))\n\t\t{\n\t\t\tthis._line(\"d\");\n\t\t\t++this._level;\n\t\t\tfor (let key in obj)\n\t\t\t{\n\t\t\t\tthis.dump(key);\n\t\t\t\tthis.dump(obj[key]);\n\t\t\t}\n\t\t\t--this._level;\n\t\t\tthis._line(\"}\");\n\t\t}\n\t\telse if (_isset(obj))\n\t\t{\n\t\t\tthis._line(\"y\");\n\t\t\t++this._level;\n\t\t\tfor (let value of obj)\n\t\t\t\tthis.dump(value);\n\t\t\t--this._level;\n\t\t\tthis._line(\"}\");\n\t\t}\n\t\telse\n\t\t\tthrow new ValueError(\"can't create UL4ON dump of object \" + _repr(obj));\n\t\tif (output !== null)\n\t\t{\n\t\t\tthis.output = null;\n\t\t}\n\t}\n\n\t[symbols.getattr](attrname)\n\t{\n\t\tlet self = this;\n\t\tswitch (attrname)\n\t\t{\n\t\t\tcase \"dumps\":\n\t\t\t\tlet dumps = this.dumps.bind(this);\n\t\t\t\texpose(dumps, [\"obj\", \"pk\"]);\n\t\t\t\treturn dumps;\n\t\t\tdefault:\n\t\t\t\tthrow new ul4.AttributeError(this, attrname);\n\t\t}\n\t}\n};\n\nexport class DecoderType extends Type\n{\n\t[symbols.call]()\n\t{\n\t\treturn new Decoder();\n\t}\n\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof Decoder;\n\t}\n};\n\nexpose(DecoderType.prototype, [], {name: \"Decoder\"});\n\nlet decodertype = new DecoderType(\"ul4on\", \"Decoder\", \"An UL4ON decoder\");\n\n// Helper class for decoding\nexport class Decoder\n{\n\t// Creates a new decoder for reading an UL4ON dump\n\tconstructor(registry)\n\t{\n\t\tthis.input = null;\n\t\tthis.pos = 0;\n\t\tthis.backrefs = [];\n\t\tthis.registry = registry === undefined ? null : registry;\n\t\tthis.persistent_objects = {};\n\t\tthis.stack = null; // Use for informative error messages\n\t}\n\n\t[symbols.type]()\n\t{\n\t\treturn decodertype;\n\t}\n\n\t// Read a character from the buffer\n\treadchar()\n\t{\n\t\tif (this.pos >= this.input.length)\n\t\t\tthrow new ValueError(\"UL4 decoder at EOF\");\n\t\treturn this.input.charAt(this.pos++);\n\t}\n\n\t// Read a character from the buffer (return null on eof)\n\treadcharoreof()\n\t{\n\t\tif (this.pos >= this.input.length)\n\t\t\treturn null;\n\t\treturn this.input.charAt(this.pos++);\n\t}\n\n\t// Read next not-whitespace character from the buffer\n\treadblackchar()\n\t{\n\t\tlet re_white = /\\s/;\n\n\t\tfor (;;)\n\t\t{\n\t\t\tif (this.pos >= this.input.length)\n\t\t\t\tthrow new ValueError(\"UL4 decoder at EOF at position \" + this.pos + \" with path \" + this.stack.join(\"/\"));\n\t\t\tlet c = this.input.charAt(this.pos++);\n\t\t\tif (!c.match(re_white))\n\t\t\t\treturn c;\n\t\t}\n\t}\n\n\t// Read `size` characters from the buffer\n\tread(size)\n\t{\n\t\tif (this.pos+size > this.input.length)\n\t\t\tsize = this.input.length-this.pos;\n\t\tlet result = this.input.substring(this.pos, this.pos+size);\n\t\tthis.pos += size;\n\t\treturn result;\n\t}\n\n\t// \"unread\" one character\n\tbackup()\n\t{\n\t\t--this.pos;\n\t}\n\n\t// Read a number from the buffer\n\treadnumber()\n\t{\n\t\tlet re_digits = /[-+0123456789.eE]/, value = \"\";\n\t\tfor (;;)\n\t\t{\n\t\t\tlet c = this.readcharoreof();\n\t\t\tif (c !== null && c.match(re_digits))\n\t\t\t\tvalue += c;\n\t\t\telse\n\t\t\t{\n\t\t\t\tlet result = parseFloat(value);\n\t\t\t\tif (isNaN(result))\n\t\t\t\t\tthrow new ValueError(\"invalid number, got \" + _repr(\"value\") + \" at position \" + this.pos + \" with path \" + this.stack.join(\"/\"));\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}\n\t}\n\n\t_beginfakeloading()\n\t{\n\t\tlet oldpos = this.backrefs.length;\n\t\tthis.backrefs.push(null);\n\t\treturn oldpos;\n\t}\n\n\t_endfakeloading(oldpos, value)\n\t{\n\t\tthis.backrefs[oldpos] = value;\n\t}\n\n\t_readescape(escapechar, length)\n\t{\n\t\tlet chars = this.read(length);\n\t\tif (chars.length != length)\n\t\t\tthrow new ValueError(\"broken escape \" + _repr(\"\\\\\" + escapechar + chars) + \" at position \" + this.pos + \" with path \" + this.stack.join(\"/\"));\n\t\tlet codepoint = parseInt(chars, 16);\n\t\tif (isNaN(codepoint))\n\t\t\tthrow new ValueError(\"broken escape \" + _repr(\"\\\\\" + escapechar + chars) + \" at position \" + this.pos + \" with path \" + this.stack.join(\"/\"));\n\t\treturn String.fromCharCode(codepoint);\n\t}\n\n\treset()\n\t{\n\t\tthis.pos = 0;\n\t\tthis.stack = [];\n\t\tthis.backrefs = []\n\t}\n\n\tloads(dump)\n\t{\n\t\treturn this.load(dump);\n\t}\n\n\t// Load the next object from the buffer\n\tload(input=null)\n\t{\n\t\tif (input !== null)\n\t\t{\n\t\t\tthis.input = input;\n\t\t\tthis.pos = 0;\n\t\t\tthis.stack = [];\n\t\t}\n\t\tlet typecode = this.readblackchar();\n\t\tlet result;\n\t\tswitch (typecode)\n\t\t{\n\t\t\tcase \"^\":\n\t\t\t\treturn this.backrefs[this.readnumber()];\n\t\t\tcase \"n\":\n\t\t\tcase \"N\":\n\t\t\t\tif (typecode === \"N\")\n\t\t\t\t\tthis.backrefs.push(null);\n\t\t\t\tresult = null;\n\t\t\t\tbreak;\n\t\t\tcase \"b\":\n\t\t\tcase \"B\":\n\t\t\t\tresult = this.readchar();\n\t\t\t\tif (result === \"T\")\n\t\t\t\t\tresult = true;\n\t\t\t\telse if (result === \"F\")\n\t\t\t\t\tresult = false;\n\t\t\t\telse\n\t\t\t\t\tthrow new ValueError(\"wrong value for boolean, expected 'T' or 'F', got \" + _repr(result) + \" at position \" + this.pos + \" with path \" + this.stack.join(\"/\"));\n\t\t\t\tif (typecode === \"B\")\n\t\t\t\t\tthis.backrefs.push(result);\n\t\t\t\tbreak;\n\t\t\tcase \"i\":\n\t\t\tcase \"I\":\n\t\t\tcase \"f\":\n\t\t\tcase \"F\":\n\t\t\t\tresult = this.readnumber();\n\t\t\t\tif (typecode === \"I\" || typecode === \"F\")\n\t\t\t\t\tthis.backrefs.push(result);\n\t\t\t\tbreak;\n\t\t\tcase \"s\":\n\t\t\tcase \"S\":\n\t\t\t\tresult = [];\n\t\t\t\tlet delimiter = this.readblackchar();\n\t\t\t\tfor (;;)\n\t\t\t\t{\n\t\t\t\t\tlet c = this.readchar();\n\t\t\t\t\tif (c == delimiter)\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tif (c == \"\\\\\")\n\t\t\t\t\t{\n\t\t\t\t\t\tlet c2 = this.readchar();\n\t\t\t\t\t\tif (c2 == \"\\\\\")\n\t\t\t\t\t\t\tresult.push(\"\\\\\");\n\t\t\t\t\t\telse if (c2 == \"n\")\n\t\t\t\t\t\t\tresult.push(\"\\n\");\n\t\t\t\t\t\telse if (c2 == \"r\")\n\t\t\t\t\t\t\tresult.push(\"\\r\");\n\t\t\t\t\t\telse if (c2 == \"t\")\n\t\t\t\t\t\t\tresult.push(\"\\t\");\n\t\t\t\t\t\telse if (c2 == \"f\")\n\t\t\t\t\t\t\tresult.push(\"\\u000c\");\n\t\t\t\t\t\telse if (c2 == \"b\")\n\t\t\t\t\t\t\tresult.push(\"\\u0008\");\n\t\t\t\t\t\telse if (c2 == \"a\")\n\t\t\t\t\t\t\tresult.push(\"\\u0007\");\n\t\t\t\t\t\telse if (c2 == \"'\")\n\t\t\t\t\t\t\tresult.push(\"'\");\n\t\t\t\t\t\telse if (c2 == '\"')\n\t\t\t\t\t\t\tresult.push('\"');\n\t\t\t\t\t\telse if (c2 == \"x\")\n\t\t\t\t\t\t\tresult.push(this._readescape(\"x\", 2));\n\t\t\t\t\t\telse if (c2 == \"u\")\n\t\t\t\t\t\t\tresult.push(this._readescape(\"u\", 4));\n\t\t\t\t\t\telse if (c2 == \"U\")\n\t\t\t\t\t\t\tresult.push(this._readescape(\"U\", 8));\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tresult.push(\"\\\\\" + c2);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\tresult.push(c);\n\t\t\t\t}\n\t\t\t\tresult = result.join(\"\");\n\t\t\t\tif (typecode === \"S\")\n\t\t\t\t\tthis.backrefs.push(result);\n\t\t\t\tbreak;\n\t\t\tcase \"c\":\n\t\t\tcase \"C\":\n\t\t\t\tresult = new Color();\n\t\t\t\tif (typecode === \"C\")\n\t\t\t\t\tthis.backrefs.push(result);\n\t\t\t\tresult._r = this.load();\n\t\t\t\tresult._g = this.load();\n\t\t\t\tresult._b = this.load();\n\t\t\t\tresult._a = this.load();\n\t\t\t\tbreak;\n\t\t\tcase \"x\":\n\t\t\tcase \"X\":\n\t\t\t{\n\t\t\t\tlet year = this.load();\n\t\t\t\tlet month = this.load();\n\t\t\t\tlet day = this.load();\n\t\t\t\tresult = new Date_(year, month, day);\n\t\t\t\tif (typecode === \"X\")\n\t\t\t\t\tthis.backrefs.push(result);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase \"z\":\n\t\t\tcase \"Z\":\n\t\t\t\tresult = new Date();\n\t\t\t\tresult.setFullYear(this.load());\n\t\t\t\tresult.setDate(1);\n\t\t\t\tresult.setMonth(this.load() - 1);\n\t\t\t\tresult.setDate(this.load());\n\t\t\t\tresult.setHours(this.load());\n\t\t\t\tresult.setMinutes(this.load());\n\t\t\t\tresult.setSeconds(this.load());\n\t\t\t\tresult.setMilliseconds(this.load()/1000);\n\t\t\t\tif (typecode === \"Z\")\n\t\t\t\t\tthis.backrefs.push(result);\n\t\t\t\tbreak;\n\t\t\tcase \"t\":\n\t\t\tcase \"T\":\n\t\t\t\tresult = new TimeDelta();\n\t\t\t\tresult._days = this.load();\n\t\t\t\tresult._seconds = this.load();\n\t\t\t\tresult._microseconds = this.load();\n\t\t\t\tif (typecode === \"T\")\n\t\t\t\t\tthis.backrefs.push(result);\n\t\t\t\tbreak;\n\t\t\tcase \"r\":\n\t\t\tcase \"R\":\n\t\t\t\tresult = new slice();\n\t\t\t\tif (typecode === \"R\")\n\t\t\t\t\tthis.backrefs.push(result);\n\t\t\t\tresult.start = this.load();\n\t\t\t\tresult.stop = this.load();\n\t\t\t\tbreak;\n\t\t\tcase \"m\":\n\t\t\tcase \"M\":\n\t\t\t\tresult = new MonthDelta();\n\t\t\t\tif (typecode === \"M\")\n\t\t\t\t\tthis.backrefs.push(result);\n\t\t\t\tresult._months = this.load();\n\t\t\t\tbreak;\n\t\t\tcase \"l\":\n\t\t\tcase \"L\":\n\t\t\t\tthis.stack.push(\"list\");\n\t\t\t\tresult = [];\n\t\t\t\tif (typecode === \"L\")\n\t\t\t\t\tthis.backrefs.push(result);\n\t\t\t\tfor (;;)\n\t\t\t\t{\n\t\t\t\t\ttypecode = this.readblackchar();\n\t\t\t\t\tif (typecode === \"]\")\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tthis.backup();\n\t\t\t\t\tresult.push(this.load());\n\t\t\t\t}\n\t\t\t\tthis.stack.pop();\n\t\t\t\tbreak;\n\t\t\tcase \"d\":\n\t\t\tcase \"D\":\n\t\t\tcase \"e\":\n\t\t\tcase \"E\":\n\t\t\t\tresult = new Map();\n\t\t\t\tthis.stack.push(typecode === \"d\" || typecode === \"D\" ? \"dict\" : \"odict\");\n\t\t\t\tif (typecode === \"D\" || typecode === \"E\")\n\t\t\t\t\tthis.backrefs.push(result);\n\t\t\t\tfor (;;)\n\t\t\t\t{\n\t\t\t\t\ttypecode = this.readblackchar();\n\t\t\t\t\tif (typecode === \"}\")\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tthis.backup();\n\t\t\t\t\tlet key = this.load();\n\t\t\t\t\tlet value = this.load();\n\t\t\t\t\tresult.set(key, value);\n\t\t\t\t}\n\t\t\t\tthis.stack.pop();\n\t\t\t\tbreak;\n\t\t\tcase \"y\":\n\t\t\tcase \"Y\":\n\t\t\t\tthis.stack.push(\"set\");\n\t\t\t\tresult = new Set();\n\t\t\t\tif (typecode === \"Y\")\n\t\t\t\t\tthis.backrefs.push(result);\n\t\t\t\tfor (;;)\n\t\t\t\t{\n\t\t\t\t\ttypecode = this.readblackchar();\n\t\t\t\t\tif (typecode === \"}\")\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tthis.backup();\n\t\t\t\t\tresult.add(this.load());\n\t\t\t\t}\n\t\t\t\tthis.stack.pop();\n\t\t\t\tbreak;\n\t\t\tcase \"o\":\n\t\t\tcase \"O\":\n\t\t\t{\n\t\t\t\tlet oldpos;\n\t\t\t\tif (typecode === \"O\")\n\t\t\t\t\toldpos = this._beginfakeloading();\n\t\t\t\tlet name = this.load();\n\t\t\t\tthis.stack.push(name);\n\t\t\t\tlet constructor;\n\t\t\t\tif (this.registry !== null)\n\t\t\t\t{\n\t\t\t\t\tconstructor = this.registry[name];\n\t\t\t\t\tif (constructor === undefined)\n\t\t\t\t\t\tconstructor = _registry[name];\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tconstructor = _registry[name];\n\t\t\t\tif (constructor === undefined)\n\t\t\t\t\tthrow new ValueError(\"can't load object of type \" + _repr(name) + \" at position \" + this.pos + \" with path \" + this.stack.join(\"/\"));\n\t\t\t\tresult = new constructor();\n\t\t\t\tif (typecode === \"O\")\n\t\t\t\t\tthis._endfakeloading(oldpos, result);\n\t\t\t\tresult.ul4onload(this);\n\t\t\t\ttypecode = this.readblackchar();\n\t\t\t\tif (typecode !== \")\")\n\t\t\t\t\tthrow new ValueError(\"object terminator ')' for object of type '\" + name + \"' expected, got \" + _repr(typecode) + \" at position \" + this.pos + \" with path \" + this.stack.join(\"/\"));\n\t\t\t\tthis.stack.pop();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase \"p\":\n\t\t\tcase \"P\":\n\t\t\t{\n\t\t\t\tlet oldpos;\n\t\t\t\tif (typecode === \"P\")\n\t\t\t\t\toldpos = this._beginfakeloading();\n\t\t\t\tlet name = this.load();\n\t\t\t\tlet id = this.load();\n\t\t\t\tthis.stack.push(name);\n\t\t\t\tlet key = name + \"=\" + id;\n\t\t\t\tresult = this.persistent_objects[key];\n\t\t\t\tif (result === undefined)\n\t\t\t\t{\n\t\t\t\t\tlet constructor;\n\t\t\t\t\tif (this.registry !== null)\n\t\t\t\t\t{\n\t\t\t\t\t\tconstructor = this.registry[name];\n\t\t\t\t\t\tif (constructor === undefined)\n\t\t\t\t\t\t\tconstructor = _registry[name];\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\tconstructor = _registry[name];\n\t\t\t\t\tif (constructor === undefined)\n\t\t\t\t\t\tthrow new ValueError(\"can't load object of type \" + _repr(name) + \" with id \" + _repr(id) + \" at position \" + this.pos + \" with path \" + this.stack.join(\"/\"));\n\t\t\t\t\tresult = new constructor(id);\n\t\t\t\t\tthis.persistent_objects[key] = result;\n\t\t\t\t}\n\t\t\t\tif (typecode === \"P\")\n\t\t\t\t\tthis._endfakeloading(oldpos, result);\n\t\t\t\tresult.ul4onload(this);\n\t\t\t\ttypecode = this.readblackchar();\n\t\t\t\tif (typecode !== \")\")\n\t\t\t\t\tthrow new ValueError(\"object terminator ')' for object of type \" + _repr(name) + \" with id \" + _repr(id) + \" expected, got \" + _repr(typecode) + \" at position \" + this.pos + \" with path \" + this.stack.join(\"/\"));\n\t\t\t\tthis.stack.pop();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdefault:\n\t\t\t\tthrow new ValueError(\"unknown typecode \" + _repr(typecode) + \" at position \" + this.pos + \" with path \" + this.stack.join(\"/\"));\n\t\t}\n\t\tif (input !== null)\n\t\t{\n\t\t\tthis.input = null;\n\t\t\tthis.pos = 0;\n\t\t\tthis.stack = null;\n\t\t}\n\t\treturn result;\n\t}\n\n\t// Return an iterator for loading the content of a object\n\tloadcontent()\n\t{\n\t\tlet self = this;\n\t\treturn {\n\t\t\tnext: function()\n\t\t\t{\n\t\t\t\tlet typecode = self.readblackchar();\n\t\t\t\t// Always \"unread\" the typecode even at the end\n\t\t\t\t// so that at the end of a call to ul4onload()\n\t\t\t\t// the next input is the \"end of object\" marker\n\t\t\t\t// no matter whether ul4onload() uses loadcontent() or not.\n\t\t\t\tself.backup();\n\t\t\t\tif (typecode == \")\")\n\t\t\t\t\treturn {done: true};\n\t\t\t\telse\n\t\t\t\t\treturn {done: false, value: self.load()};\n\t\t\t}\n\t\t};\n\t}\n\n\t[symbols.getattr](attrname)\n\t{\n\t\tswitch (attrname)\n\t\t{\n\t\t\tcase \"loads\":\n\t\t\t\tlet loads = this.loads.bind(this);\n\t\t\t\texpose(loads, [\"dump\", \"p\"]);\n\t\t\t\treturn loads;\n\t\t\tdefault:\n\t\t\t\tthrow new ul4.AttributeError(this, attrname);\n\t\t}\n\t}\n};\n\n\n///\n/// UL4\n///\n\n// REs for parsing JSON\nconst _rvalidchars = /^[\\],:{}\\s]*$/;\nconst _rvalidescape = /\\\\(?:[\"\\\\\\/bfnrt]|u[0-9a-fA-F]{4})/g;\nconst _rvalidtokens = /\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g;\nconst _rvalidbraces = /(?:^|:|,)(?:\\s*\\[)+/g;\n\n/// Helper functions\n\n// Convert a map to an object\nexport function _map2object(obj)\n{\n\tif (_ismap(obj))\n\t{\n\t\tlet newobj = {};\n\t\tfor (let [key, value] of obj)\n\t\t{\n\t\t\tif (typeof(key) !== \"string\")\n\t\t\t\tthrow new TypeError(\"keys must be strings\");\n\t\t\tnewobj[key] = value;\n\t\t}\n\t\treturn newobj;\n\t}\n\treturn obj;\n};\n\n// Clip a number to the range [0;max]\nexport function _bound(value, upper)\n{\n\tif (value < 0)\n\t\treturn 0;\n\telse if (value > upper)\n\t\treturn upper;\n\telse\n\t\treturn value;\n};\n\n// Create a pretty stacktrace from an exception\nexport function _stacktrace(exc)\n{\n\tlet output = (exc instanceof Exception ? exc.constructor.name + \": \" : \"\") + exc.toString();\n\tif (exc.context)\n\t\toutput = _stacktrace(exc.context) + \"\\n\\n\" + output;\n\treturn output;\n};\n\n// Call a function `f` with UL4 argument handling\nexport function _internal_call(context, f, name, functioncontext, signature, needscontext, needsobject, args, kwargs)\n{\n\tlet finalargs;\n\tif (needsobject)\n\t{\n\t\tif (signature === null)\n\t\t{\n\t\t\tif (args.length)\n\t\t\t\tthrow new ArgumentError(_repr(f) + \" doesn't support positional arguments!\");\n\t\t\tfinalargs = [kwargs];\n\t\t}\n\t\telse\n\t\t\tfinalargs = [signature.bindObject(name, args, kwargs)];\n\t}\n\telse\n\t{\n\t\tif (signature === null)\n\t\t\tthrow new ArgumentError(_repr(f) + \" doesn't support positional arguments!\");\n\t\tfinalargs = signature.bindArray(name, args, kwargs);\n\t}\n\tif (needscontext)\n\t\tfinalargs.unshift(context);\n\treturn f.apply(functioncontext, finalargs);\n};\n\nexport function _function_is_callable(f)\n{\n\tif (!f || f._ul4_signature === undefined || f._ul4_needsobject === undefined || f._ul4_needscontext === undefined)\n\t\treturn false;\n\telse\n\t\treturn true;\n}\n\nexport function _object_is_callable(obj)\n{\n\tif (!_function_is_callable(obj) || typeof(obj[symbols.call]) !== \"function\")\n\t\treturn false;\n\telse\n\t\treturn true;\n}\n\nexport function _object_is_renderable(obj)\n{\n\tif (!_function_is_callable(obj) || typeof(obj[symbols.render]) !== \"function\")\n\t\treturn false;\n\telse\n\t\treturn true;\n}\n\nexport function _callfunction(context, f, args, kwargs)\n{\n\tif (!_function_is_callable(f))\n\t\tthrow new TypeError(_repr(f) + \" is not callable by UL4\");\n\tlet name = f._ul4_name || f.name;\n\treturn _internal_call(context, f, name, null, f._ul4_signature, f._ul4_needscontext, f._ul4_needsobject, args, kwargs);\n};\n\nexport function _callobject(context, obj, args, kwargs)\n{\n\tif (!_object_is_callable(obj))\n\t\tthrow new TypeError(_repr(obj) + \" is not callable by UL4\");\n\treturn _internal_call(context, obj[symbols.call], obj.name, obj, obj._ul4_signature, obj._ul4_needscontext, obj._ul4_needsobject, args, kwargs);\n};\n\nexport function _callrender(context, obj, args, kwargs)\n{\n\tif (!_object_is_renderable(obj))\n\t\tthrow new TypeError(_repr(obj) + \" is not renderable by UL4\");\n\treturn _internal_call(context, obj[symbols.render], obj.name, obj, obj._ul4_signature, obj._ul4_needscontext, obj._ul4_needsobject, args, kwargs);\n};\n\nexport function _call(context, f, args, kwargs)\n{\n\tif (typeof(f) === \"function\")\n\t\treturn _callfunction(context, f, args, kwargs);\n\telse if (f && typeof(f[symbols.call]) === \"function\")\n\t\treturn _callobject(context, f, args, kwargs);\n\telse\n\t\tthrow new TypeError(_type(f).fullname() + \" is not callable\");\n};\n\nexport function _unpackvar(lvalue, value)\n{\n\tif (!_islist(lvalue))\n\t\treturn [[lvalue, value]];\n\telse\n\t{\n\t\tlet newvalue = [];\n\t\tlet iter = _iter(value);\n\n\t\tfor (let i = 0;;++i)\n\t\t{\n\t\t\tlet item = iter.next();\n\n\t\t\tif (item.done)\n\t\t\t{\n\t\t\t\tif (i === lvalue.length)\n\t\t\t\t\tbreak;\n\t\t\t\telse\n\t\t\t\t\tthrow new ValueError(\"need \" + lvalue.length + \" value\" + (lvalue.length === 1 ? \"\" : \"s\") + \" to unpack, got \" + i);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (i < lvalue.length)\n\t\t\t\t\tnewvalue = newvalue.concat(_unpackvar(lvalue[i], item.value));\n\t\t\t\telse\n\t\t\t\t\tthrow new ValueError(\"too many values to unpack (expected \" + lvalue.length + \")\");\n\t\t\t}\n\t\t}\n\t\treturn newvalue;\n\t}\n};\n\nexport function _formatsource(out)\n{\n\tlet finalout = [];\n\tlet level = 0, needlf = false;\n\tfor (let part of out)\n\t{\n\t\tif (typeof(part) === \"number\")\n\t\t{\n\t\t\tlevel += part;\n\t\t\tneedlf = true;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (needlf)\n\t\t\t{\n\t\t\t\tfinalout.push(\"\\n\");\n\t\t\t\tfor (let j = 0; j < level; ++j)\n\t\t\t\t\tfinalout.push(\"\\t\");\n\t\t\t\tneedlf = false;\n\t\t\t}\n\t\t\tfinalout.push(part);\n\t\t}\n\t}\n\tif (needlf)\n\t\tfinalout.push(\"\\n\");\n\treturn finalout.join(\"\");\n};\n\n// Return a prefix of a location in source code\nfunction _sourceprefix(source, pos)\n{\n\tlet outerstartpos = pos;\n\tlet innerstartpos = outerstartpos;\n\n\tlet maxprefix = 40;\n\tlet preprefix = \"\\u2026\";\n\twhile (maxprefix > 0)\n\t{\n\t\t// We arrived at the start of the source code\n\t\tif (outerstartpos === 0)\n\t\t{\n\t\t\tpreprefix = \"\";\n\t\t\tbreak;\n\t\t}\n\t\t// We arrived at the start of the line\n\t\tif (source.charAt(outerstartpos-1) === \"\\n\")\n\t\t{\n\t\t\tpreprefix = \"\";\n\t\t\tbreak;\n\t\t}\n\t\t--maxprefix;\n\t\t--outerstartpos;\n\t}\n\treturn preprefix + source.substring(outerstartpos, innerstartpos);\n}\n\n// Return a suffix of a location in source code\nfunction _sourcesuffix(source, pos)\n{\n\tlet outerstoppos = pos;\n\tlet innerstoppos = outerstoppos;\n\n\tlet maxsuffix = 40;\n\tlet postsuffix = \"\\u2026\";\n\twhile (maxsuffix > 0)\n\t{\n\t\t// We arrived at the ed of the source code\n\t\tif (outerstoppos >= source.length)\n\t\t{\n\t\t\tpostsuffix = \"\";\n\t\t\tbreak;\n\t\t}\n\t\t// We arrived at the end of the line\n\t\tif (source.charAt(outerstoppos) === \"\\n\")\n\t\t{\n\t\t\tpostsuffix = \"\";\n\t\t\tbreak;\n\t\t}\n\t\t--maxsuffix;\n\t\t++outerstoppos;\n\t}\n\treturn source.substring(innerstoppos, outerstoppos) + postsuffix;\n}\n\n// Return line and column number of a location in source code\nfunction _lineColFromPos(source, pos)\n{\n\tlet line = 1\n\tlet col = 1;\n\tlet stop = pos;\n\tfor (let i = 0; i < stop; ++i)\n\t{\n\t\tif (source[i] === \"\\n\")\n\t\t{\n\t\t\t++line;\n\t\t\tcol = 1;\n\t\t}\n\t\telse\n\t\t\t++col;\n\t}\n\treturn [line, col];\n}\n\n// Compare `obj1` and `obj2` if they have the same value\nexport function _eq(obj1, obj2)\n{\n\tlet numbertypes = [\"boolean\", \"number\"];\n\n\tif (obj1 && typeof(obj1[symbols.eq]) === \"function\")\n\t\treturn obj1[symbols.eq](obj2);\n\telse if (obj2 && typeof(obj2[symbols.eq]) === \"function\")\n\t\treturn obj2[symbols.eq](obj1);\n\telse if (obj1 === null)\n\t\treturn obj2 === null;\n\telse if (numbertypes.indexOf(typeof(obj1)) != -1)\n\t{\n\t\tif (numbertypes.indexOf(typeof(obj2)) != -1)\n\t\t\treturn obj1 == obj2;\n\t\telse\n\t\t\treturn false;\n\t}\n\telse if (typeof(obj1) === \"string\")\n\t{\n\t\tif (typeof(obj2) === \"string\")\n\t\t\treturn obj1 == obj2;\n\t\telse\n\t\t\treturn false;\n\t}\n\telse if (_isdatetime(obj1))\n\t{\n\t\tif (_isdatetime(obj2))\n\t\t\treturn obj1.getTime() == obj2.getTime();\n\t\telse\n\t\t\treturn false;\n\t}\n\telse if (_islist(obj1))\n\t{\n\t\tif (_islist(obj2))\n\t\t{\n\t\t\t// Shortcut, if it's the same object\n\t\t\tif (obj1 === obj2)\n\t\t\t\treturn true;\n\t\t\tif (obj1.length != obj2.length)\n\t\t\t\treturn false;\n\t\t\tfor (let i = 0; i < obj1.length; ++i)\n\t\t\t{\n\t\t\t\tif (!_eq(obj1[i], obj2[i])) // This might lead to infinite recursion and a stackoverflow, but it does in all implementations\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\telse\n\t\t\treturn false;\n\t}\n\telse if (_isobject(obj1))\n\t{\n\t\tif (_isobject(obj2))\n\t\t{\n\t\t\t// Shortcut, if it's the same object\n\t\t\tif (obj1 === obj2)\n\t\t\t\treturn true;\n\t\t\t// Test that each attribute of `obj1` can also be found in `obj2` and has the same value\n\t\t\tfor (let key in obj1)\n\t\t\t{\n\t\t\t\tif (obj2.hasOwnProperty(key))\n\t\t\t\t{\n\t\t\t\t\tif (!_eq(obj1[key], obj2[key]))\n\t\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t\t// Test that each attribute of `obj2` is also in `obj1` (the value has been tested before)\n\t\t\tfor (let key in obj2)\n\t\t\t{\n\t\t\t\tif (!obj1.hasOwnProperty(key))\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\telse if (_ismap(obj2))\n\t\t{\n\t\t\t// Test that each attribute of `obj1` can also be found in `obj2` and has the same value\n\t\t\tfor (let key in obj1)\n\t\t\t{\n\t\t\t\tif (obj2.has(key))\n\t\t\t\t{\n\t\t\t\t\tif (!_eq(obj1[key], obj2.get(key)))\n\t\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t\t// Test that each attribute of `obj2` is also in `obj1` (the value has been tested before)\n\t\t\tfor (let [ket, value] of obj2)\n\t\t\t{\n\t\t\t\tif (!obj1.hasOwnProperty(key))\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\telse\n\t\t\treturn false;\n\t}\n\telse if (_ismap(obj1))\n\t{\n\t\tif (_isobject(obj2))\n\t\t{\n\t\t\t// Test that each attribute of `obj1` can also be found in `obj2` and has the same value\n\t\t\tfor (let [key, value] of obj1)\n\t\t\t{\n\t\t\t\tif (!obj2.hasOwnProperty(key))\n\t\t\t\t\treturn false;\n\t\t\t\telse if (!_eq(obj1.get(key), obj2[key]))\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t\t// Test that each attribute of `obj2` is also in `obj1` (the value has been tested before)\n\t\t\tfor (let key in obj2)\n\t\t\t{\n\t\t\t\tif (!obj1.has(key))\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\telse if (_ismap(obj2))\n\t\t{\n\t\t\t// Shortcut, if it's the same object\n\t\t\tif (obj1 === obj2)\n\t\t\t\treturn true;\n\t\t\tif (obj1.size != obj2.size)\n\t\t\t\treturn false;\n\t\t\tlet result = true;\n\t\t\t// Test that each attribute of `obj1` can also be found in `obj2` and has the same value\n\t\t\tfor (let [key, value] of obj1)\n\t\t\t{\n\t\t\t\tif (!obj2.has(key))\n\t\t\t\t\tresult = false;\n\t\t\t\telse if (!_eq(obj1.get(key), obj2.get(key)))\n\t\t\t\t\tresult = false;\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\t\telse\n\t\t\treturn false;\n\t}\n\telse if (_isset(obj1))\n\t{\n\t\tif (_isset(obj2))\n\t\t{\n\t\t\t// Shortcut, if it's the same object\n\t\t\tif (obj1 === obj2)\n\t\t\t\treturn true;\n\t\t\tif (obj1.size != obj2.size)\n\t\t\t\treturn false;\n\t\t\tlet result = true;\n\t\t\tfor (let value of obj1)\n\t\t\t{\n\t\t\t\tif (!obj2.has(value))\n\t\t\t\t\tresult = false;\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\t\telse\n\t\t\treturn false;\n\t}\n\telse\n\t\treturn obj1 === obj2;\n};\n\n// Compare `obj1` and `obj2` if they don't have the same value\nexport function _ne(obj1, obj2)\n{\n\tif (obj1 && typeof(obj1[symbols.ne]) === \"function\")\n\t\treturn obj1[symbols.ne](obj2);\n\telse if (obj2 && typeof(obj2[symbols.ne]) === \"function\")\n\t\treturn obj2[symbols.ne](obj1);\n\telse\n\t\treturn !_eq(obj1, obj2);\n};\n\nexport function _unorderable(operator, obj1, obj2)\n{\n\tthrow new TypeError(\"unorderable types: \" + _type(obj1).fullname() + \" \" + operator + \" \" + _type(obj2).fullname());\n};\n\n// Return:\n// -1 when `obj1 < obj2`,\n//  0 when `obj1 == obj2`,\n//  1 when `obj1 > obj2`,\n//  null when `obj1` and `obj2` are comparable, but neither of the previous cases holds (only for sets)\n// raise TypeError if objects are uncomparable\n// This the purpose of `_cmp` is to support implementation of <, <=, > and >=\n// and dicts/maps are not comparable with the operator `_cmp` does not support dicts/maps\n\nexport function _cmp(operator, obj1, obj2)\n{\n\tlet numbertypes = [\"boolean\", \"number\"];\n\n\tif (numbertypes.indexOf(typeof(obj1)) != -1)\n\t{\n\t\tif (numbertypes.indexOf(typeof(obj2)) != -1)\n\t\t\treturn (obj1 > obj2) - (obj1 < obj2);\n\t}\n\telse if (typeof(obj1) === \"string\")\n\t{\n\t\tif (typeof(obj2) === \"string\")\n\t\t\treturn (obj1 > obj2) - (obj1 < obj2);\n\t}\n\telse if (_isdatetime(obj1))\n\t{\n\t\tif (_isdatetime(obj2))\n\t\t{\n\t\t\tlet v1 = obj1.getTime(), v2 = obj2.getTime();\n\t\t\treturn (v1 > v2) - (v1 < v2);\n\t\t}\n\t}\n\telse if (_islist(obj1))\n\t{\n\t\tif (_islist(obj2))\n\t\t{\n\t\t\tif (obj1 === obj2)\n\t\t\t\treturn 0;\n\t\t\tfor (let i = 0; i < obj1.length; ++i)\n\t\t\t{\n\t\t\t\tif (i >= obj2.length)\n\t\t\t\t\treturn 1;\n\t\t\t\tlet res = _cmp(operator, obj1[i], obj2[i]);\n\t\t\t\tif (res)\n\t\t\t\t\treturn res;\n\t\t\t}\n\t\t\treturn obj2.length > obj1.length ? -1 : 0;\n\t\t}\n\t}\n\telse if (_isset(obj1))\n\t{\n\t\tif (_isset(obj2))\n\t\t{\n\t\t\tlet in1only = false;\n\t\t\tlet in2only = false;\n\n\t\t\tfor (let iter = _iter(obj1);;)\n\t\t\t{\n\t\t\t\tlet item = iter.next();\n\t\t\t\tif (item.done)\n\t\t\t\t\tbreak;\n\t\t\t\tif (!obj2.has(item.value))\n\t\t\t\t{\n\t\t\t\t\tin1only = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (let iter = _iter(obj2);;)\n\t\t\t{\n\t\t\t\tlet item = iter.next();\n\t\t\t\tif (item.done)\n\t\t\t\t\tbreak;\n\t\t\t\tif (!obj1.has(item.value))\n\t\t\t\t{\n\t\t\t\t\tin2only = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (in1only)\n\t\t\t{\n\t\t\t\tif (in2only)\n\t\t\t\t\treturn null;\n\t\t\t\telse\n\t\t\t\t\treturn 1;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (in2only)\n\t\t\t\t\treturn -1;\n\t\t\t\telse\n\t\t\t\t\treturn 0;\n\t\t\t}\n\t\t}\n\t}\n\treturn _unorderable(operator, obj1, obj2);\n};\n\n// Return whether `obj1 < obj2`\nexport function _lt(obj1, obj2)\n{\n\tlet numbertypes = [\"boolean\", \"number\"];\n\n\tif (obj1 && typeof(obj1[symbols.lt]) === \"function\")\n\t\treturn obj1[symbols.lt](obj2);\n\telse if (numbertypes.indexOf(typeof(obj1)) != -1)\n\t{\n\t\tif (numbertypes.indexOf(typeof(obj2)) != -1)\n\t\t\treturn obj1 < obj2;\n\t}\n\telse if (typeof(obj1) === \"string\")\n\t{\n\t\tif (typeof(obj2) === \"string\")\n\t\t\treturn obj1 < obj2;\n\t}\n\telse if (_isdatetime(obj1))\n\t{\n\t\tif (_isdatetime(obj2))\n\t\t\treturn obj1.getTime() < obj2.getTime();\n\t}\n\telse if (_islist(obj1))\n\t{\n\t\tif (_islist(obj2))\n\t\t{\n\t\t\tif (obj1 === obj2)\n\t\t\t\treturn false;\n\t\t\tfor (let i = 0; i < obj1.length; ++i)\n\t\t\t{\n\t\t\t\tif (i >= obj2.length)\n\t\t\t\t\treturn false;\n\t\t\t\tlet eq = _eq(obj1[i], obj2[i]);\n\t\t\t\tif (!eq)\n\t\t\t\t\treturn _lt(obj1[i], obj2[i]);\n\t\t\t}\n\t\t\treturn obj1.length < obj2.length;\n\t\t}\n\t}\n\t// FIXME: Set comparison\n\telse if (_isset(obj1))\n\t{\n\t\tif (_isset(obj2))\n\t\t{\n\t\t\tfor (let key in obj1)\n\t\t\t{\n\t\t\t\tif (!obj2.has(obj1[key]))\n\t\t\t\t\tin1only = true;\n\t\t\t}\n\t\t\tfor (let key in obj2)\n\t\t\t{\n\t\t\t\tif (!obj1.has(obj2[key]))\n\t\t\t\t\tin2only = true;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\t_unorderable(operator, obj1, obj2);\n\n\t\tif (in1only)\n\t\t{\n\t\t\tif (in2only)\n\t\t\t\treturn null;\n\t\t\telse\n\t\t\t\treturn 1;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (in2only)\n\t\t\t\treturn -1;\n\t\t\telse\n\t\t\t\treturn 0;\n\t\t}\n\t}\n\t_unorderable(\"<\", obj1, obj2);\n};\n\n// Return whether `obj1 <= obj2`\nexport function _le(obj1, obj2)\n{\n\tlet numbertypes = [\"boolean\", \"number\"];\n\n\tif (obj1 && typeof(obj1[symbols.le]) === \"function\")\n\t\treturn obj1[symbols.le](obj2);\n\tif (numbertypes.indexOf(typeof(obj1)) != -1)\n\t{\n\t\tif (numbertypes.indexOf(typeof(obj2)) != -1)\n\t\t\treturn obj1 <= obj2;\n\t}\n\telse if (typeof(obj1) === \"string\")\n\t{\n\t\tif (typeof(obj2) === \"string\")\n\t\t\treturn obj1 <= obj2;\n\t}\n\telse if (_isdatetime(obj1))\n\t{\n\t\tif (_isdatetime(obj2))\n\t\t\treturn obj1.getTime() <= obj2.getTime();\n\t}\n\telse if (_islist(obj1))\n\t{\n\t\tif (_islist(obj2))\n\t\t{\n\t\t\tif (obj1 === obj2)\n\t\t\t\treturn true;\n\t\t\tfor (let i = 0; i < obj1.length; ++i)\n\t\t\t{\n\t\t\t\tif (i >= obj2.length)\n\t\t\t\t\treturn false;\n\t\t\t\tlet eq = _eq(obj1[i], obj2[i]);\n\t\t\t\tif (!eq)\n\t\t\t\t\treturn _lt(obj1[i], obj2[i]);\n\t\t\t}\n\t\t\treturn obj1.length <= obj2.length;\n\t\t}\n\t}\n\t// FIXME: Set comparison\n\telse if (_isset(obj1))\n\t{\n\t\tlet in1only = false;\n\t\tlet in2only = false;\n\n\t\tif (_isset(obj2))\n\t\t{\n\t\t\tif (_isset(obj2))\n\t\t\t{\n\t\t\t\tfor (let value of obj1)\n\t\t\t\t{\n\t\t\t\t\tif (!obj2.has(value))\n\t\t\t\t\t\tin1only = true;\n\t\t\t\t}\n\t\t\t\tfor (let value of obj2)\n\t\t\t\t{\n\t\t\t\t\tif (!obj1.has(value))\n\t\t\t\t\t\tin2only = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t\t_unorderable(operator, obj1, obj2);\n\t\t}\n\t\telse\n\t\t\t_unorderable(operator, obj1, obj2);\n\n\t\tif (in1only)\n\t\t{\n\t\t\tif (in2only)\n\t\t\t\treturn null;\n\t\t\telse\n\t\t\t\treturn 1;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (in2only)\n\t\t\t\treturn -1;\n\t\t\telse\n\t\t\t\treturn 0;\n\t\t}\n\t}\n\t_unorderable(\"<=\", obj1, obj2);\n};\n\n// Return whether `obj1 > obj2`\nexport function _gt(obj1, obj2)\n{\n\tlet numbertypes = [\"boolean\", \"number\"];\n\n\tif (obj1 && typeof(obj1[symbols.gt]) === \"function\")\n\t\treturn obj1[symbols.gt](obj2);\n\tif (numbertypes.indexOf(typeof(obj1)) != -1)\n\t{\n\t\tif (numbertypes.indexOf(typeof(obj2)) != -1)\n\t\t\treturn obj1 > obj2;\n\t}\n\telse if (typeof(obj1) === \"string\")\n\t{\n\t\tif (typeof(obj2) === \"string\")\n\t\t\treturn obj1 > obj2;\n\t}\n\telse if (_isdatetime(obj1))\n\t{\n\t\tif (_isdatetime(obj2))\n\t\t\treturn obj1.getTime() > obj2.getTime();\n\t}\n\telse if (_islist(obj1))\n\t{\n\t\tif (_islist(obj2))\n\t\t{\n\t\t\tif (obj1 === obj2)\n\t\t\t\treturn false;\n\t\t\tfor (let i = 0; i < obj1.length; ++i)\n\t\t\t{\n\t\t\t\tif (i >= obj2.length)\n\t\t\t\t\treturn true;\n\t\t\t\tlet eq = _eq(obj1[i], obj2[i]);\n\t\t\t\tif (!eq)\n\t\t\t\t\treturn _gt(obj1[i], obj2[i]);\n\t\t\t}\n\t\t\treturn obj1.length > obj2.length;\n\t\t}\n\t}\n\t// FIXME: Set comparison\n\telse if (_isset(obj1))\n\t{\n\t\tlet in1only = false;\n\t\tlet in2only = false;\n\n\t\tif (_isset(obj2))\n\t\t{\n\t\t\tif (_isset(obj2))\n\t\t\t{\n\t\t\t\tfor (let value of obj1)\n\t\t\t\t{\n\t\t\t\t\tif (!obj2.has(value))\n\t\t\t\t\t\tin1only = true;\n\t\t\t\t}\n\t\t\t\tfor (let value of obj2)\n\t\t\t\t{\n\t\t\t\t\tif (!obj1.has(value))\n\t\t\t\t\t\tin2only = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t\t_unorderable(operator, obj1, obj2);\n\t\t}\n\t\telse\n\t\t\t_unorderable(operator, obj1, obj2);\n\n\t\tif (in1only)\n\t\t{\n\t\t\tif (in2only)\n\t\t\t\treturn null;\n\t\t\telse\n\t\t\t\treturn 1;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (in2only)\n\t\t\t\treturn -1;\n\t\t\telse\n\t\t\t\treturn 0;\n\t\t}\n\t}\n\t_unorderable(\">\", obj1, obj2);\n};\n\n// Return whether `obj1 >= obj2`\nexport function _ge(obj1, obj2)\n{\n\tlet numbertypes = [\"boolean\", \"number\"];\n\n\tif (obj1 && typeof(obj1[symbols.ge]) === \"function\")\n\t\treturn obj1[symbols.ge](obj2);\n\telse if (numbertypes.indexOf(typeof(obj1)) != -1)\n\t{\n\t\tif (numbertypes.indexOf(typeof(obj2)) != -1)\n\t\t\treturn obj1 >= obj2;\n\t}\n\telse if (typeof(obj1) === \"string\")\n\t{\n\t\tif (typeof(obj2) === \"string\")\n\t\t\treturn obj1 >= obj2;\n\t}\n\telse if (_isdatetime(obj1))\n\t{\n\t\tif (_isdatetime(obj2))\n\t\t\treturn obj1.getTime() >= obj2.getTime();\n\t}\n\telse if (_islist(obj1))\n\t{\n\t\tif (_islist(obj2))\n\t\t{\n\t\t\tif (obj1 === obj2)\n\t\t\t\treturn true;\n\t\t\tfor (let i = 0; i < obj1.length; ++i)\n\t\t\t{\n\t\t\t\tif (i >= obj2.length)\n\t\t\t\t\treturn true;\n\t\t\t\tlet eq = _eq(obj1[i], obj2[i]);\n\t\t\t\tif (!eq)\n\t\t\t\t\treturn _gt(obj1[i], obj2[i]);\n\t\t\t}\n\t\t\treturn obj1.length >= obj2.length;\n\t\t}\n\t}\n\t// FIXME: Set comparison\n\telse if (_isset(obj1))\n\t{\n\t\tlet in1only = false;\n\t\tlet in2only = false;\n\n\t\tif (_isset(obj2))\n\t\t{\n\t\t\tif (_isset(obj2))\n\t\t\t{\n\t\t\t\tfor (let value of obj1)\n\t\t\t\t{\n\t\t\t\t\tif (!obj2.has(value))\n\t\t\t\t\t\tin1only = true;\n\t\t\t\t}\n\t\t\t\tfor (let value of obj2)\n\t\t\t\t{\n\t\t\t\t\tif (!obj1.has(value))\n\t\t\t\t\t\tin2only = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t\t_unorderable(operator, obj1, obj2);\n\t\t}\n\t\telse\n\t\t\t_unorderable(operator, obj1, obj2);\n\n\t\tif (in1only)\n\t\t{\n\t\t\tif (in2only)\n\t\t\t\treturn null;\n\t\t\telse\n\t\t\t\treturn 1;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (in2only)\n\t\t\t\treturn -1;\n\t\t\telse\n\t\t\t\treturn 0;\n\t\t}\n\t}\n\t_unorderable(\">=\", obj1, obj2);\n};\n\n// Return an iterator for `obj`\nexport function _iter(obj)\n{\n\tif (typeof(obj) === \"string\" || _islist(obj))\n\t{\n\t\treturn {\n\t\t\tindex: 0,\n\t\t\tnext: function()\n\t\t\t{\n\t\t\t\tif (this.index < obj.length)\n\t\t\t\t\treturn {value: obj[this.index++], done: false};\n\t\t\t\telse\n\t\t\t\t\treturn {done: true};\n\t\t\t}\n\t\t};\n\t}\n\telse if (_isiter(obj))\n\t\treturn obj;\n\telse if (_ismap(obj))\n\t{\n\t\tlet keys = [];\n\t\tfor (let [key, value] of obj)\n\t\t\tkeys.push(key);\n\t\treturn {\n\t\t\tindex: 0,\n\t\t\tnext: function()\n\t\t\t{\n\t\t\t\tif (this.index >= keys.length)\n\t\t\t\t\treturn {done: true};\n\t\t\t\treturn {value: keys[this.index++], done: false};\n\t\t\t}\n\t\t};\n\t}\n\telse if (_isset(obj))\n\t{\n\t\tlet values = [];\n\t\tfor (let item of obj)\n\t\t\tvalues.push(item);\n\t\treturn {\n\t\t\tindex: 0,\n\t\t\tnext: function()\n\t\t\t{\n\t\t\t\tif (this.index >= values.length)\n\t\t\t\t\treturn {done: true};\n\t\t\t\treturn {value: values[this.index++], done: false};\n\t\t\t}\n\t\t};\n\t}\n\telse if (_isobject(obj))\n\t{\n\t\tlet keys = [];\n\t\tfor (let key in obj)\n\t\t\tkeys.push(key);\n\t\treturn {\n\t\t\tindex: 0,\n\t\t\tnext: function()\n\t\t\t{\n\t\t\t\tif (this.index >= keys.length)\n\t\t\t\t\treturn {done: true};\n\t\t\t\treturn {value: keys[this.index++], done: false};\n\t\t\t}\n\t\t};\n\t}\n\t// Check for an iterator implementation last, as otherwise, we'd get an item iterator for maps\n\telse if (obj !== null && typeof(obj[Symbol.iterator]) === \"function\")\n\t\treturn obj[Symbol.iterator]();\n\tthrow new TypeError(_type(obj).fullname() + \" object is not iterable\");\n};\n\nfunction _str_repr(str, ascii)\n{\n\tlet result = \"\";\n\tlet squote = false, dquote = false;\n\n\tfor (let c of str)\n\t{\n\t\tif (c == '\"')\n\t\t{\n\t\t\tdquote = true;\n\t\t\tif (squote)\n\t\t\t\tbreak;\n\t\t}\n\t\telse if (c == \"'\")\n\t\t{\n\t\t\tsquote = true;\n\t\t\tif (dquote)\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t// Prefer single quotes: Only use double quotes if the string contains single quotes, but no double quotes\n\tlet quote = (squote && !dquote) ? '\"' : \"'\";\n\n\tfor (let c of str)\n\t{\n\t\tswitch (c)\n\t\t{\n\t\t\tcase '\"':\n\t\t\t\tresult += (quote == c) ? '\\\\\"' : c;\n\t\t\t\tbreak;\n\t\t\tcase \"'\":\n\t\t\t\tresult += (quote == c) ? \"\\\\'\" : c;\n\t\t\t\tbreak;\n\t\t\tcase \"\\\\\":\n\t\t\t\tresult += \"\\\\\\\\\";\n\t\t\t\tbreak;\n\t\t\tcase \"\\t\":\n\t\t\t\tresult += \"\\\\t\";\n\t\t\t\tbreak;\n\t\t\tcase \"\\n\":\n\t\t\t\tresult += \"\\\\n\";\n\t\t\t\tbreak;\n\t\t\tcase \"\\r\":\n\t\t\t\tresult += \"\\\\r\";\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tlet code = c.charCodeAt(0);\n\t\t\t\tlet escape;\n\t\t\t\tif (code < 32)\n\t\t\t\t\tescape = 2;\n\t\t\t\telse if (code < 0x7f)\n\t\t\t\t\tescape = 0;\n\t\t\t\telse if (!ascii && !/[\\u007f-\\u00a0\\u00ad\\u0378-\\u0379\\u0380-\\u0383\\u038b\\u038d\\u03a2\\u0530\\u0557-\\u0558\\u0560\\u0588\\u058b-\\u058c\\u0590\\u05c8-\\u05cf\\u05eb-\\u05ef\\u05f5-\\u0605\\u061c-\\u061d\\u06dd\\u070e-\\u070f\\u074b-\\u074c\\u07b2-\\u07bf\\u07fb-\\u07ff\\u082e-\\u082f\\u083f\\u085c-\\u085d\\u085f-\\u089f\\u08b5-\\u08e2\\u0984\\u098d-\\u098e\\u0991-\\u0992\\u09a9\\u09b1\\u09b3-\\u09b5\\u09ba-\\u09bb\\u09c5-\\u09c6\\u09c9-\\u09ca\\u09cf-\\u09d6\\u09d8-\\u09db\\u09de\\u09e4-\\u09e5\\u09fc-\\u0a00\\u0a04\\u0a0b-\\u0a0e\\u0a11-\\u0a12\\u0a29\\u0a31\\u0a34\\u0a37\\u0a3a-\\u0a3b\\u0a3d\\u0a43-\\u0a46\\u0a49-\\u0a4a\\u0a4e-\\u0a50\\u0a52-\\u0a58\\u0a5d\\u0a5f-\\u0a65\\u0a76-\\u0a80\\u0a84\\u0a8e\\u0a92\\u0aa9\\u0ab1\\u0ab4\\u0aba-\\u0abb\\u0ac6\\u0aca\\u0ace-\\u0acf\\u0ad1-\\u0adf\\u0ae4-\\u0ae5\\u0af2-\\u0af8\\u0afa-\\u0b00\\u0b04\\u0b0d-\\u0b0e\\u0b11-\\u0b12\\u0b29\\u0b31\\u0b34\\u0b3a-\\u0b3b\\u0b45-\\u0b46\\u0b49-\\u0b4a\\u0b4e-\\u0b55\\u0b58-\\u0b5b\\u0b5e\\u0b64-\\u0b65\\u0b78-\\u0b81\\u0b84\\u0b8b-\\u0b8d\\u0b91\\u0b96-\\u0b98\\u0b9b\\u0b9d\\u0ba0-\\u0ba2\\u0ba5-\\u0ba7\\u0bab-\\u0bad\\u0bba-\\u0bbd\\u0bc3-\\u0bc5\\u0bc9\\u0bce-\\u0bcf\\u0bd1-\\u0bd6\\u0bd8-\\u0be5\\u0bfb-\\u0bff\\u0c04\\u0c0d\\u0c11\\u0c29\\u0c3a-\\u0c3c\\u0c45\\u0c49\\u0c4e-\\u0c54\\u0c57\\u0c5b-\\u0c5f\\u0c64-\\u0c65\\u0c70-\\u0c77\\u0c80\\u0c84\\u0c8d\\u0c91\\u0ca9\\u0cb4\\u0cba-\\u0cbb\\u0cc5\\u0cc9\\u0cce-\\u0cd4\\u0cd7-\\u0cdd\\u0cdf\\u0ce4-\\u0ce5\\u0cf0\\u0cf3-\\u0d00\\u0d04\\u0d0d\\u0d11\\u0d3b-\\u0d3c\\u0d45\\u0d49\\u0d4f-\\u0d56\\u0d58-\\u0d5e\\u0d64-\\u0d65\\u0d76-\\u0d78\\u0d80-\\u0d81\\u0d84\\u0d97-\\u0d99\\u0db2\\u0dbc\\u0dbe-\\u0dbf\\u0dc7-\\u0dc9\\u0dcb-\\u0dce\\u0dd5\\u0dd7\\u0de0-\\u0de5\\u0df0-\\u0df1\\u0df5-\\u0e00\\u0e3b-\\u0e3e\\u0e5c-\\u0e80\\u0e83\\u0e85-\\u0e86\\u0e89\\u0e8b-\\u0e8c\\u0e8e-\\u0e93\\u0e98\\u0ea0\\u0ea4\\u0ea6\\u0ea8-\\u0ea9\\u0eac\\u0eba\\u0ebe-\\u0ebf\\u0ec5\\u0ec7\\u0ece-\\u0ecf\\u0eda-\\u0edb\\u0ee0-\\u0eff\\u0f48\\u0f6d-\\u0f70\\u0f98\\u0fbd\\u0fcd\\u0fdb-\\u0fff\\u10c6\\u10c8-\\u10cc\\u10ce-\\u10cf\\u1249\\u124e-\\u124f\\u1257\\u1259\\u125e-\\u125f\\u1289\\u128e-\\u128f\\u12b1\\u12b6-\\u12b7\\u12bf\\u12c1\\u12c6-\\u12c7\\u12d7\\u1311\\u1316-\\u1317\\u135b-\\u135c\\u137d-\\u137f\\u139a-\\u139f\\u13f6-\\u13f7\\u13fe-\\u13ff\\u1680\\u169d-\\u169f\\u16f9-\\u16ff\\u170d\\u1715-\\u171f\\u1737-\\u173f\\u1754-\\u175f\\u176d\\u1771\\u1774-\\u177f\\u17de-\\u17df\\u17ea-\\u17ef\\u17fa-\\u17ff\\u180e-\\u180f\\u181a-\\u181f\\u1878-\\u187f\\u18ab-\\u18af\\u18f6-\\u18ff\\u191f\\u192c-\\u192f\\u193c-\\u193f\\u1941-\\u1943\\u196e-\\u196f\\u1975-\\u197f\\u19ac-\\u19af\\u19ca-\\u19cf\\u19db-\\u19dd\\u1a1c-\\u1a1d\\u1a5f\\u1a7d-\\u1a7e\\u1a8a-\\u1a8f\\u1a9a-\\u1a9f\\u1aae-\\u1aaf\\u1abf-\\u1aff\\u1b4c-\\u1b4f\\u1b7d-\\u1b7f\\u1bf4-\\u1bfb\\u1c38-\\u1c3a\\u1c4a-\\u1c4c\\u1c80-\\u1cbf\\u1cc8-\\u1ccf\\u1cf7\\u1cfa-\\u1cff\\u1df6-\\u1dfb\\u1f16-\\u1f17\\u1f1e-\\u1f1f\\u1f46-\\u1f47\\u1f4e-\\u1f4f\\u1f58\\u1f5a\\u1f5c\\u1f5e\\u1f7e-\\u1f7f\\u1fb5\\u1fc5\\u1fd4-\\u1fd5\\u1fdc\\u1ff0-\\u1ff1\\u1ff5\\u1fff-\\u200f\\u2028-\\u202f\\u205f-\\u206f\\u2072-\\u2073\\u208f\\u209d-\\u209f\\u20bf-\\u20cf\\u20f1-\\u20ff\\u218c-\\u218f\\u23fb-\\u23ff\\u2427-\\u243f\\u244b-\\u245f\\u2b74-\\u2b75\\u2b96-\\u2b97\\u2bba-\\u2bbc\\u2bc9\\u2bd2-\\u2beb\\u2bf0-\\u2bff\\u2c2f\\u2c5f\\u2cf4-\\u2cf8\\u2d26\\u2d28-\\u2d2c\\u2d2e-\\u2d2f\\u2d68-\\u2d6e\\u2d71-\\u2d7e\\u2d97-\\u2d9f\\u2da7\\u2daf\\u2db7\\u2dbf\\u2dc7\\u2dcf\\u2dd7\\u2ddf\\u2e43-\\u2e7f\\u2e9a\\u2ef4-\\u2eff\\u2fd6-\\u2fef\\u2ffc-\\u3000\\u3040\\u3097-\\u3098\\u3100-\\u3104\\u312e-\\u3130\\u318f\\u31bb-\\u31bf\\u31e4-\\u31ef\\u321f\\u32ff\\u4db6-\\u4dbf\\u9fd6-\\u9fff\\ua48d-\\ua48f\\ua4c7-\\ua4cf\\ua62c-\\ua63f\\ua6f8-\\ua6ff\\ua7ae-\\ua7af\\ua7b8-\\ua7f6\\ua82c-\\ua82f\\ua83a-\\ua83f\\ua878-\\ua87f\\ua8c5-\\ua8cd\\ua8da-\\ua8df\\ua8fe-\\ua8ff\\ua954-\\ua95e\\ua97d-\\ua97f\\ua9ce\\ua9da-\\ua9dd\\ua9ff\\uaa37-\\uaa3f\\uaa4e-\\uaa4f\\uaa5a-\\uaa5b\\uaac3-\\uaada\\uaaf7-\\uab00\\uab07-\\uab08\\uab0f-\\uab10\\uab17-\\uab1f\\uab27\\uab2f\\uab66-\\uab6f\\uabee-\\uabef\\uabfa-\\uabff\\ud7a4-\\ud7af\\ud7c7-\\ud7ca\\ud7fc-\\uf8ff\\ufa6e-\\ufa6f\\ufada-\\ufaff\\ufb07-\\ufb12\\ufb18-\\ufb1c\\ufb37\\ufb3d\\ufb3f\\ufb42\\ufb45\\ufbc2-\\ufbd2\\ufd40-\\ufd4f\\ufd90-\\ufd91\\ufdc8-\\ufdef\\ufdfe-\\ufdff\\ufe1a-\\ufe1f\\ufe53\\ufe67\\ufe6c-\\ufe6f\\ufe75\\ufefd-\\uff00\\uffbf-\\uffc1\\uffc8-\\uffc9\\uffd0-\\uffd1\\uffd8-\\uffd9\\uffdd-\\uffdf\\uffe7\\uffef-\\ufffb\\ufffe-\\uffff]/.test(c))\n\t\t\t\t\tescape = 0;\n\t\t\t\telse if (code <= 0xff)\n\t\t\t\t\tescape = 2;\n\t\t\t\telse if (code <= 0xffff)\n\t\t\t\t\tescape = 4;\n\t\t\t\telse\n\t\t\t\t\tescape = 8;\n\n\t\t\t\tif (escape === 0)\n\t\t\t\t\tresult += c;\n\t\t\t\telse if (escape === 2)\n\t\t\t\t\tresult += \"\\\\x\" + _lpad(code.toString(16), \"0\", 2);\n\t\t\t\telse if (escape === 4)\n\t\t\t\t\tresult += \"\\\\u\" + _lpad(code.toString(16), \"0\", 4);\n\t\t\t\telse\n\t\t\t\t\tresult += \"\\\\U\" + _lpad(code.toString(16), \"0\", 8);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\treturn quote + result + quote;\n};\n\nfunction _date_repr(obj, ascii)\n{\n\tlet year = obj._date.getFullYear();\n\tlet month = obj._date.getMonth()+1;\n\tlet day = obj._date.getDate();\n\tlet result = \"@(\" + year + \"-\" + _lpad(month.toString(), \"0\", 2) + \"-\" + _lpad(day.toString(), \"0\", 2) + \")\";\n\treturn result;\n};\n\nfunction _datetime_repr(obj, ascii)\n{\n\tlet year = obj.getFullYear();\n\tlet month = obj.getMonth()+1;\n\tlet day = obj.getDate();\n\tlet hour = obj.getHours();\n\tlet minute = obj.getMinutes();\n\tlet second = obj.getSeconds();\n\tlet ms = obj.getMilliseconds();\n\tlet result = \"@(\" + year + \"-\" + _lpad(month.toString(), \"0\", 2) + \"-\" + _lpad(day.toString(), \"0\", 2) + \"T\";\n\n\tif (hour || minute || second || ms)\n\t{\n\t\tresult += _lpad(hour.toString(), \"0\", 2) + \":\" + _lpad(minute.toString(), \"0\", 2);\n\t\tif (second || ms)\n\t\t{\n\t\t\tresult += \":\" + _lpad(second.toString(), \"0\", 2);\n\t\t\tif (ms)\n\t\t\t\tresult += \".\" + _lpad(ms.toString(), \"0\", 3) + \"000\";\n\t\t}\n\t}\n\tresult += \")\";\n\n\treturn result;\n};\n\nfunction _map_repr(obj, ascii)\n{\n\tlet v = [];\n\tv.push(\"{\");\n\n\tlet i = 0;\n\tfor (let [key, value] of obj)\n\t{\n\t\tif (i++)\n\t\t\tv.push(\", \");\n\t\tv.push(_repr_internal(key, ascii), \": \", _repr_internal(value, ascii));\n\t}\n\n\tv.push(\"}\");\n\treturn v.join(\"\");\n};\n\nfunction _list_repr(obj, ascii)\n{\n\tlet v = [];\n\tv.push(\"[\");\n\tlet first = true;\n\tfor (let item of obj)\n\t{\n\t\tif (first)\n\t\t\tfirst = false;\n\t\telse\n\t\t\tv.push(\", \");\n\t\tv.push(_repr_internal(item, ascii));\n\t}\n\tv.push(\"]\");\n\treturn v.join(\"\");\n};\n\nfunction _set_repr(obj, ascii)\n{\n\tlet v = [];\n\tv.push(\"{\");\n\tif (!obj.size)\n\t\tv.push(\"/\");\n\telse\n\t{\n\t\tlet i = 0;\n\t\tfor (let value of obj)\n\t\t{\n\t\t\tif (i++)\n\t\t\t\tv.push(\", \");\n\t\t\tv.push(_repr_internal(value, ascii));\n\t\t}\n\t}\n\tv.push(\"}\");\n\treturn v.join(\"\");\n};\n\nfunction _object_repr(obj, ascii)\n{\n\tlet v = [];\n\tv.push(\"{\");\n\tlet i = 0;\n\tfor (let key in obj)\n\t{\n\t\tif (!obj.hasOwnProperty(key))\n\t\t\tcontinue;\n\t\tif (i++)\n\t\t\tv.push(\", \");\n\t\tv.push(_repr_internal(key, ascii), \": \", _repr_internal(obj[key], ascii));\n\t}\n\tv.push(\"}\");\n\treturn v.join(\"\");\n};\n\nfunction _repr_internal(obj, ascii)\n{\n\tif (obj === null)\n\t\treturn \"None\";\n\telse if (obj === undefined)\n\t\treturn \"<undefined>\";\n\telse if (obj === false)\n\t\treturn \"False\";\n\telse if (obj === true)\n\t\treturn \"True\";\n\telse if (typeof(obj) === \"string\")\n\t\treturn _str_repr(obj, ascii);\n\telse if (typeof(obj) === \"number\")\n\t\treturn \"\" + obj;\n\telse if (typeof(obj) === \"function\")\n\t\tif (obj._ul4_name || obj.name)\n\t\t\treturn \"<function \" + (obj._ul4_name || obj.name) + \">\";\n\t\telse\n\t\t\treturn \"<anonymous function>\";\n\telse if (_isdate(obj))\n\t\treturn _date_repr(obj, ascii);\n\telse if (_isdatetime(obj))\n\t\treturn _datetime_repr(obj, ascii);\n\telse if (typeof(obj) === \"object\" && typeof(obj[symbols.repr]) === \"function\")\n\t\treturn obj[symbols.repr]();\n\telse if (_islist(obj))\n\t\treturn _list_repr(obj, ascii);\n\telse if (_ismap(obj))\n\t\treturn _map_repr(obj, ascii);\n\telse if (_isset(obj))\n\t\treturn _set_repr(obj, ascii);\n\telse if (_isobject(obj))\n\t\treturn _object_repr(obj, ascii);\n\treturn \"?\";\n};\n\n// Return a string representation of `obj`: If possible this should be an object literal supported by UL4, otherwise the output should be bracketed with `<` and `>`\nexport function _repr(obj)\n{\n\treturn _repr_internal(obj, false);\n};\n\nexport function _ascii(obj)\n{\n\treturn _repr_internal(obj, true);\n};\n\nfunction _date_str(obj)\n{\n\tlet year = obj._date.getFullYear();\n\tlet month = obj._date.getMonth()+1;\n\tlet day = obj._date.getDate();\n\n\treturn year + \"-\" + _lpad(month.toString(), \"0\", 2) + \"-\" + _lpad(day.toString(), \"0\", 2);\n};\n\nfunction _datetime_str(obj)\n{\n\tlet year = obj.getFullYear();\n\tlet month = obj.getMonth()+1;\n\tlet day = obj.getDate();\n\tlet hour = obj.getHours();\n\tlet minute = obj.getMinutes();\n\tlet second = obj.getSeconds();\n\tlet ms = obj.getMilliseconds();\n\n\tlet result = year + \"-\" + _lpad(month.toString(), \"0\", 2) + \"-\" + _lpad(day.toString(), \"0\", 2) + \" \" + _lpad(hour.toString(), \"0\", 2) + \":\" + _lpad(minute.toString(), \"0\", 2);\n\tif (second || ms)\n\t{\n\t\tresult += \":\" + _lpad(second.toString(), \"0\", 2);\n\t\tif (ms)\n\t\t\tresult += \".\" + _lpad(ms.toString(), \"0\", 3) + \"000\";\n\t}\n\treturn result;\n};\n\n// Convert `obj` to a string\nexport function _str(obj=\"\")\n{\n\treturn strtype[symbols.call](obj);\n}\n\n// Convert `obj` to bool, according to its \"truth value\"\nexport function _bool(obj)\n{\n\treturn booltype[symbols.call](obj);\n};\n\n// Convert `obj` to an integer (if `base` is given `obj` must be a string and `base` is the base for the conversion (default is 10))\nexport function _int(obj=0, base=null)\n{\n\treturn inttype[symbols.call](obj, base);\n};\n\n// Convert `obj` to a float\nexport function _float(obj)\n{\n\treturn floattype[symbols.call](obj);\n};\n\n// Convert `obj` to a list\nexport function _list(obj)\n{\n\treturn listtype[symbols.call](obj);\n};\n\n// Convert `obj` to a set\nexport function _set(obj=[])\n{\n\treturn settype[symbols.call](obj);\n};\n\n// Return the length of `sequence`\nexport function _len(sequence)\n{\n\tif (typeof(sequence) === \"string\" || _islist(sequence))\n\t\treturn sequence.length;\n\telse if (_ismap(sequence) || _isset(sequence))\n\t\treturn sequence.size;\n\telse if (_isobject(sequence))\n\t{\n\t\tlet i = 0;\n\t\tfor (let key in sequence)\n\t\t\t++i;\n\t\treturn i;\n\t}\n\tthrow new TypeError(\"object of type '\" + _type(sequence).fullname() + \"' has no len()\");\n};\n\nexport let constructors2types = new Map();\n\nfunction _maketype(constructor)\n{\n\tlet type = new GenericType(constructor);\n\tconstructors2types.set(constructor, type);\n\treturn type;\n}\n\nexport function _type(obj)\n{\n\tif (obj === null)\n\t\treturn nonetype;\n\telse if (obj === undefined)\n\t\treturn undefinedtype;\n\telse if (typeof(obj[symbols.type]) === \"function\")\n\t\treturn obj[symbols.type]();\n\telse if (_isbool(obj))\n\t\treturn booltype;\n\telse if (_isint(obj))\n\t\treturn inttype;\n\telse if (_isfloat(obj))\n\t\treturn floattype;\n\telse if (_isstr(obj))\n\t\treturn strtype;\n\telse if (_islist(obj))\n\t\treturn listtype;\n\telse if (_isset(obj))\n\t\treturn settype;\n\telse if (_isdict(obj)) // These are both `Map`s and \"foreign\" objects, i.e. ones that don't inherit from `Proto`\n\t\treturn dicttype;\n\telse if (_isdatetime(obj))\n\t\treturn datetimetype;\n\t// Don't use `_isfunction()` here as this would return `true` for templates\n\telse if (typeof(obj) === \"function\")\n\t\treturn functiontype;\n\telse\n\t{\n\t\tlet constructor = obj.constructor;\n\t\tlet type = constructors2types.get(constructor);\n\t\tif (type === undefined)\n\t\t\ttype = _maketype(constructor);\n\t\treturn type;\n\t}\n};\n\n// (this is non-trivial, because it follows the Python semantic of `-5 % 2` being `1`)\nexport function _mod(obj1, obj2)\n{\n\tif (obj1 === null || obj1 === undefined || obj2 === null || obj2 === undefined)\n\t\tthrow new TypeError(_type(obj1).fullname() + \" % \" + _type(obj2).fullname() + \" is not supported\");\n\n\tlet div = Math.floor(obj1 / obj2);\n\tlet mod = obj1 - div * obj2;\n\n\tif (mod !== 0 && ((obj2 < 0 && mod > 0) || (obj2 > 0 && mod < 0)))\n\t{\n\t\tmod += obj2;\n\t\t--div;\n\t}\n\treturn obj1 - div * obj2;\n};\n\n// Return the attribute with the name `attrname` of the object `obj`\n// If `obj` doesn't have such an attribute, return `default_`\nexport function _getattr(obj, attrname, default_=null)\n{\n\ttry\n\t{\n\t\tlet type = _type(obj);\n\t\treturn type.getattr(obj, attrname);\n\t}\n\tcatch (exc)\n\t{\n\t\tif (exc instanceof AttributeError && exc.obj === obj)\n\t\t\treturn default_;\n\t\telse\n\t\t\tthrow exc;\n\t}\n};\n\n// Return whether the object `obj` has an attribute with the name `attrname`\nexport function _hasattr(obj, attrname)\n{\n\treturn _type(obj).hasattr(obj, attrname);\n};\n\n// Return the names of the attributes of the object `obj` as a set.\nexport function _dir(obj)\n{\n\treturn _type(obj).dir();\n};\n\n// Return whether any of the items in `iterable` are true\nexport function _any(iterable)\n{\n\tif (typeof(iterable) === \"string\")\n\t{\n\t\tfor (let c of iterable)\n\t\t{\n\t\t\tif (c !== '\\x00')\n\t\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\telse\n\t{\n\t\tfor (let iter = _iter(iterable);;)\n\t\t{\n\t\t\tlet item = iter.next();\n\t\t\tif (item.done)\n\t\t\t\treturn false;\n\t\t\tif (_bool(item.value))\n\t\t\t\treturn true;\n\t\t}\n\t}\n};\n\n// Return whether all of the items in `iterable` are true\nexport function _all(iterable)\n{\n\tif (typeof(iterable) === \"string\")\n\t{\n\t\tfor (let c of iterable)\n\t\t{\n\t\t\tif (c === '\\x00')\n\t\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\telse\n\t{\n\t\tfor (let iter = _iter(iterable);;)\n\t\t{\n\t\t\tlet item = iter.next();\n\t\t\tif (item.done)\n\t\t\t\treturn true;\n\t\t\tif (!_bool(item.value))\n\t\t\t\treturn false;\n\t\t}\n\t}\n};\n\n// Check if `obj` is undefined\nexport function _isundefined(obj)\n{\n\treturn obj === undefined;\n};\n\n\n// Check if `obj` is *not* undefined\nexport function _isdefined(obj)\n{\n\treturn obj !== undefined;\n};\n\n// Check if `obj` is `None`\nexport function _isnone(obj)\n{\n\treturn nonetype.instancecheck(obj);\n};\n\n// Check if `obj` is a boolean\nexport function _isbool(obj)\n{\n\treturn booltype.instancecheck(obj);\n};\n\n// Check if `obj` is a int\nexport function _isint(obj)\n{\n\treturn inttype.instancecheck(obj);\n};\n\n// Check if `obj` is a float\nexport function _isfloat(obj)\n{\n\treturn floattype.instancecheck(obj);\n};\n\n// Check if `obj` is a string\nexport function _isstr(obj)\n{\n\treturn strtype.instancecheck(obj);\n};\n\n// Check if `obj` is a datetime\nexport function _isdatetime(obj)\n{\n\treturn datetimetype.instancecheck(obj);\n};\n\nexport function _isdate(obj)\n{\n\treturn datetype.instancecheck(obj);\n};\n\n// Check if `obj` is a color\nexport function _iscolor(obj)\n{\n\treturn colortype.instancecheck(obj);\n};\n\n// Check if `obj` is a timedelta object\nexport function _istimedelta(obj)\n{\n\treturn timedeltatype.instancecheck(obj);\n};\n\n// Check if `obj` is a monthdelta object\nexport function _ismonthdelta(obj)\n{\n\treturn monthdeltatype.instancecheck(obj);\n};\n\n// Check if `obj` is a template (either a normal one or a locally defined)\nexport function _istemplate(obj)\n{\n\treturn obj !== null && (obj instanceof Template) || (obj instanceof TemplateClosure);\n};\n\n// Check if `obj` is a function\nexport function _isfunction(obj)\n{\n\treturn functiontype.instancecheck(obj);\n};\n\n// Check if `obj` is a list\nexport function _islist(obj)\n{\n\treturn listtype.instancecheck(obj);\n};\n\n// Check if `obj` is a set\nexport function _isset(obj)\n{\n\treturn settype.instancecheck(obj);\n};\n\n// Check if `obj` is an exception (at least a UL4 exception)\nexport function _isexception(obj)\n{\n\treturn (obj instanceof Exception);\n};\n\n// Check if `obj` is an iterator\nexport function _isiter(obj)\n{\n\treturn obj !== null && typeof(obj) === \"object\" && typeof(obj.next) === \"function\";\n};\n\n// Check if `obj` is a JS object\nexport function _isobject(obj)\n{\n\treturn dicttype._isobject(obj);\n};\n\n// Check if `obj` is a `Map`\nexport function _ismap(obj)\n{\n\treturn dicttype._ismap(obj);\n};\n\n// Check if `obj` is a dict (i.e. a normal Javascript object or a `Map`)\nexport function _isdict(obj)\n{\n\treturn dicttype.instancecheck(obj);\n};\n\n// Check if `obj` is an instance of `type`\nexport function _isinstance(obj, type)\n{\n\treturn type.instancecheck(obj);\n};\n\n// Repeat string `str` `rep` times\nexport function _str_repeat(str, rep)\n{\n\tlet result = \"\";\n\tfor (; rep>0; --rep)\n\t\tresult += str;\n\treturn result;\n};\n\nexport function _list_repeat(list, rep)\n{\n\tlet result = [];\n\tfor (; rep>0; --rep)\n\t\tfor (let item of list)\n\t\t\tresult.push(item);\n\treturn result;\n};\n\nfunction _str_json(str)\n{\n\tlet result = \"\";\n\tfor (let c of str)\n\t{\n\t\tswitch (c)\n\t\t{\n\t\t\tcase \"\\r\":\n\t\t\t\tresult += \"\\\\r\";\n\t\t\t\tbreak;\n\t\t\tcase \"\\n\":\n\t\t\t\tresult += \"\\\\n\";\n\t\t\t\tbreak;\n\t\t\tcase \"\\t\":\n\t\t\t\tresult += \"\\\\t\";\n\t\t\t\tbreak;\n\t\t\tcase \"\\\\\":\n\t\t\t\tresult += \"\\\\\\\\\";\n\t\t\t\tbreak;\n\t\t\tcase '\"':\n\t\t\t\tresult += '\\\\\"';\n\t\t\t\tbreak;\n\t\t\tcase '<':\n\t\t\t\tresult += '\\\\u003c';\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tlet code = c.charCodeAt(0);\n\t\t\t\tif (code >= 32 && code < 128)\n\t\t\t\t\tresult += c;\n\t\t\t\telse\n\t\t\t\t\tresult += \"\\\\u\" + _lpad(code.toString(16), \"0\", 4);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\treturn '\"' + result + '\"';\n};\n\n// Encodes `obj` in the Javascript Object Notation (see http://json.org/; with support for dates, colors and templates)\nexport function _asjson(obj)\n{\n\tif (obj === null)\n\t\treturn \"null\";\n\telse if (obj === undefined)\n\t\treturn \"undefined\";\n\telse if (obj === false)\n\t\treturn \"false\";\n\telse if (obj === true)\n\t\treturn \"true\";\n\telse if (typeof(obj) === \"string\")\n\t\treturn _str_json(obj);\n\telse if (typeof(obj) === \"number\")\n\t{\n\t\treturn \"\" + obj;\n\t}\n\telse if (_islist(obj))\n\t{\n\t\tlet v = [];\n\t\tv.push(\"[\");\n\t\tlet first = true;\n\t\tfor (let item of obj)\n\t\t{\n\t\t\tif (first)\n\t\t\t\tfirst = false;\n\t\t\telse\n\t\t\t\tv.push(\", \");\n\t\t\tv.push(_asjson(item));\n\t\t}\n\t\tv.push(\"]\");\n\t\treturn v.join(\"\");\n\t}\n\telse if (_ismap(obj))\n\t{\n\t\tlet v = [];\n\t\tv.push(\"{\");\n\t\tlet first = true;\n\t\tfor (let [key, value] of obj)\n\t\t{\n\t\t\tif (first)\n\t\t\t\tfirst = false;\n\t\t\telse\n\t\t\t\tv.push(\", \");\n\t\t\tv.push(_asjson(key), \": \", _asjson(value));\n\t\t}\n\t\tv.push(\"}\");\n\t\treturn v.join(\"\");\n\t}\n\telse if (_isobject(obj))\n\t{\n\t\tlet v = [];\n\t\tv.push(\"{\");\n\t\tlet first = true;\n\t\tfor (let key in obj)\n\t\t{\n\t\t\tif (first)\n\t\t\t\tfirst = false;\n\t\t\telse\n\t\t\t\tv.push(\", \");\n\t\t\tv.push(_asjson(key), \": \", _asjson(obj[key]));\n\t\t}\n\t\tv.push(\"}\");\n\t\treturn v.join(\"\");\n\t}\n\telse if (_isdate(obj))\n\t{\n\t\treturn \"new ul4.Date_(\" + obj._date.getFullYear() + \", \" + (obj._date.getMonth()+1) + \", \" + obj._date.getDate() + \")\";\n\t}\n\telse if (_isdatetime(obj))\n\t{\n\t\treturn \"new Date(\" + obj.getFullYear() + \", \" + obj.getMonth() + \", \" + obj.getDate() + \", \" + obj.getHours() + \", \" + obj.getMinutes() + \", \" + obj.getSeconds() + \", \" + obj.getMilliseconds() + \")\";\n\t}\n\telse if (_istimedelta(obj))\n\t{\n\t\treturn \"new ul4.TimeDelta(\" + obj._days + \", \" + obj._seconds + \", \" + obj._microseconds + \")\";\n\t}\n\telse if (_ismonthdelta(obj))\n\t{\n\t\treturn \"new ul4.MonthDelta(\" + obj._months + \")\";\n\t}\n\telse if (_iscolor(obj))\n\t{\n\t\treturn \"new ul4.Color(\" + obj._r + \", \" + obj._g + \", \" + obj._b + \", \" + obj._a + \")\";\n\t}\n\telse if (_istemplate(obj))\n\t{\n\t\treturn \"ul4.Template.loads(\" + _repr(obj.dumps()) + \")\";\n\t}\n\tthrow new TypeError(\"asjson() requires a serializable object\");\n};\n\n// Decodes the string `string` from the Javascript Object Notation (see http://json.org/) and returns the resulting object\nexport function _fromjson(string)\n{\n\t// The following is from jQuery's parseJSON function\n\tstring = strtype.strip(string);\n\tif (JSON && JSON.parse)\n\t\treturn JSON.parse(string);\n\tif (_rvalidchars.test(string.replace(_rvalidescape, \"@\").replace(_rvalidtokens, \"]\").replace(_rvalidbraces, \"\")))\n\t\treturn (new Function(\"return \" + string))();\n\tthrow new TypeError(\"invalid JSON\");\n};\n\n// Encodes `obj` in the UL4 Object Notation format\nexport function _asul4on(obj, indent=null)\n{\n\treturn dumps(obj, indent);\n};\n\n// Decodes the string `string` from the UL4 Object Notation format and returns the resulting decoded object\nexport function _fromul4on(string)\n{\n\treturn loads(string);\n};\n\nfunction _format_datetime(obj, fmt, lang)\n{\n\tlet translations = {\n\t\tde: {\n\t\t\tms: [\"Jan\", \"Feb\", \"M\\u00e4r\", \"Apr\", \"Mai\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Dez\"],\n\t\t\tml: [\"Januar\", \"Februar\", \"M\\u00e4rz\", \"April\", \"Mai\", \"Juni\", \"Juli\", \"August\", \"September\", \"Oktober\", \"November\", \"Dezember\"],\n\t\t\tws: [\"So\", \"Mo\", \"Di\", \"Mi\", \"Do\", \"Fr\", \"Sa\"],\n\t\t\twl: [\"Sonntag\", \"Montag\", \"Dienstag\", \"Mittwoch\", \"Donnerstag\", \"Freitag\", \"Samstag\"],\n\t\t\txf: \"%d.%m.%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a %d %b %Y %H:%M:%S\"\n\t\t},\n\t\ten: {\n\t\t\tms: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"],\n\t\t\tml: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n\t\t\tws: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n\t\t\twl: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\n\t\t\txf: \"%m/%d/%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a %d %b %Y %I:%M:%S %p\"\n\t\t},\n\t\tfr: {\n\t\t\tms: [\"janv.\", \"f\\u00e9vr.\", \"mars\", \"avril\", \"mai\", \"juin\", \"juil.\", \"ao\\u00fbt\", \"sept.\", \"oct.\", \"nov.\", \"d\\u00e9c.\"],\n\t\t\tml: [\"janvier\", \"f\\u00e9vrier\", \"mars\", \"avril\", \"mai\", \"juin\", \"juillet\", \"ao\\u00fbt\", \"septembre\", \"octobre\", \"novembre\", \"d\\u00e9cembre\"],\n\t\t\tws: [\"dim.\", \"lun.\", \"mar.\", \"mer.\", \"jeu.\", \"ven.\", \"sam.\"],\n\t\t\twl: [\"dimanche\", \"lundi\", \"mardi\", \"mercredi\", \"jeudi\", \"vendredi\", \"samedi\"],\n\t\t\txf: \"%d/%m/%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a %d %b %Y %H:%M:%S\"\n\t\t},\n\t\tes: {\n\t\t\tms: [\"ene\", \"feb\", \"mar\", \"abr\", \"may\", \"jun\", \"jul\", \"ago\", \"sep\", \"oct\", \"nov\", \"dic\"],\n\t\t\tml: [\"enero\", \"febrero\", \"marzo\", \"abril\", \"mayo\", \"junio\", \"julio\", \"agosto\", \"septiembre\", \"octubre\", \"noviembre\", \"diciembre\"],\n\t\t\tws: [\"dom\", \"lun\", \"mar\", \"mi\\u00e9\", \"jue\", \"vie\", \"s\\u00e1b\"],\n\t\t\twl: [\"domingo\", \"lunes\", \"martes\", \"mi\\u00e9rcoles\", \"jueves\", \"viernes\", \"s\\u00e1bado\"],\n\t\t\txf: \"%d/%m/%y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a %d %b %Y %H:%M:%S\"\n\t\t},\n\t\tit: {\n\t\t\tms: [\"gen\", \"feb\", \"mar\", \"apr\", \"mag\", \"giu\", \"lug\", \"ago\", \"set\", \"ott\", \"nov\", \"dic\"],\n\t\t\tml: [\"gennaio\", \"febbraio\", \"marzo\", \"aprile\", \"maggio\", \"giugno\", \"luglio\", \"agosto\", \"settembre\", \"ottobre\", \"novembre\", \"dicembre\"],\n\t\t\tws: [\"dom\", \"lun\", \"mar\", \"mer\", \"gio\", \"ven\", \"sab\"],\n\t\t\twl: [\"domenica\", \"luned\\u00ec\", \"marted\\u00ec\", \"mercoled\\u00ec\", \"gioved\\u00ec\", \"venerd\\u00ec\", \"sabato\"],\n\t\t\txf: \"%d/%m/%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a %d %b %Y %H:%M:%S\"\n\t\t},\n\t\tda: {\n\t\t\tms: [\"jan\", \"feb\", \"mar\", \"apr\", \"maj\", \"jun\", \"jul\", \"aug\", \"sep\", \"okt\", \"nov\", \"dec\"],\n\t\t\tml: [\"januar\", \"februar\", \"marts\", \"april\", \"maj\", \"juni\", \"juli\", \"august\", \"september\", \"oktober\", \"november\", \"december\"],\n\t\t\tws: [\"s\\u00f8n\", \"man\", \"tir\", \"ons\", \"tor\", \"fre\", \"l\\u00f8r\"],\n\t\t\twl: [\"s\\u00f8ndag\", \"mandag\", \"tirsdag\", \"onsdag\", \"torsdag\", \"fredag\", \"l\\u00f8rdag\"],\n\t\t\txf: \"%d-%m-%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a %d %b %Y %H:%M:%S\"\n\t\t},\n\t\tsv: {\n\t\t\tms: [\"jan\", \"feb\", \"mar\", \"apr\", \"maj\", \"jun\", \"jul\", \"aug\", \"sep\", \"okt\", \"nov\", \"dec\"],\n\t\t\tml: [\"januari\", \"februari\", \"mars\", \"april\", \"maj\", \"juni\", \"juli\", \"augusti\", \"september\", \"oktober\", \"november\", \"december\"],\n\t\t\tws: [\"s\\u00f6n\", \"m\\u00e5n\", \"tis\", \"ons\", \"tor\", \"fre\", \"l\\u00f6r\"],\n\t\t\twl: [\"s\\u00f6ndag\", \"m\\u00e5ndag\", \"tisdag\", \"onsdag\", \"torsdag\", \"fredag\", \"l\\u00f6rdag\"],\n\t\t\txf: \"%Y-%m-%d\",\n\t\t\tXf: \"%H.%M.%S\",\n\t\t\tcf: \"%a %d %b %Y %H.%M.%S\"\n\t\t},\n\t\tnl: {\n\t\t\tms: [\"jan\", \"feb\", \"mrt\", \"apr\", \"mei\", \"jun\", \"jul\", \"aug\", \"sep\", \"okt\", \"nov\", \"dec\"],\n\t\t\tml: [\"januari\", \"februari\", \"maart\", \"april\", \"mei\", \"juni\", \"juli\", \"augustus\", \"september\", \"oktober\", \"november\", \"december\"],\n\t\t\tws: [\"zo\", \"ma\", \"di\", \"wo\", \"do\", \"vr\", \"za\"],\n\t\t\twl: [\"zondag\", \"maandag\", \"dinsdag\", \"woensdag\", \"donderdag\", \"vrijdag\", \"zaterdag\"],\n\t\t\txf: \"%d-%m-%y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a %d %b %Y %H:%M:%S\"\n\t\t},\n\t\tpt: {\n\t\t\tms: [\"Jan\", \"Fev\", \"Mar\", \"Abr\", \"Mai\", \"Jun\", \"Jul\", \"Ago\", \"Set\", \"Out\", \"Nov\", \"Dez\"],\n\t\t\tml: [\"Janeiro\", \"Fevereiro\", \"Mar\\u00e7o\", \"Abril\", \"Maio\", \"Junho\", \"Julho\", \"Agosto\", \"Setembro\", \"Outubro\", \"Novembro\", \"Dezembro\"],\n\t\t\tws: [\"Dom\", \"Seg\", \"Ter\", \"Qua\", \"Qui\", \"Sex\", \"S\\u00e1b\"],\n\t\t\twl: [\"Domingo\", \"Segunda\", \"Ter\\u00e7a\", \"Quarta\", \"Quinta\", \"Sexta\", \"S\\u00e1bado\"],\n\t\t\txf: \"%d-%m-%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a %d %b %Y %H:%M:%S\"\n\t\t},\n\t\tcs: {\n\t\t\tms: [\"led\", \"\\u00fano\", \"b\\u0159e\", \"dub\", \"kv\\u011b\", \"\\u010den\", \"\\u010dec\", \"srp\", \"z\\u00e1\\u0159\", \"\\u0159\\u00edj\", \"lis\", \"pro\"],\n\t\t\tml: [\"leden\", \"\\u00fanor\", \"b\\u0159ezen\", \"duben\", \"kv\\u011bten\", \"\\u010derven\", \"\\u010dervenec\", \"srpen\", \"z\\u00e1\\u0159\\u00ed\", \"\\u0159\\u00edjen\", \"listopad\", \"prosinec\"],\n\t\t\tws: [\"Ne\", \"Po\", \"\\u00dat\", \"St\", \"\\u010ct\", \"P\\u00e1\", \"So\"],\n\t\t\twl: [\"Ned\\u011ble\", \"Pond\\u011bl\\u00ed\", \"\\u00dater\\u00fd\", \"St\\u0159eda\", \"\\u010ctvrtek\", \"P\\u00e1tek\", \"Sobota\"],\n\t\t\txf: \"%d.%m.%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a\\u00a0%d.\\u00a0%B\\u00a0%Y,\\u00a0%H:%M:%S\"\n\t\t},\n\t\tsk: {\n\t\t\tms: [\"jan\", \"feb\", \"mar\", \"apr\", \"m\\u00e1j\", \"j\\u00fan\", \"j\\u00fal\", \"aug\", \"sep\", \"okt\", \"nov\", \"dec\"],\n\t\t\tml: [\"janu\\u00e1r\", \"febru\\u00e1r\", \"marec\", \"apr\\u00edl\", \"m\\u00e1j\", \"j\\u00fan\", \"j\\u00fal\", \"august\", \"september\", \"okt\\u00f3ber\", \"november\", \"december\"],\n\t\t\tws: [\"Ne\", \"Po\", \"Ut\", \"St\", \"\\u0160t\", \"Pi\", \"So\"],\n\t\t\twl: [\"Nede\\u013ea\", \"Pondelok\", \"Utorok\", \"Streda\", \"\\u0160tvrtok\", \"Piatok\", \"Sobota\"],\n\t\t\txf: \"%d.%m.%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a\\u00a0%d.\\u00a0%B\\u00a0%Y,\\u00a0%H:%M:%S\"\n\t\t},\n\t\tpl: {\n\t\t\tms: [\"sty\", \"lut\", \"mar\", \"kwi\", \"maj\", \"cze\", \"lip\", \"sie\", \"wrz\", \"pa\\u017a\", \"lis\", \"gru\"],\n\t\t\tml: [\"stycze\\u0144\", \"luty\", \"marzec\", \"kwiecie\\u0144\", \"maj\", \"czerwiec\", \"lipiec\", \"sierpie\\u0144\", \"wrzesie\\u0144\", \"pa\\u017adziernik\", \"listopad\", \"grudzie\\u0144\"],\n\t\t\tws: [\"nie\", \"pon\", \"wto\", \"\\u015bro\", \"czw\", \"pi\\u0105\", \"sob\"],\n\t\t\twl: [\"niedziela\", \"poniedzia\\u0142ek\", \"wtorek\", \"\\u015broda\", \"czwartek\", \"pi\\u0105tek\", \"sobota\"],\n\t\t\txf: \"%d.%m.%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a, %d %b %Y, %H:%M:%S\"\n\t\t},\n\t\thr: {\n\t\t\tms: [\"Sij\", \"Vel\", \"O\\u017eu\", \"Tra\", \"Svi\", \"Lip\", \"Srp\", \"Kol\", \"Ruj\", \"Lis\", \"Stu\", \"Pro\"],\n\t\t\tml: [\"Sije\\u010danj\", \"Velja\\u010da\", \"O\\u017eujak\", \"Travanj\", \"Svibanj\", \"Lipanj\", \"Srpanj\", \"Kolovoz\", \"Rujan\", \"Listopad\", \"Studeni\", \"Prosinac\"],\n\t\t\tws: [\"Ned\", \"Pon\", \"Uto\", \"Sri\", \"\\u010cet\", \"Pet\", \"Sub\"],\n\t\t\twl: [\"Nedjelja\", \"Ponedjeljak\", \"Utorak\", \"Srijeda\", \"\\u010cetvrtak\", \"Petak\", \"Subota\"],\n\t\t\txf: \"%d.%m.%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a %d %b %Y %H:%M:%S\"\n\t\t},\n\t\tsr: {\n\t\t\tms: [\"\\u0458\\u0430\\u043d\", \"\\u0444\\u0435\\u0431\", \"\\u043c\\u0430\\u0440\", \"\\u0430\\u043f\\u0440\", \"\\u043c\\u0430\\u0458\", \"\\u0458\\u0443\\u043d\", \"\\u0458\\u0443\\u043b\", \"\\u0430\\u0432\\u0433\", \"\\u0441\\u0435\\u043f\", \"\\u043e\\u043a\\u0442\", \"\\u043d\\u043e\\u0432\", \"\\u0434\\u0435\\u0446\"],\n\t\t\tml: [\"\\u0458\\u0430\\u043d\\u0443\\u0430\\u0440\", \"\\u0444\\u0435\\u0431\\u0440\\u0443\\u0430\\u0440\", \"\\u043c\\u0430\\u0440\\u0442\", \"\\u0430\\u043f\\u0440\\u0438\\u043b\", \"\\u043c\\u0430\\u0458\", \"\\u0458\\u0443\\u043d\", \"\\u0458\\u0443\\u043b\", \"\\u0430\\u0432\\u0433\\u0443\\u0441\\u0442\", \"\\u0441\\u0435\\u043f\\u0442\\u0435\\u043c\\u0431\\u0430\\u0440\", \"\\u043e\\u043a\\u0442\\u043e\\u0431\\u0430\\u0440\", \"\\u043d\\u043e\\u0432\\u0435\\u043c\\u0431\\u0430\\u0440\", \"\\u0434\\u0435\\u0446\\u0435\\u043c\\u0431\\u0430\\u0440\"],\n\t\t\tws: [\"\\u043d\\u0435\\u0434\", \"\\u043f\\u043e\\u043d\", \"\\u0443\\u0442\\u043e\", \"\\u0441\\u0440\\u0435\", \"\\u0447\\u0435\\u0442\", \"\\u043f\\u0435\\u0442\", \"\\u0441\\u0443\\u0431\"],\n\t\t\twl: [\"\\u043d\\u0435\\u0434\\u0435\\u0459\\u0430\", \"\\u043f\\u043e\\u043d\\u0435\\u0434\\u0435\\u0459\\u0430\\u043a\", \"\\u0443\\u0442\\u043e\\u0440\\u0430\\u043a\", \"\\u0441\\u0440\\u0435\\u0434\\u0430\", \"\\u0447\\u0435\\u0442\\u0432\\u0440\\u0442\\u0430\\u043a\", \"\\u043f\\u0435\\u0442\\u0430\\u043a\", \"\\u0441\\u0443\\u0431\\u043e\\u0442\\u0430\"],\n\t\t\txf: \"%d.%m.%Y.\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%A, %d. %B %Y. %H:%M:%S\"\n\t\t},\n\t\tro: {\n\t\t\tms: [\"ian\", \"feb\", \"mar\", \"apr\", \"mai\", \"iun\", \"iul\", \"aug\", \"sep\", \"oct\", \"nov\", \"dec\"],\n\t\t\tml: [\"ianuarie\", \"februarie\", \"martie\", \"aprilie\", \"mai\", \"iunie\", \"iulie\", \"august\", \"septembrie\", \"octombrie\", \"noiembrie\", \"decembrie\"],\n\t\t\tws: [\"Du\", \"Lu\", \"Ma\", \"Mi\", \"Jo\", \"Vi\", \"Sb\"],\n\t\t\twl: [\"duminic\\u0103\", \"luni\", \"mar\\u0163i\", \"miercuri\", \"joi\", \"vineri\", \"s\\u00e2mb\\u0103t\\u0103\"],\n\t\t\txf: \"%d.%m.%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a %d %b %Y %H:%M:%S\"\n\t\t},\n\t\thu: {\n\t\t\tms: [\"jan\", \"febr\", \"m\\u00e1rc\", \"\\u00e1pr\", \"m\\u00e1j\", \"j\\u00fan\", \"j\\u00fal\", \"aug\", \"szept\", \"okt\", \"nov\", \"dec\"],\n\t\t\tml: [\"janu\\u00e1r\", \"febru\\u00e1r\", \"m\\u00e1rcius\", \"\\u00e1prilis\", \"m\\u00e1jus\", \"j\\u00fanius\", \"j\\u00falius\", \"augusztus\", \"szeptember\", \"okt\\u00f3ber\", \"november\", \"december\"],\n\t\t\tws: [\"v\", \"h\", \"k\", \"sze\", \"cs\", \"p\", \"szo\"],\n\t\t\twl: [\"vas\\u00e1rnap\", \"h\\u00e9tf\\u0151\", \"kedd\", \"szerda\", \"cs\\u00fct\\u00f6rt\\u00f6k\", \"p\\u00e9ntek\", \"szombat\"],\n\t\t\txf: \"%Y-%m-%d\",\n\t\t\tXf: \"%H.%M.%S\",\n\t\t\tcf: \"%Y. %b. %d., %A, %H.%M.%S\"\n\t\t},\n\t\ttr: {\n\t\t\tms: [\"Oca\", \"\\u015eub\", \"Mar\", \"Nis\", \"May\", \"Haz\", \"Tem\", \"A\\u011fu\", \"Eyl\", \"Eki\", \"Kas\", \"Ara\"],\n\t\t\tml: [\"Ocak\", \"\\u015eubat\", \"Mart\", \"Nisan\", \"May\\u0131s\", \"Haziran\", \"Temmuz\", \"A\\u011fustos\", \"Eyl\\u00fcl\", \"Ekim\", \"Kas\\u0131m\", \"Aral\\u0131k\"],\n\t\t\tws: [\"Paz\", \"Pzt\", \"Sal\", \"\\u00c7r\\u015f\", \"Pr\\u015f\", \"Cum\", \"Cts\"],\n\t\t\twl: [\"Pazar\", \"Pazartesi\", \"Sal\\u0131\", \"\\u00c7ar\\u015famba\", \"Per\\u015fembe\", \"Cuma\", \"Cumartesi\"],\n\t\t\txf: \"%d-%m-%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a %d %b %Y %H:%M:%S\"\n\t\t},\n\t\tru: {\n\t\t\tms: [\"\\u042f\\u043d\\u0432\", \"\\u0424\\u0435\\u0432\", \"\\u041c\\u0430\\u0440\", \"\\u0410\\u043f\\u0440\", \"\\u041c\\u0430\\u0439\", \"\\u0418\\u044e\\u043d\", \"\\u0418\\u044e\\u043b\", \"\\u0410\\u0432\\u0433\", \"\\u0421\\u0435\\u043d\", \"\\u041e\\u043a\\u0442\", \"\\u041d\\u043e\\u044f\", \"\\u0414\\u0435\\u043a\"],\n\t\t\tml: [\"\\u042f\\u043d\\u0432\\u0430\\u0440\\u044c\", \"\\u0424\\u0435\\u0432\\u0440\\u0430\\u043b\\u044c\", \"\\u041c\\u0430\\u0440\\u0442\", \"\\u0410\\u043f\\u0440\\u0435\\u043b\\u044c\", \"\\u041c\\u0430\\u0439\", \"\\u0418\\u044e\\u043d\\u044c\", \"\\u0418\\u044e\\u043b\\u044c\", \"\\u0410\\u0432\\u0433\\u0443\\u0441\\u0442\", \"\\u0421\\u0435\\u043d\\u0442\\u044f\\u0431\\u0440\\u044c\", \"\\u041e\\u043a\\u0442\\u044f\\u0431\\u0440\\u044c\", \"\\u041d\\u043e\\u044f\\u0431\\u0440\\u044c\", \"\\u0414\\u0435\\u043a\\u0430\\u0431\\u0440\\u044c\"],\n\t\t\tws: [\"\\u0412\\u0441\\u043a\", \"\\u041f\\u043d\\u0434\", \"\\u0412\\u0442\\u0440\", \"\\u0421\\u0440\\u0434\", \"\\u0427\\u0442\\u0432\", \"\\u041f\\u0442\\u043d\", \"\\u0421\\u0431\\u0442\"],\n\t\t\twl: [\"\\u0412\\u043e\\u0441\\u043a\\u0440\\u0435\\u0441\\u0435\\u043d\\u044c\\u0435\", \"\\u041f\\u043e\\u043d\\u0435\\u0434\\u0435\\u043b\\u044c\\u043d\\u0438\\u043a\", \"\\u0412\\u0442\\u043e\\u0440\\u043d\\u0438\\u043a\", \"\\u0421\\u0440\\u0435\\u0434\\u0430\", \"\\u0427\\u0435\\u0442\\u0432\\u0435\\u0440\\u0433\", \"\\u041f\\u044f\\u0442\\u043d\\u0438\\u0446\\u0430\", \"\\u0421\\u0443\\u0431\\u0431\\u043e\\u0442\\u0430\"],\n\t\t\txf: \"%d.%m.%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a %d %b %Y %H:%M:%S\"\n\t\t},\n\t\tzh: {\n\t\t\tms: [\" 1\\u6708\", \" 2\\u6708\", \" 3\\u6708\", \" 4\\u6708\", \" 5\\u6708\", \" 6\\u6708\", \" 7\\u6708\", \" 8\\u6708\", \" 9\\u6708\", \"10\\u6708\", \"11\\u6708\", \"12\\u6708\"],\n\t\t\tml: [\"\\u4e00\\u6708\", \"\\u4e8c\\u6708\", \"\\u4e09\\u6708\", \"\\u56db\\u6708\", \"\\u4e94\\u6708\", \"\\u516d\\u6708\", \"\\u4e03\\u6708\", \"\\u516b\\u6708\", \"\\u4e5d\\u6708\", \"\\u5341\\u6708\", \"\\u5341\\u4e00\\u6708\", \"\\u5341\\u4e8c\\u6708\"],\n\t\t\tws: [\"\\u65e5\", \"\\u4e00\", \"\\u4e8c\", \"\\u4e09\", \"\\u56db\", \"\\u4e94\", \"\\u516d\"],\n\t\t\twl: [\"\\u661f\\u671f\\u65e5\", \"\\u661f\\u671f\\u4e00\", \"\\u661f\\u671f\\u4e8c\", \"\\u661f\\u671f\\u4e09\", \"\\u661f\\u671f\\u56db\", \"\\u661f\\u671f\\u4e94\", \"\\u661f\\u671f\\u516d\"],\n\t\t\txf: \"%Y\\u5e74%b%d\\u65e5\",\n\t\t\tXf: \"%H\\u65f6%M\\u5206%S\\u79d2\",\n\t\t\tcf: \"%Y\\u5e74%b%d\\u65e5 %A %H\\u65f6%M\\u5206%S\\u79d2\"\n\t\t},\n\t\tko: {\n\t\t\tms: [\" 1\\uc6d4\", \" 2\\uc6d4\", \" 3\\uc6d4\", \" 4\\uc6d4\", \" 5\\uc6d4\", \" 6\\uc6d4\", \" 7\\uc6d4\", \" 8\\uc6d4\", \" 9\\uc6d4\", \"10\\uc6d4\", \"11\\uc6d4\", \"12\\uc6d4\"],\n\t\t\tml: [\"1\\uc6d4\", \"2\\uc6d4\", \"3\\uc6d4\", \"4\\uc6d4\", \"5\\uc6d4\", \"6\\uc6d4\", \"7\\uc6d4\", \"8\\uc6d4\", \"9\\uc6d4\", \"10\\uc6d4\", \"11\\uc6d4\", \"12\\uc6d4\"],\n\t\t\tws: [\"\\uc77c\", \"\\uc6d4\", \"\\ud654\", \"\\uc218\", \"\\ubaa9\", \"\\uae08\", \"\\ud1a0\"],\n\t\t\twl: [\"\\uc77c\\uc694\\uc77c\", \"\\uc6d4\\uc694\\uc77c\", \"\\ud654\\uc694\\uc77c\", \"\\uc218\\uc694\\uc77c\", \"\\ubaa9\\uc694\\uc77c\", \"\\uae08\\uc694\\uc77c\", \"\\ud1a0\\uc694\\uc77c\"],\n\t\t\txf: \"%Y\\ub144 %B %d\\uc77c\",\n\t\t\tXf: \"%H\\uc2dc %M\\ubd84 %S\\ucd08\",\n\t\t\tcf: \"%Y\\ub144 %B %d\\uc77c (%a) %p %I\\uc2dc %M\\ubd84 %S\\ucd08\"\n\t\t},\n\t\tja: {\n\t\t\tms: [\" 1\\u6708\", \" 2\\u6708\", \" 3\\u6708\", \" 4\\u6708\", \" 5\\u6708\", \" 6\\u6708\", \" 7\\u6708\", \" 8\\u6708\", \" 9\\u6708\", \"10\\u6708\", \"11\\u6708\", \"12\\u6708\"],\n\t\t\tml: [\"1\\u6708\", \"2\\u6708\", \"3\\u6708\", \"4\\u6708\", \"5\\u6708\", \"6\\u6708\", \"7\\u6708\", \"8\\u6708\", \"9\\u6708\", \"10\\u6708\", \"11\\u6708\", \"12\\u6708\"],\n\t\t\tws: [\"\\u65e5\", \"\\u6708\", \"\\u706b\", \"\\u6c34\", \"\\u6728\", \"\\u91d1\", \"\\u571f\"],\n\t\t\twl: [\"\\u65e5\\u66dc\\u65e5\", \"\\u6708\\u66dc\\u65e5\", \"\\u706b\\u66dc\\u65e5\", \"\\u6c34\\u66dc\\u65e5\", \"\\u6728\\u66dc\\u65e5\", \"\\u91d1\\u66dc\\u65e5\", \"\\u571f\\u66dc\\u65e5\"],\n\t\t\txf: \"%Y\\u5e74%B%d\\u65e5\",\n\t\t\tXf: \"%H\\u6642%M\\u5206%S\\u79d2\",\n\t\t\tcf: \"%Y\\u5e74%B%d\\u65e5 %H\\u6642%M\\u5206%S\\u79d2\"\n\t\t}\n\t};\n\n\tlet translation = translations[lang];\n\n\tlet result = [];\n\tlet inspec = false;\n\tfor (let c of fmt)\n\t{\n\t\tif (inspec)\n\t\t{\n\t\t\tswitch (c)\n\t\t\t{\n\t\t\t\tcase \"a\":\n\t\t\t\t\tc = translation.ws[obj.getDay()];\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"A\":\n\t\t\t\t\tc = translation.wl[obj.getDay()];\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"b\":\n\t\t\t\t\tc = translation.ms[obj.getMonth()];\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"B\":\n\t\t\t\t\tc = translation.ml[obj.getMonth()];\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"c\":\n\t\t\t\t\tc = _format(obj, translation.cf, lang);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"d\":\n\t\t\t\t\tc = _lpad(obj.getDate(), \"0\", 2);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"f\":\n\t\t\t\t\tc = _lpad(obj.getMilliseconds(), \"0\", 3) + \"000\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"H\":\n\t\t\t\t\tc = _lpad(obj.getHours(), \"0\", 2);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"I\":\n\t\t\t\t\tc = _lpad(((obj.getHours()-1) % 12)+1, \"0\", 2);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"j\":\n\t\t\t\t\tc = _lpad(datetimetype.yearday(obj), \"0\", 3);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"m\":\n\t\t\t\t\tc = _lpad(obj.getMonth()+1, \"0\", 2);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"M\":\n\t\t\t\t\tc = _lpad(obj.getMinutes(), \"0\", 2);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"p\":\n\t\t\t\t\tc = obj.getHours() < 12 ? \"AM\" : \"PM\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"S\":\n\t\t\t\t\tc = _lpad(obj.getSeconds(), \"0\", 2);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"U\":\n\t\t\t\t\tc = _lpad(_week4format(obj, 6), \"0\", 2);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"w\":\n\t\t\t\t\tc = obj.getDay();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"W\":\n\t\t\t\t\tc = _lpad(_week4format(obj, 0), \"0\", 2);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"x\":\n\t\t\t\t\tc = _format(obj, translation.xf, lang);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"X\":\n\t\t\t\t\tc = _format(obj, translation.Xf, lang);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"y\":\n\t\t\t\t\tc = (obj.getFullYear() % 100).toString();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"Y\":\n\t\t\t\t\tc = obj.getFullYear().toString();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"z\":\n\t\t\t\t\t// UTC offset in the form +HHMM or -HHMM\n\t\t\t\t\tc = \"\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"Z\":\n\t\t\t\t\t// Time zone name\n\t\t\t\t\tc = \"\";\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tresult.push(c);\n\t\t\tinspec = false;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (c == \"%\")\n\t\t\t\tinspec = true;\n\t\t\telse\n\t\t\t\tresult.push(c);\n\t\t}\n\t}\n\treturn result.join(\"\");\n};\n\nfunction _format_int(obj, fmt, lang)\n{\n\tlet work = fmt;\n\n\t// Defaults\n\tlet fill = ' ';\n\tlet align = '>'; // '<', '>', '=' or '^'\n\tlet sign = '-'; // '+', '-' or ' '\n\tlet alternate = false;\n\tlet minimumwidth = 0;\n\tlet type = 'd'; // 'b', 'c', 'd', 'o', 'x', 'X' or 'n'\n\n\t// Determine output type\n\tif (/[bcdoxXn]$/.test(work))\n\t{\n\t\ttype = work.substring(work.length-1);\n\t\twork = work.substring(0, work.length-1);\n\t}\n\n\t// Extract minimum width\n\tif (/\\d+$/.test(work))\n\t{\n\t\tlet minimumwidthStr = /\\d+$/.exec(work);\n\t\twork = work.replace(/\\d+$/, \"\");\n\t\tif (/^0/.test(minimumwidthStr))\n\t\t{\n\t\t\talign = '=';\n\t\t\tfill = '0';\n\t\t}\n\t\tminimumwidth = parseInt(minimumwidthStr);\n\t}\n\n\t// Alternate form?\n\tif (/#$/.test(work))\n\t{\n\t\talternate = true;\n\t\twork = work.substring(0, work.length-1);\n\t}\n\n\t// Determine sign\n\tif (/[+ -]$/.test(work))\n\t{\n\t\tif (type == 'c')\n\t\t\tthrow new ValueError(\"sign not allowed for integer format type 'c'\");\n\t\tsign = work.substring(work.length-1);\n\t\twork = work.substring(0, work.length-1);\n\t}\n\n\t// Extract fill and align char\n\tif (work.length >= 3)\n\t\tthrow new ValueError(\"illegal integer format string \" + _repr(fmt));\n\telse if (work.length == 2)\n\t{\n\t\tif (/[<>=^]$/.test(work))\n\t\t{\n\t\t\talign = work[1];\n\t\t\tfill = work[0];\n\t\t}\n\t\telse\n\t\t\tthrow new ValueError(\"illegal integer format string \" + _repr(fmt));\n\t}\n\telse if (work.length == 1)\n\t{\n\t\tif (/^[<>=^]$/.test(work))\n\t\t\talign = work;\n\t\telse\n\t\t\tthrow new ValueError(\"illegal integer format string \" + _repr(fmt));\n\t}\n\n\t// Basic number formatting\n\tlet neg = obj < 0;\n\n\tif (neg)\n\t\tobj = -obj;\n\n\tlet output;\n\tswitch (type)\n\t{\n\t\tcase 'b':\n\t\t\toutput = obj.toString(2);\n\t\t\tbreak;\n\t\tcase 'c':\n\t\t\tif (neg || obj > 65535)\n\t\t\t\tthrow new ValueError(\"value out of bounds for c format\");\n\t\t\toutput = String.fromCharCode(obj);\n\t\t\tbreak;\n\t\tcase 'd':\n\t\t\toutput = obj.toString();\n\t\t\tbreak;\n\t\tcase 'o':\n\t\t\toutput = obj.toString(8);\n\t\t\tbreak;\n\t\tcase 'x':\n\t\t\toutput = obj.toString(16);\n\t\t\tbreak;\n\t\tcase 'X':\n\t\t\toutput = obj.toString(16).toUpperCase();\n\t\t\tbreak;\n\t\tcase 'n':\n\t\t\t// FIXME: locale formatting\n\t\t\toutput = obj.toString();\n\t\t\tbreak;\n\t}\n\n\t// The rest of the formatting\n\tif (align === '=')\n\t{\n\t\tif (neg || sign !== '-')\n\t\t\t--minimumwidth;\n\t\tif (alternate && (type === 'b' || type === 'o' || type === 'x' || type === 'X'))\n\t\t\tminimumwidth -= 2;\n\n\t\tif (output.length < minimumwidth)\n\t\t\toutput = _str_repeat(fill, minimumwidth-output.length) + output;\n\n\t\tif (alternate && (type === 'b' || type === 'o' || type === 'x' || type === 'X'))\n\t\t\toutput = \"0\" + type + output;\n\n\t\tif (neg)\n\t\t\toutput = \"-\" + output;\n\t\telse if (sign != '-')\n\t\t\toutput = sign + output;\n\t}\n\telse\n\t{\n\t\tif (alternate && (type == 'b' || type == 'o' || type == 'x' || type == 'X'))\n\t\t\toutput = \"0\" + type + output;\n\t\tif (neg)\n\t\t\toutput = \"-\" + output;\n\t\telse if (sign != '-')\n\t\t\toutput = sign + output;\n\t\tif (output.length < minimumwidth)\n\t\t{\n\t\t\tif (align == '<')\n\t\t\t\toutput = output + _str_repeat(fill, minimumwidth-output.length);\n\t\t\telse if (align == '>')\n\t\t\t\toutput = _str_repeat(fill, minimumwidth-output.length) + output;\n\t\t\telse // if (align == '^')\n\t\t\t{\n\t\t\t\tlet pad = minimumwidth - output.length;\n\t\t\t\tlet padBefore = Math.floor(pad/2);\n\t\t\t\tlet padAfter = pad-padBefore;\n\t\t\t\toutput = _str_repeat(fill, padBefore) + output + _str_repeat(fill, padAfter);\n\t\t\t}\n\t\t}\n\t}\n\treturn output;\n};\n\n// Format `obj` using the format string `fmt` in the language `lang`\nexport function _format(obj, fmt, lang)\n{\n\tif (lang === undefined || lang === null)\n\t\tlang = \"en\";\n\telse\n\t{\n\t\tlet translations = {de: null, en: null, fr: null, es: null, it: null, da: null, sv: null, nl: null, pt: null, cs: null, sk: null, pl: null, hr: null, sr: null, ro: null, hu: null, tr: null, ru: null, zh: null, ko: null, ja: null};\n\t\tlang = lang.toLowerCase();\n\t\tif (translations[lang] === undefined)\n\t\t{\n\t\t\tlang = lang.split(/_/)[0];\n\t\t\tif (translations[lang] === undefined)\n\t\t\t\tlang = \"en\";\n\t\t}\n\t}\n\tif (_isdate(obj))\n\t\treturn _format_datetime(obj._date, fmt, lang);\n\tif (_isdatetime(obj))\n\t\treturn _format_datetime(obj, fmt, lang);\n\telse if (_isint(obj))\n\t\treturn _format_int(obj, fmt, lang);\n\telse if (obj === true)\n\t\treturn _format_int(1, fmt, lang);\n\telse if (obj === false)\n\t\treturn _format_int(0, fmt, lang);\n};\n\nexport function _lpad(string, pad, len)\n{\n\tif (typeof(string) === \"number\")\n\t\tstring = string.toString();\n\twhile (string.length < len)\n\t\tstring = pad + string;\n\treturn string;\n};\n\nexport function _rpad(string, pad, len)\n{\n\tif (typeof(string) === \"number\")\n\t\tstring = string.toString();\n\twhile (string.length < len)\n\t\tstring = string + pad;\n\treturn string;\n};\n\n\n// Clone an object and extend it\nexport function _extend(baseobj, attrs)\n{\n\treturn Object.assign(Object.create(baseobj), attrs);\n};\n\n\nclass NoneType extends Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj === null;\n\t}\n};\n\nexport let nonetype = new NoneType(null, \"None\", \"The constant `None`.\");\n\n\nclass UndefinedType extends Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn obj === undefined;\n\t}\n};\n\nexport let undefinedtype = new UndefinedType(null, \"undefined\", \"An undefined variable or object attribute.\");\n\n\nclass BoolType extends Type\n{\n\t// Convert `obj` to bool, according to its \"truth value\"\n\t[symbols.call](obj=false)\n\t{\n\t\tif (obj === undefined || obj === null || obj === false || obj === 0 || obj === \"\")\n\t\t\treturn false;\n\t\telse if (typeof(obj) === \"object\" && typeof(obj[symbols.bool]) === \"function\")\n\t\t\treturn obj[symbols.bool]();\n\t\telse if (_islist(obj))\n\t\t\treturn obj.length !== 0;\n\t\telse if (_ismap(obj) || _isset(obj))\n\t\t\treturn obj.size != 0;\n\t\telse if (_isobject(obj))\n\t\t{\n\t\t\tfor (let key in obj)\n\t\t\t{\n\t\t\t\tif (!obj.hasOwnProperty(key))\n\t\t\t\t\tcontinue;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\tinstancecheck(obj)\n\t{\n\t\treturn typeof(obj) === \"boolean\";\n\t}\n};\n\nexpose(BoolType.prototype, [\"obj\", \"p=\", false], {name: \"bool\"});\n\nexport let booltype = new BoolType(null, \"bool\", \"An boolean value\");\n\n\nclass IntType extends Type\n{\n\t// Convert `obj` to an integer (if `base` is given `obj` must be a string and `base` is the base for the conversion (default is 10))\n\t[symbols.call](obj=0, base=null)\n\t{\n\t\tlet result;\n\t\tif (base !== null)\n\t\t{\n\t\t\tif (typeof(obj) !== \"string\" || !_isint(base))\n\t\t\t\tthrow new TypeError(\"int() requires a string and an integer\");\n\t\t\tresult = parseInt(obj, base);\n\t\t\tif (result.toString() == \"NaN\")\n\t\t\t\tthrow new TypeError(\"invalid literal for int()\");\n\t\t\treturn result;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (typeof(obj) === \"string\")\n\t\t\t{\n\t\t\t\tresult = parseInt(obj);\n\t\t\t\tif (result.toString() == \"NaN\")\n\t\t\t\tthrow new TypeError(\"invalid literal for int()\");\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\telse if (typeof(obj) === \"number\")\n\t\t\t\treturn Math.floor(obj);\n\t\t\telse if (obj === true)\n\t\t\t\treturn 1;\n\t\t\telse if (obj === false)\n\t\t\t\treturn 0;\n\t\t\tthrow new TypeError(\"int() argument must be a string or a number\");\n\t\t}\n\t}\n\n\tinstancecheck(obj)\n\t{\n\t\treturn (typeof(obj) === \"number\") && Math.round(obj) == obj;\n\t}\n};\n\nexpose(IntType.prototype, [\"obj\", \"p=\", 0, \"base\", \"pk=\", null], {name: \"int\"});\n\nexport let inttype = new IntType(null, \"int\", \"An integer\");\n\n\nclass FloatType extends Type\n{\n\t// Convert `obj` to a float\n\t[symbols.call](obj=0.0)\n\t{\n\t\tif (typeof(obj) === \"string\")\n\t\t\treturn parseFloat(obj);\n\t\telse if (typeof(obj) === \"number\")\n\t\t\treturn obj;\n\t\telse if (obj === true)\n\t\t\treturn 1.0;\n\t\telse if (obj === false)\n\t\t\treturn 0.0;\n\t\tthrow new TypeError(\"float() argument must be a string or a number\");\n\t}\n\n\tinstancecheck(obj)\n\t{\n\t\treturn (typeof(obj) === \"number\") && Math.round(obj) != obj;\n\t}\n};\n\nexpose(FloatType.prototype, [\"obj\", \"p=\", 0.0], {name: \"float\"});\n\nexport let floattype = new FloatType(null, \"float\", \"A floating point number\");\n\n\nexport class StrType extends Type\n{\n\t[symbols.call](obj=\"\")\n\t{\n\t\tif (obj === undefined)\n\t\t\treturn \"\";\n\t\telse if (obj === null)\n\t\t\treturn \"\";\n\t\telse if (obj === false)\n\t\t\treturn \"False\";\n\t\telse if (obj === true)\n\t\t\treturn \"True\";\n\t\telse if (typeof(obj) === \"string\")\n\t\t\treturn obj;\n\t\telse if (typeof(obj) === \"number\")\n\t\t\treturn obj.toString();\n\t\telse if (_isdate(obj))\n\t\t\treturn _date_str(obj);\n\t\telse if (_isdatetime(obj))\n\t\t\treturn _datetime_str(obj);\n\t\telse if (_islist(obj))\n\t\t\treturn _list_repr(obj);\n\t\telse if (_isset(obj))\n\t\t\treturn _set_repr(obj);\n\t\telse if (_ismap(obj))\n\t\t\treturn _map_repr(obj);\n\t\telse if (typeof(obj) === \"object\" && typeof(obj[symbols.str]) === \"function\")\n\t\t\treturn obj[symbols.str]();\n\t\telse if (typeof(obj) === \"object\" && typeof(obj[symbols.repr]) === \"function\")\n\t\t\treturn obj[symbols.repr]();\n\t\telse if (_isobject(obj))\n\t\t\treturn _object_repr(obj);\n\t\telse\n\t\t\treturn _repr(obj);\n\t}\n\n\tinstancecheck(obj)\n\t{\n\t\treturn typeof(obj) === \"string\";\n\t}\n\n\tcount(obj, sub, start=null, end=null)\n\t{\n\t\treturn _count(obj, sub, start, end);\n\t}\n\n\tfind(obj, sub, start=null, end=null)\n\t{\n\t\treturn _find(obj, sub, start, end);\n\t}\n\n\trfind(obj, sub, start=null, end=null)\n\t{\n\t\treturn _rfind(obj, sub, start, end);\n\t}\n\n\treplace(obj, old, new_, count=null)\n\t{\n\t\tif (count === null)\n\t\t\tcount = obj.length;\n\n\t\tlet result = [];\n\t\twhile (obj.length)\n\t\t{\n\t\t\tlet pos = obj.indexOf(old);\n\t\t\tif (pos === -1 || !count--)\n\t\t\t{\n\t\t\t\tresult.push(obj);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tresult.push(obj.substr(0, pos), new_);\n\t\t\tobj = obj.substr(pos + old.length);\n\t\t}\n\t\treturn result.join(\"\");\n\t}\n\n\tstrip(obj, chars=null)\n\t{\n\t\tchars = chars || \" \\r\\n\\t\";\n\t\tif (typeof(chars) !== \"string\")\n\t\t\tthrow new TypeError(\"strip() requires a string argument\");\n\n\t\twhile (obj && chars.indexOf(obj[0]) >= 0)\n\t\t\tobj = obj.substr(1);\n\t\twhile (obj && chars.indexOf(obj[obj.length-1]) >= 0)\n\t\t\tobj = obj.substr(0, obj.length-1);\n\t\treturn obj;\n\t}\n\n\tlstrip(obj, chars=null)\n\t{\n\t\tchars = chars || \" \\r\\n\\t\";\n\t\tif (typeof(chars) !== \"string\")\n\t\t\tthrow new TypeError(\"lstrip() requires a string argument\");\n\n\t\twhile (obj && chars.indexOf(obj[0]) >= 0)\n\t\t\tobj = obj.substr(1);\n\t\treturn obj;\n\t}\n\n\trstrip(obj, chars=null)\n\t{\n\t\tchars = chars || \" \\r\\n\\t\";\n\t\tif (typeof(chars) !== \"string\")\n\t\t\tthrow new TypeError(\"rstrip() requires a string argument\");\n\n\t\twhile (obj && chars.indexOf(obj[obj.length-1]) >= 0)\n\t\t\tobj = obj.substr(0, obj.length-1);\n\t\treturn obj;\n\t}\n\n\tsplit(obj, sep=null, maxsplit=null)\n\t{\n\t\tif (sep !== null && typeof(sep) !== \"string\")\n\t\t\tthrow new TypeError(\"split() requires a string\");\n\n\t\tif (maxsplit === null)\n\t\t{\n\t\t\tlet result = obj.split(sep !== null ? sep : /[ \\n\\r\\t]+/);\n\t\t\tif (sep === null)\n\t\t\t{\n\t\t\t\tif (result.length && !result[0].length)\n\t\t\t\t\tresult.splice(0, 1);\n\t\t\t\tif (result.length && !result[result.length-1].length)\n\t\t\t\t\tresult.splice(-1);\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (sep !== null)\n\t\t\t{\n\t\t\t\tlet result = [];\n\t\t\t\twhile (obj.length)\n\t\t\t\t{\n\t\t\t\t\tlet pos = obj.indexOf(sep);\n\t\t\t\t\tif (pos === -1 || !maxsplit--)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.push(obj);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tresult.push(obj.substr(0, pos));\n\t\t\t\t\tobj = obj.substr(pos + sep.length);\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlet result = [];\n\t\t\t\twhile (obj.length)\n\t\t\t\t{\n\t\t\t\t\tobj = strtype.lstrip(obj, null);\n\t\t\t\t\tlet part;\n\t\t\t\t\tif (!maxsplit--)\n\t\t\t\t\t\t part = obj; // Take the rest of the string\n\t\t\t\t\telse\n\t\t\t\t\t\tpart = obj.split(/[ \\n\\r\\t]+/, 1)[0];\n\t\t\t\t\tif (part.length)\n\t\t\t\t\t\tresult.push(part);\n\t\t\t\t\tobj = obj.substr(part.length);\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}\n\t}\n\n\trsplit(obj, sep=null, maxsplit=null)\n\t{\n\t\tif (sep !== null && typeof(sep) !== \"string\")\n\t\t\tthrow new TypeError(\"rsplit() requires a string as second argument\");\n\n\t\tif (maxsplit === null)\n\t\t{\n\t\t\tlet result = obj.split(sep !== null ? sep : /[ \\n\\r\\t]+/);\n\t\t\tif (sep === null)\n\t\t\t{\n\t\t\t\tif (result.length && !result[0].length)\n\t\t\t\t\tresult.splice(0, 1);\n\t\t\t\tif (result.length && !result[result.length-1].length)\n\t\t\t\t\tresult.splice(-1);\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (sep !== null)\n\t\t\t{\n\t\t\t\tlet result = [];\n\t\t\t\twhile (obj.length)\n\t\t\t\t{\n\t\t\t\t\tlet pos = obj.lastIndexOf(sep);\n\t\t\t\t\tif (pos === -1 || !maxsplit--)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.unshift(obj);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tresult.unshift(obj.substr(pos+sep.length));\n\t\t\t\t\tobj = obj.substr(0, pos);\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlet result = [];\n\t\t\t\twhile (obj.length)\n\t\t\t\t{\n\t\t\t\t\tobj = strtype.rstrip(obj);\n\t\t\t\t\tlet part;\n\t\t\t\t\tif (!maxsplit--)\n\t\t\t\t\t\t part = obj; // Take the rest of the string\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tpart = obj.split(/[ \\n\\r\\t]+/);\n\t\t\t\t\t\tpart = part[part.length-1];\n\t\t\t\t\t}\n\t\t\t\t\tif (part.length)\n\t\t\t\t\t\tresult.unshift(part);\n\t\t\t\t\tobj = obj.substr(0, obj.length-part.length);\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}\n\t}\n\n\tsplitlines(obj, keepends=false)\n\t{\n\t\tlet pos = 0;\n\t\tlet startpos;\n\t\tlet lookingAtLineEnd = function lookingAtLineEnd()\n\t\t{\n\t\t\tlet c = obj[pos];\n\t\t\tif (c === '\\n' || c == '\\u000B' || c == '\\u000C' || c == '\\u001C' || c == '\\u001D' || c == '\\u001E' || c == '\\u0085' || c == '\\u2028' || c == '\\u2029')\n\t\t\t\treturn 1;\n\t\t\tif (c === '\\r')\n\t\t\t{\n\t\t\t\tif (pos == length-1)\n\t\t\t\t\treturn 1;\n\t\t\t\tif (obj[pos+1] === '\\n')\n\t\t\t\t\treturn 2;\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\treturn 0;\n\t\t};\n\n\t\tlet result = [], length = obj.length;\n\n\t\tfor (pos = 0, startpos = 0;;)\n\t\t{\n\t\t\tif (pos >= length)\n\t\t\t{\n\t\t\t\tif (startpos != pos)\n\t\t\t\t\tresult.push(obj.substring(startpos));\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\tlet lineendlen = lookingAtLineEnd();\n\t\t\tif (!lineendlen)\n\t\t\t\t++pos;\n\t\t\telse\n\t\t\t{\n\t\t\t\tlet endpos = pos + (keepends ? lineendlen : 0);\n\t\t\t\tresult.push(obj.substring(startpos, endpos));\n\t\t\t\tpos += lineendlen;\n\t\t\t\tstartpos = pos;\n\t\t\t}\n\t\t}\n\t}\n\n\tlower(obj)\n\t{\n\t\treturn obj.toLowerCase();\n\t}\n\n\tupper(obj)\n\t{\n\t\treturn obj.toUpperCase();\n\t}\n\n\tcapitalize(obj)\n\t{\n\t\tif (obj.length)\n\t\t\tobj = obj[0].toUpperCase() + obj.slice(1).toLowerCase();\n\t\treturn obj;\n\t}\n\n\tjoin(obj, iterable)\n\t{\n\t\tlet resultlist = [];\n\t\tfor (let iter = _iter(iterable);;)\n\t\t{\n\t\t\tlet item = iter.next();\n\t\t\tif (item.done)\n\t\t\t\tbreak;\n\t\t\tresultlist.push(item.value);\n\t\t}\n\t\treturn resultlist.join(obj);\n\t}\n\n\tstartswith(obj, prefix)\n\t{\n\t\tif (typeof(prefix) === \"string\")\n\t\t\treturn obj.substr(0, prefix.length) === prefix;\n\t\telse if (_islist(prefix))\n\t\t{\n\t\t\tfor (let singlepre of prefix)\n\t\t\t{\n\t\t\t\tif (obj.substr(0, singlepre.length) === singlepre)\n\t\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\telse\n\t\t\tthrow new TypeError(\"startswith() argument must be string\");\n\t}\n\n\tendswith(obj, suffix)\n\t{\n\t\tif (typeof(suffix) === \"string\")\n\t\t\treturn obj.substr(obj.length-suffix.length) === suffix;\n\t\telse if (_islist(suffix))\n\t\t{\n\t\t\tfor (let singlesuf of suffix)\n\t\t\t{\n\t\t\t\tif (obj.substr(obj.length-singlesuf.length) === singlesuf)\n\t\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\telse\n\t\t\tthrow new TypeError(\"endswith() argument must be string or list of strings\");\n\t}\n};\n\nStrType.prototype.attrs = new Set([\n\t\"split\",\n\t\"rsplit\",\n\t\"splitlines\",\n\t\"strip\",\n\t\"lstrip\",\n\t\"rstrip\",\n\t\"upper\",\n\t\"lower\",\n\t\"capitalize\",\n\t\"startswith\",\n\t\"endswith\",\n\t\"replace\",\n\t\"count\",\n\t\"find\",\n\t\"rfind\",\n\t\"join\"\n]);\n\nexpose(StrType.prototype.count, [\"sub\", \"p\", \"start\", \"p=\", null, \"end\", \"p=\", null]);\nexpose(StrType.prototype.find, [\"sub\", \"p\", \"start\", \"p=\", null, \"end\", \"p=\", null]);\nexpose(StrType.prototype.rfind, [\"sub\", \"p\", \"start\", \"p=\", null, \"end\", \"p=\", null]);\nexpose(StrType.prototype.replace, [\"old\", \"p\", \"new\", \"p\", \"count\", \"p=\", null]);\nexpose(StrType.prototype.strip, [\"chars\", \"p=\", null]);\nexpose(StrType.prototype.lstrip, [\"chars\", \"p=\", null]);\nexpose(StrType.prototype.rstrip, [\"chars\", \"p=\", null]);\nexpose(StrType.prototype.split, [\"sep\", \"pk=\", null, \"maxsplit\", \"pk=\", null]);\nexpose(StrType.prototype.rsplit, [\"sep\", \"pk=\", null, \"maxsplit\", \"pk=\", null]);\nexpose(StrType.prototype.splitlines, [\"keepends\", \"pk=\", false]);\nexpose(StrType.prototype.lower, []);\nexpose(StrType.prototype.upper, []);\nexpose(StrType.prototype.capitalize, []);\nexpose(StrType.prototype.join, [\"iterable\", \"p\"]);\nexpose(StrType.prototype.startswith, [\"prefix\", \"p\"]);\nexpose(StrType.prototype.endswith, [\"suffix\", \"p\"]);\nexpose(StrType.prototype, [\"obj\", \"p=\", \"\"], {name: \"str\"});\n\nexport let strtype = new StrType(null, \"str\", \"A string.\");\n\n\nexport class ListType extends Type\n{\n\t// Convert `obj` to a list\n\t[symbols.call](obj)\n\t{\n\t\tlet iter = _iter(obj);\n\n\t\tlet result = [];\n\t\tfor (;;)\n\t\t{\n\t\t\tlet value = iter.next();\n\t\t\tif (value.done)\n\t\t\t\treturn result;\n\t\t\tresult.push(value.value);\n\t\t}\n\t}\n\n\tinstancecheck(obj)\n\t{\n\t\treturn Object.prototype.toString.call(obj) === \"[object Array]\";\n\t}\n\n\tappend(obj, items)\n\t{\n\t\tfor (let item of items)\n\t\t\tobj.push(item);\n\t\treturn null;\n\t}\n\n\tinsert(obj, pos, items)\n\t{\n\t\tif (pos < 0)\n\t\t\tpos += obj.length;\n\n\t\tfor (let item of items)\n\t\t\tobj.splice(pos++, 0, item);\n\t\treturn null;\n\t}\n\n\tpop(obj, pos)\n\t{\n\t\tif (pos < 0)\n\t\t\tpos += obj.length;\n\n\t\tlet result = obj[pos];\n\t\tobj.splice(pos, 1);\n\t\treturn result;\n\t}\n\n\tcount(obj, sub, start=null, end=null)\n\t{\n\t\treturn _count(obj, sub, start, end);\n\t}\n\n\tfind(obj, sub, start=null, end=null)\n\t{\n\t\treturn _find(obj, sub, start, end);\n\t}\n\n\trfind(obj, sub, start=null, end=null)\n\t{\n\t\treturn _rfind(obj, sub, start, end);\n\t}\n};\n\nListType.prototype.attrs = new Set([\n\t\"append\",\n\t\"insert\",\n\t\"pop\",\n\t\"count\",\n\t\"find\",\n\t\"rfind\"\n]);\n\nexpose(ListType.prototype.append, [\"items\", \"*\"]);\nexpose(ListType.prototype.insert, [\"pos\", \"p\", \"items\", \"*\"]);\nexpose(ListType.prototype.pop, [\"pos\", \"p=\", -1]);\nexpose(ListType.prototype.count, [\"sub\", \"p\", \"start\", \"p=\", null, \"end\", \"p=\", null]);\nexpose(ListType.prototype.find, [\"sub\", \"p\", \"start\", \"p=\", null, \"end\", \"p=\", null]);\nexpose(ListType.prototype.rfind, [\"sub\", \"p\", \"start\", \"p=\", null, \"end\", \"p=\", null]);\nexpose(ListType.prototype, [\"iterable\", \"p=\", []], {name: \"list\"});\n\nexport let listtype = new ListType(null, \"list\", \"A list.\");\n\n\nclass DictType extends Type\n{\n\t[symbols.call](args, kwargs)\n\t{\n\t\tlet result = new Map();\n\t\tthis.update(result, args, kwargs);\n\t\treturn result;\n\t}\n\n\t_ismap(obj)\n\t{\n\t\treturn obj !== null && typeof(obj) === \"object\" && typeof(obj.__proto__) === \"object\" && obj.__proto__ === Map.prototype;\n\t}\n\n\t_isobject(obj)\n\t{\n\t\treturn Object.prototype.toString.call(obj) === \"[object Object]\" && !(obj instanceof Proto);\n\t}\n\n\tinstancecheck(obj)\n\t{\n\t\treturn dicttype._ismap(obj) || dicttype._isobject(obj);\n\t}\n\n\tgetattr(obj, attrname)\n\t{\n\t\tif (_ismap(obj))\n\t\t{\n\t\t\tif (this.attrs.has(attrname))\n\t\t\t{\n\t\t\t\tlet attr = this[attrname];\n\t\t\t\tlet realattr = function realattr(...args) {\n\t\t\t\t\treturn attr.apply(this, [obj, ...args]);\n\t\t\t\t};\n\t\t\t\t// Unfortunately we can't set `realattr.name`;\n\t\t\t\trealattr._ul4_name = attr._ul4_name || attr.name;\n\t\t\t\trealattr._ul4_signature = attr._ul4_signature;\n\t\t\t\trealattr._ul4_needsobject = attr._ul4_needsobject;\n\t\t\t\trealattr._ul4_needscontext = attr._ul4_needscontext;\n\t\t\t\treturn realattr;\n\t\t\t}\n\t\t\telse\n\t\t\t\treturn obj.get(attrname);\n\t\t}\n\t\telse\n\t\t{\n\t\tlet result;\n\t\tif (obj && typeof(obj[symbols.getattr]) === \"function\") // test this before the generic object test\n\t\t\tresult = obj[symbols.getattr](attrname);\n\t\telse\n\t\t\tresult = obj[attrname];\n\t\tif (typeof(result) !== \"function\")\n\t\t\treturn result;\n\t\tlet realresult = function(...args) {\n\t\t\t// We can use `apply` here, as we know that `obj` is a real object.\n\t\t\treturn result.apply(obj, args);\n\t\t};\n\t\trealresult._ul4_name = result._ul4_name || result.name;\n\t\trealresult._ul4_signature = result._ul4_signature;\n\t\trealresult._ul4_needsobject = result._ul4_needsobject;\n\t\trealresult._ul4_needscontext = result._ul4_needscontext;\n\t\treturn realresult;\n\t\t}\n\t}\n\n\tget(obj, key, default_=null)\n\t{\n\t\tif (_ismap(obj))\n\t\t{\n\t\t\tif (obj.has(key))\n\t\t\t\treturn obj.get(key);\n\t\t\treturn default_;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlet result = obj[key];\n\t\t\tif (result === undefined && !obj.hasOwnProperty(key))\n\t\t\t\treturn default_;\n\t\t\treturn result;\n\t\t}\n\t}\n\n\tkeys(obj)\n\t{\n\t\tlet result = [];\n\t\tif (_ismap(obj))\n\t\t{\n\t\t\tfor (let [key, value] of obj)\n\t\t\t\tresult.push(key);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tfor (let key in obj)\n\t\t\t\tresult.push(key);\n\t\t}\n\t\treturn _iter(result);\n\t}\n\n\titems(obj)\n\t{\n\t\tlet result = [];\n\t\tif (_ismap(obj))\n\t\t{\n\t\t\tfor (let [key, value] of obj)\n\t\t\t\tresult.push([key, value]);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tfor (let key in obj)\n\t\t\t\tresult.push([key, obj[key]]);\n\t\t}\n\t\treturn _iter(result);\n\t}\n\n\tvalues(obj)\n\t{\n\t\tlet result = [];\n\t\tif (_ismap(obj))\n\t\t{\n\t\t\tfor (let [key, value] of obj)\n\t\t\t\tresult.push(value);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tfor (let key in obj)\n\t\t\t\tresult.push(obj[key]);\n\t\t}\n\t\treturn _iter(result);\n\t}\n\n\t_set(obj, key, value)\n\t{\n\t\tif (_ismap(obj))\n\t\t\tobj.set(key, value);\n\t\telse\n\t\t\tobj[key] = value;\n\t}\n\n\tupdate(obj, others, kwargs)\n\t{\n\t\tfor (let other of others)\n\t\t{\n\t\t\tif (_ismap(other))\n\t\t\t{\n\t\t\t\tfor (let [key, value] of other)\n\t\t\t\t\tdicttype._set(obj, key, value);\n\t\t\t}\n\t\t\telse if (_isobject(other))\n\t\t\t{\n\t\t\t\tfor (let key in other)\n\t\t\t\t\tdicttype._set(obj, key, other[key]);\n\t\t\t}\n\t\t\telse if (_islist(other))\n\t\t\t{\n\t\t\t\tfor (let item of other)\n\t\t\t\t{\n\t\t\t\t\tif (!_islist(item) || (item.length != 2))\n\t\t\t\t\t\tthrow new TypeError(\"update() requires a dict or a list of (key, value) pairs\");\n\t\t\t\t\tdicttype._set(obj, item[0], item[1]);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t\tthrow new TypeError(\"update() requires a dict or a list of (key, value) pairs\");\n\t\t}\n\t\tfor (let [key, value] of kwargs)\n\t\t\tdicttype._set(obj, key, value);\n\t\treturn null;\n\t}\n\n\tclear(obj)\n\t{\n\t\tif (_ismap(obj))\n\t\t\tobj.clear();\n\t\telse\n\t\t{\n\t\t\tfor (let key in obj)\n\t\t\t\tdelete obj[key];\n\t\t}\n\t\treturn null;\n\t}\n\n\tpop(obj, key, default_=Object)\n\t{\n\t\tif (_ismap(obj))\n\t\t{\n\t\t\tif (obj.has(key))\n\t\t\t{\n\t\t\t\tlet result = obj.get(key);\n\t\t\t\tobj.delete(key);\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tfor (let [key, value] of Object.entries(obj))\n\t\t\t{\n\t\t\t\tdelete obj[key];\n\t\t\t\treturn value;\n\t\t\t}\n\t\t}\n\t\tif (default_ === Object)\n\t\t\tthrow new KeyError(obj, key);\n\t\telse\n\t\t\treturn default_;\n\t}\n};\n\nDictType.prototype.attrs = new Set([\"get\", \"keys\", \"items\", \"values\", \"update\", \"clear\", \"pop\"]);\n\nexpose(DictType.prototype, [\"args\", \"*\", \"kwargs\", \"**\"], {name: \"dict\"});\n\nexpose(DictType.prototype.get, [\"key\", \"p\", \"default\", \"p=\", null]);\nexpose(DictType.prototype.keys, []);\nexpose(DictType.prototype.items, []);\nexpose(DictType.prototype.values, []);\nexpose(DictType.prototype.update, [\"others\", \"*\", \"kwargs\", \"**\"]);\nexpose(DictType.prototype.clear, []);\nexpose(DictType.prototype.pop, [\"key\", \"p\", \"default\", \"p=\", Object]);\n\nexport let dicttype = new DictType(null, \"dict\", \"An object that maps keys to values.\");\n\n\nexport class SetType extends Type\n{\n\t// Convert `obj` to a set\n\t[symbols.call](obj=[])\n\t{\n\t\tlet iter = _iter(obj);\n\n\t\tlet result = new Set();\n\t\tfor (;;)\n\t\t{\n\t\t\tlet value = iter.next();\n\t\t\tif (value.done)\n\t\t\t\treturn result;\n\t\t\tresult.add(value.value);\n\t\t}\n\t}\n\n\tinstancecheck(obj)\n\t{\n\t\treturn Object.prototype.toString.call(obj) === \"[object Set]\";\n\t}\n\n\tadd(obj, items)\n\t{\n\t\tfor (let item of items)\n\t\t\tobj.add(item);\n\t}\n\n\tclear(obj)\n\t{\n\t\tobj.clear();\n\t\treturn null;\n\t}\n};\n\nSetType.prototype.attrs = new Set([\"add\", \"clear\"]);\n\nexpose(SetType.prototype.add, [\"items\", \"*\"]);\nexpose(SetType.prototype.clear, []);\nexpose(SetType.prototype, [\"iterable\", \"p=\", []], {name: \"set\"});\n\nexport let settype = new SetType(null, \"set\", \"A set.\");\n\n\nexport class DateType extends Type\n{\n\t// Return a `Date` object from the arguments passed in\n\t[symbols.call](year, month, day)\n\t{\n\t\treturn new Date_(year, month, day);\n\t}\n\n\tinstancecheck(obj)\n\t{\n\t\treturn (obj instanceof Date_);\n\t}\n\n\tweekday(obj)\n\t{\n\t\treturn datetimetype.weekday(obj._date);\n\t}\n\n\tcalendar(obj, firstweekday=0, mindaysinfirstweek=4)\n\t{\n\t\treturn datetimetype.calendar(obj._date, firstweekday, mindaysinfirstweek);\n\t}\n\n\tweek(obj, firstweekday=0, mindaysinfirstweek=4)\n\t{\n\t\treturn datetimetype.calendar(obj._date, firstweekday, mindaysinfirstweek)[1];\n\t}\n\n\tday(obj)\n\t{\n\t\treturn obj._date.getDate();\n\t}\n\n\tmonth(obj)\n\t{\n\t\treturn obj._date.getMonth()+1;\n\t}\n\n\tyear(obj)\n\t{\n\t\treturn obj._date.getFullYear();\n\t}\n\n\tdate(obj)\n\t{\n\t\treturn obj;\n\t}\n\n\tmimeformat(obj)\n\t{\n\t\tlet weekdayname = [\"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\"];\n\t\tlet monthname = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\n\t\tlet d = obj._date;\n\n\t\treturn weekdayname[datetimetype.weekday(d)] + \", \" + _lpad(d.getDate(), \"0\", 2) + \" \" + monthname[d.getMonth()] + \" \" + d.getFullYear();\n\t}\n\n\tisoformat(obj)\n\t{\n\t\tlet d = obj._date;\n\t\treturn d.getFullYear() + \"-\" + _lpad((d.getMonth()+1).toString(), \"0\", 2) + \"-\" + _lpad(d.getDate().toString(), \"0\", 2);\n\t}\n\n\tyearday(obj)\n\t{\n\t\treturn datetimetype.yearday(obj._date);\n\t}\n};\n\nDateType.prototype.attrs = new Set([\n\t\"weekday\",\n\t\"week\",\n\t\"calendar\",\n\t\"day\",\n\t\"month\",\n\t\"year\",\n\t\"date\",\n\t\"mimeformat\",\n\t\"isoformat\",\n\t\"yearday\"\n]);\n\nexpose(DateType.prototype.weekday, []);\nexpose(DateType.prototype.calendar, [\"firstweekday\", \"pk=\", 0, \"mindaysinfirstweek\", \"pk=\", 4]);\nexpose(DateType.prototype.week, [\"firstweekday\", \"pk=\", 0, \"mindaysinfirstweek\", \"pk=\", 4]);\nexpose(DateType.prototype.day, []);\nexpose(DateType.prototype.month, []);\nexpose(DateType.prototype.year, []);\nexpose(DateType.prototype.date, []);\nexpose(DateType.prototype.mimeformat, []);\nexpose(DateType.prototype.isoformat, []);\nexpose(DateType.prototype.yearday, []);\nexpose(DateType.prototype, [\"year\", \"pk\", \"month\", \"pk\", \"day\", \"pk\"], {name: \"date\"});\n\nexport let datetype = new DateType(null, \"date\", \"A date\");\n\n\nexport class DateTimeType extends Type\n{\n\t[symbols.call](year, month, day, hour=0, minute=0, second=0, microsecond=0)\n\t{\n\t\treturn new Date(year, month-1, day, hour, minute, second, microsecond/1000);\n\t}\n\n\tinstancecheck(obj)\n\t{\n\t\treturn Object.prototype.toString.call(obj) == \"[object Date]\";\n\t}\n\n\tweekday(obj)\n\t{\n\t\tlet d = obj.getDay();\n\t\treturn d ? d-1 : 6;\n\t}\n\n\tcalendar(obj, firstweekday=0, mindaysinfirstweek=4)\n\t{\n\t\t// Normalize parameters\n\t\tfirstweekday = _mod(firstweekday, 7);\n\t\tif (mindaysinfirstweek < 1)\n\t\t\tmindaysinfirstweek = 1;\n\t\telse if (mindaysinfirstweek > 7)\n\t\t\tmindaysinfirstweek = 7;\n\n\t\t// `obj` might be in the first week of the next year, or last week of\n\t\t// the previous year, so we might have to try those too.\n\t\tfor (let offset = +1; offset >= -1; --offset)\n\t\t{\n\t\t\tlet year = obj.getFullYear() + offset;\n\t\t\t// `refdate` will always be in week 1\n\t\t\tlet refDate = new Date(year, 0, mindaysinfirstweek);\n\t\t\t// Go back to the start of `refdate`s week (i.e. day 1 of week 1)\n\t\t\tlet weekDayDiff = _mod(this.weekday(refDate) - firstweekday, 7);\n\t\t\tlet weekStartYear = refDate.getFullYear();\n\t\t\tlet weekStartMonth = refDate.getMonth();\n\t\t\tlet weekStartDay = refDate.getDate() - weekDayDiff;\n\t\t\tlet weekStart = new Date(weekStartYear, weekStartMonth, weekStartDay);\n\t\t\t// Is our date `obj` at or after day 1 of week 1?\n\t\t\tif (obj.getTime() >= weekStart.getTime())\n\t\t\t{\n\t\t\t\tlet diff = SubAST.prototype._do(obj, weekStart);\n\t\t\t\t// Add 1, because the first week is week 1, not week 0\n\t\t\t\tlet week = Math.floor(diff.days()/7) + 1;\n\t\t\t\treturn [year, week, this.weekday(obj)];\n\t\t\t}\n\t\t}\n\t}\n\n\tweek(obj, firstweekday=0, mindaysinfirstweek=4)\n\t{\n\t\treturn this.calendar(obj, firstweekday, mindaysinfirstweek)[1];\n\t}\n\n\tday(obj)\n\t{\n\t\treturn obj.getDate();\n\t}\n\n\tmonth(obj)\n\t{\n\t\treturn obj.getMonth()+1;\n\t}\n\n\tyear(obj)\n\t{\n\t\treturn obj.getFullYear();\n\t}\n\n\thour(obj)\n\t{\n\t\treturn obj.getHours();\n\t}\n\n\tminute(obj)\n\t{\n\t\treturn obj.getMinutes();\n\t}\n\n\tsecond(obj)\n\t{\n\t\treturn obj.getSeconds();\n\t}\n\n\tmicrosecond(obj)\n\t{\n\t\treturn obj.getMilliseconds() * 1000;\n\t}\n\n\tdate(obj)\n\t{\n\t\treturn new Date_(datetimetype.year(obj), datetimetype.month(obj), datetimetype.day(obj));\n\t}\n\n\tmimeformat(obj)\n\t{\n\t\tlet weekdayname = [\"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\"];\n\t\tlet monthname = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\n\n\t\treturn weekdayname[datetimetype.weekday(obj)] + \", \" + _lpad(obj.getDate(), \"0\", 2) + \" \" + monthname[obj.getMonth()] + \" \" + obj.getFullYear() + \" \" + _lpad(obj.getHours(), \"0\", 2) + \":\" + _lpad(obj.getMinutes(), \"0\", 2) + \":\" + _lpad(obj.getSeconds(), \"0\", 2) + \" GMT\";\n\t}\n\n\tisoformat(obj)\n\t{\n\t\tlet year = obj.getFullYear();\n\t\tlet month = obj.getMonth()+1;\n\t\tlet day = obj.getDate();\n\t\tlet hour = obj.getHours();\n\t\tlet minute = obj.getMinutes();\n\t\tlet second = obj.getSeconds();\n\t\tlet ms = obj.getMilliseconds();\n\t\tlet result = year + \"-\" + _lpad(month.toString(), \"0\", 2) + \"-\" + _lpad(day.toString(), \"0\", 2) + \"T\" + _lpad(hour.toString(), \"0\", 2) + \":\" + _lpad(minute.toString(), \"0\", 2) + \":\" + _lpad(second.toString(), \"0\", 2);\n\t\tif (ms)\n\t\t\tresult += \".\" + _lpad(ms.toString(), \"0\", 3) + \"000\";\n\t\treturn result;\n\t}\n\n\tyearday(obj)\n\t{\n\t\tlet leap = _isleap(obj) ? 1 : 0;\n\t\tlet day = obj.getDate();\n\t\tswitch (obj.getMonth())\n\t\t{\n\t\t\tcase 0:\n\t\t\t\treturn day;\n\t\t\tcase 1:\n\t\t\t\treturn 31 + day;\n\t\t\tcase 2:\n\t\t\t\treturn 31 + 28 + leap + day;\n\t\t\tcase 3:\n\t\t\t\treturn 31 + 28 + leap + 31 + day;\n\t\t\tcase 4:\n\t\t\t\treturn 31 + 28 + leap + 31 + 30 + day;\n\t\t\tcase 5:\n\t\t\t\treturn 31 + 28 + leap + 31 + 30 + 31 + day;\n\t\t\tcase 6:\n\t\t\t\treturn 31 + 28 + leap + 31 + 30 + 31 + 30 + day;\n\t\t\tcase 7:\n\t\t\t\treturn 31 + 28 + leap + 31 + 30 + 31 + 30 + 31 + day;\n\t\t\tcase 8:\n\t\t\t\treturn 31 + 28 + leap + 31 + 30 + 31 + 30 + 31 + 31 + day;\n\t\t\tcase 9:\n\t\t\t\treturn 31 + 28 + leap + 31 + 30 + 31 + 30 + 31 + 31 + 30 + day;\n\t\t\tcase 10:\n\t\t\t\treturn 31 + 28 + leap + 31 + 30 + 31 + 30 + 31 + 31 + 30 + 31 + day;\n\t\t\tcase 11:\n\t\t\t\treturn 31 + 28 + leap + 31 + 30 + 31 + 30 + 31 + 31 + 30 + 31 + 30 + day;\n\t\t}\n\t}\n};\n\nDateTimeType.prototype.attrs = new Set([\n\t\"weekday\",\n\t\"week\",\n\t\"calendar\",\n\t\"day\",\n\t\"month\",\n\t\"year\",\n\t\"hour\",\n\t\"minute\",\n\t\"second\",\n\t\"microsecond\",\n\t\"date\",\n\t\"mimeformat\",\n\t\"isoformat\",\n\t\"yearday\"\n]);\n\nexpose(DateTimeType.prototype.weekday, []);\nexpose(DateTimeType.prototype.calendar, [\"firstweekday\", \"pk=\", 0, \"mindaysinfirstweek\", \"pk=\", 4]);\nexpose(DateTimeType.prototype.week, [\"firstweekday\", \"pk=\", 0, \"mindaysinfirstweek\", \"pk=\", 4]);\nexpose(DateTimeType.prototype.day, []);\nexpose(DateTimeType.prototype.month, []);\nexpose(DateTimeType.prototype.year, []);\nexpose(DateTimeType.prototype.hour, []);\nexpose(DateTimeType.prototype.minute, []);\nexpose(DateTimeType.prototype.second, []);\nexpose(DateTimeType.prototype.microsecond, []);\nexpose(DateTimeType.prototype.date, []);\nexpose(DateTimeType.prototype.mimeformat, []);\nexpose(DateTimeType.prototype.isoformat, []);\nexpose(DateTimeType.prototype.yearday, []);\nexpose(DateTimeType.prototype, [\"year\", \"pk\", \"month\", \"pk\", \"day\", \"pk\", \"hour\", \"pk=\", 0, \"minute\", \"pk=\", 0, \"second\", \"pk=\", 0, \"microsecond\", \"pk=\", 0], {name: \"datetime\"});\n\nexport let datetimetype = new DateTimeType(null, \"datetime\", \"A datetime\");\n\n\nexport class FunctionType extends Type\n{\n\tinstancecheck(obj)\n\t{\n\t\treturn typeof(obj) === \"function\" || _istemplate(obj);\n\t}\n};\n\nexport let functiontype = new FunctionType(null, \"function\", \"A callable function\");\n\n\nexport class GenericType extends Type\n{\n\tconstructor(constructor)\n\t{\n\t\tsuper(constructor.classmodule || null, constructor.classname || constructor.name, constructor.classdoc || null);\n\t\tthis._constructor = constructor;\n\t}\n\n\tgetattr(obj, attrname)\n\t{\n\t\tif (typeof(obj[symbols.getattr]) === \"function\")\n\t\t\treturn obj[symbols.getattr](attrname);\n\t\telse\n\t\t\tthrow new AttributeError(obj, attrname);\n\t}\n\n\thasattr(obj, attrname)\n\t{\n\t\tif (typeof(obj[symbols.getattr]) === \"function\")\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tobj[symbols.getattr](attrname);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tcatch (exc)\n\t\t\t{\n\t\t\t\tif (exc instanceof AttributeError && exc.obj === object)\n\t\t\t\t\treturn false;\n\t\t\t\telse\n\t\t\t\t\tthrow exc;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\treturn false;\n\t}\n\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof this._constructor;\n\t}\n}\n\n\nexport class Context\n{\n\tconstructor(vars=null, globals=null)\n\t{\n\t\tthis.vars = vars || {};\n\t\tthis.globals = _extend(builtins, globals || {});\n\t\tthis.indents = [];\n\t\tthis.escapes = [];\n\t\tthis._output = [];\n\t}\n\n\t/* Return a clone of the `Context`, but with a fresh empty `vars` objects that inherits from the previous one.\n\t * This is used by the various comprehensions to avoid leaking loop variables.\n\t */\n\tinheritvars()\n\t{\n\t\tlet context = Object.create(this);\n\t\tcontext.vars = Object.create(this.vars);\n\t\treturn context;\n\t}\n\n\t/* Return a clone of the `Context` with one additional indentation (this is used by `RenderAST`) */\n\twithindent(indent)\n\t{\n\t\tlet context = Object.create(this);\n\t\tif (indent !== null)\n\t\t{\n\t\t\tcontext.indents = this.indents.slice();\n\t\t\tcontext.indents.push(indent);\n\t\t}\n\t\treturn context;\n\t}\n\n\t/* Return a clone of the `Context` with the output buffer replaced (this is used by `renders` to collect the output in a separate buffer) */\n\treplaceoutput()\n\t{\n\t\tlet context = Object.create(this);\n\t\tcontext._output = [];\n\t\treturn context;\n\t}\n\n\treplacevars(vars)\n\t{\n\t\tlet context = Object.create(this);\n\t\tcontext.vars = vars;\n\t\treturn context;\n\t}\n\n\toutput(value)\n\t{\n\t\tfor (let escape of this.escapes)\n\t\t\tvalue = escape(value);\n\t\tthis._output.push(value);\n\t}\n\n\tgetoutput()\n\t{\n\t\treturn this._output.join(\"\");\n\t}\n\n\tget(name)\n\t{\n\t\tlet result = this.vars[name];\n\t\tif (result === undefined)\n\t\t\tresult = this.globals[name];\n\t\treturn result;\n\t}\n\n\tset(name, value)\n\t{\n\t\tthis.vars[name] = value;\n\t}\n};\n\n/// Exceptions\n\n// Note that extending `Error` doesn't work, so we do it the \"clasr\" way\nexport function Exception(message, fileName, lineNumber)\n{\n\tlet instance = new Error(message, fileName, lineNumber);\n\tif (Object.setPrototypeOf)\n\t\tObject.setPrototypeOf(instance, Object.getPrototypeOf(this));\n\telse\n\t\tinstance.__proto__ = this;\n\tinstance.__id__ = _nextid++;\n\tinstance.context = null;\n\treturn instance;\n};\n\nException.prototype = Object.create(Error.prototype, {\n\tconstructor: {\n\t\tvalue: Error,\n\t\tenumerable: false,\n\t\twritable: true,\n\t\tconfigurable: true\n\t}\n});\n\nif (Object.setPrototypeOf)\n\tObject.setPrototypeOf(Exception, Error);\nelse\n\tException.__proto__ = Error;\n\nException.prototype[symbols.getattr] = function getattr(attrname)\n{\n\tswitch (attrname)\n\t{\n\t\tcase \"context\":\n\t\t\treturn this.context;\n\t\tdefault:\n\t\t\tthrow new AttributeError(this, attrname);\n\t}\n};\n\n// Exceptions used internally by UL4 for flow control\nexport class InternalException extends Exception\n{\n};\n\n// Control flow exceptions\nexport class ReturnException extends InternalException\n{\n\tconstructor(result)\n\t{\n\t\tsuper(\"return\");\n\t\tthis.result = result;\n\t}\n};\n\nexport class BreakException extends InternalException\n{\n\tconstructor()\n\t{\n\t\tsuper(\"break\");\n\t}\n};\n\nexport class ContinueException extends InternalException\n{\n\tconstructor()\n\t{\n\t\tsuper(\"continue\");\n\t}\n};\n\n// Real exceptions raised by various parts of UL4\nexport class SyntaxError extends Exception\n{\n};\n\nexport class LValueRequiredError extends SyntaxError\n{\n\tconstructor()\n\t{\n\t\tsuper(\"lvalue required\");\n\t}\n};\n\nexport class TypeError extends Exception\n{\n};\n\nexport class ValueError extends Exception\n{\n};\n\nexport class ArgumentError extends Exception\n{\n};\n\nexport class ParameterError extends Exception\n{\n};\n\nexport class NotSubscriptableError extends Exception\n{\n\tconstructor(obj)\n\t{\n\t\tsuper(\"Object of type \" + _type(obj).fullname() + \" is not subscriptable\");\n\t\tthis.obj = obj;\n\t}\n\n\ttoString()\n\t{\n\t\treturn \"Object of type \" + _type(this.obj).fullname() + \" is not subscriptable\";\n\t}\n};\n\nexport class ZeroDivisionError extends Exception\n{\n\tconstructor()\n\t{\n\t\tsuper(\"division by zero\");\n\t}\n};\n\nexport class IndexError extends Exception\n{\n\tconstructor(obj, index)\n\t{\n\t\tsuper(\"index \" + _repr(index) + \" out of range\");\n\t\tthis.obj = obj;\n\t\tthis.index = index;\n\t}\n\n\ttoString()\n\t{\n\t\treturn \"index \" + this.index + \" out of range for \" + _type(this.obj).fullname();\n\t}\n};\n\nexport class AttributeError extends Exception\n{\n\tconstructor(obj, attrname)\n\t{\n\t\tsuper(\"object of type \" + _type(obj).fullname() + \" has no attribute \" + _repr(attrname));\n\t\tthis.obj = obj;\n\t\tthis.attrname = attrname;\n\t}\n};\n\nexport class KeyError extends Exception\n{\n\tconstructor(obj, key)\n\t{\n\t\tsuper(\"key \"  + _repr(key) + \" not found in object of type \" + _type(obj).fullname());\n\t\tthis.obj = obj;\n\t\tthis.key = key;\n\t}\n};\n\nexport class NotImplementedError extends Exception\n{\n};\n\n/// Exception that wraps other exceptions while they bubble up the stack\nexport class LocationError extends Exception\n{\n\tconstructor(location)\n\t{\n\t\tsuper(\"nested exception in \" + _repr(location));\n\t\tthis.location = location;\n\t}\n\n\t_templateprefix()\n\t{\n\t\tlet template = this.location.template;\n\t\tlet out = [];\n\t\tif (template.parenttemplate !== null)\n\t\t\tout.push(\"in local template \");\n\t\telse\n\t\t\tout.push(\"in template \");\n\t\tlet first = true;\n\t\twhile (template != null)\n\t\t{\n\t\t\tif (first)\n\t\t\t\tfirst = false;\n\t\t\telse\n\t\t\t\tout.push(\" in \");\n\t\t\tout.push(template.name ? _repr(template.name) : \"(unnamed)\");\n\t\t\ttemplate = template.parenttemplate;\n\t\t}\n\t\treturn out.join(\"\");\n\t}\n\n\ttoString()\n\t{\n\t\tlet template = this.location.template;\n\t\tlet templateprefix = this._templateprefix();\n\n\t\tlet prefix = this.location.startsourceprefix;\n\t\tlet code = this.location.startsource;\n\t\tlet suffix = this.location.startsourcesuffix;\n\t\tprefix = _repr(prefix).slice(1, -1);\n\t\tcode = _repr(code).slice(1, -1);\n\t\tsuffix = _repr(suffix).slice(1, -1);\n\n\t\tlet text = prefix + code + suffix;\n\t\tlet underline = _str_repeat(\"\\u00a0\", prefix.length) + _str_repeat(\"~\", code.length);\n\n\t\tlet pos = \"offset \" + this.location.pos.start + \":\" + this.location.pos.stop + \"; line \" + this.location.startline + \"; col \" + this.location.startcol;\n\n\t\tlet message = templateprefix + \": \" + pos + \"\\n\" + text + \"\\n\" + underline;\n\t\treturn message;\n\t}\n\n\t[symbols.getattr](attrname)\n\t{\n\t\tswitch (attrname)\n\t\t{\n\t\t\tcase \"context\":\n\t\t\t\treturn this.context;\n\t\t\tcase \"location\":\n\t\t\t\treturn this.location;\n\t\t\tdefault:\n\t\t\t\tthrow new AttributeError(this, attrname);\n\t\t}\n\t}\n};\n\n/// Classes for the syntax tree\nexport class AST extends Proto\n{\n\tstatic classmodule = \"ul4\";\n\tstatic classdoc = \"Base class for all UL4 syntax tree nodes.\";\n\n\tconstructor(template, startpos, stoppos=null)\n\t{\n\t\tsuper();\n\t\tthis.template = template;\n\t\tthis.startpos = startpos;\n\t\tthis._startline = null;\n\t\tthis._startcol = null;\n\t\tthis.stoppos = stoppos;\n\t\tthis._stopline = null;\n\t\tthis._stopcol = null;\n\t}\n\n\tget startline()\n\t{\n\t\tif (this._startline === null)\n\t\t\t[this._startline, this._startcol] = _lineColFromPos(this.template._source, this.startpos.start);\n\t\treturn this._startline;\n\t}\n\n\tget startcol()\n\t{\n\t\tif (this._startcol === null)\n\t\t\t[this._startline, this._startcol] = _lineColFromPos(this.template._source, this.startpos.start);\n\t\treturn this._startcol;\n\t}\n\n\tget startsource()\n\t{\n\t\treturn this.startpos.of(this.template._source);\n\t}\n\n\tget startsourceprefix()\n\t{\n\t\treturn _sourceprefix(this.template._source, this.startpos.start);\n\t}\n\n\tget startsourcesuffix()\n\t{\n\t\treturn _sourcesuffix(this.template._source, this.startpos.stop);\n\t}\n\n\tget fullsource()\n\t{\n\t\treturn this.template._source;\n\t}\n\n\tget pos()\n\t{\n\t\tif (this.stoppos === null)\n\t\t\treturn this.startpos;\n\t\telse\n\t\t\treturn new slice(this.startpos.start, this.stoppos.stop);\n\t}\n\n\tget source()\n\t{\n\t\treturn this.pos.of(this.template._source);\n\t}\n\n\tget sourceprefix()\n\t{\n\t\treturn _sourceprefix(this.template._source, this.pos.start);\n\t}\n\n\tget sourcesuffix()\n\t{\n\t\treturn _sourcesuffix(this.template._source, this.pos.stop);\n\t}\n\n\tget stopline()\n\t{\n\t\tif (this._stopline === null)\n\t\t\t[this._stopline, this._stopcol] = _lineColFromPos(this.template._source, this.stoppos.stop);\n\t\treturn this._stopline;\n\t}\n\n\tget stopcol()\n\t{\n\t\tif (this._stopcol === null)\n\t\t\t[this._stopline, this._stopcol] = _lineColFromPos(this.template._source, this.stoppos.stop);\n\t\treturn this._stopcol;\n\t}\n\n\tget stopsource()\n\t{\n\t\treturn this.stoppos != null ? this.stoppos.of(this.template._source) : null;\n\t}\n\n\tget stopsourceprefix()\n\t{\n\t\treturn this.stoppos != null ? _sourceprefix(this.template._source, this.stoppos.start) : null;\n\t}\n\n\tget stopsourcesuffix()\n\t{\n\t\treturn this.stoppos != null ? _sourcesuffix(this.template._source, this.stoppos.stop) : null;\n\t}\n\n\t[symbols.getattr](attrname)\n\t{\n\t\tif (\n\t\t\tattrname === \"type\" ||\n\t\t\tattrname === \"startpos\" ||\n\t\t\tattrname === \"startline\" ||\n\t\t\tattrname === \"startcol\" ||\n\t\t\tattrname === \"startsource\" ||\n\t\t\tattrname === \"startsourceprefix\" ||\n\t\t\tattrname === \"startsourcesuffix\" ||\n\t\t\tattrname === \"pos\" ||\n\t\t\tattrname === \"source\" ||\n\t\t\tattrname === \"sourceprefix\" ||\n\t\t\tattrname === \"sourcesuffix\" ||\n\t\t\tattrname === \"fullsource\"\n\t\t)\n\t\t\treturn this[attrname];\n\t\telse if (this._ul4onattrs.indexOf(attrname) >= 0)\n\t\t\treturn this[attrname];\n\t\tthrow new AttributeError(this, attrname);\n\t}\n\n\t[symbols.setitem](attrname, value)\n\t{\n\t\tthrow new TypeError(\"object is immutable\");\n\t}\n\n\t[symbols.str]()\n\t{\n\t\tlet out = [];\n\t\tthis._str(out);\n\t\treturn _formatsource(out);\n\t}\n\n\t[symbols.repr]()\n\t{\n\t\tlet out = [];\n\t\tthis._repr(out);\n\t\treturn _formatsource(out);\n\t}\n\n\t_decorate_exception(exc)\n\t{\n\t\twhile (exc.context !== undefined && exc.context !== null)\n\t\t\texc = exc.context;\n\t\texc.context = new LocationError(this);\n\t}\n\n\t_handle_eval(context)\n\t{\n\t\ttry\n\t\t{\n\t\t\treturn this._eval(context);\n\t\t}\n\t\tcatch (exc)\n\t\t{\n\t\t\tif (!exc.context)\n\t\t\t\tthis._decorate_exception(exc);\n\t\t\tthrow exc;\n\t\t}\n\t}\n\n\t_handle_eval_set(context, value)\n\t{\n\t\ttry\n\t\t{\n\t\t\treturn this._eval_set(context, value);\n\t\t}\n\t\tcatch (exc)\n\t\t{\n\t\t\tif (!(exc instanceof LocationError))\n\t\t\t\tthis._decorate_exception(exc);\n\t\t\tthrow exc;\n\t\t}\n\t}\n\n\t_eval_set(context, value)\n\t{\n\t\tthrow new LValueRequiredError();\n\t}\n\n\t_handle_eval_modify(context, operator, value)\n\t{\n\t\ttry\n\t\t{\n\t\t\treturn this._eval_modify(context, operator, value);\n\t\t}\n\t\tcatch (exc)\n\t\t{\n\t\t\tif (!(exc instanceof LocationError))\n\t\t\t\tthis._decorate_exception(exc);\n\t\t\tthrow exc;\n\t\t}\n\t}\n\n\t_eval_modify(context, operator, value)\n\t{\n\t\tthrow new LValueRequiredError();\n\t}\n\n\t_repr(out)\n\t{\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(this.source.replace(/\\r?\\n/g, ' '));\n\t}\n\n\tul4ondump(encoder)\n\t{\n\t\tfor (let attrname of this._ul4onattrs)\n\t\t\tencoder.dump(this[attrname]);\n\t}\n\n\tul4onload(decoder)\n\t{\n\t\tfor (let attrname of this._ul4onattrs)\n\t\t\tthis[attrname] = decoder.load();\n\t}\n};\n\n// used in ul4ondump/ul4ondump to automatically dump these attributes\nAST.prototype._ul4onattrs = [\"template\", \"startpos\"];\n\nexport class TextAST extends AST\n{\n\tstatic classdoc = \"AST node for literal text (i.e. the stuff between tags).\";\n\n\tconstructor(template, pos)\n\t{\n\t\tsuper(template, pos);\n\t}\n\n\tget text()\n\t{\n\t\treturn this.source;\n\t}\n\n\t_eval(context)\n\t{\n\t\tcontext.output(this.text);\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(\"text \", _repr(this.text));\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<\", this.constructor.name, \" \", _repr(this.text), \">\");\n\t}\n};\n\nexport class IndentAST extends TextAST\n{\n\tstatic classdoc = \"AST node for literal text that is an indentation at the start of the line.\";\n\n\tconstructor(template, pos, text)\n\t{\n\t\tsuper(template, pos);\n\t\tthis._text = text;\n\t}\n\n\tget text()\n\t{\n\t\tif (this.template !== undefined)\n\t\t\treturn this._text === null ? this.source : this._text;\n\t\telse\n\t\t\treturn null;\n\t}\n\n\t_eval(context)\n\t{\n\t\tfor (let indent of context.indents)\n\t\t\tcontext.output(indent);\n\t\tcontext.output(this.text);\n\t}\n\n\tul4ondump(encoder)\n\t{\n\t\tsuper.ul4ondump(encoder);\n\n\t\tif (this._text === this.source)\n\t\t\tencoder.dump(null);\n\t\telse\n\t\t\tencoder.dump(this._text);\n\t}\n\n\tul4onload(decoder)\n\t{\n\t\tsuper.ul4onload(decoder);\n\t\tthis._text = decoder.load();\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(\"indent \", _repr(this.text));\n\t}\n};\n\nexport class LineEndAST extends TextAST\n{\n\tstatic classdoc = \"AST node for literal text that is the end of a line.\";\n\n\t_str(out)\n\t{\n\t\tout.push(\"lineend \", _repr(this.text));\n\t}\n};\n\nexport class CodeAST extends AST\n{\n\tstatic classdoc = \"The base class of all AST nodes that are not literal text.\";\n};\n\nexport class ConstAST extends CodeAST\n{\n\tstatic classdoc = \"AST node for a constant value.\";\n\n\tconstructor(template, pos, value)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.value = value;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<\", this.constructor.name, \" \", _repr(this.value), \">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\treturn this.value;\n\t}\n};\n\nConstAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"value\"]);\n\nexport class ItemArgBase extends CodeAST\n{\n\t_handle_eval_list(context, result)\n\t{\n\t\ttry\n\t\t{\n\t\t\treturn this._eval_list(context, result);\n\t\t}\n\t\tcatch (exc)\n\t\t{\n\t\t\tif (!(exc instanceof InternalException) && !(exc instanceof LocationError))\n\t\t\t\tthis._decorate_exception(exc);\n\t\t\tthrow exc;\n\t\t}\n\t}\n\n\t_handle_eval_set(context, result)\n\t{\n\t\ttry\n\t\t{\n\t\t\treturn this._eval_set(context, result);\n\t\t}\n\t\tcatch (exc)\n\t\t{\n\t\t\tif (!(exc instanceof InternalException) && !(exc instanceof LocationError))\n\t\t\t\tthis._decorate_exception(exc);\n\t\t\tthrow exc;\n\t\t}\n\t}\n\n\t_handle_eval_dict(context, result)\n\t{\n\t\ttry\n\t\t{\n\t\t\treturn this._eval_dict(context, result);\n\t\t}\n\t\tcatch (exc)\n\t\t{\n\t\t\tif (!(exc instanceof InternalException) && !(exc instanceof LocationError))\n\t\t\t\tthis._decorate_exception(exc);\n\t\t\tthrow exc;\n\t\t}\n\t}\n\n\t_handle_eval_call(context, args, kwargs)\n\t{\n\t\ttry\n\t\t{\n\t\t\treturn this._eval_call(context, args, kwargs);\n\t\t}\n\t\tcatch (exc)\n\t\t{\n\t\t\tif (!(exc instanceof InternalException) && !(exc instanceof LocationError))\n\t\t\t\tthis._decorate_exception(exc);\n\t\t\tthrow exc;\n\t\t}\n\t}\n};\n\nexport class SeqItemAST extends ItemArgBase\n{\n\tstatic classdoc = \"AST node for an item in a list/set \\\"literal\\\" (e.g. ``{x, y}`` or ``[x, y]``)\";\n\n\tconstructor(template, pos, value)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.value = value;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<\", this.constructor.name, \" value=\", _repr(this.value), \">\");\n\t}\n\n\t_eval_list(context, result)\n\t{\n\t\tlet value = this.value._handle_eval(context);\n\t\tresult.push(value);\n\t}\n\n\t_eval_set(context, result)\n\t{\n\t\tlet value = this.value._handle_eval(context);\n\t\tresult.add(value);\n\t}\n};\n\nSeqItemAST.prototype._ul4onattrs = ItemArgBase.prototype._ul4onattrs.concat([\"value\"]);\n\nexport class UnpackSeqItemAST extends ItemArgBase\n{\n\tstatic classdoc = \"AST node for an ``*`` unpacking expression in a list/set \\\"literal\\\"\\n(e.g. the ``y`` in ``{x, *y}`` or ``[x, *y]``)\";\n\n\tconstructor(template, pos, value)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.value = value;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<\", this.constructor.name, \" value=\", _repr(this.value), \">\");\n\t}\n\n\t_eval_list(context, result)\n\t{\n\t\tlet value = this.value._handle_eval(context);\n\t\tfor (let iter = _iter(value);;)\n\t\t{\n\t\t\tlet item = iter.next();\n\t\t\tif (item.done)\n\t\t\t\tbreak;\n\t\t\tresult.push(item.value);\n\t\t}\n\t}\n\n\t_eval_set(context, result)\n\t{\n\t\tlet value = this.value._handle_eval(context);\n\t\tfor (let iter = _iter(value);;)\n\t\t{\n\t\t\tlet item = iter.next();\n\t\t\tif (item.done)\n\t\t\t\tbreak;\n\t\t\tresult.add(item.value);\n\t\t}\n\t}\n};\n\nUnpackSeqItemAST.prototype._ul4onattrs = ItemArgBase.prototype._ul4onattrs.concat([\"value\"]);\n\nexport class DictItemAST extends ItemArgBase\n{\n\tstatic classdoc = \"AST node for a dictionary entry in a dict expression (:class:`DictAST`).\";\n\n\tconstructor(template, pos, key, value)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.key = key;\n\t\tthis.value = value;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\n\t\t\t\"<\",\n\t\t\tthis.constructor.name,\n\t\t\t\" key=\",\n\t\t\t_repr(this.key),\n\t\t\t\" value=\",\n\t\t\t_repr(this.value),\n\t\t\t\">\"\n\t\t);\n\t}\n\n\t_eval_dict(context, result)\n\t{\n\t\tlet key = this.key._handle_eval(context);\n\t\tlet value = this.value._handle_eval(context);\n\t\tresult.set(key, value);\n\t}\n};\n\nDictItemAST.prototype._ul4onattrs = ItemArgBase.prototype._ul4onattrs.concat([\"key\", \"value\"]);\n\nexport class UnpackDictItemAST extends ItemArgBase\n{\n\tstatic classdoc = \"AST node for ``**`` unpacking expressions in dict \\\"literal\\\"\\n(e.g. the ``**u`` in ``{k: v, **u}``).\";\n\n\tconstructor(template, pos, item)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.item = item;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<\", this.constructor.name, \" item=\", _repr(this.item), \">\");\n\t}\n\n\t_eval_dict(context, result)\n\t{\n\t\tlet item = this.item._handle_eval(context);\n\t\tif (_isiter(item))\n\t\t{\n\t\t\tfor (;;)\n\t\t\t{\n\t\t\t\tlet subitem = item.next();\n\t\t\t\tif (subitem.done)\n\t\t\t\t\tbreak;\n\t\t\t\tif (!_islist(subitem.value) || subitem.value.length != 2)\n\t\t\t\t\tthrow new ArgumentError(\"** requires an iterable of (key, value) pairs\");\n\t\t\t\tresult.set(subitem.value[0], subitem.value[1]);\n\t\t\t}\n\t\t}\n\t\telse if (_islist(item))\n\t\t{\n\t\t\tfor (let subitem of item)\n\t\t\t{\n\t\t\t\tif (!_islist(subitem) || subitem.length != 2)\n\t\t\t\t\tthrow new ArgumentError(\"** requires a list of (key, value) pairs\");\n\t\t\t\tresult.set(subitem[0], subitem[1]);\n\t\t\t}\n\t\t}\n\t\telse if (_ismap(item))\n\t\t{\n\t\t\tfor (let [key, value] of item)\n\t\t\t\tresult.set(key, value);\n\t\t}\n\t\telse if (_isobject(item))\n\t\t{\n\t\t\tfor (let key in item)\n\t\t\t\tresult.set(key, item[key]);\n\t\t}\n\t}\n};\n\nUnpackDictItemAST.prototype._ul4onattrs = ItemArgBase.prototype._ul4onattrs.concat([\"item\"]);\n\nexport class PositionalArgumentAST extends ItemArgBase\n{\n\tstatic classdoc = \"AST node for a positional argument. (e.g. the ``x`` in ``f(x)``).\";\n\n\tconstructor(template, pos, value)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.value = value;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<\", this.constructor.name, \" value=\", _repr(this.value), \">\");\n\t}\n\n\t_eval_call(context, args, kwargs)\n\t{\n\t\tlet value = this.value._handle_eval(context);\n\t\targs.push(value);\n\t}\n};\n\nPositionalArgumentAST.prototype._ul4onattrs = ItemArgBase.prototype._ul4onattrs.concat([\"value\"]);\n\nexport class KeywordArgumentAST extends ItemArgBase\n{\n\tstatic classdoc = \"AST node for a keyword argument in a :class:`CallAST` (e.g. the ``x=y``\\nin the function call ``f(x=y)``).\";\n\n\tconstructor(template, pos, name, value)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.name = name;\n\t\tthis.value = value;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\n\t\t\t\"<\",\n\t\t\tthis.constructor.name,\n\t\t\t\" name=\",\n\t\t\t_repr(this.name),\n\t\t\t\" value=\",\n\t\t\t_repr(this.value),\n\t\t\t\">\"\n\t\t);\n\t}\n\n\t_eval_call(context, args, kwargs)\n\t{\n\t\tif (kwargs.hasOwnProperty(this.name))\n\t\t\tthrow new ArgumentError(\"duplicate keyword argument \" + this.name);\n\t\tlet value = this.value._handle_eval(context);\n\t\tkwargs[this.name] = value;\n\t}\n};\n\nKeywordArgumentAST.prototype._ul4onattrs = ItemArgBase.prototype._ul4onattrs.concat([\"name\", \"value\"]);\n\nexport class UnpackListArgumentAST extends ItemArgBase\n{\n\tstatic classdoc = \"AST node for an ``*`` unpacking expressions in a :class:`CallAST`\\n(e.g. the ``*x`` in ``f(*x)``).\";\n\n\tconstructor(template, pos, item)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.item = item;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<\", this.constructor.name, \" item=\", _repr(this.item), \">\");\n\t}\n\n\t_eval_call(context, args, kwargs)\n\t{\n\t\tlet item = this.item._handle_eval(context);\n\t\targs.push(...item);\n\t}\n};\n\nUnpackListArgumentAST.prototype._ul4onattrs = ItemArgBase.prototype._ul4onattrs.concat([\"item\"]);\n\nexport class UnpackDictArgumentAST extends ItemArgBase\n{\n\tstatic classdoc = \"AST node for an ``**`` unpacking expressions in a :class:`CallAST`\\n(e.g. the ``**x`` in ``f(**x)``).\";\n\n\tconstructor(template, pos, item)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.item = item;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<\", this.constructor.name, \" item=\", _repr(this.item), \">\");\n\t}\n\n\t_eval_call(context, args, kwargs)\n\t{\n\t\tlet item = this.item._handle_eval(context);\n\t\tif (_islist(item))\n\t\t{\n\t\t\tfor (let subitem of item)\n\t\t\t{\n\t\t\t\tif (!_islist(subitem) || subitem.length != 2)\n\t\t\t\t\tthrow new ArgumentError(\"** requires a list of (key, value) pairs\");\n\t\t\t\tlet [key, value] = subitem;\n\t\t\t\tif (kwargs.hasOwnProperty(key))\n\t\t\t\t\tthrow new ArgumentError(\"duplicate keyword argument \" + key);\n\t\t\t\tkwargs[key] = value;\n\t\t\t}\n\t\t}\n\t\telse if (_ismap(item))\n\t\t{\n\t\t\tfor (let [key, value] of item)\n\t\t\t{\n\t\t\t\tif (kwargs.hasOwnProperty(key))\n\t\t\t\t\tthrow new ArgumentError(\"duplicate keyword argument \" + key);\n\t\t\t\tkwargs[key] = value;\n\t\t\t}\n\t\t}\n\t\telse if (_isobject(item))\n\t\t{\n\t\t\tfor (let key in item)\n\t\t\t{\n\t\t\t\tif (kwargs.hasOwnProperty(key))\n\t\t\t\t\tthrow new ArgumentError(\"duplicate keyword argument \" + key);\n\t\t\t\tkwargs[key] = item[key];\n\t\t\t}\n\t\t}\n\t}\n};\n\nUnpackDictArgumentAST.prototype._ul4onattrs = ItemArgBase.prototype._ul4onattrs.concat([\"item\"]);\n\nexport class ListAST extends CodeAST\n{\n\tstatic classdoc = \"AST node for creating a list object (e.g. ``[x, y, *z]``).\";\n\n\tconstructor(template, pos)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.items = [];\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<\", this.constructor.name);\n\t\tfor (let item of this.items)\n\t\t{\n\t\t\tout.push(\" \");\n\t\t\titem._repr(out);\n\t\t}\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet result = [];\n\t\tfor (let item of this.items)\n\t\t\titem._handle_eval_list(context, result);\n\t\treturn result;\n\t}\n};\n\nListAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"items\"]);\n\nexport class ListComprehensionAST extends CodeAST\n{\n\tstatic classdoc = \"AST node for a list comprehension (e.g. ``[v for (a, b) in w if c]``.\";\n\n\tconstructor(template, pos, item, varname, container, condition)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.item = item;\n\t\tthis.varname = varname;\n\t\tthis.container = container;\n\t\tthis.condition = condition;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<\", this.constructor.name, \" item=\");\n\t\tthis.item._repr(out);\n\t\tout.push(\" varname=\", _repr(this.varname), \" container=\");\n\t\tthis.container._repr(out);\n\t\tif (this.condition !== null)\n\t\t{\n\t\t\tout.push(\" condition=\");\n\t\t\tthis.condition._repr(out);\n\t\t}\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet container = this.container._handle_eval(context);\n\n\t\tlet localcontext = context.inheritvars();\n\n\t\tlet result = [];\n\t\tfor (let iter = _iter(container);;)\n\t\t{\n\t\t\tlet item = iter.next();\n\t\t\tif (item.done)\n\t\t\t\tbreak;\n\t\t\tlet varitems = _unpackvar(this.varname, item.value);\n\t\t\tfor (let [lvalue, value] of varitems)\n\t\t\t\tlvalue._handle_eval_set(localcontext, value);\n\t\t\tif (this.condition === null || _bool(this.condition._handle_eval(localcontext)))\n\t\t\t\tresult.push(this.item._handle_eval(localcontext));\n\t\t}\n\t\treturn result;\n\t}\n};\n\nListComprehensionAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"item\", \"varname\", \"container\", \"condition\"]);\n\nexport class SetAST extends CodeAST\n{\n\tstatic classdoc = \"AST node for creating a set object (e.g. ``{x, y, *z}``.\";\n\n\tconstructor(template, pos)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.items = [];\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<\", this.constructor.name);\n\t\tfor (let item of this.items)\n\t\t{\n\t\t\tout.push(\" \");\n\t\t\titem._repr(out);\n\t\t}\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet result = new Set();\n\n\t\tfor (let item of this.items)\n\t\t\titem._handle_eval_set(context, result);\n\n\t\treturn result;\n\t}\n};\n\nSetAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"items\"]);\n\nexport class SetComprehensionAST extends CodeAST\n{\n\tstatic classdoc = \"AST node for a set comprehension (e.g. ``{v for (a, b) in w if c}``.\";\n\n\tconstructor(template, pos, item, varname, container, condition)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.item = item;\n\t\tthis.varname = varname;\n\t\tthis.container = container;\n\t\tthis.condition = condition;\n\t}\n\n\t[symbols.getattr](attrname)\n\t{\n\t\tswitch (attrname)\n\t\t{\n\t\t\tcase \"item\":\n\t\t\t\treturn this.item;\n\t\t\tcase \"varname\":\n\t\t\t\treturn this.varname;\n\t\t\tcase \"container\":\n\t\t\t\treturn this.container;\n\t\t\tcase \"condition\":\n\t\t\t\treturn this.condition;\n\t\t\tdefault:\n\t\t\t\treturn super[symbols.getattr](attrname);\n\t\t}\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<\", this.constructor.name, \" item=\");\n\t\tthis.item._repr(out);\n\t\tout.push(\" varname=\");\n\t\tthis.varname._repr(out);\n\t\tout.push(\" container=\");\n\t\tthis.container._repr(out);\n\t\tif (this.condition !== null)\n\t\t{\n\t\t\tout.push(\" condition=\");\n\t\t\tthis.condition._repr(out);\n\t\t}\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet container = this.container._handle_eval(context);\n\n\t\tlet localcontext = context.inheritvars();\n\n\t\tlet result = new Set();\n\t\tfor (let iter = _iter(container);;)\n\t\t{\n\t\t\tlet item = iter.next();\n\t\t\tif (item.done)\n\t\t\t\tbreak;\n\t\t\tlet varitems = _unpackvar(this.varname, item.value);\n\t\t\tfor (let [lvalue, value] of varitems)\n\t\t\t\tlvalue._handle_eval_set(localcontext, value);\n\t\t\tif (this.condition === null || _bool(this.condition._handle_eval(localcontext)))\n\t\t\t\tresult.add(this.item._handle_eval(localcontext));\n\t\t}\n\n\t\treturn result;\n\t}\n};\n\nSetComprehensionAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"item\", \"varname\", \"container\", \"condition\"]);\n\nexport class DictAST extends CodeAST\n{\n\tstatic classdoc = \"AST node for creating a dict object (e.g. `{k: v, **u}`.\";\n\n\tconstructor(template, pos)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.items = [];\n\t}\n\n\t[symbols.getattr](attrname)\n\t{\n\t\tswitch (attrname)\n\t\t{\n\t\t\tcase \"items\":\n\t\t\t\treturn this.items;\n\t\t\tdefault:\n\t\t\t\treturn super[symbols.getattr](attrname);\n\t\t}\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<\", this.constructor.name);\n\t\tfor (let item of this.items)\n\t\t{\n\t\t\tout.push(\" \");\n\t\t\titem._repr(out);\n\t\t}\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet result = new Map();\n\t\tfor (let item of this.items)\n\t\t\titem._handle_eval_dict(context, result);\n\t\treturn result;\n\t}\n};\n\nDictAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"items\"]);\n\nexport class DictComprehensionAST extends CodeAST\n{\n\tstatic classdoc = \"AST node for a dictionary comprehension (e.g. ``{k: v for (a, b) in w if c}``.\";\n\n\tconstructor(template, pos, key, value, varname, container, condition)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.key = key;\n\t\tthis.value = value;\n\t\tthis.varname = varname;\n\t\tthis.container = container;\n\t\tthis.condition = condition;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<\", this.constructor.name, \" key=\");\n\t\tthis.key._repr(out);\n\t\tout.push(\" value=\");\n\t\tthis.value._repr(out);\n\t\tout.push(\" varname=\");\n\t\tthis.varname._repr(out);\n\t\tout.push(\" container=\");\n\t\tthis.container._repr(out);\n\t\tif (this.condition !== null)\n\t\t{\n\t\t\tout.push(\" condition=\");\n\t\t\tthis.condition._repr(out);\n\t\t}\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet container = this.container._handle_eval(context);\n\n\t\tlet localcontext = context.inheritvars();\n\n\t\tlet result = new Map();\n\n\t\tfor (let iter = _iter(container);;)\n\t\t{\n\t\t\tlet item = iter.next();\n\t\t\tif (item.done)\n\t\t\t\tbreak;\n\t\t\tlet varitems = _unpackvar(this.varname, item.value);\n\t\t\tfor (let [lvalue, value] of varitems)\n\t\t\t\tlvalue._handle_eval_set(localcontext, value);\n\t\t\tif (this.condition === null || _bool(this.condition._handle_eval(localcontext)))\n\t\t\t{\n\t\t\t\tlet key = this.key._handle_eval(localcontext);\n\t\t\t\tlet value = this.value._handle_eval(localcontext);\n\t\t\t\tresult.set(key, value);\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n};\n\nDictComprehensionAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"key\", \"value\", \"varname\", \"container\", \"condition\"]);\n\nexport class GeneratorExpressionAST extends CodeAST\n{\n\tstatic classdoc = \"AST node for a generator expression (e.g. ``(x for (a, b) in w if c)``).\";\n\n\tconstructor(template, pos, item, varname, container, condition)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.item = item;\n\t\tthis.varname = varname;\n\t\tthis.container = container;\n\t\tthis.condition = condition;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<\", this.constructor.name, \" item=\");\n\t\tthis.item._repr(out);\n\t\tout.push(\" varname=\");\n\t\tthis.varname._repr(out);\n\t\tout.push(\" container=\");\n\t\tthis.container._repr(out);\n\t\tif (this.condition !== null)\n\t\t{\n\t\t\tout.push(\" condition=\");\n\t\t\tthis.condition._repr(out);\n\t\t}\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet container = this.container._handle_eval(context);\n\t\tlet iter = _iter(container);\n\n\t\tlet localcontext = context.inheritvars();\n\n\t\tlet self = this;\n\n\t\tlet result = {\n\t\t\tnext: function(){\n\t\t\t\twhile (true)\n\t\t\t\t{\n\t\t\t\t\tlet item = iter.next();\n\t\t\t\t\tif (item.done)\n\t\t\t\t\t\treturn item;\n\t\t\t\t\tlet varitems = _unpackvar(self.varname, item.value);\n\t\t\t\t\tfor (let [lvalue, value] of varitems)\n\t\t\t\t\t\tlvalue._handle_eval_set(localcontext, value);\n\t\t\t\t\tif (self.condition === null || _bool(self.condition._handle_eval(localcontext)))\n\t\t\t\t\t{\n\t\t\t\t\t\tlet value = self.item._handle_eval(localcontext);\n\t\t\t\t\t\treturn {value: value, done: false};\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\treturn result;\n\t}\n};\n\nGeneratorExpressionAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"item\", \"varname\", \"container\", \"condition\"]);\n\nexport class VarAST extends CodeAST\n{\n\tstatic classdoc = \"AST node for getting a variable.\";\n\n\tconstructor(template, pos, name)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.name = name;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<\", this.constructor.name, \" name=\", _repr(this.name), \">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\treturn this._get(context, this.name);\n\t}\n\n\t_eval_set(context, value)\n\t{\n\t\tthis._set(context, this.name, value);\n\t}\n\n\t_eval_modify(context, operator, value)\n\t{\n\t\tthis._modify(context, operator, this.name, value);\n\t}\n\n\t_get(context, name)\n\t{\n\t\treturn context.get(name);\n\t}\n\n\t_set(context, name, value)\n\t{\n\t\tcontext.set(name, value);\n\t}\n\n\t_modify(context, operator, name, value)\n\t{\n\t\tlet newvalue = operator._ido(context.get(name), value);\n\t\tcontext.set(name, newvalue);\n\t}\n};\n\nVarAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"name\"]);\n\nexport class UnaryAST extends CodeAST\n{\n\tstatic classdoc = \"Base class for all AST nodes implementing unary expressions\\n(i.e. operators with one operand).\";\n\n\tconstructor(template, pos, obj)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.obj = obj;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<\", this.constructor.name, \" obj=\");\n\t\tthis.obj._repr(out);\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet obj = this.obj._handle_eval(context);\n\t\treturn this._do(obj);\n\t}\n};\n\nUnaryAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"obj\"]);\n\n// Negation\nexport class NegAST extends UnaryAST\n{\n\tstatic classdoc = \"AST node for a unary negation expression (e.g. ``-x``).\";\n\n\t_do(obj)\n\t{\n\t\tif (obj !== null && typeof(obj[symbols.neg]) === \"function\")\n\t\t\treturn obj[symbols.neg]();\n\t\treturn -obj;\n\t}\n};\n\n// Bitwise not\nexport class BitNotAST extends UnaryAST\n{\n\tstatic classdoc = \"AST node for a bitwise unary \\\"not\\\" expression that returns its operand\\nwith its bits inverted (e.g. ``~x``).\";\n\n\t_do(obj)\n\t{\n\t\treturn -obj-1;\n\t}\n};\n\n// Not\nexport class NotAST extends UnaryAST\n{\n\tstatic classdoc = \"AST node for a unary \\\"not\\\" expression (e.g. ``not x``).\";\n\n\t_do(obj)\n\t{\n\t\treturn !_bool(obj);\n\t}\n};\n\n// If expression\nexport class IfAST extends CodeAST\n{\n\tstatic classdoc = \"AST node for the ternary inline ``if/else`` operator (e.g. ``x if y else z``).\";\n\n\tconstructor(template, pos, objif, objcond, objelse)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.objif = objif;\n\t\tthis.objcond = objcond;\n\t\tthis.objelse = objelse;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\n\t\t\t\"<\",\n\t\t\tthis.constructor.name,\n\t\t\t+1,\n\t\t\t\"objif=\"\n\t\t);\n\t\tthis.objif._repr(out);\n\t\tout.push(0, \"objcond=\");\n\t\tthis.objcond._repr(out);\n\t\tout.push(0, \"objelse=\");\n\t\tthis.objelse._repr(out);\n\t\tout.push(-1, \">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet result;\n\t\tlet condvalue = this.objcond._handle_eval(context);\n\t\tif (_bool(condvalue))\n\t\t\tresult = this.objif._handle_eval(context);\n\t\telse\n\t\t\tresult = this.objelse._handle_eval(context);\n\t\treturn result;\n\t}\n};\n\nIfAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"objif\", \"objcond\", \"objelse\"]);\n\nexport class ReturnAST extends UnaryAST\n{\n\tstatic classdoc = \"AST node for a ``<?return?>`` tag (e.g. ``<?return x?>``).\";\n\n\t_eval(context)\n\t{\n\t\tlet result = this.obj._handle_eval(context);\n\t\tthrow new ReturnException(result);\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(\"return \");\n\t\tthis.obj._str(out);\n\t}\n};\n\nexport class PrintAST extends UnaryAST\n{\n\tstatic classdoc = \"AST node for a ``<?print?>`` tag (e.g. ``<?print x?>``).\";\n\n\t_eval(context)\n\t{\n\t\tlet obj = this.obj._handle_eval(context);\n\t\tlet output = _str(obj);\n\t\tcontext.output(output);\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(\"print \");\n\t\tthis.obj._str(out);\n\t}\n};\n\nexport class PrintXAST extends UnaryAST\n{\n\tstatic classdoc = \"AST node for a ``<?printx?>`` tag (e.g. ``<?printx x?>``).\";\n\n\t_eval(context)\n\t{\n\t\tlet obj = this.obj._handle_eval(context);\n\t\tlet output = _xmlescape(obj);\n\t\tcontext.output(output);\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(\"printx \");\n\t\tthis.obj._str(out);\n\t}\n};\n\nexport class BinaryAST extends CodeAST\n{\n\tstatic classdoc = \"Base class for all UL4 AST nodes implementing binary expressions\\n(i.e. operators with two operands).\";\n\n\tconstructor(template, pos, obj1, obj2)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.obj1 = obj1;\n\t\tthis.obj2 = obj2;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<\", this.constructor.name, \" obj1=\");\n\t\tthis.obj1._repr(out);\n\t\tout.push(\" obj2=\");\n\t\tthis.obj2._repr(out);\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet obj1 = this.obj1._handle_eval(context);\n\t\tlet obj2 = this.obj2._handle_eval(context);\n\t\treturn this._do(obj1, obj2);\n\t}\n};\n\nBinaryAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"obj1\", \"obj2\"]);\n\n// Item access and assignment (`x[y]`): dict[key], list[index], string[index], color[index]\nexport class ItemAST extends BinaryAST\n{\n\tstatic classdoc = \"AST node for subscripting expression (e.g. ``x[y]``).\";\n\n\t_do(obj1, obj2)\n\t{\n\t\tlet result = this._get(obj1, obj2);\n\t\treturn result;\n\t}\n\n\t_eval_set(context, value)\n\t{\n\t\tlet obj1 = this.obj1._handle_eval(context);\n\t\tlet obj2 = this.obj2._handle_eval(context);\n\t\tthis._set(obj1, obj2, value);\n\t}\n\n\t_eval_modify(context, operator, value)\n\t{\n\t\tlet obj1 = this.obj1._handle_eval(context);\n\t\tlet obj2 = this.obj2._handle_eval(context);\n\t\tthis._modify(operator, obj1, obj2, value);\n\t}\n\n\t_get(container, key)\n\t{\n\t\tif (typeof(container) === \"string\" || _islist(container))\n\t\t{\n\t\t\tif (key instanceof slice)\n\t\t\t{\n\t\t\t\tlet start = key.start, stop = key.stop;\n\t\t\t\tif (start === undefined || start === null)\n\t\t\t\t\tstart = 0;\n\t\t\t\tif (stop === undefined || stop === null)\n\t\t\t\t\tstop = container.length;\n\t\t\t\treturn container.slice(start, stop);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlet orgkey = key;\n\t\t\t\tif (key < 0)\n\t\t\t\t\tkey += container.length;\n\t\t\t\tif (key < 0 || key >= container.length)\n\t\t\t\t\tthrow new IndexError(container, orgkey);\n\t\t\t\treturn container[key];\n\t\t\t}\n\t\t}\n\t\telse if (container && typeof(container[symbols.getitem]) === \"function\") // objects without `_getitem__` don't support item access\n\t\t\treturn container[symbols.getitem](key);\n\t\telse if (_ismap(container))\n\t\t\treturn container.get(key);\n\t\telse if (_isobject(container))\n\t\t\treturn container[key];\n\t\telse\n\t\t\tthrow new TypeError(_type(container).fullname() + \" object is not subscriptable\");\n\t}\n\n\t_set(container, key, value)\n\t{\n\t\tif (_islist(container))\n\t\t{\n\t\t\tif (key instanceof slice)\n\t\t\t{\n\t\t\t\tlet start = key.start, stop = key.stop;\n\t\t\t\tif (start === null)\n\t\t\t\t\tstart = 0;\n\t\t\t\telse if (start < 0)\n\t\t\t\t\tstart += container.length;\n\t\t\t\tif (start < 0)\n\t\t\t\t\tstart = 0;\n\t\t\t\telse if (start > container.length)\n\t\t\t\t\tstart = container.length;\n\t\t\t\tif (stop === null)\n\t\t\t\t\tstop = container.length;\n\t\t\t\telse if (stop < 0)\n\t\t\t\t\tstop += container.length;\n\t\t\t\tif (stop < 0)\n\t\t\t\t\tstop = 0;\n\t\t\t\telse if (stop > container.length)\n\t\t\t\t\tstop = container.length;\n\t\t\t\tif (stop < start)\n\t\t\t\t\tstop = start;\n\t\t\t\tcontainer.splice(start, stop-start); // Remove old element\n\t\t\t\tfor (let iter = _iter(value);;)\n\t\t\t\t{\n\t\t\t\t\tlet item = iter.next();\n\t\t\t\t\tif (item.done)\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcontainer.splice(start++, 0, item.value);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlet orgkey = key;\n\t\t\t\tif (key < 0)\n\t\t\t\t\tkey += container.length;\n\t\t\t\tif (key < 0 || key >= container.length)\n\t\t\t\t\tthrow new IndexError(container, orgkey);\n\t\t\t\tcontainer[key] = value;\n\t\t\t}\n\t\t}\n\t\telse if (container && typeof(container[symbols.setitem]) === \"function\") // test this before the generic object test\n\t\t\tcontainer[symbols.setitem](key, value);\n\t\telse if (_ismap(container))\n\t\t\tcontainer.set(key, value);\n\t\telse if (_isobject(container))\n\t\t\tcontainer[key] = value;\n\t\telse\n\t\t\tthrow new NotSubscriptableError(container);\n\t}\n\n\t_modify(operator, container, key, value)\n\t{\n\t\tthis._set(container, key, operator._ido(this._get(container, key), value));\n\t}\n};\n\n// Identifty test operator (`x is y`)\nexport class IsAST extends BinaryAST\n{\n\tstatic classdoc = \"AST node for a binary ``is`` comparison expression (e.g. ``x is y``).\";\n\n\t_do(obj1, obj2)\n\t{\n\t\treturn obj1 === obj2;\n\t}\n};\n\n// Inverted identity test operator (`x is not y`)\nexport class IsNotAST extends BinaryAST\n{\n\tstatic classdoc = \"AST node for a binary ``is not`` comparison expression (e.g. ``x is not y``).\";\n\n\t_do(obj1, obj2)\n\t{\n\t\treturn obj1 !== obj2;\n\t}\n};\n\n// Comparison operator (`x == y`)\nexport class EQAST extends BinaryAST\n{\n\tstatic classdoc = \"AST node for the binary equality comparison (e.g. ``x == y``.\";\n\n\t_do(obj1, obj2)\n\t{\n\t\treturn _eq(obj1, obj2);\n\t}\n};\n\n// Comparison operator (`x != y`)\nexport class NEAST extends BinaryAST\n{\n\tstatic classdoc = \"AST node for a binary inequality comparison (e.g. ``x != y``).\";\n\n\t_do(obj1, obj2)\n\t{\n\t\treturn _ne(obj1, obj2);\n\t}\n};\n\n// Comparison operator (`x < y`)\nexport class LTAST extends BinaryAST\n{\n\tstatic classdoc = \"AST node for the binary \\\"less than\\\" comparison (e.g. ``x < y``).\";\n\n\t_do(obj1, obj2)\n\t{\n\t\treturn _lt(obj1, obj2);\n\t}\n};\n\n// Comparison operator (`x <= y`)\nexport class LEAST extends BinaryAST\n{\n\tstatic classdoc = \"AST node for the binary \\\"less than or equal\\\" comparison (e.g. ``x <= y``).\";\n\n\t_do(obj1, obj2)\n\t{\n\t\treturn _le(obj1, obj2);\n\t}\n};\n\n// Comparison operator (`x > y`)\nexport class GTAST extends BinaryAST\n{\n\tstatic classdoc = \"AST node for the binary \\\"greater than\\\" comparison (e.g. ``x > y``).\";\n\n\t_do(obj1, obj2)\n\t{\n\t\treturn _gt(obj1, obj2);\n\t}\n};\n\n// Comparison operator (`x >= y`)\nexport class GEAST extends BinaryAST\n{\n\tstatic classdoc = \"AST node for the binary \\\"greater than or equal\\\" comparison (e.g. ``x >= y``).\";\n\n\t_do(obj1, obj2)\n\t{\n\t\treturn _ge(obj1, obj2);\n\t}\n};\n\n// Containment test (`x in y`): string in string, obj in list, key in dict, value in rgb\nexport class ContainsAST extends BinaryAST\n{\n\tstatic classdoc = \"AST node for the binary containment testing operator (e.g. ``x in y``).\";\n\n\t_do(obj, container)\n\t{\n\t\tif (typeof(obj) === \"string\" && typeof(container) === \"string\")\n\t\t{\n\t\t\treturn container.indexOf(obj) !== -1;\n\t\t}\n\t\telse if (_islist(container))\n\t\t{\n\t\t\treturn container.indexOf(obj) !== -1;\n\t\t}\n\t\telse if (container && typeof(container[symbols.contains]) === \"function\") // test this before the generic object test\n\t\t\treturn container[symbols.contains](obj);\n\t\telse if (_ismap(container) || _isset(container))\n\t\t\treturn container.has(obj);\n\t\telse if (_isobject(container))\n\t\t{\n\t\t\tfor (let key in container)\n\t\t\t{\n\t\t\t\tif (key === obj)\n\t\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\telse if (_iscolor(container))\n\t\t{\n\t\t\treturn container._r === obj || container._g === obj || container._b === obj || container._a === obj;\n\t\t}\n\t\tthrow new TypeError(_type(container).fullname() + \" object is not iterable\");\n\t}\n};\n\n// Inverted containment test (`x not in y`)\nexport class NotContainsAST extends BinaryAST\n{\n\tstatic classdoc = \"AST node for an inverted containment testing expression (e.g. ``x not in y``).\";\n\n\t_do(obj, container)\n\t{\n\t\treturn !ContainsAST.prototype._do(obj, container);\n\t}\n};\n\n// Addition (`x + y`): num + num, string + string\nexport class AddAST extends BinaryAST\n{\n\tstatic classdoc = \"AST node for a binary addition expression (e.g. ``x + y``).\";\n\n\t_do(obj1, obj2)\n\t{\n\t\tif (obj1 && typeof(obj1[symbols.add]) === \"function\")\n\t\t\treturn obj1[symbols.add](obj2);\n\t\telse if (obj2 && typeof(obj2[symbols.radd]) === \"function\")\n\t\t\treturn obj2[symbols.radd](obj1);\n\t\tif (obj1 === null || obj1 === undefined || obj2 === null || obj2 === undefined)\n\t\t\tthrow new TypeError(_type(obj1).fullname() + \" + \" + _type(obj2).fullname() + \" is not supported\");\n\t\tif (_islist(obj1) && _islist(obj2))\n\t\t\treturn [...obj1, ...obj2];\n\t\telse\n\t\t\treturn obj1 + obj2;\n\t}\n\n\t_ido(obj1, obj2)\n\t{\n\t\tif (_islist(obj1) && _islist(obj2))\n\t\t{\n\t\t\tlisttype.append(obj1, obj2);\n\t\t\treturn obj1;\n\t\t}\n\t\telse\n\t\t\treturn this._do(obj1, obj2);\n\t}\n};\n\n// Substraction (`x - y`): num - num\nexport class SubAST extends BinaryAST\n{\n\tstatic classdoc = \"AST node for the binary subtraction expression (e.g. ``x - y``).\";\n\n\t_do(obj1, obj2)\n\t{\n\t\tif (obj1 && typeof(obj1[symbols.sub]) === \"function\")\n\t\t\treturn obj1[symbols.sub](obj2);\n\t\telse if (obj2 && typeof(obj2[symbols.rsub]) === \"function\")\n\t\t\treturn obj2[symbols.rsub](obj1);\n\t\telse if (_isdate(obj1) && _isdate(obj2))\n\t\t\treturn this._date_sub(obj1, obj2);\n\t\telse if (_isdatetime(obj1) && _isdatetime(obj2))\n\t\t\treturn this._datetime_sub(obj1, obj2);\n\t\tif (obj1 === null || obj1 === undefined || obj2 === null || obj2 === undefined)\n\t\t\tthrow new TypeError(_type(obj1).fullname() + \" - \" + _type(obj2).fullname() + \" is not supported\");\n\t\treturn obj1 - obj2;\n\t}\n\n\t_date_sub(obj1, obj2)\n\t{\n\t\treturn this._datetime_sub(obj1._date, obj2._date);\n\t}\n\n\t_datetime_sub(obj1, obj2)\n\t{\n\t\tlet swap = (obj2 > obj1);\n\n\t\tif (swap)\n\t\t{\n\t\t\tlet t = obj1;\n\t\t\tobj1 = obj2;\n\t\t\tobj2 = t;\n\t\t}\n\t\t// From now on obj1 is > than obj2\n\n\t\tlet year1 = obj1.getFullYear();\n\t\tlet yearday1 = datetimetype.yearday(obj1);\n\t\tlet year2 = obj2.getFullYear();\n\t\tlet yearday2 = datetimetype.yearday(obj2);\n\n\t\tlet diffdays = 0;\n\n\t\twhile (year1 > year2)\n\t\t{\n\t\t\tdiffdays += datetype.yearday(_date(year2, 12, 31));\n\t\t\t++year2;\n\t\t}\n\t\tdiffdays += yearday1 - yearday2;\n\n\t\tlet hours1 = obj1.getHours();\n\t\tlet minutes1 = obj1.getMinutes();\n\t\tlet seconds1 = obj1.getSeconds();\n\t\tlet hours2 = obj2.getHours();\n\t\tlet minutes2 = obj2.getMinutes();\n\t\tlet seconds2 = obj2.getSeconds();\n\n\t\tlet diffseconds = (seconds1 - seconds2) + 60 * ((minutes1 - minutes2) + 60 * (hours1 - hours2));\n\n\t\tlet diffmilliseconds = obj1.getMilliseconds() - obj2.getMilliseconds();\n\n\t\tif (swap)\n\t\t{\n\t\t\tdiffdays = -diffdays;\n\t\t\tdiffseconds = -diffseconds;\n\t\t\tdiffmilliseconds = -diffmilliseconds;\n\t\t}\n\t\treturn new TimeDelta(diffdays, diffseconds, 1000*diffmilliseconds);\n\t}\n\n\t_ido(obj1, obj2)\n\t{\n\t\treturn this._do(obj1, obj2);\n\t}\n};\n\n\n// Multiplication (`x * y`): num * num, int * str, str * int, int * list, list * int\nexport class MulAST extends BinaryAST\n{\n\tstatic classdoc = \"AST node for the binary multiplication expression (e.g. ``x * y``).\";\n\n\t_do(obj1, obj2)\n\t{\n\t\tif (obj1 && typeof(obj1[symbols.mul]) === \"function\")\n\t\t\treturn obj1[symbols.mul](obj2);\n\t\telse if (obj2 && typeof(obj2[symbols.rmul]) === \"function\")\n\t\t\treturn obj2[symbols.rmul](obj1);\n\t\tif (obj1 === null || obj1 === undefined || obj2 === null || obj2 === undefined)\n\t\t\tthrow new TypeError(obj1 + \" * \" + obj2 + \" not supported\");\n\t\telse if (_isint(obj1) || _isbool(obj1))\n\t\t{\n\t\t\tif (typeof(obj2) === \"string\")\n\t\t\t{\n\t\t\t\tif (obj1 < 0)\n\t\t\t\t\tthrow new ValueError(\"repetition counter must be positive\");\n\t\t\t\treturn _str_repeat(obj2, obj1);\n\t\t\t}\n\t\t\telse if (_islist(obj2))\n\t\t\t{\n\t\t\t\tif (obj1 < 0)\n\t\t\t\t\tthrow new ValueError(\"repetition counter must be positive\");\n\t\t\t\treturn _list_repeat(obj2, obj1);\n\t\t\t}\n\t\t}\n\t\telse if (_isint(obj2) || _isbool(obj2))\n\t\t{\n\t\t\tif (typeof(obj1) === \"string\")\n\t\t\t{\n\t\t\t\tif (obj2 < 0)\n\t\t\t\t\tthrow new ValueError(\"repetition counter must be positive\");\n\t\t\t\treturn _str_repeat(obj1, obj2);\n\t\t\t}\n\t\t\telse if (_islist(obj1))\n\t\t\t{\n\t\t\t\tif (obj2 < 0)\n\t\t\t\t\tthrow new ValueError(\"repetition counter must be positive\");\n\t\t\t\treturn _list_repeat(obj1, obj2);\n\t\t\t}\n\t\t}\n\t\treturn obj1 * obj2;\n\t}\n\n\t_ido(obj1, obj2)\n\t{\n\t\tif (_islist(obj1) && _isint(obj2))\n\t\t{\n\t\t\tif (obj2 > 0)\n\t\t\t{\n\t\t\t\tlet i = 0;\n\t\t\t\tlet targetsize = obj1.length * obj2;\n\t\t\t\twhile (obj1.length < targetsize)\n\t\t\t\t\tobj1.push(obj1[i++]);\n\t\t\t}\n\t\t\telse\n\t\t\t\tobj1.splice(0, obj1.length);\n\t\t\treturn obj1;\n\t\t}\n\t\telse\n\t\t\treturn this._do(obj1, obj2);\n\t}\n};\n\n// Truncating division (`x // y`)\nexport class FloorDivAST extends BinaryAST\n{\n\tstatic classdoc = \"AST node for a binary truncating division expression (e.g. ``x // y``).\";\n\n\t_do(obj1, obj2)\n\t{\n\t\tif (obj1 && typeof(obj1[symbols.floordiv]) === \"function\")\n\t\t\treturn obj1[symbols.floordiv](obj2);\n\t\telse if (obj2 && typeof(obj2[symbols.rfloordiv]) === \"function\")\n\t\t\treturn obj2[symbols.rfloordiv](obj1);\n\t\tif (obj1 === null || obj1 === undefined || obj2 === null || obj2 === undefined)\n\t\t\tthrow new TypeError(_type(obj1).fullname() + \" // \" + _type(obj2).fullname() + \" not supported\");\n\t\telse if ((typeof(obj1) === \"number\" || typeof(obj1) === \"boolean\") && (typeof(obj2) === \"number\" || typeof(obj2) === \"boolean\") && obj2 == 0)\n\t\t\tthrow new ZeroDivisionError();\n\t\treturn Math.floor(obj1 / obj2);\n\t}\n\n\t_ido(obj1, obj2)\n\t{\n\t\treturn this._do(obj1, obj2);\n\t}\n};\n\n// \"Real\" division (`x / y`)\nexport class TrueDivAST extends BinaryAST\n{\n\tstatic classdoc = \"AST node for a binary true division expression (e.g. ``x / y``).\";\n\n\t_do(obj1, obj2)\n\t{\n\t\tif (obj1 && typeof(obj1[symbols.truediv]) === \"function\")\n\t\t\treturn obj1[symbols.truediv](obj2);\n\t\telse if (obj2 && typeof(obj2[symbols.rtruediv]) === \"function\")\n\t\t\treturn obj2[symbols.rtruediv](obj1);\n\t\tif (obj1 === null || obj1 === undefined || obj2 === null || obj2 === undefined)\n\t\t\tthrow new TypeError(_type(obj1).fullname() + \" / \" + _type(obj2).fullname() + \" not supported\");\n\t\telse if ((typeof(obj1) === \"number\" || typeof(obj1) === \"boolean\") && (typeof(obj2) === \"number\" || typeof(obj2) === \"boolean\") && obj2 == 0)\n\t\t\tthrow new ZeroDivisionError();\n\t\treturn obj1 / obj2;\n\t}\n\n\t_ido(obj1, obj2)\n\t{\n\t\treturn this._do(obj1, obj2);\n\t}\n};\n\n// Modulo (`x % y`)\nexport class ModAST extends BinaryAST\n{\n\tstatic classdoc = \"AST node for a binary modulo expression (e.g. ``x % y``).\";\n\n\t_do(obj1, obj2)\n\t{\n\t\treturn _mod(obj1, obj2);\n\t}\n\n\t_ido(obj1, obj2)\n\t{\n\t\treturn this._do(obj1, obj2);\n\t}\n};\n\n// Bitwise left shift (`x << y`)\nexport class ShiftLeftAST extends BinaryAST\n{\n\tstatic classdoc = \"AST node for a bitwise left shift expression (e.g. ``x << y``).\";\n\n\t_do(obj1, obj2)\n\t{\n\t\tif (obj2 === false)\n\t\t\tobj2 = 0;\n\t\telse if (obj2 === true)\n\t\t\tobj2 = 1;\n\t\tif (obj2 < 0)\n\t\t\treturn ShiftRightAST.prototype._do(obj1, -obj2);\n\t\tif (obj1 === false)\n\t\t\tobj1 = 0;\n\t\telse if (obj1 === true)\n\t\t\tobj1 = 1;\n\t\twhile (obj2--)\n\t\t\tobj1 *= 2;\n\t\treturn obj1;\n\t}\n\n\t_ido(obj1, obj2)\n\t{\n\t\treturn this._do(obj1, obj2);\n\t}\n};\n\n// Bitwise right shift (`x >> y`)\nexport class ShiftRightAST extends BinaryAST\n{\n\tstatic classdoc = \"AST node for a bitwise right shift expression (e.g. ``x >> y``).\";\n\n\t_do(obj1, obj2)\n\t{\n\t\tif (obj2 === false)\n\t\t\tobj2 = 0;\n\t\telse if (obj2 === true)\n\t\t\tobj2 = 1;\n\t\tif (obj2 < 0)\n\t\t\treturn ShiftLeftAST.prototype._do(obj1, -obj2);\n\t\tif (obj1 === false)\n\t\t\tobj1 = 0;\n\t\telse if (obj1 === true)\n\t\t\tobj1 = 1;\n\t\twhile (obj2--)\n\t\t\tobj1 /= 2;\n\t\treturn Math.floor(obj1);\n\t}\n\n\t_ido(obj1, obj2)\n\t{\n\t\treturn this._do(obj1, obj2);\n\t}\n};\n\n// Bitwise and (`x & y`)\nexport class BitAndAST extends BinaryAST\n{\n\tstatic classdoc = \"AST node for a binary bitwise \\\"and\\\" expression (e.g ``x & y``).\";\n\n\t_do(obj1, obj2)\n\t{\n\t\tif (obj2 === false)\n\t\t\tobj2 = 0;\n\t\telse if (obj2 === true)\n\t\t\tobj2 = 1;\n\t\treturn obj1 & obj2;\n\t}\n\n\t_ido(obj1, obj2)\n\t{\n\t\treturn this._do(obj1, obj2);\n\t}\n};\n\n// Bitwise exclusive or (`x ^ y`)\nexport class BitXOrAST extends BinaryAST\n{\n\tstatic classdoc = \"AST node for the binary bitwise \\\"exclusive or\\\" expression (e.g. ``x ^ y``).\";\n\n\t_do(obj1, obj2)\n\t{\n\t\tif (obj2 === false)\n\t\t\tobj2 = 0;\n\t\telse if (obj2 === true)\n\t\t\tobj2 = 1;\n\t\treturn obj1 ^ obj2;\n\t}\n\n\t_ido(obj1, obj2)\n\t{\n\t\treturn this._do(obj1, obj2);\n\t}\n};\n\n// Bitwise or (`x | y`)\nexport class BitOrAST extends BinaryAST\n{\n\tstatic classdoc = \"AST node for a binary bitwise \\\"or\\\" expression (e.g. ``x | y``).\";\n\n\t_do(obj1, obj2)\n\t{\n\t\tif (obj2 === false)\n\t\t\tobj2 = 0;\n\t\telse if (obj2 === true)\n\t\t\tobj2 = 1;\n\t\treturn obj1 | obj2;\n\t}\n\n\t_ido(obj1, obj2)\n\t{\n\t\treturn this._do(obj1, obj2);\n\t}\n};\n\n// Boolean logical and (`x and y`)\nexport class AndAST extends BinaryAST\n{\n\tstatic classdoc = \"AST node for the binary \\\"and\\\" expression (i.e. ``x and y``).\";\n\n\t_eval(context)\n\t{\n\t\tlet obj1 = this.obj1._handle_eval(context);\n\t\tif (!_bool(obj1))\n\t\t\treturn obj1;\n\t\tlet obj2 = this.obj2._handle_eval(context);\n\t\treturn obj2;\n\t}\n};\n\n// Boolean logical or (`x or y`)\nexport class OrAST extends BinaryAST\n{\n\tstatic classdoc = \"AST node for a binary \\\"or\\\" expression (e.g. ``x or y``).\";\n\n\t_eval(context)\n\t{\n\t\tlet obj1 = this.obj1._handle_eval(context);\n\t\tif (_bool(obj1))\n\t\t\treturn obj1;\n\t\tlet obj2 = this.obj2._handle_eval(context);\n\t\treturn obj2;\n\t}\n};\n\n// Attribute access (`x.y`)\nexport class AttrAST extends CodeAST\n{\n\tstatic classdoc = \"AST node for an expression that gets or sets an attribute of an object.\\n(e.g. ``x.y``).\";\n\n\tconstructor(template, pos, obj, attrname)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.obj = obj;\n\t\tthis.attrname = attrname;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<\", this.constructor.name, \" obj=\");\n\t\tthis.obj._repr(out);\n\t\tout.push(\" attrname=\", _repr(this.attrname), \">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet obj = this.obj._handle_eval(context);\n\t\tlet result = this._get(obj, this.attrname);\n\t\treturn result;\n\t}\n\n\t_eval_set(context, value)\n\t{\n\t\tlet obj = this.obj._handle_eval(context);\n\t\tthis._set(obj, this.attrname, value);\n\t}\n\n\t_eval_modify(context, operator, value)\n\t{\n\t\tlet obj = this.obj._handle_eval(context);\n\t\tthis._modify(operator, obj, this.attrname, value);\n\t}\n\n\t_get(object, attrname)\n\t{\n\t\tlet type = _type(object);\n\t\ttry\n\t\t{\n\t\t\treturn type.getattr(object, attrname);\n\t\t}\n\t\tcatch (exc)\n\t\t{\n\t\t\tif (exc instanceof AttributeError && exc.obj === object)\n\t\t\t\treturn undefined;\n\t\t\telse\n\t\t\t\tthrow exc;\n\t\t}\n\t}\n\n\t_set(object, attrname, value)\n\t{\n\t\tif (typeof(object) === \"object\" && typeof(object[symbols.setattr]) === \"function\")\n\t\t\tobject[symbols.setattr](attrname, value);\n\t\telse if (_ismap(object))\n\t\t\tobject.set(attrname, value);\n\t\telse if (_isobject(object))\n\t\t\tobject[attrname] = value;\n\t\telse\n\t\t\tthrow new TypeError(_type(object).fullname() + \" object has no writable attributes\");\n\t}\n\n\t_modify(operator, object, attrname, value)\n\t{\n\t\tlet oldvalue = this._get(object, attrname);\n\t\tlet newvalue = operator._ido(oldvalue, value);\n\t\tthis._set(object, attrname, newvalue);\n\t}\n};\n\nAttrAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"obj\", \"attrname\"]);\n\n// Function call (`x(y, z)`)\nexport class CallAST extends CodeAST\n{\n\tstatic classdoc = \"AST node for calling an object (e.g. ``f(x, y)``).\";\n\n\tconstructor(template, pos, obj, args)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.obj = obj;\n\t\tthis.args = args;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<\", this.constructor.name, \" obj=\");\n\t\tthis.obj._repr(out);\n\t\tfor (let arg of this.args)\n\t\t{\n\t\t\tout.push(\" \");\n\t\t\targ._repr(out);\n\t\t}\n\t\tout.push(\">\");\n\t}\n\n\t_makeargs(context)\n\t{\n\t\tlet args = [], kwargs = {};\n\t\tfor (let arg of this.args)\n\t\t\targ._handle_eval_call(context, args, kwargs);\n\t\treturn [args, kwargs];\n\t}\n\n\t_handle_eval(context)\n\t{\n\t\ttry\n\t\t{\n\t\t\treturn this._eval(context);\n\t\t}\n\t\tcatch (exc)\n\t\t{\n\t\t\tthis._decorate_exception(exc);\n\t\t\tthrow exc;\n\t\t}\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet obj = this.obj._handle_eval(context);\n\t\tlet [args, kwargs] = this._makeargs(context);\n\t\tlet result = _call(context, obj, args, kwargs);\n\t\treturn result;\n\t}\n};\n\nCallAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"obj\", \"args\"]);\n\n\nexport class RenderAST extends CallAST\n{\n\tstatic classdoc = \"AST node for rendering a template (e.g. ``<?render t(x)?>``.\";\n\n\tconstructor(template, pos, obj, args)\n\t{\n\t\tsuper(template, pos, obj, args);\n\t\tthis.indent = null;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\n\t\t\t\"<\",\n\t\t\tthis.constructor.name,\n\t\t\t\" indent=\",\n\t\t\t_repr(this.indent.text),\n\t\t\t\" obj=\"\n\t\t);\n\t\tthis.obj._repr(out);\n\t\tout.push(0);\n\t\tfor (let arg of this.args)\n\t\t{\n\t\t\tout.push(\" \");\n\t\t\targ._repr(out);\n\t\t\tout.push(0);\n\t\t}\n\t\tout.push(-1, \">\");\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(\"render \", this.source.replace(/\\r?\\n/g, ' '));\n\t\tif (this.indent !== null)\n\t\t{\n\t\t\tout.push(\" with indent \", _repr(this.indent.text));\n\t\t}\n\t}\n\n\t_render_object(context, obj, args, kwargs)\n\t{\n\t\treturn _callrender(context, obj, args, kwargs);\n\t}\n\n\t_renderx_object(context, obj, args, kwargs)\n\t{\n\t\tcontext.escapes.push(_xmlescape);\n\n\t\tlet result = null;\n\t\ttry\n\t\t{\n\t\t\tresult = _callrender(context, obj, args, kwargs);\n\t\t}\n\t\tfinally\n\t\t{\n\t\t\tcontext.escapes.splice(context.escapes.length-1, 1);\n\t\t}\n\t\treturn result;\n\t}\n\n\t_real_render_object(context, obj, args, kwargs)\n\t{\n\t\tthis._render_object(context, obj, args, kwargs);\n\t}\n\n\t_print_object(context, obj, args, kwargs)\n\t{\n\t\tlet output = _str(obj);\n\t\tcontext.output(output);\n\t}\n\n\t_printx_object(context, obj)\n\t{\n\t\tlet output = _xmlescape(obj);\n\t\tcontext.output(output);\n\t}\n\n\t_dont_print_object(context, obj)\n\t{\n\t\tthrow new TypeError(_repr(obj) + \" is not renderable by UL4\");\n\t}\n\n\t_real_print_object(context, obj)\n\t{\n\t\tthis._dont_print_object(context, obj);\n\t}\n\n\t_handle_eval(context)\n\t{\n\t\tlet localcontext = context.withindent(this.indent !== null ? this.indent.text : null);\n\t\tlet obj = this.obj._handle_eval(localcontext);\n\t\t// If the object turns out to not be renderable we nonetheless evaluate the arguments\n\t\tlet [args, kwargs] = this._makeargs(localcontext);\n\t\tthis._handle_additional_arguments(localcontext, args, kwargs);\n\n\t\ttry\n\t\t{\n\t\t\tif (_object_is_renderable(obj))\n\t\t\t{\n\t\t\t\tthis._real_render_object(localcontext, obj, args, kwargs);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis._real_print_object(localcontext, obj);\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t\tcatch (exc)\n\t\t{\n\t\t\tthis._decorate_exception(exc);\n\t\t\tthrow exc;\n\t\t}\n\t}\n\n\t_handle_additional_arguments(context, args)\n\t{\n\t}\n};\n\nRenderAST.prototype._ul4onattrs = CallAST.prototype._ul4onattrs.concat([\"indent\"]);\n\n\nexport class RenderXAST extends RenderAST\n{\n\tstatic classdoc = \"AST node for rendering a template and XML-escaping the output\\n(e.g. ``<?renderx t(x)?>``.\";\n\n\t_real_render_object(context, obj, args, kwargs)\n\t{\n\t\tthis._renderx_object(context, obj, args, kwargs);\n\t}\n};\n\n\nexport class RenderOrPrintAST extends RenderAST\n{\n\tstatic classdoc = \"AST node for rendering a template or printing an object.\";\n\n\t_real_print_object(context, obj)\n\t{\n\t\tthis._print_object(context, obj);\n\t}\n};\n\n\nexport class RenderOrPrintXAST extends RenderAST\n{\n\tstatic classdoc = \"AST node for rendering a template or printing an object\\n(e.g. ``<?render_or_printx t(x)?>``.\";\n\n\t_real_print_object(context, obj)\n\t{\n\t\tthis._printx_object(context, obj);\n\t}\n};\n\n\nexport class RenderXOrPrintAST extends RenderAST\n{\n\tstatic classdoc = \"AST node for rendering a template or printing an object\\n(e.g. ``<?renderx_or_print t(x)?>``.\";\n\n\t_real_render_object(context, obj, args, kwargs)\n\t{\n\t\tthis._renderx_object(context, obj, args, kwargs);\n\t}\n\n\t_real_print_object(context, obj)\n\t{\n\t\tthis._print_object(context, obj);\n\t}\n};\n\n\nexport class RenderXOrPrintXAST extends RenderAST\n{\n\tstatic classdoc = \"AST node for rendering a template or printing an object\\n(e.g. ``<?renderx_or_printx t(x)?>``.\";\n\n\t_real_render_object(context, obj, args, kwargs)\n\t{\n\t\tthis._renderx_object(context, obj, args, kwargs);\n\t}\n\n\t_real_print_object(context, obj)\n\t{\n\t\tthis._printx_object(context, obj);\n\t}\n};\n\n\nexport class RenderBlockAST extends RenderAST\n{\n\tstatic classdoc = \"AST node for rendering a template via a ``<?renderblock?>`` block and\\npassing the content of the block as one additional keyword argument named\\n``content``.\";\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<\", this.constructor.name, +1, \"obj=\");\n\t\tthis.obj._repr(out);\n\t\tfor (let arg of this.args)\n\t\t{\n\t\t\tout.push(0);\n\t\t\targ._repr(out);\n\t\t}\n\t\tout.push(0, \"content=\");\n\t\tthis.content._repr(out);\n\t\tout.push(-1, \">\");\n\t}\n\n\t_handle_additional_arguments(context, args, kwargs)\n\t{\n\t\tif (kwargs.hasOwnProperty(\"content\"))\n\t\t\tthrow new ArgumentError(\"duplicate keyword argument content\");\n\t\tlet closure = new TemplateClosure(this.content, this.content.signature, context.vars);\n\t\tkwargs.content = closure;\n\t}\n\n\t[symbols.getattr](attrname)\n\t{\n\t\tif (\n\t\t\tattrname === \"stoppos\" ||\n\t\t\tattrname === \"stopsource\" ||\n\t\t\tattrname === \"stopsourceprefix\" ||\n\t\t\tattrname === \"stopsourcesuffix\"\n\t\t)\n\t\t\treturn this[attrname];\n\t\telse\n\t\t\treturn super[symbols.getattr](attrname);\n\t}\n};\n\nRenderBlockAST.prototype._ul4onattrs = RenderAST.prototype._ul4onattrs.concat([\"stoppos\", \"content\"]);\n\n\nexport class RenderBlocksAST extends RenderAST\n{\n\tstatic classdoc = \"AST node for rendering a template and passing additional arguments via\\nnested variable definitions, e.g.::\";\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<\", this.constructor.name, +1, \"obj=\");\n\t\tthis.obj._repr(out);\n\t\tfor (let arg of this.args)\n\t\t{\n\t\t\tout.push(0);\n\t\t\targ._repr(out);\n\t\t}\n\t\tfor (let item of this.content)\n\t\t{\n\t\t\tout.push(0);\n\t\t\titem._repr(out);\n\t\t}\n\t\tout.push(-1, \">\");\n\t}\n\n\t_handle_additional_arguments(context, args, kwargs)\n\t{\n\t\tlet localcontext = context.inheritvars();\n\t\tBlockAST.prototype._eval.call(this, localcontext);\n\n\t\tfor (let key in localcontext.vars)\n\t\t{\n\t\t\tif (localcontext.vars.hasOwnProperty(key))\n\t\t\t{\n\t\t\t\tif (key in kwargs)\n\t\t\t\t\tthrow new ArgumentError(\"duplicate keyword argument \" + key);\n\t\t\t\tkwargs[key] = localcontext.get(key);\n\t\t\t}\n\t\t}\n\t}\n\n\t[symbols.getattr](attrname)\n\t{\n\t\tif (\n\t\t\tattrname === \"stoppos\" ||\n\t\t\tattrname === \"stopsource\" ||\n\t\t\tattrname === \"stopsourceprefix\" ||\n\t\t\tattrname === \"stopsourcesuffix\"\n\t\t)\n\t\t\treturn this[attrname];\n\t\telse\n\t\t\treturn super[symbols.getattr](attrname);\n\t}\n};\n\nRenderBlocksAST.prototype._ul4onattrs = RenderAST.prototype._ul4onattrs.concat([\"stoppos\", \"content\"]);\n\n\n// Slice object\nexport class slice extends Proto\n{\n\tconstructor(start, stop)\n\t{\n\t\tsuper();\n\t\tthis.start = start;\n\t\tthis.stop = stop;\n\t}\n\n\t[symbols.type]()\n\t{\n\t\treturn this.type;\n\t}\n\n\tof(string)\n\t{\n\t\tlet start = this.start || 0;\n\t\tlet stop = this.stop === null ? string.length : this.stop;\n\t\treturn string.slice(start, stop);\n\t}\n\n\t[symbols.repr]()\n\t{\n\t\treturn \"slice(\" + _repr(this.start) + \", \" + _repr(this.stop) + \", None)\";\n\t}\n\n\t[symbols.getattr](attrname)\n\t{\n\t\tswitch (attrname)\n\t\t{\n\t\t\tcase \"start\":\n\t\t\t\treturn this.start;\n\t\t\tcase \"stop\":\n\t\t\t\treturn this.stop;\n\t\t\tdefault:\n\t\t\t\tthrow new AttributeError(this, attrname);\n\t\t}\n\t}\n};\n\nslice.prototype.type = new Type(null, \"slice\", \"A slice specification.\");\n\n\n// List/String slice (`x[y:z]`)\nexport class SliceAST extends CodeAST\n{\n\tstatic classdoc = \"AST node for creating a slice object (used in ``obj[index1:index2]``).\";\n\n\tconstructor(template, pos, index1, index2)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.index1 = index1;\n\t\tthis.index2 = index2;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<\", this.constructor.name);\n\t\tif (this.index1 !== null)\n\t\t{\n\t\t\tout.push(\" index1=\");\n\t\t\tthis.index1._repr(out);\n\t\t}\n\t\tif (this.index2 !== null)\n\t\t{\n\t\t\tout.push(\" index2=\");\n\t\t\tthis.index2._repr(out);\n\t\t}\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet index1 = this.index1 !== null ? this.index1._handle_eval(context) : null;\n\t\tlet index2 = this.index2 !== null ? this.index2._handle_eval(context) : null;\n\t\treturn new slice(index1, index2);\n\t}\n};\n\nSliceAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"index1\", \"index2\"]);\n\nexport class ChangeVarAST extends CodeAST\n{\n\tstatic classdoc = \"Base class for all AST nodes that are assignment operators, i.e. that\\nset or modify a variable/attribute or item.\";\n\n\tconstructor(template, pos, lvalue, value)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.lvalue = lvalue;\n\t\tthis.value = value;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\n\t\t\t\"<\",\n\t\t\tthis.constructor.name,\n\t\t\t\" lvalue=\",\n\t\t\t_repr(this.lvalue),\n\t\t\t\" value=\"\n\t\t);\n\t\tthis.value._repr(out);\n\t\tout.push(\">\");\n\t}\n};\n\nChangeVarAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"lvalue\", \"value\"]);\n\nexport class SetVarAST extends ChangeVarAST\n{\n\tstatic classdoc = \"AST node for setting a variable, attribute or item to a value (e.g.\\n``x = y``).\";\n\n\t_eval(context)\n\t{\n\t\tlet value = this.value._handle_eval(context);\n\t\tlet items = _unpackvar(this.lvalue, value);\n\t\tfor (let [lvalue, value] of items)\n\t\t\tlvalue._handle_eval_set(context, value);\n\t}\n};\n\nexport class ModifyVarAST extends ChangeVarAST\n{\n\t_eval(context)\n\t{\n\t\tlet value = this.value._handle_eval(context);\n\t\tlet items = _unpackvar(this.lvalue, value);\n\t\tfor (let [lvalue, value] of items)\n\t\t\tlvalue._handle_eval_modify(context, this._operator, value);\n\t}\n};\n\nexport class AddVarAST extends ModifyVarAST\n{\n\tstatic classdoc = \"AST node for an augmented assignment expression that adds a value to a\\nvariable (e.g. ``x += y``).\";\n};\n\nAddVarAST.prototype._operator = AddAST.prototype;\n\nexport class SubVarAST extends ModifyVarAST\n{\n\tstatic classdoc = \"AST node for an augmented assignment expression that subtracts a value from\\na variable/attribute/item. (e.g. ``x -= y``).\";\n};\n\nSubVarAST.prototype._operator = SubAST.prototype;\n\nexport class MulVarAST extends ModifyVarAST\n{\n\tstatic classdoc = \"AST node for an augmented assignment expression that assigns the result\\nof a multiplication to its left operand. (e.g. ``x *= y``).\";\n};\n\nMulVarAST.prototype._operator = MulAST.prototype;\n\nexport class TrueDivVarAST extends ModifyVarAST\n{\n\tstatic classdoc = \"AST node for an augmented assignment expression that assigns the result\\nof a truncation division to its left operand. (e.g. ``x //= y``).\";\n};\n\nTrueDivVarAST.prototype._operator = TrueDivAST.prototype;\n\nexport class FloorDivVarAST extends ModifyVarAST\n{\n\tstatic classdoc = \"AST node for augmented assignment expression that divides a variable by a\\nvalue, truncating to an integer value (e.g. ``x //= y``).\";\n};\n\nFloorDivVarAST.prototype._operator = FloorDivAST.prototype;\n\nexport class ModVarAST extends ModifyVarAST\n{\n\tstatic classdoc = \"AST node for an augmented assignment expression that assigns the result\\nof a modulo expression to its left operand. (e.g. ``x %= y``).\";\n};\n\nModVarAST.prototype._operator = ModAST.prototype;\n\nexport class ShiftLeftVarAST extends ModifyVarAST\n{\n\tstatic classdoc = \"AST node for an augmented assignment expression that assigns the result\\nof a \\\"shift left\\\" expression to its left operand. (e.g. ``x <<= y``).\";\n};\n\nShiftLeftVarAST.prototype._operator = ShiftLeftAST.prototype;\n\nexport class ShiftRightVarAST extends ModifyVarAST\n{\n\tstatic classdoc = \"AST node for an augmented assignment expression that assigns the result\\nof a \\\"shift right\\\" expression to its left operand. (e.g. ``x >>= y``).\";\n};\n\nShiftRightVarAST.prototype._operator = ShiftRightAST.prototype;\n\nexport class BitAndVarAST extends ModifyVarAST\n{\n\tstatic classdoc = \"AST node for an augmented assignment expression that assigns the result\\nof a binary bitwise \\\"and\\\" expression to its left operand.\\n(e.g. ``x &= y``).\";\n};\n\nBitAndVarAST.prototype._operator = BitAndAST.prototype;\n\nexport class BitXOrVarAST extends ModifyVarAST\n{\n\tstatic classdoc = \"AST node for an augmented assignment expression that assigns the result\\nof a binary bitwise \\\"exclusive or\\\" expression to its left operand.\\n(e.g. ``x ^= y``).\";\n};\n\nBitXOrVarAST.prototype._operator = BitXOrAST.prototype;\n\nexport class BitOrVarAST extends ModifyVarAST\n{\n\tstatic classdoc = \"AST node for an augmented assignment expression that assigns the result\\nof a binary bitwise \\\"or\\\" expression to its left operand.\\n(e.g. ``x |= y``).\";\n};\n\nBitOrVarAST.prototype._operator = BitOrAST.prototype;\n\nexport class BlockAST extends CodeAST\n{\n\tstatic classdoc = \"Base class for all AST nodes that are blocks.\";\n\n\tconstructor(template, startpos, stoppos)\n\t{\n\t\tsuper(template, startpos, stoppos);\n\t\tthis.content = [];\n\t}\n\n\t_eval(context)\n\t{\n\t\tfor (let item of this.content)\n\t\t\titem._handle_eval(context);\n\t}\n\n\t_str(out)\n\t{\n\t\tif (this.content.length)\n\t\t{\n\t\t\tfor (let item of this.content)\n\t\t\t{\n\t\t\t\titem._str(out);\n\t\t\t\tout.push(0);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tout.push(\"pass\", 0);\n\t\t}\n\t}\n\n\t[symbols.getattr](attrname)\n\t{\n\t\tif (\n\t\t\tattrname === \"stoppos\" ||\n\t\t\tattrname === \"stopsource\" ||\n\t\t\tattrname === \"stopsourceprefix\" ||\n\t\t\tattrname === \"stopsourcesuffix\"\n\t\t)\n\t\t\treturn this[attrname];\n\t\telse\n\t\t\treturn super[symbols.getattr](attrname);\n\t}\n};\n\nBlockAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"stoppos\", \"content\"]);\n\nexport class ForBlockAST extends BlockAST\n{\n\tstatic classdoc = \"AST node for a ``<?for?>`` loop.\";\n\n\tconstructor(template, pos, varname, container)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.varname = varname;\n\t\tthis.container = container;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\n\t\t\t\"<\",\n\t\t\tthis.constructor.name,\n\t\t\t\" varname=\",\n\t\t\t_repr(this.varname),\n\t\t\t\" container=\"\n\t\t);\n\t\tthis.container._repr(out);\n\t\tout.push(\">\");\n\t}\n\n\t_str_varname(out, varname)\n\t{\n\t\tif (_islist(varname))\n\t\t{\n\t\t\tout.push(\"(\");\n\t\t\tlet first = truel\n\t\t\tfor (let subname of varname)\n\t\t\t{\n\t\t\t\tif (first)\n\t\t\t\t\tfirst = false;\n\t\t\t\telse\n\t\t\t\t\tout.push(\", \");\n\t\t\t\tthis._str_varname(out, subname);\n\t\t\t}\n\t\t\tif (varname.length == 1)\n\t\t\t\tout.push(\",\");\n\t\t\tout.push(\")\");\n\t\t}\n\t\telse\n\t\t\tvarname._str(out);\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet container = this.container._handle_eval(context);\n\n\t\tfor (let iter = _iter(container);;)\n\t\t{\n\t\t\tlet value = iter.next();\n\t\t\tif (value.done)\n\t\t\t\tbreak;\n\t\t\tlet varitems = _unpackvar(this.varname, value.value);\n\t\t\tfor (let [lvalue, value] of varitems)\n\t\t\t\tlvalue._handle_eval_set(context, value);\n\t\t\ttry\n\t\t\t{\n\t\t\t\t// We can't call _handle_eval() here, as this would in turn call\n\t\t\t\t// this function again, leading to infinite recursion. But we\n\t\t\t\t// don't have to, as wrapping the original exception in `Error`\n\t\t\t\t// has already been done by the lower levels.\n\t\t\t\tsuper._eval(context);\n\t\t\t}\n\t\t\tcatch (exc)\n\t\t\t{\n\t\t\t\tif (exc instanceof BreakException)\n\t\t\t\t\tbreak;\n\t\t\t\telse if (exc instanceof ContinueException)\n\t\t\t\t\t;\n\t\t\t\telse\n\t\t\t\t\tthrow exc;\n\t\t\t}\n\t\t}\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(\"for \");\n\t\tthis._str_varname(out, this.varname);\n\t\tout.push(\" in \");\n\t\tthis.container._str(out);\n\t\tout.push(\":\", +1);\n\t\tBlockAST.prototype._str.call(this, out);\n\t\tout.push(-1);\n\t}\n};\n\nForBlockAST.prototype._ul4onattrs = BlockAST.prototype._ul4onattrs.concat([\"varname\", \"container\"]);\n\nexport class WhileBlockAST extends BlockAST\n{\n\tstatic classdoc = \"AST node for a ``<?while?>`` loop.\";\n\n\tconstructor(template, pos, condition)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.condition = condition;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<\", this.constructor.name, \" condition=\");\n\t\tthis.condition._repr(out);\n\t\tout.push(\">\");\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(\"while \");\n\t\tthis.condition._repr(out);\n\t\tout.push(\":\", +1);\n\t\tBlockAST.prototype._str.call(this, out);\n\t\tout.push(-1);\n\t}\n\n\t_eval(context)\n\t{\n\t\twhile (true)\n\t\t{\n\t\t\tlet cond = this.condition._handle_eval(context);\n\t\t\tif (!_bool(cond))\n\t\t\t\tbreak;\n\t\t\ttry\n\t\t\t{\n\t\t\t\t// We can't call _handle_eval() here, as this would in turn call\n\t\t\t\t// this function again, leading to infinite recursion. But we\n\t\t\t\t// don't have to, as wrapping the original exception in `Error`\n\t\t\t\t// has already been done by the lower levels.\n\t\t\t\tsuper._eval(context);\n\t\t\t}\n\t\t\tcatch (exc)\n\t\t\t{\n\t\t\t\tif (exc instanceof BreakException)\n\t\t\t\t\tbreak;\n\t\t\t\telse if (exc instanceof ContinueException)\n\t\t\t\t\t;\n\t\t\t\telse\n\t\t\t\t\tthrow exc;\n\t\t\t}\n\t\t}\n\t}\n};\n\nWhileBlockAST.prototype._ul4onattrs = BlockAST.prototype._ul4onattrs.concat([\"condition\"]);\n\nexport class BreakAST extends CodeAST\n{\n\tstatic classdoc = \"AST node for a ``<?break?>`` tag inside a ``<?for?>`` loop.\";\n\n\t_eval(context)\n\t{\n\t\tthrow new BreakException();\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(\"break\", 0);\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<\", this.constructor.name, \">\");\n\t}\n};\n\nexport class ContinueAST extends CodeAST\n{\n\tstatic classdoc = \"AST node for a ``<?continue?>`` tag inside a ``<?for?>`` block.\";\n\n\t_eval(context)\n\t{\n\t\tthrow new ContinueException();\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(\"continue\", 0);\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<\", this.constructor.name, \">\");\n\t}\n};\n\nexport class ConditionalBlocksAST extends BlockAST\n{\n\tstatic classdoc = \"AST node for a conditional ``<?if?>/<?elif?>/<?else?>`` block.\";\n\n\t_eval(context)\n\t{\n\t\tfor (let block of this.content)\n\t\t{\n\t\t\tlet execute = block._execute(context);\n\t\t\tif (execute)\n\t\t\t{\n\t\t\t\tblock._handle_eval(context);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n};\n\nexport class ConditionalBlockAST extends  BlockAST\n{\n\tconstructor(template, pos, condition)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.condition = condition;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<\", this.constructor.name, \" condition=\");\n\t\tthis.condition._repr(out);\n\t\tout.push(\">\");\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(this._strname, \" \");\n\t\tthis.condition._str(out);\n\t\tout.push(\":\", +1);\n\t\tBlockAST.prototype._str.call(this, out);\n\t\tout.push(-1);\n\t}\n\n\t_execute(context)\n\t{\n\t\tlet cond = this.condition._handle_eval(context);\n\t\tlet result = _bool(cond);\n\t\treturn result;\n\t}\n};\n\nConditionalBlockAST.prototype._ul4onattrs = BlockAST.prototype._ul4onattrs.concat([\"condition\"]);\n\nexport class IfBlockAST extends ConditionalBlockAST\n{\n\tstatic classdoc = \"AST node for an ``<?if?>`` block in an ``<?if?>/<?elif?>/<?else?>`` block.\";\n};\n\nIfBlockAST.prototype._strname = \"if\";\n\nexport class ElIfBlockAST extends ConditionalBlockAST\n{\n\tstatic classdoc = \"AST node for an ``<?elif?>`` block.\";\n};\n\nElIfBlockAST.prototype._strname = \"else if\";\n\nexport class ElseBlockAST extends BlockAST\n{\n\tstatic classdoc = \"AST node for an ``<?else?>`` block.\";\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<\", this.constructor.name, \">\");\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(\"else:\", +1);\n\t\tBlockAST.prototype._str.call(this, out);\n\t\tout.push(-1);\n\t}\n\n\t_execute(context)\n\t{\n\t\treturn true;\n\t}\n};\n\n\nexport class Template extends BlockAST\n{\n\tstatic classdoc = \"An UL4 template\";\n\n\tconstructor(template, pos, source, name, whitespace, signature)\n\t{\n\t\tsuper(template, pos);\n\t\tthis._source = source;\n\t\tthis.name = name;\n\t\tthis.whitespace = whitespace;\n\t\tthis.docpos = null;\n\t\tthis.signature = signature;\n\t\tthis._asts = null;\n\t\tthis._ul4_signature = signature;\n\t\tthis.parenttemplate = null;\n\t}\n\n\t[symbols.getattr](attrname)\n\t{\n\t\tlet self = this;\n\t\tswitch (attrname)\n\t\t{\n\t\t\tcase \"content\":\n\t\t\t\treturn this.content;\n\t\t\tcase \"source\":\n\t\t\t\treturn this.source;\n\t\t\tcase \"name\":\n\t\t\t\treturn this.name;\n\t\t\tcase \"whitespace\":\n\t\t\t\treturn this.whitespace;\n\t\t\tcase \"doc\":\n\t\t\t\treturn this.doc();\n\t\t\tcase \"signature\":\n\t\t\t\treturn this.signature;\n\t\t\tcase \"parenttemplate\":\n\t\t\t\treturn this.parenttemplate;\n\t\t\tcase \"render\":\n\t\t\t\tlet render = function render(context, vars){ self._renderbound(context, vars); };\n\t\t\t\texpose(render, this.signature, {needscontext: true, needsobject: true});\n\t\t\t\treturn render;\n\t\t\tcase \"renders\":\n\t\t\t\tlet renders = function renders(context, vars){ return self._rendersbound(context, vars); };\n\t\t\t\texpose(renders, this.signature, {needscontext: true, needsobject: true});\n\t\t\t\treturn renders;\n\t\t\tdefault:\n\t\t\t\treturn super[symbols.getattr](attrname);\n\t\t}\n\t}\n\n\tul4ondump(encoder)\n\t{\n\t\tlet signature;\n\t\tencoder.dump(api_version);\n\t\tencoder.dump(this.name);\n\t\tencoder.dump(this._source);\n\t\tencoder.dump(this.whitespace);\n\t\tencoder.dump(this.docpos);\n\t\tencoder.dump(this.parenttemplate);\n\t\tif (this.signature === null || this.signature instanceof SignatureAST)\n\t\t\tsignature = this.signature;\n\t\telse\n\t\t{\n\t\t\tsignature = [];\n\t\t\tfor (let param of this.signature.params)\n\t\t\t{\n\t\t\t\tsignature.push(param.name, param.type);\n\t\t\t\tif (param.type.endsWith(\"=\"))\n\t\t\t\t\tsignature.push(param.defaultValue);\n\t\t\t}\n\t\t}\n\t\tencoder.dump(signature);\n\t\tsuper.ul4ondump(encoder);\n\t}\n\n\tul4onload(decoder)\n\t{\n\t\tlet loaded_api_version = decoder.load();\n\t\tlet signature;\n\n\t\tif (loaded_api_version === null)\n\t\t\tthrow new ValueError(\"UL4ON doesn't support templates in 'source' format in Javascript implementation\");\n\n\t\tif (loaded_api_version !== api_version)\n\t\t\tthrow new ValueError(\"invalid version, expected \" + api_version + \", got \" + loaded_api_version);\n\n\t\tthis.name = decoder.load();\n\t\tthis._source = decoder.load();\n\t\tthis.whitespace = decoder.load();\n\t\tthis.docpos = decoder.load();\n\t\tthis.parenttemplate = decoder.load();\n\t\tsignature = decoder.load();\n\t\tif (_islist(signature))\n\t\t\tsignature = new Signature(...signature);\n\t\tthis.signature = signature;\n\t\tthis._ul4_signature = signature;\n\t\tsuper.ul4onload(decoder);\n\t}\n\n\tloads(string)\n\t{\n\t\treturn loads(string);\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet signature = null;\n\t\tif (this.signature !== null)\n\t\t\tsignature = this.signature._handle_eval(context);\n\t\tlet closure = new TemplateClosure(this, signature, context.vars);\n\t\tcontext.set(this.name, closure);\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<\", this.constructor.name);\n\t\tif (this.name !== null)\n\t\t\tout.push(\" name=\", _repr(this.name));\n\t\tout.push(\" whitespace=\", _repr(this.whitespace), \">\");\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(\n\t\t\t\"def \",\n\t\t\tthis.name ? this.name : \"unnamed\",\n\t\t\t\":\",\n\t\t\t+1\n\t\t);\n\t\tBlockAST.prototype._str.call(this, out);\n\t\tout.push(-1);\n\t}\n\n\t_renderbound(context, vars)\n\t{\n\t\tlet localcontext = context.replacevars(vars);\n\t\ttry\n\t\t{\n\t\t\tBlockAST.prototype._eval.call(this, localcontext);\n\t\t}\n\t\tcatch (exc)\n\t\t{\n\t\t\tif (!(exc instanceof ReturnException))\n\t\t\t\tthrow exc;\n\t\t}\n\t}\n\n\t[symbols.render](context, vars)\n\t{\n\t\tthis._renderbound(context, vars);\n\t}\n\n\trender(context, vars)\n\t{\n\t\tthis._renderbound(context, vars);\n\t}\n\n\t_rendersbound(context, vars)\n\t{\n\t\tlet localcontext = context.replaceoutput();\n\t\tthis._renderbound(localcontext, vars);\n\t\treturn localcontext.getoutput();\n\t}\n\n\trenders(vars=null, globals=null)\n\t{\n\t\tlet context = new Context({}, globals);\n\t\tvars = vars || {};\n\t\tif (this.signature !== null)\n\t\t\tvars = this.signature.bindObject(this.name, [], vars);\n\t\treturn this._rendersbound(context, vars);\n\t}\n\n\tdoc()\n\t{\n\t\treturn this.docpos != null ? this.docpos.of(this._source) : null;\n\t}\n\n\t_callbound(context, vars)\n\t{\n\t\tlet localcontext = context.replacevars(vars);\n\t\ttry\n\t\t{\n\t\t\tBlockAST.prototype._eval.call(this, localcontext);\n\t\t}\n\t\tcatch (exc)\n\t\t{\n\t\t\tif (exc instanceof ReturnException)\n\t\t\t\treturn exc.result;\n\t\t\telse\n\t\t\t\tthrow exc;\n\t\t}\n\t\treturn null;\n\t}\n\n\tcall(vars=null, globals=null)\n\t{\n\t\tlet context = new Context({}, globals);\n\t\tvars = vars || {};\n\t\tif (this.signature !== null)\n\t\t\tvars = this.signature.bindObject(this.name, [], vars);\n\t\treturn this._callbound(context, vars);\n\t}\n\n\t[symbols.call](context, vars)\n\t{\n\t\treturn this._callbound(context, vars);\n\t}\n\n\tul4type()\n\t{\n\t\treturn \"template\";\n\t}\n};\n\nTemplate.prototype._ul4_needsobject = true;\nTemplate.prototype._ul4_needscontext = true;\n\nexport class SignatureAST extends CodeAST\n{\n\tstatic classdoc = \"AST node for the signature of a locally defined subtemplate.\";\n\n\tconstructor(template, pos)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.params = [];\n\t}\n\n\tul4ondump(encoder)\n\t{\n\t\tsuper.ul4ondump(encoder);\n\n\t\tlet dump = [];\n\n\t\tfor (let param of this.params)\n\t\t{\n\t\t\tdump.push(param[0], param[1]);\n\t\t\tif (param[1].endsWith(\"=\"))\n\t\t\t\tdump.push(param[2]);\n\t\t}\n\t\tencoder.dump(dump);\n\t}\n\n\tul4onload(decoder)\n\t{\n\t\tsuper.ul4onload(decoder);\n\t\tlet dump = decoder.load();\n\t\tthis.params = [];\n\t\tlet name;\n\t\tlet type;\n\t\tlet state = 0;\n\t\tfor (let param of dump)\n\t\t{\n\t\t\tif (state == 0)\n\t\t\t{\n\t\t\t\tname = param;\n\t\t\t\tstate = 1;\n\t\t\t}\n\t\t\telse if (state == 1)\n\t\t\t{\n\t\t\t\ttype = param;\n\t\t\t\tif (type.endsWith(\"=\"))\n\t\t\t\t\tstate = 2;\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.params.push({name: name, type: type, defaultValue: null});\n\t\t\t\t\tstate = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.params.push({name: name, type: type, defaultValue: param});\n\t\t\t\tstate = 0;\n\t\t\t}\n\t\t}\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet args = [];\n\t\tfor (let param of this.params)\n\t\t{\n\t\t\targs.push(param.name, param.type);\n\t\t\tif (param.type.endsWith(\"=\"))\n\t\t\t\targs.push(param.defaultValue._handle_eval(context));\n\t\t}\n\t\treturn new Signature(...args);\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<\", this.constructor.name, \" params=\");\n\t\tthis.params._repr(out);\n\t\tout.push(\">\");\n\t}\n};\n\nexport class TemplateClosure extends Proto\n{\n\tstatic classmodule = \"ul4\";\n\tstatic classdoc = \"A locally defined UL4 template\";\n\n\tconstructor(template, signature, vars)\n\t{\n\t\tsuper();\n\t\tthis.template = template;\n\t\tthis.signature = signature;\n\t\tthis.vars = vars;\n\t\tthis._ul4_signature = signature;\n\t\t// Copy over the required attribute from the template\n\t\tthis.name = template.name;\n\t\tthis.tag = template.tag;\n\t\tthis.endtag = template.endtag;\n\t\tthis._source = template._source;\n\t\tthis.docpos = template.docpos;\n\t\tthis.content = template.content;\n\t}\n\n\t[symbols.render](context, vars)\n\t{\n\t\tthis.template._renderbound(context, _extend(this.vars, vars));\n\t}\n\n\trender(context, vars)\n\t{\n\t\tthis.template._renderbound(context, _extend(this.vars, vars));\n\t}\n\n\t[symbols.call](context, vars)\n\t{\n\t\treturn this.template._callbound(context, _extend(this.vars, vars));\n\t}\n\n\t_renderbound(context, vars)\n\t{\n\t\tthis.template._renderbound(context, _extend(this.vars, vars));\n\t}\n\n\t_rendersbound(context, vars)\n\t{\n\t\treturn this.template._rendersbound(context, _extend(this.vars, vars));\n\t}\n\n\t[symbols.getattr](attrname)\n\t{\n\t\tlet self = this;\n\t\tswitch (attrname)\n\t\t{\n\t\t\tcase \"render\":\n\t\t\t\tlet render = function render(context, vars){ self._renderbound(context, vars); };\n\t\t\t\texpose(render, this.signature, {needscontext: true, needsobject: true});\n\t\t\t\treturn render;\n\t\t\tcase \"renders\":\n\t\t\t\tlet renders = function renders(context, vars){ return self._rendersbound(context, vars); };\n\t\t\t\texpose(renders, this.signature, {needscontext: true, needsobject: true});\n\t\t\t\treturn renders;\n\t\t\tcase \"signature\":\n\t\t\t\treturn this.signature;\n\t\t\tdefault:\n\t\t\t\treturn this.template[symbols.getattr](attrname);\n\t\t}\n\t}\n\n\tul4type()\n\t{\n\t\treturn \"template\";\n\t}\n};\n\nTemplateClosure.prototype._ul4_needsobject = true;\nTemplateClosure.prototype._ul4_needscontext = true;\n\n// Create a color object from the red, green, blue and alpha values\n// `r`, `g`, `b` and `b`\nexport function _rgb(r, g, b, a)\n{\n\treturn new Color(255*r, 255*g, 255*b, 255*a);\n};\n\n// Convert `obj` to a string and escape the characters `&`, `<`, `>`,\n// `'` and `\"` with their XML character/entity reference\nexport function _xmlescape(obj)\n{\n\tobj = _str(obj);\n\tobj = obj.replace(/&/g, \"&amp;\");\n\tobj = obj.replace(/</g, \"&lt;\");\n\tobj = obj.replace(/>/g, \"&gt;\");\n\tobj = obj.replace(/'/g, \"&#39;\");\n\tobj = obj.replace(/\"/g, \"&quot;\");\n\treturn obj;\n};\n\n// Convert `obj` to a string suitable for output into a CSV file\nexport function _csv(obj)\n{\n\tif (obj === null)\n\t\treturn \"\";\n\telse if (typeof(obj) !== \"string\")\n\t\tobj = _repr(obj);\n\tif (obj.indexOf(\",\") !== -1 || obj.indexOf('\"') !== -1 || obj.indexOf(\"\\n\") !== -1)\n\t\tobj = '\"' + obj.replace(/\"/g, '\"\"') + '\"';\n\treturn obj;\n};\n\n// Return a string containing one character with the codepoint `i`\nexport function _chr(i)\n{\n\tif (typeof(i) !== \"number\")\n\t\tthrow new TypeError(\"chr() requires an int\");\n\treturn String.fromCharCode(i);\n};\n\n// Return the codepoint for the one and only character in the string `c`\nexport function _ord(c)\n{\n\tif (typeof(c) !== \"string\" || c.length != 1)\n\t\tthrow new TypeError(\"ord() requires a string of length 1\");\n\treturn c.charCodeAt(0);\n};\n\n// Convert an integer to a hexadecimal string\nexport function _hex(number)\n{\n\tif (typeof(number) !== \"number\")\n\t\tthrow new TypeError(\"hex() requires an int\");\n\tif (number < 0)\n\t\treturn \"-0x\" + number.toString(16).substr(1);\n\telse\n\t\treturn \"0x\" + number.toString(16);\n};\n\n// Convert an integer to a octal string\nexport function _oct(number)\n{\n\tif (typeof(number) !== \"number\")\n\t\tthrow new TypeError(\"oct() requires an int\");\n\tif (number < 0)\n\t\treturn \"-0o\" + number.toString(8).substr(1);\n\telse\n\t\treturn \"0o\" + number.toString(8);\n};\n\n// Convert an integer to a binary string\nexport function _bin(number)\n{\n\tif (typeof(number) !== \"number\")\n\t\tthrow new TypeError(\"bin() requires an int\");\n\tif (number < 0)\n\t\treturn \"-0b\" + number.toString(2).substr(1);\n\telse\n\t\treturn \"0b\" + number.toString(2);\n};\n\n// Return the minimum value\nexport function _min(context, defaultValue=Object, key=null, args=[])\n{\n\tif (args.length == 0)\n\t\tthrow new ArgumentError(\"min() requires at least 1 argument, 0 given\");\n\telse if (args.length == 1)\n\t\targs = args[0];\n\tlet iter = _iter(args);\n\tlet result;\n\tlet minvalue;\n\tlet first = true;\n\twhile (true)\n\t{\n\t\tlet item = iter.next();\n\t\tif (item.done)\n\t\t{\n\t\t\tif (first)\n\t\t\t{\n\t\t\t\tif (defaultValue === Object)\n\t\t\t\t\tthrow new ValueError(\"min() argument is an empty sequence!\");\n\t\t\t\treturn defaultValue;\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\t\tlet testvalue = item.value;\n\t\tif (key !== null)\n\t\t\ttestvalue = _call(context, key, [testvalue], {});\n\t\tif (first || (testvalue < minvalue))\n\t\t{\n\t\t\tresult = item.value;\n\t\t\tminvalue = testvalue;\n\t\t}\n\t\tfirst = false;\n\t}\n};\n\n// Return the maximum value\nexport function _max(context, defaultValue=Object, key=null, args=[])\n{\n\tif (args.length == 0)\n\t\tthrow new ArgumentError(\"max() requires at least 1 argument, 0 given\");\n\telse if (args.length == 1)\n\t\targs = args[0];\n\tlet iter = _iter(args);\n\tlet result;\n\tlet minvalue;\n\tlet first = true;\n\twhile (true)\n\t{\n\t\tlet item = iter.next();\n\t\tif (item.done)\n\t\t{\n\t\t\tif (first)\n\t\t\t{\n\t\t\t\tif (defaultValue === Object)\n\t\t\t\t\tthrow new ValueError(\"max() argument is an empty sequence!\");\n\t\t\t\treturn defaultValue;\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\t\tlet testvalue = item.value;\n\t\tif (key !== null)\n\t\t\ttestvalue = _call(context, key, [testvalue], {});\n\t\tif (first || (testvalue > minvalue))\n\t\t{\n\t\t\tresult = item.value;\n\t\t\tminvalue = testvalue;\n\t\t}\n\t\tfirst = false;\n\t}\n};\n\n// Return the of the values from the iterable starting with `start` (default `0`)\nexport function _sum(iterable, start=0)\n{\n\tfor (let iter = _iter(iterable);;)\n\t{\n\t\tlet item = iter.next();\n\t\tif (item.done)\n\t\t\tbreak;\n\t\tstart += item.value;\n\t}\n\treturn start;\n};\n\n// Return the first value produced by iterating through `iterable`\n// (defaulting to `defaultValue` if the iterator is empty)\nexport function _first(iterable, defaultValue=null)\n{\n\tlet item = _iter(iterable).next();\n\treturn item.done ? defaultValue : item.value;\n};\n\n// Return the last value produced by iterating through `iterable`\n// (defaulting to `defaultValue` if the iterator is empty)\nexport function _last(iterable, defaultValue=null)\n{\n\tlet value = defaultValue;\n\n\tfor (let iter = _iter(iterable);;)\n\t{\n\t\tlet item = iter.next();\n\t\tif (item.done)\n\t\t\tbreak;\n\t\tvalue = item.value;\n\t}\n\treturn value;\n};\n\n// Return a sorted version of `iterable`\nexport function _sorted(context, iterable, key=null, reverse=false)\n{\n\tif (key === null)\n\t{\n\t\t// FIXME: stability\n\t\tlet cmp = reverse ? function cmp(a, b)\n\t\t{\n\t\t\treturn -_cmp(\"<=>\", a, b);\n\t\t} : function cmp(a, b)\n\t\t{\n\t\t\treturn _cmp(\"<=>\", a, b);\n\t\t};\n\t\tlet result = _list(iterable);\n\t\tresult.sort(cmp);\n\t\treturn result;\n\t}\n\telse\n\t{\n\t\tlet sort = [];\n\n\t\tfor (let i = 0, iter = _iter(iterable);;++i)\n\t\t{\n\t\t\tlet item = iter.next();\n\t\t\tif (item.done)\n\t\t\t\tbreak;\n\t\t\tlet keyvalue = _call(context, key, [item.value], {});\n\t\t\t// For a stable sorting we have to use the negative index if\n\t\t\t// reverse sorting is specified\n\t\t\tsort.push([keyvalue, reverse ? -i : i, item.value]);\n\t\t}\n\t\tfunction cmp(s1, s2)\n\t\t{\n\t\t\tlet res = _cmp(\"<=>\", s1[0], s2[0]);\n\t\t\tif (res)\n\t\t\t\treturn reverse ? -res : res;\n\t\t\tres = _cmp(\"<=>\", s1[1], s2[1]);\n\t\t\treturn reverse ? -res : res;\n\t\t};\n\n\t\tsort.sort(cmp);\n\n\t\tlet result = [];\n\t\tfor (let item of sort)\n\t\t\tresult.push(item[2]);\n\t\treturn result;\n\t}\n};\n\n// Return a iterable object iterating from `start` up to (but not including)\n// `stop` with a step size of `step`\nexport function _range(start, stop=Object, step=Object)\n{\n\tif (step === Object)\n\t\tstep = 1;\n\tif (stop === Object)\n\t{\n\t\tstop = start;\n\t\tstart = 0;\n\t}\n\tlet lower, higher;\n\tif (step === 0)\n\t\tthrow new ValueError(\"range() requires a step argument != 0\");\n\telse if (step > 0)\n\t{\n\t\tlower = start;\n\t\thigher = stop;\n\t}\n\telse\n\t{\n\t\tlower = stop;\n\t\thigher = start;\n\t}\n\tlet length = (lower < higher) ? Math.floor((higher - lower - 1)/Math.abs(step)) + 1 : 0;\n\n\treturn {\n\t\tindex: 0,\n\t\tnext: function()\n\t\t{\n\t\t\tif (this.index >= length)\n\t\t\t\treturn {done: true};\n\t\t\treturn {value: start + (this.index++) * step, done: false};\n\t\t}\n\t};\n};\n\n// Return a iterable object returning a slice from the argument\nexport function _slice(iterable, start, stop=Object, step=Object)\n{\n\tif (step === Object)\n\t\tstep = 1;\n\tif (stop === Object)\n\t{\n\t\tstop = start;\n\t\tstart = 0;\n\t}\n\tif (start < 0)\n\t\tthrow new ValueError(\"slice() requires a start argument >= 0\");\n\tif (stop < 0)\n\t\tthrow new ValueError(\"slice() requires a stop argument >= 0\");\n\tif (step <= 0)\n\t\tthrow new ValueError(\"slice() requires a step argument > 0\");\n\n\tlet next = start, count = 0;\n\tlet iter = _iter(iterable);\n\treturn {\n\t\tnext: function() {\n\t\t\tlet result;\n\t\t\twhile (count < next)\n\t\t\t{\n\t\t\t\tresult = iter.next();\n\t\t\t\tif (result.done)\n\t\t\t\t\treturn result;\n\t\t\t\t++count;\n\t\t\t}\n\t\t\tif (stop !== null && count >= stop)\n\t\t\t\treturn {done: true};\n\t\t\tresult = iter.next();\n\t\t\tif (result.done)\n\t\t\t\treturn result;\n\t\t\t++count;\n\t\t\tnext += step;\n\t\t\tif (stop !== null && next > stop)\n\t\t\t\tnext = stop;\n\t\t\treturn result;\n\t\t}\n\t};\n};\n\n// `%` escape unsafe characters in the string `string`\nexport function _urlquote(string)\n{\n\treturn encodeURIComponent(string);\n};\n\n// The inverse function of `urlquote`\nexport function _urlunquote(string)\n{\n\treturn decodeURIComponent(string);\n};\n\n// Return a reverse iterator over `sequence`\nexport function _reversed(sequence)\n{\n\tif (typeof(sequence) !== \"string\" && !_islist(sequence)) // We don't have to materialize strings or lists\n\t\tsequence = _list(sequence);\n\treturn {\n\t\tindex: sequence.length-1,\n\t\tnext: function() {\n\t\t\treturn this.index >= 0 ? {value: sequence[this.index--], done: false} : {done: true};\n\t\t}\n\t};\n};\n\n// Returns a random number in the interval `[0;1[`\nexport function _random()\n{\n\treturn Math.random();\n};\n\n// Return a randomly select item from `range(start, stop, step)`\nexport function _randrange(start, stop=Object, step=Object)\n{\n\tif (step === Object)\n\t\tstep = 1;\n\tif (stop === Object)\n\t{\n\t\tstop = start;\n\t\tstart = 0;\n\t}\n\tlet width = stop-start;\n\n\tlet value = Math.random();\n\n\tlet n;\n\tif (step > 0)\n\t\tn = Math.floor((width + step - 1) / step);\n\telse if (step < 0)\n\t\tn = Math.floor((width + step + 1) / step);\n\telse\n\t\tthrow new ValueError(\"randrange() requires a step argument != 0\");\n\treturn start + step*Math.floor(value * n);\n};\n\n// Return a random item/char from the list/string `sequence`\nexport function _randchoice(sequence)\n{\n\tlet iscolor = _iscolor(sequence);\n\tif (typeof(sequence) !== \"string\" && !_islist(sequence) && !iscolor)\n\t\tthrow new TypeError(\"randchoice() requires a string or list\");\n\tif (iscolor)\n\t\tsequence = _list(sequence);\n\treturn sequence[Math.floor(Math.random() * sequence.length)];\n};\n\n// Round a number `x` to `digits` decimal places (may be negative)\nexport function _round(x, digits=0)\n{\n\tif (digits)\n\t{\n\t\tlet threshold = Math.pow(10, digits);\n\t\treturn Math.round(x*threshold)/threshold;\n\t}\n\telse\n\t\treturn Math.round(x);\n};\n\n// Round a number `x` down to `digits` decimal places (may be negative)\nexport function _floor(x, digits=0)\n{\n\tif (digits)\n\t{\n\t\tlet threshold = Math.pow(10, digits);\n\t\treturn Math.floor(x*threshold)/threshold;\n\t}\n\telse\n\t\treturn Math.floor(x);\n};\n\n// Round a number `x` up to `digits` decimal places (may be negative)\nexport function _ceil(x, digits=0)\n{\n\tif (digits)\n\t{\n\t\tlet threshold = Math.pow(10, digits);\n\t\treturn Math.ceil(x*threshold)/threshold;\n\t}\n\telse\n\t\treturn Math.ceil(x);\n};\n\n// Return a hex-encode MD5 hash of the argument\n// This uses the md5 function from https://github.com/blueimp/JavaScript-MD5\nimport md5 from 'blueimp-md5';\n\nexport function _md5(string)\n{\n\treturn md5(string);\n}\n\nexport function _scrypt(string, salt)\n{\n\tthrow new NotImplementedError(\"scrypt() is not implemented\");\n}\n\nexport function _css(value, defaultValue)\n{\n\tif (value.startsWith(\"#\"))\n\t{\n\t\tif (value.length == 4)\n\t\t{\n\t\t\treturn new Color(\n\t\t\t\t17 * parseInt(value[1], 16),\n\t\t\t\t17 * parseInt(value[2], 16),\n\t\t\t\t17 * parseInt(value[3], 16)\n\t\t\t);\n\t\t}\n\t\telse if (value.length == 5)\n\t\t{\n\t\t\treturn new Color(\n\t\t\t\t17 * parseInt(value[1], 16),\n\t\t\t\t17 * parseInt(value[2], 16),\n\t\t\t\t17 * parseInt(value[3], 16),\n\t\t\t\t17 * parseInt(value[4], 16)\n\t\t\t);\n\t\t}\n\t\telse if (value.length == 7)\n\t\t{\n\t\t\treturn new Color(\n\t\t\t\tparseInt(value.substring(1, 3), 16),\n\t\t\t\tparseInt(value.substring(3, 5), 16),\n\t\t\t\tparseInt(value.substring(5, 7), 16)\n\t\t\t);\n\t\t}\n\t\telse if (value.length == 9)\n\t\t{\n\t\t\treturn new Color(\n\t\t\t\tparseInt(value.substring(1, 3), 16),\n\t\t\t\tparseInt(value.substring(3, 5), 16),\n\t\t\t\tparseInt(value.substring(5, 7), 16),\n\t\t\t\tparseInt(value.substring(7, 9), 16)\n\t\t\t);\n\t\t}\n\t}\n\telse if (value.startsWith(\"rgb(\") && value.endsWith(\")\"))\n\t{\n\t\tlet parts = value.slice(4, -1).split(\",\");\n\t\tif (parts.length == 3)\n\t\t{\n\t\t\tfor (let i = 0; i < 3; ++i)\n\t\t\t{\n\t\t\t\tlet part = parts[i];\n\t\t\t\tif (part.endsWith(\"%\"))\n\t\t\t\t\tparts[i] = parseInt(part.slice(0, -1), \"10\")*255/100;\n\t\t\t\telse\n\t\t\t\t\tparts[i] = parseInt(part, \"10\");\n\t\t\t}\n\t\t\treturn new Color(...parts);\n\t\t}\n\t}\n\telse if (value.startsWith(\"rgba(\") && value.endsWith(\")\"))\n\t{\n\t\tlet parts = value.slice(5, -1).split(\",\");\n\t\tif (parts.length == 4)\n\t\t{\n\t\t\tfor (let i = 0; i < 4; ++i)\n\t\t\t{\n\t\t\t\tlet part = parts[i];\n\t\t\t\tif (part.endsWith(\"%\"))\n\t\t\t\t\tparts[i] = parseInt(part.slice(0, -1), \"10\")*255/100;\n\t\t\t\telse if (i == 3)\n\t\t\t\t\tparts[i] = parseFloat(part)*255;\n\t\t\t\telse\n\t\t\t\t\tparts[i] = parseInt(part, \"10\");\n\t\t\t}\n\t\t\treturn new Color(...parts);\n\t\t}\n\t}\n\telse\n\t{\n\t\tlet color = Color.cssColors[value];\n\t\tif (color !== undefined)\n\t\t\treturn color;\n\t}\n\tif (defaultValue === undefined)\n\t\tthrow new ValueError(\"css() can't interpret \" + _repr(value) + \" as a CSS color value\");\n\telse\n\t\treturn defaultValue;\n}\n\nexport function _mix(values)\n{\n\tlet r = 0.0;\n\tlet g = 0.0;\n\tlet b = 0.0;\n\tlet a = 0.0;\n\tlet weight = 1.0;\n\tlet sumweights = 0.0;\n\n\tfor (let value of values)\n\t{\n\t\tif (value instanceof Color)\n\t\t{\n\t\t\tsumweights += weight;\n\t\t\tr += weight * value._r;\n\t\t\tg += weight * value._g;\n\t\t\tb += weight * value._b;\n\t\t\ta += weight * (255-value._a);\n\t\t}\n\t\telse if (typeof(value) === \"number\")\n\t\t{\n\t\t\tweight = value;\n\t\t}\n\t\telse\n\t\t\tthrow new ArgumentError(\"color.mix() arguments msut be numbers or colors, not \" + _type(value).fullname());\n\t}\n\tif (sumweights == 0.0)\n\t\tthrow new ValueError(\"at least one of the arguments must be a color and at least one of the weights must be >0\");\n\n\treturn new Color(r/sumweights, g/sumweights, b/sumweights, 255-a/sumweights);\n}\n\n// Return an iterator over `[index, item]` lists from the iterable object\n// `iterable`. `index` starts at `start` (defaulting to 0).\nexport function _enumerate(iterable, start=0)\n{\n\treturn {\n\t\titer: _iter(iterable),\n\t\tindex: start,\n\t\tnext: function() {\n\t\t\tlet item = this.iter.next();\n\t\t\treturn item.done ? item : {value: [this.index++, item.value], done: false};\n\t\t}\n\t};\n};\n\n// Return an iterator over `[isfirst, item]` lists from the iterable object\n// `iterable` (`isfirst` is true for the first item, false otherwise).\nexport function _isfirst(iterable)\n{\n\tlet iter = _iter(iterable);\n\tlet isfirst = true;\n\treturn {\n\t\tnext: function() {\n\t\t\tlet item = iter.next();\n\t\t\tlet result = item.done ? item : {value: [isfirst, item.value], done: false};\n\t\t\tisfirst = false;\n\t\t\treturn result;\n\t\t}\n\t};\n};\n\n// Return an iterator over `[islast, item]` lists from the iterable object\n// `iterable` (`islast` is true for the last item, false otherwise).\nexport function _islast(iterable)\n{\n\tlet iter = _iter(iterable);\n\tlet lastitem = iter.next();\n\treturn {\n\t\tnext: function() {\n\t\t\tif (lastitem.done)\n\t\t\t\treturn lastitem;\n\t\t\tlet item = iter.next();\n\t\t\tlet result = {value: [item.done, lastitem.value], done: false};\n\t\t\tlastitem = item;\n\t\t\treturn result;\n\t\t}\n\t};\n};\n\n// Return an iterator over `[isfirst, islast, item]` lists from the iterable\n// object `iterable` (`isfirst` is true for the first item, `islast`\n// is true for the last item. Both are false otherwise).\nexport function _isfirstlast(iterable)\n{\n\tlet iter = _iter(iterable);\n\tlet isfirst = true;\n\tlet lastitem = iter.next();\n\treturn {\n\t\tnext: function() {\n\t\t\tif (lastitem.done)\n\t\t\t\treturn lastitem;\n\t\t\tlet item = iter.next();\n\t\t\tlet result = {value: [isfirst, item.done, lastitem.value], done: false};\n\t\t\tlastitem = item;\n\t\t\tisfirst = false;\n\t\t\treturn result;\n\t\t}\n\t};\n};\n\n// Return an iterator over `[index, isfirst, islast, item]` lists from the\n// iterable object `iterable` (`isfirst` is true for the first item,\n// `islast` is true for the last item. Both are false otherwise).\nexport function _enumfl(iterable, start=0)\n{\n\tlet iter = _iter(iterable);\n\tlet i = start;\n\tlet isfirst = true;\n\tlet lastitem = iter.next();\n\treturn {\n\t\tnext: function() {\n\t\t\tif (lastitem.done)\n\t\t\t\treturn lastitem;\n\t\t\tlet item = iter.next();\n\t\t\tlet result = {value: [i++, isfirst, item.done, lastitem.value], done: false};\n\t\t\tlastitem = item;\n\t\t\tisfirst = false;\n\t\t\treturn result;\n\t\t}\n\t};\n};\n\n// Return an iterator over lists, where the i'th list consists of all i'th\n// items from the arguments (terminating when the shortest argument ends).\nexport function _zip(iterables)\n{\n\tlet result;\n\tif (iterables.length)\n\t{\n\t\tlet iters = [];\n\t\tfor (let iterable of iterables)\n\t\t\titers.push(_iter(iterable));\n\n\t\treturn {\n\t\t\tnext: function() {\n\t\t\t\tlet items = [];\n\t\t\t\tfor (let iter of iters)\n\t\t\t\t{\n\t\t\t\t\tlet item = iter.next();\n\t\t\t\t\tif (item.done)\n\t\t\t\t\t\treturn item;\n\t\t\t\t\titems.push(item.value);\n\t\t\t\t}\n\t\t\t\treturn {value: items, done: false};\n\t\t\t}\n\t\t};\n\t}\n\telse\n\t{\n\t\treturn {\n\t\t\tnext: function() {\n\t\t\t\treturn {done: true};\n\t\t\t}\n\t\t};\n\t}\n};\n\n// Return the absolute value for the number `number`.\nexport function _abs(number)\n{\n\tif (number !== null && typeof(number[symbols.abs]) === \"function\")\n\t\treturn number[symbols.abs]();\n\treturn Math.abs(number);\n};\n\n// Return a `Date` object from the arguments passed in.\nexport function _date(year, month, day)\n{\n\treturn datetype[symbols.call](year, month, day);\n};\n\nexport function _datetime(year, month, day, hour=0, minute=0, second=0, microsecond=0)\n{\n\treturn datetimetype[symbols.call](year, month, day, hour, minute, second, microsecond);\n};\n\n// Return a `TimeDelta` object from the arguments passed in.\nexport function _timedelta(days=0, seconds=0, microseconds=0)\n{\n\treturn TimeDelta.type[symbols.call](days, seconds, microseconds);\n};\n\n// Return a `MonthDelta` object from the arguments passed in.\nexport function _monthdelta(months=0)\n{\n\treturn MonthDelta.type[symbols.call](months);\n};\n\n// Return a `Color` object from the hue, luminescence, saturation and\n// alpha values `h`, `l`, `s` and `a` (i.e. using the HLS color model).\nexport function _hls(h, l, s, a)\n{\n\tlet _v = function _v(m1, m2, hue)\n\t{\n\t\thue = hue % 1.0;\n\t\tif (hue < 1/6)\n\t\t\treturn m1 + (m2-m1)*hue*6.0;\n\t\telse if (hue < 0.5)\n\t\t\treturn m2;\n\t\telse if (hue < 2/3)\n\t\t\treturn m1 + (m2-m1)*(2/3-hue)*6.0;\n\t\treturn m1;\n\t};\n\n\tlet m1, m2;\n\tif (a === undefined)\n\t\ta = 1;\n\tif (s === 0.0)\n\t\treturn _rgb(l, l, l, a);\n\tif (l <= 0.5)\n\t\tm2 = l * (1.0+s);\n\telse\n\t\tm2 = l+s-(l*s);\n\tm1 = 2.0*l - m2;\n\treturn _rgb(_v(m1, m2, h+1/3), _v(m1, m2, h), _v(m1, m2, h-1/3), a);\n};\n\n// Return a `Color` object from the hue, saturation, value and alpha values\n// `h`, `s`, `v` and `a` (i.e. using the HSV color model).\nexport function _hsv(h, s, v, a)\n{\n\tif (s === 0.0)\n\t\treturn _rgb(v, v, v, a);\n\tlet i = Math.floor(h*6.0);\n\tlet f = (h*6.0) - i;\n\tlet p = v*(1.0 - s);\n\tlet q = v*(1.0 - s*f);\n\tlet t = v*(1.0 - s*(1.0-f));\n\tswitch (i%6)\n\t{\n\t\tcase 0:\n\t\t\treturn _rgb(v, t, p, a);\n\t\tcase 1:\n\t\t\treturn _rgb(q, v, p, a);\n\t\tcase 2:\n\t\t\treturn _rgb(p, v, t, a);\n\t\tcase 3:\n\t\t\treturn _rgb(p, q, v, a);\n\t\tcase 4:\n\t\t\treturn _rgb(t, p, v, a);\n\t\tcase 5:\n\t\t\treturn _rgb(v, p, q, a);\n\t}\n};\n\n// Return the item with the key `key` from the dict `container`.\n// If `container` doesn't have this key, return `defaultvalue`.\nexport function _get(container, key, defaultvalue)\n{\n\tif (_ismap(container))\n\t{\n\t\tif (container.has(key))\n\t\t\treturn container.get(key);\n\t\treturn defaultvalue;\n\t}\n\telse if (_isobject(container))\n\t{\n\t\tlet result = container[key];\n\t\tif (result === undefined)\n\t\t\treturn defaultvalue;\n\t\treturn result;\n\t}\n\tthrow new TypeError(\"get() requires a dict\");\n};\n\n// Return a `Date` object for the current time.\nexport function now()\n{\n\treturn new Date();\n};\n\n// Return a `Date` object for the current time in UTC.\nexport function utcnow()\n{\n\tlet now = new Date();\n\t// FIXME: The timezone is wrong for the new `Date` object.\n\treturn new Date(now.getUTCFullYear(), now.getUTCMonth(), now.getUTCDate(), now.getUTCHours(), now.getUTCMinutes(), now.getUTCSeconds(), now.getUTCMilliseconds());\n};\n\n// Return an `Date` object for today.\nexport function today()\n{\n\tlet now = new Date();\n\treturn new Date_(now.getFullYear(), now.getMonth()+1, now.getDate());\n};\n\nexport class Module\n{\n\tconstructor(name, doc, content={})\n\t{\n\t\tthis.__name__ = name;\n\t\tthis.__doc__ = doc;\n\t\tfor (let [key, value] of Object.entries(content))\n\t\t\tthis[key] = value;\n\t}\n\n\t[symbols.getattr](attrname)\n\t{\n\t\tif (this.hasOwnProperty(attrname))\n\t\t\treturn this[attrname];\n\t\tthrow new ul4.AttributeError(this, attrname);\n\t}\n};\n\nfunction _ul4on_loads(dump)\n{\n\treturn loads(dump);\n};\n\nexpose(_ul4on_loads, [\"dump\", \"p\"], {name: \"loads\"});\n\nfunction _ul4on_dumps(obj, indent=null)\n{\n\treturn dumps(obj, indent);\n};\n\nexpose(_ul4on_dumps, [\"obj\", \"p\", \"indent\", \"pk=\", null], {name: \"dumps\"});\n\nfunction isclose(a, b, rel_tol=1e-9, abs_tol=0.0)\n{\n\tif (a === b)\n\t\treturn true;\n\n\tif (a === Infinity || a === -Infinity || b === Infinity || b === -Infinity)\n\t\treturn false;\n\n\tlet diff = Math.abs(b - a);\n\n\tif (diff <= Math.abs(rel_tol * a))\n\t\treturn true;\n\tif (diff <= Math.abs(rel_tol * b))\n\t\treturn true;\n\tif (diff <= abs_tol)\n\t\treturn true;\n\treturn false;\n}\n\nexpose(Math.cos, [\"x\", \"p\"]);\nexpose(Math.sin, [\"x\", \"p\"]);\nexpose(Math.tan, [\"x\", \"p\"]);\nexpose(Math.sqrt, [\"x\", \"p\"]);\nexpose(isclose, [\"a\", \"pk\", \"b\", \"pk\", \"rel_tol\", \"k=\", 1e-9, \"abs_tol\", \"k=\", 0.0]);\n\n\nexport class AttrGetterType extends Type\n{\n\t[symbols.call](attrs)\n\t{\n\t\treturn new AttrGetter(attrs);\n\t}\n\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof AttrGetter;\n\t}\n};\n\nexpose(AttrGetterType.prototype, [\"attrs\", \"*\"], {name: \"attrgetter\"});\n\nlet attrgettertype = new AttrGetterType(\"operator\", \"attrgetter\", \"A callable object that fetches the given attribute(s) from its operand.\");\n\nexport class AttrGetter\n{\n\t// Create a new AttrGetter object\n\tconstructor(attrs)\n\t{\n\t\tthis.attrs = attrs;\n\t}\n\n\t[symbols.type]()\n\t{\n\t\treturn attrgettertype;\n\t}\n\n\t_getone(obj, attrnames)\n\t{\n\t\tfor (let attrname of attrnames.split(\".\"))\n\t\t{\n\t\t\tlet type = _type(obj);\n\t\t\tobj = type.getattr(obj, attrname);\n\t\t}\n\t\treturn obj;\n\t}\n\n\t[symbols.call](obj)\n\t{\n\t\tif (this.attrs.length === 1)\n\t\t\treturn this._getone(obj, this.attrs[0])\n\t\telse\n\t\t{\n\t\t\tlet result = [];\n\t\t\tfor (let attrnames of this.attrs)\n\t\t\t\tresult.push(this._getone(obj, attrnames));\n\t\t\treturn result;\n\t\t}\n\t}\n};\n\nexpose(AttrGetter.prototype, [\"obj\", \"p\"], {name: \"attrgetter\"});\n\n\nexport function _attrgetter(attrnames)\n{\n\tfunction getone(obj, dottedname)\n\t{\n\t\tlet result = obj;\n\t\tfor (let name of dottedname.split(\".\"))\n\t\t\tresult = AttrAST.prototype._get(result, name);\n\t\treturn result;\n\t}\n\n\tfunction get(obj)\n\t{\n\t\tif (attrnames.length === 1)\n\t\t\treturn getone(obj, attrnames[0]);\n\t\telse\n\t\t{\n\t\t\tlet result = [];\n\t\t\tfor (let dottedattrname of attrnames)\n\t\t\t\tresult.push(getone(obj, dottedattrname));\n\t\t\treturn result;\n\t\t}\n\t}\n\texpose(get, [\"obj\", \"p\"]);\n\treturn get;\n}\n\nexpose(_attrgetter, [\"attrs\", \"*\"]);\n\nexpose(_repr, [\"obj\", \"p\"], {name: \"repr\"});\nexpose(_ascii, [\"obj\", \"p\"], {name: \"ascii\"});\nexpose(_len, [\"sequence\", \"p\"], {name: \"len\"});\nexpose(_type, [\"obj\", \"p\"], {name: \"type\"});\nexpose(_format, [\"obj\", \"pk\", \"fmt\", \"pk\", \"lang\", \"pk=\", null], {name: \"format\"});\nexpose(_any, [\"iterable\", \"p\"], {name: \"any\"});\nexpose(_all, [\"iterable\", \"p\"], {name: \"all\"});\nexpose(_zip, [\"iterables\", \"*\"], {name: \"zip\"});\nexpose(_getattr, [\"obj\", \"p\", \"attrname\", \"p\", \"default\", \"p=\", null], {name: \"getattr\"});\nexpose(_hasattr, [\"obj\", \"p\", \"attrname\", \"p\"], {name: \"hasattr\"});\nexpose(_dir, [\"obj\", \"p\"], {name: \"dir\"});\nexpose(_isundefined, [\"obj\", \"p\"], {name: \"isundefined\"});\nexpose(_isdefined, [\"obj\", \"p\"], {name: \"isdefined\"});\nexpose(_isnone, [\"obj\", \"p\"], {name: \"isnone\"});\nexpose(_isbool, [\"obj\", \"p\"], {name: \"isbool\"});\nexpose(_isint, [\"obj\", \"p\"], {name: \"isint\"});\nexpose(_isfloat, [\"obj\", \"p\"], {name: \"isfloat\"});\nexpose(_isstr, [\"obj\", \"p\"], {name: \"isstr\"});\nexpose(_isdate, [\"obj\", \"p\"], {name: \"isdate\"});\nexpose(_isdatetime, [\"obj\", \"p\"], {name: \"isdatetime\"});\nexpose(_iscolor, [\"obj\", \"p\"], {name: \"iscolor\"});\nexpose(_istimedelta, [\"obj\", \"p\"], {name: \"istimedelta\"});\nexpose(_ismonthdelta, [\"obj\", \"p\"], {name: \"ismonthdelta\"});\nexpose(_istemplate, [\"obj\", \"p\"], {name: \"istemplate\"});\nexpose(_isfunction, [\"obj\", \"p\"], {name: \"isfunction\"});\nexpose(_islist, [\"obj\", \"p\"], {name: \"islist\"});\nexpose(_isset, [\"obj\", \"p\"], {name: \"isset\"});\nexpose(_isdict, [\"obj\", \"p\"], {name: \"isdict\"});\nexpose(_isexception, [\"obj\", \"p\"], {name: \"isexception\"});\nexpose(_isinstance, [\"obj\", \"p\", \"type\", \"p\"], {name: \"isinstance\"});\nexpose(_asjson, [\"obj\", \"p\"], {name: \"asjson\"});\nexpose(_fromjson, [\"string\", \"p\"], {name: \"fromjson\"});\nexpose(_asul4on, [\"obj\", \"p\", \"indent\", \"pk=\",null], {name: \"asul4on\"});\nexpose(_fromul4on, [\"dump\", \"p\"], {name: \"fromul4on\"});\nexpose(now, []);\nexpose(utcnow, []);\nexpose(today, []);\nexpose(_enumerate, [\"iterable\", \"pk\", \"start\", \"pk=\", 0], {name: \"enumerate\"});\nexpose(_isfirst, [\"iterable\", \"p\"], {name: \"isfirst\"});\nexpose(_islast, [\"iterable\", \"p\"], {name: \"islast\"});\nexpose(_isfirstlast, [\"iterable\", \"p\"], {name: \"isfirstlast\"});\nexpose(_enumfl, [\"iterable\", \"p\", \"start\", \"pk=\", 0], {name: \"enumfl\"});\nexpose(_abs, [\"number\", \"p\"], {name: \"abs\"});\nexpose(_rgb, [\"r\", \"pk\", \"g\", \"pk\", \"b\", \"pk\", \"a\", \"pk=\", 1.0], {name: \"rgb\"});\nexpose(_hls, [\"h\", \"pk\", \"l\", \"pk\", \"s\", \"pk\", \"a\", \"pk=\", 1.0], {name: \"hls\"});\nexpose(_hsv, [\"h\", \"pk\", \"s\", \"pk\", \"v\", \"pk\", \"a\", \"pk=\", 1.0], {name: \"hsv\"});\nexpose(_xmlescape, [\"obj\", \"p\"], {name: \"xmlescape\"});\nexpose(_csv, [\"obj\", \"p\"], {name: \"csv\"});\nexpose(_chr, [\"i\", \"p\"], {name: \"chr\"});\nexpose(_ord, [\"c\", \"p\"], {name: \"ord\"});\nexpose(_hex, [\"number\", \"p\"], {name: \"hex\"});\nexpose(_oct, [\"number\", \"p\"], {name: \"oct\"});\nexpose(_bin, [\"number\", \"p\"], {name: \"bin\"});\nexpose(_min, [\"default\", \"k=\", Object, \"key\", \"k=\", null, \"args\", \"*\"], {name: \"min\", needscontext: true});\nexpose(_max, [\"default\", \"k=\", Object, \"key\", \"k=\", null, \"args\", \"*\"], {name: \"max\", needscontext: true});\nexpose(_sum, [\"iterable\", \"p\", \"start\", \"pk=\", 0], {name: \"sum\"});\nexpose(_first, [\"iterable\", \"p\", \"default\", \"pk=\", null], {name: \"first\"});\nexpose(_last, [\"iterable\", \"p\", \"default\", \"pk=\", null], {name: \"last\"});\nexpose(_sorted, [\"iterable\", \"p\", \"key\", \"pk=\", null, \"reverse\", \"pk=\", false], {name: \"sorted\", needscontext: true});\nexpose(_range, [\"start\", \"p\", \"stop\", \"p=\", Object, \"step\", \"p=\", Object], {name: \"range\"});\nexpose(_slice, [\"iterable\", \"p\", \"start\", \"p\", \"stop\", \"p=\", Object, \"step\", \"p=\", Object], {name: \"slice\"});\nexpose(_urlquote, [\"string\", \"pk\"], {name: \"urlquote\"});\nexpose(_urlunquote, [\"string\", \"pk\"], {name: \"urlunquote\"});\nexpose(_reversed, [\"sequence\", \"p\"], {name: \"reversed\"});\nexpose(_random, [], {name: \"random\"});\nexpose(_randrange, [\"start\", \"p\", \"stop\", \"p=\", Object, \"step\", \"p=\", Object], {name: \"randrange\"});\nexpose(_randchoice, [\"seq\", \"pk\"], {name: \"randchoice\"});\nexpose(_round, [\"x\", \"p\", \"digits\", \"pk=\", 0], {name: \"round\"});\nexpose(_floor, [\"x\", \"p\", \"digits\", \"pk=\", 0], {name: \"floor\"});\nexpose(_ceil, [\"x\", \"p\", \"digits\", \"pk=\", 0], {name: \"ceil\"});\nexpose(_md5, [\"string\", \"p\"], {name: \"md5\"});\nexpose(_scrypt, [\"string\", \"p\", \"salt\", \"pk\"], {name: \"scrypt\"});\nexpose(_css, [\"value\", \"p\", \"default\", \"p=\", undefined], {name: \"css\"});\nexpose(_mix, [\"values\", \"*\"], {name: \"mix\"});\n\n// Functions implementing UL4 methods\nexport function _count(obj, sub, start=null, end=null)\n{\n\tif (start < 0)\n\t\tstart += obj.length;\n\tif (start === null)\n\t\tstart = 0;\n\n\tif (end < 0)\n\t\tend += obj.length;\n\tif (end === null)\n\t\tend = obj.length;\n\n\tlet isstr = _isstr(obj);\n\n\tif (isstr && !sub.length)\n\t{\n\t\tif (end < 0 || start > obj.length || start > end)\n\t\t\treturn 0;\n\t\tlet result = end - start + 1;\n\t\tif (result > obj.length + 1)\n\t\t\tresult = obj.length + 1;\n\t\treturn result;\n\t}\n\n\tstart = _bound(start, obj.length);\n\tend = _bound(end, obj.length);\n\n\tlet count = 0;\n\tif (_islist(obj))\n\t{\n\t\tfor (let i = start; i < end; ++i)\n\t\t{\n\t\t\tif (_eq(obj[i], sub))\n\t\t\t\t++count;\n\t\t}\n\t\treturn count;\n\t}\n\telse // string\n\t{\n\t\tlet lastIndex = start;\n\n\t\tfor (;;)\n\t\t{\n\t\t\tlastIndex = obj.indexOf(sub, lastIndex);\n\t\t\tif (lastIndex == -1)\n\t\t\t\tbreak;\n\t\t\tif (lastIndex + sub.length > end)\n\t\t\t\tbreak;\n\t\t\t++count;\n\t\t\tlastIndex += sub.length;\n\t\t}\n\t\treturn count;\n\t}\n};\n\nexport function _find(obj, sub, start=null, end=null)\n{\n\tif (start < 0)\n\t\tstart += obj.length;\n\tif (start === null)\n\t\tstart = 0;\n\tif (end < 0)\n\t\tend += obj.length;\n\tif (end === null)\n\t\tend = obj.length;\n\tstart = _bound(start, obj.length);\n\tend = _bound(end, obj.length);\n\n\tif (start !== 0 || end !== obj.length)\n\t{\n\t\tif (typeof(obj) === \"string\")\n\t\t\tobj = obj.substring(start, end);\n\t\telse\n\t\t\tobj = obj.slice(start, end);\n\t}\n\tlet result = obj.indexOf(sub);\n\tif (result !== -1)\n\t\tresult += start;\n\treturn result;\n};\n\nexport function _rfind(obj, sub, start=null, end=null)\n{\n\tif (start < 0)\n\t\tstart += obj.length;\n\tif (start === null)\n\t\tstart = 0;\n\tif (end < 0)\n\t\tend += obj.length;\n\tif (end === null)\n\t\tend = obj.length;\n\tstart = _bound(start, obj.length);\n\tend = _bound(end, obj.length);\n\n\tif (start !== 0 || end !== obj.length)\n\t{\n\t\tif (typeof(obj) === \"string\")\n\t\t\tobj = obj.substring(start, end);\n\t\telse\n\t\t\tobj = obj.slice(start, end);\n\t}\n\tlet result = obj.lastIndexOf(sub);\n\tif (result !== -1)\n\t\tresult += start;\n\treturn result;\n};\n\nexport function _week4format(obj, firstweekday=null)\n{\n\tif (firstweekday === null)\n\t\tfirstweekday = 0;\n\telse\n\t\tfirstweekday %= 7;\n\n\tlet yearday = datetimetype.yearday(obj)+6;\n\tlet jan1 = new Date(obj.getFullYear(), 0, 1);\n\tlet jan1weekday = jan1.getDay();\n\tif (--jan1weekday < 0)\n\t\tjan1weekday = 6;\n\n\twhile (jan1weekday != firstweekday)\n\t{\n\t\t--yearday;\n\t\tif (++jan1weekday == 7)\n\t\t\tjan1weekday = 0;\n\t}\n\treturn Math.floor(yearday/7);\n};\n\nexport function _isleap(obj)\n{\n\treturn new Date(obj.getFullYear(), 1, 29).getMonth() === 1;\n};\n\nexport class ColorType extends Type\n{\n\t[symbols.call](r=0, g=0, b=0, a=255)\n\t{\n\t\treturn new Color(r, g, b, a);\n\t}\n\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof Color;\n\t}\n};\n\nexpose(ColorType.prototype, [\"r\", \"pk=\", 0, \"g\", \"pk=\", 0, \"b\", \"pk=\", 0, \"a\", \"pk=\", 255], {name: \"color\"});\n\nColorType.prototype.attrs = new Set([\n\t\"a\",\n\t\"abslight\",\n\t\"abslum\",\n\t\"b\",\n\t\"combine\",\n\t\"g\",\n\t\"hls\",\n\t\"hlsa\",\n\t\"hsv\",\n\t\"hsva\",\n\t\"hue\",\n\t\"invert\",\n\t\"light\",\n\t\"lum\",\n\t\"r\",\n\t\"rellight\",\n\t\"rellum\",\n\t\"sat\",\n\t\"witha\",\n\t\"withhue\",\n\t\"withlight\",\n\t\"withlum\",\n\t\"withsat\"\n]);\n\nlet colortype = new ColorType(\"color\", \"Color\", \"An RGBA color (with 8-bit red, green, blue and alpha values).\");\n\nexport class Color extends Proto\n{\n\tconstructor(r=0, g=0, b=0, a=255)\n\t{\n\t\tsuper();\n\t\tthis._r = _bound(_round(r), 255);\n\t\tthis._g = _bound(_round(g), 255);\n\t\tthis._b = _bound(_round(b), 255);\n\t\tthis._a = _bound(_round(a), 255);\n\t}\n\n\t[symbols.type]()\n\t{\n\t\treturn colortype;\n\t}\n\n\t[symbols.repr]()\n\t{\n\t\tlet r = _lpad(this._r.toString(16), \"0\", 2);\n\t\tlet g = _lpad(this._g.toString(16), \"0\", 2);\n\t\tlet b = _lpad(this._b.toString(16), \"0\", 2);\n\t\tlet a = _lpad(this._a.toString(16), \"0\", 2);\n\t\tif (this._a !== 0xff)\n\t\t{\n\t\t\tif (r[0] === r[1] && g[0] === g[1] && b[0] === b[1] && a[0] === a[1])\n\t\t\t\treturn \"#\" + r[0] + g[0] + b[0] + a[0];\n\t\t\telse\n\t\t\t\treturn \"#\" + r + g + b + a;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (r[0] === r[1] && g[0] === g[1] && b[0] === b[1])\n\t\t\t\treturn \"#\" + r[0] + g[0] + b[0];\n\t\t\telse\n\t\t\t\treturn \"#\" + r + g + b;\n\t\t}\n\t}\n\n\t[symbols.str]()\n\t{\n\t\tif (this._a !== 0xff)\n\t\t{\n\t\t\treturn \"rgba(\" + this._r + \", \" + this._g + \", \" + this._b + \", \" + (this._a/255) + \")\";\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlet r = _lpad(this._r.toString(16), \"0\", 2);\n\t\t\tlet g = _lpad(this._g.toString(16), \"0\", 2);\n\t\t\tlet b = _lpad(this._b.toString(16), \"0\", 2);\n\t\t\tif (r[0] === r[1] && g[0] === g[1] && b[0] === b[1])\n\t\t\t\treturn \"#\" + r[0] + g[0] + b[0];\n\t\t\telse\n\t\t\t\treturn \"#\" + r + g + b;\n\t\t}\n\t}\n\n\t[Symbol.iterator]()\n\t{\n\t\treturn {\n\t\t\tobj: this,\n\t\t\tindex: 0,\n\t\t\tnext: function() {\n\t\t\t\tif (this.index == 0)\n\t\t\t\t{\n\t\t\t\t\t++this.index;\n\t\t\t\t\treturn {value: this.obj._r, done: false};\n\t\t\t\t}\n\t\t\t\telse if (this.index == 1)\n\t\t\t\t{\n\t\t\t\t\t++this.index;\n\t\t\t\t\treturn {value: this.obj._g, done: false};\n\t\t\t\t}\n\t\t\t\telse if (this.index == 2)\n\t\t\t\t{\n\t\t\t\t\t++this.index;\n\t\t\t\t\treturn {value: this.obj._b, done: false};\n\t\t\t\t}\n\t\t\t\telse if (this.index == 3)\n\t\t\t\t{\n\t\t\t\t\t++this.index;\n\t\t\t\t\treturn {value: this.obj._a, done: false};\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\treturn {done: true};\n\t\t\t}\n\t\t};\n\t}\n\n\t[symbols.getattr](attrname)\n\t{\n\t\tlet self = this;\n\t\tswitch (attrname)\n\t\t{\n\t\t\tcase \"r\":\n\t\t\t\tlet r = function r(){ return self._r; };\n\t\t\t\texpose(r, []);\n\t\t\t\treturn r;\n\t\t\tcase \"g\":\n\t\t\t\tlet g = function g(){ return self._g; };\n\t\t\t\texpose(g, []);\n\t\t\t\treturn g;\n\t\t\tcase \"b\":\n\t\t\t\tlet b = function b(){ return self._b; };\n\t\t\t\texpose(b, []);\n\t\t\t\treturn b;\n\t\t\tcase \"a\":\n\t\t\t\tlet a = function a(){ return self._a; };\n\t\t\t\texpose(a, []);\n\t\t\t\treturn a;\n\t\t\tcase \"hue\":\n\t\t\t\treturn expose(this.hue.bind(this), []);\n\t\t\tcase \"light\":\n\t\t\t\treturn expose(this.light.bind(this), []);\n\t\t\tcase \"sat\":\n\t\t\t\treturn expose(this.sat.bind(this), []);\n\t\t\tcase \"lum\":\n\t\t\t\treturn expose(this.lum.bind(this), []);\n\t\t\tcase \"hls\":\n\t\t\t\treturn expose(this.hls.bind(this), []);\n\t\t\tcase \"hlsa\":\n\t\t\t\treturn expose(this.hlsa.bind(this), []);\n\t\t\tcase \"hsv\":\n\t\t\t\treturn expose(this.hsv.bind(this), []);\n\t\t\tcase \"hsva\":\n\t\t\t\treturn expose(this.hsva.bind(this), []);\n\t\t\tcase \"withhue\":\n\t\t\t\treturn expose(this.withhue.bind(this), [\"hue\", \"pk\"]);\n\t\t\tcase \"witha\":\n\t\t\t\treturn expose(this.witha.bind(this), [\"a\", \"pk\"]);\n\t\t\tcase \"withlight\":\n\t\t\t\treturn expose(this.withlight.bind(this), [\"light\", \"pk\"]);\n\t\t\tcase \"abslight\":\n\t\t\t\treturn expose(this.abslight.bind(this), [\"f\", \"pk\"]);\n\t\t\tcase \"rellight\":\n\t\t\t\treturn expose(this.rellight.bind(this), [\"f\", \"pk\"]);\n\t\t\tcase \"withsat\":\n\t\t\t\treturn expose(this.withsat.bind(this), [\"sat\", \"pk\"]);\n\t\t\tcase \"withlum\":\n\t\t\t\treturn expose(this.withlum.bind(this), [\"lum\", \"pk\"]);\n\t\t\tcase \"abslum\":\n\t\t\t\treturn expose(this.abslum.bind(this), [\"f\", \"pk\"]);\n\t\t\tcase \"rellum\":\n\t\t\t\treturn expose(this.rellum.bind(this), [\"f\", \"pk\"]);\n\t\t\tcase \"invert\":\n\t\t\t\treturn expose(this.invert.bind(this), [\"f\", \"pk=\", 1.0]);\n\t\t\tcase \"combine\":\n\t\t\t\treturn expose(this.combine.bind(this), [\"r\", \"pk=\", null, \"g\", \"pk=\", null, \"b\", \"pk=\", null, \"a\", \"pk=\", null]);\n\t\t\tdefault:\n\t\t\t\tthrow new AttributeError(this, attrname);\n\t\t}\n\t}\n\n\t[symbols.getitem](key)\n\t{\n\t\tlet orgkey = key;\n\t\tif (key < 0)\n\t\t\tkey += 4;\n\t\tswitch (key)\n\t\t{\n\t\t\tcase 0:\n\t\t\t\treturn this._r;\n\t\t\tcase 1:\n\t\t\t\treturn this._g;\n\t\t\tcase 2:\n\t\t\t\treturn this._b;\n\t\t\tcase 3:\n\t\t\t\treturn this._a;\n\t\t\tdefault:\n\t\t\t\tthrow new IndexError(this, orgkey);\n\t\t}\n\t}\n\n\t[symbols.eq](other)\n\t{\n\t\tif (other instanceof Color)\n\t\t\treturn this._r == other._r && this._g == other._g && this._b == other._b && this._a == other._a;\n\t\treturn false;\n\t}\n\n\tr()\n\t{\n\t\t\treturn this._r;\n\t}\n\n\tg()\n\t{\n\t\treturn this._g;\n\t}\n\n\tb()\n\t{\n\t\treturn this._b;\n\t}\n\n\ta()\n\t{\n\t\treturn this._a;\n\t}\n\n\thue()\n\t{\n\t\treturn this.hls()[0];\n\t}\n\n\tlight()\n\t{\n\t\treturn this.hls()[1];\n\t}\n\n\tsat()\n\t{\n\t\treturn this.hls()[2];\n\t}\n\n\tlum()\n\t{\n\t\treturn (0.2126 * this._r + 0.7152 * this._g + 0.0722 * this._b)/255;\n\t}\n\n\thls()\n\t{\n\t\tlet r = this._r/255.0;\n\t\tlet g = this._g/255.0;\n\t\tlet b = this._b/255.0;\n\t\tlet maxc = Math.max(r, g, b);\n\t\tlet minc = Math.min(r, g, b);\n\t\tlet h, l, s;\n\t\tlet rc, gc, bc;\n\n\t\tl = (minc+maxc)/2.0;\n\t\tif (minc == maxc)\n\t\t\treturn [0.0, l, 0.0];\n\t\tif (l <= 0.5)\n\t\t\ts = (maxc-minc) / (maxc+minc);\n\t\telse\n\t\t\ts = (maxc-minc) / (2.0-maxc-minc);\n\t\trc = (maxc-r) / (maxc-minc);\n\t\tgc = (maxc-g) / (maxc-minc);\n\t\tbc = (maxc-b) / (maxc-minc);\n\t\tif (r == maxc)\n\t\t\th = bc-gc;\n\t\telse if (g == maxc)\n\t\t\th = 2.0+rc-bc;\n\t\telse\n\t\t\th = 4.0+gc-rc;\n\t\th = (h/6.0) % 1.0;\n\t\treturn [h, l, s];\n\t}\n\n\thlsa()\n\t{\n\t\tlet hls = this.hls();\n\t\treturn hls.concat(this._a/255.0);\n\t}\n\n\thsv()\n\t{\n\t\tlet r = this._r/255.0;\n\t\tlet g = this._g/255.0;\n\t\tlet b = this._b/255.0;\n\t\tlet maxc = Math.max(r, g, b);\n\t\tlet minc = Math.min(r, g, b);\n\t\tlet v = maxc;\n\t\tif (minc == maxc)\n\t\t\treturn [0.0, 0.0, v];\n\t\tlet s = (maxc-minc) / maxc;\n\t\tlet rc = (maxc-r) / (maxc-minc);\n\t\tlet gc = (maxc-g) / (maxc-minc);\n\t\tlet bc = (maxc-b) / (maxc-minc);\n\t\tlet h;\n\t\tif (r == maxc)\n\t\t\th = bc-gc;\n\t\telse if (g == maxc)\n\t\t\th = 2.0+rc-bc;\n\t\telse\n\t\t\th = 4.0+gc-rc;\n\t\th = (h/6.0) % 1.0;\n\t\treturn [h, s, v];\n\t}\n\n\thsva()\n\t{\n\t\tlet hsv = this.hsv();\n\t\treturn hsv.concat(this._a/255.0);\n\t}\n\n\twithhue(hue)\n\t{\n\t\tif (typeof(hue) !== \"number\")\n\t\t\tthrow new TypeError(\"withhue() requires a number\");\n\t\tlet hlsa = this.hlsa();\n\t\treturn _hls(hue, hlsa[1], hlsa[2], hlsa[3]);\n\t}\n\n\twitha(a)\n\t{\n\t\tif (typeof(a) !== \"number\")\n\t\t\tthrow new TypeError(\"witha() requires a number\");\n\t\treturn new Color(this._r, this._g, this._b, a);\n\t}\n\n\t_interpolate(lower, upper, factor)\n\t{\n\t\treturn factor*upper + (1-factor) * lower\n\t}\n\n\twithlight(light)\n\t{\n\t\tif (typeof(light) !== \"number\")\n\t\t\tthrow new TypeError(\"withlight() requires a number\");\n\t\tlet hlsa = this.hlsa();\n\t\treturn _hls(hlsa[0], light, hlsa[2], hlsa[3]);\n\t}\n\n\tabslight(f)\n\t{\n\t\tif (typeof(f) !== \"number\")\n\t\t\tthrow new TypeError(\"abslight() requires a number\");\n\t\tlet hlsa = this.hlsa();\n\t\treturn _hls(hlsa[0], hlsa[1] + f, hlsa[2], hlsa[3]);\n\t}\n\n\trellight(f)\n\t{\n\t\tif (typeof(f) !== \"number\")\n\t\t\tthrow new TypeError(\"rellum() requires a number\");\n\t\tlet hlsa = this.hlsa();\n\t\tlet light = hlsa[1];\n\t\tif (f > 0)\n\t\t\tlight += (1-light)*f;\n\t\telse if (f < 0)\n\t\t\tlight += light*f;\n\t\treturn _hls(hlsa[0], light, hlsa[2], hlsa[3]);\n\t}\n\n\twithsat(sat)\n\t{\n\t\tif (typeof(sat) !== \"number\")\n\t\t\tthrow new TypeError(\"withsat() requires a number\");\n\t\tlet hlsa = this.hlsa();\n\t\treturn _hls(hlsa[0], hlsa[1], sat, hlsa[3]);\n\t}\n\n\twithlum(lum)\n\t{\n\t\tif (typeof(lum) !== \"number\")\n\t\t\tthrow new TypeError(\"withlum() requires a number\");\n\n\t\tlet lum_old = this.lum();\n\t\tif (lum_old == 0.0 || lum_old == 1.0)\n\t\t{\n\t\t\tlet v = lum*255;\n\t\t\treturn new Color(v, v, v, this._a);\n\t\t}\n\t\telse if (lum > lum_old)\n\t\t{\n\t\t\tlet f = (lum-lum_old)/(1-lum_old);\n\t\t\treturn new Color(\n\t\t\t\tthis._interpolate(this._r, 255, f),\n\t\t\t\tthis._interpolate(this._g, 255, f),\n\t\t\t\tthis._interpolate(this._b, 255, f),\n\t\t\t\tthis._a,\n\t\t\t);\n\t\t}\n\t\telse if (lum < lum_old)\n\t\t{\n\t\t\tlet f = lum/lum_old;\n\t\t\treturn new Color(\n\t\t\t\tthis._interpolate(0, this._r, f),\n\t\t\t\tthis._interpolate(0, this._g, f),\n\t\t\t\tthis._interpolate(0, this._b, f),\n\t\t\t\tthis._a,\n\t\t\t)\n\t\t}\n\t\telse\n\t\t\treturn this;\n\t}\n\n\tabslum(f)\n\t{\n\t\tif (typeof(f) !== \"number\")\n\t\t\tthrow new TypeError(\"abslum() requires a number\");\n\t\treturn this.withlum(this.lum() + f);\n\t}\n\n\trellum(f)\n\t{\n\t\tif (typeof(f) !== \"number\")\n\t\t\tthrow new TypeError(\"rellum() requires a number\");\n\t\tlet lum = this.lum();\n\t\tif (f > 0)\n\t\t\tlum += (1-lum)*f;\n\t\telse if (f < 0)\n\t\t\tlum += lum*f;\n\t\treturn this.withlum(lum);\n\t}\n\n\tinvert(f=1.0)\n\t{\n\t\tif (typeof(f) !== \"number\")\n\t\t\tthrow new TypeError(\"invert() requires a number\");\n\t\tlet invf = 1 - f;\n\t\treturn new Color(\n\t\t\tinvf * this._r + f * (255 - this._r),\n\t\t\tinvf * this._g + f * (255 - this._g),\n\t\t\tinvf * this._b + f * (255 - this._b),\n\t\t\tthis._a\n\t\t);\n\t}\n\n\tcombine(r=null, g=null, b=null, a=null)\n\t{\n\t\treturn new Color(\n\t\t\tr != null ? r : this._r,\n\t\t\tg != null ? g : this._g,\n\t\t\tb != null ? b : this._b,\n\t\t\ta != null ? a : this._a\n\t\t);\n\t}\n\n\tul4type()\n\t{\n\t\treturn \"color\";\n\t}\n\n\tstatic maroon = new Color(0x80, 0x00, 0x00);\n\tstatic red = new Color(0xff, 0x00, 0x00);\n\tstatic orange = new Color(0xff, 0xa5, 0x00);\n\tstatic yellow = new Color(0xff, 0xff, 0x00);\n\tstatic olive = new Color(0x80, 0x80, 0x00);\n\tstatic purple = new Color(0x80, 0x00, 0x80);\n\tstatic fuchsia = new Color(0xff, 0x00, 0xff);\n\tstatic white = new Color(0xff, 0xff, 0xff);\n\tstatic lime = new Color(0x00, 0xff, 0x00);\n\tstatic green = new Color(0x00, 0x80, 0x00);\n\tstatic navy = new Color(0x00, 0x00, 0x80);\n\tstatic blue = new Color(0x00, 0x00, 0xff);\n\tstatic aqua = new Color(0x00, 0xff, 0xff);\n\tstatic teal = new Color(0x00, 0x80, 0x80);\n\tstatic black = new Color(0x00, 0x00, 0x00);\n\tstatic silver = new Color(0xc0, 0xc0, 0xc0);\n\tstatic gray = new Color(0x80, 0x80, 0x80);\n\t// Aliases\n\tstatic magenta = Color.purple;\n\tstatic cyan = Color.aqua;\n\n\tstatic cssColors = {\n\t\t\"maroon\": Color.maroon,\n\t\t\"red\": Color.red,\n\t\t\"orange\": Color.orange,\n\t\t\"yellow\": Color.yellow,\n\t\t\"olive\": Color.olive,\n\t\t\"purple\": Color.purple,\n\t\t\"fuchsia\": Color.fuchsia,\n\t\t\"white\": Color.white,\n\t\t\"lime\": Color.lime,\n\t\t\"green\": Color.green,\n\t\t\"navy\": Color.navy,\n\t\t\"blue\": Color.blue,\n\t\t\"aqua\": Color.aqua,\n\t\t\"teal\": Color.teal,\n\t\t\"black\": Color.black,\n\t\t\"silver\": Color.silver,\n\t\t\"gray\": Color.gray,\n\t\t\"magenta\": Color.magenta,\n\t\t\"cyan\": Color.cyan\n\t};\n};\n\nexpose(Color.prototype.r, []);\nexpose(Color.prototype.g, []);\nexpose(Color.prototype.b, []);\nexpose(Color.prototype.a, []);\nexpose(Color.prototype.hue, []);\nexpose(Color.prototype.lum, []);\nexpose(Color.prototype.sat, []);\nexpose(Color.prototype.hls, []);\nexpose(Color.prototype.hlsa, []);\nexpose(Color.prototype.hsv, []);\nexpose(Color.prototype.hsva, []);\nexpose(Color.prototype.withhue, [\"hue\", \"pk\"]);\nexpose(Color.prototype.withlight, [\"light\", \"pk\"]);\nexpose(Color.prototype.abslight, [\"f\", \"pk\"]);\nexpose(Color.prototype.rellight, [\"f\", \"pk\"]);\nexpose(Color.prototype.withsat, [\"sat\", \"pk\"]);\nexpose(Color.prototype.witha, [\"a\", \"pk\"]);\nexpose(Color.prototype.withlum, [\"lum\", \"pk\"]);\nexpose(Color.prototype.abslum, [\"f\", \"pk\"]);\nexpose(Color.prototype.rellum, [\"f\", \"pk\"]);\nexpose(Color.prototype.invert, [\"f\", \"pk=\", 1.0]);\nexpose(Color.prototype.combine, [\"r\", \"pk=\", null, \"g\", \"pk=\", null, \"b\", \"pk=\", null, \"a\", \"pk=\", null]);\n\n\nexport class Date_ extends Proto\n{\n\tconstructor(year, month, day)\n\t{\n\t\tsuper();\n\t\tthis._date = new Date(year, month-1, day);\n\t}\n\n\t[symbols.type]()\n\t{\n\t\treturn datetype;\n\t}\n\n\t[symbols.repr]()\n\t{\n\t\treturn '@(' + this[symbols.str]() + \")\";\n\t}\n\n\t[symbols.str]()\n\t{\n\t\treturn _lpad(this._date.getFullYear(), \"0\", 4) + \"-\" + _lpad(this._date.getMonth()+1, \"0\", 2) + \"-\" + _lpad(this._date.getDate(), \"0\", 2);\n\t}\n\n\t[symbols.eq](other)\n\t{\n\t\tif (other instanceof Date_)\n\t\t\treturn this._date.getTime() === other._date.getTime();\n\t\treturn false;\n\t}\n\n\t[symbols.lt](other)\n\t{\n\t\tif (other instanceof Date_)\n\t\t\treturn this._date < other._date;\n\t\t_unorderable(\"<\", this, other);\n\t}\n\n\t[symbols.le](other)\n\t{\n\t\tif (other instanceof Date_)\n\t\t\treturn this._date <= other._date;\n\t\t_unorderable(\"<=\", this, other);\n\t}\n\n\t[symbols.gt](other)\n\t{\n\t\tif (other instanceof Date_)\n\t\t\treturn this._date > other._date;\n\t\t_unorderable(\">\", this, other);\n\t}\n\n\t[symbols.ge](other)\n\t{\n\t\tif (other instanceof Date_)\n\t\t\treturn this._date >= other._date;\n\t\t_unorderable(\">=\", this, other);\n\t}\n\n\tyear()\n\t{\n\t\treturn this._date.getFullYear();\n\t}\n\n\tmonth()\n\t{\n\t\treturn this._date.getMonth()+1;\n\t}\n\n\tday()\n\t{\n\t\treturn this._date.getDate();\n\t}\n\n\tul4type()\n\t{\n\t\treturn \"date\";\n\t}\n};\n\n\nexport class TimeDeltaType extends Type\n{\n\t[symbols.call](days=0, seconds=0, microseconds=0)\n\t{\n\t\treturn new TimeDelta(days, seconds, microseconds);\n\t}\n\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof TimeDelta;\n\t}\n}\n\nexpose(TimeDeltaType.prototype, [\"days\", \"pk=\", 0, \"seconds\", \"pk=\", 0, \"microseconds\", \"pk=\", 0], {name: \"timedelta\"});\n\nexport let timedeltatype = new TimeDeltaType(null, \"timedelta\", \"A time span (days/seconds/microseconds).\");\n\nexport class TimeDelta extends Proto\n{\n\tconstructor(days=0, seconds=0, microseconds=0)\n\t{\n\t\tsuper();\n\t\tlet total_microseconds = Math.floor((days * 86400 + seconds)*1000000 + microseconds);\n\n\t\tmicroseconds = ModAST.prototype._do(total_microseconds, 1000000);\n\t\tlet total_seconds = Math.floor(total_microseconds / 1000000);\n\t\tseconds = ModAST.prototype._do(total_seconds, 86400);\n\t\tdays = Math.floor(total_seconds / 86400);\n\t\tif (seconds < 0)\n\t\t{\n\t\t\tseconds += 86400;\n\t\t\t--days;\n\t\t}\n\n\t\tthis._microseconds = microseconds;\n\t\tthis._seconds = seconds;\n\t\tthis._days = days;\n\t}\n\n\t[symbols.type]()\n\t{\n\t\treturn timedeltatype;\n\t}\n\n\ttotal_seconds()\n\t{\n\t\treturn this._days * 24 * 60 * 60 + this._seconds;\n\t}\n\n\t[symbols.repr]()\n\t{\n\t\tlet v = [], first = true;\n\t\tv.push(\"timedelta(\");\n\t\tif (this._days)\n\t\t{\n\t\t\tv.push(\"days=\" + this._days);\n\t\t\tfirst = false;\n\t\t}\n\t\tif (this._seconds)\n\t\t{\n\t\t\tif (!first)\n\t\t\t\tv.push(\", \");\n\t\t\tv.push(\"seconds=\" + this._seconds);\n\t\t\tfirst = false;\n\t\t}\n\t\tif (this._microseconds)\n\t\t{\n\t\t\tif (!first)\n\t\t\t\tv.push(\", \");\n\t\t\tv.push(\"microseconds=\" + this._microseconds);\n\t\t}\n\t\tv.push(\")\");\n\t\treturn v.join(\"\");\n\t}\n\n\t[symbols.str]()\n\t{\n\t\tlet v = [];\n\t\tif (this._days)\n\t\t{\n\t\t\tv.push(this._days + \" day\");\n\t\t\tif (this._days !== -1 && this._days !== 1)\n\t\t\t\tv.push(\"s\");\n\t\t\tv.push(\", \");\n\t\t}\n\t\tlet seconds = this._seconds % 60;\n\t\tlet minutes = Math.floor(this._seconds / 60);\n\t\tlet hours = Math.floor(minutes / 60);\n\t\tminutes = minutes % 60;\n\n\t\tv.push(\n\t\t\t\"\" + hours,\n\t\t\t\":\",\n\t\t\t_lpad(minutes.toString(), \"0\", 2),\n\t\t\t\":\",\n\t\t\t_lpad(seconds.toString(), \"0\", 2)\n\t\t);\n\t\tif (this._microseconds)\n\t\t\tv.push(\".\", _lpad(this._microseconds.toString(), \"0\", 6));\n\t\treturn v.join(\"\");\n\t}\n\n\t[symbols.bool]()\n\t{\n\t\treturn this._days !== 0 || this._seconds !== 0 || this._microseconds !== 0;\n\t}\n\n\t[symbols.abs]()\n\t{\n\t\treturn this._days < 0 ? new TimeDelta(-this._days, -this._seconds, -this._microseconds) : this;\n\t}\n\n\t[symbols.eq](other)\n\t{\n\t\tif (other instanceof TimeDelta)\n\t\t\treturn (this._days === other._days) && (this._seconds === other._seconds) && (this._microseconds === other._microseconds);\n\t\treturn false;\n\t}\n\n\t[symbols.lt](other)\n\t{\n\t\tif (other instanceof TimeDelta)\n\t\t{\n\t\t\tif (this._days != other._days)\n\t\t\t\treturn this._days < other._days;\n\t\t\tif (this._seconds != other._seconds)\n\t\t\t\treturn this._seconds < other._seconds;\n\t\t\treturn this._microseconds < other._microseconds;\n\t\t}\n\t\t_unorderable(\"<\", this, other);\n\t}\n\n\t[symbols.le](other)\n\t{\n\t\tif (other instanceof TimeDelta)\n\t\t{\n\t\t\tif (this._days != other._days)\n\t\t\t\treturn this._days < other._days;\n\t\t\tif (this._seconds != other._seconds)\n\t\t\t\treturn this._seconds < other._seconds;\n\t\t\treturn this._microseconds <= other._microseconds;\n\t\t}\n\t\t_unorderable(\"<=\", this, other);\n\t}\n\n\t[symbols.gt](other)\n\t{\n\t\tif (other instanceof TimeDelta)\n\t\t{\n\t\t\tif (this._days != other._days)\n\t\t\t\treturn this._days > other._days;\n\t\t\tif (this._seconds != other._seconds)\n\t\t\t\treturn this._seconds > other._seconds;\n\t\t\treturn this._microseconds > other._microseconds;\n\t\t}\n\t\t_unorderable(\">\", this, other);\n\t}\n\n\t[symbols.ge](other)\n\t{\n\t\tif (other instanceof TimeDelta)\n\t\t{\n\t\t\tif (this._days != other._days)\n\t\t\t\treturn this._days > other._days;\n\t\t\tif (this._seconds != other._seconds)\n\t\t\t\treturn this._seconds > other._seconds;\n\t\t\treturn this._microseconds >= other._microseconds;\n\t\t}\n\t\t_unorderable(\">=\", this, other);\n\t}\n\n\t[symbols.neg]()\n\t{\n\t\treturn new TimeDelta(-this._days, -this._seconds, -this._microseconds);\n\t}\n\n\t_adddate(date, days)\n\t{\n\t\tlet year = date._date.getFullYear();\n\t\tlet month = date._date.getMonth();\n\t\tlet day = date._date.getDate() + days;\n\t\treturn new Date(year, month, day);\n\t}\n\n\t_adddatetime(date, days, seconds, microseconds)\n\t{\n\t\tlet year = date.getFullYear();\n\t\tlet month = date.getMonth();\n\t\tlet day = date.getDate() + days;\n\t\tlet hour = date.getHours();\n\t\tlet minute = date.getMinutes();\n\t\tlet second = date.getSeconds() + seconds;\n\t\tlet millisecond = date.getMilliseconds() + microseconds/1000;\n\t\treturn new Date(year, month, day, hour, minute, second, millisecond);\n\t}\n\n\t[symbols.add](other)\n\t{\n\t\tif (other instanceof TimeDelta)\n\t\t\treturn new TimeDelta(this._days + other._days, this._seconds + other._seconds, this._microseconds + other._microseconds);\n\t\telse if (_isdate(other))\n\t\t\treturn this._adddate(other, this._days);\n\t\telse if (_isdatetime(other))\n\t\t\treturn this._adddatetime(other, this._days, this._seconds, this._microseconds);\n\t\tthrow new TypeError(_type(this).fullname() + \" + \" + _type(other).fullname() + \" not supported\");\n\t}\n\n\t[symbols.radd](other)\n\t{\n\t\tif (_isdate(other))\n\t\t\treturn this._adddate(other, this._days);\n\t\telse if (_isdatetime(other))\n\t\t\treturn this._adddatetime(other, this._days, this._seconds, this._microseconds);\n\t\tthrow new TypeError(_type(this).fullname() + \" + \" + _type(other).fullname() + \" not supported\");\n\t}\n\n\t[symbols.sub](other)\n\t{\n\t\tif (other instanceof TimeDelta)\n\t\t\treturn new TimeDelta(this._days - other._days, this._seconds - other._seconds, this._microseconds - other._microseconds);\n\t\tthrow new TypeError(_type(this).fullname() + \" - \" + _type(other).fullname() + \" not supported\");\n\t}\n\n\t[symbols.rsub](other)\n\t{\n\t\tif (_isdate(other))\n\t\t\treturn this._adddate(other, -this._days);\n\t\telse if (_isdatetime(other))\n\t\t\treturn this._adddatetime(other, -this._days, -this._seconds, -this._microseconds);\n\t\tthrow new TypeError(_type(this).fullname() + \" - \" + _type(other).fullname() + \" not supported\");\n\t}\n\n\t[symbols.mul](other)\n\t{\n\t\tif (typeof(other) === \"number\")\n\t\t\treturn new TimeDelta(this._days * other, this._seconds * other, this._microseconds * other);\n\t\tthrow new TypeError(_type(this).fullname() + \" * \" + _type(other).fullname() + \" not supported\");\n\t}\n\n\t[symbols.rmul](other)\n\t{\n\t\tif (typeof(other) === \"number\")\n\t\t\treturn new TimeDelta(this._days * other, this._seconds * other, this._microseconds * other);\n\t\tthrow new TypeError(_type(this).fullname() + \" * \" + _type(other).fullname() + \" not supported\");\n\t}\n\n\t[symbols.truediv](other)\n\t{\n\t\tif (typeof(other) === \"number\" || typeof(other) === \"boolean\")\n\t\t{\n\t\t\tif (other == 0)\n\t\t\t\tthrow new ZeroDivisionError();\n\t\t\treturn new TimeDelta(this._days / other, this._seconds / other, this._microseconds / other);\n\t\t}\n\t\telse if (other instanceof TimeDelta)\n\t\t{\n\t\t\tlet myValue = this._days;\n\t\t\tlet otherValue = other._days;\n\t\t\tlet hasSeconds = this._seconds || other._seconds;\n\t\t\tlet hasMicroseconds = this._microseconds || other._microseconds;\n\t\t\tif (hasSeconds || hasMicroseconds)\n\t\t\t{\n\t\t\t\tmyValue = myValue*86400+this._seconds;\n\t\t\t\totherValue = otherValue*86400 + other._seconds;\n\t\t\t\tif (hasMicroseconds)\n\t\t\t\t{\n\t\t\t\t\tmyValue = myValue * 1000000 + this._microseconds;\n\t\t\t\t\totherValue = otherValue * 1000000 + other._microseconds;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (otherValue == 0)\n\t\t\t\tthrow new ZeroDivisionError();\n\t\t\treturn myValue/otherValue;\n\t\t}\n\t\tthrow new TypeError(_type(this).fullname() + \" / \" + _type(other).fullname() + \" not supported\");\n\t}\n\n\t[symbols.floordiv](other)\n\t{\n\t\tif (typeof(other) === \"number\" || typeof(other) === \"boolean\")\n\t\t{\n\t\t\tif (other == 0)\n\t\t\t\tthrow new ZeroDivisionError();\n\t\t\tif (_isint(other))\n\t\t\t{\n\t\t\t\treturn new TimeDelta(this._days / other, this._seconds / other, this._microseconds / other);\n\t\t\t}\n\t\t}\n\t\telse if (other instanceof TimeDelta)\n\t\t{\n\t\t\tlet result = this[symbols.truediv](other);\n\t\t\treturn Math.floor(result);\n\t\t}\n\t}\n\n\t[symbols.getattr](attrname)\n\t{\n\t\tlet self = this;\n\t\tswitch (attrname)\n\t\t{\n\t\t\tcase \"days\":\n\t\t\t\tlet days = function days(){ return self._days; };\n\t\t\t\texpose(days, []);\n\t\t\t\treturn days;\n\t\t\tcase \"seconds\":\n\t\t\t\tlet seconds = function seconds(){ return self._seconds; };\n\t\t\t\texpose(seconds, []);\n\t\t\t\treturn seconds;\n\t\t\tcase \"microseconds\":\n\t\t\t\tlet microseconds = function microseconds(){ return self._microseconds; };\n\t\t\t\texpose(microseconds, []);\n\t\t\t\treturn microseconds;\n\t\t\tdefault:\n\t\t\t\tthrow new AttributeError(this, attrname);\n\t\t}\n\t}\n\n\tdays()\n\t{\n\t\treturn this._days;\n\t}\n\n\tseconds()\n\t{\n\t\treturn this._seconds;\n\t}\n\n\tmicroseconds()\n\t{\n\t\treturn this._microseconds;\n\t}\n\n\tul4type()\n\t{\n\t\treturn \"timedelta\";\n\t}\n};\n\n\nexport class MonthDeltaType extends Type\n{\n\t// Return a `MonthDelta` object from the arguments passed in\n\t[symbols.call](months=0)\n\t{\n\t\treturn new MonthDelta(months);\n\t}\n\n\tinstancecheck(obj)\n\t{\n\t\treturn obj instanceof MonthDelta;\n\t}\n}\n\nexport let monthdeltatype = new MonthDeltaType(null, \"monthdelta\", \"A time span of a number of months.\");\n\nexpose(MonthDeltaType.prototype, [\"months\", \"p=\", 0], {name: \"monthdelta\"});\n\nexport class MonthDelta extends Proto\n{\n\tstatic classname = \"monthdelta\";\n\tstatic classdoc = \"A time span of a number of months.\";\n\n\tconstructor(months=0)\n\t{\n\t\tsuper();\n\t\tthis._months = months;\n\t}\n\n\t[symbols.type]()\n\t{\n\t\treturn monthdeltatype;\n\t}\n\n\t[symbols.repr]()\n\t{\n\t\tif (!this._months)\n\t\t\treturn \"monthdelta()\";\n\t\treturn \"monthdelta(\" + this._months + \")\";\n\t}\n\n\t[symbols.str]()\n\t{\n\t\tif (this._months)\n\t\t{\n\t\t\tif (this._months !== -1 && this._months !== 1)\n\t\t\t\treturn this._months + \" months\";\n\t\t\treturn this._months + \" month\";\n\t\t}\n\t\treturn \"0 months\";\n\t}\n\n\ttoString()\n\t{\n\t\treturn this[symbols.str]();\n\t}\n\n\t[symbols.bool]()\n\t{\n\t\treturn this._months !== 0;\n\t}\n\n\t[symbols.abs]()\n\t{\n\t\treturn this._months < 0 ? new MonthDelta(-this._months) : this;\n\t}\n\n\t[symbols.eq](other)\n\t{\n\t\tif (other instanceof MonthDelta)\n\t\t\treturn this._months === other._months;\n\t\treturn false;\n\t}\n\n\t[symbols.lt](other)\n\t{\n\t\tif (other instanceof MonthDelta)\n\t\t\treturn this._months < other._months;\n\t\t_unorderable(\"<\", this, other);\n\t}\n\n\t[symbols.le](other)\n\t{\n\t\tif (other instanceof MonthDelta)\n\t\t\treturn this._months <= other._months;\n\t\t_unorderable(\"<=\", this, other);\n\t}\n\n\t[symbols.gt](other)\n\t{\n\t\tif (other instanceof MonthDelta)\n\t\t\treturn this._months > other._months;\n\t\t_unorderable(\">\", this, other);\n\t}\n\n\t[symbols.ge](other)\n\t{\n\t\tif (other instanceof MonthDelta)\n\t\t\treturn this._months >= other._months;\n\t\t_unorderable(\">=\", this, other);\n\t}\n\n\t[symbols.neg]()\n\t{\n\t\treturn new MonthDelta(-this._months);\n\t}\n\n\t_adddate(date, months)\n\t{\n\t\tlet result = this._adddatetime(date._date, months);\n\t\treturn new Date_(result.getFullYear(), result.getMonth()+1, result.getDate());\n\t}\n\n\t_adddatetime(date, months)\n\t{\n\t\tlet year = date.getFullYear();\n\t\tlet month = date.getMonth() + months;\n\t\tlet day = date.getDate();\n\t\tlet hour = date.getHours();\n\t\tlet minute = date.getMinutes();\n\t\tlet second = date.getSeconds();\n\t\tlet millisecond = date.getMilliseconds();\n\n\t\twhile (true)\n\t\t{\n\t\t\t// As the month might be out of bounds, we have to find out what the real target month is\n\t\t\tlet targetmonth = new Date(year, month, 1, hour, minute, second, millisecond).getMonth();\n\t\t\tlet result = new Date(year, month, day, hour, minute, second, millisecond);\n\t\t\tif (result.getMonth() === targetmonth)\n\t\t\t\treturn result;\n\t\t\t--day;\n\t\t}\n\t}\n\n\t[symbols.add](other)\n\t{\n\t\tif (_ismonthdelta(other))\n\t\t\treturn new MonthDelta(this._months + other._months);\n\t\telse if (_isdate(other))\n\t\t\treturn this._adddate(other, this._months);\n\t\telse if (_isdatetime(other))\n\t\t\treturn this._adddatetime(other, this._months);\n\t\tthrow new ArgumentError(_type(this).fullname() + \" + \" + _type(other).fullname() + \" not supported\");\n\t}\n\n\t[symbols.radd](other)\n\t{\n\t\tif (_isdate(other))\n\t\t\treturn this._adddate(other, this._months);\n\t\telse if (_isdatetime(other))\n\t\t\treturn this._adddatetime(other, this._months);\n\t\tthrow new ArgumentError(_type(this).fullname() + \" + \" + _type(other).fullname() + \" not supported\");\n\t}\n\n\t[symbols.sub](other)\n\t{\n\t\tif (_ismonthdelta(other))\n\t\t\treturn new MonthDelta(this._months - other._months);\n\t\tthrow new ArgumentError(_type(this).fullname() + \" - \" + _type(other).fullname() + \" not supported\");\n\t}\n\n\t[symbols.rsub](other)\n\t{\n\t\tif (_isdate(other))\n\t\t\treturn this._adddate(other, -this._months);\n\t\telse if (_isdatetime(other))\n\t\t\treturn this._adddatetime(other, -this._months);\n\t\tthrow new ArgumentError(_type(this).fullname() + \" - \" + _type(other).fullname() + \" not supported\");\n\t}\n\n\t[symbols.mul](other)\n\t{\n\t\tif (typeof(other) === \"number\" || typeof(other) === \"boolean\")\n\t\t\treturn new MonthDelta(this._months * Math.floor(other));\n\t\tthrow new ArgumentError(_type(this).fullname() + \" * \" + _type(other).fullname() + \" not supported\");\n\t}\n\n\t[symbols.rmul](other)\n\t{\n\t\tif (typeof(other) === \"number\" || typeof(other) === \"boolean\")\n\t\t\treturn new MonthDelta(this._months * Math.floor(other));\n\t\tthrow new ArgumentError(_type(this).fullname() + \" * \" + _type(other).fullname() + \" not supported\");\n\t}\n\n\t[symbols.truediv](other)\n\t{\n\t\tif (_ismonthdelta(other))\n\t\t\treturn this._months / other._months;\n\t\tthrow new ArgumentError(_type(this).fullname() + \" / \" + _type(other).fullname() + \" not supported\");\n\t}\n\n\t[symbols.floordiv](other)\n\t{\n\t\tif (typeof(other) === \"number\" || typeof(other) === \"boolean\")\n\t\t{\n\t\t\tif (other == 0)\n\t\t\t\tthrow new ZeroDivisionError();\n\t\t\tif (_isint(other))\n\t\t\t\treturn new MonthDelta(Math.floor(this._months / other));\n\t\t}\n\t\telse if (_ismonthdelta(other))\n\t\t{\n\t\t\tif (other._months == 0)\n\t\t\t\tthrow new ZeroDivisionError();\n\t\t\treturn Math.floor(this._months / other._months);\n\t\t}\n\t\tthrow new ArgumentError(_type(this).fullname() + \" // \" + _type(other).fullname() + \" not supported\");\n\t}\n\n\t[symbols.getattr](attrname)\n\t{\n\t\tlet self = this;\n\t\tswitch (attrname)\n\t\t{\n\t\t\tcase \"months\":\n\t\t\t\tlet months = function months(){ return self._months; };\n\t\t\t\texpose(months, []);\n\t\t\t\treturn months;\n\t\t\tdefault:\n\t\t\t\tthrow new AttributeError(this, attrname);\n\t\t}\n\t}\n\n\tmonths()\n\t{\n\t\treturn this._months;\n\t}\n};\n\n\nexport const _math = new Module(\n\t\"math\",\n\t\"Math related functions and constants\",\n\t{\n\t\tpi: Math.PI,\n\t\te: Math.E,\n\t\ttau: 2 * Math.PI,\n\t\tcos: Math.cos,\n\t\tsin: Math.sin,\n\t\ttan: Math.tan,\n\t\tsqrt: Math.sqrt,\n\t\tisclose: isclose\n\t}\n);\n\n\nexport const _operator = new Module(\n\t\"operator\",\n\t\"Various operators as functions\",\n\t{\n\t\tattrgetter: attrgettertype\n\t}\n);\n\n\nexport const _ul4 = new Module(\n\t\"ul4\",\n\t\"UL4 - A templating language\",\n\t{\n\t\tAST: _maketype(AST),\n\t\tTextAST: _maketype(TextAST),\n\t\tIndentAST: _maketype(IndentAST),\n\t\tLineEndAST: _maketype(LineEndAST),\n\t\tCodeAST: _maketype(CodeAST),\n\t\tConstAST: _maketype(ConstAST),\n\t\tSeqItemAST: _maketype(SeqItemAST),\n\t\tUnpackSeqItemAST: _maketype(UnpackSeqItemAST),\n\t\tListAST: _maketype(ListAST),\n\t\tListComprehensionAST: _maketype(ListComprehensionAST),\n\t\tSetAST: _maketype(SetAST),\n\t\tSetComprehensionAST: _maketype(SetComprehensionAST),\n\t\tDictItemAST: _maketype(DictItemAST),\n\t\tUnpackDictItemAST: _maketype(UnpackDictItemAST),\n\t\tDictAST: _maketype(DictAST),\n\t\tDictComprehensionAST: _maketype(DictComprehensionAST),\n\t\tGeneratorExpressionAST: _maketype(GeneratorExpressionAST),\n\t\tVarAST: _maketype(VarAST),\n\t\tBlockAST: _maketype(BlockAST),\n\t\tConditionalBlocksAST: _maketype(ConditionalBlocksAST),\n\t\tIfBlockAST: _maketype(IfBlockAST),\n\t\tElIfBlockAST: _maketype(ElIfBlockAST),\n\t\tElseBlockAST: _maketype(ElseBlockAST),\n\t\tForBlockAST: _maketype(ForBlockAST),\n\t\tWhileBlockAST: _maketype(WhileBlockAST),\n\t\tBreakAST: _maketype(BreakAST),\n\t\tContinueAST: _maketype(ContinueAST),\n\t\tAttrAST: _maketype(AttrAST),\n\t\tSliceAST: _maketype(SliceAST),\n\t\tUnaryAST: _maketype(UnaryAST),\n\t\tNotAST: _maketype(NotAST),\n\t\tIfAST: _maketype(IfAST),\n\t\tNegAST: _maketype(NegAST),\n\t\tBitNotAST: _maketype(BitNotAST),\n\t\tPrintAST: _maketype(PrintAST),\n\t\tPrintXAST: _maketype(PrintXAST),\n\t\tReturnAST: _maketype(ReturnAST),\n\t\tBinaryAST: _maketype(BinaryAST),\n\t\tItemAST: _maketype(ItemAST),\n\t\tShiftLeftAST: _maketype(ShiftLeftAST),\n\t\tShiftRightAST: _maketype(ShiftRightAST),\n\t\tBitAndAST: _maketype(BitAndAST),\n\t\tBitXOrAST: _maketype(BitXOrAST),\n\t\tBitOrAST: _maketype(BitOrAST),\n\t\tIsAST: _maketype(IsAST),\n\t\tIsNotAST: _maketype(IsNotAST),\n\t\tEQAST: _maketype(EQAST),\n\t\tNEAST: _maketype(NEAST),\n\t\tLTAST: _maketype(LTAST),\n\t\tLEAST: _maketype(LEAST),\n\t\tGTAST: _maketype(GTAST),\n\t\tGEAST: _maketype(GEAST),\n\t\tContainsAST: _maketype(ContainsAST),\n\t\tNotContainsAST: _maketype(NotContainsAST),\n\t\tAddAST: _maketype(AddAST),\n\t\tSubAST: _maketype(SubAST),\n\t\tMulAST: _maketype(MulAST),\n\t\tFloorDivAST: _maketype(FloorDivAST),\n\t\tTrueDivAST: _maketype(TrueDivAST),\n\t\tOrAST: _maketype(OrAST),\n\t\tAndAST: _maketype(AndAST),\n\t\tModAST: _maketype(ModAST),\n\t\tChangeVarAST: _maketype(ChangeVarAST),\n\t\tSetVarAST: _maketype(SetVarAST),\n\t\tAddVarAST: _maketype(AddVarAST),\n\t\tSubVarAST: _maketype(SubVarAST),\n\t\tMulVarAST: _maketype(MulVarAST),\n\t\tFloorDivVarAST: _maketype(FloorDivVarAST),\n\t\tTrueDivVarAST: _maketype(TrueDivVarAST),\n\t\tModVarAST: _maketype(ModVarAST),\n\t\tShiftLeftVarAST: _maketype(ShiftLeftVarAST),\n\t\tShiftRightVarAST: _maketype(ShiftRightVarAST),\n\t\tBitAndVarAST: _maketype(BitAndVarAST),\n\t\tBitXOrVarAST: _maketype(BitXOrVarAST),\n\t\tBitOrVarAST: _maketype(BitOrVarAST),\n\t\tPositionalArgumentAST: _maketype(PositionalArgumentAST),\n\t\tKeywordArgumentAST: _maketype(KeywordArgumentAST),\n\t\tUnpackListArgumentAST: _maketype(UnpackListArgumentAST),\n\t\tUnpackDictArgumentAST: _maketype(UnpackDictArgumentAST),\n\t\tCallAST: _maketype(CallAST),\n\t\tRenderAST: _maketype(RenderAST),\n\t\tRenderXAST: _maketype(RenderXAST),\n\t\tRenderOrPrintAST: _maketype(RenderOrPrintAST),\n\t\tRenderOrPrintXAST: _maketype(RenderOrPrintXAST),\n\t\tRenderXOrPrintAST: _maketype(RenderXOrPrintAST),\n\t\tRenderXOrPrintXAST: _maketype(RenderXOrPrintXAST),\n\t\tRenderBlockAST: _maketype(RenderBlockAST),\n\t\tRenderBlocksAST: _maketype(RenderBlocksAST),\n\t\tSignatureAST: _maketype(SignatureAST),\n\t\tTemplate: _maketype(Template),\n\t\tTemplateClosure: _maketype(TemplateClosure),\n\t}\n);\n\n\nexport const _ul4on = new Module(\n\t\"ul4on\",\n\t\"Object serialization\",\n\t{\n\t\tloads: _ul4on_loads,\n\t\tdumps: _ul4on_dumps,\n\t\tEncoder: encodertype,\n\t\tDecoder: decodertype\n\t}\n);\n\n\nexport const _color = new Module(\n\t\"color\",\n\t\"Types and functions for handling RGBA colors\",\n\t{\n\t\tColor: colortype,\n\t\tcss: _css,\n\t\tmix: _mix\n\t}\n);\n\n\nexport let builtins = {\n\trepr: _repr,\n\tascii: _ascii,\n\tstr: strtype,\n\tint: inttype,\n\tfloat: floattype,\n\tlist: listtype,\n\tset: settype,\n\tdict: dicttype,\n\tbool: booltype,\n\tlen: _len,\n\ttype: _type,\n\tformat: _format,\n\tany: _any,\n\tall: _all,\n\tzip: _zip,\n\tgetattr: _getattr,\n\thasattr: _hasattr,\n\tdir: _dir,\n\tisundefined: _isundefined,\n\tisdefined: _isdefined,\n\tisnone: _isnone,\n\tisbool: _isbool,\n\tisint: _isint,\n\tisfloat: _isfloat,\n\tisstr: _isstr,\n\tisdate: _isdate,\n\tisdatetime: _isdatetime,\n\tiscolor: _iscolor,\n\tistimedelta: _istimedelta,\n\tismonthdelta: _ismonthdelta,\n\tistemplate: _istemplate,\n\tisfunction: _isfunction,\n\tislist: _islist,\n\tisset: _isset,\n\tisdict: _isdict,\n\tisexception: _isexception,\n\tisinstance: _isinstance,\n\tasjson: _asjson,\n\tfromjson: _fromjson,\n\tasul4on: _asul4on,\n\tfromul4on: _fromul4on,\n\tnow: now,\n\tutcnow: utcnow,\n\ttoday: today,\n\tenumerate: _enumerate,\n\tisfirst: _isfirst,\n\tislast: _islast,\n\tisfirstlast: _isfirstlast,\n\tenumfl: _enumfl,\n\tabs: _abs,\n\tdate: datetype,\n\tdatetime: datetimetype,\n\ttimedelta: timedeltatype,\n\tmonthdelta: monthdeltatype,\n\trgb: _rgb,\n\thls: _hls,\n\thsv: _hsv,\n\txmlescape: _xmlescape,\n\tcsv: _csv,\n\tchr: _chr,\n\tord: _ord,\n\thex: _hex,\n\toct: _oct,\n\tbin: _bin,\n\tmin: _min,\n\tmax: _max,\n\tsum: _sum,\n\tfirst: _first,\n\tlast: _last,\n\tsorted: _sorted,\n\trange: _range,\n\tslice: _slice,\n\turlquote: _urlquote,\n\turlunquote: _urlunquote,\n\treversed: _reversed,\n\trandom: _random,\n\trandrange: _randrange,\n\trandchoice: _randchoice,\n\tround: _round,\n\tfloor: _floor,\n\tceil: _ceil,\n\tmd5: _md5,\n\tscrypt: _scrypt,\n\tul4on: _ul4on,\n\tul4: _ul4,\n\tmath: _math,\n\toperator: _operator,\n\tcolor: _color\n};\n\n\nconst constructors = [\n\t[TextAST, \"text\"],\n\t[IndentAST, \"indent\"],\n\t[LineEndAST, \"lineend\"],\n\t[ConstAST, \"const\"],\n\t[SeqItemAST, \"seqitem\"],\n\t[UnpackSeqItemAST, \"unpackseqitem\"],\n\t[DictItemAST, \"dictitem\"],\n\t[UnpackDictItemAST, \"unpackdictitem\"],\n\t[PositionalArgumentAST, \"posarg\"],\n\t[KeywordArgumentAST, \"keywordarg\"],\n\t[UnpackListArgumentAST, \"unpacklistarg\"],\n\t[UnpackDictArgumentAST, \"unpackdictarg\"],\n\t[ListAST, \"list\"],\n\t[ListComprehensionAST, \"listcomp\"],\n\t[DictAST, \"dict\"],\n\t[DictComprehensionAST, \"dictcomp\"],\n\t[SetAST, \"set\"],\n\t[SetComprehensionAST, \"setcomp\"],\n\t[GeneratorExpressionAST, \"genexpr\"],\n\t[VarAST, \"var\"],\n\t[NotAST, \"not\"],\n\t[NegAST, \"neg\"],\n\t[BitNotAST, \"bitnot\"],\n\t[IfAST, \"if\"],\n\t[ReturnAST, \"return\"],\n\t[PrintAST, \"print\"],\n\t[PrintXAST, \"printx\"],\n\t[ItemAST, \"item\"],\n\t[IsAST, \"is\"],\n\t[IsNotAST, \"isnot\"],\n\t[EQAST, \"eq\"],\n\t[NEAST, \"ne\"],\n\t[LTAST, \"lt\"],\n\t[LEAST, \"le\"],\n\t[GTAST, \"gt\"],\n\t[GEAST, \"ge\"],\n\t[NotContainsAST, \"notcontains\"],\n\t[ContainsAST, \"contains\"],\n\t[AddAST, \"add\"],\n\t[SubAST, \"sub\"],\n\t[MulAST, \"mul\"],\n\t[FloorDivAST, \"floordiv\"],\n\t[TrueDivAST, \"truediv\"],\n\t[ModAST, \"mod\"],\n\t[ShiftLeftAST, \"shiftleft\"],\n\t[ShiftRightAST, \"shiftright\"],\n\t[BitAndAST, \"bitand\"],\n\t[BitXOrAST, \"bitxor\"],\n\t[BitOrAST, \"bitor\"],\n\t[AndAST, \"and\"],\n\t[OrAST, \"or\"],\n\t[SliceAST, \"slice\"],\n\t[AttrAST, \"attr\"],\n\t[CallAST, \"call\"],\n\t[RenderAST, \"render\"],\n\t[RenderXAST, \"renderx\"],\n\t[RenderOrPrintAST, \"render_or_print\"],\n\t[RenderOrPrintXAST, \"render_or_printx\"],\n\t[RenderXOrPrintAST, \"renderx_or_print\"],\n\t[RenderXOrPrintXAST, \"renderx_or_printx\"],\n\t[RenderBlockAST, \"renderblock\"],\n\t[RenderBlocksAST, \"renderblocks\"],\n\t[SetVarAST, \"setvar\"],\n\t[AddVarAST, \"addvar\"],\n\t[SubVarAST, \"subvar\"],\n\t[MulVarAST, \"mulvar\"],\n\t[TrueDivVarAST, \"truedivvar\"],\n\t[FloorDivVarAST, \"floordivvar\"],\n\t[ModVarAST, \"modvar\"],\n\t[ShiftLeftVarAST, \"shiftleftvar\"],\n\t[ShiftRightVarAST, \"shiftrightvar\"],\n\t[BitAndVarAST, \"bitandvar\"],\n\t[BitXOrVarAST, \"bitxorvar\"],\n\t[BitOrVarAST, \"bitorvar\"],\n\t[ForBlockAST, \"forblock\"],\n\t[WhileBlockAST, \"whileblock\"],\n\t[BreakAST, \"break\"],\n\t[ContinueAST, \"continue\"],\n\t[ConditionalBlocksAST, \"condblock\"],\n\t[IfBlockAST, \"ifblock\"],\n\t[ElIfBlockAST, \"elifblock\"],\n\t[ElseBlockAST, \"elseblock\"],\n\t[SignatureAST, \"signature\"],\n\t[Template, \"template\"],\n];\n\nfor (let [constructor, name] of constructors)\n{\n\tconstructor.prototype.type = name;\n\tregister(\"de.livinglogic.ul4.\" + name, constructor);\n}\n\n// Report an exception `exc` originating from an UL4 on the browser console.\nexport function report_exc(exc)\n{\n\tlet original_exc = exc;\n\tif (console && console.error)\n\t{\n\t\tlet errors = [];\n\t\tfor (;;)\n\t\t{\n\t\t\terrors.unshift(exc);\n\t\t\tif (exc.context !== undefined && exc.context !== null)\n\t\t\t\texc = exc.context;\n\t\t\telse\n\t\t\t\tbreak;\n\t\t}\n\n\t\tlet texts = [];\n\t\tlet args = [];\n\n\t\tfunction text(s)\n\t\t{\n\t\t\ttexts.push(s);\n\t\t}\n\n\t\tfunction css(text, style)\n\t\t{\n\t\t\ttexts.push(\"%c\", text, \"%c\");\n\t\t\targs.push(style, \"\");\n\t\t}\n\n\t\tfunction em(s)\n\t\t{\n\t\t\tcss(s, \"font-weight: bold\");\n\t\t}\n\n\t\tfunction focus(s)\n\t\t{\n\t\t\tcss(s, \"border-bottom: 2px solid #b22\");\n\t\t}\n\n\t\tfor (let exc of errors)\n\t\t{\n\t\t\tif (texts.length)\n\t\t\t\ttext(\"\\n\\n\");\n\n\t\t\tif (exc instanceof ul4.LocationError)\n\t\t\t{\n\t\t\t\tlet template = exc.location.template;\n\t\t\t\tif (template.parenttemplate !== null)\n\t\t\t\t\ttext(\"in local template \");\n\t\t\t\telse\n\t\t\t\t\ttext(\"in template \");\n\t\t\t\tlet first = true;\n\t\t\t\twhile (template != null)\n\t\t\t\t{\n\t\t\t\t\tif (first)\n\t\t\t\t\t\tfirst = false;\n\t\t\t\t\telse\n\t\t\t\t\t\ttext(\" in \");\n\t\t\t\t\tem(template.name ? _repr(template.name) : \"(unnamed)\");\n\t\t\t\t\ttemplate = template.parenttemplate;\n\t\t\t\t}\n\t\t\t\ttext(\" offset \");\n\t\t\t\tem(exc.location.pos.start + \"\");\n\t\t\t\ttext(\":\");\n\t\t\t\tem(exc.location.pos.stop + \"\");\n\t\t\t\ttext(\"; line \");\n\t\t\t\tem(exc.location.startline + \"\");\n\t\t\t\ttext(\"; column \");\n\t\t\t\tem(exc.location.startcol + \"\");\n\t\t\t\ttext(\"\\n\");\n\t\t\t\ttext(exc.location.startsourceprefix);\n\t\t\t\tfocus(exc.location.startsource);\n\t\t\t\ttext(exc.location.startsourcesuffix);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tem(exc.constructor.name);\n\t\t\t\ttext(\": \");\n\t\t\t\ttext(exc.message);\n\t\t\t}\n\t\t}\n\t\tconsole.error(texts.join(\"\"), ...args);\n\t}\n};"],"names":["$","safeAdd","x","y","lsw","md5cmn","q","a","b","s","t","bitRotateLeft","num","cnt","md5ff","c","d","md5gg","md5hh","md5ii","binlMD5","len","i","olda","oldb","oldc","oldd","length","binl2rstr","input","output","length32","String","fromCharCode","rstr2binl","undefined","length8","charCodeAt","rstr2hex","hexTab","charAt","str2rstrUTF8","unescape","encodeURIComponent","rawMD5","rstrMD5","rawHMACMD5","k","rstrHMACMD5","key","data","hash","bkey","ipad","opad","concat","md5","string","raw","hexHMACMD5","hexMD5","module","exports","this","version","packageInfo","api_version","symbols","str","Symbol","repr","bool","call","render","contains","eq","ne","lt","le","gt","ge","neg","abs","add","radd","sub","rsub","mul","rmul","truediv","rtruediv","floordiv","rfloordiv","getattr","setattr","getitem","setitem","type","expose","f","signature","options","name","_ul4_name","Object","prototype","toString","Signature","_ul4_signature","_ul4_needsobject","needsobject","_ul4_needscontext","needscontext","_nextid","Proto","__id__","other","paramsByPos","paramsByName","countpos","countposdef","countposkw","countposkwdef","countkw","countkwdef","varpos","varkw","state","params","value","endsWith","defaultValue","pos","param","ParameterError","push","args","kwargs","Map","count","finalargs","Array","fill","haveValues","arg","indexOf","count_nodef","count_def","ArgumentError","entries","argname","argvalue","_repr","has","set","bindArray","argObject","buffer","lasttype","sep","includes","v","_appendParam","join","Type","doc","_constructor","constructor","attrname","AttributeError","fullname","attrs","obj","_typeof","attr","realattr","apply","exc","object","Set","_registry","register","ul4onname","dumps","indent","encoder","Encoder","dump","loads","registry","decoder","Decoder","EncoderType","encodertype","_level","_strings2index","_ids2index","_backrefs","line","oldindent","_line","Math","round","index","_str_repr","replace","_iscolor","r","g","_isdate","year","month","day","_isdatetime","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getMilliseconds","_istimedelta","days","seconds","microseconds","_ismonthdelta","months","slice","start","stop","ul4ondump","ul4onid","_islist","item","_ismap","_isdict","_isset","ValueError","bind","ul4","DecoderType","decodertype","backrefs","persistent_objects","stack","re_white","match","size","result","substring","re_digits","readcharoreof","parseFloat","isNaN","oldpos","escapechar","chars","read","codepoint","parseInt","load","typecode","readblackchar","readnumber","readchar","delimiter","c2","_readescape","Color","_r","_g","_b","_a","Date_","Date","setFullYear","setDate","setMonth","setHours","setMinutes","setSeconds","setMilliseconds","TimeDelta","_days","_seconds","_microseconds","MonthDelta","_months","backup","pop","_beginfakeloading","_endfakeloading","ul4onload","id","self","next","done","_rvalidchars","_rvalidescape","_rvalidtokens","_rvalidbraces","_map2object","newobj","TypeError","_bound","upper","_stacktrace","Exception","context","_internal_call","functioncontext","bindObject","unshift","_function_is_callable","_object_is_callable","_object_is_renderable","_callfunction","_callobject","_callrender","_call","_type","_unpackvar","lvalue","newvalue","iter","_iter","_formatsource","out","finalout","level","needlf","part","j","_sourceprefix","source","outerstartpos","innerstartpos","maxprefix","preprefix","_sourcesuffix","outerstoppos","innerstoppos","maxsuffix","postsuffix","_lineColFromPos","col","_eq","obj1","obj2","numbertypes","getTime","_isobject","hasOwnProperty","get","_ne","_unorderable","operator","_cmp","v1","v2","res","in1only","in2only","_lt","_le","_gt","_ge","_isiter","keys","values","iterator","ascii","squote","dquote","quote","code","escape","test","_lpad","_map_repr","_repr_internal","_list_repr","first","_set_repr","_object_repr","_date_repr","_date","_datetime_repr","hour","minute","second","ms","_ascii","_date_str","_datetime_str","_str","strtype","_bool","booltype","_int","base","inttype","_float","floattype","_list","listtype","_set","settype","_len","sequence","constructors2types","_maketype","GenericType","nonetype","undefinedtype","_isbool","_isint","_isfloat","_isstr","dicttype","datetimetype","functiontype","_mod","div","floor","mod","_getattr","default_","_hasattr","hasattr","_dir","dir","_any","iterable","_all","_isundefined","_isdefined","_isnone","instancecheck","datetype","colortype","timedeltatype","monthdeltatype","_istemplate","Template","TemplateClosure","_isfunction","_isexception","_isinstance","_str_repeat","rep","_list_repeat","list","_asjson","_str_json","_fromjson","strip","JSON","parse","Function","_asul4on","_fromul4on","_format_datetime","fmt","lang","translation","de","ml","ws","wl","xf","Xf","cf","en","fr","es","it","da","sv","nl","pt","cs","sk","pl","hr","sr","ro","hu","tr","ru","zh","ko","ja","inspec","getDay","_format","yearday","_week4format","_format_int","work","align","sign","alternate","minimumwidth","minimumwidthStr","exec","toUpperCase","pad","padBefore","padAfter","translations","toLowerCase","split","_rpad","_extend","baseobj","assign","create","BoolType","IntType","FloatType","StrType","end","_count","_find","_rfind","old","new_","substr","maxsplit","splice","lstrip","lastIndexOf","rstrip","startpos","keepends","lookingAtLineEnd","lineendlen","endpos","resultlist","prefix","singlepre","suffix","singlesuf","find","rfind","rsplit","splitlines","lower","capitalize","startswith","endswith","ListType","items","append","insert","DictType","update","__proto__","realresult","others","clear","KeyError","SetType","DateType","weekday","firstweekday","mindaysinfirstweek","calendar","week","date","mimeformat","isoformat","DateTimeType","microsecond","offset","refDate","weekDayDiff","weekStartYear","weekStartMonth","weekStartDay","weekStart","diff","SubAST","_do","leap","_isleap","FunctionType","classmodule","classname","classdoc","Context","vars","globals","builtins","indents","escapes","_output","message","fileName","lineNumber","instance","Error","setPrototypeOf","getPrototypeOf","enumerable","writable","configurable","InternalException","ReturnException","BreakException","ContinueException","SyntaxError","LValueRequiredError","NotSubscriptableError","ZeroDivisionError","IndexError","NotImplementedError","LocationError","location","template","parenttemplate","templateprefix","_templateprefix","startsourceprefix","startsource","startsourcesuffix","text","underline","startline","startcol","AST","stoppos","_startline","_startcol","_stopline","_stopcol","_source","of","_ul4onattrs","_eval","_decorate_exception","_eval_set","_eval_modify","TextAST","IndentAST","_text","LineEndAST","CodeAST","ConstAST","ItemArgBase","_eval_list","_eval_dict","_eval_call","SeqItemAST","_handle_eval","UnpackSeqItemAST","DictItemAST","UnpackDictItemAST","subitem","PositionalArgumentAST","KeywordArgumentAST","UnpackListArgumentAST","UnpackDictArgumentAST","ListAST","_handle_eval_list","ListComprehensionAST","varname","container","condition","localcontext","inheritvars","_handle_eval_set","SetAST","SetComprehensionAST","DictAST","_handle_eval_dict","DictComprehensionAST","GeneratorExpressionAST","VarAST","_get","_modify","_ido","UnaryAST","NegAST","BitNotAST","NotAST","IfAST","objif","objcond","objelse","ReturnAST","PrintAST","PrintXAST","_xmlescape","BinaryAST","ItemAST","orgkey","IsAST","IsNotAST","EQAST","NEAST","LTAST","LEAST","GTAST","GEAST","ContainsAST","NotContainsAST","AddAST","_date_sub","_datetime_sub","swap","year1","yearday1","year2","yearday2","diffdays","hours1","minutes1","seconds1","hours2","minutes2","diffseconds","diffmilliseconds","MulAST","targetsize","FloorDivAST","TrueDivAST","ModAST","ShiftLeftAST","ShiftRightAST","BitAndAST","BitXOrAST","BitOrAST","AndAST","OrAST","AttrAST","oldvalue","CallAST","_handle_eval_call","_makeargs","RenderAST","_render_object","_dont_print_object","withindent","_handle_additional_arguments","_real_render_object","_real_print_object","RenderXAST","_renderx_object","RenderOrPrintAST","_print_object","RenderOrPrintXAST","_printx_object","RenderXOrPrintAST","RenderXOrPrintXAST","RenderBlockAST","content","closure","RenderBlocksAST","BlockAST","SliceAST","index1","index2","ChangeVarAST","SetVarAST","ModifyVarAST","_handle_eval_modify","_operator","AddVarAST","SubVarAST","MulVarAST","TrueDivVarAST","FloorDivVarAST","ModVarAST","ShiftLeftVarAST","ShiftRightVarAST","BitAndVarAST","BitXOrVarAST","BitOrVarAST","ForBlockAST","truel","subname","_str_varname","WhileBlockAST","BreakAST","ContinueAST","ConditionalBlocksAST","block","_execute","ConditionalBlockAST","_strname","IfBlockAST","ElIfBlockAST","ElseBlockAST","whitespace","docpos","_asts","_renderbound","renders","_rendersbound","SignatureAST","loaded_api_version","replacevars","replaceoutput","getoutput","_callbound","tag","endtag","_rgb","_csv","_chr","_ord","_hex","number","_oct","_bin","_min","minvalue","testvalue","_max","_sum","_first","_last","_sorted","reverse","cmp","sort","s1","s2","keyvalue","_range","higher","step","_slice","_urlquote","_urlunquote","decodeURIComponent","_reversed","_random","random","_randrange","n","width","_randchoice","iscolor","_round","digits","threshold","pow","_floor","_ceil","ceil","_md5","_scrypt","salt","_css","startsWith","parts","color","cssColors","_mix","weight","sumweights","_enumerate","_isfirst","isfirst","_islast","lastitem","_isfirstlast","_enumfl","_zip","iterables","iters","_abs","_datetime","_timedelta","_monthdelta","_hls","h","l","m1","m2","_v","hue","_hsv","p","defaultvalue","now","utcnow","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCMilliseconds","today","Module","__name__","__doc__","_ul4on_loads","_ul4on_dumps","isclose","rel_tol","abs_tol","Infinity","cos","sin","tan","sqrt","AttrGetterType","AttrGetter","attrgettertype","attrnames","_getone","_attrgetter","getone","dottedname","dottedattrname","isstr","lastIndex","jan1","jan1weekday","ColorType","light","sat","lum","hls","hlsa","hsv","hsva","withhue","witha","withlight","abslight","rellight","withsat","withlum","abslum","rellum","invert","combine","rc","gc","bc","maxc","max","minc","min","factor","lum_old","_interpolate","invf","purple","aqua","maroon","red","orange","yellow","olive","fuchsia","white","lime","green","navy","blue","teal","black","silver","gray","magenta","cyan","TimeDeltaType","total_microseconds","total_seconds","minutes","hours","millisecond","_adddate","_adddatetime","myValue","otherValue","hasSeconds","hasMicroseconds","MonthDeltaType","targetmonth","_math","pi","PI","e","E","tau","attrgetter","_ul4","_ul4on","_color","css","mix","dict","format","any","all","zip","isundefined","isdefined","isnone","isbool","isint","isfloat","isdate","isdatetime","istimedelta","ismonthdelta","istemplate","isfunction","islist","isset","isdict","isexception","isinstance","asjson","fromjson","asul4on","fromul4on","enumerate","islast","isfirstlast","enumfl","datetime","timedelta","monthdelta","rgb","xmlescape","csv","chr","ord","hex","oct","bin","sum","last","sorted","range","urlquote","urlunquote","reversed","randrange","randchoice","scrypt","ul4on","math","report_exc","console","error","texts","style","em","focus","errors"],"mappings":"6uKAuBC,SAAWA,GAWV,SAASC,QAAQC,EAAGC,GAClB,IAAIC,GAAW,MAAJF,IAAmB,MAAJC,GAE1B,OADWD,GAAK,KAAOC,GAAK,KAAOC,GAAO,KAC3B,GAAa,MAANA,EAyBxB,SAASC,OAAOC,EAAGC,EAAGC,EAAGN,EAAGO,EAAGC,GAC7B,OAAOT,QAhBT,SAASU,cAAcC,EAAKC,GAC1B,OAAQD,GAAOC,EAAQD,IAAS,GAAKC,EAetBF,CAAcV,QAAQA,QAAQM,EAAGD,GAAIL,QAAQC,EAAGQ,IAAKD,GAAID,GAc1E,SAASM,MAAMP,EAAGC,EAAGO,EAAGC,EAAGd,EAAGO,EAAGC,GAC/B,OAAOL,OAAQG,EAAIO,GAAOP,EAAIQ,EAAIT,EAAGC,EAAGN,EAAGO,EAAGC,GAchD,SAASO,MAAMV,EAAGC,EAAGO,EAAGC,EAAGd,EAAGO,EAAGC,GAC/B,OAAOL,OAAQG,EAAIQ,EAAMD,GAAKC,EAAIT,EAAGC,EAAGN,EAAGO,EAAGC,GAchD,SAASQ,MAAMX,EAAGC,EAAGO,EAAGC,EAAGd,EAAGO,EAAGC,GAC/B,OAAOL,OAAOG,EAAIO,EAAIC,EAAGT,EAAGC,EAAGN,EAAGO,EAAGC,GAcvC,SAASS,MAAMZ,EAAGC,EAAGO,EAAGC,EAAGd,EAAGO,EAAGC,GAC/B,OAAOL,OAAOU,GAAKP,GAAKQ,GAAIT,EAAGC,EAAGN,EAAGO,EAAGC,GAU1C,SAASU,QAAQlB,EAAGmB,GAKlB,IAAIC,EACAC,EACAC,EACAC,EACAC,EAPJxB,EAAEmB,GAAO,IAAM,KAAQA,EAAM,GAC7BnB,EAA8B,IAAzBmB,EAAM,KAAQ,GAAM,IAAWA,EAOpC,IAAId,EAAI,WACJC,GAAK,UACLO,GAAK,WACLC,EAAI,UAER,IAAKM,EAAI,EAAGA,EAAIpB,EAAEyB,OAAQL,GAAK,GAC7BC,EAAOhB,EACPiB,EAAOhB,EACPiB,EAAOV,EACPW,EAAOV,EAEPT,EAAIO,MAAMP,EAAGC,EAAGO,EAAGC,EAAGd,EAAEoB,GAAI,GAAI,WAChCN,EAAIF,MAAME,EAAGT,EAAGC,EAAGO,EAAGb,EAAEoB,EAAI,GAAI,IAAK,WACrCP,EAAID,MAAMC,EAAGC,EAAGT,EAAGC,EAAGN,EAAEoB,EAAI,GAAI,GAAI,WACpCd,EAAIM,MAAMN,EAAGO,EAAGC,EAAGT,EAAGL,EAAEoB,EAAI,GAAI,IAAK,YACrCf,EAAIO,MAAMP,EAAGC,EAAGO,EAAGC,EAAGd,EAAEoB,EAAI,GAAI,GAAI,WACpCN,EAAIF,MAAME,EAAGT,EAAGC,EAAGO,EAAGb,EAAEoB,EAAI,GAAI,GAAI,YACpCP,EAAID,MAAMC,EAAGC,EAAGT,EAAGC,EAAGN,EAAEoB,EAAI,GAAI,IAAK,YACrCd,EAAIM,MAAMN,EAAGO,EAAGC,EAAGT,EAAGL,EAAEoB,EAAI,GAAI,IAAK,UACrCf,EAAIO,MAAMP,EAAGC,EAAGO,EAAGC,EAAGd,EAAEoB,EAAI,GAAI,EAAG,YACnCN,EAAIF,MAAME,EAAGT,EAAGC,EAAGO,EAAGb,EAAEoB,EAAI,GAAI,IAAK,YACrCP,EAAID,MAAMC,EAAGC,EAAGT,EAAGC,EAAGN,EAAEoB,EAAI,IAAK,IAAK,OACtCd,EAAIM,MAAMN,EAAGO,EAAGC,EAAGT,EAAGL,EAAEoB,EAAI,IAAK,IAAK,YACtCf,EAAIO,MAAMP,EAAGC,EAAGO,EAAGC,EAAGd,EAAEoB,EAAI,IAAK,EAAG,YACpCN,EAAIF,MAAME,EAAGT,EAAGC,EAAGO,EAAGb,EAAEoB,EAAI,IAAK,IAAK,UACtCP,EAAID,MAAMC,EAAGC,EAAGT,EAAGC,EAAGN,EAAEoB,EAAI,IAAK,IAAK,YAGtCf,EAAIU,MAAMV,EAFVC,EAAIM,MAAMN,EAAGO,EAAGC,EAAGT,EAAGL,EAAEoB,EAAI,IAAK,GAAI,YAErBP,EAAGC,EAAGd,EAAEoB,EAAI,GAAI,GAAI,WACpCN,EAAIC,MAAMD,EAAGT,EAAGC,EAAGO,EAAGb,EAAEoB,EAAI,GAAI,GAAI,YACpCP,EAAIE,MAAMF,EAAGC,EAAGT,EAAGC,EAAGN,EAAEoB,EAAI,IAAK,GAAI,WACrCd,EAAIS,MAAMT,EAAGO,EAAGC,EAAGT,EAAGL,EAAEoB,GAAI,IAAK,WACjCf,EAAIU,MAAMV,EAAGC,EAAGO,EAAGC,EAAGd,EAAEoB,EAAI,GAAI,GAAI,WACpCN,EAAIC,MAAMD,EAAGT,EAAGC,EAAGO,EAAGb,EAAEoB,EAAI,IAAK,EAAG,UACpCP,EAAIE,MAAMF,EAAGC,EAAGT,EAAGC,EAAGN,EAAEoB,EAAI,IAAK,IAAK,WACtCd,EAAIS,MAAMT,EAAGO,EAAGC,EAAGT,EAAGL,EAAEoB,EAAI,GAAI,IAAK,WACrCf,EAAIU,MAAMV,EAAGC,EAAGO,EAAGC,EAAGd,EAAEoB,EAAI,GAAI,EAAG,WACnCN,EAAIC,MAAMD,EAAGT,EAAGC,EAAGO,EAAGb,EAAEoB,EAAI,IAAK,GAAI,YACrCP,EAAIE,MAAMF,EAAGC,EAAGT,EAAGC,EAAGN,EAAEoB,EAAI,GAAI,IAAK,WACrCd,EAAIS,MAAMT,EAAGO,EAAGC,EAAGT,EAAGL,EAAEoB,EAAI,GAAI,GAAI,YACpCf,EAAIU,MAAMV,EAAGC,EAAGO,EAAGC,EAAGd,EAAEoB,EAAI,IAAK,GAAI,YACrCN,EAAIC,MAAMD,EAAGT,EAAGC,EAAGO,EAAGb,EAAEoB,EAAI,GAAI,GAAI,UACpCP,EAAIE,MAAMF,EAAGC,EAAGT,EAAGC,EAAGN,EAAEoB,EAAI,GAAI,GAAI,YAGpCf,EAAIW,MAAMX,EAFVC,EAAIS,MAAMT,EAAGO,EAAGC,EAAGT,EAAGL,EAAEoB,EAAI,IAAK,IAAK,YAEtBP,EAAGC,EAAGd,EAAEoB,EAAI,GAAI,GAAI,QACpCN,EAAIE,MAAMF,EAAGT,EAAGC,EAAGO,EAAGb,EAAEoB,EAAI,GAAI,IAAK,YACrCP,EAAIG,MAAMH,EAAGC,EAAGT,EAAGC,EAAGN,EAAEoB,EAAI,IAAK,GAAI,YACrCd,EAAIU,MAAMV,EAAGO,EAAGC,EAAGT,EAAGL,EAAEoB,EAAI,IAAK,IAAK,UACtCf,EAAIW,MAAMX,EAAGC,EAAGO,EAAGC,EAAGd,EAAEoB,EAAI,GAAI,GAAI,YACpCN,EAAIE,MAAMF,EAAGT,EAAGC,EAAGO,EAAGb,EAAEoB,EAAI,GAAI,GAAI,YACpCP,EAAIG,MAAMH,EAAGC,EAAGT,EAAGC,EAAGN,EAAEoB,EAAI,GAAI,IAAK,WACrCd,EAAIU,MAAMV,EAAGO,EAAGC,EAAGT,EAAGL,EAAEoB,EAAI,IAAK,IAAK,YACtCf,EAAIW,MAAMX,EAAGC,EAAGO,EAAGC,EAAGd,EAAEoB,EAAI,IAAK,EAAG,WACpCN,EAAIE,MAAMF,EAAGT,EAAGC,EAAGO,EAAGb,EAAEoB,GAAI,IAAK,WACjCP,EAAIG,MAAMH,EAAGC,EAAGT,EAAGC,EAAGN,EAAEoB,EAAI,GAAI,IAAK,WACrCd,EAAIU,MAAMV,EAAGO,EAAGC,EAAGT,EAAGL,EAAEoB,EAAI,GAAI,GAAI,UACpCf,EAAIW,MAAMX,EAAGC,EAAGO,EAAGC,EAAGd,EAAEoB,EAAI,GAAI,GAAI,WACpCN,EAAIE,MAAMF,EAAGT,EAAGC,EAAGO,EAAGb,EAAEoB,EAAI,IAAK,IAAK,WACtCP,EAAIG,MAAMH,EAAGC,EAAGT,EAAGC,EAAGN,EAAEoB,EAAI,IAAK,GAAI,WAGrCf,EAAIY,MAAMZ,EAFVC,EAAIU,MAAMV,EAAGO,EAAGC,EAAGT,EAAGL,EAAEoB,EAAI,GAAI,IAAK,WAErBP,EAAGC,EAAGd,EAAEoB,GAAI,GAAI,WAChCN,EAAIG,MAAMH,EAAGT,EAAGC,EAAGO,EAAGb,EAAEoB,EAAI,GAAI,GAAI,YACpCP,EAAII,MAAMJ,EAAGC,EAAGT,EAAGC,EAAGN,EAAEoB,EAAI,IAAK,IAAK,YACtCd,EAAIW,MAAMX,EAAGO,EAAGC,EAAGT,EAAGL,EAAEoB,EAAI,GAAI,IAAK,UACrCf,EAAIY,MAAMZ,EAAGC,EAAGO,EAAGC,EAAGd,EAAEoB,EAAI,IAAK,EAAG,YACpCN,EAAIG,MAAMH,EAAGT,EAAGC,EAAGO,EAAGb,EAAEoB,EAAI,GAAI,IAAK,YACrCP,EAAII,MAAMJ,EAAGC,EAAGT,EAAGC,EAAGN,EAAEoB,EAAI,IAAK,IAAK,SACtCd,EAAIW,MAAMX,EAAGO,EAAGC,EAAGT,EAAGL,EAAEoB,EAAI,GAAI,IAAK,YACrCf,EAAIY,MAAMZ,EAAGC,EAAGO,EAAGC,EAAGd,EAAEoB,EAAI,GAAI,EAAG,YACnCN,EAAIG,MAAMH,EAAGT,EAAGC,EAAGO,EAAGb,EAAEoB,EAAI,IAAK,IAAK,UACtCP,EAAII,MAAMJ,EAAGC,EAAGT,EAAGC,EAAGN,EAAEoB,EAAI,GAAI,IAAK,YACrCd,EAAIW,MAAMX,EAAGO,EAAGC,EAAGT,EAAGL,EAAEoB,EAAI,IAAK,GAAI,YACrCf,EAAIY,MAAMZ,EAAGC,EAAGO,EAAGC,EAAGd,EAAEoB,EAAI,GAAI,GAAI,WACpCN,EAAIG,MAAMH,EAAGT,EAAGC,EAAGO,EAAGb,EAAEoB,EAAI,IAAK,IAAK,YACtCP,EAAII,MAAMJ,EAAGC,EAAGT,EAAGC,EAAGN,EAAEoB,EAAI,GAAI,GAAI,WACpCd,EAAIW,MAAMX,EAAGO,EAAGC,EAAGT,EAAGL,EAAEoB,EAAI,GAAI,IAAK,WAErCf,EAAIN,QAAQM,EAAGgB,GACff,EAAIP,QAAQO,EAAGgB,GACfT,EAAId,QAAQc,EAAGU,GACfT,EAAIf,QAAQe,EAAGU,GAEjB,MAAO,CAACnB,EAAGC,EAAGO,EAAGC,GASnB,SAASY,UAAUC,GACjB,IAAIP,EACAQ,EAAS,GACTC,EAA0B,GAAfF,EAAMF,OACrB,IAAKL,EAAI,EAAGA,EAAIS,EAAUT,GAAK,EAC7BQ,GAAUE,OAAOC,aAAcJ,EAAMP,GAAK,KAAOA,EAAI,GAAM,KAE7D,OAAOQ,EAUT,SAASI,UAAUL,GACjB,IAAIP,EACAQ,EAAS,GAEb,IADAA,GAAQD,EAAMF,QAAU,GAAK,QAAKQ,EAC7Bb,EAAI,EAAGA,EAAIQ,EAAOH,OAAQL,GAAK,EAClCQ,EAAOR,GAAK,EAEd,IAAIc,EAAyB,EAAfP,EAAMF,OACpB,IAAKL,EAAI,EAAGA,EAAIc,EAASd,GAAK,EAC5BQ,EAAOR,GAAK,KAAiC,IAA1BO,EAAMQ,WAAWf,EAAI,KAAcA,EAAI,GAE5D,OAAOQ,EA4CT,SAASQ,SAAST,GAChB,IAEI3B,EACAoB,EAHAiB,EAAS,mBACTT,EAAS,GAGb,IAAKR,EAAI,EAAGA,EAAIO,EAAMF,OAAQL,GAAK,EACjCpB,EAAI2B,EAAMQ,WAAWf,GACrBQ,GAAUS,EAAOC,OAAQtC,IAAM,EAAK,IAAQqC,EAAOC,OAAW,GAAJtC,GAE5D,OAAO4B,EAST,SAASW,aAAaZ,GACpB,OAAOa,SAASC,mBAAmBd,IASrC,SAASe,OAAOnC,GACd,OAhEF,SAASoC,QAAQpC,GACf,OAAOmB,UAAUR,QAAQc,UAAUzB,GAAe,EAAXA,EAAEkB,SA+DlCkB,CAAQJ,aAAahC,IAkB9B,SAASqC,WAAWC,EAAG/B,GACrB,OAxEF,SAASgC,YAAYC,EAAKC,GACxB,IAAI5B,EAIA6B,EAHAC,EAAOlB,UAAUe,GACjBI,EAAO,GACPC,EAAO,GAMX,IAJAD,EAAK,IAAMC,EAAK,SAAMnB,EAClBiB,EAAKzB,OAAS,KAChByB,EAAOhC,QAAQgC,EAAmB,EAAbH,EAAItB,SAEtBL,EAAI,EAAGA,EAAI,GAAIA,GAAK,EACvB+B,EAAK/B,GAAe,UAAV8B,EAAK9B,GACfgC,EAAKhC,GAAe,WAAV8B,EAAK9B,GAGjB,OADA6B,EAAO/B,QAAQiC,EAAKE,OAAOrB,UAAUgB,IAAQ,IAAoB,EAAdA,EAAKvB,QACjDC,UAAUR,QAAQkC,EAAKC,OAAOJ,GAAO,MAyDrCH,CAAYP,aAAaM,GAAIN,aAAazB,IAuBnD,SAASwC,IAAIC,EAAQR,EAAKS,GACxB,OAAKT,EAMAS,EAGEZ,WAAWG,EAAKQ,GAxBzB,SAASE,WAAWZ,EAAG/B,GACrB,OAAOsB,SAASQ,WAAWC,EAAG/B,IAqBrB2C,CAAWV,EAAKQ,GANlBC,EAGEd,OAAOa,GAvClB,SAASG,OAAOnD,GACd,OAAO6B,SAASM,OAAOnC,IAoCZmD,CAAOH,GAcqBI,EAAOC,QAC9CD,UAAiBL,IAEjBxD,EAAEwD,IAAMA,IAxXX,CA0XEO,MC/WUC,EAAUC,EAKVC,EAAc,KAKhBC,EAAU,CAEpBC,IAAKC,WAAW,WAEhBC,KAAMD,WAAW,YAEjBE,KAAMF,WAAW,YAEjBG,KAAMH,WAAW,YAEjBI,OAAQJ,WAAW,cAEnBK,SAAUL,WAAW,gBAErBM,GAAIN,WAAW,UAEfO,GAAIP,WAAW,UAEfQ,GAAIR,WAAW,UAEfS,GAAIT,WAAW,UAEfU,GAAIV,WAAW,UAEfW,GAAIX,WAAW,UAEfY,IAAKZ,WAAW,WAEhBa,IAAKb,WAAW,WAEhBc,IAAKd,WAAW,WAEhBe,KAAMf,WAAW,YAEjBgB,IAAKhB,WAAW,WAEhBiB,KAAMjB,WAAW,YAEjBkB,IAAKlB,WAAW,WAEhBmB,KAAMnB,WAAW,YAEjBoB,QAASpB,WAAW,eAEpBqB,SAAUrB,WAAW,gBAErBsB,SAAUtB,WAAW,gBAErBuB,UAAWvB,WAAW,iBAEtBwB,QAASxB,WAAW,eAEpByB,QAASzB,WAAW,eAEpB0B,QAAS1B,WAAW,eAEpB2B,QAAS3B,WAAW,eAEpB4B,KAAM5B,WAAW,aAKX,SAAS6B,OAAOC,EAAGC,EAAWC,UAEpCA,EAAUA,GAAW,IACTC,OACXH,EAAEI,UAAYF,EAAQC,MAE2B,mBAA9CE,OAAOC,UAAUC,SAASlC,KAAK4B,KAClCA,aAAgBO,sBAAaP,KAC9BD,EAAES,eAAiBR,EACnBD,EAAEU,iBAAmBR,EAAQS,cAAe,EAC5CX,EAAEY,kBAAoBV,EAAQW,eAAgB,EACvCb,EAOR,IAAIc,EAAU,EAQDC,gEAINC,OAASF,oCAId9C,EAAQQ,SAAT,eAAayC,UAELrD,OAASqD,SAKhBjD,EAAQS,SAAT,eAAawC,UAEJrD,KAAKI,EAAQQ,IAAIyC,UAOzBjD,EAAQI,WAAT,wBAEQ,eAQIoC,mCAAkBO,8GAKxBG,YAAc,KACdC,aAAe,KACfC,SAAW,IACXC,YAAc,IACdC,WAAa,IACbC,cAAgB,IAChBC,QAAU,IACVC,WAAa,IACbC,OAAS,OACTC,MAAQ,aAETC,EAAQ,EACRzB,EAAO,KACPL,EAAO,wBAhBG+B,2BAAAA,gCAiBIA,iBAClB,KADSC,OAEK,GAATF,GAEHzB,EAAO2B,EACPF,EAAQ,GAES,GAATA,GAER9B,EAAOgC,GACEC,SAAS,KACjBH,EAAQ,KAGH5C,IAAImB,EAAML,EAAM,MACrB8B,EAAQ,MAKJ5C,IAAImB,EAAML,EAAMgC,GACrBF,EAAQ,4DAMX,aAAIzB,EAAML,EAAMkC,OAEXC,EAAMrE,KAAKsD,YAAY1F,OACP,OAAhBoC,KAAK8D,UACNO,EACgB,OAAfrE,KAAK+D,SACNM,MACCC,EAAQ,CAAC/B,KAAMA,EAAM8B,IAAKA,EAAKnC,KAAMA,EAAMkC,aAAcA,UACrDlC,OAEF,OACAlC,KAAKyD,YAAc,GAAKzD,KAAK2D,cAAgB,GAAK3D,KAAK6D,WAAa,EACvE,MAAM,IAAIU,GAAe,0DACrB,GAAIvE,KAAK0D,WAAa,GAAK1D,KAAK2D,cAAgB,EACpD,MAAM,IAAIY,GAAe,gEACrB,GAAIvE,KAAK4D,QAAU,GAAK5D,KAAK6D,WAAa,EAC9C,MAAM,IAAIU,GAAe,0DACrB,GAAoB,OAAhBvE,KAAK8D,OACb,MAAM,IAAIS,GAAe,+CACrB,GAAmB,OAAfvE,KAAK+D,MACb,MAAM,IAAIQ,GAAe,qDACrBjB,YAAYkB,KAAKF,QACjBf,aAAahB,GAAQ+B,IACxBtE,KAAKwD,mBAEH,QACAxD,KAAK0D,WAAa,GAAK1D,KAAK2D,cAAgB,EAC/C,MAAM,IAAIY,GAAe,gEACrB,GAAIvE,KAAK4D,QAAU,GAAK5D,KAAK6D,WAAa,EAC9C,MAAM,IAAIU,GAAe,0DACrB,GAAoB,OAAhBvE,KAAK8D,OACb,MAAM,IAAIS,GAAe,+CACrB,GAAmB,OAAfvE,KAAK+D,MACb,MAAM,IAAIQ,GAAe,qDACrBjB,YAAYkB,KAAKF,QACjBf,aAAahB,GAAQ+B,IACxBtE,KAAKyD,sBAEH,QACAzD,KAAKyD,YAAc,GAAKzD,KAAK2D,cAAgB,GAAK3D,KAAK6D,WAAa,EACvE,MAAM,IAAIU,GAAe,0DACrB,GAAIvE,KAAK4D,QAAU,GAAK5D,KAAK6D,WAAa,EAC9C,MAAM,IAAIU,GAAe,6DACrB,GAAoB,OAAhBvE,KAAK8D,OACb,MAAM,IAAIS,GAAe,kDACrB,GAAmB,OAAfvE,KAAK+D,MACb,MAAM,IAAIQ,GAAe,wDACrBjB,YAAYkB,KAAKF,QACjBf,aAAahB,GAAQ+B,IACxBtE,KAAK0D,qBAEH,SACA1D,KAAK4D,QAAU,GAAK5D,KAAK6D,WAAa,EACzC,MAAM,IAAIU,GAAe,6DACrB,GAAoB,OAAhBvE,KAAK8D,OACb,MAAM,IAAIS,GAAe,kDACrB,GAAmB,OAAfvE,KAAK+D,MACb,MAAM,IAAIQ,GAAe,wDACrBjB,YAAYkB,KAAKF,QACjBf,aAAahB,GAAQ+B,IACxBtE,KAAK2D,wBAEH,OACA3D,KAAKyD,YAAc,GAAKzD,KAAK2D,cAAgB,GAAK3D,KAAK6D,WAAa,EACvE,MAAM,IAAIU,GAAe,0DACrB,GAAoB,OAAhBvE,KAAK8D,OACb,MAAM,IAAIS,GAAe,4CACrB,GAAmB,OAAfvE,KAAK+D,MACb,MAAM,IAAIQ,GAAe,kDACrBjB,YAAYkB,KAAKF,QACjBf,aAAahB,GAAQ+B,IACxBtE,KAAK4D,kBAEH,QACgB,OAAhB5D,KAAK8D,OACR,MAAM,IAAIS,GAAe,4CACrB,GAAmB,OAAfvE,KAAK+D,MACb,MAAM,IAAIQ,GAAe,kDACrBjB,YAAYkB,KAAKF,QACjBf,aAAahB,GAAQ+B,IACxBtE,KAAK6D,qBAEH,OACgB,OAAhB7D,KAAK8D,OACR,MAAM,IAAIS,GAAe,gCACrB,GAAmB,OAAfvE,KAAK+D,MACb,MAAM,IAAIQ,GAAe,iDACrBT,OAASQ,YAEV,QACe,OAAftE,KAAK+D,MACR,MAAM,IAAIQ,GAAe,sCACrBR,MAAQO,4BAMhB,mBAAU/B,EAAMkC,EAAMC,OAIjBZ,EAAwB,MAAf9D,KAAK8D,OAAiB,GAAK,KACpCC,EAAsB,MAAd/D,KAAK+D,MAAgB,IAAIY,IAAQ,KAEzCC,EAAQ5E,KAAKwD,SAAWxD,KAAKyD,YAAczD,KAAK0D,WAAa1D,KAAK2D,cAAgB3D,KAAK4D,QAAU5D,KAAK6D,WACtGgB,EAAYC,MAAMF,GAAOG,KAAK,MAC9BC,EAAaF,MAAMF,GAAOG,MAAK,MAGtB,OAATN,EACJ,OACKlH,EAAI,+BACQkH,kCAChB,KADSQ,UAEJX,EAAQtE,KAAKsD,YAAY/F,WACfa,IAAVkG,GAAuBA,EAAMpC,KAAKgD,QAAQ,MAAQ,EAErDL,EAAUtH,GAAK0H,EACfD,EAAWzH,IAAK,MAGjB,IACgB,OAAXuG,EAGJ,KACKqB,EAAcnF,KAAKwD,SAAWxD,KAAK0D,WACnC0B,EAAYpF,KAAKyD,YAAczD,KAAK2D,oBAEjC,IAAI0B,GADM,GAAbD,EACqB7C,EAAO,oBAAsB4C,EAAc,wBAAyC,GAAfA,EAAmB,IAAM,IAAM,KAAOV,EAAK7G,OAAS,SAEzH2E,EAAO,qBAAuB4C,EAAcC,GAAa,wBAA2BD,EAAcC,GAAc,EAAI,IAAM,IAAM,KAAOX,EAAK7G,OAAS,UAR9KkG,EAAOU,KAAKS,KAWZ1H,qCAKW,OAAXmH,gBAE6BjC,OAAO6C,QAAQZ,kBAC/C,8BADUa,OAASC,OAEdlB,EAAQtE,KAAKuD,aAAagC,WAEhBnH,IAAVkG,GAAuBA,EAAMpC,KAAKgD,QAAQ,MAAQ,EACtD,IACKF,EAAWV,EAAMD,KACpB,MAAM,IAAIgB,GAAc,8BAAgCI,OAAMF,GAAW,QAAUhD,EAAO,MAC3FsC,EAAUP,EAAMD,KAAOmB,EACvBR,EAAWV,EAAMD,MAAO,MAGzB,IACe,OAAVN,EAOH,MAAM,IAAIsB,GAAc9C,EAAO,wCAA0CkD,OAAMF,OAL3ExB,EAAM2B,IAAIH,GACb,MAAM,IAAIF,GAAc,8BAAgCI,OAAMF,GAAW,QAAUhD,EAAO,MAC3FwB,EAAM4B,IAAIJ,EAASC,UASnBjI,EAAI,+BACUyC,KAAKsD,4CACvB,KADSgB,cAEHU,EAAWzH,GAChB,KACK+G,EAAMpC,KAAKiC,SAAS,KAMvB,MAAM,IAAIkB,GAAc,YAAc9C,EAAO,eAAiB+B,EAAM/B,KAAO,cAAgB+B,EAAMD,IAAM,aAJvGQ,EAAUtH,GAAK+G,EAAMF,aACrBY,EAAWzH,IAAK,IAKhBA,wCAIY,OAAXuG,GACHe,EAAUL,KAAKV,GACF,OAAVC,GACHc,EAAUL,KAAKT,GAETc,4BAIR,oBAAWtC,EAAMkC,EAAMC,GAEtBD,EAAOzE,KAAK4F,UAAUrD,EAAMkC,EAAMC,SAC9BmB,EAAY,GACZtI,EAAI,+BACUyC,KAAKsD,6CACtBuC,UAAgBtD,MAAQkC,EAAKlH,2CACV,OAAhByC,KAAK8D,SACR+B,EAAU7F,KAAK8D,OAAOvB,MAAQkC,EAAKlH,MACjB,OAAfyC,KAAK+D,QACR8B,EAAU7F,KAAK+D,MAAMxB,MAAQkC,EAAKlH,MAC5BsI,SAGPzF,EAAQG,WAAT,uBAEQ,cAAgBP,KAAK2C,WAAa,WAGzCvC,EAAQC,UAAT,wBAEQL,KAAK2C,uCAGb,sBAAamD,EAAQC,EAAUzB,OAE1B0B,EAEHA,EADgB,OAAbD,EACG,CAAC,IAAK,MAAME,SAAS3B,EAAMpC,MAAQ,MAAQ,GACzC,CAAC,KAAM,OAAO+D,SAASF,GACzB,CAAC,IAAK,MAAME,SAAS3B,EAAMpC,MAAQ,QAAU,KAC3C,CAAC,IAAK,MAAM+D,SAASF,GAEzB,CAAC,KAAM,OAAOE,SAAS3B,EAAMpC,MAC1B,QACE,CAAC,IAAK,MAAM+D,SAAS3B,EAAMpC,MAC7B,WAEA,KAGD,KACP6D,EAAWzB,EAAMpC,KACjB4D,EAAOtB,KAAKwB,GACR,CAAC,IAAK,MAAMC,SAAS3B,EAAMpC,OAC9B4D,EAAOtB,KAAKF,EAAMpC,MACnB4D,EAAOtB,KAAKF,EAAM/B,MACd+B,EAAMpC,KAAKiC,SAAS,MAEvB2B,EAAOtB,KAAK,IAAKiB,OAAMnB,EAAMF,uCAI/B,0BAEK8B,EAAI,GACJH,EAAW,kCACG/F,KAAKsD,4CACvB,KADSgB,eAEH6B,aAAaD,EAAGH,EAAUzB,GAC/ByB,EAAWzB,EAAMpC,2CAEE,OAAhBlC,KAAK8D,cAEHqC,aAAaD,EAAGH,EAAU/F,KAAK8D,QACpCiC,EAAW/F,KAAK8D,OAAO5B,MAEL,OAAflC,KAAK+D,aAEHoC,aAAaD,EAAGH,EAAU/F,KAAK+D,OACpCgC,EAAW/F,KAAK+D,MAAM7B,MAEhB,IAAMgE,EAAEE,KAAK,IAAM,qBASfC,4BAEAvG,EAAQyC,EAAM+D,mCAEpBxG,OAASA,OACTyC,KAAOA,OACP+D,IAAMA,OACNC,aAAeC,2CAGpBpG,EAAQ0B,cAAT,eAAkB2E,UAETA,OAEF,oBACGzG,KAAKF,WACR,kBACGE,KAAKuC,SACR,iBACGvC,KAAKsG,kBAEN,IAAII,GAAe1G,KAAMyG,WAIjCrG,EAAQG,WAAT,wBAEQP,KAAK2C,mCAGb,0BAEQ,SAAW3C,KAAK2G,WAAa,4BAGrC,2BAEqB,OAAhB3G,KAAKF,OACDE,KAAKuC,KAELvC,KAAKF,OAAS,IAAME,KAAKuC,wBAGlC,sBAEQvC,KAAK4G,6BAGb,iBAAQC,EAAKJ,MAEQ,WAAhBK,QAAOD,IAAsD,mBAA1BA,EAAIzG,EAAQ0B,SAClD,OAAO+E,EAAIzG,EAAQ0B,SAAS2E,GACxB,GAAIzG,KAAK4G,MAAMlB,IAAIe,GACxB,KACKM,EAAO/G,KAAKyG,GACZO,EAAW,SAASA,sCAAYvC,2BAAAA,yBAC5BsC,EAAKE,MAAMjH,MAAO6G,UAAQpC,YAGlCuC,EAASxE,UAAYuE,EAAKvE,WAAauE,EAAKxE,KAC5CyE,EAASnE,eAAiBkE,EAAKlE,eAC/BmE,EAASlE,iBAAmBiE,EAAKjE,iBACjCkE,EAAShE,kBAAoB+D,EAAK/D,kBAC3BgE,EAGP,MAAM,IAAIN,GAAeG,EAAKJ,0BAGhC,iBAAQI,EAAKJ,MAEQ,WAAhBK,QAAOD,IAAsD,mBAA1BA,EAAIzG,EAAQ0B,SAgBlD,OAAO9B,KAAK4G,MAAMlB,IAAIe,cAZrBI,EAAIzG,EAAQ0B,SAAS2E,IACd,EAER,MAAOS,MAEFA,aAAeR,IAAkBQ,EAAIL,MAAQM,OAChD,OAAO,EAEP,MAAMD,eAQXb,GAAK3D,UAAUkE,MAAQ,IAAIQ,IAO3B,IAAMC,GAAY,GAGX,SAASC,SAAS/E,EAAMH,GAE9BA,EAAEM,UAAU6E,UAAYhF,EACxB8E,GAAU9E,GAAQH,EAIZ,SAASoF,MAAMX,OAAKY,yDAAO,KAE7BC,EAAU,IAAIC,GAAQF,GACtB1J,EAAS,UACb2J,EAAQE,KAAKf,EAAK9I,GACXA,EAAOqI,KAAK,IAMb,SAASyB,QAAMD,OAAME,yDAAS,KAEhCC,EAAU,IAAIC,GAAQF,UACnBC,EAAQF,MAAMD,OAGTK,qCAAoB5B,kKAE/BjG,EAAQK,WAAT,qBAAegH,yDAAO,YAEd,IAAIE,GAAQF,gCAGpB,uBAAcZ,UAENA,aAAec,sBAIxBxF,OAAO8F,GAAYvF,UAAW,CAAC,SAAU,MAAO,MAAO,CAACH,KAAM,YAE9D,IAAI2F,GAAc,IAAID,GAAY,QAAS,UAAW,oBAGzCN,qCAGAF,yDAAO,wCAEbA,OAASA,OACT1J,OAAS,UACToK,OAAS,OACTC,eAAiB,QACjBC,WAAa,QACbC,UAAY,oCAGjBlI,EAAQ8B,WAAT,wBAEQgG,wBAGR,eAAMK,MAEe,OAAhBvI,KAAKyH,WAEH,IAAIlK,EAAI,EAAGA,EAAIyC,KAAKmI,SAAU5K,OAC7BQ,OAAOyG,KAAKxE,KAAKyH,aAInBzH,KAAKjC,OAAOH,QACfoC,KAAKjC,OAAOyG,KAAK,UAEdzG,OAAOyG,KAAK+D,8BAZH9D,mCAAAA,uBAcVA,EAAK7G,OACT,KACK4K,EAAYxI,KAAKyH,YAChBA,OAAS,wCACEhD,uCAAPQ,eACH2C,KAAK3C,uCACNwC,OAASe,EAGK,OAAhBxI,KAAKyH,QACRzH,KAAKjC,OAAOyG,KAAK,2BAGnB,eAAMqC,OAED9I,EAAS,eACR6J,KAAKf,EAAK9I,GACRA,EAAOqI,KAAK,wBAGpB,cAAKS,OAAK9I,yDAAO,QAED,OAAXA,SAEEoK,OAAS,OACTpK,OAASA,GAEH,OAAR8I,EACH7G,KAAKyI,MAAM,UACP,GAAoB,kBAAT5B,EACf7G,KAAKyI,MAAM5B,EAAM,KAAO,WACpB,GAAoB,iBAATA,EAChB,KACK3E,EAAQwG,KAAKC,MAAM9B,IAAQA,EAAO,IAAM,SACvC4B,MAAMvG,EAAO2E,QAEd,GAAoB,iBAATA,EAChB,KACK+B,EAAQ5I,KAAKoI,eAAevB,WAClBzI,IAAVwK,OAEEH,MAAM,IAAMG,OAGlB,MACMR,eAAevB,GAAO7G,KAAKsI,gBAC5BV,KAAOiB,UAAUhC,GAAKiC,QAAQ,IAAK,cAClCL,MAAM,IAAMb,YAGd,GAAImB,SAASlC,GACjB7G,KAAKyI,MAAM,IAAK5B,EAAImC,IAAKnC,EAAIoC,IAAKpC,EAAIpK,IAAKoK,EAAIrK,UAC3C,GAAI0M,QAAQrC,GAChB7G,KAAKyI,MAAM,IAAK5B,EAAIsC,OAAQtC,EAAIuC,QAASvC,EAAIwC,YACzC,GAAIC,YAAYzC,GACpB7G,KAAKyI,MAAM,IAAK5B,EAAI0C,cAAe1C,EAAI2C,WAAW,EAAG3C,EAAI4C,UAAW5C,EAAI6C,WAAY7C,EAAI8C,aAAc9C,EAAI+C,aAAsC,IAAxB/C,EAAIgD,wBACxH,GAAIC,aAAajD,GACrB7G,KAAKyI,MAAM,IAAK5B,EAAIkD,OAAQlD,EAAImD,UAAWnD,EAAIoD,qBAC3C,GAAIC,cAAcrD,GACtB7G,KAAKyI,MAAM,IAAK5B,EAAIsD,eAChB,GAAItD,aAAeuD,GACvBpK,KAAKyI,MAAM,IAAK5B,EAAIwD,MAAOxD,EAAIyD,WAC3B,GAAIzD,EAAIU,WAAaV,EAAI0D,UAC9B,IACK1D,EAAIzD,OACR,KACKwF,EAAQ5I,KAAKqI,WAAWxB,EAAIzD,gBAClBhF,IAAVwK,mBAEEH,MAAM,IAAMG,QAGbP,WAAWxB,EAAIzD,QAAUpD,KAAKsI,YAEhCzB,EAAI2D,QACPxK,KAAKyI,MAAM,IAAK5B,EAAIU,UAAWV,EAAI2D,SAEnCxK,KAAKyI,MAAM,IAAK5B,EAAIU,aACnBvH,KAAKmI,OACPtB,EAAI0D,UAAUvK,QACZA,KAAKmI,YACFM,MAAM,UAEP,GAAIgC,QAAQ5D,GACjB,MACM4B,MAAM,OACTzI,KAAKmI,0CACUtB,uCAAR6D,eACH9C,KAAK8C,oCACT1K,KAAKmI,YACFM,MAAM,UAEP,GAAIkC,OAAO9D,GAChB,MACM4B,MAAM,OACTzI,KAAKmI,0CACkBtB,kCACzB,iCADU3H,OAAKgF,YAET0D,KAAK1I,QACL0I,KAAK1D,oCAETlE,KAAKmI,YACFM,MAAM,UAEP,GAAImC,QAAQ/D,GACjB,KAGM,IAAI3H,UAFJuJ,MAAM,OACTzI,KAAKmI,OACStB,OAEVe,KAAK1I,QACL0I,KAAKf,EAAI3H,MAEbc,KAAKmI,YACFM,MAAM,SAEP,CAAA,IAAIoC,OAAOhE,GAUf,MAAM,IAAIiE,GAAW,qCAAuCrF,OAAMoB,SAR7D4B,MAAM,OACTzI,KAAKmI,0CACWtB,uCAAT3C,eACH0D,KAAK1D,oCACTlE,KAAKmI,YACFM,MAAM,KAIG,OAAX1K,SAEEA,OAAS,aAIfqC,EAAQ0B,cAAT,eAAkB2E,UAGTA,OAEF,YACAe,EAAQxH,KAAKwH,MAAMuD,KAAK/K,aAC5BmC,OAAOqF,EAAO,CAAC,MAAO,OACfA,gBAED,IAAIwD,IAAItE,eAAe1G,KAAMyG,mBAK1BwE,qCAAoB5E,kKAE/BjG,EAAQK,WAAT,wBAEQ,IAAIuH,gCAGZ,uBAAcnB,UAENA,aAAemB,sBAIxB7F,OAAO8I,GAAYvI,UAAW,GAAI,CAACH,KAAM,YAEzC,IAAI2I,GAAc,IAAID,GAAY,QAAS,UAAW,oBAGzCjD,+BAGAF,sCAENhK,MAAQ,UACRuG,IAAM,OACN8G,SAAW,QACXrD,cAAwB1J,IAAb0J,EAAyB,KAAOA,OAC3CsD,mBAAqB,QACrBC,MAAQ,uCAGbjL,EAAQ8B,WAAT,wBAEQgJ,2BAIR,uBAEKlL,KAAKqE,KAAOrE,KAAKlC,MAAMF,OAC1B,MAAM,IAAIkN,GAAW,6BACf9K,KAAKlC,MAAMW,OAAOuB,KAAKqE,oCAI/B,gCAEKrE,KAAKqE,KAAOrE,KAAKlC,MAAMF,OACnB,KACDoC,KAAKlC,MAAMW,OAAOuB,KAAKqE,oCAI/B,iCAEKiH,EAAW,OAGf,IACKtL,KAAKqE,KAAOrE,KAAKlC,MAAMF,OAC1B,MAAM,IAAIkN,GAAW,kCAAoC9K,KAAKqE,IAAM,cAAgBrE,KAAKqL,MAAMjF,KAAK,UACjGpJ,EAAIgD,KAAKlC,MAAMW,OAAOuB,KAAKqE,WAC1BrH,EAAEuO,MAAMD,GACZ,OAAOtO,uBAKV,cAAKwO,GAEAxL,KAAKqE,IAAImH,EAAOxL,KAAKlC,MAAMF,SAC9B4N,EAAOxL,KAAKlC,MAAMF,OAAOoC,KAAKqE,SAC3BoH,EAASzL,KAAKlC,MAAM4N,UAAU1L,KAAKqE,IAAKrE,KAAKqE,IAAImH,eAChDnH,KAAOmH,EACLC,wBAIR,oBAEGzL,KAAKqE,8BAIR,8BAEKsH,EAAY,oBAAqBzH,EAAQ,KAE7C,KACKlH,EAAIgD,KAAK4L,mBACH,OAAN5O,IAAcA,EAAEuO,MAAMI,GAG1B,KACKF,EAASI,WAAW3H,MACpB4H,MAAML,GACT,MAAM,IAAIX,GAAW,uBAAyBrF,OAAM,SAAW,gBAAkBzF,KAAKqE,IAAM,cAAgBrE,KAAKqL,MAAMjF,KAAK,aACtHqF,EANPvH,GAASlH,oCAWZ,iCAEK+O,EAAS/L,KAAKmL,SAASvN,mBACtBuN,SAAS3G,KAAK,MACZuH,iCAGR,yBAAgBA,EAAQ7H,QAElBiH,SAASY,GAAU7H,6BAGzB,qBAAY8H,EAAYpO,OAEnBqO,EAAQjM,KAAKkM,KAAKtO,MAClBqO,EAAMrO,QAAUA,EACnB,MAAM,IAAIkN,GAAW,iBAAmBrF,OAAM,KAAOuG,EAAaC,GAAS,gBAAkBjM,KAAKqE,IAAM,cAAgBrE,KAAKqL,MAAMjF,KAAK,UACrI+F,EAAYC,SAASH,EAAO,OAC5BH,MAAMK,GACT,MAAM,IAAIrB,GAAW,iBAAmBrF,OAAM,KAAOuG,EAAaC,GAAS,gBAAkBjM,KAAKqE,IAAM,cAAgBrE,KAAKqL,MAAMjF,KAAK,aAClInI,OAAOC,aAAaiO,wBAG5B,sBAEM9H,IAAM,OACNgH,MAAQ,QACRF,SAAW,wBAGjB,eAAMvD,UAEE5H,KAAKqM,KAAKzE,uBAIlB,oBAAK9J,yDAAM,KAEI,OAAVA,SAEEA,MAAQA,OACRuG,IAAM,OACNgH,MAAQ,QAGVI,EADAa,EAAWtM,KAAKuM,uBAEZD,OAEF,WACGtM,KAAKmL,SAASnL,KAAKwM,kBACtB,QACA,IACa,MAAbF,GACHtM,KAAKmL,SAAS3G,KAAK,MACpBiH,EAAS,eAEL,QACA,OAEW,OADfA,EAASzL,KAAKyM,YAEbhB,GAAS,MACL,CAAA,GAAe,MAAXA,EAGR,MAAM,IAAIX,GAAW,qDAAuDrF,OAAMgG,GAAU,gBAAkBzL,KAAKqE,IAAM,cAAgBrE,KAAKqL,MAAMjF,KAAK,MAFzJqF,GAAS,EAGO,MAAba,GACHtM,KAAKmL,SAAS3G,KAAKiH,aAEhB,QACA,QACA,QACA,IACJA,EAASzL,KAAKwM,aACG,MAAbF,GAAiC,MAAbA,GACvBtM,KAAKmL,SAAS3G,KAAKiH,aAEhB,QACA,IACJA,EAAS,WACLiB,EAAY1M,KAAKuM,kBAErB,KACKvP,EAAIgD,KAAKyM,cACTzP,GAAK0P,EACR,SACQ,MAAL1P,EACJ,KACK2P,EAAK3M,KAAKyM,WACJ,MAANE,EACHlB,EAAOjH,KAAK,MACE,KAANmI,EACRlB,EAAOjH,KAAK,MACE,KAANmI,EACRlB,EAAOjH,KAAK,MACE,KAANmI,EACRlB,EAAOjH,KAAK,MACE,KAANmI,EACRlB,EAAOjH,KAAK,MACE,KAANmI,EACRlB,EAAOjH,KAAK,MACE,KAANmI,EACRlB,EAAOjH,KAAK,KACE,KAANmI,EACRlB,EAAOjH,KAAK,KACE,KAANmI,EACRlB,EAAOjH,KAAK,KACE,KAANmI,EACRlB,EAAOjH,KAAKxE,KAAK4M,YAAY,IAAK,IACpB,KAAND,EACRlB,EAAOjH,KAAKxE,KAAK4M,YAAY,IAAK,IACpB,KAAND,EACRlB,EAAOjH,KAAKxE,KAAK4M,YAAY,IAAK,IAElCnB,EAAOjH,KAAK,KAAOmI,QAGpBlB,EAAOjH,KAAKxH,GAEdyO,EAASA,EAAOrF,KAAK,IACJ,MAAbkG,GACHtM,KAAKmL,SAAS3G,KAAKiH,aAEhB,QACA,IACJA,EAAS,IAAIoB,GACI,MAAbP,GACHtM,KAAKmL,SAAS3G,KAAKiH,GACpBA,EAAOqB,GAAK9M,KAAKqM,OACjBZ,EAAOsB,GAAK/M,KAAKqM,OACjBZ,EAAOuB,GAAKhN,KAAKqM,OACjBZ,EAAOwB,GAAKjN,KAAKqM,iBAEb,QACA,QAEAlD,EAAOnJ,KAAKqM,OACZjD,EAAQpJ,KAAKqM,OACbhD,EAAMrJ,KAAKqM,OACfZ,EAAS,IAAIyB,GAAM/D,EAAMC,EAAOC,GACf,MAAbiD,GACHtM,KAAKmL,SAAS3G,KAAKiH,aAGhB,QACA,KACJA,EAAS,IAAI0B,MACNC,YAAYpN,KAAKqM,QACxBZ,EAAO4B,QAAQ,GACf5B,EAAO6B,SAAStN,KAAKqM,OAAS,GAC9BZ,EAAO4B,QAAQrN,KAAKqM,QACpBZ,EAAO8B,SAASvN,KAAKqM,QACrBZ,EAAO+B,WAAWxN,KAAKqM,QACvBZ,EAAOgC,WAAWzN,KAAKqM,QACvBZ,EAAOiC,gBAAgB1N,KAAKqM,OAAO,KAClB,MAAbC,GACHtM,KAAKmL,SAAS3G,KAAKiH,aAEhB,QACA,KACJA,EAAS,IAAIkC,IACNC,MAAQ5N,KAAKqM,OACpBZ,EAAOoC,SAAW7N,KAAKqM,OACvBZ,EAAOqC,cAAgB9N,KAAKqM,OACX,MAAbC,GACHtM,KAAKmL,SAAS3G,KAAKiH,aAEhB,QACA,IACJA,EAAS,IAAIrB,GACI,MAAbkC,GACHtM,KAAKmL,SAAS3G,KAAKiH,GACpBA,EAAOpB,MAAQrK,KAAKqM,OACpBZ,EAAOnB,KAAOtK,KAAKqM,iBAEf,QACA,IACJZ,EAAS,IAAIsC,GACI,MAAbzB,GACHtM,KAAKmL,SAAS3G,KAAKiH,GACpBA,EAAOuC,QAAUhO,KAAKqM,iBAElB,QACA,aACChB,MAAM7G,KAAK,QAChBiH,EAAS,GACQ,MAAba,GACHtM,KAAKmL,SAAS3G,KAAKiH,GAIF,OADjBa,EAAWtM,KAAKuM,uBAGX0B,SACLxC,EAAOjH,KAAKxE,KAAKqM,aAEbhB,MAAM6C,gBAEP,QACA,QACA,QACA,QACJzC,EAAS,IAAI9G,SACR0G,MAAM7G,KAAkB,MAAb8H,GAAiC,MAAbA,EAAmB,OAAS,SAC/C,MAAbA,GAAiC,MAAbA,GACvBtM,KAAKmL,SAAS3G,KAAKiH,GAIF,OADjBa,EAAWtM,KAAKuM,kBADjB,MAIM0B,aACD/O,EAAMc,KAAKqM,OACXnI,EAAQlE,KAAKqM,OACjBZ,EAAO9F,IAAIzG,EAAKgF,QAEZmH,MAAM6C,gBAEP,QACA,aACC7C,MAAM7G,KAAK,OAChBiH,EAAS,IAAIrE,IACI,MAAbkF,GACHtM,KAAKmL,SAAS3G,KAAKiH,GAIF,OADjBa,EAAWtM,KAAKuM,uBAGX0B,SACLxC,EAAOrK,IAAIpB,KAAKqM,aAEZhB,MAAM6C,gBAEP,QACA,QAEAnC,EACa,MAAbO,IACHP,EAAS/L,KAAKmO,yBAGX3H,EAFAjE,EAAOvC,KAAKqM,eACXhB,MAAM7G,KAAKjC,GAEM,OAAlBvC,KAAK8H,cAGY1J,KADpBoI,EAAcxG,KAAK8H,SAASvF,MAE3BiE,EAAca,GAAU9E,IAGzBiE,EAAca,GAAU9E,QACLnE,IAAhBoI,EACH,MAAM,IAAIsE,GAAW,6BAA+BrF,OAAMlD,GAAQ,gBAAkBvC,KAAKqE,IAAM,cAAgBrE,KAAKqL,MAAMjF,KAAK,SAChIqF,EAAS,IAAIjF,EACI,MAAb8F,GACHtM,KAAKoO,gBAAgBrC,EAAQN,GAC9BA,EAAO4C,UAAUrO,MAEA,OADjBsM,EAAWtM,KAAKuM,iBAEf,MAAM,IAAIzB,GAAW,6CAA+CvI,EAAO,mBAAqBkD,OAAM6G,GAAY,gBAAkBtM,KAAKqE,IAAM,cAAgBrE,KAAKqL,MAAMjF,KAAK,WAC3KiF,MAAM6C,gBAGP,QACA,QAEAnC,EACa,MAAbO,IACHP,EAAS/L,KAAKmO,yBACX5L,EAAOvC,KAAKqM,OACZiC,EAAKtO,KAAKqM,YACThB,MAAM7G,KAAKjC,OACZrD,EAAMqD,EAAO,IAAM+L,UAERlQ,KADfqN,EAASzL,KAAKoL,mBAAmBlM,IAEjC,KACKsH,KACkB,OAAlBxG,KAAK8H,cAGY1J,KADpBoI,EAAcxG,KAAK8H,SAASvF,MAE3BiE,EAAca,GAAU9E,IAGzBiE,EAAca,GAAU9E,QACLnE,IAAhBoI,EACH,MAAM,IAAIsE,GAAW,6BAA+BrF,OAAMlD,GAAQ,YAAckD,OAAM6I,GAAM,gBAAkBtO,KAAKqE,IAAM,cAAgBrE,KAAKqL,MAAMjF,KAAK,MAC1JqF,EAAS,IAAIjF,EAAY8H,QACpBlD,mBAAmBlM,GAAOuM,KAEf,MAAba,GACHtM,KAAKoO,gBAAgBrC,EAAQN,GAC9BA,EAAO4C,UAAUrO,MAEA,OADjBsM,EAAWtM,KAAKuM,iBAEf,MAAM,IAAIzB,GAAW,4CAA8CrF,OAAMlD,GAAQ,YAAckD,OAAM6I,GAAM,kBAAoB7I,OAAM6G,GAAY,gBAAkBtM,KAAKqE,IAAM,cAAgBrE,KAAKqL,MAAMjF,KAAK,WAC1MiF,MAAM6C,0BAIL,IAAIpD,GAAW,oBAAsBrF,OAAM6G,GAAY,gBAAkBtM,KAAKqE,IAAM,cAAgBrE,KAAKqL,MAAMjF,KAAK,aAE9G,OAAVtI,SAEEA,MAAQ,UACRuG,IAAM,OACNgH,MAAQ,MAEPI,6BAIR,2BAEK8C,EAAOvO,WACJ,CACNwO,KAAM,oBAEDlC,EAAWiC,EAAKhC,uBAKpBgC,EAAKN,SACW,KAAZ3B,EACI,CAACmC,MAAM,GAEP,CAACA,MAAM,EAAOvK,MAAOqK,EAAKlC,iBAKpCjM,EAAQ0B,cAAT,eAAkB2E,UAETA,OAEF,YACAoB,EAAQ7H,KAAK6H,MAAMkD,KAAK/K,aAC5BmC,OAAO0F,EAAO,CAAC,OAAQ,MAChBA,gBAED,IAAImD,IAAItE,eAAe1G,KAAMyG,mBAWjCiI,GAAe,gBACfC,GAAgB,sCAChBC,GAAgB,mEAChBC,GAAgB,uBAKf,SAASC,YAAYjI,MAEvB8D,OAAO9D,GACX,OACKkI,EAAS,gCACYlI,kCACzB,iCADU3H,OAAKgF,UAEM,iBAAThF,EACV,MAAM,IAAI8P,GAAU,wBACrBD,EAAO7P,GAAOgF,wCAER6K,SAEDlI,EAID,SAASoI,OAAO/K,EAAOgL,UAEzBhL,EAAQ,EACJ,EACCA,EAAQgL,EACTA,EAEAhL,EAIF,SAASiL,YAAYjI,OAEvBnJ,GAAUmJ,aAAekI,UAAYlI,EAAIV,YAAYjE,KAAO,KAAO,IAAM2E,EAAIvE,kBAC7EuE,EAAImI,UACPtR,EAASoR,YAAYjI,EAAImI,SAAW,OAAStR,GACvCA,EAID,SAASuR,eAAeD,EAASjN,EAAGG,EAAMgN,EAAiBlN,EAAWY,EAAcF,EAAa0B,EAAMC,OAEzGG,KACA9B,KAEe,OAAdV,EACJ,IACKoC,EAAK7G,OACR,MAAM,IAAIyH,GAAcI,OAAMrD,GAAK,0CACpCyC,EAAY,CAACH,QAGbG,EAAY,CAACxC,EAAUmN,WAAWjN,EAAMkC,EAAMC,QAGhD,IACmB,OAAdrC,EACH,MAAM,IAAIgD,GAAcI,OAAMrD,GAAK,0CACpCyC,EAAYxC,EAAUuD,UAAUrD,EAAMkC,EAAMC,UAEzCzB,GACH4B,EAAU4K,QAAQJ,GACZjN,EAAE6E,MAAMsI,EAAiB1K,GAG1B,SAAS6K,sBAAsBtN,YAEhCA,QAA0BhE,IAArBgE,EAAES,qBAAuDzE,IAAvBgE,EAAEU,uBAA0D1E,IAAxBgE,EAAEY,mBAM5E,SAAS2M,oBAAoB9I,YAE9B6I,sBAAsB7I,IAAsC,mBAAvBA,EAAIzG,EAAQK,OAMhD,SAASmP,sBAAsB/I,YAEhC6I,sBAAsB7I,IAAwC,mBAAzBA,EAAIzG,EAAQM,SAMhD,SAASmP,cAAcR,EAASjN,EAAGqC,EAAMC,OAE1CgL,sBAAsBtN,GAC1B,MAAM,IAAI4M,GAAUvJ,OAAMrD,GAAK,kCAEzBkN,eAAeD,EAASjN,EADpBA,EAAEI,WAAaJ,EAAEG,KACY,KAAMH,EAAES,eAAgBT,EAAEY,kBAAmBZ,EAAEU,iBAAkB2B,EAAMC,GAGzG,SAASoL,YAAYT,EAASxI,EAAKpC,EAAMC,OAE1CiL,oBAAoB9I,GACxB,MAAM,IAAImI,GAAUvJ,OAAMoB,GAAO,kCAC3ByI,eAAeD,EAASxI,EAAIzG,EAAQK,MAAOoG,EAAItE,KAAMsE,EAAKA,EAAIhE,eAAgBgE,EAAI7D,kBAAmB6D,EAAI/D,iBAAkB2B,EAAMC,GAGlI,SAASqL,YAAYV,EAASxI,EAAKpC,EAAMC,OAE1CkL,sBAAsB/I,GAC1B,MAAM,IAAImI,GAAUvJ,OAAMoB,GAAO,oCAC3ByI,eAAeD,EAASxI,EAAIzG,EAAQM,QAASmG,EAAItE,KAAMsE,EAAKA,EAAIhE,eAAgBgE,EAAI7D,kBAAmB6D,EAAI/D,iBAAkB2B,EAAMC,GAGpI,SAASsL,MAAMX,EAASjN,EAAGqC,EAAMC,MAErB,mBAAPtC,EACV,OAAOyN,cAAcR,EAASjN,EAAGqC,EAAMC,GACnC,GAAItC,GAAiC,mBAArBA,EAAEhC,EAAQK,MAC9B,OAAOqP,YAAYT,EAASjN,EAAGqC,EAAMC,GAErC,MAAM,IAAIsK,GAAUiB,MAAM7N,GAAGuE,WAAa,oBAGrC,SAASuJ,WAAWC,EAAQjM,MAE7BuG,QAAQ0F,GAGb,SACKC,EAAW,GACXC,EAAOC,MAAMpM,GAER3G,EAAI,KAAKA,EAClB,KACKmN,EAAO2F,EAAK7B,UAEZ9D,EAAK+D,KACT,IACKlR,IAAM4S,EAAOvS,OAChB,MAEA,MAAM,IAAIkN,GAAW,QAAUqF,EAAOvS,OAAS,UAA8B,IAAlBuS,EAAOvS,OAAe,GAAK,KAAO,mBAAqBL,QAI/GA,EAAI4S,EAAOvS,QAGd,MAAM,IAAIkN,GAAW,uCAAyCqF,EAAOvS,OAAS,KAF9EwS,EAAWA,EAAS5Q,OAAO0Q,WAAWC,EAAO5S,GAAImN,EAAKxG,eAKlDkM,EAzBP,MAAO,CAAC,CAACD,EAAQjM,IA6BZ,SAASqM,cAAcC,SAEzBC,EAAW,GACXC,EAAQ,EAAGC,GAAS,+BACPH,kCACjB,KADSI,aAEa,iBAAVA,EAEVF,GAASE,EACTD,GAAS,MAGV,IACKA,EACJ,CACCF,EAASjM,KAAK,UACT,IAAIqM,EAAI,EAAGA,EAAIH,IAASG,EAC5BJ,EAASjM,KAAK,MACfmM,GAAS,EAEVF,EAASjM,KAAKoM,0CAGZD,GACHF,EAASjM,KAAK,MACRiM,EAASrK,KAAK,IAItB,SAAS0K,cAAcC,EAAQ1M,WAE1B2M,EAAgB3M,EAChB4M,EAAgBD,EAEhBE,EAAY,GACZC,EAAY,IACTD,EAAY,GACnB,IAEuB,IAAlBF,EACJ,CACCG,EAAY,YAI0B,OAAnCJ,EAAOtS,OAAOuS,EAAc,GAChC,CACCG,EAAY,WAGXD,IACAF,SAEIG,EAAYJ,EAAOrF,UAAUsF,EAAeC,GAIpD,SAASG,cAAcL,EAAQ1M,WAE1BgN,EAAehN,EACfiN,EAAeD,EAEfE,EAAY,GACZC,EAAa,IACVD,EAAY,GACnB,IAEKF,GAAgBN,EAAOnT,OAC3B,CACC4T,EAAa,YAIsB,OAAhCT,EAAOtS,OAAO4S,GAClB,CACCG,EAAa,WAGZD,IACAF,SAEIN,EAAOrF,UAAU4F,EAAcD,GAAgBG,EAIvD,SAASC,gBAAgBV,EAAQ1M,WAE5BkE,EAAO,EACPmJ,EAAM,EACNpH,EAAOjG,EACF9G,EAAI,EAAGA,EAAI+M,IAAQ/M,EAET,OAAdwT,EAAOxT,MAERgL,EACFmJ,EAAM,KAGJA,QAEG,CAACnJ,EAAMmJ,GAIR,SAASC,IAAIC,EAAMC,OAErBC,EAAc,CAAC,UAAW,aAE1BF,GAAqC,mBAAtBA,EAAKxR,EAAQQ,IAC/B,OAAOgR,EAAKxR,EAAQQ,IAAIiR,GACpB,GAAIA,GAAqC,mBAAtBA,EAAKzR,EAAQQ,IACpC,OAAOiR,EAAKzR,EAAQQ,IAAIgR,GACpB,GAAa,OAATA,EACR,OAAgB,OAATC,EACH,IAA0C,GAAtCC,EAAY5M,gBAAe0M,WAEO,GAAtCE,EAAY5M,gBAAe2M,KACvBD,GAAQC,EAIZ,GAAqB,iBAAVD,QAEM,iBAAVC,GACHD,GAAQC,EAIZ,GAAIvI,YAAYsI,WAEhBtI,YAAYuI,IACRD,EAAKG,WAAaF,EAAKE,UAI3B,GAAItH,QAAQmH,GACjB,IACKnH,QAAQoH,GACZ,IAEKD,IAASC,EACZ,OAAO,KACJD,EAAKhU,QAAUiU,EAAKjU,OACvB,OAAO,MACH,IAAIL,EAAI,EAAGA,EAAIqU,EAAKhU,SAAUL,MAE7BoU,IAAIC,EAAKrU,GAAIsU,EAAKtU,WACf,SAEF,EAGP,OAAO,EAEJ,GAAIyU,UAAUJ,GACnB,IACKI,UAAUH,GACd,IAEKD,IAASC,EACZ,OAAO,MAEH,IAAI3S,KAAO0S,EAChB,KACKC,EAAKI,eAAe/S,GAMvB,OAAO,MAJFyS,IAAIC,EAAK1S,GAAM2S,EAAK3S,IACxB,OAAO,MAML,IAAIA,KAAO2S,MAEVD,EAAKK,eAAe/S,GACxB,OAAO,SAEF,EAEH,GAAIyL,OAAOkH,GAChB,KAEM,IAAI3S,KAAO0S,EAChB,KACKC,EAAKnM,IAAIxG,GAMZ,OAAO,MAJFyS,IAAIC,EAAK1S,GAAM2S,EAAKK,IAAIhT,IAC5B,OAAO,qCAMe2S,kCACzB,+CACMD,EAAKK,eAAe/S,KACxB,OAAO,wCAEF,EAGP,OAAO,EAEJ,GAAIyL,OAAOiH,GAChB,IACKI,UAAUH,GACd,oCAE0BD,kCACzB,iCADU1S,gBAEJ2S,EAAKI,eAAe/S,GACxB,OAAO,EACH,IAAKyS,IAAIC,EAAKM,IAAIhT,GAAM2S,EAAK3S,IACjC,OAAO,qCAGJ,IAAIA,KAAO2S,MAEVD,EAAKlM,IAAIxG,GACb,OAAO,SAEF,EAEH,GAAIyL,OAAOkH,GAChB,IAEKD,IAASC,EACZ,OAAO,KACJD,EAAKpG,MAAQqG,EAAKrG,KACrB,OAAO,QACJC,GAAS,+BAEYmG,kCACzB,iCADU1S,YAEJ2S,EAAKnM,IAAIxG,IAEJyS,IAAIC,EAAKM,IAAIhT,GAAM2S,EAAKK,IAAIhT,MADrCuM,GAAS,yCAIJA,EAGP,OAAO,EAEJ,GAAIZ,OAAO+G,GAChB,IACK/G,OAAOgH,GACX,IAEKD,IAASC,EACZ,OAAO,KACJD,EAAKpG,MAAQqG,EAAKrG,KACrB,OAAO,QACJC,GAAS,+BACKmG,kCAClB,KADS1N,UAEH2N,EAAKnM,IAAIxB,KACbuH,GAAS,yCAEJA,EAGP,OAAO,EAGR,OAAOmG,IAASC,EAIX,SAASM,IAAIP,EAAMC,UAErBD,GAAqC,mBAAtBA,EAAKxR,EAAQS,IACxB+Q,EAAKxR,EAAQS,IAAIgR,GAChBA,GAAqC,mBAAtBA,EAAKzR,EAAQS,IAC7BgR,EAAKzR,EAAQS,IAAI+Q,IAEhBD,IAAIC,EAAMC,GAGb,SAASO,aAAaC,EAAUT,EAAMC,SAEtC,IAAI7C,GAAU,sBAAwBiB,MAAM2B,GAAMjL,WAAa,IAAM0L,EAAW,IAAMpC,MAAM4B,GAAMlL,YAYlG,SAAS2L,KAAKD,EAAUT,EAAMC,OAEhCC,EAAc,CAAC,UAAW,cAEY,GAAtCA,EAAY5M,gBAAe0M,SAEY,GAAtCE,EAAY5M,gBAAe2M,IAC9B,OAAQD,EAAOC,IAASD,EAAOC,QAE5B,GAAqB,iBAAVD,MAEM,iBAAVC,EACV,OAAQD,EAAOC,IAASD,EAAOC,QAE5B,GAAIvI,YAAYsI,OAEhBtI,YAAYuI,GAChB,KACKU,EAAKX,EAAKG,UAAWS,EAAKX,EAAKE,iBAC3BQ,EAAKC,IAAOD,EAAKC,SAGtB,GAAI/H,QAAQmH,OAEZnH,QAAQoH,GACZ,IACKD,IAASC,EACZ,OAAO,MACH,IAAItU,EAAI,EAAGA,EAAIqU,EAAKhU,SAAUL,EACnC,IACKA,GAAKsU,EAAKjU,OACb,OAAO,MACJ6U,EAAMH,KAAKD,EAAUT,EAAKrU,GAAIsU,EAAKtU,OACnCkV,EACH,OAAOA,SAEFZ,EAAKjU,OAASgU,EAAKhU,QAAU,EAAI,QAGrC,GAAIiN,OAAO+G,IAEX/G,OAAOgH,GACX,SACKa,GAAU,EACVC,GAAU,EAELtC,EAAOC,MAAMsB,KACtB,KACKlH,EAAO2F,EAAK7B,UACZ9D,EAAK+D,KACR,UACIoD,EAAKnM,IAAIgF,EAAKxG,OACnB,CACCwO,GAAU,aAIP,IAAIrC,EAAOC,MAAMuB,KACtB,KACKnH,EAAO2F,EAAK7B,UACZ9D,EAAK+D,KACR,UACImD,EAAKlM,IAAIgF,EAAKxG,OACnB,CACCyO,GAAU,gBAKRD,EAECC,EACI,KAEA,EAIJA,GACK,EAED,SAIJP,aAAaC,EAAUT,EAAMC,GAI9B,SAASe,IAAIhB,EAAMC,OAErBC,EAAc,CAAC,UAAW,aAE1BF,GAAqC,mBAAtBA,EAAKxR,EAAQU,IAC/B,OAAO8Q,EAAKxR,EAAQU,IAAI+Q,GACpB,IAA0C,GAAtCC,EAAY5M,gBAAe0M,SAEO,GAAtCE,EAAY5M,gBAAe2M,IAC9B,OAAOD,EAAOC,OAEX,GAAqB,iBAAVD,MAEM,iBAAVC,EACV,OAAOD,EAAOC,OAEX,GAAIvI,YAAYsI,OAEhBtI,YAAYuI,GACf,OAAOD,EAAKG,UAAYF,EAAKE,eAE1B,GAAItH,QAAQmH,OAEZnH,QAAQoH,GACZ,IACKD,IAASC,EACZ,OAAO,MACH,IAAItU,EAAI,EAAGA,EAAIqU,EAAKhU,SAAUL,EACnC,IACKA,GAAKsU,EAAKjU,OACb,OAAO,MACC+T,IAAIC,EAAKrU,GAAIsU,EAAKtU,IAE1B,OAAOqV,IAAIhB,EAAKrU,GAAIsU,EAAKtU,WAEpBqU,EAAKhU,OAASiU,EAAKjU,aAIvB,GAAIiN,OAAO+G,GAChB,IACK/G,OAAOgH,GACX,KACM,IAAI3S,KAAO0S,EAEVC,EAAKnM,IAAIkM,EAAK1S,MAClBwT,SAAU,OAEP,IAAIxT,KAAO2S,EAEVD,EAAKlM,IAAImM,EAAK3S,MAClByT,SAAU,QAIZP,aAAaC,SAAUT,EAAMC,UAE1Ba,QAECC,QACI,KAEA,EAIJA,SACK,EAED,EAGVP,aAAa,IAAKR,EAAMC,GAIlB,SAASgB,IAAIjB,EAAMC,OAErBC,EAAc,CAAC,UAAW,aAE1BF,GAAqC,mBAAtBA,EAAKxR,EAAQW,IAC/B,OAAO6Q,EAAKxR,EAAQW,IAAI8Q,OACiB,GAAtCC,EAAY5M,gBAAe0M,SAEY,GAAtCE,EAAY5M,gBAAe2M,IAC9B,OAAOD,GAAQC,OAEZ,GAAqB,iBAAVD,MAEM,iBAAVC,EACV,OAAOD,GAAQC,OAEZ,GAAIvI,YAAYsI,OAEhBtI,YAAYuI,GACf,OAAOD,EAAKG,WAAaF,EAAKE,eAE3B,GAAItH,QAAQmH,OAEZnH,QAAQoH,GACZ,IACKD,IAASC,EACZ,OAAO,MACH,IAAItU,EAAI,EAAGA,EAAIqU,EAAKhU,SAAUL,EACnC,IACKA,GAAKsU,EAAKjU,OACb,OAAO,MACC+T,IAAIC,EAAKrU,GAAIsU,EAAKtU,IAE1B,OAAOqV,IAAIhB,EAAKrU,GAAIsU,EAAKtU,WAEpBqU,EAAKhU,QAAUiU,EAAKjU,aAIxB,GAAIiN,OAAO+G,GAChB,KACKc,GAAU,EACVC,GAAU,KAEV9H,OAAOgH,MAENhH,OAAOgH,GACX,oCACmBD,kCAClB,KADS1N,UAEH2N,EAAKnM,IAAIxB,KACbwO,GAAU,qEAEMb,kCAClB,KADS3N,UAEH0N,EAAKlM,IAAIxB,KACbyO,GAAU,wCAIZP,aAAaC,SAAUT,EAAMC,QAG9BO,aAAaC,SAAUT,EAAMC,UAE1Ba,EAECC,EACI,KAEA,EAIJA,GACK,EAED,EAGVP,aAAa,KAAMR,EAAMC,GAInB,SAASiB,IAAIlB,EAAMC,OAErBC,EAAc,CAAC,UAAW,aAE1BF,GAAqC,mBAAtBA,EAAKxR,EAAQY,IAC/B,OAAO4Q,EAAKxR,EAAQY,IAAI6Q,OACiB,GAAtCC,EAAY5M,gBAAe0M,SAEY,GAAtCE,EAAY5M,gBAAe2M,IAC9B,OAAOD,EAAOC,OAEX,GAAqB,iBAAVD,MAEM,iBAAVC,EACV,OAAOD,EAAOC,OAEX,GAAIvI,YAAYsI,OAEhBtI,YAAYuI,GACf,OAAOD,EAAKG,UAAYF,EAAKE,eAE1B,GAAItH,QAAQmH,OAEZnH,QAAQoH,GACZ,IACKD,IAASC,EACZ,OAAO,MACH,IAAItU,EAAI,EAAGA,EAAIqU,EAAKhU,SAAUL,EACnC,IACKA,GAAKsU,EAAKjU,OACb,OAAO,MACC+T,IAAIC,EAAKrU,GAAIsU,EAAKtU,IAE1B,OAAOuV,IAAIlB,EAAKrU,GAAIsU,EAAKtU,WAEpBqU,EAAKhU,OAASiU,EAAKjU,aAIvB,GAAIiN,OAAO+G,GAChB,KACKc,GAAU,EACVC,GAAU,KAEV9H,OAAOgH,MAENhH,OAAOgH,GACX,oCACmBD,kCAClB,KADS1N,UAEH2N,EAAKnM,IAAIxB,KACbwO,GAAU,qEAEMb,kCAClB,KADS3N,UAEH0N,EAAKlM,IAAIxB,KACbyO,GAAU,wCAIZP,aAAaC,SAAUT,EAAMC,QAG9BO,aAAaC,SAAUT,EAAMC,UAE1Ba,EAECC,EACI,KAEA,EAIJA,GACK,EAED,EAGVP,aAAa,IAAKR,EAAMC,GAIlB,SAASkB,IAAInB,EAAMC,OAErBC,EAAc,CAAC,UAAW,aAE1BF,GAAqC,mBAAtBA,EAAKxR,EAAQa,IAC/B,OAAO2Q,EAAKxR,EAAQa,IAAI4Q,GACpB,IAA0C,GAAtCC,EAAY5M,gBAAe0M,SAEO,GAAtCE,EAAY5M,gBAAe2M,IAC9B,OAAOD,GAAQC,OAEZ,GAAqB,iBAAVD,MAEM,iBAAVC,EACV,OAAOD,GAAQC,OAEZ,GAAIvI,YAAYsI,OAEhBtI,YAAYuI,GACf,OAAOD,EAAKG,WAAaF,EAAKE,eAE3B,GAAItH,QAAQmH,OAEZnH,QAAQoH,GACZ,IACKD,IAASC,EACZ,OAAO,MACH,IAAItU,EAAI,EAAGA,EAAIqU,EAAKhU,SAAUL,EACnC,IACKA,GAAKsU,EAAKjU,OACb,OAAO,MACC+T,IAAIC,EAAKrU,GAAIsU,EAAKtU,IAE1B,OAAOuV,IAAIlB,EAAKrU,GAAIsU,EAAKtU,WAEpBqU,EAAKhU,QAAUiU,EAAKjU,aAIxB,GAAIiN,OAAO+G,GAChB,KACKc,GAAU,EACVC,GAAU,KAEV9H,OAAOgH,MAENhH,OAAOgH,GACX,oCACmBD,kCAClB,KADS1N,UAEH2N,EAAKnM,IAAIxB,KACbwO,GAAU,qEAEMb,kCAClB,KADS3N,UAEH0N,EAAKlM,IAAIxB,KACbyO,GAAU,wCAIZP,aAAaC,SAAUT,EAAMC,QAG9BO,aAAaC,SAAUT,EAAMC,UAE1Ba,EAECC,EACI,KAEA,EAIJA,GACK,EAED,EAGVP,aAAa,KAAMR,EAAMC,GAInB,SAASvB,MAAMzJ,MAED,iBAATA,GAAqB4D,QAAQ5D,SAEhC,CACN+B,MAAO,EACP4F,KAAM,uBAEDxO,KAAK4I,MAAQ/B,EAAIjJ,OACb,CAACsG,MAAO2C,EAAI7G,KAAK4I,SAAU6F,MAAM,GAEjC,CAACA,MAAM,KAIb,GAAIuE,QAAQnM,GAChB,OAAOA,EACH,GAAI8D,OAAO9D,GAChB,OACKoM,EAAO,gCACcpM,mEAAf3H,YACT+T,EAAKzO,KAAKtF,wCACJ,CACN0J,MAAO,EACP4F,KAAM,uBAEDxO,KAAK4I,OAASqK,EAAKrV,OACf,CAAC6Q,MAAM,GACR,CAACvK,MAAO+O,EAAKjT,KAAK4I,SAAU6F,MAAM,KAIvC,GAAI5D,OAAOhE,GAChB,OACKqM,EAAS,gCACIrM,uCAAR6D,UACRwI,EAAO1O,KAAKkG,wCACN,CACN9B,MAAO,EACP4F,KAAM,uBAEDxO,KAAK4I,OAASsK,EAAOtV,OACjB,CAAC6Q,MAAM,GACR,CAACvK,MAAOgP,EAAOlT,KAAK4I,SAAU6F,MAAM,KAIzC,GAAIuD,UAAUnL,GACnB,KACKoM,EAAO,OACN,IAAI/T,KAAO2H,EACfoM,EAAKzO,KAAKtF,SACJ,CACN0J,MAAO,EACP4F,KAAM,uBAEDxO,KAAK4I,OAASqK,EAAKrV,OACf,CAAC6Q,MAAM,GACR,CAACvK,MAAO+O,EAAKjT,KAAK4I,SAAU6F,MAAM,KAKvC,GAAY,OAAR5H,GAAiD,mBAA1BA,EAAIvG,OAAO6S,UAC1C,OAAOtM,EAAIvG,OAAO6S,kBACb,IAAInE,GAAUiB,MAAMpJ,GAAKF,WAAa,2BAG7C,SAASkC,UAAUxI,EAAK+S,SAEnB3H,EAAS,GACT4H,GAAS,EAAOC,GAAS,+BAEfjT,kCACd,KADSrD,aAEC,KAALA,MAEHsW,GAAS,EACLD,EACH,WAEG,GAAS,KAALrW,IAERqW,GAAS,EACLC,GACH,2CAKCC,EAASF,IAAWC,EAAU,IAAM,iCAE1BjT,kCACd,KADSrD,iBAEAA,OAEF,IACJyO,GAAW8H,GAASvW,EAAK,MAAQA,YAE7B,IACJyO,GAAW8H,GAASvW,EAAK,MAAQA,YAE7B,KACJyO,GAAU,iBAEN,KACJA,GAAU,gBAEN,KACJA,GAAU,gBAEN,KACJA,GAAU,wBAGN+H,EAAOxW,EAAEsB,WAAW,GACpBmV,SAeHhI,GADc,KAZdgI,EADGD,EAAO,GACD,EACDA,EAAO,IACN,EACAJ,GAAU,oyHAAoyHM,KAAK1W,GAEpzHwW,GAAQ,IACP,EACDA,GAAQ,MACP,EAEA,EANA,GASCxW,EACS,IAAXyW,EACE,MAAQE,MAAMH,EAAK7Q,SAAS,IAAK,IAAK,GAC7B,IAAX8Q,EACE,MAAQE,MAAMH,EAAK7Q,SAAS,IAAK,IAAK,GAEtC,MAAQgR,MAAMH,EAAK7Q,SAAS,IAAK,IAAK,0CAI7C4Q,EAAQ9H,EAAS8H,EAsCzB,SAASK,UAAU/M,EAAKuM,OAEnBlN,EAAI,GACRA,EAAE1B,KAAK,WAEHjH,EAAI,+BACiBsJ,kCACzB,iCADU3H,OAAKgF,OAEV3G,KACH2I,EAAE1B,KAAK,MACR0B,EAAE1B,KAAKqP,eAAe3U,EAAKkU,GAAQ,KAAMS,eAAe3P,EAAOkP,0CAGhElN,EAAE1B,KAAK,KACA0B,EAAEE,KAAK,IAGf,SAAS0N,WAAWjN,EAAKuM,OAEpBlN,EAAI,GACRA,EAAE1B,KAAK,WACHuP,GAAQ,+BACKlN,kCACjB,KADS6D,UAEJqJ,EACHA,GAAQ,EAER7N,EAAE1B,KAAK,MACR0B,EAAE1B,KAAKqP,eAAenJ,EAAM0I,0CAE7BlN,EAAE1B,KAAK,KACA0B,EAAEE,KAAK,IAGf,SAAS4N,UAAUnN,EAAKuM,OAEnBlN,EAAI,MACRA,EAAE1B,KAAK,KACFqC,EAAI2E,KAGT,OACKjO,EAAI,+BACUsJ,kCAClB,KADS3C,UAEJ3G,KACH2I,EAAE1B,KAAK,MACR0B,EAAE1B,KAAKqP,eAAe3P,EAAOkP,yCAR9BlN,EAAE1B,KAAK,YAWR0B,EAAE1B,KAAK,KACA0B,EAAEE,KAAK,IAGf,SAAS6N,aAAapN,EAAKuM,OAEtBlN,EAAI,GACRA,EAAE1B,KAAK,SACHjH,EAAI,MACH,IAAI2B,KAAO2H,EAEVA,EAAIoL,eAAe/S,KAEpB3B,KACH2I,EAAE1B,KAAK,MACR0B,EAAE1B,KAAKqP,eAAe3U,EAAKkU,GAAQ,KAAMS,eAAehN,EAAI3H,GAAMkU,YAEnElN,EAAE1B,KAAK,KACA0B,EAAEE,KAAK,IAGf,SAASyN,eAAehN,EAAKuM,UAEhB,OAARvM,EACI,YACSzI,IAARyI,EACD,eACS,IAARA,EACD,SACS,IAARA,EACD,OACiB,iBAATA,EACRgC,UAAUhC,EAAKuM,GACE,iBAATvM,EACR,GAAKA,EACY,mBAATA,EACXA,EAAIrE,WAAaqE,EAAItE,KACjB,cAAgBsE,EAAIrE,WAAaqE,EAAItE,MAAQ,IAE7C,uBACA2G,QAAQrC,GA7HlB,SAASqN,WAAWrN,EAAKuM,OAEpBjK,EAAOtC,EAAIsN,MAAM5K,cACjBH,EAAQvC,EAAIsN,MAAM3K,WAAW,EAC7BH,EAAMxC,EAAIsN,MAAM1K,gBACP,KAAON,EAAO,IAAMwK,MAAMvK,EAAMzG,WAAY,IAAK,GAAK,IAAMgR,MAAMtK,EAAI1G,WAAY,IAAK,GAAK,IAyHjGuR,CAAWrN,GACVyC,YAAYzC,GAtHtB,SAASuN,eAAevN,EAAKuM,OAExBjK,EAAOtC,EAAI0C,cACXH,EAAQvC,EAAI2C,WAAW,EACvBH,EAAMxC,EAAI4C,UACV4K,EAAOxN,EAAI6C,WACX4K,EAASzN,EAAI8C,aACb4K,EAAS1N,EAAI+C,aACb4K,EAAK3N,EAAIgD,kBACT4B,EAAS,KAAOtC,EAAO,IAAMwK,MAAMvK,EAAMzG,WAAY,IAAK,GAAK,IAAMgR,MAAMtK,EAAI1G,WAAY,IAAK,GAAK,WAErG0R,GAAQC,GAAUC,GAAUC,KAE/B/I,GAAUkI,MAAMU,EAAK1R,WAAY,IAAK,GAAK,IAAMgR,MAAMW,EAAO3R,WAAY,IAAK,IAC3E4R,GAAUC,KAEb/I,GAAU,IAAMkI,MAAMY,EAAO5R,WAAY,IAAK,GAC1C6R,IACH/I,GAAU,IAAMkI,MAAMa,EAAG7R,WAAY,IAAK,GAAK,SAGlD8I,EAAU,IAkGF2I,CAAevN,GACE,WAAhBC,QAAOD,IAAmD,mBAAvBA,EAAIzG,EAAQG,MAChDsG,EAAIzG,EAAQG,QACXkK,QAAQ5D,GACTiN,WAAWjN,EAAKuM,GACfzI,OAAO9D,GACR+M,UAAU/M,EAAKuM,GACdvI,OAAOhE,GACRmN,UAAUnN,EAAKuM,GACdpB,UAAUnL,GACXoN,aAAapN,EAAKuM,GACnB,IAID,SAAS3N,OAAMoB,UAEdgN,eAAehN,GAAK,GAGrB,SAAS4N,OAAO5N,UAEfgN,eAAehN,GAAK,GAG5B,SAAS6N,UAAU7N,OAEdsC,EAAOtC,EAAIsN,MAAM5K,cACjBH,EAAQvC,EAAIsN,MAAM3K,WAAW,EAC7BH,EAAMxC,EAAIsN,MAAM1K,iBAEbN,EAAO,IAAMwK,MAAMvK,EAAMzG,WAAY,IAAK,GAAK,IAAMgR,MAAMtK,EAAI1G,WAAY,IAAK,GAGxF,SAASgS,cAAc9N,OAElBsC,EAAOtC,EAAI0C,cACXH,EAAQvC,EAAI2C,WAAW,EACvBH,EAAMxC,EAAI4C,UACV4K,EAAOxN,EAAI6C,WACX4K,EAASzN,EAAI8C,aACb4K,EAAS1N,EAAI+C,aACb4K,EAAK3N,EAAIgD,kBAET4B,EAAStC,EAAO,IAAMwK,MAAMvK,EAAMzG,WAAY,IAAK,GAAK,IAAMgR,MAAMtK,EAAI1G,WAAY,IAAK,GAAK,IAAMgR,MAAMU,EAAK1R,WAAY,IAAK,GAAK,IAAMgR,MAAMW,EAAO3R,WAAY,IAAK,UACzK4R,GAAUC,KAEb/I,GAAU,IAAMkI,MAAMY,EAAO5R,WAAY,IAAK,GAC1C6R,IACH/I,GAAU,IAAMkI,MAAMa,EAAG7R,WAAY,IAAK,GAAK,QAE1C8I,EAID,SAASmJ,WAAK/N,yDAAI,UAEjBgO,GAAQzU,EAAQK,MAAMoG,GAIvB,SAASiO,MAAMjO,UAEdkO,GAAS3U,EAAQK,MAAMoG,GAIxB,SAASmO,WAAKnO,yDAAI,EAAGoO,yDAAK,YAEzBC,GAAQ9U,EAAQK,MAAMoG,EAAKoO,GAI5B,SAASE,OAAOtO,UAEfuO,GAAUhV,EAAQK,MAAMoG,GAIzB,SAASwO,MAAMxO,UAEdyO,GAASlV,EAAQK,MAAMoG,GAIxB,SAAS0O,WAAK1O,yDAAI,UAEjB2O,GAAQpV,EAAQK,MAAMoG,GAIvB,SAAS4O,KAAKC,MAEK,iBAAdA,GAA0BjL,QAAQiL,GAC5C,OAAOA,EAAS9X,OACZ,GAAI+M,OAAO+K,IAAa7K,OAAO6K,GACnC,OAAOA,EAASlK,KACZ,GAAIwG,UAAU0D,GACnB,KACKnY,EAAI,MACH,IAAI2B,KAAOwW,IACbnY,SACIA,QAEF,IAAIyR,GAAU,mBAAqBiB,MAAMyF,GAAU/O,WAAa,sBAG5DgP,GAAqB,IAAIhR,IAEpC,SAASiR,UAAUpP,OAEdtE,EAAO,IAAI2T,GAAYrP,UAC3BmP,GAAmBhQ,IAAIa,EAAatE,GAC7BA,EAGD,SAAS+N,MAAMpJ,MAET,OAARA,EACH,OAAOiP,GACH,QAAY1X,IAARyI,EACR,OAAOkP,GACH,GAAkC,mBAAvBlP,EAAIzG,EAAQ8B,MAC3B,OAAO2E,EAAIzG,EAAQ8B,QACf,GAAI8T,QAAQnP,GAChB,OAAOkO,GACH,GAAIkB,OAAOpP,GACf,OAAOqO,GACH,GAAIgB,SAASrP,GACjB,OAAOuO,GACH,GAAIe,OAAOtP,GACf,OAAOgO,GACH,GAAIpK,QAAQ5D,GAChB,OAAOyO,GACH,GAAIzK,OAAOhE,GACf,OAAO2O,GACH,GAAI5K,QAAQ/D,UACTuP,GACH,GAAI9M,YAAYzC,GACpB,OAAOwP,GAEH,GAAoB,mBAATxP,EACf,OAAOyP,OAGH9P,EAAcK,EAAIL,YAClBtE,EAAOyT,GAAmBzD,IAAI1L,eACrBpI,IAAT8D,IACHA,EAAO0T,UAAUpP,IACXtE,EAKF,SAASqU,KAAK3E,EAAMC,MAEtBD,MAAAA,GAAAA,MAAuCC,EAC1C,MAAM,IAAI7C,GAAUiB,MAAM2B,GAAMjL,WAAa,MAAQsJ,MAAM4B,GAAMlL,WAAa,yBAE3E6P,EAAM9N,KAAK+N,MAAM7E,EAAOC,GACxB6E,EAAM9E,EAAO4E,EAAM3E,SAEX,IAAR6E,IAAe7E,EAAO,GAAK6E,EAAM,GAAO7E,EAAO,GAAK6E,EAAM,KAE7DA,GAAO7E,IACL2E,GAEI5E,EAAO4E,EAAM3E,EAKd,SAAS8E,SAAS9P,EAAKJ,OAAUmQ,yDAAS,aAI3C1U,EAAO+N,MAAMpJ,UACV3E,EAAKJ,QAAQ+E,EAAKJ,GAE1B,MAAOS,MAEFA,aAAeR,IAAkBQ,EAAIL,MAAQA,EAChD,OAAO+P,EAEP,MAAM1P,GAKF,SAAS2P,SAAShQ,EAAKJ,UAEtBwJ,MAAMpJ,GAAKiQ,QAAQjQ,EAAKJ,GAIzB,SAASsQ,KAAKlQ,UAEboJ,MAAMpJ,GAAKmQ,MAIZ,SAASC,KAAKC,MAEK,iBAAdA,EACX,oCACeA,kCACd,IACW,eACT,OAAO,wCAEF,MAIF,IAAI7G,EAAOC,MAAM4G,KACtB,KACKxM,EAAO2F,EAAK7B,UACZ9D,EAAK+D,KACR,OAAO,KACJqG,MAAMpK,EAAKxG,OACd,OAAO,GAMJ,SAASiT,KAAKD,MAEK,iBAAdA,EACX,oCACeA,kCACd,IACW,eACT,OAAO,wCAEF,MAIF,IAAI7G,EAAOC,MAAM4G,KACtB,KACKxM,EAAO2F,EAAK7B,UACZ9D,EAAK+D,KACR,OAAO,MACHqG,MAAMpK,EAAKxG,OACf,OAAO,GAMJ,SAASkT,aAAavQ,eAEbzI,IAARyI,EAKD,SAASwQ,WAAWxQ,eAEXzI,IAARyI,EAID,SAASyQ,QAAQzQ,UAEhBiP,GAASyB,cAAc1Q,GAIxB,SAASmP,QAAQnP,UAEhBkO,GAASwC,cAAc1Q,GAIxB,SAASoP,OAAOpP,UAEfqO,GAAQqC,cAAc1Q,GAIvB,SAASqP,SAASrP,UAEjBuO,GAAUmC,cAAc1Q,GAIzB,SAASsP,OAAOtP,UAEfgO,GAAQ0C,cAAc1Q,GAIvB,SAASyC,YAAYzC,UAEpBwP,GAAakB,cAAc1Q,GAG5B,SAASqC,QAAQrC,UAEhB2Q,GAASD,cAAc1Q,GAIxB,SAASkC,SAASlC,UAEjB4Q,GAAUF,cAAc1Q,GAIzB,SAASiD,aAAajD,UAErB6Q,GAAcH,cAAc1Q,GAI7B,SAASqD,cAAcrD,UAEtB8Q,GAAeJ,cAAc1Q,GAI9B,SAAS+Q,YAAY/Q,UAEZ,OAARA,GAAiBA,aAAegR,IAAchR,aAAeiR,GAI9D,SAASC,YAAYlR,UAEpByP,GAAaiB,cAAc1Q,GAI5B,SAAS4D,QAAQ5D,UAEhByO,GAASiC,cAAc1Q,GAIxB,SAASgE,OAAOhE,UAEf2O,GAAQ+B,cAAc1Q,GAIvB,SAASmR,aAAanR,UAEpBA,aAAeuI,UAIjB,SAAS4D,QAAQnM,UAER,OAARA,GAAgC,WAAhBC,QAAOD,IAA0C,mBAAdA,EAAI2H,KAIxD,SAASwD,UAAUnL,UAElBuP,GAASpE,UAAUnL,GAIpB,SAAS8D,OAAO9D,UAEfuP,GAASzL,OAAO9D,GAIjB,SAAS+D,QAAQ/D,UAEhBuP,GAASmB,cAAc1Q,GAIxB,SAASoR,YAAYpR,EAAK3E,UAEzBA,EAAKqV,cAAc1Q,GAIpB,SAASqR,YAAY7X,EAAK8X,WAE5B1M,EAAS,GACN0M,EAAI,IAAKA,EACf1M,GAAUpL,SACJoL,EAGD,SAAS2M,aAAaC,EAAMF,WAE9B1M,EAAS,GACN0M,EAAI,IAAKA,sCACEE,uCAAR3N,UACRe,EAAOjH,KAAKkG,0CACPe,EAyCD,SAAS6M,QAAQzR,MAEX,OAARA,EACH,MAAO,OACH,QAAYzI,IAARyI,EACR,MAAO,YACH,IAAY,IAARA,EACR,MAAO,QACH,IAAY,IAARA,EACR,MAAO,OACH,GAAoB,iBAATA,EACf,OAjDF,SAAS0R,UAAUlY,SAEdoL,EAAS,gCACCpL,kCACd,KADSrD,iBAEAA,OAEF,KACJyO,GAAU,gBAEN,KACJA,GAAU,gBAEN,KACJA,GAAU,gBAEN,KACJA,GAAU,iBAEN,IACJA,GAAU,gBAEN,IACJA,GAAU,4BAGN+H,EAAOxW,EAAEsB,WAAW,GAEvBmN,GADG+H,GAAQ,IAAMA,EAAO,IACdxW,EAEA,MAAQ2W,MAAMH,EAAK7Q,SAAS,IAAK,IAAK,yCAI7C,IAAM8I,EAAS,IAed8M,CAAU1R,GACb,GAAoB,iBAATA,QAER,GAAKA,EAER,GAAI4D,QAAQ5D,GACjB,KACKX,EAAI,GACRA,EAAE1B,KAAK,WACHuP,GAAQ,+BACKlN,kCACjB,KADS6D,UAEJqJ,EACHA,GAAQ,EAER7N,EAAE1B,KAAK,MACR0B,EAAE1B,KAAK8T,QAAQ5N,0CAEhBxE,EAAE1B,KAAK,KACA0B,EAAEE,KAAK,IAEV,GAAIuE,OAAO9D,GAChB,KACKX,EAAI,GACRA,EAAE1B,KAAK,WACHuP,GAAQ,+BACalN,kCACzB,iCADU3H,OAAKgF,OAEV6P,EACHA,GAAQ,EAER7N,EAAE1B,KAAK,MACR0B,EAAE1B,KAAK8T,QAAQpZ,GAAM,KAAMoZ,QAAQpU,0CAEpCgC,EAAE1B,KAAK,KACA0B,EAAEE,KAAK,IAEV,GAAI4L,UAAUnL,GACnB,KACKX,EAAI,GACRA,EAAE1B,KAAK,SACHuP,GAAQ,MACP,IAAI7U,KAAO2H,EAEXkN,EACHA,GAAQ,EAER7N,EAAE1B,KAAK,MACR0B,EAAE1B,KAAK8T,QAAQpZ,GAAM,KAAMoZ,QAAQzR,EAAI3H,YAExCgH,EAAE1B,KAAK,KACA0B,EAAEE,KAAK,IAEV,GAAI8C,QAAQrC,SAET,iBAAmBA,EAAIsN,MAAM5K,cAAgB,MAAQ1C,EAAIsN,MAAM3K,WAAW,GAAK,KAAO3C,EAAIsN,MAAM1K,UAAY,IAE/G,GAAIH,YAAYzC,SAEb,YAAcA,EAAI0C,cAAgB,KAAO1C,EAAI2C,WAAa,KAAO3C,EAAI4C,UAAY,KAAO5C,EAAI6C,WAAa,KAAO7C,EAAI8C,aAAe,KAAO9C,EAAI+C,aAAe,KAAO/C,EAAIgD,kBAAoB,IAE/L,GAAIC,aAAajD,SAEd,qBAAuBA,EAAI+G,MAAQ,KAAO/G,EAAIgH,SAAW,KAAOhH,EAAIiH,cAAgB,IAEvF,GAAI5D,cAAcrD,SAEf,sBAAwBA,EAAImH,QAAU,IAEzC,GAAIjF,SAASlC,SAEV,iBAAmBA,EAAIiG,GAAK,KAAOjG,EAAIkG,GAAK,KAAOlG,EAAImG,GAAK,KAAOnG,EAAIoG,GAAK,IAE/E,GAAI2K,YAAY/Q,SAEb,sBAAwBpB,OAAMoB,EAAIW,SAAW,UAE/C,IAAIwH,GAAU,2CAId,SAASwJ,UAAU9Y,MAGzBA,EAASmV,GAAQ4D,MAAM/Y,GACnBgZ,MAAQA,KAAKC,MAChB,OAAOD,KAAKC,MAAMjZ,MACfgP,GAAagF,KAAKhU,EAAOoJ,QAAQ6F,GAAe,KAAK7F,QAAQ8F,GAAe,KAAK9F,QAAQ+F,GAAe,KAC3G,OAAQ,IAAI+J,SAAS,UAAYlZ,EAAzB,SACH,IAAIsP,GAAU,gBAId,SAAS6J,SAAShS,OAAKY,yDAAO,YAE7BD,MAAMX,EAAKY,GAIZ,SAASqR,WAAWpZ,UAEnBmI,QAAMnI,GAGd,SAASqZ,iBAAiBlS,EAAKmS,EAAKC,SAkM/BC,EAhMe,CAClBC,GAAI,CACH3E,GAAI,CAAC,MAAO,MAAO,MAAY,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OACvF4E,GAAI,CAAC,SAAU,UAAW,OAAa,QAAS,MAAO,OAAQ,OAAQ,SAAU,YAAa,UAAW,WAAY,YACrHC,GAAI,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MACzCC,GAAI,CAAC,UAAW,SAAU,WAAY,WAAY,aAAc,UAAW,WAC3EC,GAAI,WACJC,GAAI,WACJC,GAAI,wBAELC,GAAI,CACHlF,GAAI,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAClF4E,GAAI,CAAC,UAAW,WAAY,QAAS,QAAS,MAAO,OAAQ,OAAQ,SAAU,YAAa,UAAW,WAAY,YACnHC,GAAI,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAC/CC,GAAI,CAAC,SAAU,SAAU,UAAW,YAAa,WAAY,SAAU,YACvEC,GAAI,WACJC,GAAI,WACJC,GAAI,2BAELE,GAAI,CACHnF,GAAI,CAAC,QAAS,QAAc,OAAQ,QAAS,MAAO,OAAQ,QAAS,OAAa,QAAS,OAAQ,OAAQ,QAC3G4E,GAAI,CAAC,UAAW,UAAgB,OAAQ,QAAS,MAAO,OAAQ,UAAW,OAAa,YAAa,UAAW,WAAY,YAC5HC,GAAI,CAAC,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,QACrDC,GAAI,CAAC,WAAY,QAAS,QAAS,WAAY,QAAS,WAAY,UACpEC,GAAI,WACJC,GAAI,WACJC,GAAI,wBAELG,GAAI,CACHpF,GAAI,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAClF4E,GAAI,CAAC,QAAS,UAAW,QAAS,QAAS,OAAQ,QAAS,QAAS,SAAU,aAAc,UAAW,YAAa,aACrHC,GAAI,CAAC,MAAO,MAAO,MAAO,MAAY,MAAO,MAAO,OACpDC,GAAI,CAAC,UAAW,QAAS,SAAU,YAAkB,SAAU,UAAW,UAC1EC,GAAI,WACJC,GAAI,WACJC,GAAI,wBAELI,GAAI,CACHrF,GAAI,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAClF4E,GAAI,CAAC,UAAW,WAAY,QAAS,SAAU,SAAU,SAAU,SAAU,SAAU,YAAa,UAAW,WAAY,YAC3HC,GAAI,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAC/CC,GAAI,CAAC,WAAY,SAAe,UAAgB,YAAkB,UAAgB,UAAgB,UAClGC,GAAI,WACJC,GAAI,WACJC,GAAI,wBAELK,GAAI,CACHtF,GAAI,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAClF4E,GAAI,CAAC,SAAU,UAAW,QAAS,QAAS,MAAO,OAAQ,OAAQ,SAAU,YAAa,UAAW,WAAY,YACjHC,GAAI,CAAC,MAAY,MAAO,MAAO,MAAO,MAAO,MAAO,OACpDC,GAAI,CAAC,SAAe,SAAU,UAAW,SAAU,UAAW,SAAU,UACxEC,GAAI,WACJC,GAAI,WACJC,GAAI,wBAELM,GAAI,CACHvF,GAAI,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAClF4E,GAAI,CAAC,UAAW,WAAY,OAAQ,QAAS,MAAO,OAAQ,OAAQ,UAAW,YAAa,UAAW,WAAY,YACnHC,GAAI,CAAC,MAAY,MAAY,MAAO,MAAO,MAAO,MAAO,OACzDC,GAAI,CAAC,SAAe,SAAe,SAAU,SAAU,UAAW,SAAU,UAC5EC,GAAI,WACJC,GAAI,WACJC,GAAI,wBAELO,GAAI,CACHxF,GAAI,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAClF4E,GAAI,CAAC,UAAW,WAAY,QAAS,QAAS,MAAO,OAAQ,OAAQ,WAAY,YAAa,UAAW,WAAY,YACrHC,GAAI,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MACzCC,GAAI,CAAC,SAAU,UAAW,UAAW,WAAY,YAAa,UAAW,YACzEC,GAAI,WACJC,GAAI,WACJC,GAAI,wBAELQ,GAAI,CACHzF,GAAI,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAClF4E,GAAI,CAAC,UAAW,YAAa,QAAc,QAAS,OAAQ,QAAS,QAAS,SAAU,WAAY,UAAW,WAAY,YAC3HC,GAAI,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAC/CC,GAAI,CAAC,UAAW,UAAW,QAAc,SAAU,SAAU,QAAS,UACtEC,GAAI,WACJC,GAAI,WACJC,GAAI,wBAELS,GAAI,CACH1F,GAAI,CAAC,MAAO,MAAY,MAAY,MAAO,MAAY,MAAY,MAAY,MAAO,MAAiB,MAAiB,MAAO,OAC/H4E,GAAI,CAAC,QAAS,OAAa,SAAe,QAAS,SAAe,SAAe,WAAiB,QAAS,OAAuB,QAAmB,WAAY,YACjKC,GAAI,CAAC,KAAM,KAAM,KAAW,KAAM,KAAW,KAAW,MACxDC,GAAI,CAAC,SAAe,UAAqB,QAAmB,SAAe,UAAgB,QAAc,UACzGC,GAAI,WACJC,GAAI,WACJC,GAAI,0BAELU,GAAI,CACH3F,GAAI,CAAC,MAAO,MAAO,MAAO,MAAO,MAAY,MAAY,MAAY,MAAO,MAAO,MAAO,MAAO,OACjG4E,GAAI,CAAC,SAAe,UAAgB,QAAS,QAAc,MAAY,MAAY,MAAY,SAAU,YAAa,UAAgB,WAAY,YAClJC,GAAI,CAAC,KAAM,KAAM,KAAM,KAAM,KAAW,KAAM,MAC9CC,GAAI,CAAC,SAAe,WAAY,SAAU,SAAU,UAAgB,SAAU,UAC9EC,GAAI,WACJC,GAAI,WACJC,GAAI,0BAELW,GAAI,CACH5F,GAAI,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAY,MAAO,OACvF4E,GAAI,CAAC,UAAgB,OAAQ,SAAU,WAAiB,MAAO,WAAY,SAAU,WAAiB,WAAiB,cAAoB,WAAY,YACvJC,GAAI,CAAC,MAAO,MAAO,MAAO,MAAY,MAAO,MAAY,OACzDC,GAAI,CAAC,YAAa,eAAqB,SAAU,QAAc,WAAY,SAAe,UAC1FC,GAAI,WACJC,GAAI,WACJC,GAAI,0BAELY,GAAI,CACH7F,GAAI,CAAC,MAAO,MAAO,MAAY,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OACvF4E,GAAI,CAAC,WAAiB,UAAgB,SAAe,UAAW,UAAW,SAAU,SAAU,UAAW,QAAS,WAAY,UAAW,YAC1IC,GAAI,CAAC,MAAO,MAAO,MAAO,MAAO,MAAY,MAAO,OACpDC,GAAI,CAAC,WAAY,cAAe,SAAU,UAAW,WAAiB,QAAS,UAC/EC,GAAI,WACJC,GAAI,WACJC,GAAI,wBAELa,GAAI,CACH9F,GAAI,CAAC,MAAsB,MAAsB,MAAsB,MAAsB,MAAsB,MAAsB,MAAsB,MAAsB,MAAsB,MAAsB,MAAsB,OACvP4E,GAAI,CAAC,SAAwC,UAA8C,OAA4B,QAAkC,MAAsB,MAAsB,MAAsB,SAAwC,YAA0D,UAA8C,WAAoD,YAC/ZC,GAAI,CAAC,MAAsB,MAAsB,MAAsB,MAAsB,MAAsB,MAAsB,OACzIC,GAAI,CAAC,SAAwC,YAA0D,SAAwC,QAAkC,WAAoD,QAAkC,UACvQC,GAAI,YACJC,GAAI,WACJC,GAAI,2BAELc,GAAI,CACH/F,GAAI,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAClF4E,GAAI,CAAC,WAAY,YAAa,SAAU,UAAW,MAAO,QAAS,QAAS,SAAU,aAAc,YAAa,YAAa,aAC9HC,GAAI,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MACzCC,GAAI,CAAC,WAAiB,OAAQ,QAAc,WAAY,MAAO,SAAU,WACzEC,GAAI,WACJC,GAAI,WACJC,GAAI,wBAELe,GAAI,CACHhG,GAAI,CAAC,MAAO,OAAQ,OAAa,MAAY,MAAY,MAAY,MAAY,MAAO,QAAS,MAAO,MAAO,OAC/G4E,GAAI,CAAC,SAAe,UAAgB,UAAgB,UAAgB,QAAc,SAAe,SAAe,YAAa,aAAc,UAAgB,WAAY,YACvKC,GAAI,CAAC,IAAK,IAAK,IAAK,MAAO,KAAM,IAAK,OACtCC,GAAI,CAAC,WAAiB,QAAmB,OAAQ,SAAU,YAA4B,SAAe,WACtGC,GAAI,WACJC,GAAI,WACJC,GAAI,6BAELgB,GAAI,CACHjG,GAAI,CAAC,MAAO,MAAY,MAAO,MAAO,MAAO,MAAO,MAAO,MAAY,MAAO,MAAO,MAAO,OAC5F4E,GAAI,CAAC,OAAQ,QAAc,OAAQ,QAAS,QAAc,UAAW,SAAU,UAAgB,QAAc,OAAQ,QAAc,UACnIC,GAAI,CAAC,MAAO,MAAO,MAAO,MAAiB,MAAY,MAAO,OAC9DC,GAAI,CAAC,QAAS,YAAa,OAAa,WAAsB,WAAiB,OAAQ,aACvFC,GAAI,WACJC,GAAI,WACJC,GAAI,wBAELiB,GAAI,CACHlG,GAAI,CAAC,MAAsB,MAAsB,MAAsB,MAAsB,MAAsB,MAAsB,MAAsB,MAAsB,MAAsB,MAAsB,MAAsB,OACvP4E,GAAI,CAAC,SAAwC,UAA8C,OAA4B,SAAwC,MAAsB,OAA4B,OAA4B,SAAwC,WAAoD,UAA8C,SAAwC,WAC/ZC,GAAI,CAAC,MAAsB,MAAsB,MAAsB,MAAsB,MAAsB,MAAsB,OACzIC,GAAI,CAAC,cAAsE,cAAsE,UAA8C,QAAkC,UAA8C,UAA8C,WAC7TC,GAAI,WACJC,GAAI,WACJC,GAAI,wBAELkB,GAAI,CACHnG,GAAI,CAAC,MAAY,MAAY,MAAY,MAAY,MAAY,MAAY,MAAY,MAAY,MAAY,MAAY,MAAY,OACzI4E,GAAI,CAAC,KAAgB,KAAgB,KAAgB,KAAgB,KAAgB,KAAgB,KAAgB,KAAgB,KAAgB,KAAgB,MAAsB,OAC3LC,GAAI,CAAC,IAAU,IAAU,IAAU,IAAU,IAAU,IAAU,KACjEC,GAAI,CAAC,MAAsB,MAAsB,MAAsB,MAAsB,MAAsB,MAAsB,OACzIC,GAAI,WACJC,GAAI,YACJC,GAAI,yBAELmB,GAAI,CACHpG,GAAI,CAAC,MAAY,MAAY,MAAY,MAAY,MAAY,MAAY,MAAY,MAAY,MAAY,MAAY,MAAY,OACzI4E,GAAI,CAAC,KAAW,KAAW,KAAW,KAAW,KAAW,KAAW,KAAW,KAAW,KAAW,MAAY,MAAY,OAChIC,GAAI,CAAC,IAAU,IAAU,IAAU,IAAU,IAAU,IAAU,KACjEC,GAAI,CAAC,MAAsB,MAAsB,MAAsB,MAAsB,MAAsB,MAAsB,OACzIC,GAAI,aACJC,GAAI,cACJC,GAAI,kCAELoB,GAAI,CACHrG,GAAI,CAAC,MAAY,MAAY,MAAY,MAAY,MAAY,MAAY,MAAY,MAAY,MAAY,MAAY,MAAY,OACzI4E,GAAI,CAAC,KAAW,KAAW,KAAW,KAAW,KAAW,KAAW,KAAW,KAAW,KAAW,MAAY,MAAY,OAChIC,GAAI,CAAC,IAAU,IAAU,IAAU,IAAU,IAAU,IAAU,KACjEC,GAAI,CAAC,MAAsB,MAAsB,MAAsB,MAAsB,MAAsB,MAAsB,OACzIC,GAAI,WACJC,GAAI,YACJC,GAAI,uBAIyBR,GAE3BxN,EAAS,GACTqP,GAAS,+BACC9B,kCACd,KADShc,aAEJ8d,EACJ,QACS9d,OAEF,IACJA,EAAIkc,EAAYG,GAAGxS,EAAIkU,oBAEnB,IACJ/d,EAAIkc,EAAYI,GAAGzS,EAAIkU,oBAEnB,IACJ/d,EAAIkc,EAAY1E,GAAG3N,EAAI2C,sBAEnB,IACJxM,EAAIkc,EAAYE,GAAGvS,EAAI2C,sBAEnB,IACJxM,EAAIge,QAAQnU,EAAKqS,EAAYO,GAAIR,aAE7B,IACJjc,EAAI2W,MAAM9M,EAAI4C,UAAW,IAAK,aAE1B,IACJzM,EAAI2W,MAAM9M,EAAIgD,kBAAmB,IAAK,GAAK,gBAEvC,IACJ7M,EAAI2W,MAAM9M,EAAI6C,WAAY,IAAK,aAE3B,IACJ1M,EAAI2W,OAAQ9M,EAAI6C,WAAW,GAAK,GAAI,EAAG,IAAK,aAExC,IACJ1M,EAAI2W,MAAM0C,GAAa4E,QAAQpU,GAAM,IAAK,aAEtC,IACJ7J,EAAI2W,MAAM9M,EAAI2C,WAAW,EAAG,IAAK,aAE7B,IACJxM,EAAI2W,MAAM9M,EAAI8C,aAAc,IAAK,aAE7B,IACJ3M,EAAI6J,EAAI6C,WAAa,GAAK,KAAO,eAE7B,IACJ1M,EAAI2W,MAAM9M,EAAI+C,aAAc,IAAK,aAE7B,IACJ5M,EAAI2W,MAAMuH,aAAarU,EAAK,GAAI,IAAK,aAEjC,IACJ7J,EAAI6J,EAAIkU,mBAEJ,IACJ/d,EAAI2W,MAAMuH,aAAarU,EAAK,GAAI,IAAK,aAEjC,IACJ7J,EAAIge,QAAQnU,EAAKqS,EAAYK,GAAIN,aAE7B,IACJjc,EAAIge,QAAQnU,EAAKqS,EAAYM,GAAIP,aAE7B,IACJjc,GAAK6J,EAAI0C,cAAgB,KAAK5G,qBAE1B,IACJ3F,EAAI6J,EAAI0C,cAAc5G,qBAElB,QAIA,IAEJ3F,EAAI,GAGNyO,EAAOjH,KAAKxH,GACZ8d,GAAS,MAIA,KAAL9d,EACH8d,GAAS,EAETrP,EAAOjH,KAAKxH,yCAGRyO,EAAOrF,KAAK,IAGpB,SAAS+U,YAAYtU,EAAKmS,EAAKC,OAE1BmC,EAAOpC,EAGPjU,EAAO,IACPsW,EAAQ,IACRC,EAAO,IACPC,GAAY,EACZC,EAAe,EACftZ,EAAO,OAGP,aAAawR,KAAK0H,KAErBlZ,EAAOkZ,EAAK1P,UAAU0P,EAAKxd,OAAO,GAClCwd,EAAOA,EAAK1P,UAAU,EAAG0P,EAAKxd,OAAO,IAIlC,OAAO8V,KAAK0H,GAChB,KACKK,EAAkB,OAAOC,KAAKN,GAClCA,EAAOA,EAAKtS,QAAQ,OAAQ,IACxB,KAAK4K,KAAK+H,KAEbJ,EAAQ,IACRtW,EAAO,KAERyW,EAAepP,SAASqP,MAIrB,KAAK/H,KAAK0H,KAEbG,GAAY,EACZH,EAAOA,EAAK1P,UAAU,EAAG0P,EAAKxd,OAAO,IAIlC,SAAS8V,KAAK0H,GAClB,IACa,KAARlZ,EACH,MAAM,IAAI4I,GAAW,gDACtBwQ,EAAOF,EAAK1P,UAAU0P,EAAKxd,OAAO,GAClCwd,EAAOA,EAAK1P,UAAU,EAAG0P,EAAKxd,OAAO,MAIlCwd,EAAKxd,QAAU,EAClB,MAAM,IAAIkN,GAAW,iCAAmCrF,OAAMuT,IAC1D,GAAmB,GAAfoC,EAAKxd,OACd,KACK,UAAU8V,KAAK0H,GAMlB,MAAM,IAAItQ,GAAW,iCAAmCrF,OAAMuT,IAJ9DqC,EAAQD,EAAK,GACbrW,EAAOqW,EAAK,QAKT,GAAmB,GAAfA,EAAKxd,OACd,KACK,WAAW8V,KAAK0H,GAGnB,MAAM,IAAItQ,GAAW,iCAAmCrF,OAAMuT,IAF9DqC,EAAQD,MAWNrd,EALAmD,EAAM2F,EAAM,SAEZ3F,IACH2F,GAAOA,GAGA3E,OAEF,IACJnE,EAAS8I,EAAIlE,SAAS,aAElB,OACAzB,GAAO2F,EAAM,MAChB,MAAM,IAAIiE,GAAW,oCACtB/M,EAASE,OAAOC,aAAa2I,aAEzB,IACJ9I,EAAS8I,EAAIlE,qBAET,IACJ5E,EAAS8I,EAAIlE,SAAS,aAElB,IACJ5E,EAAS8I,EAAIlE,SAAS,cAElB,IACJ5E,EAAS8I,EAAIlE,SAAS,IAAIgZ,wBAEtB,IAEJ5d,EAAS8I,EAAIlE,cAKD,MAAV0Y,GAECna,GAAgB,MAAToa,MACRE,GACCD,GAAuB,MAATrZ,GAAyB,MAATA,GAAyB,MAATA,GAAyB,MAATA,IACjEsZ,GAAgB,GAEbzd,EAAOH,OAAS4d,IACnBzd,EAASma,YAAYnT,EAAMyW,EAAazd,EAAOH,QAAUG,IAEtDwd,GAAuB,MAATrZ,GAAyB,MAATA,GAAyB,MAATA,GAAyB,MAATA,IACjEnE,EAAS,IAAMmE,EAAOnE,GAEnBmD,EACHnD,EAAS,IAAMA,EACC,KAARud,IACRvd,EAASud,EAAOvd,YAIbwd,GAAsB,KAARrZ,GAAuB,KAARA,GAAuB,KAARA,GAAuB,KAARA,IAC9DnE,EAAS,IAAMmE,EAAOnE,GACnBmD,EACHnD,EAAS,IAAMA,EACC,KAARud,IACRvd,EAASud,EAAOvd,GACbA,EAAOH,OAAS4d,KAEN,KAATH,EACHtd,GAAkBma,YAAYnT,EAAMyW,EAAazd,EAAOH,aACpD,GAAa,KAATyd,EACRtd,EAASma,YAAYnT,EAAMyW,EAAazd,EAAOH,QAAUG,WAGrD6d,EAAMJ,EAAezd,EAAOH,OAC5Bie,EAAYnT,KAAK+N,MAAMmF,EAAI,GAC3BE,EAAWF,EAAIC,EACnB9d,EAASma,YAAYnT,EAAM8W,GAAa9d,EAASma,YAAYnT,EAAM+W,UAI/D/d,EAID,SAASid,QAAQnU,EAAKmS,EAAKC,MAE7BA,MAAAA,EACHA,EAAO,SAER,KACK8C,EAAe,CAAC5C,GAAI,KAAMO,GAAI,KAAMC,GAAI,KAAMC,GAAI,KAAMC,GAAI,KAAMC,GAAI,KAAMC,GAAI,KAAMC,GAAI,KAAMC,GAAI,KAAMC,GAAI,KAAMC,GAAI,KAAMC,GAAI,KAAMC,GAAI,KAAMC,GAAI,KAAMC,GAAI,KAAMC,GAAI,KAAMC,GAAI,KAAMC,GAAI,KAAMC,GAAI,KAAMC,GAAI,KAAMC,GAAI,WAErMzc,IAAvB2d,EADJ9C,EAAOA,EAAK+C,qBAIgB5d,IAAvB2d,EADJ9C,EAAOA,EAAKgD,MAAM,KAAK,MAEtBhD,EAAO,aAGN/P,QAAQrC,GACJkS,iBAAiBlS,EAAIsN,MAAO6E,EAAKC,GACrC3P,YAAYzC,GACRkS,iBAAiBlS,EAAKmS,EAAKC,GAC1BhD,OAAOpP,GACRsU,YAAYtU,EAAKmS,IACR,IAARnS,EACDsU,YAAY,EAAGnC,IACN,IAARnS,EACDsU,YAAY,EAAGnC,QADlB,EAIC,SAASrF,MAAMjU,EAAQkc,EAAKte,OAEX,iBAAZoC,IACVA,EAASA,EAAOiD,YACVjD,EAAO9B,OAASN,GACtBoC,EAASkc,EAAMlc,SACTA,EAGD,SAASwc,MAAMxc,EAAQkc,EAAKte,OAEX,iBAAZoC,IACVA,EAASA,EAAOiD,YACVjD,EAAO9B,OAASN,GACtBoC,GAAkBkc,SACZlc,EAKD,SAASyc,QAAQC,EAASxV,UAEzBnE,OAAO4Z,OAAO5Z,OAAO6Z,OAAOF,GAAUxV,OAYnCkP,GAAW,mCARCzP,4KAEtB,uBAAcQ,UAEE,OAARA,kBAIa,CAAa,KAAM,OAAQ,wBAWtCkP,GAAgB,wCARC1P,gMAE3B,uBAAcQ,eAEEzI,IAARyI,uBAIkB,CAAkB,KAAM,YAAa,8CAG1D0V,kCAAiBlW,sJAGrBjG,EAAQK,gCAAMoG,6DAEVA,MAAAA,IAA6C,IAARA,GAAyB,IAARA,GAAqB,KAARA,EACtE,OAAO,EACH,GAAoB,WAAhBC,QAAOD,IAAmD,mBAAvBA,EAAIzG,EAAQI,MACvD,OAAOqG,EAAIzG,EAAQI,QACf,GAAIiK,QAAQ5D,GAChB,OAAsB,IAAfA,EAAIjJ,OACP,GAAI+M,OAAO9D,IAAQgE,OAAOhE,GAC9B,OAAmB,GAAZA,EAAI2E,KACP,GAAIwG,UAAUnL,GACnB,KACM,IAAI3H,KAAO2H,KAEVA,EAAIoL,eAAe/S,UAEjB,SAED,SAED,+BAGR,uBAAc2H,SAEU,kBAATA,kBAIhB1E,OAAOoa,GAAS7Z,UAAW,CAAC,MAAO,MAAM,GAAQ,CAACH,KAAM,aAE7CwS,GAAW,IAAIwH,GAAS,KAAM,OAAQ,oBAG3CC,iCAAgBnW,kJAGpBjG,EAAQK,gCAEJgL,EAFU5E,yDAAI,EAAGoO,yDAAK,QAGb,OAATA,EACJ,IACqB,iBAATpO,IAAsBoP,OAAOhB,GACvC,MAAM,IAAIjG,GAAU,6CAEI,QADzBvD,EAASW,SAASvF,EAAKoO,IACZtS,WACV,MAAM,IAAIqM,GAAU,oCACdvD,KAIa,iBAAT5E,EACX,IAE0B,QADzB4E,EAASW,SAASvF,IACPlE,WACX,MAAM,IAAIqM,GAAU,oCACbvD,EAEH,GAAoB,iBAAT5E,EACf,OAAO6B,KAAK+N,MAAM5P,GACd,IAAY,IAARA,EACR,OAAO,EACH,IAAY,IAARA,EACR,OAAO,QACF,IAAImI,GAAU,4EAItB,uBAAcnI,SAEW,iBAATA,GAAsB6B,KAAKC,MAAM9B,IAAQA,iBAI1D1E,OAAOqa,GAAQ9Z,UAAW,CAAC,MAAO,KAAM,EAAG,OAAQ,MAAO,MAAO,CAACH,KAAM,YAE7D2S,GAAU,IAAIsH,GAAQ,KAAM,MAAO,cAGxCC,mCAAkBpW,0JAGtBjG,EAAQK,gCAAMoG,yDAAI,KAEE,iBAATA,EACV,OAAOgF,WAAWhF,GACd,GAAoB,iBAATA,EACf,OAAOA,EACH,IAAY,IAARA,EACR,OAAO,EACH,IAAY,IAARA,EACR,OAAO,QACF,IAAImI,GAAU,8EAGrB,uBAAcnI,SAEW,iBAATA,GAAsB6B,KAAKC,MAAM9B,IAAQA,mBAI1D1E,OAAOsa,GAAU/Z,UAAW,CAAC,MAAO,KAAM,GAAM,CAACH,KAAM,cAE5C6S,GAAY,IAAIqH,GAAU,KAAM,QAAS,2BAGvCC,iCAAgBrW,kJAE3BjG,EAAQK,WAAT,qBAAeoG,yDAAI,gBAEdA,EACI,IAGS,IAARA,EACD,SACS,IAARA,EACD,OACiB,iBAATA,EACRA,EACiB,iBAATA,EACRA,EAAIlE,WACHuG,QAAQrC,GACT6N,UAAU7N,GACTyC,YAAYzC,GACb8N,cAAc9N,GACb4D,QAAQ5D,GACTiN,WAAWjN,GACVgE,OAAOhE,GACRmN,UAAUnN,GACT8D,OAAO9D,GACR+M,UAAU/M,GACO,WAAhBC,QAAOD,IAAkD,mBAAtBA,EAAIzG,EAAQC,KAChDwG,EAAIzG,EAAQC,OACK,WAAhByG,QAAOD,IAAmD,mBAAvBA,EAAIzG,EAAQG,MAChDsG,EAAIzG,EAAQG,QACXyR,UAAUnL,GACXoN,aAAapN,GAEbpB,OAAMoB,gCAGf,uBAAcA,SAEU,iBAATA,uBAGf,eAAMA,EAAKvF,OAAK+I,yDAAM,KAAMsS,yDAAI,YAExBC,OAAO/V,EAAKvF,EAAK+I,EAAOsS,uBAGhC,cAAK9V,EAAKvF,OAAK+I,yDAAM,KAAMsS,yDAAI,YAEvBE,MAAMhW,EAAKvF,EAAK+I,EAAOsS,wBAG/B,eAAM9V,EAAKvF,OAAK+I,yDAAM,KAAMsS,yDAAI,YAExBG,OAAOjW,EAAKvF,EAAK+I,EAAOsS,0BAGhC,iBAAQ9V,EAAKkW,EAAKC,OAAMpY,yDAAM,KAEf,OAAVA,IACHA,EAAQiC,EAAIjJ,gBAET6N,EAAS,GACN5E,EAAIjJ,QACX,KACKyG,EAAMwC,EAAI3B,QAAQ6X,OACT,IAAT1Y,IAAeO,IACnB,CACC6G,EAAOjH,KAAKqC,SAGb4E,EAAOjH,KAAKqC,EAAIoW,OAAO,EAAG5Y,GAAM2Y,GAChCnW,EAAMA,EAAIoW,OAAO5Y,EAAM0Y,EAAInf,eAErB6N,EAAOrF,KAAK,yBAGpB,eAAMS,OAAKoF,yDAAM,QAGM,iBADtBA,EAAQA,GAAS,WAEhB,MAAM,IAAI+C,GAAU,2CAEdnI,GAAOoF,EAAM/G,QAAQ2B,EAAI,KAAO,GACtCA,EAAMA,EAAIoW,OAAO,QACXpW,GAAOoF,EAAM/G,QAAQ2B,EAAIA,EAAIjJ,OAAO,KAAO,GACjDiJ,EAAMA,EAAIoW,OAAO,EAAGpW,EAAIjJ,OAAO,UACzBiJ,wBAGR,gBAAOA,OAAKoF,yDAAM,QAGK,iBADtBA,EAAQA,GAAS,WAEhB,MAAM,IAAI+C,GAAU,4CAEdnI,GAAOoF,EAAM/G,QAAQ2B,EAAI,KAAO,GACtCA,EAAMA,EAAIoW,OAAO,UACXpW,wBAGR,gBAAOA,OAAKoF,yDAAM,QAGK,iBADtBA,EAAQA,GAAS,WAEhB,MAAM,IAAI+C,GAAU,4CAEdnI,GAAOoF,EAAM/G,QAAQ2B,EAAIA,EAAIjJ,OAAO,KAAO,GACjDiJ,EAAMA,EAAIoW,OAAO,EAAGpW,EAAIjJ,OAAO,UACzBiJ,uBAGR,eAAMA,OAAKb,yDAAI,KAAMkX,yDAAS,QAEjB,OAARlX,GAAgC,iBAATA,EAC1B,MAAM,IAAIgJ,GAAU,gCAEJ,OAAbkO,EACJ,KACKzR,EAAS5E,EAAIoV,MAAc,OAARjW,EAAeA,EAAM,qBAChC,OAARA,IAECyF,EAAO7N,SAAW6N,EAAO,GAAG7N,QAC/B6N,EAAO0R,OAAO,EAAG,GACd1R,EAAO7N,SAAW6N,EAAOA,EAAO7N,OAAO,GAAGA,QAC7C6N,EAAO0R,QAAQ,IAEV1R,KAIK,OAARzF,EACJ,SACKyF,EAAS,GACN5E,EAAIjJ,QACX,KACKyG,EAAMwC,EAAI3B,QAAQc,OACT,IAAT3B,IAAe6Y,IACnB,CACCzR,EAAOjH,KAAKqC,SAGb4E,EAAOjH,KAAKqC,EAAIoW,OAAO,EAAG5Y,IAC1BwC,EAAMA,EAAIoW,OAAO5Y,EAAM2B,EAAIpI,eAErB6N,UAIHA,EAAS,GACN5E,EAAIjJ,QACX,CACCiJ,EAAMgO,GAAQuI,OAAOvW,EAAK,UACtB+J,UAIHA,EAHIsM,IAGGrW,EAAIoV,MAAM,aAAc,GAAG,GAF1BpV,GAGAjJ,QACR6N,EAAOjH,KAAKoM,GACb/J,EAAMA,EAAIoW,OAAOrM,EAAKhT,eAEhB6N,wBAKV,gBAAO5E,OAAKb,yDAAI,KAAMkX,yDAAS,QAElB,OAARlX,GAAgC,iBAATA,EAC1B,MAAM,IAAIgJ,GAAU,oDAEJ,OAAbkO,EACJ,KACKzR,EAAS5E,EAAIoV,MAAc,OAARjW,EAAeA,EAAM,qBAChC,OAARA,IAECyF,EAAO7N,SAAW6N,EAAO,GAAG7N,QAC/B6N,EAAO0R,OAAO,EAAG,GACd1R,EAAO7N,SAAW6N,EAAOA,EAAO7N,OAAO,GAAGA,QAC7C6N,EAAO0R,QAAQ,IAEV1R,KAIK,OAARzF,EACJ,SACKyF,EAAS,GACN5E,EAAIjJ,QACX,KACKyG,EAAMwC,EAAIwW,YAAYrX,OACb,IAAT3B,IAAe6Y,IACnB,CACCzR,EAAOgE,QAAQ5I,SAGhB4E,EAAOgE,QAAQ5I,EAAIoW,OAAO5Y,EAAI2B,EAAIpI,SAClCiJ,EAAMA,EAAIoW,OAAO,EAAG5Y,UAEdoH,UAIHA,EAAS,GACN5E,EAAIjJ,QACX,CACCiJ,EAAMgO,GAAQyI,OAAOzW,OACjB+J,UAMHA,EALIsM,KAIJtM,EAAO/J,EAAIoV,MAAM,eACLrL,EAAKhT,OAAO,GAJhBiJ,GAMAjJ,QACR6N,EAAOgE,QAAQmB,GAChB/J,EAAMA,EAAIoW,OAAO,EAAGpW,EAAIjJ,OAAOgT,EAAKhT,eAE9B6N,4BAKV,oBAAW5E,OAGN0W,EAHWC,0DAEXnZ,EAAM,EAENoZ,EAAmB,SAASA,uBAE3BzgB,EAAI6J,EAAIxC,SACF,OAANrH,GAAmB,MAALA,GAAsB,MAALA,GAAsB,KAALA,GAAsB,KAALA,GAAsB,KAALA,GAAsB,KAALA,GAAsB,UAALA,GAAsB,UAALA,EACjI,EACE,OAANA,EAECqH,GAAOzG,EAAO,EACV,EACW,OAAfiJ,EAAIxC,EAAI,GACJ,EACD,EAED,GAGJoH,EAAS,GAAI7N,EAASiJ,EAAIjJ,WAEzByG,EAAM,EAAGkZ,EAAW,IACzB,IACKlZ,GAAOzG,SAEN2f,GAAYlZ,GACfoH,EAAOjH,KAAKqC,EAAI6E,UAAU6R,IACpB9R,MAEJiS,EAAaD,OACZC,EAGL,KACKC,EAAStZ,GAAOmZ,EAAWE,EAAa,GAC5CjS,EAAOjH,KAAKqC,EAAI6E,UAAU6R,EAAUI,IAEpCJ,EADAlZ,GAAOqZ,QALLrZ,wBAWL,eAAMwC,UAEEA,EAAImV,mCAGZ,eAAMnV,UAEEA,EAAI8U,wCAGZ,oBAAW9U,UAENA,EAAIjJ,SACPiJ,EAAMA,EAAI,GAAG8U,cAAgB9U,EAAIuD,MAAM,GAAG4R,eACpCnV,sBAGR,cAAKA,EAAKqQ,WAEL0G,EAAa,GACRvN,EAAOC,MAAM4G,KACtB,KACKxM,EAAO2F,EAAK7B,UACZ9D,EAAK+D,KACR,MACDmP,EAAWpZ,KAAKkG,EAAKxG,cAEf0Z,EAAWxX,KAAKS,6BAGxB,oBAAWA,EAAKgX,MAEQ,iBAAZA,EACV,OAAOhX,EAAIoW,OAAO,EAAGY,EAAOjgB,UAAYigB,EACpC,GAAIpT,QAAQoT,GACjB,oCACuBA,kCACtB,KADSC,aAEJjX,EAAIoW,OAAO,EAAGa,EAAUlgB,UAAYkgB,EACvC,OAAO,wCAEF,EAGP,MAAM,IAAI9O,GAAU,gEAGtB,kBAASnI,EAAKkX,MAEU,iBAAZA,EACV,OAAOlX,EAAIoW,OAAOpW,EAAIjJ,OAAOmgB,EAAOngB,UAAYmgB,EAC5C,GAAItT,QAAQsT,GACjB,oCACuBA,kCACtB,KADSC,aAEJnX,EAAIoW,OAAOpW,EAAIjJ,OAAOogB,EAAUpgB,UAAYogB,EAC/C,OAAO,wCAEF,EAGP,MAAM,IAAIhP,GAAU,wEAIvB0N,GAAQha,UAAUkE,MAAQ,IAAIQ,IAAI,CACjC,QACA,SACA,aACA,QACA,SACA,SACA,QACA,QACA,aACA,aACA,WACA,UACA,QACA,OACA,QACA,SAGDjF,OAAOua,GAAQha,UAAUkC,MAAO,CAAC,MAAO,IAAK,QAAS,KAAM,KAAM,MAAO,KAAM,OAC/EzC,OAAOua,GAAQha,UAAUub,KAAM,CAAC,MAAO,IAAK,QAAS,KAAM,KAAM,MAAO,KAAM,OAC9E9b,OAAOua,GAAQha,UAAUwb,MAAO,CAAC,MAAO,IAAK,QAAS,KAAM,KAAM,MAAO,KAAM,OAC/E/b,OAAOua,GAAQha,UAAUoG,QAAS,CAAC,MAAO,IAAK,MAAO,IAAK,QAAS,KAAM,OAC1E3G,OAAOua,GAAQha,UAAU+V,MAAO,CAAC,QAAS,KAAM,OAChDtW,OAAOua,GAAQha,UAAU0a,OAAQ,CAAC,QAAS,KAAM,OACjDjb,OAAOua,GAAQha,UAAU4a,OAAQ,CAAC,QAAS,KAAM,OACjDnb,OAAOua,GAAQha,UAAUuZ,MAAO,CAAC,MAAO,MAAO,KAAM,WAAY,MAAO,OACxE9Z,OAAOua,GAAQha,UAAUyb,OAAQ,CAAC,MAAO,MAAO,KAAM,WAAY,MAAO,OACzEhc,OAAOua,GAAQha,UAAU0b,WAAY,CAAC,WAAY,OAAO,IACzDjc,OAAOua,GAAQha,UAAU2b,MAAO,IAChClc,OAAOua,GAAQha,UAAUwM,MAAO,IAChC/M,OAAOua,GAAQha,UAAU4b,WAAY,IACrCnc,OAAOua,GAAQha,UAAU0D,KAAM,CAAC,WAAY,MAC5CjE,OAAOua,GAAQha,UAAU6b,WAAY,CAAC,SAAU,MAChDpc,OAAOua,GAAQha,UAAU8b,SAAU,CAAC,SAAU,MAC9Crc,OAAOua,GAAQha,UAAW,CAAC,MAAO,KAAM,IAAK,CAACH,KAAM,YAEzCsS,GAAU,IAAI6H,GAAQ,KAAM,MAAO,aAGjC+B,kCAAiBpY,sJAG5BjG,EAAQK,0BAAMoG,WAEVwJ,EAAOC,MAAMzJ,GAEb4E,EAAS,KAEb,KACKvH,MAAQmM,EAAK7B,UACbtK,MAAMuK,KACT,OAAOhD,EACRA,EAAOjH,KAAKN,MAAMA,qCAIpB,uBAAc2C,SAEkC,mBAAxCpE,OAAOC,UAAUC,SAASlC,KAAKoG,yBAGvC,gBAAOA,EAAK6X,sCAEMA,uCAARhU,UACR7D,EAAIrC,KAAKkG,yCACH,2BAGR,gBAAO7D,EAAKxC,EAAKqa,GAEZra,EAAM,IACTA,GAAOwC,EAAIjJ,2CAEK8gB,uCAARhU,UACR7D,EAAIsW,OAAO9Y,IAAO,EAAGqG,yCACf,wBAGR,aAAI7D,EAAKxC,GAEJA,EAAM,IACTA,GAAOwC,EAAIjJ,YAER6N,EAAS5E,EAAIxC,UACjBwC,EAAIsW,OAAO9Y,EAAK,GACToH,uBAGR,eAAM5E,EAAKvF,OAAK+I,yDAAM,KAAMsS,yDAAI,YAExBC,OAAO/V,EAAKvF,EAAK+I,EAAOsS,uBAGhC,cAAK9V,EAAKvF,OAAK+I,yDAAM,KAAMsS,yDAAI,YAEvBE,MAAMhW,EAAKvF,EAAK+I,EAAOsS,wBAG/B,eAAM9V,EAAKvF,OAAK+I,yDAAM,KAAMsS,yDAAI,YAExBG,OAAOjW,EAAKvF,EAAK+I,EAAOsS,mBAIjC8B,GAAS/b,UAAUkE,MAAQ,IAAIQ,IAAI,CAClC,SACA,SACA,MACA,QACA,OACA,UAGDjF,OAAOsc,GAAS/b,UAAUic,OAAQ,CAAC,QAAS,MAC5Cxc,OAAOsc,GAAS/b,UAAUkc,OAAQ,CAAC,MAAO,IAAK,QAAS,MACxDzc,OAAOsc,GAAS/b,UAAUwL,IAAK,CAAC,MAAO,MAAO,IAC9C/L,OAAOsc,GAAS/b,UAAUkC,MAAO,CAAC,MAAO,IAAK,QAAS,KAAM,KAAM,MAAO,KAAM,OAChFzC,OAAOsc,GAAS/b,UAAUub,KAAM,CAAC,MAAO,IAAK,QAAS,KAAM,KAAM,MAAO,KAAM,OAC/E9b,OAAOsc,GAAS/b,UAAUwb,MAAO,CAAC,MAAO,IAAK,QAAS,KAAM,KAAM,MAAO,KAAM,OAChF/b,OAAOsc,GAAS/b,UAAW,CAAC,WAAY,KAAM,IAAK,CAACH,KAAM,aAE/C+S,GAAW,IAAImJ,GAAS,KAAM,OAAQ,WAG3CI,kCAAiBxY,sJAErBjG,EAAQK,WAAT,eAAegE,EAAMC,OAEhB+G,EAAS,IAAI9G,gBACZma,OAAOrT,EAAQhH,EAAMC,GACnB+G,wBAGR,gBAAO5E,UAES,OAARA,GAAgC,WAAhBC,QAAOD,IAA+C,WAA1BC,QAAOD,EAAIkY,YAA2BlY,EAAIkY,YAAcpa,IAAIjC,mCAGhH,mBAAUmE,SAEsC,oBAAxCpE,OAAOC,UAAUC,SAASlC,KAAKoG,MAAgCA,aAAe1D,iCAGtF,uBAAc0D,UAENuP,GAASzL,OAAO9D,IAAQuP,GAASpE,UAAUnL,0BAGnD,iBAAQA,EAAKJ,MAERkE,OAAO9D,GACX,IACK7G,KAAK4G,MAAMlB,IAAIe,GACnB,KACKM,EAAO/G,KAAKyG,GACZO,EAAW,SAASA,sCAAYvC,2BAAAA,yBAC5BsC,EAAKE,MAAMjH,MAAO6G,UAAQpC,YAGlCuC,EAASxE,UAAYuE,EAAKvE,WAAauE,EAAKxE,KAC5CyE,EAASnE,eAAiBkE,EAAKlE,eAC/BmE,EAASlE,iBAAmBiE,EAAKjE,iBACjCkE,EAAShE,kBAAoB+D,EAAK/D,kBAC3BgE,EAGP,OAAOH,EAAIqL,IAAIzL,OAIbgF,KAKmB,mBAHtBA,EADG5E,GAAwC,mBAA1BA,EAAIzG,EAAQ0B,SACpB+E,EAAIzG,EAAQ0B,SAAS2E,GAErBI,EAAIJ,IAEb,OAAOgF,MACJuT,EAAa,SAAbA,wCAAyBva,2BAAAA,yBAErBgH,EAAOxE,MAAMJ,EAAKpC,WAE1Bua,EAAWxc,UAAYiJ,EAAOjJ,WAAaiJ,EAAOlJ,KAClDyc,EAAWnc,eAAiB4I,EAAO5I,eACnCmc,EAAWlc,iBAAmB2I,EAAO3I,iBACrCkc,EAAWhc,kBAAoByI,EAAOzI,kBAC/Bgc,qBAIR,aAAInY,EAAK3H,OAAK0X,yDAAS,QAElBjM,OAAO9D,UAENA,EAAInB,IAAIxG,GACJ2H,EAAIqL,IAAIhT,GACT0X,MAIHnL,EAAS5E,EAAI3H,eACFd,IAAXqN,GAAyB5E,EAAIoL,eAAe/S,GAEzCuM,EADCmL,sBAKV,cAAK/P,OAEA4E,EAAS,MACTd,OAAO9D,GACX,oCAC0BA,mEAAf3H,YACTuM,EAAOjH,KAAKtF,4CAIR,IAAIA,KAAO2H,EACf4E,EAAOjH,KAAKtF,UAEPoR,MAAM7E,wBAGd,eAAM5E,OAED4E,EAAS,MACTd,OAAO9D,GACX,oCAC0BA,mEAAf3H,OAAKgF,OACduH,EAAOjH,KAAK,CAACtF,EAAKgF,6CAId,IAAIhF,KAAO2H,EACf4E,EAAOjH,KAAK,CAACtF,EAAK2H,EAAI3H,YAEjBoR,MAAM7E,yBAGd,gBAAO5E,OAEF4E,EAAS,MACTd,OAAO9D,GACX,oCAC0BA,mEAAV3C,cACduH,EAAOjH,KAAKN,4CAIR,IAAIhF,KAAO2H,EACf4E,EAAOjH,KAAKqC,EAAI3H,WAEXoR,MAAM7E,uBAGd,cAAK5E,EAAK3H,EAAKgF,GAEVyG,OAAO9D,GACVA,EAAIlB,IAAIzG,EAAKgF,GAEb2C,EAAI3H,GAAOgF,wBAGb,gBAAO2C,EAAKoY,EAAQva,sCAEDua,kCAClB,KADS5b,aAEJsH,OAAOtH,GACX,oCAC0BA,mEAAfnE,OAAKgF,OACdkS,GAASb,KAAK1O,EAAK3H,EAAKgF,wCAErB,GAAI8N,UAAU3O,OAEb,IAAInE,KAAOmE,EACf+S,GAASb,KAAK1O,EAAK3H,EAAKmE,EAAMnE,QAE3B,CAAA,IAAIuL,QAAQpH,GAUhB,MAAM,IAAI2L,GAAU,+FARH3L,kCACjB,KADSqH,cAEHD,QAAQC,IAAyB,GAAfA,EAAK9M,OAC3B,MAAM,IAAIoR,GAAU,4DACrBoH,GAASb,KAAK1O,EAAK6D,EAAK,GAAIA,EAAK,uGAMXhG,mEAAfxF,OAAKgF,OACdkS,GAASb,KAAK1O,EAAK3H,EAAKgF,yCAClB,0BAGR,eAAM2C,MAED8D,OAAO9D,GACVA,EAAIqY,iBAGC,IAAIhgB,KAAO2H,SACRA,EAAI3H,UAEN,wBAGR,aAAI2H,EAAK3H,OAAK0X,yDAASnU,UAElBkI,OAAO9D,OAENA,EAAInB,IAAIxG,GACZ,KACKuM,EAAS5E,EAAIqL,IAAIhT,UACrB2H,SAAW3H,GACJuM,sBAKiBhJ,OAAO6C,QAAQuB,kBACxC,8BADU3H,OAAKgF,qBAEP2C,EAAI3H,GACJgF,KAGL0S,IAAanU,OAChB,MAAM,IAAI0c,GAAStY,EAAK3H,GAExB,OAAO0X,kBAIViI,GAASnc,UAAUkE,MAAQ,IAAIQ,IAAI,CAAC,MAAO,OAAQ,QAAS,SAAU,SAAU,QAAS,QAEzFjF,OAAO0c,GAASnc,UAAW,CAAC,OAAQ,IAAK,SAAU,MAAO,CAACH,KAAM,SAEjEJ,OAAO0c,GAASnc,UAAUwP,IAAK,CAAC,MAAO,IAAK,UAAW,KAAM,OAC7D/P,OAAO0c,GAASnc,UAAUuQ,KAAM,IAChC9Q,OAAO0c,GAASnc,UAAUgc,MAAO,IACjCvc,OAAO0c,GAASnc,UAAUwQ,OAAQ,IAClC/Q,OAAO0c,GAASnc,UAAUoc,OAAQ,CAAC,SAAU,IAAK,SAAU,OAC5D3c,OAAO0c,GAASnc,UAAUwc,MAAO,IACjC/c,OAAO0c,GAASnc,UAAUwL,IAAK,CAAC,MAAO,IAAK,UAAW,KAAMzL,aAElD2T,GAAW,IAAIyI,GAAS,KAAM,OAAQ,uCAGpCO,iCAAgB/Y,kJAG3BjG,EAAQK,oCAAMoG,yDAAI,GAEdwJ,EAAOC,MAAMzJ,GAEb4E,EAAS,IAAIrE,MAEjB,KACKlD,MAAQmM,EAAK7B,UACbtK,MAAMuK,KACT,OAAOhD,EACRA,EAAOrK,IAAI8C,MAAMA,qCAInB,uBAAc2C,SAEkC,iBAAxCpE,OAAOC,UAAUC,SAASlC,KAAKoG,sBAGvC,aAAIA,EAAK6X,sCAESA,uCAARhU,UACR7D,EAAIzF,IAAIsJ,wDAGV,eAAM7D,UAELA,EAAIqY,QACG,oBAITE,GAAQ1c,UAAUkE,MAAQ,IAAIQ,IAAI,CAAC,MAAO,UAE1CjF,OAAOid,GAAQ1c,UAAUtB,IAAK,CAAC,QAAS,MACxCe,OAAOid,GAAQ1c,UAAUwc,MAAO,IAChC/c,OAAOid,GAAQ1c,UAAW,CAAC,WAAY,KAAM,IAAK,CAACH,KAAM,YAE9CiT,GAAU,IAAI4J,GAAQ,KAAM,MAAO,UAGjCC,kCAAiBhZ,sJAG5BjG,EAAQK,0BAAM0I,EAAMC,EAAOC,UAEpB,IAAI6D,GAAM/D,EAAMC,EAAOC,gCAG/B,uBAAcxC,UAELA,aAAeqG,0BAGxB,iBAAQrG,UAEAwP,GAAaiJ,QAAQzY,EAAIsN,+BAGjC,kBAAStN,OAAK0Y,yDAAa,EAAGC,yDAAmB,SAEzCnJ,GAAaoJ,SAAS5Y,EAAIsN,MAAOoL,EAAcC,uBAGvD,cAAK3Y,OAAK0Y,yDAAa,EAAGC,yDAAmB,SAErCnJ,GAAaoJ,SAAS5Y,EAAIsN,MAAOoL,EAAcC,GAAoB,sBAG3E,aAAI3Y,UAEIA,EAAIsN,MAAM1K,+BAGlB,eAAM5C,UAEEA,EAAIsN,MAAM3K,WAAW,sBAG7B,cAAK3C,UAEGA,EAAIsN,MAAM5K,kCAGlB,cAAK1C,UAEGA,4BAGR,oBAAWA,OAIN5J,EAAI4J,EAAIsN,YAFM,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAI1CkC,GAAaiJ,QAAQriB,IAAM,KAAO0W,MAAM1W,EAAEwM,UAAW,IAAK,GAAK,IAHlE,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAGIxM,EAAEuM,YAAc,IAAMvM,EAAEsM,uCAG3H,mBAAU1C,OAEL5J,EAAI4J,EAAIsN,aACLlX,EAAEsM,cAAgB,IAAMoK,OAAO1W,EAAEuM,WAAW,GAAG7G,WAAY,IAAK,GAAK,IAAMgR,MAAM1W,EAAEwM,UAAU9G,WAAY,IAAK,0BAGtH,iBAAQkE,UAEAwP,GAAa4E,QAAQpU,EAAIsN,uBAIlCkL,GAAS3c,UAAUkE,MAAQ,IAAIQ,IAAI,CAClC,UACA,OACA,WACA,MACA,QACA,OACA,OACA,aACA,YACA,YAGDjF,OAAOkd,GAAS3c,UAAU4c,QAAS,IACnCnd,OAAOkd,GAAS3c,UAAU+c,SAAU,CAAC,eAAgB,MAAO,EAAG,qBAAsB,MAAO,IAC5Ftd,OAAOkd,GAAS3c,UAAUgd,KAAM,CAAC,eAAgB,MAAO,EAAG,qBAAsB,MAAO,IACxFvd,OAAOkd,GAAS3c,UAAU2G,IAAK,IAC/BlH,OAAOkd,GAAS3c,UAAU0G,MAAO,IACjCjH,OAAOkd,GAAS3c,UAAUyG,KAAM,IAChChH,OAAOkd,GAAS3c,UAAUid,KAAM,IAChCxd,OAAOkd,GAAS3c,UAAUkd,WAAY,IACtCzd,OAAOkd,GAAS3c,UAAUmd,UAAW,IACrC1d,OAAOkd,GAAS3c,UAAUuY,QAAS,IACnC9Y,OAAOkd,GAAS3c,UAAW,CAAC,OAAQ,KAAM,QAAS,KAAM,MAAO,MAAO,CAACH,KAAM,aAEnEiV,GAAW,IAAI6H,GAAS,KAAM,OAAQ,UAGpCS,sCAAqBzZ,sKAEhCjG,EAAQK,WAAT,eAAe0I,EAAMC,EAAOC,OAAKgL,yDAAK,EAAGC,yDAAO,EAAGC,yDAAO,EAAGwL,yDAAY,SAEjE,IAAI5S,KAAKhE,EAAMC,EAAM,EAAGC,EAAKgL,EAAMC,EAAQC,EAAQwL,EAAY,kCAGvE,uBAAclZ,SAEiC,iBAAvCpE,OAAOC,UAAUC,SAASlC,KAAKoG,0BAGvC,iBAAQA,OAEH5J,EAAI4J,EAAIkU,gBACL9d,EAAIA,EAAE,EAAI,0BAGlB,kBAAS4J,OAAK0Y,yDAAa,EAAGC,yDAAmB,EAGhDD,EAAehJ,KAAKgJ,EAAc,GAC9BC,EAAqB,EACxBA,EAAqB,EACbA,EAAqB,IAC7BA,EAAqB,OAIjB,IAAIQ,EAAS,EAAIA,IAAW,IAAKA,EACtC,KACK7W,EAAOtC,EAAI0C,cAAgByW,EAE3BC,EAAU,IAAI9S,KAAKhE,EAAM,EAAGqW,GAE5BU,EAAc3J,KAAKvW,KAAKsf,QAAQW,GAAWV,EAAc,GACzDY,EAAgBF,EAAQ1W,cACxB6W,EAAiBH,EAAQzW,WACzB6W,EAAeJ,EAAQxW,UAAYyW,EACnCI,EAAY,IAAInT,KAAKgT,EAAeC,EAAgBC,MAEpDxZ,EAAIkL,WAAauO,EAAUvO,UAC/B,KACKwO,EAAOC,GAAO9d,UAAU+d,IAAI5Z,EAAKyZ,GAEjCZ,EAAOhX,KAAK+N,MAAM8J,EAAKxW,OAAO,GAAK,QAChC,CAACZ,EAAMuW,EAAM1f,KAAKsf,QAAQzY,0BAKpC,cAAKA,OAAK0Y,yDAAa,EAAGC,yDAAmB,SAErCxf,KAAKyf,SAAS5Y,EAAK0Y,EAAcC,GAAoB,sBAG7D,aAAI3Y,UAEIA,EAAI4C,+BAGZ,eAAM5C,UAEEA,EAAI2C,WAAW,sBAGvB,cAAK3C,UAEGA,EAAI0C,kCAGZ,cAAK1C,UAEGA,EAAI6C,iCAGZ,gBAAO7C,UAECA,EAAI8C,mCAGZ,gBAAO9C,UAECA,EAAI+C,wCAGZ,qBAAY/C,UAEoB,IAAxBA,EAAIgD,sCAGZ,cAAKhD,UAEG,IAAIqG,GAAMmJ,GAAalN,KAAKtC,GAAMwP,GAAajN,MAAMvC,GAAMwP,GAAahN,IAAIxC,8BAGpF,oBAAWA,SAEQ,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAG1CwP,GAAaiJ,QAAQzY,IAAQ,KAAO8M,MAAM9M,EAAI4C,UAAW,IAAK,GAAK,IAFtE,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAEQ5C,EAAI2C,YAAc,IAAM3C,EAAI0C,cAAgB,IAAMoK,MAAM9M,EAAI6C,WAAY,IAAK,GAAK,IAAMiK,MAAM9M,EAAI8C,aAAc,IAAK,GAAK,IAAMgK,MAAM9M,EAAI+C,aAAc,IAAK,GAAK,gCAGzQ,mBAAU/C,OAELsC,EAAOtC,EAAI0C,cACXH,EAAQvC,EAAI2C,WAAW,EACvBH,EAAMxC,EAAI4C,UACV4K,EAAOxN,EAAI6C,WACX4K,EAASzN,EAAI8C,aACb4K,EAAS1N,EAAI+C,aACb4K,EAAK3N,EAAIgD,kBACT4B,EAAStC,EAAO,IAAMwK,MAAMvK,EAAMzG,WAAY,IAAK,GAAK,IAAMgR,MAAMtK,EAAI1G,WAAY,IAAK,GAAK,IAAMgR,MAAMU,EAAK1R,WAAY,IAAK,GAAK,IAAMgR,MAAMW,EAAO3R,WAAY,IAAK,GAAK,IAAMgR,MAAMY,EAAO5R,WAAY,IAAK,UAClN6R,IACH/I,GAAU,IAAMkI,MAAMa,EAAG7R,WAAY,IAAK,GAAK,OACzC8I,yBAGR,iBAAQ5E,OAEH6Z,EAAOC,QAAQ9Z,GAAO,EAAI,EAC1BwC,EAAMxC,EAAI4C,iBACN5C,EAAI2C,iBAEN,SACGH,OACH,SACG,GAAKA,OACR,SACG,GAAUqX,EAAOrX,OACpB,SACG,GAAUqX,EAAO,GAAKrX,OACzB,SACG,GAAUqX,EAAO,GAAK,GAAKrX,OAC9B,SACG,GAAUqX,EAAO,GAAK,GAAK,GAAKrX,OACnC,SACG,GAAUqX,EAAO,GAAK,GAAK,GAAK,GAAKrX,OACxC,SACG,GAAUqX,EAAO,GAAK,GAAK,GAAK,GAAK,GAAKrX,OAC7C,SACG,GAAUqX,EAAO,GAAK,GAAK,GAAK,GAAK,GAAK,GAAKrX,OAClD,SACG,GAAUqX,EAAO,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAKrX,OACvD,UACG,GAAUqX,EAAO,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAKrX,OAC5D,UACG,GAAUqX,EAAO,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAKrX,uBAKzEyW,GAAapd,UAAUkE,MAAQ,IAAIQ,IAAI,CACtC,UACA,OACA,WACA,MACA,QACA,OACA,OACA,SACA,SACA,cACA,OACA,aACA,YACA,YAGDjF,OAAO2d,GAAapd,UAAU4c,QAAS,IACvCnd,OAAO2d,GAAapd,UAAU+c,SAAU,CAAC,eAAgB,MAAO,EAAG,qBAAsB,MAAO,IAChGtd,OAAO2d,GAAapd,UAAUgd,KAAM,CAAC,eAAgB,MAAO,EAAG,qBAAsB,MAAO,IAC5Fvd,OAAO2d,GAAapd,UAAU2G,IAAK,IACnClH,OAAO2d,GAAapd,UAAU0G,MAAO,IACrCjH,OAAO2d,GAAapd,UAAUyG,KAAM,IACpChH,OAAO2d,GAAapd,UAAU2R,KAAM,IACpClS,OAAO2d,GAAapd,UAAU4R,OAAQ,IACtCnS,OAAO2d,GAAapd,UAAU6R,OAAQ,IACtCpS,OAAO2d,GAAapd,UAAUqd,YAAa,IAC3C5d,OAAO2d,GAAapd,UAAUid,KAAM,IACpCxd,OAAO2d,GAAapd,UAAUkd,WAAY,IAC1Czd,OAAO2d,GAAapd,UAAUmd,UAAW,IACzC1d,OAAO2d,GAAapd,UAAUuY,QAAS,IACvC9Y,OAAO2d,GAAapd,UAAW,CAAC,OAAQ,KAAM,QAAS,KAAM,MAAO,KAAM,OAAQ,MAAO,EAAG,SAAU,MAAO,EAAG,SAAU,MAAO,EAAG,cAAe,MAAO,GAAI,CAACH,KAAM,iBAE1J8T,GAAe,IAAIyJ,GAAa,KAAM,WAAY,cAGhDc,sCAAqBva,4LAEjC,uBAAcQ,SAEU,mBAATA,GAAuB+Q,YAAY/Q,uBAIxCyP,GAAe,IAAIsK,GAAa,KAAM,WAAY,uBAGhD/K,qCAAoBxP,yDAEpBG,iEAELA,EAAYqa,aAAe,KAAMra,EAAYsa,WAAata,EAAYjE,KAAMiE,EAAYua,UAAY,OACrGxa,aAAeC,0DAGrB,iBAAQK,EAAKJ,MAEyB,mBAA1BI,EAAIzG,EAAQ0B,SACtB,OAAO+E,EAAIzG,EAAQ0B,SAAS2E,GAE5B,MAAM,IAAIC,GAAeG,EAAKJ,0BAGhC,iBAAQI,EAAKJ,MAEyB,mBAA1BI,EAAIzG,EAAQ0B,SAgBtB,OAAO,aAZN+E,EAAIzG,EAAQ0B,SAAS2E,IACd,EAER,MAAOS,MAEFA,aAAeR,IAAkBQ,EAAIL,MAAQM,OAChD,OAAO,EAEP,MAAMD,gCAOV,uBAAcL,UAENA,aAAe7G,KAAKuG,gCAKhBya,qCAEAC,yDAAK,KAAMC,yDAAQ,wCAEzBD,KAAOA,GAAQ,QACfC,QAAU/E,QAAQgF,GAAUD,GAAW,SACvCE,QAAU,QACVC,QAAU,QACVC,QAAU,yDAMhB,2BAEKjS,EAAU5M,OAAO6Z,OAAOtc,aAC5BqP,EAAQ4R,KAAOxe,OAAO6Z,OAAOtc,KAAKihB,MAC3B5R,4BAIR,oBAAW5H,OAEN4H,EAAU5M,OAAO6Z,OAAOtc,aACb,OAAXyH,IAEH4H,EAAQ+R,QAAUphB,KAAKohB,QAAQhX,QAC/BiF,EAAQ+R,QAAQ5c,KAAKiD,IAEf4H,+BAIR,6BAEKA,EAAU5M,OAAO6Z,OAAOtc,aAC5BqP,EAAQiS,QAAU,GACXjS,6BAGR,qBAAY4R,OAEP5R,EAAU5M,OAAO6Z,OAAOtc,aAC5BqP,EAAQ4R,KAAOA,EACR5R,wBAGR,gBAAOnL,sCAEalE,KAAKqhB,yCACvBnd,GAAQuP,WAAOvP,uCACXod,QAAQ9c,KAAKN,4BAGnB,4BAEQlE,KAAKshB,QAAQlb,KAAK,uBAG1B,aAAI7D,OAECkJ,EAASzL,KAAKihB,KAAK1e,eACRnE,IAAXqN,IACHA,EAASzL,KAAKkhB,QAAQ3e,IAChBkJ,qBAGR,aAAIlJ,EAAM2B,QAEJ+c,KAAK1e,GAAQ2B,iBAOb,SAASkL,UAAUmS,EAASC,EAAUC,OAExCC,EAAW,IAAIC,MAAMJ,EAASC,EAAUC,UACxChf,OAAOmf,eACVnf,OAAOmf,eAAeF,EAAUjf,OAAOof,eAAe7hB,OAEtD0hB,EAAS3C,UAAY/e,KACtB0hB,EAASte,OAASF,IAClBwe,EAASrS,QAAU,KACZqS,EAGRtS,UAAU1M,UAAYD,OAAO6Z,OAAOqF,MAAMjf,UAAW,CACpD8D,YAAa,CACZtC,MAAOyd,MACPG,YAAY,EACZC,UAAU,EACVC,cAAc,KAIZvf,OAAOmf,eACVnf,OAAOmf,eAAexS,UAAWuS,OAEjCvS,UAAU2P,UAAY4C,MAEvBvS,UAAU1M,UAAUtC,EAAQ0B,SAAW,SAASA,QAAQ2E,UAE/CA,OAEF,iBACGzG,KAAKqP,sBAEN,IAAI3I,GAAe1G,KAAMyG,SAKrBwb,2CAA0B7S,iLAK1B8S,yCAAwBD,iEAExBxW,qEAEL,WACDA,OAASA,8BAIH0W,wCAAuBF,yHAI5B,kCAIKG,2CAA0BH,kIAI/B,wCAKKI,qCAAoBjT,yJAIpBkT,6CAA4BD,wIAIjC,iDAIKrT,mCAAkBI,iJAIlBtE,oCAAmBsE,qJAInB/J,uCAAsB+J,iKAItB7K,wCAAuB6K,qKAIvBmT,+CAA8BnT,oFAE9BvI,2EAEL,kBAAoBoJ,MAAMpJ,GAAKF,WAAa,0BAC7CE,IAAMA,qEAGZ,0BAEQ,kBAAoBoJ,MAAMjQ,KAAK6G,KAAKF,WAAa,qDAI7C6b,2CAA0BpT,yIAI/B,gDAIKqT,oCAAmBrT,8DAEnBvI,EAAK+B,gEAEV,SAAWnD,OAAMmD,GAAS,kBAC3B/B,IAAMA,IACN+B,MAAQA,0DAGd,0BAEQ,SAAW5I,KAAK4I,MAAQ,qBAAuBqH,MAAMjQ,KAAK6G,KAAKF,6BAI3DD,wCAAuB0I,sEAEvBvI,EAAKJ,oEAEV,kBAAoBwJ,MAAMpJ,GAAKF,WAAa,qBAAuBlB,OAAMgB,KAC1EI,IAAMA,IACNJ,SAAWA,6BAIL0Y,kCAAiB/P,0DAEjBvI,EAAK3H,8DAEV,OAAUuG,OAAMvG,GAAO,gCAAkC+Q,MAAMpJ,GAAKF,aACrEE,IAAMA,IACN3H,IAAMA,uBAIAwjB,6CAA4BtT,yLAK5BuT,uCAAsBvT,oEAEtBwT,mEAEL,uBAAyBnd,OAAMmd,KAChCA,SAAWA,oEAGjB,+BAEKC,EAAW7iB,KAAK4iB,SAASC,SACzBrS,EAAM,GACsB,OAA5BqS,EAASC,eACZtS,EAAIhM,KAAK,sBAETgM,EAAIhM,KAAK,wBACNuP,GAAQ,EACO,MAAZ8O,GAEF9O,EACHA,GAAQ,EAERvD,EAAIhM,KAAK,QACVgM,EAAIhM,KAAKqe,EAAStgB,KAAOkD,OAAMod,EAAStgB,MAAQ,aAChDsgB,EAAWA,EAASC,sBAEdtS,EAAIpK,KAAK,4BAGjB,oBAEgBpG,KAAK4iB,SAASC,aACzBE,EAAiB/iB,KAAKgjB,kBAEtBnF,EAAS7d,KAAK4iB,SAASK,kBACvBzP,EAAOxT,KAAK4iB,SAASM,YACrBnF,EAAS/d,KAAK4iB,SAASO,kBAKvBC,GAJJvF,EAASpY,OAAMoY,GAAQzT,MAAM,GAAI,KACjCoJ,EAAO/N,OAAM+N,GAAMpJ,MAAM,GAAI,KAC7B2T,EAAStY,OAAMsY,GAAQ3T,MAAM,GAAI,IAG7BiZ,EAAYnL,YAAY,IAAU2F,EAAOjgB,QAAUsa,YAAY,IAAK1E,EAAK5V,eAI/DmlB,EAAiB,MAFrB,UAAY/iB,KAAK4iB,SAASve,IAAIgG,MAAQ,IAAMrK,KAAK4iB,SAASve,IAAIiG,KAAO,UAAYtK,KAAK4iB,SAASU,UAAY,SAAWtjB,KAAK4iB,SAASW,UAElG,KAAOH,EAAO,KAAOC,SAIjEjjB,EAAQ0B,cAAT,eAAkB2E,UAETA,OAEF,iBACGzG,KAAKqP,YACR,kBACGrP,KAAK4iB,uBAEN,IAAIlc,GAAe1G,KAAMyG,2BA6GjCrG,EAAQ0B,UAsBR1B,EAAQ6B,UAKR7B,EAAQC,MAORD,EAAQG,SAzIGijB,6BAAYrgB,yCAKZ0f,EAAUtF,SAAUkG,yDAAQ,uDAGlCZ,SAAWA,IACXtF,SAAWA,IACXmG,WAAa,OACbC,UAAY,OACZF,QAAUA,IACVG,UAAY,OACZC,SAAW,qDAGjB,kBAEyB,OAApB7jB,KAAK0jB,iCAC4BjS,gBAAgBzR,KAAK6iB,SAASiB,QAAS9jB,KAAKud,SAASlT,eAAnFqZ,qBAAiBC,sBACjB3jB,KAAK0jB,iCAGb,kBAEwB,OAAnB1jB,KAAK2jB,gCAC4BlS,gBAAgBzR,KAAK6iB,SAASiB,QAAS9jB,KAAKud,SAASlT,eAAnFqZ,qBAAiBC,sBACjB3jB,KAAK2jB,mCAGb,sBAEQ3jB,KAAKud,SAASwG,GAAG/jB,KAAK6iB,SAASiB,wCAGvC,sBAEQhT,cAAc9Q,KAAK6iB,SAASiB,QAAS9jB,KAAKud,SAASlT,sCAG3D,sBAEQ+G,cAAcpR,KAAK6iB,SAASiB,QAAS9jB,KAAKud,SAASjT,8BAG3D,sBAEQtK,KAAK6iB,SAASiB,yBAGtB,sBAEsB,OAAjB9jB,KAAKyjB,QACDzjB,KAAKud,SAEL,IAAInT,GAAMpK,KAAKud,SAASlT,MAAOrK,KAAKyjB,QAAQnZ,0BAGrD,sBAEQtK,KAAKqE,IAAI0f,GAAG/jB,KAAK6iB,SAASiB,mCAGlC,sBAEQhT,cAAc9Q,KAAK6iB,SAASiB,QAAS9jB,KAAKqE,IAAIgG,iCAGtD,sBAEQ+G,cAAcpR,KAAK6iB,SAASiB,QAAS9jB,KAAKqE,IAAIiG,4BAGtD,kBAEwB,OAAnBtK,KAAK4jB,gCAC0BnS,gBAAgBzR,KAAK6iB,SAASiB,QAAS9jB,KAAKyjB,QAAQnZ,cAAhFsZ,oBAAgBC,qBAChB7jB,KAAK4jB,+BAGb,kBAEuB,OAAlB5jB,KAAK6jB,+BAC0BpS,gBAAgBzR,KAAK6iB,SAASiB,QAAS9jB,KAAKyjB,QAAQnZ,cAAhFsZ,oBAAgBC,qBAChB7jB,KAAK6jB,iCAGb,sBAEwB,MAAhB7jB,KAAKyjB,QAAkBzjB,KAAKyjB,QAAQM,GAAG/jB,KAAK6iB,SAASiB,SAAW,mCAGxE,sBAEwB,MAAhB9jB,KAAKyjB,QAAkB3S,cAAc9Q,KAAK6iB,SAASiB,QAAS9jB,KAAKyjB,QAAQpZ,OAAS,mCAG1F,sBAEwB,MAAhBrK,KAAKyjB,QAAkBrS,cAAcpR,KAAK6iB,SAASiB,QAAS9jB,KAAKyjB,QAAQnZ,MAAQ,oBAGzF,eAAkB7D,MAGH,SAAbA,GACa,aAAbA,GACa,cAAbA,GACa,aAAbA,GACa,gBAAbA,GACa,sBAAbA,GACa,sBAAbA,GACa,QAAbA,GACa,WAAbA,GACa,iBAAbA,GACa,iBAAbA,GACa,eAAbA,EAEA,OAAOzG,KAAKyG,GACR,GAAIzG,KAAKgkB,YAAY9e,QAAQuB,IAAa,EAC9C,OAAOzG,KAAKyG,SACP,IAAIC,GAAe1G,KAAMyG,kBAGhC,eAAkBA,EAAUvC,SAErB,IAAI8K,GAAU,sCAGrB,qBAEKwB,EAAM,eACLoE,KAAKpE,GACHD,cAAcC,kBAGtB,qBAEKA,EAAM,eACL/K,MAAM+K,GACJD,cAAcC,sCAGtB,6BAAoBtJ,aAEI9I,IAAhB8I,EAAImI,SAAyC,OAAhBnI,EAAImI,SACvCnI,EAAMA,EAAImI,QACXnI,EAAImI,QAAU,IAAIsT,GAAc3iB,kCAGjC,sBAAaqP,cAIJrP,KAAKikB,MAAM5U,GAEnB,MAAOnI,SAEDA,EAAImI,SACRrP,KAAKkkB,oBAAoBhd,GACpBA,mCAIR,0BAAiBmI,EAASnL,cAIjBlE,KAAKmkB,UAAU9U,EAASnL,GAEhC,MAAOgD,SAEAA,aAAeyb,IACpB3iB,KAAKkkB,oBAAoBhd,GACpBA,4BAIR,mBAAUmI,EAASnL,SAEZ,IAAIoe,sCAGX,6BAAoBjT,EAASgD,EAAUnO,cAI9BlE,KAAKokB,aAAa/U,EAASgD,EAAUnO,GAE7C,MAAOgD,SAEAA,aAAeyb,IACpB3iB,KAAKkkB,oBAAoBhd,GACpBA,+BAIR,sBAAamI,EAASgD,EAAUnO,SAEzB,IAAIoe,wBAGX,eAAM9R,wBAIN,cAAKA,GAEJA,EAAIhM,KAAKxE,KAAK+Q,OAAOjI,QAAQ,SAAU,+BAGxC,mBAAUpB,sCAEY1H,KAAKgkB,iDAAjBvd,UACRiB,EAAQE,KAAK5H,KAAKyG,6DAGpB,mBAAUsB,sCAEY/H,KAAKgkB,2DACRjc,EAAQsE,kEA7NfmX,iBAES,uBAFTA,cAGM,6CA+NnBA,GAAI9gB,UAAUshB,YAAc,CAAC,WAAY,gBAE5BK,iCAAgBb,iDAIhBX,EAAUxe,oDAEfwe,EAAUxe,gDAGjB,sBAEQrE,KAAK+Q,4BAGb,eAAM1B,GAELA,EAAQtR,OAAOiC,KAAKojB,0BAGrB,cAAK5S,GAEJA,EAAIhM,KAAK,QAASiB,OAAMzF,KAAKojB,4BAG9B,eAAM5S,GAELA,EAAIhM,KAAK,IAAKxE,KAAKwG,YAAYjE,KAAM,IAAKkD,OAAMzF,KAAKojB,MAAO,oCA1BjDiB,cAEM,gEA4BNC,mCAAkBD,qDAIlBxB,EAAUxe,EAAK+e,+DAEpBP,EAAUxe,IACXkgB,MAAQnB,mDAGd,2BAEuBhlB,IAAlB4B,KAAK6iB,SACc,OAAf7iB,KAAKukB,MAAiBvkB,KAAK+Q,OAAS/Q,KAAKukB,MAEzC,0BAGT,eAAMlV,sCAEcA,EAAQ+R,6CAAlB3Z,UACR4H,EAAQtR,OAAO0J,kCAChB4H,EAAQtR,OAAOiC,KAAKojB,+BAGrB,mBAAU1b,2EAEOA,GAEZ1H,KAAKukB,QAAUvkB,KAAK+Q,OACvBrJ,EAAQE,KAAK,MAEbF,EAAQE,KAAK5H,KAAKukB,gCAGpB,mBAAUxc,2EAEOA,QACXwc,MAAQxc,EAAQsE,2BAGtB,cAAKmE,GAEJA,EAAIhM,KAAK,UAAWiB,OAAMzF,KAAKojB,wCA3CpBkB,cAEM,kFA6CNE,oCAAmBH,2KAI/B,cAAK7T,GAEJA,EAAIhM,KAAK,WAAYiB,OAAMzF,KAAKojB,yCANrBoB,cAEM,4DAQNC,iCAAgBjB,kJAAhBiB,cAEM,kEAGNC,kCAAiBD,mDAIjB5B,EAAUxe,EAAKH,8DAEpB2e,EAAUxe,IACXH,MAAQA,qDAGd,eAAMsM,GAELA,EAAIhM,KAAK,IAAKxE,KAAKwG,YAAYjE,KAAM,IAAKkD,OAAMzF,KAAKkE,OAAQ,0BAG9D,eAAMmL,UAEErP,KAAKkE,sCAjBDwgB,cAEM,kCAmBnBA,GAAShiB,UAAUshB,YAAcS,GAAQ/hB,UAAUshB,YAAYxkB,OAAO,CAAC,cAE1DmlB,qCAAoBF,4LAEhC,2BAAkBpV,EAAS5D,cAIlBzL,KAAK4kB,WAAWvV,EAAS5D,GAEjC,MAAOvE,SAEAA,aAAe+a,IAAwB/a,aAAeyb,IAC3D3iB,KAAKkkB,oBAAoBhd,GACpBA,mCAIR,0BAAiBmI,EAAS5D,cAIjBzL,KAAKmkB,UAAU9U,EAAS5D,GAEhC,MAAOvE,SAEAA,aAAe+a,IAAwB/a,aAAeyb,IAC3D3iB,KAAKkkB,oBAAoBhd,GACpBA,oCAIR,2BAAkBmI,EAAS5D,cAIlBzL,KAAK6kB,WAAWxV,EAAS5D,GAEjC,MAAOvE,SAEAA,aAAe+a,IAAwB/a,aAAeyb,IAC3D3iB,KAAKkkB,oBAAoBhd,GACpBA,oCAIR,2BAAkBmI,EAAS5K,EAAMC,cAIxB1E,KAAK8kB,WAAWzV,EAAS5K,EAAMC,GAEvC,MAAOwC,SAEAA,aAAe+a,IAAwB/a,aAAeyb,IAC3D3iB,KAAKkkB,oBAAoBhd,GACpBA,sBAKI6d,oCAAmBJ,uDAInB9B,EAAUxe,EAAKH,gEAEpB2e,EAAUxe,IACXH,MAAQA,uDAGd,eAAMsM,GAELA,EAAIhM,KAAK,IAAKxE,KAAKwG,YAAYjE,KAAM,UAAWkD,OAAMzF,KAAKkE,OAAQ,+BAGpE,oBAAWmL,EAAS5D,OAEfvH,EAAQlE,KAAKkE,MAAM8gB,aAAa3V,GACpC5D,EAAOjH,KAAKN,4BAGb,mBAAUmL,EAAS5D,OAEdvH,EAAQlE,KAAKkE,MAAM8gB,aAAa3V,GACpC5D,EAAOrK,IAAI8C,qCAxBA6gB,cAEM,gFA0BnBA,GAAWriB,UAAUshB,YAAcW,GAAYjiB,UAAUshB,YAAYxkB,OAAO,CAAC,cAEhEylB,0CAAyBN,mEAIzB9B,EAAUxe,EAAKH,sEAEpB2e,EAAUxe,IACXH,MAAQA,6DAGd,eAAMsM,GAELA,EAAIhM,KAAK,IAAKxE,KAAKwG,YAAYjE,KAAM,UAAWkD,OAAMzF,KAAKkE,OAAQ,+BAGpE,oBAAWmL,EAAS5D,WAGV4E,EAAOC,MADJtQ,KAAKkE,MAAM8gB,aAAa3V,MAEpC,KACK3E,EAAO2F,EAAK7B,UACZ9D,EAAK+D,KACR,MACDhD,EAAOjH,KAAKkG,EAAKxG,iCAInB,mBAAUmL,EAAS5D,WAGT4E,EAAOC,MADJtQ,KAAKkE,MAAM8gB,aAAa3V,MAEpC,KACK3E,EAAO2F,EAAK7B,UACZ9D,EAAK+D,KACR,MACDhD,EAAOrK,IAAIsJ,EAAKxG,gDAnCN+gB,cAEM,sHAsCnBA,GAAiBviB,UAAUshB,YAAcW,GAAYjiB,UAAUshB,YAAYxkB,OAAO,CAAC,cAEtE0lB,qCAAoBP,yDAIpB9B,EAAUxe,EAAKnF,EAAKgF,iEAEzB2e,EAAUxe,IACXnF,IAAMA,IACNgF,MAAQA,wDAGd,eAAMsM,GAELA,EAAIhM,KACH,IACAxE,KAAKwG,YAAYjE,KACjB,QACAkD,OAAMzF,KAAKd,KACX,UACAuG,OAAMzF,KAAKkE,OACX,+BAIF,oBAAWmL,EAAS5D,OAEfvM,EAAMc,KAAKd,IAAI8lB,aAAa3V,GAC5BnL,EAAQlE,KAAKkE,MAAM8gB,aAAa3V,GACpC5D,EAAO9F,IAAIzG,EAAKgF,sCA5BLghB,cAEM,4EA8BnBA,GAAYxiB,UAAUshB,YAAcW,GAAYjiB,UAAUshB,YAAYxkB,OAAO,CAAC,MAAO,cAExE2lB,2CAA0BR,qEAI1B9B,EAAUxe,EAAKqG,uEAEpBmY,EAAUxe,IACXqG,KAAOA,8DAGb,eAAM8F,GAELA,EAAIhM,KAAK,IAAKxE,KAAKwG,YAAYjE,KAAM,SAAUkD,OAAMzF,KAAK0K,MAAO,+BAGlE,oBAAW2E,EAAS5D,OAEff,EAAO1K,KAAK0K,KAAKsa,aAAa3V,MAC9B2D,QAAQtI,UAGX,KACK0a,EAAU1a,EAAK8D,UACf4W,EAAQ3W,KACX,UACIhE,QAAQ2a,EAAQlhB,QAAkC,GAAxBkhB,EAAQlhB,MAAMtG,OAC5C,MAAM,IAAIyH,GAAc,iDACzBoG,EAAO9F,IAAIyf,EAAQlhB,MAAM,GAAIkhB,EAAQlhB,MAAM,SAGxC,GAAIuG,QAAQC,GACjB,oCACqBA,kCACpB,KADS0a,cAEH3a,QAAQ2a,IAA8B,GAAlBA,EAAQxnB,OAChC,MAAM,IAAIyH,GAAc,4CACzBoG,EAAO9F,IAAIyf,EAAQ,GAAIA,EAAQ,yCAG5B,GAAIza,OAAOD,GAChB,oCAC0BA,mEAAfxL,OAAKgF,OACduH,EAAO9F,IAAIzG,EAAKgF,wCAEb,GAAI8N,UAAUtH,OAEb,IAAIxL,KAAOwL,EACfe,EAAO9F,IAAIzG,EAAKwL,EAAKxL,6CA/CZimB,cAEM,uGAkDnBA,GAAkBziB,UAAUshB,YAAcW,GAAYjiB,UAAUshB,YAAYxkB,OAAO,CAAC,aAEvE6lB,+CAA8BV,6EAI9B9B,EAAUxe,EAAKH,2EAEpB2e,EAAUxe,IACXH,MAAQA,kEAGd,eAAMsM,GAELA,EAAIhM,KAAK,IAAKxE,KAAKwG,YAAYjE,KAAM,UAAWkD,OAAMzF,KAAKkE,OAAQ,+BAGpE,oBAAWmL,EAAS5K,EAAMC,OAErBR,EAAQlE,KAAKkE,MAAM8gB,aAAa3V,GACpC5K,EAAKD,KAAKN,gDAlBCmhB,cAEM,qEAoBnBA,GAAsB3iB,UAAUshB,YAAcW,GAAYjiB,UAAUshB,YAAYxkB,OAAO,CAAC,cAE3E8lB,4CAA2BX,uEAI3B9B,EAAUxe,EAAK9B,EAAM2B,wEAE1B2e,EAAUxe,IACX9B,KAAOA,IACP2B,MAAQA,+DAGd,eAAMsM,GAELA,EAAIhM,KACH,IACAxE,KAAKwG,YAAYjE,KACjB,SACAkD,OAAMzF,KAAKuC,MACX,UACAkD,OAAMzF,KAAKkE,OACX,+BAIF,oBAAWmL,EAAS5K,EAAMC,MAErBA,EAAOuN,eAAejS,KAAKuC,MAC9B,MAAM,IAAI8C,GAAc,8BAAgCrF,KAAKuC,UAC1D2B,EAAQlE,KAAKkE,MAAM8gB,aAAa3V,GACpC3K,EAAO1E,KAAKuC,MAAQ2B,4CA7BTohB,cAEM,8GA+BnBA,GAAmB5iB,UAAUshB,YAAcW,GAAYjiB,UAAUshB,YAAYxkB,OAAO,CAAC,OAAQ,cAEhF+lB,+CAA8BZ,6EAI9B9B,EAAUxe,EAAKqG,2EAEpBmY,EAAUxe,IACXqG,KAAOA,kEAGb,eAAM8F,GAELA,EAAIhM,KAAK,IAAKxE,KAAKwG,YAAYjE,KAAM,SAAUkD,OAAMzF,KAAK0K,MAAO,+BAGlE,oBAAW2E,EAAS5K,EAAMC,OAErBgG,EAAO1K,KAAK0K,KAAKsa,aAAa3V,GAClC5K,EAAKD,WAALC,qBAAaiG,iDAlBF6a,cAEM,sGAoBnBA,GAAsB7iB,UAAUshB,YAAcW,GAAYjiB,UAAUshB,YAAYxkB,OAAO,CAAC,aAE3EgmB,+CAA8Bb,6EAI9B9B,EAAUxe,EAAKqG,2EAEpBmY,EAAUxe,IACXqG,KAAOA,kEAGb,eAAM8F,GAELA,EAAIhM,KAAK,IAAKxE,KAAKwG,YAAYjE,KAAM,SAAUkD,OAAMzF,KAAK0K,MAAO,+BAGlE,oBAAW2E,EAAS5K,EAAMC,OAErBgG,EAAO1K,KAAK0K,KAAKsa,aAAa3V,MAC9B5E,QAAQC,GACZ,oCACqBA,kCACpB,KADS0a,cAEH3a,QAAQ2a,IAA8B,GAAlBA,EAAQxnB,OAChC,MAAM,IAAIyH,GAAc,iEACN+f,KAAdlmB,OAAKgF,UACNQ,EAAOuN,eAAe/S,GACzB,MAAM,IAAImG,GAAc,8BAAgCnG,GACzDwF,EAAOxF,GAAOgF,uCAGX,GAAIyG,OAAOD,GAChB,oCAC0BA,kCACzB,iCADUxL,OAAKgF,UAEVQ,EAAOuN,eAAe/S,GACzB,MAAM,IAAImG,GAAc,8BAAgCnG,GACzDwF,EAAOxF,GAAOgF,uCAGX,GAAI8N,UAAUtH,OAEb,IAAIxL,KAAOwL,EAChB,IACKhG,EAAOuN,eAAe/S,GACzB,MAAM,IAAImG,GAAc,8BAAgCnG,GACzDwF,EAAOxF,GAAOwL,EAAKxL,iDA7CVsmB,cAEM,yGAiDnBA,GAAsB9iB,UAAUshB,YAAcW,GAAYjiB,UAAUshB,YAAYxkB,OAAO,CAAC,aAE3EimB,iCAAgBhB,iDAIhB5B,EAAUxe,6DAEfwe,EAAUxe,IACXqa,MAAQ,qDAGd,eAAMlO,GAELA,EAAIhM,KAAK,IAAKxE,KAAKwG,YAAYjE,yCACdvC,KAAK0e,sCACtB,KADShU,UAER8F,EAAIhM,KAAK,KACTkG,EAAKjF,MAAM+K,kCAEZA,EAAIhM,KAAK,0BAGV,eAAM6K,SAED5D,EAAS,gCACIzL,KAAK0e,+CAChBgH,kBAAkBrW,EAAS5D,yCAC1BA,iCA1BIga,cAEM,8DA4BnBA,GAAQ/iB,UAAUshB,YAAcS,GAAQ/hB,UAAUshB,YAAYxkB,OAAO,CAAC,cAEzDmmB,8CAA6BlB,2EAI7B5B,EAAUxe,EAAKqG,EAAMkb,EAASC,EAAWC,0EAE9CjD,EAAUxe,IACXqG,KAAOA,IACPkb,QAAUA,IACVC,UAAYA,IACZC,UAAYA,iEAGlB,eAAMtV,GAELA,EAAIhM,KAAK,IAAKxE,KAAKwG,YAAYjE,KAAM,eAChCmI,KAAKjF,MAAM+K,GAChBA,EAAIhM,KAAK,YAAaiB,OAAMzF,KAAK4lB,SAAU,oBACtCC,UAAUpgB,MAAM+K,GACE,OAAnBxQ,KAAK8lB,YAERtV,EAAIhM,KAAK,oBACJshB,UAAUrgB,MAAM+K,IAEtBA,EAAIhM,KAAK,0BAGV,eAAM6K,WAEDwW,EAAY7lB,KAAK6lB,UAAUb,aAAa3V,GAExC0W,EAAe1W,EAAQ2W,cAEvBva,EAAS,GACJ4E,EAAOC,MAAMuV,KACtB,KACKnb,EAAO2F,EAAK7B,UACZ9D,EAAK+D,KACR,yCACcyB,WAAWlQ,KAAK4lB,QAASlb,EAAKxG,wEACnCiM,OAAQjM,OACjBiM,EAAO8V,iBAAiBF,EAAc7hB,mCAChB,OAAnBlE,KAAK8lB,WAAsBhR,MAAM9U,KAAK8lB,UAAUd,aAAae,MAChEta,EAAOjH,KAAKxE,KAAK0K,KAAKsa,aAAae,WAE9Bta,8CA7CIka,cAEM,yEA+CnBA,GAAqBjjB,UAAUshB,YAAcS,GAAQ/hB,UAAUshB,YAAYxkB,OAAO,CAAC,OAAQ,UAAW,YAAa,kBAEtG0mB,gCAAezB,+CAIf5B,EAAUxe,4DAEfwe,EAAUxe,IACXqa,MAAQ,oDAGd,eAAMlO,GAELA,EAAIhM,KAAK,IAAKxE,KAAKwG,YAAYjE,yCACdvC,KAAK0e,sCACtB,KADShU,UAER8F,EAAIhM,KAAK,KACTkG,EAAKjF,MAAM+K,kCAEZA,EAAIhM,KAAK,0BAGV,eAAM6K,SAED5D,EAAS,IAAIrE,iCAEApH,KAAK0e,+CAChBuH,iBAAiB5W,EAAS5D,yCAEzBA,gCA5BIya,cAEM,4DA8BnBA,GAAOxjB,UAAUshB,YAAcS,GAAQ/hB,UAAUshB,YAAYxkB,OAAO,CAAC,YAenEY,EAAQ0B,YAbGqkB,6CAA4B1B,yEAI5B5B,EAAUxe,EAAKqG,EAAMkb,EAASC,EAAWC,yEAE9CjD,EAAUxe,IACXqG,KAAOA,IACPkb,QAAUA,IACVC,UAAYA,IACZC,UAAYA,0DAGlB,eAAkBrf,UAETA,OAEF,cACGzG,KAAK0K,SACR,iBACG1K,KAAK4lB,YACR,mBACG5lB,KAAK6lB,cACR,mBACG7lB,KAAK8lB,+EAEC1lB,EAAQ0B,wBAAS2E,yBAIjC,eAAM+J,GAELA,EAAIhM,KAAK,IAAKxE,KAAKwG,YAAYjE,KAAM,eAChCmI,KAAKjF,MAAM+K,GAChBA,EAAIhM,KAAK,kBACJohB,QAAQngB,MAAM+K,GACnBA,EAAIhM,KAAK,oBACJqhB,UAAUpgB,MAAM+K,GACE,OAAnBxQ,KAAK8lB,YAERtV,EAAIhM,KAAK,oBACJshB,UAAUrgB,MAAM+K,IAEtBA,EAAIhM,KAAK,0BAGV,eAAM6K,WAEDwW,EAAY7lB,KAAK6lB,UAAUb,aAAa3V,GAExC0W,EAAe1W,EAAQ2W,cAEvBva,EAAS,IAAIrE,IACRiJ,EAAOC,MAAMuV,KACtB,KACKnb,EAAO2F,EAAK7B,UACZ9D,EAAK+D,KACR,yCACcyB,WAAWlQ,KAAK4lB,QAASlb,EAAKxG,wEACnCiM,OAAQjM,OACjBiM,EAAO8V,iBAAiBF,EAAc7hB,mCAChB,OAAnBlE,KAAK8lB,WAAsBhR,MAAM9U,KAAK8lB,UAAUd,aAAae,MAChEta,EAAOrK,IAAIpB,KAAK0K,KAAKsa,aAAae,WAG7Bta,6CAjEI0a,cAEM,wEAmEnBA,GAAoBzjB,UAAUshB,YAAcS,GAAQ/hB,UAAUshB,YAAYxkB,OAAO,CAAC,OAAQ,UAAW,YAAa,gBAYhHY,EAAQ0B,YAVGskB,iCAAgB3B,iDAIhB5B,EAAUxe,6DAEfwe,EAAUxe,IACXqa,MAAQ,+CAGd,eAAkBjY,UAETA,OAEF,eACGzG,KAAK0e,+DAECte,EAAQ0B,wBAAS2E,yBAIjC,eAAM+J,GAELA,EAAIhM,KAAK,IAAKxE,KAAKwG,YAAYjE,yCACdvC,KAAK0e,sCACtB,KADShU,UAER8F,EAAIhM,KAAK,KACTkG,EAAKjF,MAAM+K,kCAEZA,EAAIhM,KAAK,0BAGV,eAAM6K,SAED5D,EAAS,IAAI9G,iCACA3E,KAAK0e,+CAChB2H,kBAAkBhX,EAAS5D,yCAC1BA,iCArCI2a,cAEM,4DAuCnBA,GAAQ1jB,UAAUshB,YAAcS,GAAQ/hB,UAAUshB,YAAYxkB,OAAO,CAAC,cAEzD8mB,8CAA6B7B,2EAI7B5B,EAAUxe,EAAKnF,EAAKgF,EAAO0hB,EAASC,EAAWC,0EAEpDjD,EAAUxe,IACXnF,IAAMA,IACNgF,MAAQA,IACR0hB,QAAUA,IACVC,UAAYA,IACZC,UAAYA,iEAGlB,eAAMtV,GAELA,EAAIhM,KAAK,IAAKxE,KAAKwG,YAAYjE,KAAM,cAChCrD,IAAIuG,MAAM+K,GACfA,EAAIhM,KAAK,gBACJN,MAAMuB,MAAM+K,GACjBA,EAAIhM,KAAK,kBACJohB,QAAQngB,MAAM+K,GACnBA,EAAIhM,KAAK,oBACJqhB,UAAUpgB,MAAM+K,GACE,OAAnBxQ,KAAK8lB,YAERtV,EAAIhM,KAAK,oBACJshB,UAAUrgB,MAAM+K,IAEtBA,EAAIhM,KAAK,0BAGV,eAAM6K,WAEDwW,EAAY7lB,KAAK6lB,UAAUb,aAAa3V,GAExC0W,EAAe1W,EAAQ2W,cAEvBva,EAAS,IAAI9G,IAER0L,EAAOC,MAAMuV,KACtB,KACKnb,EAAO2F,EAAK7B,UACZ9D,EAAK+D,KACR,yCACcyB,WAAWlQ,KAAK4lB,QAASlb,EAAKxG,wEACnCiM,OAAQjM,OACjBiM,EAAO8V,iBAAiBF,EAAc7hB,qCAChB,OAAnBlE,KAAK8lB,WAAsBhR,MAAM9U,KAAK8lB,UAAUd,aAAae,IACjE,KACK7mB,EAAMc,KAAKd,IAAI8lB,aAAae,GAC5B7hB,EAAQlE,KAAKkE,MAAM8gB,aAAae,GACpCta,EAAO9F,IAAIzG,EAAKgF,WAIXuH,8CAxDI6a,cAEM,kFA0DnBA,GAAqB5jB,UAAUshB,YAAcS,GAAQ/hB,UAAUshB,YAAYxkB,OAAO,CAAC,MAAO,QAAS,UAAW,YAAa,kBAE9G+mB,gDAA+B9B,+EAI/B5B,EAAUxe,EAAKqG,EAAMkb,EAASC,EAAWC,4EAE9CjD,EAAUxe,IACXqG,KAAOA,IACPkb,QAAUA,IACVC,UAAYA,IACZC,UAAYA,mEAGlB,eAAMtV,GAELA,EAAIhM,KAAK,IAAKxE,KAAKwG,YAAYjE,KAAM,eAChCmI,KAAKjF,MAAM+K,GAChBA,EAAIhM,KAAK,kBACJohB,QAAQngB,MAAM+K,GACnBA,EAAIhM,KAAK,oBACJqhB,UAAUpgB,MAAM+K,GACE,OAAnBxQ,KAAK8lB,YAERtV,EAAIhM,KAAK,oBACJshB,UAAUrgB,MAAM+K,IAEtBA,EAAIhM,KAAK,0BAGV,eAAM6K,OAGDgB,EAAOC,MADKtQ,KAAK6lB,UAAUb,aAAa3V,IAGxC0W,EAAe1W,EAAQ2W,cAEvBzX,EAAOvO,WAEE,CACZwO,KAAM,uBAEL,KACK9D,EAAO2F,EAAK7B,UACZ9D,EAAK+D,KACR,OAAO/D,qCACOwF,WAAW3B,EAAKqX,QAASlb,EAAKxG,wEACnCiM,OAAQjM,OACjBiM,EAAO8V,iBAAiBF,EAAc7hB,qCAChB,OAAnBqK,EAAKuX,WAAsBhR,MAAMvG,EAAKuX,UAAUd,aAAae,UAGzD,CAAC7hB,MADIqK,EAAK7D,KAAKsa,aAAae,GACbtX,MAAM,oDAnDrB8X,cAEM,4EA2DnBA,GAAuB7jB,UAAUshB,YAAcS,GAAQ/hB,UAAUshB,YAAYxkB,OAAO,CAAC,OAAQ,UAAW,YAAa,kBAExGgnB,gCAAe/B,+CAIf5B,EAAUxe,EAAK9B,4DAEpBsgB,EAAUxe,IACX9B,KAAOA,mDAGb,eAAMiO,GAELA,EAAIhM,KAAK,IAAKxE,KAAKwG,YAAYjE,KAAM,SAAUkD,OAAMzF,KAAKuC,MAAO,0BAGlE,eAAM8M,UAEErP,KAAKymB,KAAKpX,EAASrP,KAAKuC,+BAGhC,mBAAU8M,EAASnL,QAEbqR,KAAKlG,EAASrP,KAAKuC,KAAM2B,+BAG/B,sBAAamL,EAASgD,EAAUnO,QAE1BwiB,QAAQrX,EAASgD,EAAUrS,KAAKuC,KAAM2B,uBAG5C,cAAKmL,EAAS9M,UAEN8M,EAAQ6C,IAAI3P,uBAGpB,cAAK8M,EAAS9M,EAAM2B,GAEnBmL,EAAQ1J,IAAIpD,EAAM2B,0BAGnB,iBAAQmL,EAASgD,EAAU9P,EAAM2B,OAE5BkM,EAAWiC,EAASsU,KAAKtX,EAAQ6C,IAAI3P,GAAO2B,GAChDmL,EAAQ1J,IAAIpD,EAAM6N,iCA3CPoW,cAEM,oCA6CnBA,GAAO9jB,UAAUshB,YAAcS,GAAQ/hB,UAAUshB,YAAYxkB,OAAO,CAAC,aAExDonB,kCAAiBnC,mDAIjB5B,EAAUxe,EAAKwC,8DAEpBgc,EAAUxe,IACXwC,IAAMA,qDAGZ,eAAM2J,GAELA,EAAIhM,KAAK,IAAKxE,KAAKwG,YAAYjE,KAAM,cAChCsE,IAAIpB,MAAM+K,GACfA,EAAIhM,KAAK,0BAGV,eAAM6K,OAEDxI,EAAM7G,KAAK6G,IAAIme,aAAa3V,UACzBrP,KAAKygB,IAAI5Z,mCApBL+f,cAEM,mGAsBnBA,GAASlkB,UAAUshB,YAAcS,GAAQ/hB,UAAUshB,YAAYxkB,OAAO,CAAC,YAG1DqnB,gCAAeD,0JAI3B,aAAI/f,UAES,OAARA,GAA6C,mBAAtBA,EAAIzG,EAAQc,KAC/B2F,EAAIzG,EAAQc,QACZ2F,gCARGggB,cAEM,+DAWNC,mCAAkBF,sKAI9B,aAAI/f,UAEKA,EAAI,mCANDigB,cAEM,qHASNC,gCAAeH,0JAI3B,aAAI/f,UAEKiO,MAAMjO,iCANHkgB,cAEM,+DASNC,+BAAcvC,6CAId5B,EAAUxe,EAAK4iB,EAAOC,EAASC,2DAEpCtE,EAAUxe,IACX4iB,MAAQA,IACRC,QAAUA,IACVC,QAAUA,kDAGhB,eAAM3W,GAELA,EAAIhM,KACH,IACAxE,KAAKwG,YAAYjE,KACjB,EACA,eAEI0kB,MAAMxhB,MAAM+K,GACjBA,EAAIhM,KAAK,EAAG,iBACP0iB,QAAQzhB,MAAM+K,GACnBA,EAAIhM,KAAK,EAAG,iBACP2iB,QAAQ1hB,MAAM+K,GACnBA,EAAIhM,MAAM,EAAG,0BAGd,eAAM6K,UAIDyF,MADY9U,KAAKknB,QAAQlC,aAAa3V,IAEhCrP,KAAKinB,MAAMjC,aAAa3V,GAExBrP,KAAKmnB,QAAQnC,aAAa3V,gCAnCzB2X,cAEM,kFAsCnBA,GAAMtkB,UAAUshB,YAAcS,GAAQ/hB,UAAUshB,YAAYxkB,OAAO,CAAC,QAAS,UAAW,gBAE3E4nB,mCAAkBR,wKAI9B,eAAMvX,OAED5D,EAASzL,KAAK6G,IAAIme,aAAa3V,SAC7B,IAAI6S,GAAgBzW,uBAG3B,cAAK+E,GAEJA,EAAIhM,KAAK,gBACJqC,IAAI+N,KAAKpE,oCAbH4W,cAEM,kEAeNC,kCAAiBT,oKAI7B,eAAMvX,OAGDtR,EAAS6W,KADH5U,KAAK6G,IAAIme,aAAa3V,IAEhCA,EAAQtR,OAAOA,uBAGhB,cAAKyS,GAEJA,EAAIhM,KAAK,eACJqC,IAAI+N,KAAKpE,mCAdH6W,cAEM,gEAgBNC,mCAAkBV,wKAI9B,eAAMvX,OAGDtR,EAASwpB,WADHvnB,KAAK6G,IAAIme,aAAa3V,IAEhCA,EAAQtR,OAAOA,uBAGhB,cAAKyS,GAEJA,EAAIhM,KAAK,gBACJqC,IAAI+N,KAAKpE,oCAdH8W,cAEM,kEAgBNE,mCAAkB/C,qDAIlB5B,EAAUxe,EAAKuN,EAAMC,+DAE1BgR,EAAUxe,IACXuN,KAAOA,IACPC,KAAOA,sDAGb,eAAMrB,GAELA,EAAIhM,KAAK,IAAKxE,KAAKwG,YAAYjE,KAAM,eAChCqP,KAAKnM,MAAM+K,GAChBA,EAAIhM,KAAK,eACJqN,KAAKpM,MAAM+K,GAChBA,EAAIhM,KAAK,0BAGV,eAAM6K,OAEDuC,EAAO5R,KAAK4R,KAAKoT,aAAa3V,GAC9BwC,EAAO7R,KAAK6R,KAAKmT,aAAa3V,UAC3BrP,KAAKygB,IAAI7O,EAAMC,oCAxBX2V,cAEM,yGA0BnBA,GAAU9kB,UAAUshB,YAAcS,GAAQ/hB,UAAUshB,YAAYxkB,OAAO,CAAC,OAAQ,aAGnEioB,iCAAgBD,8JAI5B,aAAI5V,EAAMC,UAEI7R,KAAKymB,KAAK7U,EAAMC,4BAI9B,mBAAUxC,EAASnL,OAEd0N,EAAO5R,KAAK4R,KAAKoT,aAAa3V,GAC9BwC,EAAO7R,KAAK6R,KAAKmT,aAAa3V,QAC7BkG,KAAK3D,EAAMC,EAAM3N,+BAGvB,sBAAamL,EAASgD,EAAUnO,OAE3B0N,EAAO5R,KAAK4R,KAAKoT,aAAa3V,GAC9BwC,EAAO7R,KAAK6R,KAAKmT,aAAa3V,QAC7BqX,QAAQrU,EAAUT,EAAMC,EAAM3N,uBAGpC,cAAK2hB,EAAW3mB,MAEW,iBAAf2mB,GAA2Bpb,QAAQob,GAC9C,IACK3mB,aAAekL,GACnB,KACKC,EAAQnL,EAAImL,MAAOC,EAAOpL,EAAIoL,YAC9BD,MAAAA,IACHA,EAAQ,GACLC,MAAAA,IACHA,EAAOub,EAAUjoB,QACXioB,EAAUzb,MAAMC,EAAOC,OAI1Bod,EAASxoB,KACTA,EAAM,IACTA,GAAO2mB,EAAUjoB,QACdsB,EAAM,GAAKA,GAAO2mB,EAAUjoB,OAC/B,MAAM,IAAI6kB,GAAWoD,EAAW6B,UAC1B7B,EAAU3mB,GAGd,GAAI2mB,GAAoD,mBAAhCA,EAAUzlB,EAAQ4B,gBACvC6jB,EAAUzlB,EAAQ4B,SAAS9C,GAC9B,GAAIyL,OAAOkb,GACf,OAAOA,EAAU3T,IAAIhT,GACjB,GAAI8S,UAAU6T,GAClB,OAAOA,EAAU3mB,GAEjB,MAAM,IAAI8P,GAAUiB,MAAM4V,GAAWlf,WAAa,oDAGpD,cAAKkf,EAAW3mB,EAAKgF,MAEhBuG,QAAQob,MAEP3mB,aAAekL,GACnB,KACKC,EAAQnL,EAAImL,MAAOC,EAAOpL,EAAIoL,KACpB,OAAVD,EACHA,EAAQ,EACAA,EAAQ,IAChBA,GAASwb,EAAUjoB,QAChByM,EAAQ,EACXA,EAAQ,EACAA,EAAQwb,EAAUjoB,SAC1ByM,EAAQwb,EAAUjoB,QACN,OAAT0M,EACHA,EAAOub,EAAUjoB,OACT0M,EAAO,IACfA,GAAQub,EAAUjoB,QACf0M,EAAO,EACVA,EAAO,EACCA,EAAOub,EAAUjoB,SACzB0M,EAAOub,EAAUjoB,QACd0M,EAAOD,IACVC,EAAOD,GACRwb,EAAU1I,OAAO9S,EAAOC,EAAKD,OACxB,IAAIgG,EAAOC,MAAMpM,KACtB,KACKwG,EAAO2F,EAAK7B,UACZ9D,EAAK+D,KACR,MACDoX,EAAU1I,OAAO9S,IAAS,EAAGK,EAAKxG,YAIpC,KACKwjB,EAASxoB,KACTA,EAAM,IACTA,GAAO2mB,EAAUjoB,QACdsB,EAAM,GAAKA,GAAO2mB,EAAUjoB,OAC/B,MAAM,IAAI6kB,GAAWoD,EAAW6B,GACjC7B,EAAU3mB,GAAOgF,OAGd,GAAI2hB,GAAoD,mBAAhCA,EAAUzlB,EAAQ6B,SAC9C4jB,EAAUzlB,EAAQ6B,SAAS/C,EAAKgF,QAC5B,GAAIyG,OAAOkb,GACfA,EAAUlgB,IAAIzG,EAAKgF,OACf,CAAA,IAAI8N,UAAU6T,GAGlB,MAAM,IAAItD,GAAsBsD,GAFhCA,EAAU3mB,GAAOgF,0BAKnB,iBAAQmO,EAAUwT,EAAW3mB,EAAKgF,QAE5BqR,KAAKsQ,EAAW3mB,EAAKmT,EAASsU,KAAK3mB,KAAKymB,KAAKZ,EAAW3mB,GAAMgF,mCAjHxDujB,cAEM,6DAoHNE,+BAAcH,sJAI1B,aAAI5V,EAAMC,UAEFD,IAASC,+BANL8V,cAEM,6EASNC,kCAAiBJ,kKAI7B,aAAI5V,EAAMC,UAEFD,IAASC,kCANL+V,cAEM,qFASNC,+BAAcL,sJAI1B,aAAI5V,EAAMC,UAEFF,IAAIC,EAAMC,gCANNgW,cAEM,qEASNC,+BAAcN,sJAI1B,aAAI5V,EAAMC,UAEFM,IAAIP,EAAMC,gCANNiW,cAEM,sEASNC,+BAAcP,sJAI1B,aAAI5V,EAAMC,UAEFe,IAAIhB,EAAMC,gCANNkW,cAEM,wEASNC,+BAAcR,sJAI1B,aAAI5V,EAAMC,UAEFgB,IAAIjB,EAAMC,gCANNmW,cAEM,kFASNC,+BAAcT,sJAI1B,aAAI5V,EAAMC,UAEFiB,IAAIlB,EAAMC,gCANNoW,cAEM,2EASNC,+BAAcV,sJAI1B,aAAI5V,EAAMC,UAEFkB,IAAInB,EAAMC,gCANNqW,cAEM,qFASNC,qCAAoBX,8KAIhC,aAAI3gB,EAAKgf,MAEY,iBAAThf,GAA2C,iBAAfgf,SAEH,IAA5BA,EAAU3gB,QAAQ2B,GAErB,GAAI4D,QAAQob,UAEmB,IAA5BA,EAAU3gB,QAAQ2B,GAErB,GAAIgf,GAAqD,mBAAjCA,EAAUzlB,EAAQO,iBACvCklB,EAAUzlB,EAAQO,UAAUkG,GAC/B,GAAI8D,OAAOkb,IAAchb,OAAOgb,GACpC,OAAOA,EAAUngB,IAAImB,GACjB,GAAImL,UAAU6T,GACnB,KACM,IAAI3mB,KAAO2mB,KAEX3mB,IAAQ2H,EACX,OAAO,SAEF,EAEH,GAAIkC,SAAS8c,UAEVA,EAAU/Y,KAAOjG,GAAOgf,EAAU9Y,KAAOlG,GAAOgf,EAAU7Y,KAAOnG,GAAOgf,EAAU5Y,KAAOpG,QAE3F,IAAImI,GAAUiB,MAAM4V,GAAWlf,WAAa,8DA/BvCwhB,cAEM,+EAkCNC,wCAAuBZ,0LAInC,aAAI3gB,EAAKgf,UAEAsC,GAAYzlB,UAAU+d,IAAI5Z,EAAKgf,yCAN5BuC,cAEM,sFASNC,gCAAeb,0JAI3B,aAAI5V,EAAMC,MAELD,GAAsC,mBAAvBA,EAAKxR,EAAQgB,KAC/B,OAAOwQ,EAAKxR,EAAQgB,KAAKyQ,GACrB,GAAIA,GAAuC,mBAAxBA,EAAKzR,EAAQiB,MACpC,OAAOwQ,EAAKzR,EAAQiB,MAAMuQ,MACvBA,MAAAA,GAAAA,MAAuCC,EAC1C,MAAM,IAAI7C,GAAUiB,MAAM2B,GAAMjL,WAAa,MAAQsJ,MAAM4B,GAAMlL,WAAa,4BAC3E8D,QAAQmH,IAASnH,QAAQoH,gCACjBD,sBAASC,IAEbD,EAAOC,sBAGhB,cAAKD,EAAMC,UAENpH,QAAQmH,IAASnH,QAAQoH,IAE5ByD,GAASqJ,OAAO/M,EAAMC,GACfD,GAGA5R,KAAKygB,IAAI7O,EAAMC,iCA1BZwW,cAEM,mEA6BN7H,gCAAegH,0JAI3B,aAAI5V,EAAMC,MAELD,GAAsC,mBAAvBA,EAAKxR,EAAQkB,KAC/B,OAAOsQ,EAAKxR,EAAQkB,KAAKuQ,GACrB,GAAIA,GAAuC,mBAAxBA,EAAKzR,EAAQmB,MACpC,OAAOsQ,EAAKzR,EAAQmB,MAAMqQ,GACtB,GAAI1I,QAAQ0I,IAAS1I,QAAQ2I,GACjC,OAAO7R,KAAKsoB,UAAU1W,EAAMC,GACxB,GAAIvI,YAAYsI,IAAStI,YAAYuI,GACzC,OAAO7R,KAAKuoB,cAAc3W,EAAMC,MAC7BD,MAAAA,GAAAA,MAAuCC,EAC1C,MAAM,IAAI7C,GAAUiB,MAAM2B,GAAMjL,WAAa,MAAQsJ,MAAM4B,GAAMlL,WAAa,4BACxEiL,EAAOC,2BAGf,mBAAUD,EAAMC,UAER7R,KAAKuoB,cAAc3W,EAAKuC,MAAOtC,EAAKsC,oCAG5C,uBAAcvC,EAAMC,OAEf2W,EAAQ3W,EAAOD,KAEf4W,EACJ,KACK7rB,EAAIiV,EACRA,EAAOC,EACPA,EAAOlV,UAIJ8rB,EAAQ7W,EAAKrI,cACbmf,EAAWrS,GAAa4E,QAAQrJ,GAChC+W,EAAQ9W,EAAKtI,cACbqf,EAAWvS,GAAa4E,QAAQpJ,GAEhCgX,EAAW,EAERJ,EAAQE,GAEdE,GAAYrR,GAASyD,QAAQ9G,MAAMwU,EAAO,GAAI,OAC5CA,EAEHE,GAAYH,EAAWE,MAEnBE,EAASlX,EAAKlI,WACdqf,EAAWnX,EAAKjI,aAChBqf,EAAWpX,EAAKhI,aAChBqf,EAASpX,EAAKnI,WACdwf,EAAWrX,EAAKlI,aAGhBwf,EAAeH,EAFJnX,EAAKjI,aAEsB,IAAOmf,EAAWG,EAAY,IAAMJ,EAASG,IAEnFG,EAAmBxX,EAAK/H,kBAAoBgI,EAAKhI,yBAEjD2e,IAEHK,GAAYA,EACZM,GAAeA,EACfC,GAAoBA,GAEd,IAAIzb,GAAUkb,EAAUM,EAAa,IAAKC,uBAGlD,cAAKxX,EAAMC,UAEH7R,KAAKygB,IAAI7O,EAAMC,iCAxEX2O,cAEM,wEA4EN6I,gCAAe7B,0JAI3B,aAAI5V,EAAMC,MAELD,GAAsC,mBAAvBA,EAAKxR,EAAQoB,KAC/B,OAAOoQ,EAAKxR,EAAQoB,KAAKqQ,GACrB,GAAIA,GAAuC,mBAAxBA,EAAKzR,EAAQqB,MACpC,OAAOoQ,EAAKzR,EAAQqB,MAAMmQ,MACvBA,MAAAA,GAAAA,MAAuCC,EAC1C,MAAM,IAAI7C,GAAU4C,EAAO,MAAQC,EAAO,kBACtC,GAAIoE,OAAOrE,IAASoE,QAAQpE,GACjC,IACsB,iBAAVC,EACX,IACKD,EAAO,EACV,MAAM,IAAI9G,GAAW,8CACfoN,YAAYrG,EAAMD,GAErB,GAAInH,QAAQoH,GACjB,IACKD,EAAO,EACV,MAAM,IAAI9G,GAAW,8CACfsN,aAAavG,EAAMD,SAGvB,GAAIqE,OAAOpE,IAASmE,QAAQnE,GACjC,IACsB,iBAAVD,EACX,IACKC,EAAO,EACV,MAAM,IAAI/G,GAAW,8CACfoN,YAAYtG,EAAMC,GAErB,GAAIpH,QAAQmH,GACjB,IACKC,EAAO,EACV,MAAM,IAAI/G,GAAW,8CACfsN,aAAaxG,EAAMC,WAGrBD,EAAOC,sBAGf,cAAKD,EAAMC,MAENpH,QAAQmH,IAASqE,OAAOpE,GAC5B,IACKA,EAAO,UAENtU,EAAI,EACJ+rB,EAAa1X,EAAKhU,OAASiU,EACxBD,EAAKhU,OAAS0rB,GACpB1X,EAAKpN,KAAKoN,EAAKrU,WAGhBqU,EAAKuL,OAAO,EAAGvL,EAAKhU,eACdgU,EAGP,OAAO5R,KAAKygB,IAAI7O,EAAMC,iCA7DZwX,cAEM,2EAgENE,qCAAoB/B,8KAIhC,aAAI5V,EAAMC,MAELD,GAA2C,mBAA5BA,EAAKxR,EAAQwB,UAC/B,OAAOgQ,EAAKxR,EAAQwB,UAAUiQ,GAC1B,GAAIA,GAA4C,mBAA7BA,EAAKzR,EAAQyB,WACpC,OAAOgQ,EAAKzR,EAAQyB,WAAW+P,MAC5BA,MAAAA,GAAAA,MAAuCC,EAC1C,MAAM,IAAI7C,GAAUiB,MAAM2B,GAAMjL,WAAa,OAASsJ,MAAM4B,GAAMlL,WAAa,kBAC3E,KAAsB,iBAAViL,GAAuC,kBAAVA,GAA0C,iBAAVC,GAAuC,kBAAVA,GAAgC,GAARA,GAClI,MAAM,IAAI2Q,UACJ9Z,KAAK+N,MAAM7E,EAAOC,uBAG1B,cAAKD,EAAMC,UAEH7R,KAAKygB,IAAI7O,EAAMC,sCAnBX0X,cAEM,+EAsBNC,oCAAmBhC,0KAI/B,aAAI5V,EAAMC,MAELD,GAA0C,mBAA3BA,EAAKxR,EAAQsB,SAC/B,OAAOkQ,EAAKxR,EAAQsB,SAASmQ,GACzB,GAAIA,GAA2C,mBAA5BA,EAAKzR,EAAQuB,UACpC,OAAOkQ,EAAKzR,EAAQuB,UAAUiQ,MAC3BA,MAAAA,GAAAA,MAAuCC,EAC1C,MAAM,IAAI7C,GAAUiB,MAAM2B,GAAMjL,WAAa,MAAQsJ,MAAM4B,GAAMlL,WAAa,kBAC1E,KAAsB,iBAAViL,GAAuC,kBAAVA,GAA0C,iBAAVC,GAAuC,kBAAVA,GAAgC,GAARA,GAClI,MAAM,IAAI2Q,UACJ5Q,EAAOC,sBAGf,cAAKD,EAAMC,UAEH7R,KAAKygB,IAAI7O,EAAMC,qCAnBX2X,cAEM,wEAsBNC,gCAAejC,0JAI3B,aAAI5V,EAAMC,UAEF0E,KAAK3E,EAAMC,uBAGnB,cAAKD,EAAMC,UAEH7R,KAAKygB,IAAI7O,EAAMC,iCAXX4X,cAEM,iEAcNC,sCAAqBlC,kLAIjC,aAAI5V,EAAMC,OAEI,IAATA,EACHA,EAAO,GACU,IAATA,IACRA,EAAO,GACJA,EAAO,EACV,OAAO8X,GAAcjnB,UAAU+d,IAAI7O,GAAOC,QAC9B,IAATD,EACHA,EAAO,GACU,IAATA,IACRA,EAAO,GACDC,KACND,GAAQ,SACFA,sBAGR,cAAKA,EAAMC,UAEH7R,KAAKygB,IAAI7O,EAAMC,uCAvBX6X,cAEM,uEA0BNC,uCAAsBnC,sLAIlC,aAAI5V,EAAMC,OAEI,IAATA,EACHA,EAAO,GACU,IAATA,IACRA,EAAO,GACJA,EAAO,EACV,OAAO6X,GAAahnB,UAAU+d,IAAI7O,GAAOC,QAC7B,IAATD,EACHA,EAAO,GACU,IAATA,IACRA,EAAO,GACDC,KACND,GAAQ,SACFlJ,KAAK+N,MAAM7E,uBAGnB,cAAKA,EAAMC,UAEH7R,KAAKygB,IAAI7O,EAAMC,wCAvBX8X,cAEM,wEA0BNC,mCAAkBpC,sKAI9B,aAAI5V,EAAMC,UAEI,IAATA,EACHA,EAAO,GACU,IAATA,IACRA,EAAO,GACDD,EAAOC,sBAGf,cAAKD,EAAMC,UAEH7R,KAAKygB,IAAI7O,EAAMC,oCAfX+X,cAEM,uEAkBNC,mCAAkBrC,sKAI9B,aAAI5V,EAAMC,UAEI,IAATA,EACHA,EAAO,GACU,IAATA,IACRA,EAAO,GACDD,EAAOC,sBAGf,cAAKD,EAAMC,UAEH7R,KAAKygB,IAAI7O,EAAMC,oCAfXgY,cAEM,mFAkBNC,kCAAiBtC,kKAI7B,aAAI5V,EAAMC,UAEI,IAATA,EACHA,EAAO,GACU,IAATA,IACRA,EAAO,GACDD,EAAOC,sBAGf,cAAKD,EAAMC,UAEH7R,KAAKygB,IAAI7O,EAAMC,mCAfXiY,cAEM,uEAkBNC,gCAAevC,4JAI3B,eAAMnY,OAEDuC,EAAO5R,KAAK4R,KAAKoT,aAAa3V,UAC7ByF,MAAMlD,GAEA5R,KAAK6R,KAAKmT,aAAa3V,GAD1BuC,gCARGmY,cAEM,oEAaNC,+BAAcxC,wJAI1B,eAAMnY,OAEDuC,EAAO5R,KAAK4R,KAAKoT,aAAa3V,UAC9ByF,MAAMlD,GACFA,EACG5R,KAAK6R,KAAKmT,aAAa3V,gCATvB2a,cAEM,gEAaNC,iCAAgBxF,iDAIhB5B,EAAUxe,EAAKwC,EAAKJ,6DAEzBoc,EAAUxe,IACXwC,IAAMA,IACNJ,SAAWA,oDAGjB,eAAM+J,GAELA,EAAIhM,KAAK,IAAKxE,KAAKwG,YAAYjE,KAAM,cAChCsE,IAAIpB,MAAM+K,GACfA,EAAIhM,KAAK,aAAciB,OAAMzF,KAAKyG,UAAW,0BAG9C,eAAM4I,OAEDxI,EAAM7G,KAAK6G,IAAIme,aAAa3V,UACnBrP,KAAKymB,KAAK5f,EAAK7G,KAAKyG,mCAIlC,mBAAU4I,EAASnL,OAEd2C,EAAM7G,KAAK6G,IAAIme,aAAa3V,QAC3BkG,KAAK1O,EAAK7G,KAAKyG,SAAUvC,+BAG/B,sBAAamL,EAASgD,EAAUnO,OAE3B2C,EAAM7G,KAAK6G,IAAIme,aAAa3V,QAC3BqX,QAAQrU,EAAUxL,EAAK7G,KAAKyG,SAAUvC,uBAG5C,cAAKiD,EAAQV,OAERvE,EAAO+N,MAAM9I,cAGTjF,EAAKJ,QAAQqF,EAAQV,GAE7B,MAAOS,MAEFA,aAAeR,IAAkBQ,EAAIL,MAAQM,EAChD,OAEA,MAAMD,uBAIT,cAAKC,EAAQV,EAAUvC,MAEC,WAAnB4C,QAAOK,IAA4D,mBAA7BA,EAAO/G,EAAQ2B,SACxDoF,EAAO/G,EAAQ2B,SAAS0E,EAAUvC,QAC9B,GAAIyG,OAAOxD,GACfA,EAAOxB,IAAIc,EAAUvC,OACjB,CAAA,IAAI8N,UAAU7K,GAGlB,MAAM,IAAI6H,GAAUiB,MAAM9I,GAAQR,WAAa,sCAF/CQ,EAAOV,GAAYvC,0BAKrB,iBAAQmO,EAAUlL,EAAQV,EAAUvC,OAE/BgmB,EAAWlqB,KAAKymB,KAAKtf,EAAQV,GAC7B2J,EAAWiC,EAASsU,KAAKuD,EAAUhmB,QAClCqR,KAAKpO,EAAQV,EAAU2J,kCArEjB6Z,cAEM,4FAuEnBA,GAAQvnB,UAAUshB,YAAcS,GAAQ/hB,UAAUshB,YAAYxkB,OAAO,CAAC,MAAO,iBAGhE2qB,iCAAgB1F,iDAIhB5B,EAAUxe,EAAKwC,EAAKpC,6DAEzBoe,EAAUxe,IACXwC,IAAMA,IACNpC,KAAOA,oDAGb,eAAM+L,GAELA,EAAIhM,KAAK,IAAKxE,KAAKwG,YAAYjE,KAAM,cAChCsE,IAAIpB,MAAM+K,sCACCxQ,KAAKyE,qCACrB,KADSQ,UAERuL,EAAIhM,KAAK,KACTS,EAAIQ,MAAM+K,kCAEXA,EAAIhM,KAAK,8BAGV,mBAAU6K,SAEL5K,EAAO,GAAIC,EAAS,gCACR1E,KAAKyE,8CAChB2lB,kBAAkB/a,EAAS5K,EAAMC,wCAC/B,CAACD,EAAMC,+BAGf,sBAAa2K,cAIJrP,KAAKikB,MAAM5U,GAEnB,MAAOnI,cAEDgd,oBAAoBhd,GACnBA,wBAIR,eAAMmI,OAEDxI,EAAM7G,KAAK6G,IAAIme,aAAa3V,oBACXrP,KAAKqqB,UAAUhb,aACvBW,MAAMX,EAASxI,4CAhDjBsjB,cAEM,sDAmDnBA,GAAQznB,UAAUshB,YAAcS,GAAQ/hB,UAAUshB,YAAYxkB,OAAO,CAAC,MAAO,aAGhE8qB,mCAAkBH,qDAIlBtH,EAAUxe,EAAKwC,EAAKpC,+DAEzBoe,EAAUxe,EAAKwC,EAAKpC,IACrBgD,OAAS,yDAGf,eAAM+I,GAELA,EAAIhM,KACH,IACAxE,KAAKwG,YAAYjE,KACjB,WACAkD,OAAMzF,KAAKyH,OAAO2b,MAClB,cAEIvc,IAAIpB,MAAM+K,GACfA,EAAIhM,KAAK,sCACOxE,KAAKyE,qCACrB,KADSQ,UAERuL,EAAIhM,KAAK,KACTS,EAAIQ,MAAM+K,GACVA,EAAIhM,KAAK,kCAEVgM,EAAIhM,MAAM,EAAG,yBAGd,cAAKgM,GAEJA,EAAIhM,KAAK,UAAWxE,KAAK+Q,OAAOjI,QAAQ,SAAU,MAC9B,OAAhB9I,KAAKyH,QAER+I,EAAIhM,KAAK,gBAAiBiB,OAAMzF,KAAKyH,OAAO2b,qCAI9C,wBAAe/T,EAASxI,EAAKpC,EAAMC,UAE3BqL,YAAYV,EAASxI,EAAKpC,EAAMC,kCAGxC,yBAAgB2K,EAASxI,EAAKpC,EAAMC,GAEnC2K,EAAQgS,QAAQ7c,KAAK+iB,gBAEjB9b,EAAS,SAGZA,EAASsE,YAAYV,EAASxI,EAAKpC,EAAMC,WAIzC2K,EAAQgS,QAAQlE,OAAO9N,EAAQgS,QAAQzjB,OAAO,EAAG,UAE3C6N,qCAGR,6BAAoB4D,EAASxI,EAAKpC,EAAMC,QAElC6lB,eAAelb,EAASxI,EAAKpC,EAAMC,gCAGzC,uBAAc2K,EAASxI,EAAKpC,EAAMC,OAE7B3G,EAAS6W,KAAK/N,GAClBwI,EAAQtR,OAAOA,iCAGhB,wBAAesR,EAASxI,OAEnB9I,EAASwpB,WAAW1gB,GACxBwI,EAAQtR,OAAOA,qCAGhB,4BAAmBsR,EAASxI,SAErB,IAAImI,GAAUvJ,OAAMoB,GAAO,+DAGlC,4BAAmBwI,EAASxI,QAEtB2jB,mBAAmBnb,EAASxI,+BAGlC,sBAAawI,OAER0W,EAAe1W,EAAQob,WAA2B,OAAhBzqB,KAAKyH,OAAkBzH,KAAKyH,OAAO2b,KAAO,MAC5Evc,EAAM7G,KAAK6G,IAAIme,aAAae,oBAEX/lB,KAAKqqB,UAAUtE,MAA/BthB,OAAMC,YACNgmB,6BAA6B3E,EAActhB,EAAMC,cAIjDkL,sBAAsB/I,QAEpB8jB,oBAAoB5E,EAAclf,EAAKpC,EAAMC,QAI7CkmB,mBAAmB7E,EAAclf,GAEhC,KAER,MAAOK,cAEDgd,oBAAoBhd,GACnBA,+CAIR,sCAA6BmI,EAAS5K,qCAlH1B6lB,cAEM,gEAqHnBA,GAAU5nB,UAAUshB,YAAcmG,GAAQznB,UAAUshB,YAAYxkB,OAAO,CAAC,eAG3DqrB,oCAAmBP,0LAI/B,6BAAoBjb,EAASxI,EAAKpC,EAAMC,QAElComB,gBAAgBzb,EAASxI,EAAKpC,EAAMC,qCAN9BmmB,cAEM,kGASNE,0CAAyBT,iNAIrC,4BAAmBjb,EAASxI,QAEtBmkB,cAAc3b,EAASxI,2CANjBkkB,cAEM,gEASNE,2CAA0BX,qNAItC,4BAAmBjb,EAASxI,QAEtBqkB,eAAe7b,EAASxI,4CANlBokB,cAEM,qGASNE,2CAA0Bb,sNAItC,6BAAoBjb,EAASxI,EAAKpC,EAAMC,QAElComB,gBAAgBzb,EAASxI,EAAKpC,EAAMC,qCAG1C,4BAAmB2K,EAASxI,QAEtBmkB,cAAc3b,EAASxI,4CAXjBskB,cAEM,qGAcNC,4CAA2Bd,0NAIvC,6BAAoBjb,EAASxI,EAAKpC,EAAMC,QAElComB,gBAAgBzb,EAASxI,EAAKpC,EAAMC,qCAG1C,4BAAmB2K,EAASxI,QAEtBqkB,eAAe7b,EAASxI,6CAXlBukB,cAEM,oGAwCjBhrB,EAAQ0B,YA1BGupB,wCAAuBf,4LAInC,eAAM9Z,GAELA,EAAIhM,KAAK,IAAKxE,KAAKwG,YAAYjE,KAAM,EAAI,aACpCsE,IAAIpB,MAAM+K,sCACCxQ,KAAKyE,qCACrB,KADSQ,UAERuL,EAAIhM,KAAK,GACTS,EAAIQ,MAAM+K,kCAEXA,EAAIhM,KAAK,EAAG,iBACP8mB,QAAQ7lB,MAAM+K,GACnBA,EAAIhM,MAAM,EAAG,iDAGd,sCAA6B6K,EAAS5K,EAAMC,MAEvCA,EAAOuN,eAAe,WACzB,MAAM,IAAI5M,GAAc,0CACrBkmB,EAAU,IAAIzT,GAAgB9X,KAAKsrB,QAAStrB,KAAKsrB,QAAQjpB,UAAWgN,EAAQ4R,MAChFvc,EAAO4mB,QAAUC,iBAGlB,eAAkB9kB,SAGH,YAAbA,GACa,eAAbA,GACa,qBAAbA,GACa,qBAAbA,EAEOzG,KAAKyG,oDAECrG,EAAQ0B,wBAAS2E,yCApCpB4kB,cAEM,kKAsCnBA,GAAe3oB,UAAUshB,YAAcsG,GAAU5nB,UAAUshB,YAAYxkB,OAAO,CAAC,UAAW,cAwCxFY,EAAQ0B,YArCG0pB,yCAAwBlB,gMAIpC,eAAM9Z,GAELA,EAAIhM,KAAK,IAAKxE,KAAKwG,YAAYjE,KAAM,EAAI,aACpCsE,IAAIpB,MAAM+K,sCACCxQ,KAAKyE,qCACrB,KADSQ,UAERuL,EAAIhM,KAAK,GACTS,EAAIQ,MAAM+K,qEAEMxQ,KAAKsrB,wCACtB,KADS5gB,UAER8F,EAAIhM,KAAK,GACTkG,EAAKjF,MAAM+K,kCAEZA,EAAIhM,MAAM,EAAG,iDAGd,sCAA6B6K,EAAS5K,EAAMC,OAEvCqhB,EAAe1W,EAAQ2W,kBAGtB,IAAI9mB,KAFTusB,GAAS/oB,UAAUuhB,MAAMxjB,KAAKT,KAAM+lB,GAEpBA,EAAa9E,QAExB8E,EAAa9E,KAAKhP,eAAe/S,GACrC,IACKA,KAAOwF,EACV,MAAM,IAAIW,GAAc,8BAAgCnG,GACzDwF,EAAOxF,GAAO6mB,EAAa7T,IAAIhT,mBAKlC,eAAkBuH,SAGH,YAAbA,GACa,eAAbA,GACa,qBAAbA,GACa,qBAAbA,EAEOzG,KAAKyG,qDAECrG,EAAQ0B,wBAAS2E,0CA/CpB+kB,cAEM,+GAiDnBA,GAAgB9oB,UAAUshB,YAAcsG,GAAU5nB,UAAUshB,YAAYxkB,OAAO,CAAC,UAAW,gBAI9E4K,+BAAcjH,6CAEdkH,EAAOC,6DAGbD,MAAQA,IACRC,KAAOA,oCAGZlK,EAAQ8B,WAAT,wBAEQlC,KAAKkC,uBAGb,YAAGxC,OAEE2K,EAAQrK,KAAKqK,OAAS,EACtBC,EAAqB,OAAdtK,KAAKsK,KAAgB5K,EAAO9B,OAASoC,KAAKsK,YAC9C5K,EAAO0K,MAAMC,EAAOC,UAG3BlK,EAAQG,WAAT,uBAEQ,SAAWkF,OAAMzF,KAAKqK,OAAS,KAAO5E,OAAMzF,KAAKsK,MAAQ,iBAGhElK,EAAQ0B,cAAT,eAAkB2E,UAETA,OAEF,eACGzG,KAAKqK,UACR,cACGrK,KAAKsK,mBAEN,IAAI5D,GAAe1G,KAAMyG,iBAKnC2D,GAAM1H,UAAUR,KAAO,IAAImE,GAAK,KAAM,QAAS,8BAIlCqlB,kCAAiBjH,mDAIjB5B,EAAUxe,EAAKsnB,EAAQC,8DAE5B/I,EAAUxe,IACXsnB,OAASA,IACTC,OAASA,qDAGf,eAAMpb,GAELA,EAAIhM,KAAK,IAAKxE,KAAKwG,YAAYjE,MACX,OAAhBvC,KAAK2rB,SAERnb,EAAIhM,KAAK,iBACJmnB,OAAOlmB,MAAM+K,IAEC,OAAhBxQ,KAAK4rB,SAERpb,EAAIhM,KAAK,iBACJonB,OAAOnmB,MAAM+K,IAEnBA,EAAIhM,KAAK,0BAGV,eAAM6K,OAEDsc,EAAyB,OAAhB3rB,KAAK2rB,OAAkB3rB,KAAK2rB,OAAO3G,aAAa3V,GAAW,KACpEuc,EAAyB,OAAhB5rB,KAAK4rB,OAAkB5rB,KAAK4rB,OAAO5G,aAAa3V,GAAW,YACjE,IAAIjF,GAAMuhB,EAAQC,mCA/BdF,cAEM,0EAiCnBA,GAAShpB,UAAUshB,YAAcS,GAAQ/hB,UAAUshB,YAAYxkB,OAAO,CAAC,SAAU,eAEpEqsB,sCAAqBpH,2DAIrB5B,EAAUxe,EAAK8L,EAAQjM,kEAE5B2e,EAAUxe,IACX8L,OAASA,IACTjM,MAAQA,yDAGd,eAAMsM,GAELA,EAAIhM,KACH,IACAxE,KAAKwG,YAAYjE,KACjB,WACAkD,OAAMzF,KAAKmQ,QACX,gBAEIjM,MAAMuB,MAAM+K,GACjBA,EAAIhM,KAAK,yCArBEqnB,cAEM,sHAuBnBA,GAAanpB,UAAUshB,YAAcS,GAAQ/hB,UAAUshB,YAAYxkB,OAAO,CAAC,SAAU,cAExEssB,mCAAkBD,wKAI9B,eAAMxc,SAEDnL,EAAQlE,KAAKkE,MAAM8gB,aAAa3V,gCACxBa,WAAWlQ,KAAKmQ,OAAQjM,oEAC1BiM,OAAQjM,OACjBiM,EAAO8V,iBAAiB5W,EAASnL,oEATvB4nB,cAEM,wFAWNC,sCAAqBF,oLAEjC,eAAMxc,SAEDnL,EAAQlE,KAAKkE,MAAM8gB,aAAa3V,gCACxBa,WAAWlQ,KAAKmQ,OAAQjM,oEAC1BiM,OAAQjM,OACjBiM,EAAO6b,oBAAoB3c,EAASrP,KAAKisB,UAAW/nB,uDAI1CgoB,mCAAkBH,0JAAlBG,cAEM,uGAGnBA,GAAUxpB,UAAUupB,UAAY5D,GAAO3lB,cAE1BypB,mCAAkBJ,0JAAlBI,cAEM,8HAGnBA,GAAUzpB,UAAUupB,UAAYzL,GAAO9d,cAE1B0pB,mCAAkBL,0JAAlBK,cAEM,wIAGnBA,GAAU1pB,UAAUupB,UAAY5C,GAAO3mB,cAE1B2pB,uCAAsBN,0KAAtBM,cAEM,8IAGnBA,GAAc3pB,UAAUupB,UAAYzC,GAAW9mB,cAElC4pB,wCAAuBP,8KAAvBO,cAEM,wIAGnBA,GAAe5pB,UAAUupB,UAAY1C,GAAY7mB,cAEpC6pB,mCAAkBR,0JAAlBQ,cAEM,2IAGnBA,GAAU7pB,UAAUupB,UAAYxC,GAAO/mB,cAE1B8pB,yCAAwBT,kLAAxBS,cAEM,kJAGnBA,GAAgB9pB,UAAUupB,UAAYvC,GAAahnB,cAEtC+pB,0CAAyBV,sLAAzBU,cAEM,mJAGnBA,GAAiB/pB,UAAUupB,UAAYtC,GAAcjnB,cAExCgqB,sCAAqBX,sKAArBW,cAEM,0JAGnBA,GAAahqB,UAAUupB,UAAYrC,GAAUlnB,cAEhCiqB,sCAAqBZ,sKAArBY,cAEM,mKAGnBA,GAAajqB,UAAUupB,UAAYpC,GAAUnnB,cAEhCkqB,qCAAoBb,kKAApBa,cAEM,yJAGnBA,GAAYlqB,UAAUupB,UAAYnC,GAASpnB,YAkCzCtC,EAAQ0B,YAhCG2pB,kCAAiBhH,mDAIjB5B,EAAUtF,EAAUkG,8DAEzBZ,EAAUtF,EAAUkG,IACrB6H,QAAU,sDAGhB,eAAMjc,sCAEYrP,KAAKsrB,iDAChBtG,aAAa3V,uDAGpB,cAAKmB,MAEAxQ,KAAKsrB,QAAQ1tB,OACjB,oCACkBoC,KAAKsrB,wCACtB,SACM1W,KAAKpE,GACVA,EAAIhM,KAAK,wCAKVgM,EAAIhM,KAAK,OAAQ,kBAInB,eAAkBiC,SAGH,YAAbA,GACa,eAAbA,GACa,qBAAbA,GACa,qBAAbA,EAEOzG,KAAKyG,8CAECrG,EAAQ0B,wBAAS2E,mCA1CpBglB,cAEM,iDA4CnBA,GAAS/oB,UAAUshB,YAAcS,GAAQ/hB,UAAUshB,YAAYxkB,OAAO,CAAC,UAAW,gBAErEqtB,qCAAoBpB,yDAIpB5I,EAAUxe,EAAKuhB,EAASC,iEAE7BhD,EAAUxe,IACXuhB,QAAUA,IACVC,UAAYA,wDAGlB,eAAMrV,GAELA,EAAIhM,KACH,IACAxE,KAAKwG,YAAYjE,KACjB,YACAkD,OAAMzF,KAAK4lB,SACX,oBAEIC,UAAUpgB,MAAM+K,GACrBA,EAAIhM,KAAK,iCAGV,sBAAagM,EAAKoV,MAEbnb,QAAQmb,GACZ,CACCpV,EAAIhM,KAAK,WACLuP,EAAQ+Y,mCACQlH,kCACpB,KADSmH,UAEJhZ,EACHA,GAAQ,EAERvD,EAAIhM,KAAK,WACLwoB,aAAaxc,EAAKuc,kCAEF,GAAlBnH,EAAQhoB,QACX4S,EAAIhM,KAAK,KACVgM,EAAIhM,KAAK,UAGTohB,EAAQhR,KAAKpE,wBAGf,eAAMnB,WAIIgB,EAAOC,MAFAtQ,KAAK6lB,UAAUb,aAAa3V,MAG5C,KACKnL,EAAQmM,EAAK7B,UACbtK,EAAMuK,KACT,yCACcyB,WAAWlQ,KAAK4lB,QAAS1hB,EAAMA,wEACpCiM,OAAQjM,OACjBiM,EAAO8V,iBAAiB5W,EAASnL,4GAOrBmL,GAEb,MAAOnI,MAEFA,aAAeib,GAClB,MACI,KAAIjb,aAAekb,IAGvB,MAAMlb,wBAKV,cAAKsJ,GAEJA,EAAIhM,KAAK,aACJwoB,aAAaxc,EAAKxQ,KAAK4lB,SAC5BpV,EAAIhM,KAAK,aACJqhB,UAAUjR,KAAKpE,GACpBA,EAAIhM,KAAK,IAAK,GACdinB,GAAS/oB,UAAUkS,KAAKnU,KAAKT,KAAMwQ,GACnCA,EAAIhM,MAAM,sCAtFCqoB,cAEM,oCAwFnBA,GAAYnqB,UAAUshB,YAAcyH,GAAS/oB,UAAUshB,YAAYxkB,OAAO,CAAC,UAAW,kBAEzEytB,uCAAsBxB,6DAItB5I,EAAUxe,EAAKyhB,mEAEpBjD,EAAUxe,IACXyhB,UAAYA,0DAGlB,eAAMtV,GAELA,EAAIhM,KAAK,IAAKxE,KAAKwG,YAAYjE,KAAM,oBAChCujB,UAAUrgB,MAAM+K,GACrBA,EAAIhM,KAAK,yBAGV,cAAKgM,GAEJA,EAAIhM,KAAK,eACJshB,UAAUrgB,MAAM+K,GACrBA,EAAIhM,KAAK,IAAK,GACdinB,GAAS/oB,UAAUkS,KAAKnU,KAAKT,KAAMwQ,GACnCA,EAAIhM,MAAM,wBAGX,eAAM6K,UAGL,KAEMyF,MADM9U,KAAK8lB,UAAUd,aAAa3V,IAEtC,kFAOYA,GAEb,MAAOnI,MAEFA,aAAeib,GAClB,MACI,KAAIjb,aAAekb,IAGvB,MAAMlb,yCAhDE+lB,cAEM,sCAoDnBA,GAAcvqB,UAAUshB,YAAcyH,GAAS/oB,UAAUshB,YAAYxkB,OAAO,CAAC,kBAEhE0tB,kCAAiBzI,oKAI7B,eAAMpV,SAEC,IAAI8S,uBAGX,cAAK3R,GAEJA,EAAIhM,KAAK,QAAS,wBAGnB,eAAMgM,GAELA,EAAIhM,KAAK,IAAKxE,KAAKwG,YAAYjE,KAAM,qCAhB1B2qB,cAEM,mEAkBNC,qCAAoB1I,gLAIhC,eAAMpV,SAEC,IAAI+S,uBAGX,cAAK5R,GAEJA,EAAIhM,KAAK,WAAY,wBAGtB,eAAMgM,GAELA,EAAIhM,KAAK,IAAKxE,KAAKwG,YAAYjE,KAAM,wCAhB1B4qB,cAEM,uEAkBNC,8CAA6B3B,oNAIzC,eAAMpc,sCAEarP,KAAKsrB,wCACvB,KADS+B,aAEMA,EAAMC,SAASje,GAE7B,CACCge,EAAMrI,aAAa3V,sFAXV+d,cAEM,sEAgBNG,6CAA6B9B,yEAE7B5I,EAAUxe,EAAKyhB,yEAEpBjD,EAAUxe,IACXyhB,UAAYA,gEAGlB,eAAMtV,GAELA,EAAIhM,KAAK,IAAKxE,KAAKwG,YAAYjE,KAAM,oBAChCujB,UAAUrgB,MAAM+K,GACrBA,EAAIhM,KAAK,yBAGV,cAAKgM,GAEJA,EAAIhM,KAAKxE,KAAKwtB,SAAU,UACnB1H,UAAUlR,KAAKpE,GACpBA,EAAIhM,KAAK,IAAK,GACdinB,GAAS/oB,UAAUkS,KAAKnU,KAAKT,KAAMwQ,GACnCA,EAAIhM,MAAM,2BAGX,kBAAS6K,UAGKyF,MADF9U,KAAK8lB,UAAUd,aAAa3V,+BAMzCke,GAAoB7qB,UAAUshB,YAAcyH,GAAS/oB,UAAUshB,YAAYxkB,OAAO,CAAC,kBAEtEiuB,oCAAmBF,8JAAnBE,cAEM,8EAGnBA,GAAW/qB,UAAU8qB,SAAW,SAEnBE,sCAAqBH,sKAArBG,cAEM,uCAGnBA,GAAahrB,UAAU8qB,SAAW,cAErBG,sCAAqBlC,oLAIjC,eAAMjb,GAELA,EAAIhM,KAAK,IAAKxE,KAAKwG,YAAYjE,KAAM,yBAGtC,cAAKiO,GAEJA,EAAIhM,KAAK,QAAS,GAClBinB,GAAS/oB,UAAUkS,KAAKnU,KAAKT,KAAMwQ,GACnCA,EAAIhM,MAAM,2BAGX,kBAAS6K,UAED,sCAlBIse,cAEM,yCAsCjBvtB,EAAQ0B,UAiIR1B,EAAQM,SAyDRN,EAAQK,SA3MGoX,kCAAiB4T,mDAIjB5I,EAAUxe,EAAK0M,EAAQxO,EAAMqrB,EAAYvrB,8DAE9CwgB,EAAUxe,IACXyf,QAAU/S,IACVxO,KAAOA,IACPqrB,WAAaA,IACbC,OAAS,OACTxrB,UAAYA,IACZyrB,MAAQ,OACRjrB,eAAiBR,IACjBygB,eAAiB,kDAGvB,eAAkBrc,OAEb8H,EAAOvO,YACHyG,OAEF,iBACGzG,KAAKsrB,YACR,gBACGtrB,KAAK+Q,WACR,cACG/Q,KAAKuC,SACR,oBACGvC,KAAK4tB,eACR,aACG5tB,KAAKsG,UACR,mBACGtG,KAAKqC,cACR,wBACGrC,KAAK8iB,mBACR,aACApiB,EAAS,SAASA,OAAO2O,EAAS4R,GAAO1S,EAAKwf,aAAa1e,EAAS4R,WACxE9e,OAAOzB,EAAQV,KAAKqC,UAAW,CAACY,cAAc,EAAMF,aAAa,IAC1DrC,MACH,cACAstB,EAAU,SAASA,QAAQ3e,EAAS4R,UAAc1S,EAAK0f,cAAc5e,EAAS4R,WAClF9e,OAAO6rB,EAAShuB,KAAKqC,UAAW,CAACY,cAAc,EAAMF,aAAa,IAC3DirB,4DAEM5tB,EAAQ0B,wBAAS2E,6BAIjC,mBAAUiB,OAELrF,KACJqF,EAAQE,KAhqPiB,MAiqPzBF,EAAQE,KAAK5H,KAAKuC,MAClBmF,EAAQE,KAAK5H,KAAK8jB,SAClBpc,EAAQE,KAAK5H,KAAK4tB,YAClBlmB,EAAQE,KAAK5H,KAAK6tB,QAClBnmB,EAAQE,KAAK5H,KAAK8iB,gBACK,OAAnB9iB,KAAKqC,WAAsBrC,KAAKqC,qBAAqB6rB,GACxD7rB,EAAYrC,KAAKqC,cAElB,CACCA,EAAY,sCACMrC,KAAKqC,UAAU4B,uCACjC,KADSK,UAERjC,EAAUmC,KAAKF,EAAM/B,KAAM+B,EAAMpC,MAC7BoC,EAAMpC,KAAKiC,SAAS,MACvB9B,EAAUmC,KAAKF,EAAMF,8CAGxBsD,EAAQE,KAAKvF,0EACGqF,4BAGjB,mBAAUK,OAGL1F,EADA8rB,EAAqBpmB,EAAQsE,UAGN,OAAvB8hB,EACH,MAAM,IAAIrjB,GAAW,sFA5rPG,OA8rPrBqjB,EACH,MAAM,IAAIrjB,GAAW,qCAAwDqjB,QAEzE5rB,KAAOwF,EAAQsE,YACfyX,QAAU/b,EAAQsE,YAClBuhB,WAAa7lB,EAAQsE,YACrBwhB,OAAS9lB,EAAQsE,YACjByW,eAAiB/a,EAAQsE,OAE1B5B,QADJpI,EAAY0F,EAAQsE,UAEnBhK,aAAgBO,sBAAaP,UACzBA,UAAYA,OACZQ,eAAiBR,yEACN0F,wBAGjB,eAAMrI,UAEEmI,QAAMnI,wBAGd,eAAM2P,OAEDhN,EAAY,KACO,OAAnBrC,KAAKqC,YACRA,EAAYrC,KAAKqC,UAAU2iB,aAAa3V,QACrCkc,EAAU,IAAIzT,GAAgB9X,KAAMqC,EAAWgN,EAAQ4R,MAC3D5R,EAAQ1J,IAAI3F,KAAKuC,KAAMgpB,wBAGxB,eAAM/a,GAELA,EAAIhM,KAAK,IAAKxE,KAAKwG,YAAYjE,MACb,OAAdvC,KAAKuC,MACRiO,EAAIhM,KAAK,SAAUiB,OAAMzF,KAAKuC,OAC/BiO,EAAIhM,KAAK,eAAgBiB,OAAMzF,KAAK4tB,YAAa,yBAGlD,cAAKpd,GAEJA,EAAIhM,KACH,OACAxE,KAAKuC,KAAOvC,KAAKuC,KAAO,UACxB,IACA,GAEDkpB,GAAS/oB,UAAUkS,KAAKnU,KAAKT,KAAMwQ,GACnCA,EAAIhM,MAAM,+BAGX,sBAAa6K,EAAS4R,OAEjB8E,EAAe1W,EAAQ+e,YAAYnN,OAGtCwK,GAAS/oB,UAAUuhB,MAAMxjB,KAAKT,KAAM+lB,GAErC,MAAO7e,QAEAA,aAAegb,IACpB,MAAMhb,kBAIT,eAAiBmI,EAAS4R,QAEpB8M,aAAa1e,EAAS4R,yBAG5B,gBAAO5R,EAAS4R,QAEV8M,aAAa1e,EAAS4R,gCAG5B,uBAAc5R,EAAS4R,OAElB8E,EAAe1W,EAAQgf,4BACtBN,aAAahI,EAAc9E,GACzB8E,EAAauI,mCAGrB,uBAAQrN,yDAAK,KAAMC,yDAAQ,KAEtB7R,EAAU,IAAI2R,GAAQ,GAAIE,UAC9BD,EAAOA,GAAQ,GACQ,OAAnBjhB,KAAKqC,YACR4e,EAAOjhB,KAAKqC,UAAUmN,WAAWxP,KAAKuC,KAAM,GAAI0e,IAC1CjhB,KAAKiuB,cAAc5e,EAAS4R,sBAGpC,sBAEuB,MAAfjhB,KAAK6tB,OAAiB7tB,KAAK6tB,OAAO9J,GAAG/jB,KAAK8jB,SAAW,+BAG7D,oBAAWzU,EAAS4R,OAEf8E,EAAe1W,EAAQ+e,YAAYnN,OAGtCwK,GAAS/oB,UAAUuhB,MAAMxjB,KAAKT,KAAM+lB,GAErC,MAAO7e,MAEFA,aAAegb,GAClB,OAAOhb,EAAIuE,OAEX,MAAMvE,SAED,yBAGR,oBAAK+Z,yDAAK,KAAMC,yDAAQ,KAEnB7R,EAAU,IAAI2R,GAAQ,GAAIE,UAC9BD,EAAOA,GAAQ,GACQ,OAAnBjhB,KAAKqC,YACR4e,EAAOjhB,KAAKqC,UAAUmN,WAAWxP,KAAKuC,KAAM,GAAI0e,IAC1CjhB,KAAKuuB,WAAWlf,EAAS4R,kBAGjC,eAAe5R,EAAS4R,UAEhBjhB,KAAKuuB,WAAWlf,EAAS4R,0BAGjC,yBAEQ,2CAlNIpJ,cAEM,mBAoNnBA,GAASnV,UAAUI,kBAAmB,EACtC+U,GAASnV,UAAUM,mBAAoB,MAE1BkrB,sCAAqBzJ,2DAIrB5B,EAAUxe,kEAEfwe,EAAUxe,IACXJ,OAAS,8DAGf,mBAAUyD,8EAEOA,SAEZE,EAAO,gCAEO5H,KAAKiE,uCACvB,KADSK,UAERsD,EAAKpD,KAAKF,EAAM,GAAIA,EAAM,IACtBA,EAAM,GAAGH,SAAS,MACrByD,EAAKpD,KAAKF,EAAM,mCAElBoD,EAAQE,KAAKA,4BAGd,mBAAUG,8EAEOA,OAGZxF,EACAL,EAHA0F,EAAOG,EAAQsE,YACdpI,OAAS,SAGVD,EAAQ,+BACM4D,kCAClB,KADStD,UAEK,GAATN,GAEHzB,EAAO+B,EACPN,EAAQ,GAES,GAATA,GAER9B,EAAOoC,GACEH,SAAS,KACjBH,EAAQ,QAGHC,OAAOO,KAAK,CAACjC,KAAMA,EAAML,KAAMA,EAAMkC,aAAc,OACxDJ,EAAQ,SAKJC,OAAOO,KAAK,CAACjC,KAAMA,EAAML,KAAMA,EAAMkC,aAAcE,IACxDN,EAAQ,wDAKX,eAAMqL,SAED5K,EAAO,gCACOzE,KAAKiE,uCACvB,KADSK,UAERG,EAAKD,KAAKF,EAAM/B,KAAM+B,EAAMpC,MACxBoC,EAAMpC,KAAKiC,SAAS,MACvBM,EAAKD,KAAKF,EAAMF,aAAa4gB,aAAa3V,qDAEjCzM,GAAa6B,wBAGzB,eAAM+L,GAELA,EAAIhM,KAAK,IAAKxE,KAAKwG,YAAYjE,KAAM,iBAChC0B,OAAOwB,MAAM+K,GAClBA,EAAIhM,KAAK,yCA3EE0pB,cAEM,kEAkGjB9tB,EAAQM,SAURN,EAAQK,OAeRL,EAAQ0B,YA9CGgW,yCAAwB3U,iEAKxB0f,EAAUxgB,EAAW4e,uEAG3B4B,SAAWA,IACXxgB,UAAYA,IACZ4e,KAAOA,IACPpe,eAAiBR,IAEjBE,KAAOsgB,EAAStgB,OAChBisB,IAAM3L,EAAS2L,MACfC,OAAS5L,EAAS4L,SAClB3K,QAAUjB,EAASiB,UACnB+J,OAAShL,EAASgL,SAClBvC,QAAUzI,EAASyI,4DAGzB,eAAiBjc,EAAS4R,QAEpB4B,SAASkL,aAAa1e,EAAS8M,QAAQnc,KAAKihB,KAAMA,0BAGxD,gBAAO5R,EAAS4R,QAEV4B,SAASkL,aAAa1e,EAAS8M,QAAQnc,KAAKihB,KAAMA,mBAGxD,eAAe5R,EAAS4R,UAEhBjhB,KAAK6iB,SAAS0L,WAAWlf,EAAS8M,QAAQnc,KAAKihB,KAAMA,gCAG7D,sBAAa5R,EAAS4R,QAEhB4B,SAASkL,aAAa1e,EAAS8M,QAAQnc,KAAKihB,KAAMA,iCAGxD,uBAAc5R,EAAS4R,UAEfjhB,KAAK6iB,SAASoL,cAAc5e,EAAS8M,QAAQnc,KAAKihB,KAAMA,mBAGhE,eAAkBxa,OAEb8H,EAAOvO,YACHyG,OAEF,aACA/F,EAAS,SAASA,OAAO2O,EAAS4R,GAAO1S,EAAKwf,aAAa1e,EAAS4R,WACxE9e,OAAOzB,EAAQV,KAAKqC,UAAW,CAACY,cAAc,EAAMF,aAAa,IAC1DrC,MACH,cACAstB,EAAU,SAASA,QAAQ3e,EAAS4R,UAAc1S,EAAK0f,cAAc5e,EAAS4R,WAClF9e,OAAO6rB,EAAShuB,KAAKqC,UAAW,CAACY,cAAc,EAAMF,aAAa,IAC3DirB,MACH,mBACGhuB,KAAKqC,yBAELrC,KAAK6iB,SAASziB,EAAQ0B,SAAS2E,2BAIzC,yBAEQ,kCASF,SAASioB,KAAK1lB,EAAGC,EAAGxM,EAAGD,UAEtB,IAAIqQ,GAAM,IAAI7D,EAAG,IAAIC,EAAG,IAAIxM,EAAG,IAAID,GAKpC,SAAS+qB,WAAW1gB,UAO1BA,GADAA,GADAA,GADAA,GADAA,GADAA,EAAM+N,KAAK/N,IACDiC,QAAQ,KAAM,UACdA,QAAQ,KAAM,SACdA,QAAQ,KAAM,SACdA,QAAQ,KAAM,UACdA,QAAQ,KAAM,UAKlB,SAAS6lB,KAAK9nB,UAER,OAARA,EACI,IACiB,iBAATA,IACfA,EAAMpB,OAAMoB,KACa,IAAtBA,EAAI3B,QAAQ,OAAqC,IAAtB2B,EAAI3B,QAAQ,OAAsC,IAAvB2B,EAAI3B,QAAQ,QACrE2B,EAAM,IAAMA,EAAIiC,QAAQ,KAAM,MAAQ,KAChCjC,GAID,SAAS+nB,KAAKrxB,MAEF,iBAAPA,EACV,MAAM,IAAIyR,GAAU,gCACd/Q,OAAOC,aAAaX,GAIrB,SAASsxB,KAAK7xB,MAEF,iBAAPA,GAA+B,GAAZA,EAAEY,OAC/B,MAAM,IAAIoR,GAAU,8CACdhS,EAAEsB,WAAW,GAId,SAASwwB,KAAKC,MAEG,iBAAZA,EACV,MAAM,IAAI/f,GAAU,gCACjB+f,EAAS,EACL,MAAQA,EAAOpsB,SAAS,IAAIsa,OAAO,GAEnC,KAAO8R,EAAOpsB,SAAS,IAIzB,SAASqsB,KAAKD,MAEG,iBAAZA,EACV,MAAM,IAAI/f,GAAU,gCACjB+f,EAAS,EACL,MAAQA,EAAOpsB,SAAS,GAAGsa,OAAO,GAElC,KAAO8R,EAAOpsB,SAAS,GAIzB,SAASssB,KAAKF,MAEG,iBAAZA,EACV,MAAM,IAAI/f,GAAU,gCACjB+f,EAAS,EACL,MAAQA,EAAOpsB,SAAS,GAAGsa,OAAO,GAElC,KAAO8R,EAAOpsB,SAAS,GAIzB,SAASusB,KAAK7f,OAASjL,yDAAa3B,OAAQvD,yDAAI,KAAMuF,yDAAK,MAE9C,GAAfA,EAAK7G,OACR,MAAM,IAAIyH,GAAc,+CACD,GAAfZ,EAAK7G,SACb6G,EAAOA,EAAK,YAETgH,EACA0jB,EAFA9e,EAAOC,MAAM7L,GAGbsP,GAAQ,IAEZ,KACKrJ,EAAO2F,EAAK7B,UACZ9D,EAAK+D,KACT,IACKsF,EACJ,IACK3P,IAAiB3B,OACpB,MAAM,IAAIqI,GAAW,+CACf1G,SAEDqH,MAEJ2jB,EAAY1kB,EAAKxG,MACT,OAARhF,IACHkwB,EAAYpf,MAAMX,EAASnQ,EAAK,CAACkwB,GAAY,MAC1Crb,GAAUqb,EAAYD,KAEzB1jB,EAASf,EAAKxG,MACdirB,EAAWC,GAEZrb,GAAQ,GAKH,SAASsb,KAAKhgB,OAASjL,yDAAa3B,OAAQvD,yDAAI,KAAMuF,yDAAK,MAE9C,GAAfA,EAAK7G,OACR,MAAM,IAAIyH,GAAc,+CACD,GAAfZ,EAAK7G,SACb6G,EAAOA,EAAK,YAETgH,EACA0jB,EAFA9e,EAAOC,MAAM7L,GAGbsP,GAAQ,IAEZ,KACKrJ,EAAO2F,EAAK7B,UACZ9D,EAAK+D,KACT,IACKsF,EACJ,IACK3P,IAAiB3B,OACpB,MAAM,IAAIqI,GAAW,+CACf1G,SAEDqH,MAEJ2jB,EAAY1kB,EAAKxG,MACT,OAARhF,IACHkwB,EAAYpf,MAAMX,EAASnQ,EAAK,CAACkwB,GAAY,MAC1Crb,GAAUqb,EAAYD,KAEzB1jB,EAASf,EAAKxG,MACdirB,EAAWC,GAEZrb,GAAQ,GAKH,SAASub,KAAKpY,WAAU7M,yDAAM,EAE3BgG,EAAOC,MAAM4G,KACtB,KACKxM,EAAO2F,EAAK7B,UACZ9D,EAAK+D,KACR,MACDpE,GAASK,EAAKxG,aAERmG,EAKD,SAASklB,OAAOrY,OAAU9S,yDAAa,KAEzCsG,EAAO4F,MAAM4G,GAAU1I,cACpB9D,EAAK+D,KAAOrK,EAAesG,EAAKxG,MAKjC,SAASsrB,MAAMtY,WAAU9S,yDAAa,KAExCF,EAAQE,EAEHiM,EAAOC,MAAM4G,KACtB,KACKxM,EAAO2F,EAAK7B,UACZ9D,EAAK+D,KACR,MACDvK,EAAQwG,EAAKxG,aAEPA,EAID,SAASurB,QAAQpgB,EAAS6H,OAAUhY,yDAAI,KAAMwwB,6DAExC,OAARxwB,EACJ,KAEKywB,EAAMD,EAAU,SAASC,IAAInzB,EAAGC,UAE3B6V,KAAK,MAAO9V,EAAGC,IACpB,SAASkzB,IAAInzB,EAAGC,UAEZ6V,KAAK,MAAO9V,EAAGC,IAEnBgP,EAAS4J,MAAM6B,UACnBzL,EAAOmkB,KAAKD,GACLlkB,UAgBEkkB,EAAT,SAASA,MAAIE,EAAIC,OAEZrd,EAAMH,KAAK,MAAOud,EAAG,GAAIC,EAAG,WAC5Brd,IAEJA,EAAMH,KAAK,MAAOud,EAAG,GAAIC,EAAG,KADpBJ,GAAWjd,EAAMA,GAhBtBmd,EAAO,GAEFryB,EAAI,EAAG8S,EAAOC,MAAM4G,MAAa3Z,EAC1C,KACKmN,EAAO2F,EAAK7B,UACZ9D,EAAK+D,KACR,UACGshB,EAAW/f,MAAMX,EAASnQ,EAAK,CAACwL,EAAKxG,OAAQ,IAGjD0rB,EAAKprB,KAAK,CAACurB,EAAUL,GAAWnyB,EAAIA,EAAGmN,EAAKxG,QAW7C0rB,EAAKA,KAAKD,WAENlkB,EAAS,SACImkB,sBAARllB,OACRe,EAAOjH,KAAKkG,EAAK,WACXe,EAMF,SAASukB,OAAO3lB,OASlBgU,EAAO4R,EATkB3lB,yDAAK7H,OAAQytB,yDAAKztB,UAE3CytB,IAASztB,SACZytB,EAAO,GACJ5lB,IAAS7H,SAEZ6H,EAAOD,EACPA,EAAQ,GAGI,IAAT6lB,EACH,MAAM,IAAIplB,GAAW,yCACbolB,EAAO,GAEf7R,EAAQhU,EACR4lB,EAAS3lB,IAIT+T,EAAQ/T,EACR2lB,EAAS5lB,OAENzM,EAAUygB,EAAQ4R,EAAUvnB,KAAK+N,OAAOwZ,EAAS5R,EAAQ,GAAG3V,KAAKvH,IAAI+uB,IAAS,EAAI,QAE/E,CACNtnB,MAAO,EACP4F,KAAM,uBAEDxO,KAAK4I,OAAShL,EACV,CAAC6Q,MAAM,GACR,CAACvK,MAAOmG,EAASrK,KAAK4I,QAAWsnB,EAAMzhB,MAAM,KAMhD,SAAS0hB,OAAOjZ,EAAU7M,OAAOC,yDAAK7H,OAAQytB,yDAAKztB,UAErDytB,IAASztB,SACZytB,EAAO,GACJ5lB,IAAS7H,SAEZ6H,EAAOD,EACPA,EAAQ,GAELA,EAAQ,EACX,MAAM,IAAIS,GAAW,6CAClBR,EAAO,EACV,MAAM,IAAIQ,GAAW,4CAClBolB,GAAQ,EACX,MAAM,IAAIplB,GAAW,4CAElB0D,EAAOnE,EAAOzF,EAAQ,EACtByL,EAAOC,MAAM4G,SACV,CACN1I,KAAM,wBACD/C,EACG7G,EAAQ4J,GACf,KACC/C,EAAS4E,EAAK7B,QACHC,KACV,OAAOhD,IACN7G,SAEU,OAAT0F,GAAiB1F,GAAS0F,EACtB,CAACmE,MAAM,KACfhD,EAAS4E,EAAK7B,QACHC,SAET7J,EACF4J,GAAQ0hB,EACK,OAAT5lB,GAAiBkE,EAAOlE,IAC3BkE,EAAOlE,IAJAmB,KAWJ,SAAS2kB,UAAU1wB,UAElBd,mBAAmBc,GAIpB,SAAS2wB,YAAY3wB,UAEpB4wB,mBAAmB5wB,GAIpB,SAAS6wB,UAAU7a,SAEA,iBAAdA,GAA2BjL,QAAQiL,KAC7CA,EAAWL,MAAMK,IACX,CACN9M,MAAO8M,EAAS9X,OAAO,EACvB4Q,KAAM,uBACExO,KAAK4I,OAAS,EAAI,CAAC1E,MAAOwR,EAAS1V,KAAK4I,SAAU6F,MAAM,GAAS,CAACA,MAAM,KAM3E,SAAS+hB,iBAER9nB,KAAK+nB,SAIN,SAASC,WAAWrmB,OAAOC,yDAAK7H,OAAQytB,yDAAKztB,OAE/CytB,IAASztB,SACZytB,EAAO,GACJ5lB,IAAS7H,SAEZ6H,EAAOD,EACPA,EAAQ,OAMLsmB,EAJAC,EAAQtmB,EAAKD,EAEbnG,EAAQwE,KAAK+nB,YAGbP,EAAO,EACVS,EAAIjoB,KAAK+N,OAAOma,EAAQV,EAAO,GAAKA,OAChC,CAAA,KAAIA,EAAO,GAGf,MAAM,IAAIplB,GAAW,6CAFrB6lB,EAAIjoB,KAAK+N,OAAOma,EAAQV,EAAO,GAAKA,UAG9B7lB,EAAQ6lB,EAAKxnB,KAAK+N,MAAMvS,EAAQysB,GAIjC,SAASE,YAAYnb,OAEvBob,EAAU/nB,SAAS2M,MACE,iBAAdA,IAA2BjL,QAAQiL,KAAcob,EAC3D,MAAM,IAAI9hB,GAAU,iDACjB8hB,IACHpb,EAAWL,MAAMK,IACXA,EAAShN,KAAK+N,MAAM/N,KAAK+nB,SAAW/a,EAAS9X,SAI9C,SAASmzB,OAAO50B,OAAG60B,yDAAO,KAE5BA,EACJ,KACKC,EAAYvoB,KAAKwoB,IAAI,GAAIF,UACtBtoB,KAAKC,MAAMxM,EAAE80B,GAAWA,EAG/B,OAAOvoB,KAAKC,MAAMxM,GAIb,SAASg1B,OAAOh1B,OAAG60B,yDAAO,KAE5BA,EACJ,KACKC,EAAYvoB,KAAKwoB,IAAI,GAAIF,UACtBtoB,KAAK+N,MAAMta,EAAE80B,GAAWA,EAG/B,OAAOvoB,KAAK+N,MAAMta,GAIb,SAASi1B,MAAMj1B,OAAG60B,yDAAO,KAE3BA,EACJ,KACKC,EAAYvoB,KAAKwoB,IAAI,GAAIF,UACtBtoB,KAAK2oB,KAAKl1B,EAAE80B,GAAWA,EAG9B,OAAOvoB,KAAK2oB,KAAKl1B,GAOZ,SAASm1B,KAAK5xB,UAEbD,EAAIC,GAGL,SAAS6xB,QAAQ7xB,EAAQ8xB,SAEzB,IAAI9O,GAAoB,+BAGxB,SAAS+O,KAAKvtB,EAAOE,MAEvBF,EAAMwtB,WAAW,KACrB,IACqB,GAAhBxtB,EAAMtG,cAEF,IAAIiP,GACV,GAAKT,SAASlI,EAAM,GAAI,IACxB,GAAKkI,SAASlI,EAAM,GAAI,IACxB,GAAKkI,SAASlI,EAAM,GAAI,KAGrB,GAAoB,GAAhBA,EAAMtG,cAEP,IAAIiP,GACV,GAAKT,SAASlI,EAAM,GAAI,IACxB,GAAKkI,SAASlI,EAAM,GAAI,IACxB,GAAKkI,SAASlI,EAAM,GAAI,IACxB,GAAKkI,SAASlI,EAAM,GAAI,KAGrB,GAAoB,GAAhBA,EAAMtG,cAEP,IAAIiP,GACVT,SAASlI,EAAMwH,UAAU,EAAG,GAAI,IAChCU,SAASlI,EAAMwH,UAAU,EAAG,GAAI,IAChCU,SAASlI,EAAMwH,UAAU,EAAG,GAAI,KAG7B,GAAoB,GAAhBxH,EAAMtG,cAEP,IAAIiP,GACVT,SAASlI,EAAMwH,UAAU,EAAG,GAAI,IAChCU,SAASlI,EAAMwH,UAAU,EAAG,GAAI,IAChCU,SAASlI,EAAMwH,UAAU,EAAG,GAAI,IAChCU,SAASlI,EAAMwH,UAAU,EAAG,GAAI,UAI9B,GAAIxH,EAAMwtB,WAAW,SAAWxtB,EAAMC,SAAS,KACpD,KACKwtB,EAAQztB,EAAMkG,MAAM,GAAI,GAAG6R,MAAM,QACjB,GAAhB0V,EAAM/zB,OACV,KACM,IAAIL,EAAI,EAAGA,EAAI,IAAKA,EACzB,KACKqT,EAAO+gB,EAAMp0B,GACbqT,EAAKzM,SAAS,KACjBwtB,EAAMp0B,GAAuC,IAAlC6O,SAASwE,EAAKxG,MAAM,GAAI,GAAI,MAAU,IAEjDunB,EAAMp0B,GAAK6O,SAASwE,EAAM,wBAEjB/D,sBAAS8kB,UAGjB,GAAIztB,EAAMwtB,WAAW,UAAYxtB,EAAMC,SAAS,KACrD,KACKwtB,EAAQztB,EAAMkG,MAAM,GAAI,GAAG6R,MAAM,QACjB,GAAhB0V,EAAM/zB,OACV,KACM,IAAIL,EAAI,EAAGA,EAAI,IAAKA,EACzB,KACKqT,EAAO+gB,EAAMp0B,GACbqT,EAAKzM,SAAS,KACjBwtB,EAAMp0B,GAAuC,IAAlC6O,SAASwE,EAAKxG,MAAM,GAAI,GAAI,MAAU,IAEjDunB,EAAMp0B,GADO,GAALA,EACoB,IAAjBsO,WAAW+E,GAEXxE,SAASwE,EAAM,wBAEjB/D,sBAAS8kB,SAItB,KACKC,EAAQ/kB,GAAMglB,UAAU3tB,WACd9F,IAAVwzB,EACH,OAAOA,UAEYxzB,IAAjBgG,EACH,MAAM,IAAI0G,GAAW,yBAA2BrF,OAAMvB,GAAS,yBAE/D,OAAOE,EAGF,SAAS0tB,KAAK5e,SAEhBlK,EAAI,EACJC,EAAI,EACJxM,EAAI,EACJD,EAAI,EACJu1B,EAAS,EACTC,EAAa,+BAEC9e,kCAClB,KADShP,aAEJA,aAAiB2I,GAEpBmlB,GAAcD,EACd/oB,GAAK+oB,EAAS7tB,EAAM4I,GACpB7D,GAAK8oB,EAAS7tB,EAAM6I,GACpBtQ,GAAKs1B,EAAS7tB,EAAM8I,GACpBxQ,GAAKu1B,GAAU,IAAI7tB,EAAM+I,QAErB,CAAA,GAAsB,iBAAX/I,EAKf,MAAM,IAAImB,GAAc,wDAA0D4K,MAAM/L,GAAOyC,YAH/ForB,EAAS7tB,qCAKO,GAAd8tB,EACH,MAAM,IAAIlnB,GAAW,mGAEf,IAAI+B,GAAM7D,EAAEgpB,EAAY/oB,EAAE+oB,EAAYv1B,EAAEu1B,EAAY,IAAIx1B,EAAEw1B,GAK3D,SAASC,WAAW/a,OAAU7M,yDAAM,QAEnC,CACNgG,KAAMC,MAAM4G,GACZtO,MAAOyB,EACPmE,KAAM,oBACD9D,EAAO1K,KAAKqQ,KAAK7B,cACd9D,EAAK+D,KAAO/D,EAAO,CAACxG,MAAO,CAAClE,KAAK4I,QAAS8B,EAAKxG,OAAQuK,MAAM,KAOhE,SAASyjB,SAAShb,OAEpB7G,EAAOC,MAAM4G,GACbib,GAAU,QACP,CACN3jB,KAAM,oBACD9D,EAAO2F,EAAK7B,OACZ/C,EAASf,EAAK+D,KAAO/D,EAAO,CAACxG,MAAO,CAACiuB,EAASznB,EAAKxG,OAAQuK,MAAM,UACrE0jB,GAAU,EACH1mB,IAOH,SAAS2mB,QAAQlb,OAEnB7G,EAAOC,MAAM4G,GACbmb,EAAWhiB,EAAK7B,aACb,CACNA,KAAM,mBACD6jB,EAAS5jB,KACZ,OAAO4jB,MACJ3nB,EAAO2F,EAAK7B,OACZ/C,EAAS,CAACvH,MAAO,CAACwG,EAAK+D,KAAM4jB,EAASnuB,OAAQuK,MAAM,UACxD4jB,EAAW3nB,EACJe,IAQH,SAAS6mB,aAAapb,OAExB7G,EAAOC,MAAM4G,GACbib,GAAU,EACVE,EAAWhiB,EAAK7B,aACb,CACNA,KAAM,mBACD6jB,EAAS5jB,KACZ,OAAO4jB,MACJ3nB,EAAO2F,EAAK7B,OACZ/C,EAAS,CAACvH,MAAO,CAACiuB,EAASznB,EAAK+D,KAAM4jB,EAASnuB,OAAQuK,MAAM,UACjE4jB,EAAW3nB,EACXynB,GAAU,EACH1mB,IAQH,SAAS8mB,QAAQrb,OAAU7M,yDAAM,EAEnCgG,EAAOC,MAAM4G,GACb3Z,EAAI8M,EACJ8nB,GAAU,EACVE,EAAWhiB,EAAK7B,aACb,CACNA,KAAM,mBACD6jB,EAAS5jB,KACZ,OAAO4jB,MACJ3nB,EAAO2F,EAAK7B,OACZ/C,EAAS,CAACvH,MAAO,CAAC3G,IAAK40B,EAASznB,EAAK+D,KAAM4jB,EAASnuB,OAAQuK,MAAM,UACtE4jB,EAAW3nB,EACXynB,GAAU,EACH1mB,IAOH,SAAS+mB,KAAKC,MAGhBA,EAAU70B,OACd,OACK80B,EAAQ,gCACSD,uCAAZvb,UACRwb,EAAMluB,KAAK8L,MAAM4G,yCAEX,CACN1I,KAAM,sBACDkQ,EAAQ,gCACKgU,kCACjB,KACKhoB,UAAY8D,UACZ9D,EAAK+D,KACR,OAAO/D,EACRgU,EAAMla,KAAKkG,EAAKxG,4CAEV,CAACA,MAAOwa,EAAOjQ,MAAM,WAMvB,CACND,KAAM,sBACE,CAACC,MAAM,KAOX,SAASkkB,KAAK5D,UAEL,OAAXA,GAAmD,mBAAzBA,EAAO3uB,EAAQe,KACrC4tB,EAAO3uB,EAAQe,OAChBuH,KAAKvH,IAAI4tB,GAIV,SAAS5a,MAAMhL,EAAMC,EAAOC,UAE3BmO,GAASpX,EAAQK,MAAM0I,EAAMC,EAAOC,GAGrC,SAASupB,UAAUzpB,EAAMC,EAAOC,OAAKgL,yDAAK,EAAGC,yDAAO,EAAGC,yDAAO,EAAGwL,yDAAY,SAE5E1J,GAAajW,EAAQK,MAAM0I,EAAMC,EAAOC,EAAKgL,EAAMC,EAAQC,EAAQwL,GAIpE,SAAS8S,iBAAW9oB,yDAAK,EAAGC,yDAAQ,EAAGC,yDAAa,SAEnD0D,GAAUzL,KAAK9B,EAAQK,MAAMsJ,EAAMC,EAASC,GAI7C,SAAS6oB,kBAAY3oB,yDAAO,SAE3B4D,GAAW7L,KAAK9B,EAAQK,MAAM0J,GAK/B,SAAS4oB,KAAKC,EAAGC,EAAGv2B,EAAGF,OAczB02B,EAAIC,EAZJC,EAAK,SAASA,GAAGF,EAAIC,EAAIE,UAE5BA,GAAY,GACF,EAAE,EACJH,GAAMC,EAAGD,GAAIG,EAAI,EAChBA,EAAM,GACPF,EACCE,EAAM,EAAE,EACTH,GAAMC,EAAGD,IAAK,EAAE,EAAEG,GAAK,EACxBH,eAIE90B,IAAN5B,IACHA,EAAI,GACK,IAANE,EACIgyB,KAAKuE,EAAGA,EAAGA,EAAGz2B,GAMfkyB,KAAK0E,EADZF,EAAK,EAAID,GAHRE,EADGF,GAAK,GACHA,GAAK,EAAIv2B,GAETu2B,EAAEv2B,EAAGu2B,EAAEv2B,GAEMy2B,EAAIH,EAAE,EAAE,GAAII,EAAGF,EAAIC,EAAIH,GAAII,EAAGF,EAAIC,EAAIH,EAAE,EAAE,GAAIx2B,GAK3D,SAAS82B,KAAKN,EAAGt2B,EAAGwJ,EAAG1J,MAEnB,IAANE,EACH,OAAOgyB,KAAKxoB,EAAGA,EAAGA,EAAG1J,OAClBe,EAAImL,KAAK+N,MAAQ,EAAFuc,GACf5wB,EAAO,EAAF4wB,EAASz1B,EACdg2B,EAAIrtB,GAAG,EAAMxJ,GACbH,EAAI2J,GAAG,EAAMxJ,EAAE0F,GACfzF,EAAIuJ,GAAG,EAAMxJ,GAAG,EAAI0F,WAChB7E,EAAE,QAEJ,SACGmxB,KAAKxoB,EAAGvJ,EAAG42B,EAAG/2B,QACjB,SACGkyB,KAAKnyB,EAAG2J,EAAGqtB,EAAG/2B,QACjB,SACGkyB,KAAK6E,EAAGrtB,EAAGvJ,EAAGH,QACjB,SACGkyB,KAAK6E,EAAGh3B,EAAG2J,EAAG1J,QACjB,SACGkyB,KAAK/xB,EAAG42B,EAAGrtB,EAAG1J,QACjB,SACGkyB,KAAKxoB,EAAGqtB,EAAGh3B,EAAGC,IAMjB,SAASiqB,KAAKZ,EAAW3mB,EAAKs0B,MAEhC7oB,OAAOkb,UAENA,EAAUngB,IAAIxG,GACV2mB,EAAU3T,IAAIhT,GACfs0B,EAEH,GAAIxhB,UAAU6T,GACnB,KACKpa,EAASoa,EAAU3mB,eACRd,IAAXqN,EACI+nB,EACD/nB,QAEF,IAAIuD,GAAU,yBAId,SAASykB,aAER,IAAItmB,KAIL,SAASumB,aAEXD,EAAM,IAAItmB,YAEP,IAAIA,KAAKsmB,EAAIE,iBAAkBF,EAAIG,cAAeH,EAAII,aAAcJ,EAAIK,cAAeL,EAAIM,gBAAiBN,EAAIO,gBAAiBP,EAAIQ,sBAItI,SAASC,YAEXT,EAAM,IAAItmB,YACP,IAAID,GAAMumB,EAAIlqB,cAAekqB,EAAIjqB,WAAW,EAAGiqB,EAAIhqB,2BA/2B9CqO,iBAES,uBAFTA,cAGM,kCAqEnBA,GAAgBpV,UAAUI,kBAAmB,EAC7CgV,GAAgBpV,UAAUM,mBAAoB,MAyyBjCmxB,8BAEA5xB,EAAM+D,OAAKglB,yDAAQ,qCAEzB8I,SAAW7xB,OACX8xB,QAAU/tB,gBACU7D,OAAO6C,QAAQgmB,gDAA9BpsB,OAAKgF,YACThF,GAAOgF,oCAGb9D,EAAQ0B,cAAT,eAAkB2E,MAEbzG,KAAKiS,eAAexL,GACvB,OAAOzG,KAAKyG,SACP,IAAIuE,IAAItE,eAAe1G,KAAMyG,iBAIrC,SAAS6tB,aAAa1sB,UAEdC,QAAMD,GAKd,SAAS2sB,aAAa1tB,OAAKY,yDAAO,YAE1BD,MAAMX,EAAKY,GAKnB,SAAS+sB,QAAQh4B,EAAGC,OAAGg4B,yDAAQ,KAAMC,yDAAQ,KAExCl4B,IAAMC,EACT,OAAO,KAEJD,IAAMm4B,EAAAA,GAAYn4B,KAAOm4B,EAAAA,GAAYl4B,IAAMk4B,EAAAA,GAAYl4B,KAAOk4B,EAAAA,EACjE,OAAO,MAEJpU,EAAO7X,KAAKvH,IAAI1E,EAAID,UAEpB+jB,GAAQ7X,KAAKvH,IAAIszB,EAAUj4B,KAE3B+jB,GAAQ7X,KAAKvH,IAAIszB,EAAUh4B,IAE3B8jB,GAAQmU,GAvBbvyB,OAAOmyB,aAAc,CAAC,OAAQ,KAAM,CAAC/xB,KAAM,UAO3CJ,OAAOoyB,aAAc,CAAC,MAAO,IAAK,SAAU,MAAO,MAAO,CAAChyB,KAAM,UAqBjEJ,OAAOuG,KAAKksB,IAAK,CAAC,IAAK,MACvBzyB,OAAOuG,KAAKmsB,IAAK,CAAC,IAAK,MACvB1yB,OAAOuG,KAAKosB,IAAK,CAAC,IAAK,MACvB3yB,OAAOuG,KAAKqsB,KAAM,CAAC,IAAK,MACxB5yB,OAAOqyB,QAAS,CAAC,IAAK,KAAM,IAAK,KAAM,UAAW,KAAM,KAAM,UAAW,KAAM,QAGlEQ,wCAAuB3uB,8KAElCjG,EAAQK,WAAT,eAAemG,UAEP,IAAIquB,GAAWruB,gCAGvB,uBAAcC,UAENA,aAAeouB,yBAIxB9yB,OAAO6yB,GAAetyB,UAAW,CAAC,QAAS,KAAM,CAACH,KAAM,eAExD,IAAI2yB,GAAiB,IAAIF,GAAe,WAAY,aAAc,2EAErDC,kCAGAruB,yCAENA,MAAQA,uCAGbxG,EAAQ8B,WAAT,wBAEQgzB,0BAGR,iBAAQruB,EAAKsuB,sCAESA,EAAUlZ,MAAM,qCACrC,KADSxV,UAGRI,EADWoJ,MAAMpJ,GACN/E,QAAQ+E,EAAKJ,yCAElBI,SAGPzG,EAAQK,WAAT,eAAeoG,MAEY,IAAtB7G,KAAK4G,MAAMhJ,OACd,OAAOoC,KAAKo1B,QAAQvuB,EAAK7G,KAAK4G,MAAM,UAGhC6E,EAAS,gCACSzL,KAAK4G,2CAAlBuuB,UACR1pB,EAAOjH,KAAKxE,KAAKo1B,QAAQvuB,EAAKsuB,0CACxB1pB,oBAQH,SAAS4pB,YAAYF,YAElBG,OAAOzuB,EAAK0uB,SAEhB9pB,EAAS5E,+BACI0uB,EAAWtZ,MAAM,0CAAzB1Z,UACRkJ,EAASwe,GAAQvnB,UAAU+jB,KAAKhb,EAAQlJ,yCAClCkJ,WAGCyG,IAAIrL,MAEa,IAArBsuB,EAAUv3B,OACb,OAAO03B,OAAOzuB,EAAKsuB,EAAU,UAGzB1pB,EAAS,gCACc0pB,uCAAlBK,UACR/pB,EAAOjH,KAAK8wB,OAAOzuB,EAAK2uB,0CAClB/pB,SAGTtJ,OAAO+P,IAAK,CAAC,MAAO,MACbA,IAiFD,SAAS0K,OAAO/V,EAAKvF,OAAK+I,yDAAM,KAAMsS,yDAAI,KAE5CtS,EAAQ,IACXA,GAASxD,EAAIjJ,QACA,OAAVyM,IACHA,EAAQ,GAELsS,EAAM,IACTA,GAAO9V,EAAIjJ,QACA,OAAR+e,IACHA,EAAM9V,EAAIjJ,YAEP63B,EAAQtf,OAAOtP,MAEf4uB,IAAUn0B,EAAI1D,OAClB,IACK+e,EAAM,GAAKtS,EAAQxD,EAAIjJ,QAAUyM,EAAQsS,EAC5C,OAAO,MACJlR,EAASkR,EAAMtS,EAAQ,SACvBoB,EAAS5E,EAAIjJ,OAAS,IACzB6N,EAAS5E,EAAIjJ,OAAS,GAChB6N,EAGRpB,EAAQ4E,OAAO5E,EAAOxD,EAAIjJ,QAC1B+e,EAAM1N,OAAO0N,EAAK9V,EAAIjJ,YAElBgH,EAAQ,KACR6F,QAAQ5D,GACZ,KACM,IAAItJ,EAAI8M,EAAO9M,EAAIof,IAAOpf,EAE1BoU,IAAI9K,EAAItJ,GAAI+D,MACbsD,SAEGA,UAIH8wB,EAAYrrB,GAKG,IADlBqrB,EAAY7uB,EAAI3B,QAAQ5D,EAAKo0B,OAGzBA,EAAYp0B,EAAI1D,OAAS+e,MAE3B/X,EACF8wB,GAAap0B,EAAI1D,cAEXgH,EAIF,SAASiY,MAAMhW,EAAKvF,OAAK+I,yDAAM,KAAMsS,yDAAI,KAE3CtS,EAAQ,IACXA,GAASxD,EAAIjJ,QACA,OAAVyM,IACHA,EAAQ,GACLsS,EAAM,IACTA,GAAO9V,EAAIjJ,QACA,OAAR+e,IACHA,EAAM9V,EAAIjJ,QACXyM,EAAQ4E,OAAO5E,EAAOxD,EAAIjJ,QAC1B+e,EAAM1N,OAAO0N,EAAK9V,EAAIjJ,QAER,IAAVyM,GAAesS,IAAQ9V,EAAIjJ,SAG7BiJ,EADmB,iBAATA,EACJA,EAAI6E,UAAUrB,EAAOsS,GAErB9V,EAAIuD,MAAMC,EAAOsS,QAErBlR,EAAS5E,EAAI3B,QAAQ5D,UACT,IAAZmK,IACHA,GAAUpB,GACJoB,EAGD,SAASqR,OAAOjW,EAAKvF,OAAK+I,yDAAM,KAAMsS,yDAAI,KAE5CtS,EAAQ,IACXA,GAASxD,EAAIjJ,QACA,OAAVyM,IACHA,EAAQ,GACLsS,EAAM,IACTA,GAAO9V,EAAIjJ,QACA,OAAR+e,IACHA,EAAM9V,EAAIjJ,QACXyM,EAAQ4E,OAAO5E,EAAOxD,EAAIjJ,QAC1B+e,EAAM1N,OAAO0N,EAAK9V,EAAIjJ,QAER,IAAVyM,GAAesS,IAAQ9V,EAAIjJ,SAG7BiJ,EADmB,iBAATA,EACJA,EAAI6E,UAAUrB,EAAOsS,GAErB9V,EAAIuD,MAAMC,EAAOsS,QAErBlR,EAAS5E,EAAIwW,YAAY/b,UACb,IAAZmK,IACHA,GAAUpB,GACJoB,EAGD,SAASyP,aAAarU,OAAK0Y,yDAAa,KAEzB,OAAjBA,EACHA,EAAe,EAEfA,GAAgB,MAEbtE,EAAU5E,GAAa4E,QAAQpU,GAAK,EACpC8uB,EAAO,IAAIxoB,KAAKtG,EAAI0C,cAAe,EAAG,GACtCqsB,EAAcD,EAAK5a,eACjB6a,EAAc,IACnBA,EAAc,GAERA,GAAerW,KAEnBtE,EACmB,KAAf2a,IACLA,EAAc,UAETltB,KAAK+N,MAAMwE,EAAQ,GAGpB,SAAS0F,QAAQ9Z,UAEkC,IAAlD,IAAIsG,KAAKtG,EAAI0C,cAAe,EAAG,IAAIC,WA9O3CrH,OAAO8yB,GAAWvyB,UAAW,CAAC,MAAO,KAAM,CAACH,KAAM,eA6BlDJ,OAAOkzB,YAAa,CAAC,QAAS,MAE9BlzB,OAAOsD,OAAO,CAAC,MAAO,KAAM,CAAClD,KAAM,SACnCJ,OAAOsS,OAAQ,CAAC,MAAO,KAAM,CAAClS,KAAM,UACpCJ,OAAOsT,KAAM,CAAC,WAAY,KAAM,CAAClT,KAAM,QACvCJ,OAAO8N,MAAO,CAAC,MAAO,KAAM,CAAC1N,KAAM,SACnCJ,OAAO6Y,QAAS,CAAC,MAAO,KAAM,MAAO,KAAM,OAAQ,MAAO,MAAO,CAACzY,KAAM,WACxEJ,OAAO8U,KAAM,CAAC,WAAY,KAAM,CAAC1U,KAAM,QACvCJ,OAAOgV,KAAM,CAAC,WAAY,KAAM,CAAC5U,KAAM,QACvCJ,OAAOqwB,KAAM,CAAC,YAAa,KAAM,CAACjwB,KAAM,QACxCJ,OAAOwU,SAAU,CAAC,MAAO,IAAK,WAAY,IAAK,UAAW,KAAM,MAAO,CAACpU,KAAM,YAC9EJ,OAAO0U,SAAU,CAAC,MAAO,IAAK,WAAY,KAAM,CAACtU,KAAM,YACvDJ,OAAO4U,KAAM,CAAC,MAAO,KAAM,CAACxU,KAAM,QAClCJ,OAAOiV,aAAc,CAAC,MAAO,KAAM,CAAC7U,KAAM,gBAC1CJ,OAAOkV,WAAY,CAAC,MAAO,KAAM,CAAC9U,KAAM,cACxCJ,OAAOmV,QAAS,CAAC,MAAO,KAAM,CAAC/U,KAAM,WACrCJ,OAAO6T,QAAS,CAAC,MAAO,KAAM,CAACzT,KAAM,WACrCJ,OAAO8T,OAAQ,CAAC,MAAO,KAAM,CAAC1T,KAAM,UACpCJ,OAAO+T,SAAU,CAAC,MAAO,KAAM,CAAC3T,KAAM,YACtCJ,OAAOgU,OAAQ,CAAC,MAAO,KAAM,CAAC5T,KAAM,UACpCJ,OAAO+G,QAAS,CAAC,MAAO,KAAM,CAAC3G,KAAM,WACrCJ,OAAOmH,YAAa,CAAC,MAAO,KAAM,CAAC/G,KAAM,eACzCJ,OAAO4G,SAAU,CAAC,MAAO,KAAM,CAACxG,KAAM,YACtCJ,OAAO2H,aAAc,CAAC,MAAO,KAAM,CAACvH,KAAM,gBAC1CJ,OAAO+H,cAAe,CAAC,MAAO,KAAM,CAAC3H,KAAM,iBAC3CJ,OAAOyV,YAAa,CAAC,MAAO,KAAM,CAACrV,KAAM,eACzCJ,OAAO4V,YAAa,CAAC,MAAO,KAAM,CAACxV,KAAM,eACzCJ,OAAOsI,QAAS,CAAC,MAAO,KAAM,CAAClI,KAAM,WACrCJ,OAAO0I,OAAQ,CAAC,MAAO,KAAM,CAACtI,KAAM,UACpCJ,OAAOyI,QAAS,CAAC,MAAO,KAAM,CAACrI,KAAM,WACrCJ,OAAO6V,aAAc,CAAC,MAAO,KAAM,CAACzV,KAAM,gBAC1CJ,OAAO8V,YAAa,CAAC,MAAO,IAAK,OAAQ,KAAM,CAAC1V,KAAM,eACtDJ,OAAOmW,QAAS,CAAC,MAAO,KAAM,CAAC/V,KAAM,WACrCJ,OAAOqW,UAAW,CAAC,SAAU,KAAM,CAACjW,KAAM,aAC1CJ,OAAO0W,SAAU,CAAC,MAAO,IAAK,SAAU,MAAM,MAAO,CAACtW,KAAM,YAC5DJ,OAAO2W,WAAY,CAAC,OAAQ,KAAM,CAACvW,KAAM,cACzCJ,OAAOsxB,IAAK,IACZtxB,OAAOuxB,OAAQ,IACfvxB,OAAO+xB,MAAO,IACd/xB,OAAO8vB,WAAY,CAAC,WAAY,KAAM,QAAS,MAAO,GAAI,CAAC1vB,KAAM,cACjEJ,OAAO+vB,SAAU,CAAC,WAAY,KAAM,CAAC3vB,KAAM,YAC3CJ,OAAOiwB,QAAS,CAAC,WAAY,KAAM,CAAC7vB,KAAM,WAC1CJ,OAAOmwB,aAAc,CAAC,WAAY,KAAM,CAAC/vB,KAAM,gBAC/CJ,OAAOowB,QAAS,CAAC,WAAY,IAAK,QAAS,MAAO,GAAI,CAAChwB,KAAM,WAC7DJ,OAAOwwB,KAAM,CAAC,SAAU,KAAM,CAACpwB,KAAM,QACrCJ,OAAOusB,KAAM,CAAC,IAAK,KAAM,IAAK,KAAM,IAAK,KAAM,IAAK,MAAO,GAAM,CAACnsB,KAAM,QACxEJ,OAAO4wB,KAAM,CAAC,IAAK,KAAM,IAAK,KAAM,IAAK,KAAM,IAAK,MAAO,GAAM,CAACxwB,KAAM,QACxEJ,OAAOmxB,KAAM,CAAC,IAAK,KAAM,IAAK,KAAM,IAAK,KAAM,IAAK,MAAO,GAAM,CAAC/wB,KAAM,QACxEJ,OAAOolB,WAAY,CAAC,MAAO,KAAM,CAAChlB,KAAM,cACxCJ,OAAOwsB,KAAM,CAAC,MAAO,KAAM,CAACpsB,KAAM,QAClCJ,OAAOysB,KAAM,CAAC,IAAK,KAAM,CAACrsB,KAAM,QAChCJ,OAAO0sB,KAAM,CAAC,IAAK,KAAM,CAACtsB,KAAM,QAChCJ,OAAO2sB,KAAM,CAAC,SAAU,KAAM,CAACvsB,KAAM,QACrCJ,OAAO6sB,KAAM,CAAC,SAAU,KAAM,CAACzsB,KAAM,QACrCJ,OAAO8sB,KAAM,CAAC,SAAU,KAAM,CAAC1sB,KAAM,QACrCJ,OAAO+sB,KAAM,CAAC,UAAW,KAAMzsB,OAAQ,MAAO,KAAM,KAAM,OAAQ,KAAM,CAACF,KAAM,MAAOU,cAAc,IACpGd,OAAOktB,KAAM,CAAC,UAAW,KAAM5sB,OAAQ,MAAO,KAAM,KAAM,OAAQ,KAAM,CAACF,KAAM,MAAOU,cAAc,IACpGd,OAAOmtB,KAAM,CAAC,WAAY,IAAK,QAAS,MAAO,GAAI,CAAC/sB,KAAM,QAC1DJ,OAAOotB,OAAQ,CAAC,WAAY,IAAK,UAAW,MAAO,MAAO,CAAChtB,KAAM,UACjEJ,OAAOqtB,MAAO,CAAC,WAAY,IAAK,UAAW,MAAO,MAAO,CAACjtB,KAAM,SAChEJ,OAAOstB,QAAS,CAAC,WAAY,IAAK,MAAO,MAAO,KAAM,UAAW,OAAO,GAAQ,CAACltB,KAAM,SAAUU,cAAc,IAC/Gd,OAAO6tB,OAAQ,CAAC,QAAS,IAAK,OAAQ,KAAMvtB,OAAQ,OAAQ,KAAMA,QAAS,CAACF,KAAM,UAClFJ,OAAOguB,OAAQ,CAAC,WAAY,IAAK,QAAS,IAAK,OAAQ,KAAM1tB,OAAQ,OAAQ,KAAMA,QAAS,CAACF,KAAM,UACnGJ,OAAOiuB,UAAW,CAAC,SAAU,MAAO,CAAC7tB,KAAM,aAC3CJ,OAAOkuB,YAAa,CAAC,SAAU,MAAO,CAAC9tB,KAAM,eAC7CJ,OAAOouB,UAAW,CAAC,WAAY,KAAM,CAAChuB,KAAM,aAC5CJ,OAAOquB,QAAS,GAAI,CAACjuB,KAAM,WAC3BJ,OAAOuuB,WAAY,CAAC,QAAS,IAAK,OAAQ,KAAMjuB,OAAQ,OAAQ,KAAMA,QAAS,CAACF,KAAM,cACtFJ,OAAO0uB,YAAa,CAAC,MAAO,MAAO,CAACtuB,KAAM,eAC1CJ,OAAO4uB,OAAQ,CAAC,IAAK,IAAK,SAAU,MAAO,GAAI,CAACxuB,KAAM,UACtDJ,OAAOgvB,OAAQ,CAAC,IAAK,IAAK,SAAU,MAAO,GAAI,CAAC5uB,KAAM,UACtDJ,OAAOivB,MAAO,CAAC,IAAK,IAAK,SAAU,MAAO,GAAI,CAAC7uB,KAAM,SACrDJ,OAAOmvB,KAAM,CAAC,SAAU,KAAM,CAAC/uB,KAAM,QACrCJ,OAAOovB,QAAS,CAAC,SAAU,IAAK,OAAQ,MAAO,CAAChvB,KAAM,WACtDJ,OAAOsvB,KAAM,CAAC,QAAS,IAAK,UAAW,UAAMrzB,GAAY,CAACmE,KAAM,QAChEJ,OAAO2vB,KAAM,CAAC,SAAU,KAAM,CAACvvB,KAAM,YAyIxBszB,mCAAkBxvB,0JAE7BjG,EAAQK,WAAT,qBAAeuI,yDAAE,EAAGC,yDAAE,EAAGxM,yDAAE,EAAGD,yDAAE,WAExB,IAAIqQ,GAAM7D,EAAGC,EAAGxM,EAAGD,gCAG3B,uBAAcqK,UAENA,aAAegG,oBAIxB1K,OAAO0zB,GAAUnzB,UAAW,CAAC,IAAK,MAAO,EAAG,IAAK,MAAO,EAAG,IAAK,MAAO,EAAG,IAAK,MAAO,KAAM,CAACH,KAAM,UAEnGszB,GAAUnzB,UAAUkE,MAAQ,IAAIQ,IAAI,CACnC,IACA,WACA,SACA,IACA,UACA,IACA,MACA,OACA,MACA,OACA,MACA,SACA,QACA,MACA,IACA,WACA,SACA,MACA,QACA,UACA,YACA,UACA,YAGD,IAAIqQ,GAAY,IAAIoe,GAAU,QAAS,QAAS,mEAa9Cz1B,EAAQ8B,OAKR9B,EAAQG,OAsBRH,EAAQC,MAkBRC,OAAO6S,WAgCP/S,EAAQ0B,UAgER1B,EAAQ4B,UAoBR5B,EAAQQ,OA5KGiM,+BAAc1J,qDAEd6F,yDAAE,EAAGC,yDAAE,EAAGxM,yDAAE,EAAGD,yDAAE,wDAGvBsQ,GAAKmC,OAAO8hB,OAAO/nB,GAAI,OACvB+D,GAAKkC,OAAO8hB,OAAO9nB,GAAI,OACvB+D,GAAKiC,OAAO8hB,OAAOt0B,GAAI,OACvBwQ,GAAKgC,OAAO8hB,OAAOv0B,GAAI,+CAG7B,wBAEQib,kBAGR,qBAEKzO,EAAI2K,MAAM3T,KAAK8M,GAAGnK,SAAS,IAAK,IAAK,GACrCsG,EAAI0K,MAAM3T,KAAK+M,GAAGpK,SAAS,IAAK,IAAK,GACrClG,EAAIkX,MAAM3T,KAAKgN,GAAGrK,SAAS,IAAK,IAAK,GACrCnG,EAAImX,MAAM3T,KAAKiN,GAAGtK,SAAS,IAAK,IAAK,UACzB,MAAZ3C,KAAKiN,GAEJjE,EAAE,KAAOA,EAAE,IAAMC,EAAE,KAAOA,EAAE,IAAMxM,EAAE,KAAOA,EAAE,IAAMD,EAAE,KAAOA,EAAE,GAC1D,IAAMwM,EAAE,GAAKC,EAAE,GAAKxM,EAAE,GAAKD,EAAE,GAE7B,IAAMwM,EAAIC,EAAIxM,EAAID,EAItBwM,EAAE,KAAOA,EAAE,IAAMC,EAAE,KAAOA,EAAE,IAAMxM,EAAE,KAAOA,EAAE,GACzC,IAAMuM,EAAE,GAAKC,EAAE,GAAKxM,EAAE,GAEtB,IAAMuM,EAAIC,EAAIxM,iBAIxB,oBAEiB,MAAZuD,KAAKiN,SAED,QAAUjN,KAAK8M,GAAK,KAAO9M,KAAK+M,GAAK,KAAO/M,KAAKgN,GAAK,KAAQhN,KAAKiN,GAAG,IAAO,QAIhFjE,EAAI2K,MAAM3T,KAAK8M,GAAGnK,SAAS,IAAK,IAAK,GACrCsG,EAAI0K,MAAM3T,KAAK+M,GAAGpK,SAAS,IAAK,IAAK,GACrClG,EAAIkX,MAAM3T,KAAKgN,GAAGrK,SAAS,IAAK,IAAK,UACrCqG,EAAE,KAAOA,EAAE,IAAMC,EAAE,KAAOA,EAAE,IAAMxM,EAAE,KAAOA,EAAE,GACzC,IAAMuM,EAAE,GAAKC,EAAE,GAAKxM,EAAE,GAEtB,IAAMuM,EAAIC,EAAIxM,iBAIxB,uBAEQ,CACNoK,IAAK7G,KACL4I,MAAO,EACP4F,KAAM,uBACa,GAAdxO,KAAK4I,SAEN5I,KAAK4I,MACA,CAAC1E,MAAOlE,KAAK6G,IAAIiG,GAAI2B,MAAM,IAEZ,GAAdzO,KAAK4I,SAEX5I,KAAK4I,MACA,CAAC1E,MAAOlE,KAAK6G,IAAIkG,GAAI0B,MAAM,IAEZ,GAAdzO,KAAK4I,SAEX5I,KAAK4I,MACA,CAAC1E,MAAOlE,KAAK6G,IAAImG,GAAIyB,MAAM,IAEZ,GAAdzO,KAAK4I,SAEX5I,KAAK4I,MACA,CAAC1E,MAAOlE,KAAK6G,IAAIoG,GAAIwB,MAAM,IAG3B,CAACA,MAAM,oBAKlB,eAAkBhI,OAEb8H,EAAOvO,YACHyG,OAEF,QACAuC,EAAI,SAASA,WAAYuF,EAAKzB,WAClC3K,OAAO6G,EAAG,IACHA,MACH,QACAC,EAAI,SAASA,WAAYsF,EAAKxB,WAClC5K,OAAO8G,EAAG,IACHA,MACH,QACAxM,EAAI,SAASA,WAAY8R,EAAKvB,WAClC7K,OAAO1F,EAAG,IACHA,MACH,QACAD,EAAI,SAASA,WAAY+R,EAAKtB,WAClC9K,OAAO3F,EAAG,IACHA,MACH,aACG2F,OAAOnC,KAAKqzB,IAAItoB,KAAK/K,MAAO,QAC/B,eACGmC,OAAOnC,KAAK81B,MAAM/qB,KAAK/K,MAAO,QACjC,aACGmC,OAAOnC,KAAK+1B,IAAIhrB,KAAK/K,MAAO,QAC/B,aACGmC,OAAOnC,KAAKg2B,IAAIjrB,KAAK/K,MAAO,QAC/B,aACGmC,OAAOnC,KAAKi2B,IAAIlrB,KAAK/K,MAAO,QAC/B,cACGmC,OAAOnC,KAAKk2B,KAAKnrB,KAAK/K,MAAO,QAChC,aACGmC,OAAOnC,KAAKm2B,IAAIprB,KAAK/K,MAAO,QAC/B,cACGmC,OAAOnC,KAAKo2B,KAAKrrB,KAAK/K,MAAO,QAChC,iBACGmC,OAAOnC,KAAKq2B,QAAQtrB,KAAK/K,MAAO,CAAC,MAAO,WAC3C,eACGmC,OAAOnC,KAAKs2B,MAAMvrB,KAAK/K,MAAO,CAAC,IAAK,WACvC,mBACGmC,OAAOnC,KAAKu2B,UAAUxrB,KAAK/K,MAAO,CAAC,QAAS,WAC/C,kBACGmC,OAAOnC,KAAKw2B,SAASzrB,KAAK/K,MAAO,CAAC,IAAK,WAC1C,kBACGmC,OAAOnC,KAAKy2B,SAAS1rB,KAAK/K,MAAO,CAAC,IAAK,WAC1C,iBACGmC,OAAOnC,KAAK02B,QAAQ3rB,KAAK/K,MAAO,CAAC,MAAO,WAC3C,iBACGmC,OAAOnC,KAAK22B,QAAQ5rB,KAAK/K,MAAO,CAAC,MAAO,WAC3C,gBACGmC,OAAOnC,KAAK42B,OAAO7rB,KAAK/K,MAAO,CAAC,IAAK,WACxC,gBACGmC,OAAOnC,KAAK62B,OAAO9rB,KAAK/K,MAAO,CAAC,IAAK,WACxC,gBACGmC,OAAOnC,KAAK82B,OAAO/rB,KAAK/K,MAAO,CAAC,IAAK,MAAO,QAC/C,iBACGmC,OAAOnC,KAAK+2B,QAAQhsB,KAAK/K,MAAO,CAAC,IAAK,MAAO,KAAM,IAAK,MAAO,KAAM,IAAK,MAAO,KAAM,IAAK,MAAO,qBAEpG,IAAI0G,GAAe1G,KAAMyG,mBAIlC,eAAkBvH,OAEbwoB,EAASxoB,SACTA,EAAM,IACTA,GAAO,GACAA,QAEF,SACGc,KAAK8M,QACR,SACG9M,KAAK+M,QACR,SACG/M,KAAKgN,QACR,SACGhN,KAAKiN,iBAEN,IAAIwV,GAAWziB,KAAM0nB,mBAI9B,eAAarkB,UAERA,aAAiBwJ,QACb7M,KAAK8M,IAAMzJ,EAAMyJ,IAAM9M,KAAK+M,IAAM1J,EAAM0J,IAAM/M,KAAKgN,IAAM3J,EAAM2J,IAAMhN,KAAKiN,IAAM5J,EAAM4J,qBAI/F,oBAESjN,KAAK8M,oBAGd,oBAEQ9M,KAAK+M,oBAGb,oBAEQ/M,KAAKgN,oBAGb,oBAEQhN,KAAKiN,sBAGb,sBAEQjN,KAAKi2B,MAAM,wBAGnB,wBAEQj2B,KAAKi2B,MAAM,sBAGnB,sBAEQj2B,KAAKi2B,MAAM,sBAGnB,sBAES,MAASj2B,KAAK8M,GAAK,MAAS9M,KAAK+M,GAAK,MAAS/M,KAAKgN,IAAI,uBAGjE,mBAOQimB,EACH+D,EAAIC,EAAIC,EANRluB,EAAIhJ,KAAK8M,GAAG,IACZ7D,EAAIjJ,KAAK+M,GAAG,IACZtQ,EAAIuD,KAAKgN,GAAG,IACZmqB,EAAOzuB,KAAK0uB,IAAIpuB,EAAGC,EAAGxM,GACtB46B,EAAO3uB,KAAK4uB,IAAItuB,EAAGC,EAAGxM,UAI1Bw2B,GAAKoE,EAAKF,GAAM,EACZE,GAAQF,EACJ,CAAC,EAAKlE,EAAG,IAKjB+D,GAAMG,EAAKnuB,IAAMmuB,EAAKE,GACtBJ,GAAME,EAAKluB,IAAMkuB,EAAKE,GACtBH,GAAMC,EAAK16B,IAAM06B,EAAKE,GAQf,EAPHruB,GAAKmuB,EACJD,EAAGD,EACChuB,GAAKkuB,EACT,EAAIH,EAAGE,EAEP,EAAID,EAAGD,GACL,EAAO,EACH/D,EAdPA,GAAK,IACHkE,EAAKE,IAASF,EAAKE,IAEnBF,EAAKE,IAAS,EAAIF,EAAKE,yBAc9B,uBAEWr3B,KAAKi2B,MACJz2B,OAAOQ,KAAKiN,GAAG,wBAG3B,mBAEKjE,EAAIhJ,KAAK8M,GAAG,IACZ7D,EAAIjJ,KAAK+M,GAAG,IACZtQ,EAAIuD,KAAKgN,GAAG,IACZmqB,EAAOzuB,KAAK0uB,IAAIpuB,EAAGC,EAAGxM,GACtB46B,EAAO3uB,KAAK4uB,IAAItuB,EAAGC,EAAGxM,MAEtB46B,GAAQF,EACX,MAAO,CAAC,EAAK,EAFNA,OAIJH,GAAMG,EAAKnuB,IAAMmuB,EAAKE,GACtBJ,GAAME,EAAKluB,IAAMkuB,EAAKE,GACtBH,GAAMC,EAAK16B,IAAM06B,EAAKE,SASnB,EAPHruB,GAAKmuB,EACJD,EAAGD,EACChuB,GAAKkuB,EACT,EAAIH,EAAGE,EAEP,EAAID,EAAGD,GACL,EAAO,GAXLG,EAAKE,GAAQF,EAHdA,uBAkBT,uBAEWn3B,KAAKm2B,MACJ32B,OAAOQ,KAAKiN,GAAG,4BAG3B,iBAAQomB,MAEa,iBAATA,EACV,MAAM,IAAIrkB,GAAU,mCACjBknB,EAAOl2B,KAAKk2B,cACTnD,KAAKM,EAAK6C,EAAK,GAAIA,EAAK,GAAIA,EAAK,yBAGzC,eAAM15B,MAEa,iBAAPA,EACV,MAAM,IAAIwS,GAAU,oCACd,IAAInC,MAAM7M,KAAK8M,GAAI9M,KAAK+M,GAAI/M,KAAKgN,GAAIxQ,+BAG7C,sBAAa6hB,EAAOnP,EAAOqoB,UAEnBA,EAAOroB,GAAS,EAAEqoB,GAAUlZ,2BAGpC,mBAAUyX,MAEa,iBAAXA,EACV,MAAM,IAAI9mB,GAAU,qCACjBknB,EAAOl2B,KAAKk2B,cACTnD,KAAKmD,EAAK,GAAIJ,EAAOI,EAAK,GAAIA,EAAK,4BAG3C,kBAAS9zB,MAEU,iBAAPA,EACV,MAAM,IAAI4M,GAAU,oCACjBknB,EAAOl2B,KAAKk2B,cACTnD,KAAKmD,EAAK,GAAIA,EAAK,GAAK9zB,EAAG8zB,EAAK,GAAIA,EAAK,4BAGjD,kBAAS9zB,MAEU,iBAAPA,EACV,MAAM,IAAI4M,GAAU,kCACjBknB,EAAOl2B,KAAKk2B,OACZJ,EAAQI,EAAK,UACb9zB,EAAI,EACP0zB,IAAU,EAAEA,GAAO1zB,EACXA,EAAI,IACZ0zB,GAASA,EAAM1zB,GACT2wB,KAAKmD,EAAK,GAAIJ,EAAOI,EAAK,GAAIA,EAAK,2BAG3C,iBAAQH,MAEa,iBAATA,EACV,MAAM,IAAI/mB,GAAU,mCACjBknB,EAAOl2B,KAAKk2B,cACTnD,KAAKmD,EAAK,GAAIA,EAAK,GAAIH,EAAKG,EAAK,2BAGzC,iBAAQF,MAEa,iBAATA,EACV,MAAM,IAAIhnB,GAAU,mCAEjBwoB,EAAUx3B,KAAKg2B,SACJ,GAAXwB,GAA6B,GAAXA,EACtB,KACKtxB,EAAQ,IAAJ8vB,SACD,IAAInpB,MAAM3G,EAAGA,EAAGA,EAAGlG,KAAKiN,IAE3B,GAAI+oB,EAAMwB,EACf,KACKp1B,GAAK4zB,EAAIwB,IAAU,EAAEA,UAClB,IAAI3qB,MACV7M,KAAKy3B,aAAaz3B,KAAK8M,GAAI,IAAK1K,GAChCpC,KAAKy3B,aAAaz3B,KAAK+M,GAAI,IAAK3K,GAChCpC,KAAKy3B,aAAaz3B,KAAKgN,GAAI,IAAK5K,GAChCpC,KAAKiN,IAGF,GAAI+oB,EAAMwB,EACf,KACKp1B,EAAI4zB,EAAIwB,SACL,IAAI3qB,MACV7M,KAAKy3B,aAAa,EAAGz3B,KAAK8M,GAAI1K,GAC9BpC,KAAKy3B,aAAa,EAAGz3B,KAAK+M,GAAI3K,GAC9BpC,KAAKy3B,aAAa,EAAGz3B,KAAKgN,GAAI5K,GAC9BpC,KAAKiN,IAIN,OAAOjN,2BAGT,gBAAOoC,MAEY,iBAAPA,EACV,MAAM,IAAI4M,GAAU,qCACdhP,KAAK22B,QAAQ32B,KAAKg2B,MAAQ5zB,yBAGlC,gBAAOA,MAEY,iBAAPA,EACV,MAAM,IAAI4M,GAAU,kCACjBgnB,EAAMh2B,KAAKg2B,aACX5zB,EAAI,EACP4zB,IAAQ,EAAEA,GAAK5zB,EACPA,EAAI,IACZ4zB,GAAOA,EAAI5zB,GACLpC,KAAK22B,QAAQX,yBAGrB,sBAAO5zB,yDAAE,KAEU,iBAAPA,EACV,MAAM,IAAI4M,GAAU,kCACjB0oB,EAAO,EAAIt1B,SACR,IAAIyK,MACV6qB,EAAO13B,KAAK8M,GAAK1K,GAAK,IAAMpC,KAAK8M,IACjC4qB,EAAO13B,KAAK+M,GAAK3K,GAAK,IAAMpC,KAAK+M,IACjC2qB,EAAO13B,KAAKgN,GAAK5K,GAAK,IAAMpC,KAAKgN,IACjChN,KAAKiN,2BAIP,uBAAQjE,yDAAE,KAAMC,yDAAE,KAAMxM,yDAAE,KAAMD,yDAAE,YAE1B,IAAIqQ,MACL,MAAL7D,EAAYA,EAAIhJ,KAAK8M,GAChB,MAAL7D,EAAYA,EAAIjJ,KAAK+M,GAChB,MAALtQ,EAAYA,EAAIuD,KAAKgN,GAChB,MAALxQ,EAAYA,EAAIwD,KAAKiN,2BAIvB,yBAEQ,qCAtaIJ,YAyaI,IAAIA,GAAM,IAAM,EAAM,oBAza1BA,SA0aC,IAAIA,GAAM,IAAM,EAAM,oBA1avBA,YA2aI,IAAIA,GAAM,IAAM,IAAM,oBA3a1BA,YA4aI,IAAIA,GAAM,IAAM,IAAM,oBA5a1BA,WA6aG,IAAIA,GAAM,IAAM,IAAM,oBA7azBA,YA8aI,IAAIA,GAAM,IAAM,EAAM,sBA9a1BA,aA+aK,IAAIA,GAAM,IAAM,EAAM,sBA/a3BA,WAgbG,IAAIA,GAAM,IAAM,IAAM,sBAhbzBA,UAibE,IAAIA,GAAM,EAAM,IAAM,oBAjbxBA,WAkbG,IAAIA,GAAM,EAAM,IAAM,oBAlbzBA,UAmbE,IAAIA,GAAM,EAAM,EAAM,sBAnbxBA,UAobE,IAAIA,GAAM,EAAM,EAAM,sBApbxBA,UAqbE,IAAIA,GAAM,EAAM,IAAM,sBArbxBA,UAsbE,IAAIA,GAAM,EAAM,IAAM,sBAtbxBA,WAubG,IAAIA,GAAM,EAAM,EAAM,oBAvbzBA,YAwbI,IAAIA,GAAM,IAAM,IAAM,sBAxb1BA,UAybE,IAAIA,GAAM,IAAM,IAAM,sBAzbxBA,aA2bKA,GAAM8qB,wBA3bX9qB,UA4bEA,GAAM+qB,sBA5bR/qB,eA8bO,QACRA,GAAMgrB,WACThrB,GAAMirB,WACHjrB,GAAMkrB,cACNlrB,GAAMmrB,aACPnrB,GAAMorB,aACLprB,GAAM8qB,eACL9qB,GAAMqrB,cACRrrB,GAAMsrB,WACPtrB,GAAMurB,WACLvrB,GAAMwrB,WACPxrB,GAAMyrB,UACNzrB,GAAM0rB,UACN1rB,GAAM+qB,UACN/qB,GAAM2rB,WACL3rB,GAAM4rB,aACL5rB,GAAM6rB,YACR7rB,GAAM8rB,aACH9rB,GAAM+rB,aACT/rB,GAAMgsB,OAIhB12B,OAAO0K,GAAMnK,UAAUsG,EAAG,IAC1B7G,OAAO0K,GAAMnK,UAAUuG,EAAG,IAC1B9G,OAAO0K,GAAMnK,UAAUjG,EAAG,IAC1B0F,OAAO0K,GAAMnK,UAAUlG,EAAG,IAC1B2F,OAAO0K,GAAMnK,UAAU2wB,IAAK,IAC5BlxB,OAAO0K,GAAMnK,UAAUszB,IAAK,IAC5B7zB,OAAO0K,GAAMnK,UAAUqzB,IAAK,IAC5B5zB,OAAO0K,GAAMnK,UAAUuzB,IAAK,IAC5B9zB,OAAO0K,GAAMnK,UAAUwzB,KAAM,IAC7B/zB,OAAO0K,GAAMnK,UAAUyzB,IAAK,IAC5Bh0B,OAAO0K,GAAMnK,UAAU0zB,KAAM,IAC7Bj0B,OAAO0K,GAAMnK,UAAU2zB,QAAS,CAAC,MAAO,OACxCl0B,OAAO0K,GAAMnK,UAAU6zB,UAAW,CAAC,QAAS,OAC5Cp0B,OAAO0K,GAAMnK,UAAU8zB,SAAU,CAAC,IAAK,OACvCr0B,OAAO0K,GAAMnK,UAAU+zB,SAAU,CAAC,IAAK,OACvCt0B,OAAO0K,GAAMnK,UAAUg0B,QAAS,CAAC,MAAO,OACxCv0B,OAAO0K,GAAMnK,UAAU4zB,MAAO,CAAC,IAAK,OACpCn0B,OAAO0K,GAAMnK,UAAUi0B,QAAS,CAAC,MAAO,OACxCx0B,OAAO0K,GAAMnK,UAAUk0B,OAAQ,CAAC,IAAK,OACrCz0B,OAAO0K,GAAMnK,UAAUm0B,OAAQ,CAAC,IAAK,OACrC10B,OAAO0K,GAAMnK,UAAUo0B,OAAQ,CAAC,IAAK,MAAO,IAC5C30B,OAAO0K,GAAMnK,UAAUq0B,QAAS,CAAC,IAAK,MAAO,KAAM,IAAK,MAAO,KAAM,IAAK,MAAO,KAAM,IAAK,MAAO,WAGtF7pB,+BAAc/J,6CAEdgG,EAAMC,EAAOC,6DAGnB8K,MAAQ,IAAIhH,KAAKhE,EAAMC,EAAM,EAAGC,qCAGrCjJ,EAAQ8B,WAAT,wBAEQsV,UAGPpX,EAAQG,WAAT,uBAEQ,KAAOP,KAAKI,EAAQC,OAAS,WAGpCD,EAAQC,UAAT,wBAEQsT,MAAM3T,KAAKmU,MAAM5K,cAAe,IAAK,GAAK,IAAMoK,MAAM3T,KAAKmU,MAAM3K,WAAW,EAAG,IAAK,GAAK,IAAMmK,MAAM3T,KAAKmU,MAAM1K,UAAW,IAAK,UAGvIrJ,EAAQQ,SAAT,eAAayC,UAERA,aAAiB6J,OACblN,KAAKmU,MAAMpC,YAAc1O,EAAM8Q,MAAMpC,iBAI7C3R,EAAQU,SAAT,eAAauC,MAERA,aAAiB6J,MACpB,OAAOlN,KAAKmU,MAAQ9Q,EAAM8Q,MAC3B/B,aAAa,IAAKpS,KAAMqD,UAGxBjD,EAAQW,SAAT,eAAasC,MAERA,aAAiB6J,MACpB,OAAOlN,KAAKmU,OAAS9Q,EAAM8Q,MAC5B/B,aAAa,KAAMpS,KAAMqD,UAGzBjD,EAAQY,SAAT,eAAaqC,MAERA,aAAiB6J,MACpB,OAAOlN,KAAKmU,MAAQ9Q,EAAM8Q,MAC3B/B,aAAa,IAAKpS,KAAMqD,UAGxBjD,EAAQa,SAAT,eAAaoC,MAERA,aAAiB6J,MACpB,OAAOlN,KAAKmU,OAAS9Q,EAAM8Q,MAC5B/B,aAAa,KAAMpS,KAAMqD,uBAG1B,uBAEQrD,KAAKmU,MAAM5K,mCAGnB,wBAEQvJ,KAAKmU,MAAM3K,WAAW,qBAG9B,sBAEQxJ,KAAKmU,MAAM1K,iCAGnB,yBAEQ,oBAKIqvB,uCAAsBzyB,0KAEjCjG,EAAQK,WAAT,qBAAesJ,yDAAK,EAAGC,yDAAQ,EAAGC,yDAAa,SAEvC,IAAI0D,GAAU5D,EAAMC,EAASC,gCAGrC,uBAAcpD,UAENA,aAAe8G,wBAIxBxL,OAAO22B,GAAcp2B,UAAW,CAAC,OAAQ,MAAO,EAAG,UAAW,MAAO,EAAG,eAAgB,MAAO,GAAI,CAACH,KAAM,kBAE/FmV,GAAgB,IAAIohB,GAAc,KAAM,YAAa,4CAEnDnrB,mCAAkBxK,6DAElB4G,yDAAK,EAAGC,yDAAQ,EAAGC,yDAAa,qDAGvC8uB,EAAqBrwB,KAAK+N,MAA+B,KAAjB,MAAP1M,EAAeC,GAAmBC,GAEvEA,EAAewf,GAAO/mB,UAAU+d,IAAIsY,EAAoB,SACpDC,EAAgBtwB,KAAK+N,MAAMsiB,EAAqB,YACpD/uB,EAAUyf,GAAO/mB,UAAU+d,IAAIuY,EAAe,OAC9CjvB,EAAOrB,KAAK+N,MAAMuiB,EAAgB,OAC9BhvB,EAAU,IAEbA,GAAW,QACTD,KAGE+D,cAAgB7D,IAChB4D,SAAW7D,IACX4D,MAAQ7D,wCAGb3J,EAAQ8B,WAAT,wBAEQwV,gCAGR,gCAEqB,GAAb1X,KAAK4N,MAAa,GAAK,GAAK5N,KAAK6N,gBAGxCzN,EAAQG,WAAT,qBAEK2F,EAAI,GAAI6N,GAAQ,SACpB7N,EAAE1B,KAAK,cACHxE,KAAK4N,QAER1H,EAAE1B,KAAK,QAAUxE,KAAK4N,OACtBmG,GAAQ,GAEL/T,KAAK6N,WAEHkG,GACJ7N,EAAE1B,KAAK,MACR0B,EAAE1B,KAAK,WAAaxE,KAAK6N,UACzBkG,GAAQ,GAEL/T,KAAK8N,gBAEHiG,GACJ7N,EAAE1B,KAAK,MACR0B,EAAE1B,KAAK,gBAAkBxE,KAAK8N,gBAE/B5H,EAAE1B,KAAK,KACA0B,EAAEE,KAAK,WAGdhG,EAAQC,UAAT,qBAEK6F,EAAI,GACJlG,KAAK4N,QAER1H,EAAE1B,KAAKxE,KAAK4N,MAAQ,SACA,IAAhB5N,KAAK4N,OAA+B,IAAf5N,KAAK4N,OAC7B1H,EAAE1B,KAAK,KACR0B,EAAE1B,KAAK,WAEJwF,EAAUhK,KAAK6N,SAAW,GAC1BorB,EAAUvwB,KAAK+N,MAAMzW,KAAK6N,SAAW,IACrCqrB,EAAQxwB,KAAK+N,MAAMwiB,EAAU,WACjCA,GAAoB,GAEpB/yB,EAAE1B,KACD,GAAK00B,EACL,IACAvlB,MAAMslB,EAAQt2B,WAAY,IAAK,GAC/B,IACAgR,MAAM3J,EAAQrH,WAAY,IAAK,IAE5B3C,KAAK8N,eACR5H,EAAE1B,KAAK,IAAKmP,MAAM3T,KAAK8N,cAAcnL,WAAY,IAAK,IAChDuD,EAAEE,KAAK,WAGdhG,EAAQI,WAAT,wBAEuB,IAAfR,KAAK4N,OAAiC,IAAlB5N,KAAK6N,UAAyC,IAAvB7N,KAAK8N,qBAGvD1N,EAAQe,UAAT,wBAEQnB,KAAK4N,MAAQ,EAAI,IAAID,WAAW3N,KAAK4N,OAAQ5N,KAAK6N,UAAW7N,KAAK8N,eAAiB9N,YAG1FI,EAAQQ,SAAT,eAAayC,UAERA,aAAiBsK,YACZ3N,KAAK4N,QAAUvK,EAAMuK,OAAW5N,KAAK6N,WAAaxK,EAAMwK,UAAc7N,KAAK8N,gBAAkBzK,EAAMyK,sBAI5G1N,EAAQU,SAAT,eAAauC,MAERA,aAAiBsK,iBAEhB3N,KAAK4N,OAASvK,EAAMuK,MAChB5N,KAAK4N,MAAQvK,EAAMuK,MACvB5N,KAAK6N,UAAYxK,EAAMwK,SACnB7N,KAAK6N,SAAWxK,EAAMwK,SACvB7N,KAAK8N,cAAgBzK,EAAMyK,cAEnCsE,aAAa,IAAKpS,KAAMqD,UAGxBjD,EAAQW,SAAT,eAAasC,MAERA,aAAiBsK,iBAEhB3N,KAAK4N,OAASvK,EAAMuK,MAChB5N,KAAK4N,MAAQvK,EAAMuK,MACvB5N,KAAK6N,UAAYxK,EAAMwK,SACnB7N,KAAK6N,SAAWxK,EAAMwK,SACvB7N,KAAK8N,eAAiBzK,EAAMyK,cAEpCsE,aAAa,KAAMpS,KAAMqD,UAGzBjD,EAAQY,SAAT,eAAaqC,MAERA,aAAiBsK,iBAEhB3N,KAAK4N,OAASvK,EAAMuK,MAChB5N,KAAK4N,MAAQvK,EAAMuK,MACvB5N,KAAK6N,UAAYxK,EAAMwK,SACnB7N,KAAK6N,SAAWxK,EAAMwK,SACvB7N,KAAK8N,cAAgBzK,EAAMyK,cAEnCsE,aAAa,IAAKpS,KAAMqD,UAGxBjD,EAAQa,SAAT,eAAaoC,MAERA,aAAiBsK,iBAEhB3N,KAAK4N,OAASvK,EAAMuK,MAChB5N,KAAK4N,MAAQvK,EAAMuK,MACvB5N,KAAK6N,UAAYxK,EAAMwK,SACnB7N,KAAK6N,SAAWxK,EAAMwK,SACvB7N,KAAK8N,eAAiBzK,EAAMyK,cAEpCsE,aAAa,KAAMpS,KAAMqD,UAGzBjD,EAAQc,UAAT,wBAEQ,IAAIyM,WAAW3N,KAAK4N,OAAQ5N,KAAK6N,UAAW7N,KAAK8N,uCAGzD,kBAAS6R,EAAM5V,OAEVZ,EAAOwW,EAAKxL,MAAM5K,cAClBH,EAAQuW,EAAKxL,MAAM3K,WACnBH,EAAMsW,EAAKxL,MAAM1K,UAAYM,SAC1B,IAAIoD,KAAKhE,EAAMC,EAAOC,+BAG9B,sBAAasW,EAAM5V,EAAMC,EAASC,OAE7Bd,EAAOwW,EAAKpW,cACZH,EAAQuW,EAAKnW,WACbH,EAAMsW,EAAKlW,UAAYM,EACvBsK,EAAOsL,EAAKjW,WACZ4K,EAASqL,EAAKhW,aACd4K,EAASoL,EAAK/V,aAAeI,EAC7BmvB,EAAcxZ,EAAK9V,kBAAoBI,EAAa,WACjD,IAAIkD,KAAKhE,EAAMC,EAAOC,EAAKgL,EAAMC,EAAQC,EAAQ4kB,UAGxD/4B,EAAQgB,UAAT,eAAciC,MAETA,aAAiBsK,UACpB,OAAO,IAAIA,UAAU3N,KAAK4N,MAAQvK,EAAMuK,MAAO5N,KAAK6N,SAAWxK,EAAMwK,SAAU7N,KAAK8N,cAAgBzK,EAAMyK,eACtG,GAAI5E,QAAQ7F,GAChB,OAAOrD,KAAKo5B,SAAS/1B,EAAOrD,KAAK4N,OAC7B,GAAItE,YAAYjG,GACpB,OAAOrD,KAAKq5B,aAAah2B,EAAOrD,KAAK4N,MAAO5N,KAAK6N,SAAU7N,KAAK8N,qBAC3D,IAAIkB,GAAUiB,MAAMjQ,MAAM2G,WAAa,MAAQsJ,MAAM5M,GAAOsD,WAAa,yBAG/EvG,EAAQiB,WAAT,eAAegC,MAEV6F,QAAQ7F,GACX,OAAOrD,KAAKo5B,SAAS/1B,EAAOrD,KAAK4N,OAC7B,GAAItE,YAAYjG,GACpB,OAAOrD,KAAKq5B,aAAah2B,EAAOrD,KAAK4N,MAAO5N,KAAK6N,SAAU7N,KAAK8N,qBAC3D,IAAIkB,GAAUiB,MAAMjQ,MAAM2G,WAAa,MAAQsJ,MAAM5M,GAAOsD,WAAa,yBAG/EvG,EAAQkB,UAAT,eAAc+B,MAETA,aAAiBsK,UACpB,OAAO,IAAIA,UAAU3N,KAAK4N,MAAQvK,EAAMuK,MAAO5N,KAAK6N,SAAWxK,EAAMwK,SAAU7N,KAAK8N,cAAgBzK,EAAMyK,qBACrG,IAAIkB,GAAUiB,MAAMjQ,MAAM2G,WAAa,MAAQsJ,MAAM5M,GAAOsD,WAAa,yBAG/EvG,EAAQmB,WAAT,eAAe8B,MAEV6F,QAAQ7F,GACX,OAAOrD,KAAKo5B,SAAS/1B,GAAQrD,KAAK4N,OAC9B,GAAItE,YAAYjG,GACpB,OAAOrD,KAAKq5B,aAAah2B,GAAQrD,KAAK4N,OAAQ5N,KAAK6N,UAAW7N,KAAK8N,qBAC9D,IAAIkB,GAAUiB,MAAMjQ,MAAM2G,WAAa,MAAQsJ,MAAM5M,GAAOsD,WAAa,yBAG/EvG,EAAQoB,UAAT,eAAc6B,MAES,iBAAXA,EACV,OAAO,IAAIsK,UAAU3N,KAAK4N,MAAQvK,EAAOrD,KAAK6N,SAAWxK,EAAOrD,KAAK8N,cAAgBzK,SAChF,IAAI2L,GAAUiB,MAAMjQ,MAAM2G,WAAa,MAAQsJ,MAAM5M,GAAOsD,WAAa,yBAG/EvG,EAAQqB,WAAT,eAAe4B,MAEQ,iBAAXA,EACV,OAAO,IAAIsK,UAAU3N,KAAK4N,MAAQvK,EAAOrD,KAAK6N,SAAWxK,EAAOrD,KAAK8N,cAAgBzK,SAChF,IAAI2L,GAAUiB,MAAMjQ,MAAM2G,WAAa,MAAQsJ,MAAM5M,GAAOsD,WAAa,yBAG/EvG,EAAQsB,cAAT,eAAkB2B,MAEK,iBAAXA,GAAyC,kBAAXA,EACzC,IACc,GAATA,EACH,MAAM,IAAImf,UACJ,IAAI7U,UAAU3N,KAAK4N,MAAQvK,EAAOrD,KAAK6N,SAAWxK,EAAOrD,KAAK8N,cAAgBzK,GAEjF,GAAIA,aAAiBsK,UAC1B,KACK2rB,EAAUt5B,KAAK4N,MACf2rB,EAAal2B,EAAMuK,MACnB4rB,EAAax5B,KAAK6N,UAAYxK,EAAMwK,SACpC4rB,EAAkBz5B,KAAK8N,eAAiBzK,EAAMyK,kBAC9C0rB,GAAcC,KAEjBH,EAAkB,MAARA,EAAct5B,KAAK6N,SAC7B0rB,EAAwB,MAAXA,EAAmBl2B,EAAMwK,SAClC4rB,IAEHH,EAAoB,IAAVA,EAAoBt5B,KAAK8N,cACnCyrB,EAA0B,IAAbA,EAAuBl2B,EAAMyK,gBAG1B,GAAdyrB,EACH,MAAM,IAAI/W,UACJ8W,EAAQC,QAEV,IAAIvqB,GAAUiB,MAAMjQ,MAAM2G,WAAa,MAAQsJ,MAAM5M,GAAOsD,WAAa,yBAG/EvG,EAAQwB,eAAT,eAAmByB,MAEI,iBAAXA,GAAyC,kBAAXA,EACzC,IACc,GAATA,EACH,MAAM,IAAImf,MACPvM,OAAO5S,UAEH,IAAIsK,UAAU3N,KAAK4N,MAAQvK,EAAOrD,KAAK6N,SAAWxK,EAAOrD,KAAK8N,cAAgBzK,QAGlF,GAAIA,aAAiBsK,UAC1B,KACKlC,EAASzL,KAAKI,EAAQsB,SAAS2B,UAC5BqF,KAAK+N,MAAMhL,WAInBrL,EAAQ0B,cAAT,eAAkB2E,OAEb8H,EAAOvO,YACHyG,OAEF,WACAsD,EAAO,SAASA,cAAewE,EAAKX,cACxCzL,OAAO4H,EAAM,IACNA,MACH,cACAC,EAAU,SAASA,iBAAkBuE,EAAKV,iBAC9C1L,OAAO6H,EAAS,IACTA,MACH,mBACAC,EAAe,SAASA,sBAAuBsE,EAAKT,sBACxD3L,OAAO8H,EAAc,IACdA,gBAED,IAAIvD,GAAe1G,KAAMyG,wBAIlC,uBAEQzG,KAAK4N,6BAGb,0BAEQ5N,KAAK6N,qCAGb,+BAEQ7N,KAAK8N,qCAGb,yBAEQ,6BAKI4rB,wCAAuBrzB,8KAGlCjG,EAAQK,gCAAM0J,yDAAO,SAEd,IAAI4D,GAAW5D,gCAGvB,uBAActD,UAENA,aAAekH,yBAIb4J,GAAiB,IAAI+hB,GAAe,KAAM,aAAc,sCAEnEv3B,OAAOu3B,GAAeh3B,UAAW,CAAC,SAAU,KAAM,GAAI,CAACH,KAAM,iBAa3DnC,EAAQ8B,OAKR9B,EAAQG,OAORH,EAAQC,MAgBRD,EAAQI,OAKRJ,EAAQe,MAKRf,EAAQQ,KAORR,EAAQU,KAORV,EAAQW,KAORX,EAAQY,KAORZ,EAAQa,KAORb,EAAQc,MAgCRd,EAAQgB,MAWRhB,EAAQiB,OASRjB,EAAQkB,MAORlB,EAAQmB,OASRnB,EAAQoB,MAORpB,EAAQqB,OAORrB,EAAQsB,UAORtB,EAAQwB,WAkBRxB,EAAQ0B,YA/LGiM,oCAAmB5K,+DAKnBgH,yDAAO,2DAGb6D,QAAU7D,iDAGhB,wBAEQwN,kBAGR,wBAEM3X,KAAKgO,QAEH,cAAgBhO,KAAKgO,QAAU,IAD9B,8BAIT,wBAEKhO,KAAKgO,SAEc,IAAlBhO,KAAKgO,SAAmC,IAAjBhO,KAAKgO,QACxBhO,KAAKgO,QAAU,UAChBhO,KAAKgO,QAAU,SAEhB,mCAGR,2BAEQhO,KAAKI,EAAQC,sBAGrB,wBAEyB,IAAjBL,KAAKgO,uBAGb,wBAEQhO,KAAKgO,QAAU,EAAI,IAAID,YAAY/N,KAAKgO,SAAWhO,oBAG3D,eAAaqD,UAERA,aAAiB0K,YACb/N,KAAKgO,UAAY3K,EAAM2K,uBAIhC,eAAa3K,MAERA,aAAiB0K,WACpB,OAAO/N,KAAKgO,QAAU3K,EAAM2K,QAC7BoE,aAAa,IAAKpS,KAAMqD,kBAGzB,eAAaA,MAERA,aAAiB0K,WACpB,OAAO/N,KAAKgO,SAAW3K,EAAM2K,QAC9BoE,aAAa,KAAMpS,KAAMqD,kBAG1B,eAAaA,MAERA,aAAiB0K,WACpB,OAAO/N,KAAKgO,QAAU3K,EAAM2K,QAC7BoE,aAAa,IAAKpS,KAAMqD,kBAGzB,eAAaA,MAERA,aAAiB0K,WACpB,OAAO/N,KAAKgO,SAAW3K,EAAM2K,QAC9BoE,aAAa,KAAMpS,KAAMqD,kBAG1B,wBAEQ,IAAI0K,YAAY/N,KAAKgO,iCAG7B,kBAAS2R,EAAMxV,OAEVsB,EAASzL,KAAKq5B,aAAa1Z,EAAKxL,MAAOhK,UACpC,IAAI+C,GAAMzB,EAAOlC,cAAekC,EAAOjC,WAAW,EAAGiC,EAAOhC,uCAGpE,sBAAakW,EAAMxV,WAEdhB,EAAOwW,EAAKpW,cACZH,EAAQuW,EAAKnW,WAAaW,EAC1Bd,EAAMsW,EAAKlW,UACX4K,EAAOsL,EAAKjW,WACZ4K,EAASqL,EAAKhW,aACd4K,EAASoL,EAAK/V,aACduvB,EAAcxZ,EAAK9V,oBAGvB,KAEK8vB,EAAc,IAAIxsB,KAAKhE,EAAMC,EAAO,EAAGiL,EAAMC,EAAQC,EAAQ4kB,GAAa3vB,WAC1EiC,EAAS,IAAI0B,KAAKhE,EAAMC,EAAOC,EAAKgL,EAAMC,EAAQC,EAAQ4kB,MAC1D1tB,EAAOjC,aAAemwB,EACzB,OAAOluB,IACNpC,kBAIJ,eAAchG,MAET6G,cAAc7G,GACjB,OAAO,IAAI0K,WAAW/N,KAAKgO,QAAU3K,EAAM2K,SACvC,GAAI9E,QAAQ7F,GAChB,OAAOrD,KAAKo5B,SAAS/1B,EAAOrD,KAAKgO,SAC7B,GAAI1E,YAAYjG,GACpB,OAAOrD,KAAKq5B,aAAah2B,EAAOrD,KAAKgO,eAChC,IAAI3I,GAAc4K,MAAMjQ,MAAM2G,WAAa,MAAQsJ,MAAM5M,GAAOsD,WAAa,iCAGpF,eAAetD,MAEV6F,QAAQ7F,GACX,OAAOrD,KAAKo5B,SAAS/1B,EAAOrD,KAAKgO,SAC7B,GAAI1E,YAAYjG,GACpB,OAAOrD,KAAKq5B,aAAah2B,EAAOrD,KAAKgO,eAChC,IAAI3I,GAAc4K,MAAMjQ,MAAM2G,WAAa,MAAQsJ,MAAM5M,GAAOsD,WAAa,iCAGpF,eAActD,MAET6G,cAAc7G,GACjB,OAAO,IAAI0K,WAAW/N,KAAKgO,QAAU3K,EAAM2K,eACtC,IAAI3I,GAAc4K,MAAMjQ,MAAM2G,WAAa,MAAQsJ,MAAM5M,GAAOsD,WAAa,iCAGpF,eAAetD,MAEV6F,QAAQ7F,GACX,OAAOrD,KAAKo5B,SAAS/1B,GAAQrD,KAAKgO,SAC9B,GAAI1E,YAAYjG,GACpB,OAAOrD,KAAKq5B,aAAah2B,GAAQrD,KAAKgO,eACjC,IAAI3I,GAAc4K,MAAMjQ,MAAM2G,WAAa,MAAQsJ,MAAM5M,GAAOsD,WAAa,iCAGpF,eAActD,MAES,iBAAXA,GAAyC,kBAAXA,EACxC,OAAO,IAAI0K,WAAW/N,KAAKgO,QAAUtF,KAAK+N,MAAMpT,UAC3C,IAAIgC,GAAc4K,MAAMjQ,MAAM2G,WAAa,MAAQsJ,MAAM5M,GAAOsD,WAAa,iCAGpF,eAAetD,MAEQ,iBAAXA,GAAyC,kBAAXA,EACxC,OAAO,IAAI0K,WAAW/N,KAAKgO,QAAUtF,KAAK+N,MAAMpT,UAC3C,IAAIgC,GAAc4K,MAAMjQ,MAAM2G,WAAa,MAAQsJ,MAAM5M,GAAOsD,WAAa,iCAGpF,eAAkBtD,MAEb6G,cAAc7G,GACjB,OAAOrD,KAAKgO,QAAU3K,EAAM2K,cACvB,IAAI3I,GAAc4K,MAAMjQ,MAAM2G,WAAa,MAAQsJ,MAAM5M,GAAOsD,WAAa,iCAGpF,eAAmBtD,MAEI,iBAAXA,GAAyC,kBAAXA,EACzC,IACc,GAATA,EACH,MAAM,IAAImf,MACPvM,OAAO5S,GACV,OAAO,IAAI0K,WAAWrF,KAAK+N,MAAMzW,KAAKgO,QAAU3K,SAE7C,GAAI6G,cAAc7G,GACvB,IACsB,GAAjBA,EAAM2K,QACT,MAAM,IAAIwU,UACJ9Z,KAAK+N,MAAMzW,KAAKgO,QAAU3K,EAAM2K,eAElC,IAAI3I,GAAc4K,MAAMjQ,MAAM2G,WAAa,OAASsJ,MAAM5M,GAAOsD,WAAa,iCAGrF,eAAkBF,OAEb8H,EAAOvO,YACHyG,OAEF,aACA0D,EAAS,SAASA,gBAAiBoE,EAAKP,gBAC5C7L,OAAOgI,EAAQ,IACRA,gBAED,IAAIzD,GAAe1G,KAAMyG,0BAIlC,yBAEQzG,KAAKgO,0CA/MDD,eAEO,8BAFPA,cAGM,sCAuhBnB,QAtUa6rB,GAAQ,IAAIzF,GACxB,OACA,uCACA,CACC0F,GAAInxB,KAAKoxB,GACTC,EAAGrxB,KAAKsxB,EACRC,IAAK,EAAIvxB,KAAKoxB,GACdlF,IAAKlsB,KAAKksB,IACVC,IAAKnsB,KAAKmsB,IACVC,IAAKpsB,KAAKosB,IACVC,KAAMrsB,KAAKqsB,KACXP,QAASA,UAKEvI,GAAY,IAAIkI,GAC5B,WACA,iCACA,CACC+F,WAAYhF,KAKDiF,GAAO,IAAIhG,GACvB,MACA,8BACA,CACC3Q,IAAK5N,UAAU4N,IACfa,QAASzO,UAAUyO,IACnBC,UAAW1O,UAAU0O,IACrBE,WAAY5O,UAAU4O,IACtBC,QAAS7O,UAAU6O,IACnBC,SAAU9O,UAAU8O,IACpBK,WAAYnP,UAAUmP,IACtBE,iBAAkBrP,UAAUqP,IAC5BQ,QAAS7P,UAAU6P,IACnBE,qBAAsB/P,UAAU+P,IAChCO,OAAQtQ,UAAUsQ,IAClBC,oBAAqBvQ,UAAUuQ,IAC/BjB,YAAatP,UAAUsP,IACvBC,kBAAmBvP,UAAUuP,IAC7BiB,QAASxQ,UAAUwQ,IACnBE,qBAAsB1Q,UAAU0Q,IAChCC,uBAAwB3Q,UAAU2Q,IAClCC,OAAQ5Q,UAAU4Q,IAClBiF,SAAU7V,UAAU6V,IACpB2B,qBAAsBxX,UAAUwX,IAChCK,WAAY7X,UAAU6X,IACtBC,aAAc9X,UAAU8X,IACxBC,aAAc/X,UAAU+X,IACxBd,YAAajX,UAAUiX,IACvBI,cAAerX,UAAUqX,IACzBC,SAAUtX,UAAUsX,IACpBC,YAAavX,UAAUuX,IACvBlD,QAASrU,UAAUqU,IACnByB,SAAU9V,UAAU8V,IACpB9E,SAAUhR,UAAUgR,IACpBG,OAAQnR,UAAUmR,IAClBC,MAAOpR,UAAUoR,IACjBH,OAAQjR,UAAUiR,IAClBC,UAAWlR,UAAUkR,IACrBO,SAAUzR,UAAUyR,IACpBC,UAAW1R,UAAU0R,IACrBF,UAAWxR,UAAUwR,IACrBI,UAAW5R,UAAU4R,IACrBC,QAAS7R,UAAU6R,IACnBiC,aAAc9T,UAAU8T,IACxBC,cAAe/T,UAAU+T,IACzBC,UAAWhU,UAAUgU,IACrBC,UAAWjU,UAAUiU,IACrBC,SAAUlU,UAAUkU,IACpBnC,MAAO/R,UAAU+R,IACjBC,SAAUhS,UAAUgS,IACpBC,MAAOjS,UAAUiS,IACjBC,MAAOlS,UAAUkS,IACjBC,MAAOnS,UAAUmS,IACjBC,MAAOpS,UAAUoS,IACjBC,MAAOrS,UAAUqS,IACjBC,MAAOtS,UAAUsS,IACjBC,YAAavS,UAAUuS,IACvBC,eAAgBxS,UAAUwS,IAC1BC,OAAQzS,UAAUyS,IAClB7H,OAAQ5K,UAAU4K,IAClB6I,OAAQzT,UAAUyT,IAClBE,YAAa3T,UAAU2T,IACvBC,WAAY5T,UAAU4T,IACtBQ,MAAOpU,UAAUoU,IACjBD,OAAQnU,UAAUmU,IAClBN,OAAQ7T,UAAU6T,IAClBoC,aAAcjW,UAAUiW,IACxBC,UAAWlW,UAAUkW,IACrBI,UAAWtW,UAAUsW,IACrBC,UAAWvW,UAAUuW,IACrBC,UAAWxW,UAAUwW,IACrBE,eAAgB1W,UAAU0W,IAC1BD,cAAezW,UAAUyW,IACzBE,UAAW3W,UAAU2W,IACrBC,gBAAiB5W,UAAU4W,IAC3BC,iBAAkB7W,UAAU6W,IAC5BC,aAAc9W,UAAU8W,IACxBC,aAAc/W,UAAU+W,IACxBC,YAAahX,UAAUgX,IACvBvH,sBAAuBzP,UAAUyP,IACjCC,mBAAoB1P,UAAU0P,IAC9BC,sBAAuB3P,UAAU2P,IACjCC,sBAAuB5P,UAAU4P,IACjC2E,QAASvU,UAAUuU,IACnBG,UAAW1U,UAAU0U,IACrBO,WAAYjV,UAAUiV,IACtBE,iBAAkBnV,UAAUmV,IAC5BE,kBAAmBrV,UAAUqV,IAC7BE,kBAAmBvV,UAAUuV,IAC7BC,mBAAoBxV,UAAUwV,IAC9BC,eAAgBzV,UAAUyV,IAC1BG,gBAAiB5V,UAAU4V,IAC3B0C,aAActY,UAAUsY,IACxBrW,SAAUjC,UAAUiC,IACpBC,gBAAiBlC,UAAUkC,MAKhBsiB,GAAS,IAAIjG,GACzB,QACA,uBACA,CACCtsB,MAAOysB,aACP9sB,MAAO+sB,aACP5sB,QAASO,GACTF,QAASkD,KAKEmvB,GAAS,IAAIlG,GACzB,QACA,+CACA,CACCtnB,MAAO4K,GACP6iB,IAAK7I,KACL8I,IAAKzI,OAKI3Q,GAAW,CACrB5gB,KAAMkF,OACN2N,MAAOqB,OACPpU,IAAKwU,OACAK,SACEE,GACPiD,KAAM/C,GACN3P,IAAK6P,GACLglB,KAAMpkB,GACN5V,KAAMuU,GACNzX,IAAKmY,KACLvT,KAAM+N,MACNwqB,OAAQzf,QACR0f,IAAKzjB,KACL0jB,IAAKxjB,KACLyjB,IAAKpI,KACL1wB,QAAS6U,SACTG,QAASD,SACTG,IAAKD,KACL8jB,YAAazjB,aACb0jB,UAAWzjB,WACX0jB,OAAQzjB,QACR0jB,OAAQhlB,QACRilB,MAAOhlB,OACPilB,QAAShlB,SACTuf,MAAOtf,OACPglB,OAAQjyB,QACRkyB,WAAY9xB,YACZwnB,QAAS/nB,SACTsyB,YAAavxB,aACbwxB,aAAcpxB,cACdqxB,WAAY3jB,YACZ4jB,WAAYzjB,YACZ0jB,OAAQhxB,QACRixB,MAAO7wB,OACP8wB,OAAQ/wB,QACRgxB,YAAa5jB,aACb6jB,WAAY5jB,YACZ6jB,OAAQxjB,QACRyjB,SAAUvjB,UACVwjB,QAASnjB,SACTojB,UAAWnjB,WACX2a,IAAKA,IACLC,OAAQA,OACRQ,MAAOA,MACPgI,UAAWjK,WACXE,QAASD,SACTiK,OAAQ/J,QACRgK,YAAa9J,aACb+J,OAAQ9J,QACRpxB,IAAKwxB,KACLhT,KAAMnI,GACN8kB,SAAUjmB,GACVkmB,UAAW7kB,GACX8kB,WAAY7kB,GACZ8kB,IAAK/N,KACLuH,IAAKlD,KACLoD,IAAK7C,KACLoJ,UAAWnV,WACXoV,IAAKhO,KACLiO,IAAKhO,KACLiO,IAAKhO,KACLiO,IAAKhO,KACLiO,IAAK/N,KACLgO,IAAK/N,KACLqI,IAAKpI,KACLkI,IAAK/H,KACL4N,IAAK3N,KACLvb,MAAOwb,OACP2N,KAAM1N,MACN2N,OAAQ1N,QACR2N,MAAOpN,OACP5lB,MAAO+lB,OACPkN,SAAUjN,UACVkN,WAAYjN,YACZkN,SAAUhN,UACVE,OAAQD,QACRgN,UAAW9M,WACX+M,WAAY5M,YACZloB,MAAOooB,OACPta,MAAO0a,OACPE,KAAMD,MACN3xB,IAAK6xB,KACLoM,OAAQnM,QACRoM,MAAOvD,GACPpvB,IAAKmvB,GACLyD,KAAMhE,GACNvnB,SAAU4Z,GACV2F,MAAOyI,YAIa,CACpB,CAAChW,GAAS,QACV,CAACC,GAAW,UACZ,CAACE,GAAY,WACb,CAACE,GAAU,SACX,CAACK,GAAY,WACb,CAACE,GAAkB,iBACnB,CAACC,GAAa,YACd,CAACC,GAAmB,kBACpB,CAACE,GAAuB,UACxB,CAACC,GAAoB,cACrB,CAACC,GAAuB,iBACxB,CAACC,GAAuB,iBACxB,CAACC,GAAS,QACV,CAACE,GAAsB,YACvB,CAACS,GAAS,QACV,CAACE,GAAsB,YACvB,CAACJ,GAAQ,OACT,CAACC,GAAqB,WACtB,CAACI,GAAwB,WACzB,CAACC,GAAQ,OACT,CAACO,GAAQ,OACT,CAACF,GAAQ,OACT,CAACC,GAAW,UACZ,CAACE,GAAO,MACR,CAACI,GAAW,UACZ,CAACC,GAAU,SACX,CAACC,GAAW,UACZ,CAACG,GAAS,QACV,CAACE,GAAO,MACR,CAACC,GAAU,SACX,CAACC,GAAO,MACR,CAACC,GAAO,MACR,CAACC,GAAO,MACR,CAACC,GAAO,MACR,CAACC,GAAO,MACR,CAACC,GAAO,MACR,CAACE,GAAgB,eACjB,CAACD,GAAa,YACd,CAACE,GAAQ,OACT,CAAC7H,GAAQ,OACT,CAAC6I,GAAQ,OACT,CAACE,GAAa,YACd,CAACC,GAAY,WACb,CAACC,GAAQ,OACT,CAACC,GAAc,aACf,CAACC,GAAe,cAChB,CAACC,GAAW,UACZ,CAACC,GAAW,UACZ,CAACC,GAAU,SACX,CAACC,GAAQ,OACT,CAACC,GAAO,MACR,CAAC0B,GAAU,SACX,CAACzB,GAAS,QACV,CAACE,GAAS,QACV,CAACG,GAAW,UACZ,CAACO,GAAY,WACb,CAACE,GAAkB,mBACnB,CAACE,GAAmB,oBACpB,CAACE,GAAmB,oBACpB,CAACC,GAAoB,qBACrB,CAACC,GAAgB,eACjB,CAACG,GAAiB,gBAClB,CAACM,GAAW,UACZ,CAACI,GAAW,UACZ,CAACC,GAAW,UACZ,CAACC,GAAW,UACZ,CAACC,GAAe,cAChB,CAACC,GAAgB,eACjB,CAACC,GAAW,UACZ,CAACC,GAAiB,gBAClB,CAACC,GAAkB,iBACnB,CAACC,GAAc,aACf,CAACC,GAAc,aACf,CAACC,GAAa,YACd,CAACC,GAAa,YACd,CAACI,GAAe,cAChB,CAACC,GAAU,SACX,CAACC,GAAa,YACd,CAACC,GAAsB,aACvB,CAACK,GAAY,WACb,CAACC,GAAc,aACf,CAACC,GAAc,aACf,CAACO,GAAc,aACf,CAACrW,GAAU,+BAIZ,iCADUrR,SAAajE,SAEtBiE,GAAY9D,UAAUR,KAAOK,GAC7B+E,SAAS,sBAAwB/E,GAAMiE,IAIjC,SAASq3B,WAAW32B,MAGtB42B,SAAWA,QAAQC,MACvB,WAcU3a,EAAT,SAASA,KAAK1mB,GAEbshC,EAAMx5B,KAAK9H,IAGH49B,EAAT,SAASA,IAAIlX,EAAM6a,GAElBD,EAAMx5B,KAAK,KAAM4e,EAAM,MACvB3e,EAAKD,KAAKy5B,EAAO,KAGTC,EAAT,SAASA,GAAGxhC,GAEX49B,EAAI59B,EAAG,sBAGCyhC,EAAT,SAASA,MAAMzhC,GAEd49B,EAAI59B,EAAG,kCA/BJ0hC,EAAS,GAGZA,EAAO3uB,QAAQvI,QACK9I,IAAhB8I,EAAImI,SAAyC,OAAhBnI,EAAImI,SACpCnI,EAAMA,EAAImI,gBAKR2uB,EAAQ,GACRv5B,EAAO,SAuBK25B,iBAChB,KADSl3B,UAEJ82B,EAAMpgC,QACTwlB,EAAK,QAEFlc,aAAe8D,IAAI2X,cACvB,KACKE,EAAW3b,EAAI0b,SAASC,SACI,OAA5BA,EAASC,eACZM,EAAK,sBAELA,EAAK,wBACFrP,GAAQ,EACO,MAAZ8O,GAEF9O,EACHA,GAAQ,EAERqP,EAAK,QACN8a,EAAGrb,EAAStgB,KAAOkD,OAAMod,EAAStgB,MAAQ,aAC1CsgB,EAAWA,EAASC,eAErBM,EAAK,YACL8a,EAAGh3B,EAAI0b,SAASve,IAAIgG,MAAQ,IAC5B+Y,EAAK,KACL8a,EAAGh3B,EAAI0b,SAASve,IAAIiG,KAAO,IAC3B8Y,EAAK,WACL8a,EAAGh3B,EAAI0b,SAASU,UAAY,IAC5BF,EAAK,aACL8a,EAAGh3B,EAAI0b,SAASW,SAAW,IAC3BH,EAAK,MACLA,EAAKlc,EAAI0b,SAASK,mBAClBkb,EAAMj3B,EAAI0b,SAASM,aACnBE,EAAKlc,EAAI0b,SAASO,wBAIlB+a,EAAGh3B,EAAIV,YAAYjE,MACnB6gB,EAAK,MACLA,EAAKlc,EAAIqa,YAGXuc,SAAQC,eAAMC,EAAM53B,KAAK,YAAQ3B"}