{"version":3,"file":"ul4.js","sources":["../../src/ul4.js","../../node_modules/blueimp-md5/js/md5.js"],"sourcesContent":["/*!\n * UL4/UL4ON JavaScript Library\n * http://www.livinglogic.de/Python/ul4c/\n * http://www.livinglogic.de/Python/ul4on/\n *\n * Copyright 2011-2021 by LivingLogic AG, Bayreuth/Germany\n * Copyright 2011-2021 by Walter DÃ¶rwald\n *\n * All Rights Reserved\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\n/*jslint vars: true */\n\n// Version of this Javascript package\nimport { version } from '../package.json';\n\nexport { version };\n\n// Version of the UL4 API\n// I.e. this version should be compatible with the Python and Java\n// implementations that support the same API version.\nexport const api_version = \"50\";\n\n\n///\n/// UL4ON\n///\n\nconst _registry = {};\n\nexport const _havemap = (typeof(Map) === \"function\" && typeof(Map.prototype.forEach) === \"function\");\n\nconst _havemapconstructor = (function ()\n{\n\tif (_havemap)\n\t{\n\t\ttry\n\t\t{\n\t\t\tif (new Map([[1, 2]]).size == 1)\n\t\t\t\treturn true;\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t}\n\t}\n\treturn false;\n})();\n\nconst _haveset = (typeof(Set) === \"function\" && typeof(Set.prototype.forEach) === \"function\");\n\nconst _havesetconstructor = (function ()\n{\n\tif (_haveset)\n\t{\n\t\ttry\n\t\t{\n\t\t\tif (new Set([1, 2]).size == 2)\n\t\t\t\treturn true;\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t}\n\t\treturn false;\n\t}\n\telse\n\t\treturn false;\n})();\n\nexport let _makemap;\nexport let _setmap;\nexport let _emptymap;\nexport let _getmap;\n\n// helper functions that work with Maps and objects\nif (_havemap)\n{\n\t_makemap = function _makemap(...items)\n\t{\n\t\tlet map = new Map();\n\n\t\tfor (let [key, value] of items)\n\t\t\tmap.set(key, value);\n\t\treturn map;\n\t};\n\n\t_setmap = function _setmap(map, key, value)\n\t{\n\t\tif (map.__proto__ === Map.prototype)\n\t\t\tmap.set(key, value);\n\t\telse\n\t\t\tmap[key] = value;\n\t};\n\n\t_emptymap = function _emptymap()\n\t{\n\t\treturn new Map();\n\t};\n\n\t_getmap = function _getmap(map, key, value)\n\t{\n\t\tif (map.__proto__ === Map.prototype)\n\t\t\treturn map.get(key);\n\t\telse\n\t\t\treturn map[key];\n\t};\n}\nelse\n{\n\t_makemap = function _makemap(...items)\n\t{\n\t\tlet map = {};\n\n\t\tfor (let [key, value] of items)\n\t\t\tmap[key] = value;\n\t\treturn map;\n\t};\n\n\t_setmap = function _setmap(map, key, value)\n\t{\n\t\tmap[key] = value;\n\t};\n\n\t_emptymap = function _emptymap()\n\t{\n\t\treturn {};\n\t};\n\n\t_getmap = function _getmap(map, key, value)\n\t{\n\t\treturn map[key];\n\t};\n}\n\nexport let _emptyset;\n\n// Function used for making sets, when the Set constructor doesn't work (or we don't have sets)\nif (_haveset)\n{\n\t_emptyset = function _emptyset()\n\t{\n\t\treturn new Set();\n\t};\n}\nelse\n{\n\t_emptyset = function _emptyset()\n\t{\n\t\treturn new _Set();\n\t};\n}\n\nexport let _makeset = function _makeset(...items)\n{\n\tlet set = _emptyset();\n\n\tfor (let item of items)\n\t\tset.add(item);\n\treturn set;\n};\n\n// Register the constructor function ``f`` under the name ``name`` with the UL4ON machinery\nexport function register(name, f)\n{\n\tf.prototype.ul4onname = name;\n\t_registry[name] = f;\n};\n\n// Return a string that contains the object ``obj`` in the UL4ON serialization format\nexport function dumps(obj, indent=null)\n{\n\tlet encoder = new Encoder(indent);\n\tlet output = [];\n\tencoder.dump(obj, output);\n\treturn output.join(\"\");\n};\n\n// Load an object from the string ``dump``.\n// ``dump`` must contain the object in the UL4ON serialization format\n// ``registry`` may be null or a dictionary mapping type names to constructor functions\nexport function loads(dump, registry=null)\n{\n\tlet decoder = new Decoder(registry);\n\treturn decoder.loads(dump);\n};\n\n// Helper class for encoding\nexport class Encoder\n{\n\t// Create a new Encoder object\n\tconstructor(indent=null)\n\t{\n\t\tthis.indent = indent;\n\t\tthis.output = null;\n\t\tthis._level = 0;\n\t\tthis._strings2index = {};\n\t\tthis._ids2index = {};\n\t\tthis._backrefs = 0;\n\t}\n\n\t_line(line, ...args)\n\t{\n\t\tif (this.indent !== null)\n\t\t{\n\t\t\tfor (let i = 0; i < this._level; ++i)\n\t\t\t\tthis.output.push(this.indent);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (this.output.length)\n\t\t\t\tthis.output.push(\" \");\n\t\t}\n\t\tthis.output.push(line);\n\n\t\tif (args.length)\n\t\t{\n\t\t\tlet oldindent = this.indent;\n\t\t\tthis.indent = null;\n\t\t\tfor (let arg of args)\n\t\t\t\tthis.dump(arg);\n\t\t\tthis.indent = oldindent;\n\t\t}\n\n\t\tif (this.indent !== null)\n\t\t\tthis.output.push(\"\\n\");\n\t}\n\n\tdumps(obj)\n\t{\n\t\tlet output = [];\n\t\tthis.dump(obj, output);\n\t\treturn output.join(\"\");\n\t}\n\n\tdump(obj, output=null)\n\t{\n\t\tif (output !== null)\n\t\t{\n\t\t\tthis._level = 0;\n\t\t\tthis.output = output;\n\t\t}\n\t\tif (obj === null)\n\t\t\tthis._line(\"n\");\n\t\telse if (typeof(obj) === \"boolean\")\n\t\t\tthis._line(obj ? \"bT\" : \"bF\");\n\t\telse if (typeof(obj) === \"number\")\n\t\t{\n\t\t\tlet type = (Math.round(obj) == obj) ? \"i\" : \"f\";\n\t\t\tthis._line(type + obj);\n\t\t}\n\t\telse if (typeof(obj) === \"string\")\n\t\t{\n\t\t\tlet index = this._strings2index[obj];\n\t\t\tif (index !== undefined)\n\t\t\t{\n\t\t\t\tthis._line(\"^\" + index);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis._strings2index[obj] = this._backrefs++;\n\t\t\t\tlet dump = _str_repr(obj).replace(\"<\", \"\\\\x3c\");\n\t\t\t\tthis._line(\"S\" + dump);\n\t\t\t}\n\t\t}\n\t\telse if (_iscolor(obj))\n\t\t\tthis._line(\"c\", obj.r(), obj.g(), obj.b(), obj.a());\n\t\telse if (_isdate(obj))\n\t\t\tthis._line(\"x\", obj.year(), obj.month(), obj.day());\n\t\telse if (_isdatetime(obj))\n\t\t\tthis._line(\"z\", obj.getFullYear(), obj.getMonth()+1, obj.getDate(), obj.getHours(), obj.getMinutes(), obj.getSeconds(), obj.getMilliseconds() * 1000);\n\t\telse if (_istimedelta(obj))\n\t\t\tthis._line(\"t\", obj.days(), obj.seconds(), obj.microseconds());\n\t\telse if (_ismonthdelta(obj))\n\t\t\tthis._line(\"m\", obj.months());\n\t\telse if (obj instanceof slice)\n\t\t\tthis._line(\"r\", obj.start, obj.stop);\n\t\telse if (obj.ul4onname && obj.ul4ondump)\n\t\t{\n\t\t\tif (obj.__id__)\n\t\t\t{\n\t\t\t\tlet index = this._ids2index[obj.__id__];\n\t\t\t\tif (index !== undefined)\n\t\t\t\t{\n\t\t\t\t\tthis._line(\"^\" + index);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis._ids2index[obj.__id__] = this._backrefs++;\n\t\t\t}\n\t\t\tif (obj.ul4onid)\n\t\t\t\tthis._line(\"P\", obj.ul4onname, obj.ul4onid);\n\t\t\telse\n\t\t\t\tthis._line(\"O\", obj.ul4onname);\n\t\t\t++this._level;\n\t\t\tobj.ul4ondump(this);\n\t\t\t--this._level;\n\t\t\tthis._line(\")\");\n\t\t}\n\t\telse if (_islist(obj))\n\t\t{\n\t\t\tthis._line(\"l\");\n\t\t\t++this._level;\n\t\t\tfor (let item of obj)\n\t\t\t\tthis.dump(item);\n\t\t\t--this._level;\n\t\t\tthis._line(\"]\");\n\t\t}\n\t\telse if (_ismap(obj))\n\t\t{\n\t\t\tthis._line(\"e\");\n\t\t\t++this._level;\n\t\t\tobj.forEach(function(value, key) {\n\t\t\t\tthis.dump(key);\n\t\t\t\tthis.dump(value);\n\t\t\t}, this);\n\t\t\t--this._level;\n\t\t\tthis._line(\"}\");\n\t\t}\n\t\telse if (_isdict(obj))\n\t\t{\n\t\t\tthis._line(\"d\");\n\t\t\t++this._level;\n\t\t\tfor (let key in obj)\n\t\t\t{\n\t\t\t\tthis.dump(key);\n\t\t\t\tthis.dump(obj[key]);\n\t\t\t}\n\t\t\t--this._level;\n\t\t\tthis._line(\"}\");\n\t\t}\n\t\telse if (_isset(obj))\n\t\t{\n\t\t\tthis._line(\"y\");\n\t\t\t++this._level;\n\t\t\tobj.forEach(function(value) {\n\t\t\t\tthis.dump(value);\n\t\t\t}, this);\n\t\t\t--this._level;\n\t\t\tthis._line(\"}\");\n\t\t}\n\t\telse\n\t\t\tthrow new ValueError(\"can't create UL4ON dump of object \" + _repr(obj));\n\t\tif (output !== null)\n\t\t{\n\t\t\tthis.output = null;\n\t\t}\n\t}\n\n\t__getattr__(attrname)\n\t{\n\t\tlet self = this;\n\t\tswitch (attrname)\n\t\t{\n\t\t\tcase \"dumps\":\n\t\t\t\tlet dumps = this.dumps.bind(this);\n\t\t\t\texpose(dumps, [\"obj\", \"pk\"]);\n\t\t\t\treturn dumps;\n\t\t\tdefault:\n\t\t\t\tthrow new ul4.AttributeError(this, attrname);\n\t\t}\n\t}\n};\n\n// Helper class for decoding\nexport class Decoder\n{\n\t// Creates a new decoder for reading an UL4ON dump\n\tconstructor(registry)\n\t{\n\t\tthis.input = null;\n\t\tthis.pos = 0;\n\t\tthis.backrefs = [];\n\t\tthis.registry = registry === undefined ? null : registry;\n\t\tthis.persistent_objects = {};\n\t\tthis.stack = null; // Use for informative error messages\n\t}\n\n\t// Read a character from the buffer\n\treadchar()\n\t{\n\t\tif (this.pos >= this.input.length)\n\t\t\tthrow new ValueError(\"UL4 decoder at EOF\");\n\t\treturn this.input.charAt(this.pos++);\n\t}\n\n\t// Read a character from the buffer (return null on eof)\n\treadcharoreof()\n\t{\n\t\tif (this.pos >= this.input.length)\n\t\t\treturn null;\n\t\treturn this.input.charAt(this.pos++);\n\t}\n\n\t// Read next not-whitespace character from the buffer\n\treadblackchar()\n\t{\n\t\tlet re_white = /\\s/;\n\n\t\tfor (;;)\n\t\t{\n\t\t\tif (this.pos >= this.input.length)\n\t\t\t\tthrow new ValueError(\"UL4 decoder at EOF at position \" + this.pos + \" with path \" + this.stack.join(\"/\"));\n\t\t\tlet c = this.input.charAt(this.pos++);\n\t\t\tif (!c.match(re_white))\n\t\t\t\treturn c;\n\t\t}\n\t}\n\n\t// Read ``size`` characters from the buffer\n\tread(size)\n\t{\n\t\tif (this.pos+size > this.input.length)\n\t\t\tsize = this.input.length-this.pos;\n\t\tlet result = this.input.substring(this.pos, this.pos+size);\n\t\tthis.pos += size;\n\t\treturn result;\n\t}\n\n\t// \"unread\" one character\n\tbackup()\n\t{\n\t\t--this.pos;\n\t}\n\n\t// Read a number from the buffer\n\treadnumber()\n\t{\n\t\tlet re_digits = /[-+0123456789.eE]/, value = \"\";\n\t\tfor (;;)\n\t\t{\n\t\t\tlet c = this.readcharoreof();\n\t\t\tif (c !== null && c.match(re_digits))\n\t\t\t\tvalue += c;\n\t\t\telse\n\t\t\t{\n\t\t\t\tlet result = parseFloat(value);\n\t\t\t\tif (isNaN(result))\n\t\t\t\t\tthrow new ValueError(\"invalid number, got \" + _repr(\"value\") + \" at position \" + this.pos + \" with path \" + this.stack.join(\"/\"));\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}\n\t}\n\n\t_beginfakeloading()\n\t{\n\t\tlet oldpos = this.backrefs.length;\n\t\tthis.backrefs.push(null);\n\t\treturn oldpos;\n\t}\n\n\t_endfakeloading(oldpos, value)\n\t{\n\t\tthis.backrefs[oldpos] = value;\n\t}\n\n\t_readescape(escapechar, length)\n\t{\n\t\tlet chars = this.read(length);\n\t\tif (chars.length != length)\n\t\t\tthrow new ValueError(\"broken escape \" + _repr(\"\\\\\" + escapechar + chars) + \" at position \" + this.pos + \" with path \" + this.stack.join(\"/\"));\n\t\tlet codepoint = parseInt(chars, 16);\n\t\tif (isNaN(codepoint))\n\t\t\tthrow new ValueError(\"broken escape \" + _repr(\"\\\\\" + escapechar + chars) + \" at position \" + this.pos + \" with path \" + this.stack.join(\"/\"));\n\t\treturn String.fromCharCode(codepoint);\n\t}\n\n\treset()\n\t{\n\t\tthis.pos = 0;\n\t\tthis.stack = [];\n\t\tthis.backrefs = []\n\t}\n\n\tloads(dump)\n\t{\n\t\treturn this.load(dump);\n\t}\n\n\t// Load the next object from the buffer\n\tload(input=null)\n\t{\n\t\tif (input !== null)\n\t\t{\n\t\t\tthis.input = input;\n\t\t\tthis.pos = 0;\n\t\t\tthis.stack = [];\n\t\t}\n\t\tlet typecode = this.readblackchar();\n\t\tlet result;\n\t\tswitch (typecode)\n\t\t{\n\t\t\tcase \"^\":\n\t\t\t\treturn this.backrefs[this.readnumber()];\n\t\t\tcase \"n\":\n\t\t\tcase \"N\":\n\t\t\t\tif (typecode === \"N\")\n\t\t\t\t\tthis.backrefs.push(null);\n\t\t\t\tresult = null;\n\t\t\t\tbreak;\n\t\t\tcase \"b\":\n\t\t\tcase \"B\":\n\t\t\t\tresult = this.readchar();\n\t\t\t\tif (result === \"T\")\n\t\t\t\t\tresult = true;\n\t\t\t\telse if (result === \"F\")\n\t\t\t\t\tresult = false;\n\t\t\t\telse\n\t\t\t\t\tthrow new ValueError(\"wrong value for boolean, expected 'T' or 'F', got \" + _repr(result) + \" at position \" + this.pos + \" with path \" + this.stack.join(\"/\"));\n\t\t\t\tif (typecode === \"B\")\n\t\t\t\t\tthis.backrefs.push(result);\n\t\t\t\tbreak;\n\t\t\tcase \"i\":\n\t\t\tcase \"I\":\n\t\t\tcase \"f\":\n\t\t\tcase \"F\":\n\t\t\t\tresult = this.readnumber();\n\t\t\t\tif (typecode === \"I\" || typecode === \"F\")\n\t\t\t\t\tthis.backrefs.push(result);\n\t\t\t\tbreak;\n\t\t\tcase \"s\":\n\t\t\tcase \"S\":\n\t\t\t\tresult = [];\n\t\t\t\tlet delimiter = this.readblackchar();\n\t\t\t\tfor (;;)\n\t\t\t\t{\n\t\t\t\t\tlet c = this.readchar();\n\t\t\t\t\tif (c == delimiter)\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tif (c == \"\\\\\")\n\t\t\t\t\t{\n\t\t\t\t\t\tlet c2 = this.readchar();\n\t\t\t\t\t\tif (c2 == \"\\\\\")\n\t\t\t\t\t\t\tresult.push(\"\\\\\");\n\t\t\t\t\t\telse if (c2 == \"n\")\n\t\t\t\t\t\t\tresult.push(\"\\n\");\n\t\t\t\t\t\telse if (c2 == \"r\")\n\t\t\t\t\t\t\tresult.push(\"\\r\");\n\t\t\t\t\t\telse if (c2 == \"t\")\n\t\t\t\t\t\t\tresult.push(\"\\t\");\n\t\t\t\t\t\telse if (c2 == \"f\")\n\t\t\t\t\t\t\tresult.push(\"\\u000c\");\n\t\t\t\t\t\telse if (c2 == \"b\")\n\t\t\t\t\t\t\tresult.push(\"\\u0008\");\n\t\t\t\t\t\telse if (c2 == \"a\")\n\t\t\t\t\t\t\tresult.push(\"\\u0007\");\n\t\t\t\t\t\telse if (c2 == \"'\")\n\t\t\t\t\t\t\tresult.push(\"'\");\n\t\t\t\t\t\telse if (c2 == '\"')\n\t\t\t\t\t\t\tresult.push('\"');\n\t\t\t\t\t\telse if (c2 == \"x\")\n\t\t\t\t\t\t\tresult.push(this._readescape(\"x\", 2));\n\t\t\t\t\t\telse if (c2 == \"u\")\n\t\t\t\t\t\t\tresult.push(this._readescape(\"u\", 4));\n\t\t\t\t\t\telse if (c2 == \"U\")\n\t\t\t\t\t\t\tresult.push(this._readescape(\"U\", 8));\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tresult.push(\"\\\\\" + c2);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\tresult.push(c);\n\t\t\t\t}\n\t\t\t\tresult = result.join(\"\");\n\t\t\t\tif (typecode === \"S\")\n\t\t\t\t\tthis.backrefs.push(result);\n\t\t\t\tbreak;\n\t\t\tcase \"c\":\n\t\t\tcase \"C\":\n\t\t\t\tresult = new Color();\n\t\t\t\tif (typecode === \"C\")\n\t\t\t\t\tthis.backrefs.push(result);\n\t\t\t\tresult._r = this.load();\n\t\t\t\tresult._g = this.load();\n\t\t\t\tresult._b = this.load();\n\t\t\t\tresult._a = this.load();\n\t\t\t\tbreak;\n\t\t\tcase \"x\":\n\t\t\tcase \"X\":\n\t\t\t{\n\t\t\t\tlet year = this.load();\n\t\t\t\tlet month = this.load();\n\t\t\t\tlet day = this.load();\n\t\t\t\tresult = new Date_(year, month, day);\n\t\t\t\tif (typecode === \"X\")\n\t\t\t\t\tthis.backrefs.push(result);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase \"z\":\n\t\t\tcase \"Z\":\n\t\t\t\tresult = new Date();\n\t\t\t\tresult.setFullYear(this.load());\n\t\t\t\tresult.setDate(1);\n\t\t\t\tresult.setMonth(this.load() - 1);\n\t\t\t\tresult.setDate(this.load());\n\t\t\t\tresult.setHours(this.load());\n\t\t\t\tresult.setMinutes(this.load());\n\t\t\t\tresult.setSeconds(this.load());\n\t\t\t\tresult.setMilliseconds(this.load()/1000);\n\t\t\t\tif (typecode === \"Z\")\n\t\t\t\t\tthis.backrefs.push(result);\n\t\t\t\tbreak;\n\t\t\tcase \"t\":\n\t\t\tcase \"T\":\n\t\t\t\tresult = new TimeDelta();\n\t\t\t\tresult._days = this.load();\n\t\t\t\tresult._seconds = this.load();\n\t\t\t\tresult._microseconds = this.load();\n\t\t\t\tif (typecode === \"T\")\n\t\t\t\t\tthis.backrefs.push(result);\n\t\t\t\tbreak;\n\t\t\tcase \"r\":\n\t\t\tcase \"R\":\n\t\t\t\tresult = new slice();\n\t\t\t\tif (typecode === \"R\")\n\t\t\t\t\tthis.backrefs.push(result);\n\t\t\t\tresult.start = this.load();\n\t\t\t\tresult.stop = this.load();\n\t\t\t\tbreak;\n\t\t\tcase \"m\":\n\t\t\tcase \"M\":\n\t\t\t\tresult = new MonthDelta();\n\t\t\t\tif (typecode === \"M\")\n\t\t\t\t\tthis.backrefs.push(result);\n\t\t\t\tresult._months = this.load();\n\t\t\t\tbreak;\n\t\t\tcase \"l\":\n\t\t\tcase \"L\":\n\t\t\t\tthis.stack.push(\"list\");\n\t\t\t\tresult = [];\n\t\t\t\tif (typecode === \"L\")\n\t\t\t\t\tthis.backrefs.push(result);\n\t\t\t\tfor (;;)\n\t\t\t\t{\n\t\t\t\t\ttypecode = this.readblackchar();\n\t\t\t\t\tif (typecode === \"]\")\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tthis.backup();\n\t\t\t\t\tresult.push(this.load());\n\t\t\t\t}\n\t\t\t\tthis.stack.pop();\n\t\t\t\tbreak;\n\t\t\tcase \"d\":\n\t\t\tcase \"D\":\n\t\t\tcase \"e\":\n\t\t\tcase \"E\":\n\t\t\t\tif (!_havemap && (typecode == \"e\" || typecode == \"E\"))\n\t\t\t\t\tthrow new ValueError(\"ordered dictionaries are not supported at position \" + this.pos + \" with path \" + this.stack.join(\"/\"));\n\t\t\t\tresult = _emptymap();\n\t\t\t\tthis.stack.push(typecode === \"d\" || typecode === \"D\" ? \"dict\" : \"odict\");\n\t\t\t\tif (typecode === \"D\" || typecode === \"E\")\n\t\t\t\t\tthis.backrefs.push(result);\n\t\t\t\tfor (;;)\n\t\t\t\t{\n\t\t\t\t\ttypecode = this.readblackchar();\n\t\t\t\t\tif (typecode === \"}\")\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tthis.backup();\n\t\t\t\t\tlet key = this.load();\n\t\t\t\t\tlet value = this.load();\n\t\t\t\t\t_setmap(result, key, value);\n\t\t\t\t}\n\t\t\t\tthis.stack.pop();\n\t\t\t\tbreak;\n\t\t\tcase \"y\":\n\t\t\tcase \"Y\":\n\t\t\t\tthis.stack.push(\"set\");\n\t\t\t\tresult = _makeset();\n\t\t\t\tif (typecode === \"Y\")\n\t\t\t\t\tthis.backrefs.push(result);\n\t\t\t\tfor (;;)\n\t\t\t\t{\n\t\t\t\t\ttypecode = this.readblackchar();\n\t\t\t\t\tif (typecode === \"}\")\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tthis.backup();\n\t\t\t\t\tresult.add(this.load());\n\t\t\t\t}\n\t\t\t\tthis.stack.pop();\n\t\t\t\tbreak;\n\t\t\tcase \"o\":\n\t\t\tcase \"O\":\n\t\t\t{\n\t\t\t\tlet oldpos;\n\t\t\t\tif (typecode === \"O\")\n\t\t\t\t\toldpos = this._beginfakeloading();\n\t\t\t\tlet name = this.load();\n\t\t\t\tthis.stack.push(name);\n\t\t\t\tlet constructor;\n\t\t\t\tif (this.registry !== null)\n\t\t\t\t{\n\t\t\t\t\tconstructor = this.registry[name];\n\t\t\t\t\tif (constructor === undefined)\n\t\t\t\t\t\tconstructor = _registry[name];\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tconstructor = _registry[name];\n\t\t\t\tif (constructor === undefined)\n\t\t\t\t\tthrow new ValueError(\"can't load object of type \" + _repr(name) + \" at position \" + this.pos + \" with path \" + this.stack.join(\"/\"));\n\t\t\t\tresult = new constructor();\n\t\t\t\tif (typecode === \"O\")\n\t\t\t\t\tthis._endfakeloading(oldpos, result);\n\t\t\t\tresult.ul4onload(this);\n\t\t\t\ttypecode = this.readblackchar();\n\t\t\t\tif (typecode !== \")\")\n\t\t\t\t\tthrow new ValueError(\"object terminator ')' for object of type '\" + name + \"' expected, got \" + _repr(typecode) + \" at position \" + this.pos + \" with path \" + this.stack.join(\"/\"));\n\t\t\t\tthis.stack.pop();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase \"p\":\n\t\t\tcase \"P\":\n\t\t\t{\n\t\t\t\tlet oldpos;\n\t\t\t\tif (typecode === \"P\")\n\t\t\t\t\toldpos = this._beginfakeloading();\n\t\t\t\tlet name = this.load();\n\t\t\t\tlet id = this.load();\n\t\t\t\tthis.stack.push(name);\n\t\t\t\tlet key = name + \"=\" + id;\n\t\t\t\tresult = this.persistent_objects[key];\n\t\t\t\tif (result === undefined)\n\t\t\t\t{\n\t\t\t\t\tlet constructor;\n\t\t\t\t\tif (this.registry !== null)\n\t\t\t\t\t{\n\t\t\t\t\t\tconstructor = this.registry[name];\n\t\t\t\t\t\tif (constructor === undefined)\n\t\t\t\t\t\t\tconstructor = _registry[name];\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\tconstructor = _registry[name];\n\t\t\t\t\tif (constructor === undefined)\n\t\t\t\t\t\tthrow new ValueError(\"can't load object of type \" + _repr(name) + \" with id \" + _repr(id) + \" at position \" + this.pos + \" with path \" + this.stack.join(\"/\"));\n\t\t\t\t\tresult = new constructor(id);\n\t\t\t\t\tthis.persistent_objects[key] = result;\n\t\t\t\t}\n\t\t\t\tif (typecode === \"P\")\n\t\t\t\t\tthis._endfakeloading(oldpos, result);\n\t\t\t\tresult.ul4onload(this);\n\t\t\t\ttypecode = this.readblackchar();\n\t\t\t\tif (typecode !== \")\")\n\t\t\t\t\tthrow new ValueError(\"object terminator ')' for object of type \" + _repr(name) + \" with id \" + _repr(id) + \" expected, got \" + _repr(typecode) + \" at position \" + this.pos + \" with path \" + this.stack.join(\"/\"));\n\t\t\t\tthis.stack.pop();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdefault:\n\t\t\t\tthrow new ValueError(\"unknown typecode \" + _repr(typecode) + \" at position \" + this.pos + \" with path \" + this.stack.join(\"/\"));\n\t\t}\n\t\tif (input !== null)\n\t\t{\n\t\t\tthis.input = null;\n\t\t\tthis.pos = 0;\n\t\t\tthis.stack = null;\n\t\t}\n\t\treturn result;\n\t}\n\n\t// Return an iterator for loading the content of a object\n\tloadcontent()\n\t{\n\t\tlet self = this;\n\t\treturn {\n\t\t\tnext: function()\n\t\t\t{\n\t\t\t\tlet typecode = self.readblackchar();\n\t\t\t\t// Always \"unread\" the typecode even at the end\n\t\t\t\t// so that at the end of a call to ul4onload()\n\t\t\t\t// the next input is the \"end of object\" marker\n\t\t\t\t// no matter whether ul4onload() uses loadcontent() or not.\n\t\t\t\tself.backup();\n\t\t\t\tif (typecode == \")\")\n\t\t\t\t\treturn {done: true};\n\t\t\t\telse\n\t\t\t\t\treturn {done: false, value: self.load()};\n\t\t\t}\n\t\t};\n\t}\n\n\t__getattr__(attrname)\n\t{\n\t\tswitch (attrname)\n\t\t{\n\t\t\tcase \"loads\":\n\t\t\t\tlet loads = this.loads.bind(this);\n\t\t\t\texpose(loads, [\"dump\", \"p\"]);\n\t\t\t\treturn loads;\n\t\t\tdefault:\n\t\t\t\tthrow new ul4.AttributeError(this, attrname);\n\t\t}\n\t}\n};\n\n\n///\n/// UL4\n///\n\n// REs for parsing JSON\nconst _rvalidchars = /^[\\],:{}\\s]*$/;\nconst _rvalidescape = /\\\\(?:[\"\\\\\\/bfnrt]|u[0-9a-fA-F]{4})/g;\nconst _rvalidtokens = /\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g;\nconst _rvalidbraces = /(?:^|:|,)(?:\\s*\\[)+/g;\n\n/// Helper functions\n\n// Convert a map to an object\nexport function _map2object(obj)\n{\n\tif (_ismap(obj))\n\t{\n\t\tlet newobj = {};\n\t\tobj.forEach(function(value, key){\n\t\t\tif (typeof(key) !== \"string\")\n\t\t\t\tthrow new TypeError(\"keys must be strings\");\n\t\t\tnewobj[key] = value;\n\t\t});\n\t\treturn newobj;\n\t}\n\treturn obj;\n};\n\n// Clip a number to the range [0;max]\nexport function _bound(value, upper)\n{\n\tif (value < 0)\n\t\treturn 0;\n\telse if (value > upper)\n\t\treturn upper;\n\telse\n\t\treturn value;\n};\n\n// Create a pretty stacktrace from an exception\nexport function _stacktrace(exc)\n{\n\tlet output = (exc instanceof Exception ? exc.constructor.name + \": \" : \"\") + exc.toString();\n\tif (exc.context)\n\t\toutput = _stacktrace(exc.context) + \"\\n\\n\" + output;\n\treturn output;\n};\n\n// Call a function ``f`` with UL4 argument handling\nexport function _internal_call(context, f, name, functioncontext, signature, needscontext, needsobject, args, kwargs)\n{\n\tlet finalargs;\n\tif (needsobject)\n\t{\n\t\tif (signature === null)\n\t\t{\n\t\t\tif (args.length)\n\t\t\t\tthrow new ArgumentError(_repr(f) + \" doesn't support positional arguments!\");\n\t\t\tfinalargs = [kwargs];\n\t\t}\n\t\telse\n\t\t\tfinalargs = [signature.bindObject(name, args, kwargs)];\n\t}\n\telse\n\t{\n\t\tif (signature === null)\n\t\t\tthrow new ArgumentError(_repr(f) + \" doesn't support positional arguments!\");\n\t\tfinalargs = signature.bindArray(name, args, kwargs);\n\t}\n\tif (needscontext)\n\t\tfinalargs.unshift(context);\n\treturn f.apply(functioncontext, finalargs);\n};\n\nexport function _callfunction(context, f, args, kwargs)\n{\n\tlet name = f._ul4_name || f.name;\n\tif (f._ul4_signature === undefined || f._ul4_needsobject === undefined || f._ul4_needscontext === undefined)\n\t\tthrow new TypeError(_repr(f) + \" is not callable by UL4\");\n\treturn _internal_call(context, f, name, null, f._ul4_signature, f._ul4_needscontext, f._ul4_needsobject, args, kwargs);\n};\n\nexport function _callobject(context, obj, args, kwargs)\n{\n\tif (obj._ul4_callsignature === undefined || obj._ul4_callneedsobject === undefined || obj._ul4_callneedscontext === undefined)\n\t\tthrow new TypeError(_repr(obj) + \" is not callable by UL4\");\n\treturn _internal_call(context, obj.__call__, obj.name, obj, obj._ul4_callsignature, obj._ul4_callneedscontext, obj._ul4_callneedsobject, args, kwargs);\n};\n\nexport function _callrender(context, obj, args, kwargs)\n{\n\tif (obj._ul4_rendersignature === undefined || obj._ul4_renderneedsobject === undefined || obj._ul4_renderneedscontext === undefined)\n\t\tthrow new TypeError(_repr(obj) + \" is not renderable by UL4\");\n\treturn _internal_call(context, obj.__render__, obj.name, obj, obj._ul4_rendersignature, obj._ul4_renderneedscontext, obj._ul4_renderneedsobject, args, kwargs);\n};\n\nexport function _call(context, f, args, kwargs)\n{\n\tif (typeof(f) === \"function\")\n\t\treturn _callfunction(context, f, args, kwargs);\n\telse if (f && typeof(f.__call__) === \"function\")\n\t\treturn _callobject(context, f, args, kwargs);\n\telse\n\t\tthrow new TypeError(_type(f) + \" is not callable\");\n};\n\nexport function _unpackvar(lvalue, value)\n{\n\tif (!_islist(lvalue))\n\t\treturn [[lvalue, value]];\n\telse\n\t{\n\t\tlet newvalue = [];\n\t\tlet iter = _iter(value);\n\n\t\tfor (let i = 0;;++i)\n\t\t{\n\t\t\tlet item = iter.next();\n\n\t\t\tif (item.done)\n\t\t\t{\n\t\t\t\tif (i === lvalue.length)\n\t\t\t\t\tbreak;\n\t\t\t\telse\n\t\t\t\t\tthrow new ValueError(\"need \" + lvalue.length + \" value\" + (lvalue.length === 1 ? \"\" : \"s\") + \" to unpack, got \" + i);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (i < lvalue.length)\n\t\t\t\t\tnewvalue = newvalue.concat(_unpackvar(lvalue[i], item.value));\n\t\t\t\telse\n\t\t\t\t\tthrow new ValueError(\"too many values to unpack (expected \" + lvalue.length + \")\");\n\t\t\t}\n\t\t}\n\t\treturn newvalue;\n\t}\n};\n\nexport function _formatsource(out)\n{\n\tlet finalout = [];\n\tlet level = 0, needlf = false;\n\tfor (let part of out)\n\t{\n\t\tif (typeof(part) === \"number\")\n\t\t{\n\t\t\tlevel += part;\n\t\t\tneedlf = true;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (needlf)\n\t\t\t{\n\t\t\t\tfinalout.push(\"\\n\");\n\t\t\t\tfor (let j = 0; j < level; ++j)\n\t\t\t\t\tfinalout.push(\"\\t\");\n\t\t\t\tneedlf = false;\n\t\t\t}\n\t\t\tfinalout.push(part);\n\t\t}\n\t}\n\tif (needlf)\n\t\tfinalout.push(\"\\n\");\n\treturn finalout.join(\"\");\n};\n\n// Return a prefix of a location in source code\nfunction _sourceprefix(source, pos)\n{\n\tlet outerstartpos = pos;\n\tlet innerstartpos = outerstartpos;\n\n\tlet maxprefix = 40;\n\tlet preprefix = \"\\u2026\";\n\twhile (maxprefix > 0)\n\t{\n\t\t// We arrived at the start of the source code\n\t\tif (outerstartpos === 0)\n\t\t{\n\t\t\tpreprefix = \"\";\n\t\t\tbreak;\n\t\t}\n\t\t// We arrived at the start of the line\n\t\tif (source.charAt(outerstartpos-1) === \"\\n\")\n\t\t{\n\t\t\tpreprefix = \"\";\n\t\t\tbreak;\n\t\t}\n\t\t--maxprefix;\n\t\t--outerstartpos;\n\t}\n\treturn preprefix + source.substring(outerstartpos, innerstartpos);\n}\n\n// Return a suffix of a location in source code\nfunction _sourcesuffix(source, pos)\n{\n\tlet outerstoppos = pos;\n\tlet innerstoppos = outerstoppos;\n\n\tlet maxsuffix = 40;\n\tlet postsuffix = \"\\u2026\";\n\twhile (maxsuffix > 0)\n\t{\n\t\t// We arrived at the ed of the source code\n\t\tif (outerstoppos >= source.length)\n\t\t{\n\t\t\tpostsuffix = \"\";\n\t\t\tbreak;\n\t\t}\n\t\t// We arrived at the end of the line\n\t\tif (source.charAt(outerstoppos) === \"\\n\")\n\t\t{\n\t\t\tpostsuffix = \"\";\n\t\t\tbreak;\n\t\t}\n\t\t--maxsuffix;\n\t\t++outerstoppos;\n\t}\n\treturn source.substring(innerstoppos, outerstoppos) + postsuffix;\n}\n\n// Return line and column number of a location in source code\nfunction _lineColFromPos(source, pos)\n{\n\tlet line = 1\n\tlet col = 1;\n\tlet stop = pos;\n\tfor (let i = 0; i < stop; ++i)\n\t{\n\t\tif (source[i] === \"\\n\")\n\t\t{\n\t\t\t++line;\n\t\t\tcol = 1;\n\t\t}\n\t\telse\n\t\t\t++col;\n\t}\n\treturn [line, col];\n}\n\n// Compare ``obj1`` and ``obj2`` if they have the same value\nexport function _eq(obj1, obj2)\n{\n\tlet numbertypes = [\"boolean\", \"number\"];\n\n\tif (obj1 && typeof(obj1.__eq__) === \"function\")\n\t\treturn obj1.__eq__(obj2);\n\telse if (obj2 && typeof(obj2.__eq__) === \"function\")\n\t\treturn obj2.__eq__(obj1);\n\telse if (obj1 === null)\n\t\treturn obj2 === null;\n\telse if (numbertypes.indexOf(typeof(obj1)) != -1)\n\t{\n\t\tif (numbertypes.indexOf(typeof(obj2)) != -1)\n\t\t\treturn obj1 == obj2;\n\t\telse\n\t\t\treturn false;\n\t}\n\telse if (typeof(obj1) === \"string\")\n\t{\n\t\tif (typeof(obj2) === \"string\")\n\t\t\treturn obj1 == obj2;\n\t\telse\n\t\t\treturn false;\n\t}\n\telse if (_isdatetime(obj1))\n\t{\n\t\tif (_isdatetime(obj2))\n\t\t\treturn obj1.getTime() == obj2.getTime();\n\t\telse\n\t\t\treturn false;\n\t}\n\telse if (_islist(obj1))\n\t{\n\t\tif (_islist(obj2))\n\t\t{\n\t\t\t// Shortcut, if it's the same object\n\t\t\tif (obj1 === obj2)\n\t\t\t\treturn true;\n\t\t\tif (obj1.length != obj2.length)\n\t\t\t\treturn false;\n\t\t\tfor (let i = 0; i < obj1.length; ++i)\n\t\t\t{\n\t\t\t\tif (!_eq(obj1[i], obj2[i])) // This might lead to infinite recursion and a stackoverflow, but it does in all implementations\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\telse\n\t\t\treturn false;\n\t}\n\telse if (_isobject(obj1))\n\t{\n\t\tif (_isobject(obj2))\n\t\t{\n\t\t\t// Shortcut, if it's the same object\n\t\t\tif (obj1 === obj2)\n\t\t\t\treturn true;\n\t\t\t// Test that each attribute of ``obj1`` can also be found in ``obj2`` and has the same value\n\t\t\tfor (let key in obj1)\n\t\t\t{\n\t\t\t\tif (obj2.hasOwnProperty(key))\n\t\t\t\t{\n\t\t\t\t\tif (!_eq(obj1[key], obj2[key]))\n\t\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t\t// Test that each attribute of ``obj2`` is also in ``obj1`` (the value has been tested before)\n\t\t\tfor (let key in obj2)\n\t\t\t{\n\t\t\t\tif (!obj1.hasOwnProperty(key))\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\telse if (_ismap(obj2))\n\t\t{\n\t\t\t// Test that each attribute of ``obj1`` can also be found in ``obj2`` and has the same value\n\t\t\tfor (let key in obj1)\n\t\t\t{\n\t\t\t\tif (obj2.has(key))\n\t\t\t\t{\n\t\t\t\t\tif (!_eq(obj1[key], obj2.get(key)))\n\t\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t\t// Test that each attribute of ``obj2`` is also in ``obj1`` (the value has been tested before)\n\t\t\tlet result = true;\n\t\t\tobj2.forEach(function(value, key) {\n\t\t\t\tif (!obj1.hasOwnProperty(key))\n\t\t\t\t\tresult = false;\n\t\t\t}, this);\n\t\t\treturn result;\n\t\t}\n\t\telse\n\t\t\treturn false;\n\t}\n\telse if (_ismap(obj1))\n\t{\n\t\tif (_isobject(obj2))\n\t\t{\n\t\t\t// Test that each attribute of ``obj1`` can also be found in ``obj2`` and has the same value\n\t\t\tobj1.forEach(function(value, key) {\n\t\t\t\tif (!obj2.hasOwnProperty(key))\n\t\t\t\t\treturn false;\n\t\t\t\telse if (!_eq(obj1.get(key), obj2[key]))\n\t\t\t\t\treturn false;\n\t\t\t}, this);\n\t\t\t// Test that each attribute of ``obj2`` is also in ``obj1`` (the value has been tested before)\n\t\t\tfor (let key in obj2)\n\t\t\t{\n\t\t\t\tif (!obj1.has(key))\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\telse if (_ismap(obj2))\n\t\t{\n\t\t\t// Shortcut, if it's the same object\n\t\t\tif (obj1 === obj2)\n\t\t\t\treturn true;\n\t\t\tif (obj1.size != obj2.size)\n\t\t\t\treturn false;\n\t\t\tlet result = true;\n\t\t\t// Test that each attribute of ``obj1`` can also be found in ``obj2`` and has the same value\n\t\t\tobj1.forEach(function(value, key) {\n\t\t\t\tif (!obj2.has(key))\n\t\t\t\t\tresult = false;\n\t\t\t\telse if (!_eq(obj1.get(key), obj2.get(key)))\n\t\t\t\t\tresult = false;\n\t\t\t});\n\t\t\treturn result;\n\t\t}\n\t\telse\n\t\t\treturn false;\n\t}\n\telse if (_isset(obj1))\n\t{\n\t\t// We don't have to test for ``_Set`` as ``_Set`` implements ``__eq__``\n\t\tif (_isset(obj2))\n\t\t{\n\t\t\t// Shortcut, if it's the same object\n\t\t\tif (obj1 === obj2)\n\t\t\t\treturn true;\n\t\t\tif (obj1.size != obj2.size)\n\t\t\t\treturn false;\n\t\t\tlet result = true;\n\t\t\tobj1.forEach(function(value) {\n\t\t\t\tif (!obj2.has(value))\n\t\t\t\t\tresult = false;\n\t\t\t});\n\t\t\treturn result;\n\t\t}\n\t\telse\n\t\t\treturn false;\n\t}\n\telse\n\t\treturn obj1 === obj2;\n};\n\n// Compare ``obj1`` and ``obj2`` if they don't have the same value\nexport function _ne(obj1, obj2)\n{\n\tif (obj1 && typeof(obj1.__ne__) === \"function\")\n\t\treturn obj1.__ne__(obj2);\n\telse if (obj2 && typeof(obj2.__ne__) === \"function\")\n\t\treturn obj2.__ne__(obj1);\n\telse\n\t\treturn !_eq(obj1, obj2);\n};\n\nexport function _unorderable(operator, obj1, obj2)\n{\n\tthrow new TypeError(\"unorderable types: \" + _type(obj1) + \" \" + operator + \" \" + _type(obj2));\n};\n\n// Return:\n// -1 when ``obj1 < obj2``,\n//  0 when ``obj1 == obj2``,\n//  1 when ``obj1 > obj2``,\n//  null when ``obj1`` and ``obj2`` are comparable, but neither of the previous cases holds (only for sets)\n// raise TypeError if objects are uncomparable\n// This the purpose of ``_cmp`` is to support implementation of <, <=, > and >=\n// and dicts/maps are not comparable with the operator ``_cmp`` does not support dicts/maps\n\nexport function _cmp(operator, obj1, obj2)\n{\n\tlet numbertypes = [\"boolean\", \"number\"];\n\n\tif (numbertypes.indexOf(typeof(obj1)) != -1)\n\t{\n\t\tif (numbertypes.indexOf(typeof(obj2)) != -1)\n\t\t\treturn (obj1 > obj2) - (obj1 < obj2);\n\t}\n\telse if (typeof(obj1) === \"string\")\n\t{\n\t\tif (typeof(obj2) === \"string\")\n\t\t\treturn (obj1 > obj2) - (obj1 < obj2);\n\t}\n\telse if (_isdatetime(obj1))\n\t{\n\t\tif (_isdatetime(obj2))\n\t\t{\n\t\t\tlet v1 = obj1.getTime(), v2 = obj2.getTime();\n\t\t\treturn (v1 > v2) - (v1 < v2);\n\t\t}\n\t}\n\telse if (_islist(obj1))\n\t{\n\t\tif (_islist(obj2))\n\t\t{\n\t\t\tif (obj1 === obj2)\n\t\t\t\treturn 0;\n\t\t\tfor (let i = 0; i < obj1.length; ++i)\n\t\t\t{\n\t\t\t\tif (i >= obj2.length)\n\t\t\t\t\treturn 1;\n\t\t\t\tlet res = _cmp(operator, obj1[i], obj2[i]);\n\t\t\t\tif (res)\n\t\t\t\t\treturn res;\n\t\t\t}\n\t\t\treturn obj2.length > obj1.length ? -1 : 0;\n\t\t}\n\t}\n\telse if (_isset(obj1) || _isul4set(obj1))\n\t{\n\t\tif (_isset(obj2) || _isul4set(obj2))\n\t\t{\n\t\t\tlet in1only = false;\n\t\t\tlet in2only = false;\n\n\t\t\tfor (let iter = _iter(obj1);;)\n\t\t\t{\n\t\t\t\tlet item = iter.next();\n\t\t\t\tif (item.done)\n\t\t\t\t\tbreak;\n\t\t\t\tif (!obj2.has(item.value))\n\t\t\t\t{\n\t\t\t\t\tin1only = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (let iter = _iter(obj2);;)\n\t\t\t{\n\t\t\t\tlet item = iter.next();\n\t\t\t\tif (item.done)\n\t\t\t\t\tbreak;\n\t\t\t\tif (!obj1.has(item.value))\n\t\t\t\t{\n\t\t\t\t\tin2only = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (in1only)\n\t\t\t{\n\t\t\t\tif (in2only)\n\t\t\t\t\treturn null;\n\t\t\t\telse\n\t\t\t\t\treturn 1;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (in2only)\n\t\t\t\t\treturn -1;\n\t\t\t\telse\n\t\t\t\t\treturn 0;\n\t\t\t}\n\t\t}\n\t}\n\treturn _unorderable(operator, obj1, obj2);\n};\n\n// Return whether ``obj1 < obj2``\nexport function _lt(obj1, obj2)\n{\n\tlet numbertypes = [\"boolean\", \"number\"];\n\n\tif (obj1 && typeof(obj1.__lt__) === \"function\")\n\t\treturn obj1.__lt__(obj2);\n\telse if (numbertypes.indexOf(typeof(obj1)) != -1)\n\t{\n\t\tif (numbertypes.indexOf(typeof(obj2)) != -1)\n\t\t\treturn obj1 < obj2;\n\t}\n\telse if (typeof(obj1) === \"string\")\n\t{\n\t\tif (typeof(obj2) === \"string\")\n\t\t\treturn obj1 < obj2;\n\t}\n\telse if (_isdatetime(obj1))\n\t{\n\t\tif (_isdatetime(obj2))\n\t\t\treturn obj1.getTime() < obj2.getTime();\n\t}\n\telse if (_islist(obj1))\n\t{\n\t\tif (_islist(obj2))\n\t\t{\n\t\t\tif (obj1 === obj2)\n\t\t\t\treturn false;\n\t\t\tfor (let i = 0; i < obj1.length; ++i)\n\t\t\t{\n\t\t\t\tif (i >= obj2.length)\n\t\t\t\t\treturn false;\n\t\t\t\tlet eq = _eq(obj1[i], obj2[i]);\n\t\t\t\tif (!eq)\n\t\t\t\t\treturn _lt(obj1[i], obj2[i]);\n\t\t\t}\n\t\t\treturn obj1.length < obj2.length;\n\t\t}\n\t}\n\t// FIXME: Set comparison\n\telse if (_isset(obj1))\n\t{\n\t\tif (_isset(obj2))\n\t\t{\n\t\t\tif (_isset(obj2))\n\t\t\t{\n\t\t\t\tfor (let key in obj1)\n\t\t\t\t{\n\t\t\t\t\tif (!obj2.has(obj1[key]))\n\t\t\t\t\t\tin1only = true;\n\t\t\t\t}\n\t\t\t\tfor (let key in obj2)\n\t\t\t\t{\n\t\t\t\t\tif (!obj1.has(obj2[key]))\n\t\t\t\t\t\tin2only = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (_isul4set(obj2))\n\t\t\t{\n\t\t\t\tfor (let key in obj1)\n\t\t\t\t{\n\t\t\t\t\tif (!obj2.items[obj1[key]])\n\t\t\t\t\t\tin1only = true;\n\t\t\t\t}\n\t\t\t\tfor (let value in obj2.items)\n\t\t\t\t{\n\t\t\t\t\tif (!obj1.has(value))\n\t\t\t\t\t{\n\t\t\t\t\t\tin2only = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if (_isul4set(obj2))\n\t\t{\n\t\t\tif (_isset(obj2))\n\t\t\t{\n\t\t\t\tfor (let value in obj1.items)\n\t\t\t\t{\n\t\t\t\t\tif (!obj2.has(value))\n\t\t\t\t\t{\n\t\t\t\t\t\tin1only = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (let key in obj2)\n\t\t\t\t{\n\t\t\t\t\tif (!obj1.items[obj2[key]])\n\t\t\t\t\t\tin2only = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (_isul4set(obj2))\n\t\t\t{\n\t\t\t\tfor (let value in obj1.items)\n\t\t\t\t{\n\t\t\t\t\tif (!obj2.items[value])\n\t\t\t\t\t{\n\t\t\t\t\t\tin1only = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (let value in obj2.items)\n\t\t\t\t{\n\t\t\t\t\tif (!obj1.items[value])\n\t\t\t\t\t{\n\t\t\t\t\t\tin2only = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\t_unorderable(operator, obj1, obj2);\n\n\t\tif (in1only)\n\t\t{\n\t\t\tif (in2only)\n\t\t\t\treturn null;\n\t\t\telse\n\t\t\t\treturn 1;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (in2only)\n\t\t\t\treturn -1;\n\t\t\telse\n\t\t\t\treturn 0;\n\t\t}\n\t}\n\t_unorderable(\"<\", obj1, obj2);\n};\n\n// Return whether ``obj1 <= obj2``\nexport function _le(obj1, obj2)\n{\n\tlet numbertypes = [\"boolean\", \"number\"];\n\n\tif (obj1 && typeof(obj1.__le__) === \"function\")\n\t\treturn obj1.__le__(obj2);\n\tif (numbertypes.indexOf(typeof(obj1)) != -1)\n\t{\n\t\tif (numbertypes.indexOf(typeof(obj2)) != -1)\n\t\t\treturn obj1 <= obj2;\n\t}\n\telse if (typeof(obj1) === \"string\")\n\t{\n\t\tif (typeof(obj2) === \"string\")\n\t\t\treturn obj1 <= obj2;\n\t}\n\telse if (_isdatetime(obj1))\n\t{\n\t\tif (_isdatetime(obj2))\n\t\t\treturn obj1.getTime() <= obj2.getTime();\n\t}\n\telse if (_islist(obj1))\n\t{\n\t\tif (_islist(obj2))\n\t\t{\n\t\t\tif (obj1 === obj2)\n\t\t\t\treturn true;\n\t\t\tfor (let i = 0; i < obj1.length; ++i)\n\t\t\t{\n\t\t\t\tif (i >= obj2.length)\n\t\t\t\t\treturn false;\n\t\t\t\tlet eq = _eq(obj1[i], obj2[i]);\n\t\t\t\tif (!eq)\n\t\t\t\t\treturn _lt(obj1[i], obj2[i]);\n\t\t\t}\n\t\t\treturn obj1.length <= obj2.length;\n\t\t}\n\t}\n\t// FIXME: Set comparison\n\telse if (_isset(obj1) || _isul4set(obj1))\n\t{\n\t\tlet in1only = false;\n\t\tlet in2only = false;\n\n\t\tif (_isset(obj2))\n\t\t{\n\t\t\tif (_isset(obj2))\n\t\t\t{\n\t\t\t\tobj1.forEach(function(value) {\n\t\t\t\t\tif (!obj2.has(value))\n\t\t\t\t\t\tin1only = true;\n\t\t\t\t});\n\t\t\t\tobj2.forEach(function(value) {\n\t\t\t\t\tif (!obj1.has(value))\n\t\t\t\t\t\tin2only = true;\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if (_isul4set(obj2))\n\t\t\t{\n\t\t\t\tobj1.forEach(function(value) {\n\t\t\t\t\tif (!obj2.items[value])\n\t\t\t\t\t\tin1only = true;\n\t\t\t\t});\n\t\t\t\tfor (let value in obj2.items)\n\t\t\t\t{\n\t\t\t\t\tif (!obj1.has(value))\n\t\t\t\t\t{\n\t\t\t\t\t\tin2only = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if (_isul4set(obj2))\n\t\t{\n\t\t\tif (_isset(obj2))\n\t\t\t{\n\t\t\t\tfor (let value in obj1.items)\n\t\t\t\t{\n\t\t\t\t\tif (!obj2.has(value))\n\t\t\t\t\t{\n\t\t\t\t\t\tin1only = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tobj2.forEach(function(value) {\n\t\t\t\t\tif (!obj1.items[value])\n\t\t\t\t\t\tin2only = true;\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if (_isul4set(obj2))\n\t\t\t{\n\t\t\t\tfor (let value in obj1.items)\n\t\t\t\t{\n\t\t\t\t\tif (!obj2.items[value])\n\t\t\t\t\t{\n\t\t\t\t\t\tin1only = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (let value in obj2.items)\n\t\t\t\t{\n\t\t\t\t\tif (!obj1.items[value])\n\t\t\t\t\t{\n\t\t\t\t\t\tin2only = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\t_unorderable(operator, obj1, obj2);\n\n\t\tif (in1only)\n\t\t{\n\t\t\tif (in2only)\n\t\t\t\treturn null;\n\t\t\telse\n\t\t\t\treturn 1;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (in2only)\n\t\t\t\treturn -1;\n\t\t\telse\n\t\t\t\treturn 0;\n\t\t}\n\t}\n\t_unorderable(\"<=\", obj1, obj2);\n};\n\n// Return whether ``obj1 > obj2``\nexport function _gt(obj1, obj2)\n{\n\tlet numbertypes = [\"boolean\", \"number\"];\n\n\tif (obj1 && typeof(obj1.__gt__) === \"function\")\n\t\treturn obj1.__gt__(obj2);\n\tif (numbertypes.indexOf(typeof(obj1)) != -1)\n\t{\n\t\tif (numbertypes.indexOf(typeof(obj2)) != -1)\n\t\t\treturn obj1 > obj2;\n\t}\n\telse if (typeof(obj1) === \"string\")\n\t{\n\t\tif (typeof(obj2) === \"string\")\n\t\t\treturn obj1 > obj2;\n\t}\n\telse if (_isdatetime(obj1))\n\t{\n\t\tif (_isdatetime(obj2))\n\t\t\treturn obj1.getTime() > obj2.getTime();\n\t}\n\telse if (_islist(obj1))\n\t{\n\t\tif (_islist(obj2))\n\t\t{\n\t\t\tif (obj1 === obj2)\n\t\t\t\treturn false;\n\t\t\tfor (let i = 0; i < obj1.length; ++i)\n\t\t\t{\n\t\t\t\tif (i >= obj2.length)\n\t\t\t\t\treturn true;\n\t\t\t\tlet eq = _eq(obj1[i], obj2[i]);\n\t\t\t\tif (!eq)\n\t\t\t\t\treturn _gt(obj1[i], obj2[i]);\n\t\t\t}\n\t\t\treturn obj1.length > obj2.length;\n\t\t}\n\t}\n\t// FIXME: Set comparison\n\telse if (_isset(obj1) || _isul4set(obj1))\n\t{\n\t\tlet in1only = false;\n\t\tlet in2only = false;\n\n\t\tif (_isset(obj2))\n\t\t{\n\t\t\tif (_isset(obj2))\n\t\t\t{\n\t\t\t\tobj1.forEach(function(value) {\n\t\t\t\t\tif (!obj2.has(value))\n\t\t\t\t\t\tin1only = true;\n\t\t\t\t});\n\t\t\t\tobj2.forEach(function(value) {\n\t\t\t\t\tif (!obj1.has(value))\n\t\t\t\t\t\tin2only = true;\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if (_isul4set(obj2))\n\t\t\t{\n\t\t\t\tobj1.forEach(function(value) {\n\t\t\t\t\tif (!obj2.items[value])\n\t\t\t\t\t\tin1only = true;\n\t\t\t\t});\n\t\t\t\tobj2.forEach(function(value) {\n\t\t\t\t\tif (!obj1.has(value))\n\t\t\t\t\t{\n\t\t\t\t\t\tin2only = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\telse if (_isul4set(obj2))\n\t\t{\n\t\t\tif (_isset(obj2))\n\t\t\t{\n\t\t\t\tfor (let value in obj1.items)\n\t\t\t\t{\n\t\t\t\t\tif (!obj2.has(value))\n\t\t\t\t\t{\n\t\t\t\t\t\tin1only = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tobj2.forEach(function(value) {\n\t\t\t\t\tif (!obj1.items[value])\n\t\t\t\t\t\tin2only = true;\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if (_isul4set(obj2))\n\t\t\t{\n\t\t\t\tfor (let value in obj1.items)\n\t\t\t\t{\n\t\t\t\t\tif (!obj2.items[value])\n\t\t\t\t\t{\n\t\t\t\t\t\tin1only = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (let value in obj2.items)\n\t\t\t\t{\n\t\t\t\t\tif (!obj1.items[value])\n\t\t\t\t\t{\n\t\t\t\t\t\tin2only = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\t_unorderable(operator, obj1, obj2);\n\n\t\tif (in1only)\n\t\t{\n\t\t\tif (in2only)\n\t\t\t\treturn null;\n\t\t\telse\n\t\t\t\treturn 1;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (in2only)\n\t\t\t\treturn -1;\n\t\t\telse\n\t\t\t\treturn 0;\n\t\t}\n\t}\n\t_unorderable(\">\", obj1, obj2);\n};\n\n// Return whether ``obj1 >= obj2``\nexport function _ge(obj1, obj2)\n{\n\tlet numbertypes = [\"boolean\", \"number\"];\n\n\tif (obj1 && typeof(obj1.__ge__) === \"function\")\n\t\treturn obj1.__ge__(obj2);\n\telse if (numbertypes.indexOf(typeof(obj1)) != -1)\n\t{\n\t\tif (numbertypes.indexOf(typeof(obj2)) != -1)\n\t\t\treturn obj1 >= obj2;\n\t}\n\telse if (typeof(obj1) === \"string\")\n\t{\n\t\tif (typeof(obj2) === \"string\")\n\t\t\treturn obj1 >= obj2;\n\t}\n\telse if (_isdatetime(obj1))\n\t{\n\t\tif (_isdatetime(obj2))\n\t\t\treturn obj1.getTime() >= obj2.getTime();\n\t}\n\telse if (_islist(obj1))\n\t{\n\t\tif (_islist(obj2))\n\t\t{\n\t\t\tif (obj1 === obj2)\n\t\t\t\treturn true;\n\t\t\tfor (let i = 0; i < obj1.length; ++i)\n\t\t\t{\n\t\t\t\tif (i >= obj2.length)\n\t\t\t\t\treturn true;\n\t\t\t\tlet eq = _eq(obj1[i], obj2[i]);\n\t\t\t\tif (!eq)\n\t\t\t\t\treturn _gt(obj1[i], obj2[i]);\n\t\t\t}\n\t\t\treturn obj1.length >= obj2.length;\n\t\t}\n\t}\n\t// FIXME: Set comparison\n\telse if (_isset(obj1) || _isul4set(obj1))\n\t{\n\t\tlet in1only = false;\n\t\tlet in2only = false;\n\n\t\tif (_isset(obj2))\n\t\t{\n\t\t\tif (_isset(obj2))\n\t\t\t{\n\t\t\t\tobj1.forEach(function(value) {\n\t\t\t\t\tif (!obj2.has(value))\n\t\t\t\t\t\tin1only = true;\n\t\t\t\t});\n\t\t\t\tobj2.forEach(function(value) {\n\t\t\t\t\tif (!obj1.has(value))\n\t\t\t\t\t\tin2only = true;\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if (_isul4set(obj2))\n\t\t\t{\n\t\t\t\tobj1.forEach(function(value) {\n\t\t\t\t\tif (!obj2.items[value])\n\t\t\t\t\t\tin1only = true;\n\t\t\t\t});\n\t\t\t\tfor (let value in obj2.items)\n\t\t\t\t{\n\t\t\t\t\tif (!obj1.has(value))\n\t\t\t\t\t{\n\t\t\t\t\t\tin2only = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if (_isul4set(obj2))\n\t\t{\n\t\t\tif (_isset(obj2))\n\t\t\t{\n\t\t\t\tfor (let value in obj1.items)\n\t\t\t\t{\n\t\t\t\t\tif (!obj2.has(value))\n\t\t\t\t\t{\n\t\t\t\t\t\tin1only = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tobj2.forEach(function(value, key) {\n\t\t\t\t\tif (!obj1.items[value])\n\t\t\t\t\t\tin2only = true;\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if (_isul4set(obj2))\n\t\t\t{\n\t\t\t\tfor (let value in obj1.items)\n\t\t\t\t{\n\t\t\t\t\tif (!obj2.items[value])\n\t\t\t\t\t{\n\t\t\t\t\t\tin1only = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (let value in obj2.items)\n\t\t\t\t{\n\t\t\t\t\tif (!obj1.items[value])\n\t\t\t\t\t{\n\t\t\t\t\t\tin2only = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\t_unorderable(operator, obj1, obj2);\n\n\t\tif (in1only)\n\t\t{\n\t\t\tif (in2only)\n\t\t\t\treturn null;\n\t\t\telse\n\t\t\t\treturn 1;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (in2only)\n\t\t\t\treturn -1;\n\t\t\telse\n\t\t\t\treturn 0;\n\t\t}\n\t}\n\t_unorderable(\">=\", obj1, obj2);\n};\n\n// Return an iterator for ``obj``\nexport function _iter(obj)\n{\n\tif (typeof(obj) === \"string\" || _islist(obj))\n\t{\n\t\treturn {\n\t\t\tindex: 0,\n\t\t\tnext: function()\n\t\t\t{\n\t\t\t\tif (this.index < obj.length)\n\t\t\t\t\treturn {value: obj[this.index++], done: false};\n\t\t\t\telse\n\t\t\t\t\treturn {done: true};\n\t\t\t}\n\t\t};\n\t}\n\telse if (_isiter(obj))\n\t\treturn obj;\n\telse if (obj !== null && typeof(obj.__iter__) === \"function\")\n\t\treturn obj.__iter__();\n\telse if (_ismap(obj))\n\t{\n\t\tlet keys = [];\n\t\tobj.forEach(function(value, key) {\n\t\t\tkeys.push(key);\n\t\t});\n\t\treturn {\n\t\t\tindex: 0,\n\t\t\tnext: function()\n\t\t\t{\n\t\t\t\tif (this.index >= keys.length)\n\t\t\t\t\treturn {done: true};\n\t\t\t\treturn {value: keys[this.index++], done: false};\n\t\t\t}\n\t\t};\n\t}\n\telse if (_isset(obj))\n\t{\n\t\tlet values = [];\n\t\tobj.forEach(function(item) {\n\t\t\tvalues.push(item);\n\t\t});\n\t\treturn {\n\t\t\tindex: 0,\n\t\t\tnext: function()\n\t\t\t{\n\t\t\t\tif (this.index >= values.length)\n\t\t\t\t\treturn {done: true};\n\t\t\t\treturn {value: values[this.index++], done: false};\n\t\t\t}\n\t\t};\n\t}\n\telse if (_isul4set(obj))\n\t{\n\t\treturn _iter(obj.items);\n\t}\n\telse if (_isobject(obj))\n\t{\n\t\tlet keys = [];\n\t\tfor (let key in obj)\n\t\t\tkeys.push(key);\n\t\treturn {\n\t\t\tindex: 0,\n\t\t\tnext: function()\n\t\t\t{\n\t\t\t\tif (this.index >= keys.length)\n\t\t\t\t\treturn {done: true};\n\t\t\t\treturn {value: keys[this.index++], done: false};\n\t\t\t}\n\t\t};\n\t}\n\tthrow new TypeError(_type(obj) + \" object is not iterable\");\n};\n\nfunction _str_repr(str, ascii)\n{\n\tlet result = \"\";\n\tlet squote = false, dquote = false;\n\n\tfor (let c of str)\n\t{\n\t\tif (c == '\"')\n\t\t{\n\t\t\tdquote = true;\n\t\t\tif (squote)\n\t\t\t\tbreak;\n\t\t}\n\t\telse if (c == \"'\")\n\t\t{\n\t\t\tsquote = true;\n\t\t\tif (dquote)\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t// Prefer single quotes: Only use double quotes if the string contains single quotes, but no double quotes\n\tlet quote = (squote && !dquote) ? '\"' : \"'\";\n\n\tfor (let c of str)\n\t{\n\t\tswitch (c)\n\t\t{\n\t\t\tcase '\"':\n\t\t\t\tresult += (quote == c) ? '\\\\\"' : c;\n\t\t\t\tbreak;\n\t\t\tcase \"'\":\n\t\t\t\tresult += (quote == c) ? \"\\\\'\" : c;\n\t\t\t\tbreak;\n\t\t\tcase \"\\\\\":\n\t\t\t\tresult += \"\\\\\\\\\";\n\t\t\t\tbreak;\n\t\t\tcase \"\\t\":\n\t\t\t\tresult += \"\\\\t\";\n\t\t\t\tbreak;\n\t\t\tcase \"\\n\":\n\t\t\t\tresult += \"\\\\n\";\n\t\t\t\tbreak;\n\t\t\tcase \"\\r\":\n\t\t\t\tresult += \"\\\\r\";\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tlet code = c.charCodeAt(0);\n\t\t\t\tlet escape;\n\t\t\t\tif (code < 32)\n\t\t\t\t\tescape = 2;\n\t\t\t\telse if (code < 0x7f)\n\t\t\t\t\tescape = 0;\n\t\t\t\telse if (!ascii && !/[\\u007f-\\u00a0\\u00ad\\u0378-\\u0379\\u0380-\\u0383\\u038b\\u038d\\u03a2\\u0530\\u0557-\\u0558\\u0560\\u0588\\u058b-\\u058c\\u0590\\u05c8-\\u05cf\\u05eb-\\u05ef\\u05f5-\\u0605\\u061c-\\u061d\\u06dd\\u070e-\\u070f\\u074b-\\u074c\\u07b2-\\u07bf\\u07fb-\\u07ff\\u082e-\\u082f\\u083f\\u085c-\\u085d\\u085f-\\u089f\\u08b5-\\u08e2\\u0984\\u098d-\\u098e\\u0991-\\u0992\\u09a9\\u09b1\\u09b3-\\u09b5\\u09ba-\\u09bb\\u09c5-\\u09c6\\u09c9-\\u09ca\\u09cf-\\u09d6\\u09d8-\\u09db\\u09de\\u09e4-\\u09e5\\u09fc-\\u0a00\\u0a04\\u0a0b-\\u0a0e\\u0a11-\\u0a12\\u0a29\\u0a31\\u0a34\\u0a37\\u0a3a-\\u0a3b\\u0a3d\\u0a43-\\u0a46\\u0a49-\\u0a4a\\u0a4e-\\u0a50\\u0a52-\\u0a58\\u0a5d\\u0a5f-\\u0a65\\u0a76-\\u0a80\\u0a84\\u0a8e\\u0a92\\u0aa9\\u0ab1\\u0ab4\\u0aba-\\u0abb\\u0ac6\\u0aca\\u0ace-\\u0acf\\u0ad1-\\u0adf\\u0ae4-\\u0ae5\\u0af2-\\u0af8\\u0afa-\\u0b00\\u0b04\\u0b0d-\\u0b0e\\u0b11-\\u0b12\\u0b29\\u0b31\\u0b34\\u0b3a-\\u0b3b\\u0b45-\\u0b46\\u0b49-\\u0b4a\\u0b4e-\\u0b55\\u0b58-\\u0b5b\\u0b5e\\u0b64-\\u0b65\\u0b78-\\u0b81\\u0b84\\u0b8b-\\u0b8d\\u0b91\\u0b96-\\u0b98\\u0b9b\\u0b9d\\u0ba0-\\u0ba2\\u0ba5-\\u0ba7\\u0bab-\\u0bad\\u0bba-\\u0bbd\\u0bc3-\\u0bc5\\u0bc9\\u0bce-\\u0bcf\\u0bd1-\\u0bd6\\u0bd8-\\u0be5\\u0bfb-\\u0bff\\u0c04\\u0c0d\\u0c11\\u0c29\\u0c3a-\\u0c3c\\u0c45\\u0c49\\u0c4e-\\u0c54\\u0c57\\u0c5b-\\u0c5f\\u0c64-\\u0c65\\u0c70-\\u0c77\\u0c80\\u0c84\\u0c8d\\u0c91\\u0ca9\\u0cb4\\u0cba-\\u0cbb\\u0cc5\\u0cc9\\u0cce-\\u0cd4\\u0cd7-\\u0cdd\\u0cdf\\u0ce4-\\u0ce5\\u0cf0\\u0cf3-\\u0d00\\u0d04\\u0d0d\\u0d11\\u0d3b-\\u0d3c\\u0d45\\u0d49\\u0d4f-\\u0d56\\u0d58-\\u0d5e\\u0d64-\\u0d65\\u0d76-\\u0d78\\u0d80-\\u0d81\\u0d84\\u0d97-\\u0d99\\u0db2\\u0dbc\\u0dbe-\\u0dbf\\u0dc7-\\u0dc9\\u0dcb-\\u0dce\\u0dd5\\u0dd7\\u0de0-\\u0de5\\u0df0-\\u0df1\\u0df5-\\u0e00\\u0e3b-\\u0e3e\\u0e5c-\\u0e80\\u0e83\\u0e85-\\u0e86\\u0e89\\u0e8b-\\u0e8c\\u0e8e-\\u0e93\\u0e98\\u0ea0\\u0ea4\\u0ea6\\u0ea8-\\u0ea9\\u0eac\\u0eba\\u0ebe-\\u0ebf\\u0ec5\\u0ec7\\u0ece-\\u0ecf\\u0eda-\\u0edb\\u0ee0-\\u0eff\\u0f48\\u0f6d-\\u0f70\\u0f98\\u0fbd\\u0fcd\\u0fdb-\\u0fff\\u10c6\\u10c8-\\u10cc\\u10ce-\\u10cf\\u1249\\u124e-\\u124f\\u1257\\u1259\\u125e-\\u125f\\u1289\\u128e-\\u128f\\u12b1\\u12b6-\\u12b7\\u12bf\\u12c1\\u12c6-\\u12c7\\u12d7\\u1311\\u1316-\\u1317\\u135b-\\u135c\\u137d-\\u137f\\u139a-\\u139f\\u13f6-\\u13f7\\u13fe-\\u13ff\\u1680\\u169d-\\u169f\\u16f9-\\u16ff\\u170d\\u1715-\\u171f\\u1737-\\u173f\\u1754-\\u175f\\u176d\\u1771\\u1774-\\u177f\\u17de-\\u17df\\u17ea-\\u17ef\\u17fa-\\u17ff\\u180e-\\u180f\\u181a-\\u181f\\u1878-\\u187f\\u18ab-\\u18af\\u18f6-\\u18ff\\u191f\\u192c-\\u192f\\u193c-\\u193f\\u1941-\\u1943\\u196e-\\u196f\\u1975-\\u197f\\u19ac-\\u19af\\u19ca-\\u19cf\\u19db-\\u19dd\\u1a1c-\\u1a1d\\u1a5f\\u1a7d-\\u1a7e\\u1a8a-\\u1a8f\\u1a9a-\\u1a9f\\u1aae-\\u1aaf\\u1abf-\\u1aff\\u1b4c-\\u1b4f\\u1b7d-\\u1b7f\\u1bf4-\\u1bfb\\u1c38-\\u1c3a\\u1c4a-\\u1c4c\\u1c80-\\u1cbf\\u1cc8-\\u1ccf\\u1cf7\\u1cfa-\\u1cff\\u1df6-\\u1dfb\\u1f16-\\u1f17\\u1f1e-\\u1f1f\\u1f46-\\u1f47\\u1f4e-\\u1f4f\\u1f58\\u1f5a\\u1f5c\\u1f5e\\u1f7e-\\u1f7f\\u1fb5\\u1fc5\\u1fd4-\\u1fd5\\u1fdc\\u1ff0-\\u1ff1\\u1ff5\\u1fff-\\u200f\\u2028-\\u202f\\u205f-\\u206f\\u2072-\\u2073\\u208f\\u209d-\\u209f\\u20bf-\\u20cf\\u20f1-\\u20ff\\u218c-\\u218f\\u23fb-\\u23ff\\u2427-\\u243f\\u244b-\\u245f\\u2b74-\\u2b75\\u2b96-\\u2b97\\u2bba-\\u2bbc\\u2bc9\\u2bd2-\\u2beb\\u2bf0-\\u2bff\\u2c2f\\u2c5f\\u2cf4-\\u2cf8\\u2d26\\u2d28-\\u2d2c\\u2d2e-\\u2d2f\\u2d68-\\u2d6e\\u2d71-\\u2d7e\\u2d97-\\u2d9f\\u2da7\\u2daf\\u2db7\\u2dbf\\u2dc7\\u2dcf\\u2dd7\\u2ddf\\u2e43-\\u2e7f\\u2e9a\\u2ef4-\\u2eff\\u2fd6-\\u2fef\\u2ffc-\\u3000\\u3040\\u3097-\\u3098\\u3100-\\u3104\\u312e-\\u3130\\u318f\\u31bb-\\u31bf\\u31e4-\\u31ef\\u321f\\u32ff\\u4db6-\\u4dbf\\u9fd6-\\u9fff\\ua48d-\\ua48f\\ua4c7-\\ua4cf\\ua62c-\\ua63f\\ua6f8-\\ua6ff\\ua7ae-\\ua7af\\ua7b8-\\ua7f6\\ua82c-\\ua82f\\ua83a-\\ua83f\\ua878-\\ua87f\\ua8c5-\\ua8cd\\ua8da-\\ua8df\\ua8fe-\\ua8ff\\ua954-\\ua95e\\ua97d-\\ua97f\\ua9ce\\ua9da-\\ua9dd\\ua9ff\\uaa37-\\uaa3f\\uaa4e-\\uaa4f\\uaa5a-\\uaa5b\\uaac3-\\uaada\\uaaf7-\\uab00\\uab07-\\uab08\\uab0f-\\uab10\\uab17-\\uab1f\\uab27\\uab2f\\uab66-\\uab6f\\uabee-\\uabef\\uabfa-\\uabff\\ud7a4-\\ud7af\\ud7c7-\\ud7ca\\ud7fc-\\uf8ff\\ufa6e-\\ufa6f\\ufada-\\ufaff\\ufb07-\\ufb12\\ufb18-\\ufb1c\\ufb37\\ufb3d\\ufb3f\\ufb42\\ufb45\\ufbc2-\\ufbd2\\ufd40-\\ufd4f\\ufd90-\\ufd91\\ufdc8-\\ufdef\\ufdfe-\\ufdff\\ufe1a-\\ufe1f\\ufe53\\ufe67\\ufe6c-\\ufe6f\\ufe75\\ufefd-\\uff00\\uffbf-\\uffc1\\uffc8-\\uffc9\\uffd0-\\uffd1\\uffd8-\\uffd9\\uffdd-\\uffdf\\uffe7\\uffef-\\ufffb\\ufffe-\\uffff]/.test(c))\n\t\t\t\t\tescape = 0;\n\t\t\t\telse if (code <= 0xff)\n\t\t\t\t\tescape = 2;\n\t\t\t\telse if (code <= 0xffff)\n\t\t\t\t\tescape = 4;\n\t\t\t\telse\n\t\t\t\t\tescape = 8;\n\n\t\t\t\tif (escape === 0)\n\t\t\t\t\tresult += c;\n\t\t\t\telse if (escape === 2)\n\t\t\t\t\tresult += \"\\\\x\" + _lpad(code.toString(16), \"0\", 2);\n\t\t\t\telse if (escape === 4)\n\t\t\t\t\tresult += \"\\\\u\" + _lpad(code.toString(16), \"0\", 4);\n\t\t\t\telse\n\t\t\t\t\tresult += \"\\\\U\" + _lpad(code.toString(16), \"0\", 8);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\treturn quote + result + quote;\n};\n\nfunction _date_repr(obj, ascii)\n{\n\tlet year = obj._date.getFullYear();\n\tlet month = obj._date.getMonth()+1;\n\tlet day = obj._date.getDate();\n\tlet result = \"@(\" + year + \"-\" + _lpad(month.toString(), \"0\", 2) + \"-\" + _lpad(day.toString(), \"0\", 2) + \")\";\n\treturn result;\n};\n\nfunction _datetime_repr(obj, ascii)\n{\n\tlet year = obj.getFullYear();\n\tlet month = obj.getMonth()+1;\n\tlet day = obj.getDate();\n\tlet hour = obj.getHours();\n\tlet minute = obj.getMinutes();\n\tlet second = obj.getSeconds();\n\tlet ms = obj.getMilliseconds();\n\tlet result = \"@(\" + year + \"-\" + _lpad(month.toString(), \"0\", 2) + \"-\" + _lpad(day.toString(), \"0\", 2) + \"T\";\n\n\tif (hour || minute || second || ms)\n\t{\n\t\tresult += _lpad(hour.toString(), \"0\", 2) + \":\" + _lpad(minute.toString(), \"0\", 2);\n\t\tif (second || ms)\n\t\t{\n\t\t\tresult += \":\" + _lpad(second.toString(), \"0\", 2);\n\t\t\tif (ms)\n\t\t\t\tresult += \".\" + _lpad(ms.toString(), \"0\", 3) + \"000\";\n\t\t}\n\t}\n\tresult += \")\";\n\n\treturn result;\n};\n\nfunction _map_repr(obj, ascii)\n{\n\tlet v = [];\n\tv.push(\"{\");\n\n\tlet i = 0;\n\tobj.forEach(function(value, key) {\n\t\tif (i++)\n\t\t\tv.push(\", \");\n\t\tv.push(_repr_internal(key, ascii));\n\t\tv.push(\": \");\n\t\tv.push(_repr_internal(value, ascii));\n\t});\n\n\tv.push(\"}\");\n\treturn v.join(\"\");\n};\n\nfunction _list_repr(obj, ascii)\n{\n\tlet v = [];\n\tv.push(\"[\");\n\tlet first = true;\n\tfor (let item of obj)\n\t{\n\t\tif (first)\n\t\t\tfirst = false;\n\t\telse\n\t\t\tv.push(\", \");\n\t\tv.push(_repr_internal(item, ascii));\n\t}\n\tv.push(\"]\");\n\treturn v.join(\"\");\n};\n\nfunction _set_repr(obj, ascii)\n{\n\tlet v = [];\n\tv.push(\"{\");\n\tif (!obj.size)\n\t\tv.push(\"/\");\n\telse\n\t{\n\t\tlet i = 0;\n\t\tobj.forEach(function(value) {\n\t\t\tif (i++)\n\t\t\t\tv.push(\", \");\n\t\t\tv.push(_repr_internal(value, ascii));\n\t\t});\n\t}\n\tv.push(\"}\");\n\treturn v.join(\"\");\n};\n\nfunction _object_repr(obj, ascii)\n{\n\tlet v = [];\n\tv.push(\"{\");\n\tlet i = 0;\n\tfor (let key in obj)\n\t{\n\t\tif (!obj.hasOwnProperty(key))\n\t\t\tcontinue;\n\t\tif (i++)\n\t\t\tv.push(\", \");\n\t\tv.push(_repr_internal(key, ascii));\n\t\tv.push(\": \");\n\t\tv.push(_repr_internal(obj[key], ascii));\n\t}\n\tv.push(\"}\");\n\treturn v.join(\"\");\n};\n\nfunction _repr_internal(obj, ascii)\n{\n\tif (obj === null)\n\t\treturn \"None\";\n\telse if (obj === undefined)\n\t\treturn \"<undefined>\";\n\telse if (obj === false)\n\t\treturn \"False\";\n\telse if (obj === true)\n\t\treturn \"True\";\n\telse if (typeof(obj) === \"string\")\n\t\treturn _str_repr(obj, ascii);\n\telse if (typeof(obj) === \"number\")\n\t\treturn \"\" + obj;\n\telse if (typeof(obj) === \"function\")\n\t\tif (obj._ul4_name || obj.name)\n\t\t\treturn \"<function \" + (obj._ul4_name || obj.name) + \">\";\n\t\telse\n\t\t\treturn \"<anonymous function>\";\n\telse if (_isdate(obj))\n\t\treturn _date_repr(obj, ascii);\n\telse if (_isdatetime(obj))\n\t\treturn _datetime_repr(obj, ascii);\n\telse if (typeof(obj) === \"object\" && typeof(obj.__repr__) === \"function\")\n\t\treturn obj.__repr__();\n\telse if (_islist(obj))\n\t\treturn _list_repr(obj, ascii);\n\telse if (_ismap(obj))\n\t\treturn _map_repr(obj, ascii);\n\telse if (_isset(obj))\n\t\treturn _set_repr(obj, ascii);\n\telse if (_isobject(obj))\n\t\treturn _object_repr(obj, ascii);\n\treturn \"?\";\n};\n\n// Return a string representation of ``obj``: If possible this should be an object literal supported by UL4, otherwise the output should be bracketed with ``<`` and ``>``\nexport function _repr(obj)\n{\n\treturn _repr_internal(obj, false);\n};\n\nexport function _ascii(obj)\n{\n\treturn _repr_internal(obj, true);\n};\n\nfunction _date_str(obj)\n{\n\tlet year = obj._date.getFullYear();\n\tlet month = obj._date.getMonth()+1;\n\tlet day = obj._date.getDate();\n\n\treturn year + \"-\" + _lpad(month.toString(), \"0\", 2) + \"-\" + _lpad(day.toString(), \"0\", 2);\n};\n\nfunction _datetime_str(obj)\n{\n\tlet year = obj.getFullYear();\n\tlet month = obj.getMonth()+1;\n\tlet day = obj.getDate();\n\tlet hour = obj.getHours();\n\tlet minute = obj.getMinutes();\n\tlet second = obj.getSeconds();\n\tlet ms = obj.getMilliseconds();\n\n\tlet result = year + \"-\" + _lpad(month.toString(), \"0\", 2) + \"-\" + _lpad(day.toString(), \"0\", 2) + \" \" + _lpad(hour.toString(), \"0\", 2) + \":\" + _lpad(minute.toString(), \"0\", 2);\n\tif (second || ms)\n\t{\n\t\tresult += \":\" + _lpad(second.toString(), \"0\", 2);\n\t\tif (ms)\n\t\t\tresult += \".\" + _lpad(ms.toString(), \"0\", 3) + \"000\";\n\t}\n\treturn result;\n};\n\nexport function _str(obj)\n{\n\tif (obj === undefined)\n\t\treturn \"\";\n\telse if (obj === null)\n\t\treturn \"\";\n\telse if (obj === false)\n\t\treturn \"False\";\n\telse if (obj === true)\n\t\treturn \"True\";\n\telse if (typeof(obj) === \"string\")\n\t\treturn obj;\n\telse if (typeof(obj) === \"number\")\n\t\treturn obj.toString();\n\telse if (_isdate(obj))\n\t\treturn _date_str(obj);\n\telse if (_isdatetime(obj))\n\t\treturn _datetime_str(obj);\n\telse if (_islist(obj))\n\t\treturn _list_repr(obj);\n\telse if (_isset(obj))\n\t\treturn _set_repr(obj);\n\telse if (_ismap(obj))\n\t\treturn _map_repr(obj);\n\telse if (typeof(obj) === \"object\" && typeof(obj.__str__) === \"function\")\n\t\treturn obj.__str__();\n\telse if (typeof(obj) === \"object\" && typeof(obj.__repr__) === \"function\")\n\t\treturn obj.__repr__();\n\telse if (_isobject(obj))\n\t\treturn _object_repr(obj);\n\telse\n\t\treturn _repr(obj);\n};\n\n// Convert ``obj`` to bool, according to its \"truth value\"\nexport function _bool(obj)\n{\n\tif (obj === undefined || obj === null || obj === false || obj === 0 || obj === \"\")\n\t\treturn false;\n\telse\n\t{\n\t\tif (typeof(obj) === \"object\" && typeof(obj.__bool__) === \"function\")\n\t\t\treturn obj.__bool__();\n\t\tif (_islist(obj))\n\t\t\treturn obj.length !== 0;\n\t\telse if (_ismap(obj) || _isset(obj))\n\t\t\treturn obj.size != 0;\n\t\telse if (_isobject(obj))\n\t\t{\n\t\t\tfor (let key in obj)\n\t\t\t{\n\t\t\t\tif (!obj.hasOwnProperty(key))\n\t\t\t\t\tcontinue;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n};\n\n// Convert ``obj`` to an integer (if ``base`` is given ``obj`` must be a string and ``base`` is the base for the conversion (default is 10))\nexport function _int(obj=0, base=null)\n{\n\tlet result;\n\tif (base !== null)\n\t{\n\t\tif (typeof(obj) !== \"string\" || !_isint(base))\n\t\t\tthrow new TypeError(\"int() requires a string and an integer\");\n\t\tresult = parseInt(obj, base);\n\t\tif (result.toString() == \"NaN\")\n\t\t\tthrow new TypeError(\"invalid literal for int()\");\n\t\treturn result;\n\t}\n\telse\n\t{\n\t\tif (typeof(obj) === \"string\")\n\t\t{\n\t\t\tresult = parseInt(obj);\n\t\t\tif (result.toString() == \"NaN\")\n\t\t\tthrow new TypeError(\"invalid literal for int()\");\n\t\t\treturn result;\n\t\t}\n\t\telse if (typeof(obj) === \"number\")\n\t\t\treturn Math.floor(obj);\n\t\telse if (obj === true)\n\t\t\treturn 1;\n\t\telse if (obj === false)\n\t\t\treturn 0;\n\t\tthrow new TypeError(\"int() argument must be a string or a number\");\n\t}\n};\n\n// Convert ``obj`` to a float\nexport function _float(obj)\n{\n\tif (typeof(obj) === \"string\")\n\t\treturn parseFloat(obj);\n\telse if (typeof(obj) === \"number\")\n\t\treturn obj;\n\telse if (obj === true)\n\t\treturn 1.0;\n\telse if (obj === false)\n\t\treturn 0.0;\n\tthrow new TypeError(\"float() argument must be a string or a number\");\n};\n\n// Convert ``obj`` to a list\nexport function _list(obj)\n{\n\tlet iter = _iter(obj);\n\n\tlet result = [];\n\tfor (;;)\n\t{\n\t\tlet value = iter.next();\n\t\tif (value.done)\n\t\t\treturn result;\n\t\tresult.push(value.value);\n\t}\n};\n\n// Convert ``obj`` to a set\nexport function _set(obj)\n{\n\tlet iter = _iter(obj);\n\n\tlet result = _emptyset();\n\tfor (;;)\n\t{\n\t\tlet value = iter.next();\n\t\tif (value.done)\n\t\t\treturn result;\n\t\tresult.add(value.value);\n\t}\n};\n\n// Return the length of ``sequence``\nexport function _len(sequence)\n{\n\tif (typeof(sequence) === \"string\" || _islist(sequence))\n\t\treturn sequence.length;\n\telse if (_ismap(sequence) || _isset(sequence))\n\t\treturn sequence.size;\n\telse if (_isobject(sequence))\n\t{\n\t\tlet i = 0;\n\t\tfor (let key in sequence)\n\t\t\t++i;\n\t\treturn i;\n\t}\n\tthrow new TypeError(\"object of type '\" + _type(sequence) + \"' has no len()\");\n};\n\nexport function _type(obj)\n{\n\tif (obj === null)\n\t\treturn \"none\";\n\telse if (obj === false || obj === true)\n\t\treturn \"bool\";\n\telse if (obj === undefined)\n\t\treturn \"undefined\";\n\telse if (typeof(obj) === \"number\")\n\t\treturn Math.round(obj) == obj ? \"int\" : \"float\";\n\telse if (typeof(obj) === \"function\")\n\t\treturn \"function\";\n\telse\n\t{\n\t\tif (typeof(obj.ul4type) === \"function\")\n\t\t\treturn obj.ul4type();\n\t\telse\n\t\t\treturn Protocol.get(obj).ul4type(obj);\n\t}\n};\n\n// (this is non-trivial, because it follows the Python semantic of ``-5 % 2`` being ``1``)\nexport function _mod(obj1, obj2)\n{\n\tif (obj1 === null || obj1 === undefined || obj2 === null || obj2 === undefined)\n\t\tthrow new TypeError(_type(obj1) + \" % \" + _type(obj2) + \" is not supported\");\n\n\tlet div = Math.floor(obj1 / obj2);\n\tlet mod = obj1 - div * obj2;\n\n\tif (mod !== 0 && ((obj2 < 0 && mod > 0) || (obj2 > 0 && mod < 0)))\n\t{\n\t\tmod += obj2;\n\t\t--div;\n\t}\n\treturn obj1 - div * obj2;\n};\n\n// Return the attribute with the name ``attrname`` of the object ``obj``\n// If ``obj`` doesn't have such an attribute, return ``default_``\nexport function _getattr(obj, attrname, default_=null)\n{\n\tlet proto = Protocol.get(obj);\n\ttry\n\t{\n\t\treturn proto.getattr(obj, attrname);\n\t}\n\tcatch (exc)\n\t{\n\t\tif (exc instanceof AttributeError && exc.obj === obj)\n\t\t\treturn default_;\n\t\telse\n\t\t\tthrow exc;\n\t}\n};\n\n// Return wether the object ``obj`` has an attribute with the name ``attrname``\nexport function _hasattr(obj, attrname)\n{\n\tlet proto = Protocol.get(obj);\n\treturn proto.hasattr(obj, attrname);\n};\n\n// Return the names of the attributes of the object ``obj`` as a set.\nexport function _dir(obj)\n{\n\tlet proto = Protocol.get(obj);\n\treturn proto.dir();\n};\n\n// Return whether any of the items in ``iterable`` are true\nexport function _any(iterable)\n{\n\tif (typeof(iterable) === \"string\")\n\t{\n\t\tfor (let c of iterable)\n\t\t{\n\t\t\tif (c !== '\\x00')\n\t\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\telse\n\t{\n\t\tfor (let iter = _iter(iterable);;)\n\t\t{\n\t\t\tlet item = iter.next();\n\t\t\tif (item.done)\n\t\t\t\treturn false;\n\t\t\tif (_bool(item.value))\n\t\t\t\treturn true;\n\t\t}\n\t}\n};\n\n// Return whether all of the items in ``iterable`` are true\nexport function _all(iterable)\n{\n\tif (typeof(iterable) === \"string\")\n\t{\n\t\tfor (let c of iterable)\n\t\t{\n\t\t\tif (c === '\\x00')\n\t\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\telse\n\t{\n\t\tfor (let iter = _iter(iterable);;)\n\t\t{\n\t\t\tlet item = iter.next();\n\t\t\tif (item.done)\n\t\t\t\treturn true;\n\t\t\tif (!_bool(item.value))\n\t\t\t\treturn false;\n\t\t}\n\t}\n};\n\n// Check if ``obj`` is undefined\nexport function _isundefined(obj)\n{\n\treturn obj === undefined;\n};\n\n\n// Check if ``obj`` is *not* undefined\nexport function _isdefined(obj)\n{\n\treturn obj !== undefined;\n};\n\n// Check if ``obj`` is ``None``\nexport function _isnone(obj)\n{\n\treturn obj === null;\n};\n\n// Check if ``obj`` is a boolean\nexport function _isbool(obj)\n{\n\treturn typeof(obj) === \"boolean\";\n};\n\n// Check if ``obj`` is a int\nexport function _isint(obj)\n{\n\treturn (typeof(obj) === \"number\") && Math.round(obj) == obj;\n};\n\n// Check if ``obj`` is a float\nexport function _isfloat(obj)\n{\n\treturn (typeof(obj) === \"number\") && Math.round(obj) != obj;\n};\n\n// Check if ``obj`` is a string\nexport function _isstr(obj)\n{\n\treturn typeof(obj) === \"string\";\n};\n\n// Check if ``obj`` is a datetime\nexport function _isdatetime(obj)\n{\n\treturn Object.prototype.toString.call(obj) == \"[object Date]\";\n};\n\nexport function _isdate(obj)\n{\n\treturn (obj instanceof Date_);\n};\n\n// Check if ``obj`` is a color\nexport function _iscolor(obj)\n{\n\treturn (obj instanceof Color);\n};\n\n// Check if ``obj`` is a timedelta object\nexport function _istimedelta(obj)\n{\n\treturn (obj instanceof TimeDelta);\n};\n\n// Check if ``obj`` is a monthdelta object\nexport function _ismonthdelta(obj)\n{\n\treturn (obj instanceof MonthDelta);\n};\n\n// Check if ``obj`` is a template\nexport function _istemplate(obj)\n{\n\treturn (obj instanceof Template || obj instanceof TemplateClosure);\n};\n\n// Check if ``obj`` is a function\nexport function _isfunction(obj)\n{\n\treturn typeof(obj) === \"function\" || (Object.prototype.toString.call(obj) === \"[object Object]\" && (obj instanceof Template || obj instanceof TemplateClosure));\n};\n\n// Check if ``obj`` is a list\nexport function _islist(obj)\n{\n\treturn Object.prototype.toString.call(obj) === \"[object Array]\";\n};\n\n// Check if ``obj`` is a set\nexport function _isset(obj)\n{\n\treturn Object.prototype.toString.call(obj) === \"[object Set]\";\n};\n\n// Check if ``obj`` is an exception (at least a UL4 exception)\nexport function _isexception(obj)\n{\n\treturn (obj instanceof Exception);\n};\n\nexport function _isul4set(obj)\n{\n\treturn (obj instanceof _Set);\n};\n\nexport function _isanyset(obj)\n{\n\treturn (_isset(obj) || _isul4set(obj));\n};\n\n// Check if ``obj`` is an iterator\nexport function _isiter(obj)\n{\n\treturn obj !== null && typeof(obj) === \"object\" && typeof(obj.next) === \"function\";\n};\n\n// Check if ``obj`` is a JS object\nexport function _isobject(obj)\n{\n\treturn Object.prototype.toString.call(obj) === \"[object Object]\" && obj.__type__ === undefined && !(obj instanceof Proto);\n};\n\n// Check if ``obj`` is a ``Map``\nexport let _ismap = _havemap ? function _ismap(obj)\n\t{\n\t\treturn obj !== null && typeof(obj) === \"object\" && typeof(obj.__proto__) === \"object\" && obj.__proto__ === Map.prototype;\n\t}\n:\n\tfunction _ismap(obj)\n\t{\n\t\treturn false;\n\t}\n;\n\n\t// Check if ``obj`` is a dict (i.e. a normal Javascript object or a ``Map``)\nexport let _isdict = _havemap ? function _isdict(obj)\n\t{\n\t\treturn _isobject(obj) || _ismap(obj);\n\t}\n:\n\tfunction _isdict(obj)\n\t{\n\t\treturn _isobject(obj);\n\t}\n;\n\n// Repeat string ``str`` ``rep`` times\nexport function _str_repeat(str, rep)\n{\n\tlet result = \"\";\n\tfor (; rep>0; --rep)\n\t\tresult += str;\n\treturn result;\n};\n\nexport function _list_repeat(list, rep)\n{\n\tlet result = [];\n\tfor (; rep>0; --rep)\n\t\tfor (let item of list)\n\t\t\tresult.push(item);\n\treturn result;\n};\n\nfunction _str_json(str)\n{\n\tlet result = \"\";\n\tfor (let c of str)\n\t{\n\t\tswitch (c)\n\t\t{\n\t\t\tcase \"\\r\":\n\t\t\t\tresult += \"\\\\r\";\n\t\t\t\tbreak;\n\t\t\tcase \"\\n\":\n\t\t\t\tresult += \"\\\\n\";\n\t\t\t\tbreak;\n\t\t\tcase \"\\t\":\n\t\t\t\tresult += \"\\\\t\";\n\t\t\t\tbreak;\n\t\t\tcase \"\\\\\":\n\t\t\t\tresult += \"\\\\\\\\\";\n\t\t\t\tbreak;\n\t\t\tcase '\"':\n\t\t\t\tresult += '\\\\\"';\n\t\t\t\tbreak;\n\t\t\tcase '<':\n\t\t\t\tresult += '\\\\u003c';\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tlet code = c.charCodeAt(0);\n\t\t\t\tif (code >= 32 && code < 128)\n\t\t\t\t\tresult += c;\n\t\t\t\telse\n\t\t\t\t\tresult += \"\\\\u\" + _lpad(code.toString(16), \"0\", 4);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\treturn '\"' + result + '\"';\n};\n\n// Encodes ``obj`` in the Javascript Object Notation (see http://json.org/; with support for dates, colors and templates)\nexport function _asjson(obj)\n{\n\tif (obj === null)\n\t\treturn \"null\";\n\telse if (obj === undefined)\n\t\treturn \"undefined\";\n\telse if (obj === false)\n\t\treturn \"false\";\n\telse if (obj === true)\n\t\treturn \"true\";\n\telse if (typeof(obj) === \"string\")\n\t\treturn _str_json(obj);\n\telse if (typeof(obj) === \"number\")\n\t{\n\t\treturn \"\" + obj;\n\t}\n\telse if (_islist(obj))\n\t{\n\t\tlet v = [];\n\t\tv.push(\"[\");\n\t\tlet first = true;\n\t\tfor (let item of obj)\n\t\t{\n\t\t\tif (first)\n\t\t\t\tfirst = false;\n\t\t\telse\n\t\t\t\tv.push(\", \");\n\t\t\tv.push(_asjson(item));\n\t\t}\n\t\tv.push(\"]\");\n\t\treturn v.join(\"\");\n\t}\n\telse if (_ismap(obj))\n\t{\n\t\tlet v = [];\n\t\tv.push(\"{\");\n\t\tlet first = true;\n\t\tobj.forEach(function(value, key) {\n\t\t\tif (first)\n\t\t\t\tfirst = false;\n\t\t\telse\n\t\t\t\tv.push(\", \");\n\t\t\tv.push(_asjson(key));\n\t\t\tv.push(\": \");\n\t\t\tv.push(_asjson(value));\n\t\t});\n\t\tv.push(\"}\");\n\t\treturn v.join(\"\");\n\t}\n\telse if (_isobject(obj))\n\t{\n\t\tlet v = [];\n\t\tv.push(\"{\");\n\t\tlet first = true;\n\t\tfor (let key in obj)\n\t\t{\n\t\t\tif (first)\n\t\t\t\tfirst = false;\n\t\t\telse\n\t\t\t\tv.push(\", \");\n\t\t\tv.push(_asjson(key));\n\t\t\tv.push(\": \");\n\t\t\tv.push(_asjson(obj[key]));\n\t\t}\n\t\tv.push(\"}\");\n\t\treturn v.join(\"\");\n\t}\n\telse if (_isdate(obj))\n\t{\n\t\treturn \"new ul4.Date_(\" + obj._date.getFullYear() + \", \" + (obj._date.getMonth()+1) + \", \" + obj._date.getDate() + \")\";\n\t}\n\telse if (_isdatetime(obj))\n\t{\n\t\treturn \"new Date(\" + obj.getFullYear() + \", \" + obj.getMonth() + \", \" + obj.getDate() + \", \" + obj.getHours() + \", \" + obj.getMinutes() + \", \" + obj.getSeconds() + \", \" + obj.getMilliseconds() + \")\";\n\t}\n\telse if (_istimedelta(obj))\n\t{\n\t\treturn \"new ul4.TimeDelta(\" + obj._days + \", \" + obj._seconds + \", \" + obj._microseconds + \")\";\n\t}\n\telse if (_ismonthdelta(obj))\n\t{\n\t\treturn \"new ul4.MonthDelta(\" + obj._months + \")\";\n\t}\n\telse if (_iscolor(obj))\n\t{\n\t\treturn \"new ul4.Color(\" + obj._r + \", \" + obj._g + \", \" + obj._b + \", \" + obj._a + \")\";\n\t}\n\telse if (_istemplate(obj))\n\t{\n\t\treturn \"ul4.Template.loads(\" + _repr(obj.dumps()) + \")\";\n\t}\n\tthrow new TypeError(\"asjson() requires a serializable object\");\n};\n\n// Decodes the string ``string`` from the Javascript Object Notation (see http://json.org/) and returns the resulting object\nexport function _fromjson(string)\n{\n\t// The following is from jQuery's parseJSON function\n\tstring = StrProtocol.strip(string);\n\tif (JSON && JSON.parse)\n\t\treturn JSON.parse(string);\n\tif (_rvalidchars.test(string.replace(_rvalidescape, \"@\").replace(_rvalidtokens, \"]\").replace(_rvalidbraces, \"\")))\n\t\treturn (new Function(\"return \" + string))();\n\tthrow new TypeError(\"invalid JSON\");\n};\n\n// Encodes ``obj`` in the UL4 Object Notation format\nexport function _asul4on(obj, indent=null)\n{\n\treturn dumps(obj, indent);\n};\n\n// Decodes the string ``string`` from the UL4 Object Notation format and returns the resulting decoded object\nexport function _fromul4on(string)\n{\n\treturn loads(string);\n};\n\nfunction _format_datetime(obj, fmt, lang)\n{\n\tlet translations = {\n\t\tde: {\n\t\t\tms: [\"Jan\", \"Feb\", \"M\\u00e4r\", \"Apr\", \"Mai\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Dez\"],\n\t\t\tml: [\"Januar\", \"Februar\", \"M\\u00e4rz\", \"April\", \"Mai\", \"Juni\", \"Juli\", \"August\", \"September\", \"Oktober\", \"November\", \"Dezember\"],\n\t\t\tws: [\"So\", \"Mo\", \"Di\", \"Mi\", \"Do\", \"Fr\", \"Sa\"],\n\t\t\twl: [\"Sonntag\", \"Montag\", \"Dienstag\", \"Mittwoch\", \"Donnerstag\", \"Freitag\", \"Samstag\"],\n\t\t\txf: \"%d.%m.%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a %d %b %Y %H:%M:%S\"\n\t\t},\n\t\ten: {\n\t\t\tms: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"],\n\t\t\tml: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n\t\t\tws: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n\t\t\twl: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\n\t\t\txf: \"%m/%d/%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a %d %b %Y %I:%M:%S %p\"\n\t\t},\n\t\tfr: {\n\t\t\tms: [\"janv.\", \"f\\u00e9vr.\", \"mars\", \"avril\", \"mai\", \"juin\", \"juil.\", \"ao\\u00fbt\", \"sept.\", \"oct.\", \"nov.\", \"d\\u00e9c.\"],\n\t\t\tml: [\"janvier\", \"f\\u00e9vrier\", \"mars\", \"avril\", \"mai\", \"juin\", \"juillet\", \"ao\\u00fbt\", \"septembre\", \"octobre\", \"novembre\", \"d\\u00e9cembre\"],\n\t\t\tws: [\"dim.\", \"lun.\", \"mar.\", \"mer.\", \"jeu.\", \"ven.\", \"sam.\"],\n\t\t\twl: [\"dimanche\", \"lundi\", \"mardi\", \"mercredi\", \"jeudi\", \"vendredi\", \"samedi\"],\n\t\t\txf: \"%d/%m/%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a %d %b %Y %H:%M:%S\"\n\t\t},\n\t\tes: {\n\t\t\tms: [\"ene\", \"feb\", \"mar\", \"abr\", \"may\", \"jun\", \"jul\", \"ago\", \"sep\", \"oct\", \"nov\", \"dic\"],\n\t\t\tml: [\"enero\", \"febrero\", \"marzo\", \"abril\", \"mayo\", \"junio\", \"julio\", \"agosto\", \"septiembre\", \"octubre\", \"noviembre\", \"diciembre\"],\n\t\t\tws: [\"dom\", \"lun\", \"mar\", \"mi\\u00e9\", \"jue\", \"vie\", \"s\\u00e1b\"],\n\t\t\twl: [\"domingo\", \"lunes\", \"martes\", \"mi\\u00e9rcoles\", \"jueves\", \"viernes\", \"s\\u00e1bado\"],\n\t\t\txf: \"%d/%m/%y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a %d %b %Y %H:%M:%S\"\n\t\t},\n\t\tit: {\n\t\t\tms: [\"gen\", \"feb\", \"mar\", \"apr\", \"mag\", \"giu\", \"lug\", \"ago\", \"set\", \"ott\", \"nov\", \"dic\"],\n\t\t\tml: [\"gennaio\", \"febbraio\", \"marzo\", \"aprile\", \"maggio\", \"giugno\", \"luglio\", \"agosto\", \"settembre\", \"ottobre\", \"novembre\", \"dicembre\"],\n\t\t\tws: [\"dom\", \"lun\", \"mar\", \"mer\", \"gio\", \"ven\", \"sab\"],\n\t\t\twl: [\"domenica\", \"luned\\u00ec\", \"marted\\u00ec\", \"mercoled\\u00ec\", \"gioved\\u00ec\", \"venerd\\u00ec\", \"sabato\"],\n\t\t\txf: \"%d/%m/%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a %d %b %Y %H:%M:%S\"\n\t\t},\n\t\tda: {\n\t\t\tms: [\"jan\", \"feb\", \"mar\", \"apr\", \"maj\", \"jun\", \"jul\", \"aug\", \"sep\", \"okt\", \"nov\", \"dec\"],\n\t\t\tml: [\"januar\", \"februar\", \"marts\", \"april\", \"maj\", \"juni\", \"juli\", \"august\", \"september\", \"oktober\", \"november\", \"december\"],\n\t\t\tws: [\"s\\u00f8n\", \"man\", \"tir\", \"ons\", \"tor\", \"fre\", \"l\\u00f8r\"],\n\t\t\twl: [\"s\\u00f8ndag\", \"mandag\", \"tirsdag\", \"onsdag\", \"torsdag\", \"fredag\", \"l\\u00f8rdag\"],\n\t\t\txf: \"%d-%m-%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a %d %b %Y %H:%M:%S\"\n\t\t},\n\t\tsv: {\n\t\t\tms: [\"jan\", \"feb\", \"mar\", \"apr\", \"maj\", \"jun\", \"jul\", \"aug\", \"sep\", \"okt\", \"nov\", \"dec\"],\n\t\t\tml: [\"januari\", \"februari\", \"mars\", \"april\", \"maj\", \"juni\", \"juli\", \"augusti\", \"september\", \"oktober\", \"november\", \"december\"],\n\t\t\tws: [\"s\\u00f6n\", \"m\\u00e5n\", \"tis\", \"ons\", \"tor\", \"fre\", \"l\\u00f6r\"],\n\t\t\twl: [\"s\\u00f6ndag\", \"m\\u00e5ndag\", \"tisdag\", \"onsdag\", \"torsdag\", \"fredag\", \"l\\u00f6rdag\"],\n\t\t\txf: \"%Y-%m-%d\",\n\t\t\tXf: \"%H.%M.%S\",\n\t\t\tcf: \"%a %d %b %Y %H.%M.%S\"\n\t\t},\n\t\tnl: {\n\t\t\tms: [\"jan\", \"feb\", \"mrt\", \"apr\", \"mei\", \"jun\", \"jul\", \"aug\", \"sep\", \"okt\", \"nov\", \"dec\"],\n\t\t\tml: [\"januari\", \"februari\", \"maart\", \"april\", \"mei\", \"juni\", \"juli\", \"augustus\", \"september\", \"oktober\", \"november\", \"december\"],\n\t\t\tws: [\"zo\", \"ma\", \"di\", \"wo\", \"do\", \"vr\", \"za\"],\n\t\t\twl: [\"zondag\", \"maandag\", \"dinsdag\", \"woensdag\", \"donderdag\", \"vrijdag\", \"zaterdag\"],\n\t\t\txf: \"%d-%m-%y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a %d %b %Y %H:%M:%S\"\n\t\t},\n\t\tpt: {\n\t\t\tms: [\"Jan\", \"Fev\", \"Mar\", \"Abr\", \"Mai\", \"Jun\", \"Jul\", \"Ago\", \"Set\", \"Out\", \"Nov\", \"Dez\"],\n\t\t\tml: [\"Janeiro\", \"Fevereiro\", \"Mar\\u00e7o\", \"Abril\", \"Maio\", \"Junho\", \"Julho\", \"Agosto\", \"Setembro\", \"Outubro\", \"Novembro\", \"Dezembro\"],\n\t\t\tws: [\"Dom\", \"Seg\", \"Ter\", \"Qua\", \"Qui\", \"Sex\", \"S\\u00e1b\"],\n\t\t\twl: [\"Domingo\", \"Segunda\", \"Ter\\u00e7a\", \"Quarta\", \"Quinta\", \"Sexta\", \"S\\u00e1bado\"],\n\t\t\txf: \"%d-%m-%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a %d %b %Y %H:%M:%S\"\n\t\t},\n\t\tcs: {\n\t\t\tms: [\"led\", \"\\u00fano\", \"b\\u0159e\", \"dub\", \"kv\\u011b\", \"\\u010den\", \"\\u010dec\", \"srp\", \"z\\u00e1\\u0159\", \"\\u0159\\u00edj\", \"lis\", \"pro\"],\n\t\t\tml: [\"leden\", \"\\u00fanor\", \"b\\u0159ezen\", \"duben\", \"kv\\u011bten\", \"\\u010derven\", \"\\u010dervenec\", \"srpen\", \"z\\u00e1\\u0159\\u00ed\", \"\\u0159\\u00edjen\", \"listopad\", \"prosinec\"],\n\t\t\tws: [\"Ne\", \"Po\", \"\\u00dat\", \"St\", \"\\u010ct\", \"P\\u00e1\", \"So\"],\n\t\t\twl: [\"Ned\\u011ble\", \"Pond\\u011bl\\u00ed\", \"\\u00dater\\u00fd\", \"St\\u0159eda\", \"\\u010ctvrtek\", \"P\\u00e1tek\", \"Sobota\"],\n\t\t\txf: \"%d.%m.%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a\\u00a0%d.\\u00a0%B\\u00a0%Y,\\u00a0%H:%M:%S\"\n\t\t},\n\t\tsk: {\n\t\t\tms: [\"jan\", \"feb\", \"mar\", \"apr\", \"m\\u00e1j\", \"j\\u00fan\", \"j\\u00fal\", \"aug\", \"sep\", \"okt\", \"nov\", \"dec\"],\n\t\t\tml: [\"janu\\u00e1r\", \"febru\\u00e1r\", \"marec\", \"apr\\u00edl\", \"m\\u00e1j\", \"j\\u00fan\", \"j\\u00fal\", \"august\", \"september\", \"okt\\u00f3ber\", \"november\", \"december\"],\n\t\t\tws: [\"Ne\", \"Po\", \"Ut\", \"St\", \"\\u0160t\", \"Pi\", \"So\"],\n\t\t\twl: [\"Nede\\u013ea\", \"Pondelok\", \"Utorok\", \"Streda\", \"\\u0160tvrtok\", \"Piatok\", \"Sobota\"],\n\t\t\txf: \"%d.%m.%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a\\u00a0%d.\\u00a0%B\\u00a0%Y,\\u00a0%H:%M:%S\"\n\t\t},\n\t\tpl: {\n\t\t\tms: [\"sty\", \"lut\", \"mar\", \"kwi\", \"maj\", \"cze\", \"lip\", \"sie\", \"wrz\", \"pa\\u017a\", \"lis\", \"gru\"],\n\t\t\tml: [\"stycze\\u0144\", \"luty\", \"marzec\", \"kwiecie\\u0144\", \"maj\", \"czerwiec\", \"lipiec\", \"sierpie\\u0144\", \"wrzesie\\u0144\", \"pa\\u017adziernik\", \"listopad\", \"grudzie\\u0144\"],\n\t\t\tws: [\"nie\", \"pon\", \"wto\", \"\\u015bro\", \"czw\", \"pi\\u0105\", \"sob\"],\n\t\t\twl: [\"niedziela\", \"poniedzia\\u0142ek\", \"wtorek\", \"\\u015broda\", \"czwartek\", \"pi\\u0105tek\", \"sobota\"],\n\t\t\txf: \"%d.%m.%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a, %d %b %Y, %H:%M:%S\"\n\t\t},\n\t\thr: {\n\t\t\tms: [\"Sij\", \"Vel\", \"O\\u017eu\", \"Tra\", \"Svi\", \"Lip\", \"Srp\", \"Kol\", \"Ruj\", \"Lis\", \"Stu\", \"Pro\"],\n\t\t\tml: [\"Sije\\u010danj\", \"Velja\\u010da\", \"O\\u017eujak\", \"Travanj\", \"Svibanj\", \"Lipanj\", \"Srpanj\", \"Kolovoz\", \"Rujan\", \"Listopad\", \"Studeni\", \"Prosinac\"],\n\t\t\tws: [\"Ned\", \"Pon\", \"Uto\", \"Sri\", \"\\u010cet\", \"Pet\", \"Sub\"],\n\t\t\twl: [\"Nedjelja\", \"Ponedjeljak\", \"Utorak\", \"Srijeda\", \"\\u010cetvrtak\", \"Petak\", \"Subota\"],\n\t\t\txf: \"%d.%m.%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a %d %b %Y %H:%M:%S\"\n\t\t},\n\t\tsr: {\n\t\t\tms: [\"\\u0458\\u0430\\u043d\", \"\\u0444\\u0435\\u0431\", \"\\u043c\\u0430\\u0440\", \"\\u0430\\u043f\\u0440\", \"\\u043c\\u0430\\u0458\", \"\\u0458\\u0443\\u043d\", \"\\u0458\\u0443\\u043b\", \"\\u0430\\u0432\\u0433\", \"\\u0441\\u0435\\u043f\", \"\\u043e\\u043a\\u0442\", \"\\u043d\\u043e\\u0432\", \"\\u0434\\u0435\\u0446\"],\n\t\t\tml: [\"\\u0458\\u0430\\u043d\\u0443\\u0430\\u0440\", \"\\u0444\\u0435\\u0431\\u0440\\u0443\\u0430\\u0440\", \"\\u043c\\u0430\\u0440\\u0442\", \"\\u0430\\u043f\\u0440\\u0438\\u043b\", \"\\u043c\\u0430\\u0458\", \"\\u0458\\u0443\\u043d\", \"\\u0458\\u0443\\u043b\", \"\\u0430\\u0432\\u0433\\u0443\\u0441\\u0442\", \"\\u0441\\u0435\\u043f\\u0442\\u0435\\u043c\\u0431\\u0430\\u0440\", \"\\u043e\\u043a\\u0442\\u043e\\u0431\\u0430\\u0440\", \"\\u043d\\u043e\\u0432\\u0435\\u043c\\u0431\\u0430\\u0440\", \"\\u0434\\u0435\\u0446\\u0435\\u043c\\u0431\\u0430\\u0440\"],\n\t\t\tws: [\"\\u043d\\u0435\\u0434\", \"\\u043f\\u043e\\u043d\", \"\\u0443\\u0442\\u043e\", \"\\u0441\\u0440\\u0435\", \"\\u0447\\u0435\\u0442\", \"\\u043f\\u0435\\u0442\", \"\\u0441\\u0443\\u0431\"],\n\t\t\twl: [\"\\u043d\\u0435\\u0434\\u0435\\u0459\\u0430\", \"\\u043f\\u043e\\u043d\\u0435\\u0434\\u0435\\u0459\\u0430\\u043a\", \"\\u0443\\u0442\\u043e\\u0440\\u0430\\u043a\", \"\\u0441\\u0440\\u0435\\u0434\\u0430\", \"\\u0447\\u0435\\u0442\\u0432\\u0440\\u0442\\u0430\\u043a\", \"\\u043f\\u0435\\u0442\\u0430\\u043a\", \"\\u0441\\u0443\\u0431\\u043e\\u0442\\u0430\"],\n\t\t\txf: \"%d.%m.%Y.\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%A, %d. %B %Y. %H:%M:%S\"\n\t\t},\n\t\tro: {\n\t\t\tms: [\"ian\", \"feb\", \"mar\", \"apr\", \"mai\", \"iun\", \"iul\", \"aug\", \"sep\", \"oct\", \"nov\", \"dec\"],\n\t\t\tml: [\"ianuarie\", \"februarie\", \"martie\", \"aprilie\", \"mai\", \"iunie\", \"iulie\", \"august\", \"septembrie\", \"octombrie\", \"noiembrie\", \"decembrie\"],\n\t\t\tws: [\"Du\", \"Lu\", \"Ma\", \"Mi\", \"Jo\", \"Vi\", \"Sb\"],\n\t\t\twl: [\"duminic\\u0103\", \"luni\", \"mar\\u0163i\", \"miercuri\", \"joi\", \"vineri\", \"s\\u00e2mb\\u0103t\\u0103\"],\n\t\t\txf: \"%d.%m.%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a %d %b %Y %H:%M:%S\"\n\t\t},\n\t\thu: {\n\t\t\tms: [\"jan\", \"febr\", \"m\\u00e1rc\", \"\\u00e1pr\", \"m\\u00e1j\", \"j\\u00fan\", \"j\\u00fal\", \"aug\", \"szept\", \"okt\", \"nov\", \"dec\"],\n\t\t\tml: [\"janu\\u00e1r\", \"febru\\u00e1r\", \"m\\u00e1rcius\", \"\\u00e1prilis\", \"m\\u00e1jus\", \"j\\u00fanius\", \"j\\u00falius\", \"augusztus\", \"szeptember\", \"okt\\u00f3ber\", \"november\", \"december\"],\n\t\t\tws: [\"v\", \"h\", \"k\", \"sze\", \"cs\", \"p\", \"szo\"],\n\t\t\twl: [\"vas\\u00e1rnap\", \"h\\u00e9tf\\u0151\", \"kedd\", \"szerda\", \"cs\\u00fct\\u00f6rt\\u00f6k\", \"p\\u00e9ntek\", \"szombat\"],\n\t\t\txf: \"%Y-%m-%d\",\n\t\t\tXf: \"%H.%M.%S\",\n\t\t\tcf: \"%Y. %b. %d., %A, %H.%M.%S\"\n\t\t},\n\t\ttr: {\n\t\t\tms: [\"Oca\", \"\\u015eub\", \"Mar\", \"Nis\", \"May\", \"Haz\", \"Tem\", \"A\\u011fu\", \"Eyl\", \"Eki\", \"Kas\", \"Ara\"],\n\t\t\tml: [\"Ocak\", \"\\u015eubat\", \"Mart\", \"Nisan\", \"May\\u0131s\", \"Haziran\", \"Temmuz\", \"A\\u011fustos\", \"Eyl\\u00fcl\", \"Ekim\", \"Kas\\u0131m\", \"Aral\\u0131k\"],\n\t\t\tws: [\"Paz\", \"Pzt\", \"Sal\", \"\\u00c7r\\u015f\", \"Pr\\u015f\", \"Cum\", \"Cts\"],\n\t\t\twl: [\"Pazar\", \"Pazartesi\", \"Sal\\u0131\", \"\\u00c7ar\\u015famba\", \"Per\\u015fembe\", \"Cuma\", \"Cumartesi\"],\n\t\t\txf: \"%d-%m-%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a %d %b %Y %H:%M:%S\"\n\t\t},\n\t\tru: {\n\t\t\tms: [\"\\u042f\\u043d\\u0432\", \"\\u0424\\u0435\\u0432\", \"\\u041c\\u0430\\u0440\", \"\\u0410\\u043f\\u0440\", \"\\u041c\\u0430\\u0439\", \"\\u0418\\u044e\\u043d\", \"\\u0418\\u044e\\u043b\", \"\\u0410\\u0432\\u0433\", \"\\u0421\\u0435\\u043d\", \"\\u041e\\u043a\\u0442\", \"\\u041d\\u043e\\u044f\", \"\\u0414\\u0435\\u043a\"],\n\t\t\tml: [\"\\u042f\\u043d\\u0432\\u0430\\u0440\\u044c\", \"\\u0424\\u0435\\u0432\\u0440\\u0430\\u043b\\u044c\", \"\\u041c\\u0430\\u0440\\u0442\", \"\\u0410\\u043f\\u0440\\u0435\\u043b\\u044c\", \"\\u041c\\u0430\\u0439\", \"\\u0418\\u044e\\u043d\\u044c\", \"\\u0418\\u044e\\u043b\\u044c\", \"\\u0410\\u0432\\u0433\\u0443\\u0441\\u0442\", \"\\u0421\\u0435\\u043d\\u0442\\u044f\\u0431\\u0440\\u044c\", \"\\u041e\\u043a\\u0442\\u044f\\u0431\\u0440\\u044c\", \"\\u041d\\u043e\\u044f\\u0431\\u0440\\u044c\", \"\\u0414\\u0435\\u043a\\u0430\\u0431\\u0440\\u044c\"],\n\t\t\tws: [\"\\u0412\\u0441\\u043a\", \"\\u041f\\u043d\\u0434\", \"\\u0412\\u0442\\u0440\", \"\\u0421\\u0440\\u0434\", \"\\u0427\\u0442\\u0432\", \"\\u041f\\u0442\\u043d\", \"\\u0421\\u0431\\u0442\"],\n\t\t\twl: [\"\\u0412\\u043e\\u0441\\u043a\\u0440\\u0435\\u0441\\u0435\\u043d\\u044c\\u0435\", \"\\u041f\\u043e\\u043d\\u0435\\u0434\\u0435\\u043b\\u044c\\u043d\\u0438\\u043a\", \"\\u0412\\u0442\\u043e\\u0440\\u043d\\u0438\\u043a\", \"\\u0421\\u0440\\u0435\\u0434\\u0430\", \"\\u0427\\u0435\\u0442\\u0432\\u0435\\u0440\\u0433\", \"\\u041f\\u044f\\u0442\\u043d\\u0438\\u0446\\u0430\", \"\\u0421\\u0443\\u0431\\u0431\\u043e\\u0442\\u0430\"],\n\t\t\txf: \"%d.%m.%Y\",\n\t\t\tXf: \"%H:%M:%S\",\n\t\t\tcf: \"%a %d %b %Y %H:%M:%S\"\n\t\t},\n\t\tzh: {\n\t\t\tms: [\" 1\\u6708\", \" 2\\u6708\", \" 3\\u6708\", \" 4\\u6708\", \" 5\\u6708\", \" 6\\u6708\", \" 7\\u6708\", \" 8\\u6708\", \" 9\\u6708\", \"10\\u6708\", \"11\\u6708\", \"12\\u6708\"],\n\t\t\tml: [\"\\u4e00\\u6708\", \"\\u4e8c\\u6708\", \"\\u4e09\\u6708\", \"\\u56db\\u6708\", \"\\u4e94\\u6708\", \"\\u516d\\u6708\", \"\\u4e03\\u6708\", \"\\u516b\\u6708\", \"\\u4e5d\\u6708\", \"\\u5341\\u6708\", \"\\u5341\\u4e00\\u6708\", \"\\u5341\\u4e8c\\u6708\"],\n\t\t\tws: [\"\\u65e5\", \"\\u4e00\", \"\\u4e8c\", \"\\u4e09\", \"\\u56db\", \"\\u4e94\", \"\\u516d\"],\n\t\t\twl: [\"\\u661f\\u671f\\u65e5\", \"\\u661f\\u671f\\u4e00\", \"\\u661f\\u671f\\u4e8c\", \"\\u661f\\u671f\\u4e09\", \"\\u661f\\u671f\\u56db\", \"\\u661f\\u671f\\u4e94\", \"\\u661f\\u671f\\u516d\"],\n\t\t\txf: \"%Y\\u5e74%b%d\\u65e5\",\n\t\t\tXf: \"%H\\u65f6%M\\u5206%S\\u79d2\",\n\t\t\tcf: \"%Y\\u5e74%b%d\\u65e5 %A %H\\u65f6%M\\u5206%S\\u79d2\"\n\t\t},\n\t\tko: {\n\t\t\tms: [\" 1\\uc6d4\", \" 2\\uc6d4\", \" 3\\uc6d4\", \" 4\\uc6d4\", \" 5\\uc6d4\", \" 6\\uc6d4\", \" 7\\uc6d4\", \" 8\\uc6d4\", \" 9\\uc6d4\", \"10\\uc6d4\", \"11\\uc6d4\", \"12\\uc6d4\"],\n\t\t\tml: [\"1\\uc6d4\", \"2\\uc6d4\", \"3\\uc6d4\", \"4\\uc6d4\", \"5\\uc6d4\", \"6\\uc6d4\", \"7\\uc6d4\", \"8\\uc6d4\", \"9\\uc6d4\", \"10\\uc6d4\", \"11\\uc6d4\", \"12\\uc6d4\"],\n\t\t\tws: [\"\\uc77c\", \"\\uc6d4\", \"\\ud654\", \"\\uc218\", \"\\ubaa9\", \"\\uae08\", \"\\ud1a0\"],\n\t\t\twl: [\"\\uc77c\\uc694\\uc77c\", \"\\uc6d4\\uc694\\uc77c\", \"\\ud654\\uc694\\uc77c\", \"\\uc218\\uc694\\uc77c\", \"\\ubaa9\\uc694\\uc77c\", \"\\uae08\\uc694\\uc77c\", \"\\ud1a0\\uc694\\uc77c\"],\n\t\t\txf: \"%Y\\ub144 %B %d\\uc77c\",\n\t\t\tXf: \"%H\\uc2dc %M\\ubd84 %S\\ucd08\",\n\t\t\tcf: \"%Y\\ub144 %B %d\\uc77c (%a) %p %I\\uc2dc %M\\ubd84 %S\\ucd08\"\n\t\t},\n\t\tja: {\n\t\t\tms: [\" 1\\u6708\", \" 2\\u6708\", \" 3\\u6708\", \" 4\\u6708\", \" 5\\u6708\", \" 6\\u6708\", \" 7\\u6708\", \" 8\\u6708\", \" 9\\u6708\", \"10\\u6708\", \"11\\u6708\", \"12\\u6708\"],\n\t\t\tml: [\"1\\u6708\", \"2\\u6708\", \"3\\u6708\", \"4\\u6708\", \"5\\u6708\", \"6\\u6708\", \"7\\u6708\", \"8\\u6708\", \"9\\u6708\", \"10\\u6708\", \"11\\u6708\", \"12\\u6708\"],\n\t\t\tws: [\"\\u65e5\", \"\\u6708\", \"\\u706b\", \"\\u6c34\", \"\\u6728\", \"\\u91d1\", \"\\u571f\"],\n\t\t\twl: [\"\\u65e5\\u66dc\\u65e5\", \"\\u6708\\u66dc\\u65e5\", \"\\u706b\\u66dc\\u65e5\", \"\\u6c34\\u66dc\\u65e5\", \"\\u6728\\u66dc\\u65e5\", \"\\u91d1\\u66dc\\u65e5\", \"\\u571f\\u66dc\\u65e5\"],\n\t\t\txf: \"%Y\\u5e74%B%d\\u65e5\",\n\t\t\tXf: \"%H\\u6642%M\\u5206%S\\u79d2\",\n\t\t\tcf: \"%Y\\u5e74%B%d\\u65e5 %H\\u6642%M\\u5206%S\\u79d2\"\n\t\t}\n\t};\n\n\tlet translation = translations[lang];\n\n\tlet result = [];\n\tlet inspec = false;\n\tfor (let c of fmt)\n\t{\n\t\tif (inspec)\n\t\t{\n\t\t\tswitch (c)\n\t\t\t{\n\t\t\t\tcase \"a\":\n\t\t\t\t\tc = translation.ws[obj.getDay()];\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"A\":\n\t\t\t\t\tc = translation.wl[obj.getDay()];\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"b\":\n\t\t\t\t\tc = translation.ms[obj.getMonth()];\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"B\":\n\t\t\t\t\tc = translation.ml[obj.getMonth()];\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"c\":\n\t\t\t\t\tc = _format(obj, translation.cf, lang);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"d\":\n\t\t\t\t\tc = _lpad(obj.getDate(), \"0\", 2);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"f\":\n\t\t\t\t\tc = _lpad(obj.getMilliseconds(), \"0\", 3) + \"000\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"H\":\n\t\t\t\t\tc = _lpad(obj.getHours(), \"0\", 2);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"I\":\n\t\t\t\t\tc = _lpad(((obj.getHours()-1) % 12)+1, \"0\", 2);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"j\":\n\t\t\t\t\tc = _lpad(DateTimeProtocol.yearday(obj), \"0\", 3);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"m\":\n\t\t\t\t\tc = _lpad(obj.getMonth()+1, \"0\", 2);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"M\":\n\t\t\t\t\tc = _lpad(obj.getMinutes(), \"0\", 2);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"p\":\n\t\t\t\t\tc = obj.getHours() < 12 ? \"AM\" : \"PM\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"S\":\n\t\t\t\t\tc = _lpad(obj.getSeconds(), \"0\", 2);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"U\":\n\t\t\t\t\tc = _lpad(_week4format(obj, 6), \"0\", 2);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"w\":\n\t\t\t\t\tc = obj.getDay();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"W\":\n\t\t\t\t\tc = _lpad(_week4format(obj, 0), \"0\", 2);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"x\":\n\t\t\t\t\tc = _format(obj, translation.xf, lang);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"X\":\n\t\t\t\t\tc = _format(obj, translation.Xf, lang);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"y\":\n\t\t\t\t\tc = (obj.getFullYear() % 100).toString();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"Y\":\n\t\t\t\t\tc = obj.getFullYear().toString();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"z\":\n\t\t\t\t\t// UTC offset in the form +HHMM or -HHMM\n\t\t\t\t\tc = \"\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"Z\":\n\t\t\t\t\t// Time zone name\n\t\t\t\t\tc = \"\";\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tresult.push(c);\n\t\t\tinspec = false;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (c == \"%\")\n\t\t\t\tinspec = true;\n\t\t\telse\n\t\t\t\tresult.push(c);\n\t\t}\n\t}\n\treturn result.join(\"\");\n};\n\nfunction _format_int(obj, fmt, lang)\n{\n\tlet work = fmt;\n\n\t// Defaults\n\tlet fill = ' ';\n\tlet align = '>'; // '<', '>', '=' or '^'\n\tlet sign = '-'; // '+', '-' or ' '\n\tlet alternate = false;\n\tlet minimumwidth = 0;\n\tlet type = 'd'; // 'b', 'c', 'd', 'o', 'x', 'X' or 'n'\n\n\t// Determine output type\n\tif (/[bcdoxXn]$/.test(work))\n\t{\n\t\ttype = work.substring(work.length-1);\n\t\twork = work.substring(0, work.length-1);\n\t}\n\n\t// Extract minimum width\n\tif (/\\d+$/.test(work))\n\t{\n\t\tlet minimumwidthStr = /\\d+$/.exec(work);\n\t\twork = work.replace(/\\d+$/, \"\");\n\t\tif (/^0/.test(minimumwidthStr))\n\t\t{\n\t\t\talign = '=';\n\t\t\tfill = '0';\n\t\t}\n\t\tminimumwidth = parseInt(minimumwidthStr);\n\t}\n\n\t// Alternate form?\n\tif (/#$/.test(work))\n\t{\n\t\talternate = true;\n\t\twork = work.substring(0, work.length-1);\n\t}\n\n\t// Determine sign\n\tif (/[+ -]$/.test(work))\n\t{\n\t\tif (type == 'c')\n\t\t\tthrow new ValueError(\"sign not allowed for integer format type 'c'\");\n\t\tsign = work.substring(work.length-1);\n\t\twork = work.substring(0, work.length-1);\n\t}\n\n\t// Extract fill and align char\n\tif (work.length >= 3)\n\t\tthrow new ValueError(\"illegal integer format string \" + _repr(fmt));\n\telse if (work.length == 2)\n\t{\n\t\tif (/[<>=^]$/.test(work))\n\t\t{\n\t\t\talign = work[1];\n\t\t\tfill = work[0];\n\t\t}\n\t\telse\n\t\t\tthrow new ValueError(\"illegal integer format string \" + _repr(fmt));\n\t}\n\telse if (work.length == 1)\n\t{\n\t\tif (/^[<>=^]$/.test(work))\n\t\t\talign = work;\n\t\telse\n\t\t\tthrow new ValueError(\"illegal integer format string \" + _repr(fmt));\n\t}\n\n\t// Basic number formatting\n\tlet neg = obj < 0;\n\n\tif (neg)\n\t\tobj = -obj;\n\n\tlet output;\n\tswitch (type)\n\t{\n\t\tcase 'b':\n\t\t\toutput = obj.toString(2);\n\t\t\tbreak;\n\t\tcase 'c':\n\t\t\tif (neg || obj > 65535)\n\t\t\t\tthrow new ValueError(\"value out of bounds for c format\");\n\t\t\toutput = String.fromCharCode(obj);\n\t\t\tbreak;\n\t\tcase 'd':\n\t\t\toutput = obj.toString();\n\t\t\tbreak;\n\t\tcase 'o':\n\t\t\toutput = obj.toString(8);\n\t\t\tbreak;\n\t\tcase 'x':\n\t\t\toutput = obj.toString(16);\n\t\t\tbreak;\n\t\tcase 'X':\n\t\t\toutput = obj.toString(16).toUpperCase();\n\t\t\tbreak;\n\t\tcase 'n':\n\t\t\t// FIXME: locale formatting\n\t\t\toutput = obj.toString();\n\t\t\tbreak;\n\t}\n\n\t// The rest of the formatting\n\tif (align === '=')\n\t{\n\t\tif (neg || sign !== '-')\n\t\t\t--minimumwidth;\n\t\tif (alternate && (type === 'b' || type === 'o' || type === 'x' || type === 'X'))\n\t\t\tminimumwidth -= 2;\n\n\t\tif (output.length < minimumwidth)\n\t\t\toutput = _str_repeat(fill, minimumwidth-output.length) + output;\n\n\t\tif (alternate && (type === 'b' || type === 'o' || type === 'x' || type === 'X'))\n\t\t\toutput = \"0\" + type + output;\n\n\t\tif (neg)\n\t\t\toutput = \"-\" + output;\n\t\telse if (sign != '-')\n\t\t\toutput = sign + output;\n\t}\n\telse\n\t{\n\t\tif (alternate && (type == 'b' || type == 'o' || type == 'x' || type == 'X'))\n\t\t\toutput = \"0\" + type + output;\n\t\tif (neg)\n\t\t\toutput = \"-\" + output;\n\t\telse if (sign != '-')\n\t\t\toutput = sign + output;\n\t\tif (output.length < minimumwidth)\n\t\t{\n\t\t\tif (align == '<')\n\t\t\t\toutput = output + _str_repeat(fill, minimumwidth-output.length);\n\t\t\telse if (align == '>')\n\t\t\t\toutput = _str_repeat(fill, minimumwidth-output.length) + output;\n\t\t\telse // if (align == '^')\n\t\t\t{\n\t\t\t\tlet pad = minimumwidth - output.length;\n\t\t\t\tlet padBefore = Math.floor(pad/2);\n\t\t\t\tlet padAfter = pad-padBefore;\n\t\t\t\toutput = _str_repeat(fill, padBefore) + output + _str_repeat(fill, padAfter);\n\t\t\t}\n\t\t}\n\t}\n\treturn output;\n};\n\n// Format ``obj`` using the format string ``fmt`` in the language ``lang``\nexport function _format(obj, fmt, lang)\n{\n\tif (lang === undefined || lang === null)\n\t\tlang = \"en\";\n\telse\n\t{\n\t\tlet translations = {de: null, en: null, fr: null, es: null, it: null, da: null, sv: null, nl: null, pt: null, cs: null, sk: null, pl: null, hr: null, sr: null, ro: null, hu: null, tr: null, ru: null, zh: null, ko: null, ja: null};\n\t\tlang = lang.toLowerCase();\n\t\tif (translations[lang] === undefined)\n\t\t{\n\t\t\tlang = lang.split(/_/)[0];\n\t\t\tif (translations[lang] === undefined)\n\t\t\t\tlang = \"en\";\n\t\t}\n\t}\n\tif (_isdate(obj))\n\t\treturn _format_datetime(obj._date, fmt, lang);\n\tif (_isdatetime(obj))\n\t\treturn _format_datetime(obj, fmt, lang);\n\telse if (_isint(obj))\n\t\treturn _format_int(obj, fmt, lang);\n\telse if (obj === true)\n\t\treturn _format_int(1, fmt, lang);\n\telse if (obj === false)\n\t\treturn _format_int(0, fmt, lang);\n};\n\nexport function _lpad(string, pad, len)\n{\n\tif (typeof(string) === \"number\")\n\t\tstring = string.toString();\n\twhile (string.length < len)\n\t\tstring = pad + string;\n\treturn string;\n};\n\nexport function _rpad(string, pad, len)\n{\n\tif (typeof(string) === \"number\")\n\t\tstring = string.toString();\n\twhile (string.length < len)\n\t\tstring = string + pad;\n\treturn string;\n};\n\n// This is outside of ``Proto`` on purpose\n// This way reactive frameworks like ``Vue.js`` don't get to see it\n// and complain about mutating render functions when those create new objects.\nlet _nextid = 1;\n\nexport class Proto\n{\n\tconstructor()\n\t{\n\t\tthis.__id__ = _nextid++;\n\t}\n\n\tul4type()\n\t{\n\t\treturn this.constructor.name;\n\t}\n\n\t// equality comparison of objects defaults to identity comparison\n\t__eq__(other)\n\t{\n\t\treturn this === other;\n\t}\n\n\t// To overwrite equality comparison, you only have to overwrite ``__eq__``,\n\t// ``__ne__`` will be synthesized from that\n\t__ne__(other)\n\t{\n\t\treturn !this.__eq__(other);\n\t}\n\n\t// For other comparison operators, each method has to be implemented:\n\t// ``<`` calls ``__lt__``, ``<=`` calls ``__le__``, ``>`` calls ``__gt__`` and\n\t// ``>=`` calls ``__ge__``\n\n\t__bool__()\n\t{\n\t\treturn true;\n\t}\n};\n\nexport class Signature extends Proto\n{\n\tconstructor(...params)\n\t{\n\t\tsuper();\n\t\tthis.paramsByPos = [];\n\t\tthis.paramsByName = {};\n\t\tthis.countpos = 0;\n\t\tthis.countposdef = 0;\n\t\tthis.countposkw = 0;\n\t\tthis.countposkwdef = 0;\n\t\tthis.countkw = 0;\n\t\tthis.countkwdef = 0;\n\t\tthis.varpos = null;\n\t\tthis.varkw = null;\n\n\t\tlet state = 0;\n\t\tlet name = null;\n\t\tlet type = null;\n\t\tfor (let value of params)\n\t\t{\n\t\t\tif (state == 0)\n\t\t\t{\n\t\t\t\tname = value;\n\t\t\t\tstate = 1;\n\t\t\t}\n\t\t\telse if (state == 1)\n\t\t\t{\n\t\t\t\ttype = value;\n\t\t\t\tif (type.endsWith(\"=\"))\n\t\t\t\t\tstate = 2;\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.add(name, type, null);\n\t\t\t\t\tstate = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.add(name, type, value);\n\t\t\t\tstate = 0;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Add a parameter\n\tadd(name, type, defaultValue)\n\t{\n\t\tlet pos = this.paramsByPos.length;\n\t\tif (this.varpos !== null)\n\t\t\t++pos;\n\t\tif (this.varkw !== null)\n\t\t\t++pos;\n\t\tlet param = {name: name, pos: pos, type: type, defaultValue: defaultValue};\n\t\tswitch (type)\n\t\t{\n\t\t\tcase \"p\":\n\t\t\t\tif (this.countposdef > 0 || this.countposkwdef > 0 || this.countkwdef > 0)\n\t\t\t\t\tthrow new ParameterError(\"parameter without default after parameter with default\");\n\t\t\t\telse if (this.countposkw > 0 || this.countposkwdef > 0)\n\t\t\t\t\tthrow new ParameterError(\"positional-only parameter after positional/keyword parameter\");\n\t\t\t\telse if (this.countkw > 0 || this.countkwdef > 0)\n\t\t\t\t\tthrow new ParameterError(\"positional-only parameter after keyword-only parameter\");\n\t\t\t\telse if (this.varpos !== null)\n\t\t\t\t\tthrow new ParameterError(\"positional-only parameter after * parameter\");\n\t\t\t\telse if (this.varkw !== null)\n\t\t\t\t\tthrow new ParameterError(\"positional-only parameter after ** parameter\");\n\t\t\t\tthis.paramsByPos.push(param);\n\t\t\t\tthis.paramsByName[name] = param;\n\t\t\t\t++this.countpos;\n\t\t\t\tbreak;\n\t\t\tcase \"p=\":\n\t\t\t\tif (this.countposkw > 0 || this.countposkwdef > 0)\n\t\t\t\t\tthrow new ParameterError(\"positional-only parameter after positional/keyword parameter\");\n\t\t\t\telse if (this.countkw > 0 || this.countkwdef > 0)\n\t\t\t\t\tthrow new ParameterError(\"positional-only parameter after keyword-only parameter\");\n\t\t\t\telse if (this.varpos !== null)\n\t\t\t\t\tthrow new ParameterError(\"positional-only parameter after * parameter\");\n\t\t\t\telse if (this.varkw !== null)\n\t\t\t\t\tthrow new ParameterError(\"positional-only parameter after ** parameter\");\n\t\t\t\tthis.paramsByPos.push(param);\n\t\t\t\tthis.paramsByName[name] = param;\n\t\t\t\t++this.countposdef;\n\t\t\t\tbreak;\n\t\t\tcase \"pk\":\n\t\t\t\tif (this.countposdef > 0 || this.countposkwdef > 0 || this.countkwdef > 0)\n\t\t\t\t\tthrow new ParameterError(\"parameter without default after parameter with default\");\n\t\t\t\telse if (this.countkw > 0 || this.countkwdef > 0)\n\t\t\t\t\tthrow new ParameterError(\"positional/keyword parameter after keyword-only parameter\");\n\t\t\t\telse if (this.varpos !== null)\n\t\t\t\t\tthrow new ParameterError(\"positional/keyword parameter after * parameter\");\n\t\t\t\telse if (this.varkw !== null)\n\t\t\t\t\tthrow new ParameterError(\"positional/keyword parameter after ** parameter\");\n\t\t\t\tthis.paramsByPos.push(param);\n\t\t\t\tthis.paramsByName[name] = param;\n\t\t\t\t++this.countposkw;\n\t\t\t\tbreak;\n\t\t\tcase \"pk=\":\n\t\t\t\tif (this.countkw > 0 || this.countkwdef > 0)\n\t\t\t\t\tthrow new ParameterError(\"positional/keyword parameter after keyword-only parameter\");\n\t\t\t\telse if (this.varpos !== null)\n\t\t\t\t\tthrow new ParameterError(\"positional/keyword parameter after * parameter\");\n\t\t\t\telse if (this.varkw !== null)\n\t\t\t\t\tthrow new ParameterError(\"positional/keyword parameter after ** parameter\");\n\t\t\t\tthis.paramsByPos.push(param);\n\t\t\t\tthis.paramsByName[name] = param;\n\t\t\t\t++this.countposkwdef;\n\t\t\t\tbreak;\n\t\t\tcase \"k\":\n\t\t\t\tif (this.countposdef > 0 || this.countposkwdef > 0 || this.countkwdef > 0)\n\t\t\t\t\tthrow new ParameterError(\"parameter without default after parameter with default\");\n\t\t\t\telse if (this.varpos !== null)\n\t\t\t\t\tthrow new ParameterError(\"keyword-only parameter after * parameter\");\n\t\t\t\telse if (this.varkw !== null)\n\t\t\t\t\tthrow new ParameterError(\"keyword-only parameter after ** parameter\");\n\t\t\t\tthis.paramsByPos.push(param);\n\t\t\t\tthis.paramsByName[name] = param;\n\t\t\t\t++this.countkw;\n\t\t\t\tbreak;\n\t\t\tcase \"k=\":\n\t\t\t\tif (this.varpos !== null)\n\t\t\t\t\tthrow new ParameterError(\"keyword-only parameter after * parameter\");\n\t\t\t\telse if (this.varkw !== null)\n\t\t\t\t\tthrow new ParameterError(\"keyword-only parameter after ** parameter\");\n\t\t\t\tthis.paramsByPos.push(param);\n\t\t\t\tthis.paramsByName[name] = param;\n\t\t\t\t++this.countkwdef;\n\t\t\t\tbreak;\n\t\t\tcase \"*\":\n\t\t\t\tif (this.varpos !== null)\n\t\t\t\t\tthrow new ParameterError(\"* parameter specified twice!\");\n\t\t\t\telse if (this.varkw !== null)\n\t\t\t\t\tthrow new ParameterError(\"* parameter can come after ** parameter!\");\n\t\t\t\tthis.varpos = param;\n\t\t\t\tbreak;\n\t\t\tcase \"**\":\n\t\t\t\tif (this.varkw !== null)\n\t\t\t\t\tthrow new ParameterError(\"** parameter specified twice!\");\n\t\t\t\tthis.varkw = param;\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t// Create the argument array for calling a function with this signature with the arguments available from ``args``\n\tbindArray(name, args, kwargs)\n\t{\n\t\tlet decname = name !== null ? name + \"() \" : \"\";\n\n\t\tlet varpos = this.varpos != null ? [] : null;\n\t\tlet varkw = this.varkw != null ? _emptymap() : null;\n\n\t\tlet count = this.countpos + this.countposdef + this.countposkw + this.countposkwdef + this.countkw + this.countkwdef;\n\t\tlet finalargs = Array(count).fill(null);\n\t\tlet haveValues = Array(count).fill(false);\n\n\t\t// Handle psotional arguments\n\t\tif (args !== null)\n\t\t{\n\t\t\tlet i = 0;\n\t\t\tfor (let arg of args)\n\t\t\t{\n\t\t\t\tlet param = this.paramsByPos[i];\n\t\t\t\tif (param !== undefined && param.type.indexOf(\"p\") >= 0)\n\t\t\t\t{\n\t\t\t\t\tfinalargs[i] = arg;\n\t\t\t\t\thaveValues[i] = true;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (varpos !== null)\n\t\t\t\t\t\tvarpos.push(arg);\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tlet count_nodef = this.countpos + this.countposkw;\n\t\t\t\t\t\tlet count_def = this.countposdef + this.countposkwdef;\n\t\t\t\t\t\tif (count_def == 0)\n\t\t\t\t\t\t\tthrow new ArgumentError(name + \"() takes exactly \" + count_nodef + \" positional argument\" + (count_nodef != 1 ? \"s\" : \"\") + \", \" + args.length + \" given\");\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tthrow new ArgumentError(name + \"() takes at most \" + (count_nodef + count_def) + \" positional argument\" + ((count_nodef + count_def) != 1 ? \"s\" : \"\") + \", \" + args.length + \" given\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t++i;\n\t\t\t}\n\t\t}\n\n\t\t// Handle keyword arguments\n\t\tif (kwargs !== null)\n\t\t{\n\t\t\tfor (let [argname, argvalue] of Object.entries(kwargs))\n\t\t\t{\n\t\t\t\tlet param = this.paramsByName[argname];\n\n\t\t\t\tif (param !== undefined && param.type.indexOf(\"k\") >= 0)\n\t\t\t\t{\n\t\t\t\t\tif (haveValues[param.pos])\n\t\t\t\t\t\tthrow new ArgumentError(\"Duplicate keyword argument \" + argname + \" for \" + name + \"()\");\n\t\t\t\t\tfinalargs[param.pos] = argvalue;\n\t\t\t\t\thaveValues[param.pos] = true;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (varkw !== null)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (varkw.has(argname))\n\t\t\t\t\t\t\tthrow new ArgumentError(\"Duplicate keyword argument \" + argname + \" for \" + name + \"()\");\n\t\t\t\t\t\t_setmap(varkw, argname, argvalue);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\tthrow new ArgumentError(name + \"() doesn't support an argument named \" + argname);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Fill in default values and check that every parameter has a value\n\t\tlet i = 0;\n\t\tfor (let param of this.paramsByPos)\n\t\t{\n\t\t\tif (!haveValues[i])\n\t\t\t{\n\t\t\t\tif (param.type.endsWith(\"=\"))\n\t\t\t\t{\n\t\t\t\t\tfinalargs[i] = param.defaultValue;\n\t\t\t\t\thaveValues[i] = true;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tthrow new ArgumentError(\"Required \" + name + \"() argument \" + param.name + \" (position \" + param.pos + \") missing\");\n\t\t\t}\n\t\t\t++i;\n\t\t}\n\n\t\t// Set variable parameters\n\t\tif (varpos !== null)\n\t\t\tfinalargs.push(varpos);\n\t\tif (varkw !== null)\n\t\t\tfinalargs.push(varkw);\n\n\t\treturn finalargs;\n\t}\n\n\t// Create the argument object for calling a function with this signature with the arguments available from ``args``\n\tbindObject(name, args, kwargs)\n\t{\n\t\targs = this.bindArray(name, args, kwargs);\n\t\tlet argObject = {};\n\t\tlet i = 0;\n\t\tfor (let param of this.paramsByPos)\n\t\t\targObject[param.name] = args[i++];\n\t\tif (this.varpos !== null)\n\t\t\targObject[this.varpos.name] = args[i++];\n\t\tif (this.varkw !== null)\n\t\t\targObject[this.varkw.name] = args[i++];\n\t\treturn argObject;\n\t}\n\n\t__repr__()\n\t{\n\t\treturn \"<Signature \" + this.toString() + \">\";\n\t}\n\n\t__str__()\n\t{\n\t\treturn this.toString();\n\t}\n\n\t_appendParam(buffer, lasttype, param)\n\t{\n\t\tlet sep;\n\t\tif (lasttype === null)\n\t\t\tsep = [\"k\", \"k=\"].includes(param.type) ? \"*, \" : \"\";\n\t\telse if ([\"pk\", \"pk=\"].includes(lasttype))\n\t\t\tsep = [\"k\", \"k=\"].includes(param.type) ? \", *, \" : \", \";\n\t\telse if ([\"p\", \"p=\"].includes(lasttype))\n\t\t{\n\t\t\tif ([\"pk\", \"pk=\"].includes(param.type))\n\t\t\t\tsep = \", /, \";\n\t\t\telse if ([\"k\", \"k=\"].includes(param.type))\n\t\t\t\tsep = \", /, *, \";\n\t\t\telse\n\t\t\t\tsep = \", \";\n\t\t}\n\t\telse\n\t\t\tsep = \", \";\n\t\tlasttype = param.type;\n\t\tbuffer.push(sep);\n\t\tif ([\"*\", \"**\"].includes(param.type))\n\t\t\tbuffer.push(param.type);\n\t\tbuffer.push(param.name);\n\t\tif (param.type.endsWith(\"=\"))\n\t\t{\n\t\t\tbuffer.push(\"=\");\n\t\t\tbuffer.push(_repr(param.defaultValue));\n\t\t}\n\t}\n\n\ttoString()\n\t{\n\t\tlet v = [];\n\t\tlet lasttype = null;\n\t\tfor (let param of this.paramsByPos)\n\t\t{\n\t\t\tthis._appendParam(v, lasttype, param);\n\t\t\tlasttype = param.type;\n\t\t}\n\t\tif (this.varpos !== null)\n\t\t{\n\t\t\tthis._appendParam(v, lasttype, this.varpos);\n\t\t\tlasttype = this.varpos.type;\n\t\t}\n\t\tif (this.varkw !== null)\n\t\t{\n\t\t\tthis._appendParam(v, lasttype, this.varkw);\n\t\t\tlasttype = this.varkw.type;\n\t\t}\n\t\treturn \"(\" + v.join(\"\") + \")\";\n\t}\n};\n\n// When we don't have a real ``Set`` type, emulate one that supports strings\nexport class _Set\n{\n\tconstructor(...items)\n\t{\n\t\tthis.items = {};\n\t\tthis.add(...items);\n\t}\n\n\tadd(...items)\n\t{\n\t\tfor (let item of items)\n\t\t\tthis.items[item] = true;\n\t}\n\n\tclear()\n\t{\n\t\tthis.items = {};\n\t}\n\n\t__getattr__(attrname)\n\t{\n\t\tlet self = this;\n\t\tswitch (attrname)\n\t\t{\n\t\t\tcase \"add\":\n\t\t\t\treturn expose(this.bind.add(this), [\"items\", \"*\"]);\n\t\t\tdefault:\n\t\t\t\tthrow new AttributeError(this, attrname);\n\t\t}\n\t}\n\n\t__contains__(item)\n\t{\n\t\treturn this.items[item] || false;\n\t}\n\n\thas(item)\n\t{\n\t\treturn this.items[item] || false;\n\t}\n\n\t__bool__()\n\t{\n\t\tfor (let item in this.items)\n\t\t{\n\t\t\tif (!this.items.hasOwnProperty(item))\n\t\t\t\tcontinue;\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\t__repr__()\n\t{\n\t\tlet v = [];\n\t\tv.push(\"{\");\n\t\tlet i = 0;\n\t\tfor (let item in this.items)\n\t\t{\n\t\t\tif (!this.items.hasOwnProperty(item))\n\t\t\t\tcontinue;\n\t\t\tif (i++)\n\t\t\t\tv.push(\", \");\n\t\t\tv.push(_repr(item));\n\t\t}\n\t\tif (!i)\n\t\t\tv.push(\"/\");\n\t\tv.push(\"}\");\n\t\treturn v.join(\"\");\n\t}\n\n\t__eq__(other)\n\t{\n\t\t// We'll check that everything in ``this`` is in ``other``\n\t\t// and if both have the same number of items they are equal\n\t\tif (_isset(other))\n\t\t{\n\t\t\tlet count = 0;\n\t\t\tfor (let item in this.items)\n\t\t\t{\n\t\t\t\tif (!other.has(item))\n\t\t\t\t\treturn false;\n\t\t\t\t// count the number of items we have\n\t\t\t\t++count;\n\t\t\t}\n\t\t\treturn other.size == count;\n\t\t}\n\t\telse if (_isul4set(other))\n\t\t{\n\t\t\tlet count = 0;\n\t\t\tfor (let item in this.items)\n\t\t\t{\n\t\t\t\tif (!other[item])\n\t\t\t\t\treturn false;\n\t\t\t\t// count the number of items we have\n\t\t\t\t++count;\n\t\t\t}\n\t\t\t// Subtract the number of items that ``other`` has\n\t\t\tfor (let item in other.items)\n\t\t\t\t--count;\n\t\t\treturn count == 0;\n\t\t}\n\t\telse\n\t\t\treturn false;\n\t}\n\n\t__le__(other)\n\t{\n\t\t// check that ``this`` is a subset of ``other``,\n\t\t// i.e. everything in ``this`` is also in ``other``\n\t\tif (_isset(other))\n\t\t{\n\t\t\tlet count = 0;\n\t\t\tfor (let item in this.items)\n\t\t\t{\n\t\t\t\tif (!other.has(item))\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\telse if (_isul4set(other))\n\t\t{\n\t\t\tlet count = 0;\n\t\t\tfor (let item in this.items)\n\t\t\t{\n\t\t\t\tif (!other.items[item])\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\telse\n\t\t\t_unorderable(\"<\", this, other);\n\t}\n\n\t__ge__(other)\n\t{\n\t\t// check that ``this`` is a superset of ``other``,\n\t\t// i.e. everything in ``other`` is also in ``this``\n\t\tif (_isset(other))\n\t\t{\n\t\t\tother.forEach(function(value) {\n\t\t\t\tif (!this.items[value])\n\t\t\t\t\treturn false;\n\t\t\t}, this);\n\t\t\treturn true;\n\t\t}\n\t\telse if (_isul4set(other))\n\t\t{\n\t\t\tlet count = 0;\n\t\t\tfor (let key in other.items)\n\t\t\t{\n\t\t\t\tif (!this.items[key])\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\telse\n\t\t\t_unorderable(\"<=\", this, other);\n\t}\n};\n\n_Set.prototype.__type__ = \"set\";\n\n// Adds name and signature to a function/method and makes the method callable in templates\nexport function expose(f, signature, options)\n{\n\toptions = options || {};\n\tif (options.name)\n\t\tf._ul4_name = options.name;\n\tif (_islist(signature))\n\t\tsignature = new Signature(...signature);\n\tf._ul4_signature = signature;\n\tf._ul4_needsobject = options.needsobject || false;\n\tf._ul4_needscontext = options.needscontext || false;\n\treturn f;\n};\n\n// Clone an object and extend it\nexport function _extend(baseobj, attrs)\n{\n\treturn Object.assign(Object.create(baseobj), attrs);\n};\n\n// Protocol objects for all builtin types\nexport let Protocol = {\n\tattrs: _emptyset(),\n\n\tul4type: function ul4type()\n\t{\n\t\treturn \"Protocol\";\n\t},\n\n\tdir: function dir()\n\t{\n\t\treturn this.attrs;\n\t},\n\n\tget: function get(obj)\n\t{\n\t\tif (_isstr(obj))\n\t\t\treturn StrProtocol;\n\t\telse if (_islist(obj))\n\t\t\treturn ListProtocol;\n\t\telse if (_isdate(obj))\n\t\t\treturn DateProtocol;\n\t\telse if (_isset(obj))\n\t\t\treturn SetProtocol;\n\t\telse if (_ismap(obj))\n\t\t\treturn MapProtocol;\n\t\telse if (_isdatetime(obj))\n\t\t\treturn DateTimeProtocol;\n\t\telse if (_isobject(obj))\n\t\t\treturn ObjectProtocol;\n\t\telse\n\t\t\treturn Protocol;\n\t},\n\n\tgetattr: function getattr(obj, attrname)\n\t{\n\t\tif (obj === null || obj === undefined)\n\t\t\tthrow new AttributeError(obj, attrname);\n\t\telse if (typeof(obj.__getattr__) === \"function\")\n\t\t\treturn obj.__getattr__(attrname);\n\t\telse if (this.attrs.has(attrname))\n\t\t{\n\t\t\tlet attr = this[attrname];\n\t\t\tlet realattr = function realattr(...args) {\n\t\t\t\treturn attr.apply(this, [obj, ...args]);\n\t\t\t};\n\t\t\t// Unfortunately we can't set ``realattr.name``;\n\t\t\trealattr._ul4_name = attr._ul4_name || attr.name;\n\t\t\trealattr._ul4_signature = attr._ul4_signature;\n\t\t\trealattr._ul4_needsobject = attr._ul4_needsobject;\n\t\t\trealattr._ul4_needscontext = attr._ul4_needscontext;\n\t\t\treturn realattr;\n\t\t}\n\t\telse\n\t\t\tthrow new AttributeError(obj, attrname);\n\t},\n\n\thasattr: function hasattr(obj, attrname)\n\t{\n\t\tif (obj === null || obj === undefined)\n\t\t\treturn false;\n\t\telse if (typeof(obj.__getattr__) === \"function\")\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tobj.__getattr__(attrname);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tcatch (exc)\n\t\t\t{\n\t\t\t\tif (exc instanceof AttributeError && exc.obj === object)\n\t\t\t\t\treturn false;\n\t\t\t\telse\n\t\t\t\t\tthrow exc;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\treturn this.attrs.has(attrname);\n\t}\n};\n\n\nexport let StrProtocol = _extend(Protocol,\n{\n\tattrs: _makeset(\n\t\t\"split\",\n\t\t\"rsplit\",\n\t\t\"splitlines\",\n\t\t\"strip\",\n\t\t\"lstrip\",\n\t\t\"rstrip\",\n\t\t\"upper\",\n\t\t\"lower\",\n\t\t\"capitalize\",\n\t\t\"startswith\",\n\t\t\"endswith\",\n\t\t\"replace\",\n\t\t\"count\",\n\t\t\"find\",\n\t\t\"rfind\",\n\t\t\"join\"\n\t),\n\n\tul4type: function ul4type(obj)\n\t{\n\t\treturn \"str\";\n\t},\n\n\tcount: function count(obj, sub, start=null, end=null)\n\t{\n\t\treturn _count(obj, sub, start, end);\n\t},\n\n\tfind: function find(obj, sub, start=null, end=null)\n\t{\n\t\treturn _find(obj, sub, start, end);\n\t},\n\n\trfind: function rfind(obj, sub, start=null, end=null)\n\t{\n\t\treturn _rfind(obj, sub, start, end);\n\t},\n\n\treplace: function replace(obj, old, new_, count=null)\n\t{\n\t\tif (count === null)\n\t\t\tcount = obj.length;\n\n\t\tlet result = [];\n\t\twhile (obj.length)\n\t\t{\n\t\t\tlet pos = obj.indexOf(old);\n\t\t\tif (pos === -1 || !count--)\n\t\t\t{\n\t\t\t\tresult.push(obj);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tresult.push(obj.substr(0, pos));\n\t\t\tresult.push(new_);\n\t\t\tobj = obj.substr(pos + old.length);\n\t\t}\n\t\treturn result.join(\"\");\n\t},\n\n\tstrip: function strip(obj, chars=null)\n\t{\n\t\tchars = chars || \" \\r\\n\\t\";\n\t\tif (typeof(chars) !== \"string\")\n\t\t\tthrow new TypeError(\"strip() requires a string argument\");\n\n\t\twhile (obj && chars.indexOf(obj[0]) >= 0)\n\t\t\tobj = obj.substr(1);\n\t\twhile (obj && chars.indexOf(obj[obj.length-1]) >= 0)\n\t\t\tobj = obj.substr(0, obj.length-1);\n\t\treturn obj;\n\t},\n\n\tlstrip: function lstrip(obj, chars=null)\n\t{\n\t\tchars = chars || \" \\r\\n\\t\";\n\t\tif (typeof(chars) !== \"string\")\n\t\t\tthrow new TypeError(\"lstrip() requires a string argument\");\n\n\t\twhile (obj && chars.indexOf(obj[0]) >= 0)\n\t\t\tobj = obj.substr(1);\n\t\treturn obj;\n\t},\n\n\trstrip: function rstrip(obj, chars=null)\n\t{\n\t\tchars = chars || \" \\r\\n\\t\";\n\t\tif (typeof(chars) !== \"string\")\n\t\t\tthrow new TypeError(\"rstrip() requires a string argument\");\n\n\t\twhile (obj && chars.indexOf(obj[obj.length-1]) >= 0)\n\t\t\tobj = obj.substr(0, obj.length-1);\n\t\treturn obj;\n\t},\n\n\tsplit: function split(obj, sep=null, maxsplit=null)\n\t{\n\t\tif (sep !== null && typeof(sep) !== \"string\")\n\t\t\tthrow new TypeError(\"split() requires a string\");\n\n\t\tif (maxsplit === null)\n\t\t{\n\t\t\tlet result = obj.split(sep !== null ? sep : /[ \\n\\r\\t]+/);\n\t\t\tif (sep === null)\n\t\t\t{\n\t\t\t\tif (result.length && !result[0].length)\n\t\t\t\t\tresult.splice(0, 1);\n\t\t\t\tif (result.length && !result[result.length-1].length)\n\t\t\t\t\tresult.splice(-1);\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (sep !== null)\n\t\t\t{\n\t\t\t\tlet result = [];\n\t\t\t\twhile (obj.length)\n\t\t\t\t{\n\t\t\t\t\tlet pos = obj.indexOf(sep);\n\t\t\t\t\tif (pos === -1 || !maxsplit--)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.push(obj);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tresult.push(obj.substr(0, pos));\n\t\t\t\t\tobj = obj.substr(pos + sep.length);\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlet result = [];\n\t\t\t\twhile (obj.length)\n\t\t\t\t{\n\t\t\t\t\tobj = StrProtocol.lstrip(obj, null);\n\t\t\t\t\tlet part;\n\t\t\t\t\tif (!maxsplit--)\n\t\t\t\t\t\t part = obj; // Take the rest of the string\n\t\t\t\t\telse\n\t\t\t\t\t\tpart = obj.split(/[ \\n\\r\\t]+/, 1)[0];\n\t\t\t\t\tif (part.length)\n\t\t\t\t\t\tresult.push(part);\n\t\t\t\t\tobj = obj.substr(part.length);\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}\n\t},\n\n\trsplit: function rsplit(obj, sep=null, maxsplit=null)\n\t{\n\t\tif (sep !== null && typeof(sep) !== \"string\")\n\t\t\tthrow new TypeError(\"rsplit() requires a string as second argument\");\n\n\t\tif (maxsplit === null)\n\t\t{\n\t\t\tlet result = obj.split(sep !== null ? sep : /[ \\n\\r\\t]+/);\n\t\t\tif (sep === null)\n\t\t\t{\n\t\t\t\tif (result.length && !result[0].length)\n\t\t\t\t\tresult.splice(0, 1);\n\t\t\t\tif (result.length && !result[result.length-1].length)\n\t\t\t\t\tresult.splice(-1);\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (sep !== null)\n\t\t\t{\n\t\t\t\tlet result = [];\n\t\t\t\twhile (obj.length)\n\t\t\t\t{\n\t\t\t\t\tlet pos = obj.lastIndexOf(sep);\n\t\t\t\t\tif (pos === -1 || !maxsplit--)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.unshift(obj);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tresult.unshift(obj.substr(pos+sep.length));\n\t\t\t\t\tobj = obj.substr(0, pos);\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlet result = [];\n\t\t\t\twhile (obj.length)\n\t\t\t\t{\n\t\t\t\t\tobj = StrProtocol.rstrip(obj);\n\t\t\t\t\tlet part;\n\t\t\t\t\tif (!maxsplit--)\n\t\t\t\t\t\t part = obj; // Take the rest of the string\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tpart = obj.split(/[ \\n\\r\\t]+/);\n\t\t\t\t\t\tpart = part[part.length-1];\n\t\t\t\t\t}\n\t\t\t\t\tif (part.length)\n\t\t\t\t\t\tresult.unshift(part);\n\t\t\t\t\tobj = obj.substr(0, obj.length-part.length);\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}\n\t},\n\n\tsplitlines: function splitlines(obj, keepends=false)\n\t{\n\t\tlet pos = 0;\n\t\tlet startpos;\n\t\tlet lookingAtLineEnd = function lookingAtLineEnd()\n\t\t{\n\t\t\tlet c = obj[pos];\n\t\t\tif (c === '\\n' || c == '\\u000B' || c == '\\u000C' || c == '\\u001C' || c == '\\u001D' || c == '\\u001E' || c == '\\u0085' || c == '\\u2028' || c == '\\u2029')\n\t\t\t\treturn 1;\n\t\t\tif (c === '\\r')\n\t\t\t{\n\t\t\t\tif (pos == length-1)\n\t\t\t\t\treturn 1;\n\t\t\t\tif (obj[pos+1] === '\\n')\n\t\t\t\t\treturn 2;\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\treturn 0;\n\t\t};\n\n\t\tlet result = [], length = obj.length;\n\n\t\tfor (pos = 0, startpos = 0;;)\n\t\t{\n\t\t\tif (pos >= length)\n\t\t\t{\n\t\t\t\tif (startpos != pos)\n\t\t\t\t\tresult.push(obj.substring(startpos));\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\tlet lineendlen = lookingAtLineEnd();\n\t\t\tif (!lineendlen)\n\t\t\t\t++pos;\n\t\t\telse\n\t\t\t{\n\t\t\t\tlet endpos = pos + (keepends ? lineendlen : 0);\n\t\t\t\tresult.push(obj.substring(startpos, endpos));\n\t\t\t\tpos += lineendlen;\n\t\t\t\tstartpos = pos;\n\t\t\t}\n\t\t}\n\t},\n\n\tlower: function lower(obj)\n\t{\n\t\treturn obj.toLowerCase();\n\t},\n\n\tupper: function upper(obj)\n\t{\n\t\treturn obj.toUpperCase();\n\t},\n\n\tcapitalize: function capitalize(obj)\n\t{\n\t\tif (obj.length)\n\t\t\tobj = obj[0].toUpperCase() + obj.slice(1).toLowerCase();\n\t\treturn obj;\n\t},\n\n\tjoin: function join(obj, iterable)\n\t{\n\t\tlet resultlist = [];\n\t\tfor (let iter = _iter(iterable);;)\n\t\t{\n\t\t\tlet item = iter.next();\n\t\t\tif (item.done)\n\t\t\t\tbreak;\n\t\t\tresultlist.push(item.value);\n\t\t}\n\t\treturn resultlist.join(obj);\n\t},\n\n\tstartswith: function startswith(obj, prefix)\n\t{\n\t\tif (typeof(prefix) === \"string\")\n\t\t\treturn obj.substr(0, prefix.length) === prefix;\n\t\telse if (_islist(prefix))\n\t\t{\n\t\t\tfor (let singlepre of prefix)\n\t\t\t{\n\t\t\t\tif (obj.substr(0, singlepre.length) === singlepre)\n\t\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\telse\n\t\t\tthrow new TypeError(\"startswith() argument must be string\");\n\t},\n\n\tendswith: function endswith(obj, suffix)\n\t{\n\t\tif (typeof(suffix) === \"string\")\n\t\t\treturn obj.substr(obj.length-suffix.length) === suffix;\n\t\telse if (_islist(suffix))\n\t\t{\n\t\t\tfor (let singlesuf of suffix)\n\t\t\t{\n\t\t\t\tif (obj.substr(obj.length-singlesuf.length) === singlesuf)\n\t\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\telse\n\t\t\tthrow new TypeError(\"endswith() argument must be string or list of strings\");\n\t}\n});\n\nexpose(StrProtocol.count, [\"sub\", \"p\", \"start\", \"p=\", null, \"end\", \"p=\", null]);\nexpose(StrProtocol.find, [\"sub\", \"p\", \"start\", \"p=\", null, \"end\", \"p=\", null]);\nexpose(StrProtocol.rfind, [\"sub\", \"p\", \"start\", \"p=\", null, \"end\", \"p=\", null]);\nexpose(StrProtocol.replace, [\"old\", \"p\", \"new\", \"p\", \"count\", \"p=\", null]);\nexpose(StrProtocol.strip, [\"chars\", \"p=\", null]);\nexpose(StrProtocol.lstrip, [\"chars\", \"p=\", null]);\nexpose(StrProtocol.rstrip, [\"chars\", \"p=\", null]);\nexpose(StrProtocol.split, [\"sep\", \"pk=\", null, \"maxsplit\", \"pk=\", null]);\nexpose(StrProtocol.rsplit, [\"sep\", \"pk=\", null, \"maxsplit\", \"pk=\", null]);\nexpose(StrProtocol.splitlines, [\"keepends\", \"pk=\", false]);\nexpose(StrProtocol.lower, []);\nexpose(StrProtocol.upper, []);\nexpose(StrProtocol.capitalize, []);\nexpose(StrProtocol.join, [\"iterable\", \"p\"]);\nexpose(StrProtocol.startswith, [\"prefix\", \"p\"]);\nexpose(StrProtocol.endswith, [\"suffix\", \"p\"]);\n\n\nexport let ListProtocol = _extend(Protocol,\n{\n\tattrs: _makeset(\n\t\t\"append\",\n\t\t\"insert\",\n\t\t\"pop\",\n\t\t\"count\",\n\t\t\"find\",\n\t\t\"rfind\"\n\t),\n\n\tul4type: function ul4type(obj)\n\t{\n\t\treturn \"list\";\n\t},\n\n\tappend: function append(obj, items)\n\t{\n\t\tfor (let item of items)\n\t\t\tobj.push(item);\n\t\treturn null;\n\t},\n\n\tinsert: function insert(obj, pos, items)\n\t{\n\t\tif (pos < 0)\n\t\t\tpos += obj.length;\n\n\t\tfor (let item of items)\n\t\t\tobj.splice(pos++, 0, item);\n\t\treturn null;\n\t},\n\n\tpop: function pop(obj, pos)\n\t{\n\t\tif (pos < 0)\n\t\t\tpos += obj.length;\n\n\t\tlet result = obj[pos];\n\t\tobj.splice(pos, 1);\n\t\treturn result;\n\t},\n\n\tcount: function count(obj, sub, start=null, end=null)\n\t{\n\t\treturn _count(obj, sub, start, end);\n\t},\n\n\tfind: function find(obj, sub, start=null, end=null)\n\t{\n\t\treturn _find(obj, sub, start, end);\n\t},\n\n\trfind: function rfind(obj, sub, start=null, end=null)\n\t{\n\t\treturn _rfind(obj, sub, start, end);\n\t}\n});\n\nexpose(ListProtocol.append, [\"items\", \"*\"]);\nexpose(ListProtocol.insert, [\"pos\", \"p\", \"items\", \"*\"]);\nexpose(ListProtocol.pop, [\"pos\", \"p=\", -1]);\nexpose(ListProtocol.count, [\"sub\", \"p\", \"start\", \"p=\", null, \"end\", \"p=\", null]);\nexpose(ListProtocol.find, [\"sub\", \"p\", \"start\", \"p=\", null, \"end\", \"p=\", null]);\nexpose(ListProtocol.rfind, [\"sub\", \"p\", \"start\", \"p=\", null, \"end\", \"p=\", null]);\n\n\nexport let MapProtocol = _extend(Protocol,\n{\n\tattrs: _makeset(\"get\", \"items\", \"values\", \"update\", \"clear\", \"pop\"),\n\n\tul4type: function ul4type(obj)\n\t{\n\t\treturn \"dict\";\n\t},\n\n\tgetattr: function getattr(obj, attrname)\n\t{\n\t\tif (this.attrs.has(attrname))\n\t\t{\n\t\t\tlet attr = this[attrname];\n\t\t\tlet realattr = function realattr(...args) {\n\t\t\t\treturn attr.apply(this, [obj, ...args]);\n\t\t\t};\n\t\t\t// Unfortunately we can't set ``realattr.name``;\n\t\t\trealattr._ul4_name = attr._ul4_name || attr.name;\n\t\t\trealattr._ul4_signature = attr._ul4_signature;\n\t\t\trealattr._ul4_needsobject = attr._ul4_needsobject;\n\t\t\trealattr._ul4_needscontext = attr._ul4_needscontext;\n\t\t\treturn realattr;\n\t\t}\n\t\telse\n\t\t\treturn obj.get(attrname);\n\t},\n\n\tget: function get(obj, key, default_=null)\n\t{\n\t\tif (obj.has(key))\n\t\t\treturn obj.get(key);\n\t\treturn default_;\n\t},\n\n\titems: function items(obj)\n\t{\n\t\tlet result = [];\n\t\tobj.forEach(function(value, key) {\n\t\t\tresult.push([key, value]);\n\t\t});\n\t\treturn result;\n\t},\n\n\tvalues: function values(obj)\n\t{\n\t\tlet result = [];\n\t\tobj.forEach(function(value, key) {\n\t\t\tresult.push(value);\n\t\t});\n\t\treturn result;\n\t},\n\n\tupdate: function update(obj, others, kwargs)\n\t{\n\t\treturn _update(obj, others, kwargs);\n\t},\n\n\tclear: function clear(obj)\n\t{\n\t\tobj.clear();\n\t\treturn null;\n\t},\n\n\tpop: function pop(obj, key, default_=Object)\n\t{\n\t\tif (!obj.has(key))\n\t\t{\n\t\t\tif (default_ === Object)\n\t\t\t\tthrow new KeyError(obj, key);\n\t\t\telse\n\t\t\t\treturn default_;\n\t\t}\n\t\tlet result = obj.get(key);\n\t\tobj.delete(key);\n\t\treturn result;\n\t}\n});\n\nexpose(MapProtocol.get, [\"key\", \"p\", \"default\", \"p=\", null]);\nexpose(MapProtocol.items, []);\nexpose(MapProtocol.values, []);\nexpose(MapProtocol.update, [\"others\", \"*\", \"kwargs\", \"**\"]);\nexpose(MapProtocol.clear, []);\nexpose(MapProtocol.pop, [\"key\", \"p\", \"default\", \"p=\", Object]);\n\nexport let SetProtocol = _extend(Protocol,\n{\n\tattrs: _makeset(\"add\", \"clear\"),\n\n\tul4type: function ul4type(obj)\n\t{\n\t\treturn \"set\";\n\t},\n\n\tadd: function add(obj, items)\n\t{\n\t\tfor (let item of items)\n\t\t\tobj.add(item);\n\t},\n\n\tclear: function clear(obj)\n\t{\n\t\tobj.clear();\n\t\treturn null;\n\t}\n});\n\nexpose(SetProtocol.add, [\"items\", \"*\"]);\nexpose(SetProtocol.clear, []);\n\nexport let DateProtocol = _extend(Protocol,\n{\n\tattrs: _makeset(\n\t\t\"weekday\",\n\t\t\"week\",\n\t\t\"calendar\",\n\t\t\"day\",\n\t\t\"month\",\n\t\t\"year\",\n\t\t\"date\",\n\t\t\"mimeformat\",\n\t\t\"isoformat\",\n\t\t\"yearday\"\n\t),\n\n\tul4type: function ul4type(obj)\n\t{\n\t\treturn \"date\";\n\t},\n\n\tweekday: function weekday(obj)\n\t{\n\t\treturn DateTimeProtocol.weekday(obj._date);\n\t},\n\n\tcalendar: function calendar(obj, firstweekday=0, mindaysinfirstweek=4)\n\t{\n\t\treturn DateTimeProtocol.calendar(obj._date, firstweekday, mindaysinfirstweek);\n\t},\n\n\tweek: function week(obj, firstweekday=0, mindaysinfirstweek=4)\n\t{\n\t\treturn DateTimeProtocol.calendar(obj._date, firstweekday, mindaysinfirstweek)[1];\n\t},\n\n\tday: function day(obj)\n\t{\n\t\treturn obj._date.getDate();\n\t},\n\n\tmonth: function month(obj)\n\t{\n\t\treturn obj._date.getMonth()+1;\n\t},\n\n\tyear: function year(obj)\n\t{\n\t\treturn obj._date.getFullYear();\n\t},\n\n\tdate: function date(obj)\n\t{\n\t\treturn obj;\n\t},\n\n\tmimeformat: function mimeformat(obj)\n\t{\n\t\tlet weekdayname = [\"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\"];\n\t\tlet monthname = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\n\t\tlet d = obj._date;\n\n\t\treturn weekdayname[DateTimeProtocol.weekday(d)] + \", \" + _lpad(d.getDate(), \"0\", 2) + \" \" + monthname[d.getMonth()] + \" \" + d.getFullYear();\n\t},\n\n\tisoformat: function isoformat(obj)\n\t{\n\t\tlet d = obj._date;\n\t\treturn d.getFullYear() + \"-\" + _lpad((d.getMonth()+1).toString(), \"0\", 2) + \"-\" + _lpad(d.getDate().toString(), \"0\", 2);\n\t},\n\n\tyearday: function yearday(obj)\n\t{\n\t\treturn DateTimeProtocol.yearday(obj._date);\n\t}\n});\n\nexpose(DateProtocol.weekday, []);\nexpose(DateProtocol.calendar, [\"firstweekday\", \"pk=\", 0, \"mindaysinfirstweek\", \"pk=\", 4]);\nexpose(DateProtocol.week, [\"firstweekday\", \"pk=\", 0, \"mindaysinfirstweek\", \"pk=\", 4]);\nexpose(DateProtocol.day, []);\nexpose(DateProtocol.month, []);\nexpose(DateProtocol.year, []);\nexpose(DateProtocol.date, []);\nexpose(DateProtocol.mimeformat, []);\nexpose(DateProtocol.isoformat, []);\nexpose(DateProtocol.yearday, []);\n\n\nexport let DateTimeProtocol = _extend(Protocol,\n{\n\tattrs: _makeset(\n\t\t\"weekday\",\n\t\t\"week\",\n\t\t\"calendar\",\n\t\t\"day\",\n\t\t\"month\",\n\t\t\"year\",\n\t\t\"hour\",\n\t\t\"minute\",\n\t\t\"second\",\n\t\t\"microsecond\",\n\t\t\"date\",\n\t\t\"mimeformat\",\n\t\t\"isoformat\",\n\t\t\"yearday\"\n\t),\n\n\tul4type: function ul4type(obj)\n\t{\n\t\treturn \"datetime\";\n\t},\n\n\tweekday: function weekday(obj)\n\t{\n\t\tlet d = obj.getDay();\n\t\treturn d ? d-1 : 6;\n\t},\n\n\tcalendar: function calendar(obj, firstweekday=0, mindaysinfirstweek=4)\n\t{\n\t\t// Normalize parameters\n\t\tfirstweekday = _mod(firstweekday, 7);\n\t\tif (mindaysinfirstweek < 1)\n\t\t\tmindaysinfirstweek = 1;\n\t\telse if (mindaysinfirstweek > 7)\n\t\t\tmindaysinfirstweek = 7;\n\n\t\t// ``obj`` might be in the first week of the next year, or last week of\n\t\t// the previous year, so we might have to try those too.\n\t\tfor (let offset = +1; offset >= -1; --offset)\n\t\t{\n\t\t\tlet year = obj.getFullYear() + offset;\n\t\t\t// ``refdate`` will always be in week 1\n\t\t\tlet refDate = new Date(year, 0, mindaysinfirstweek);\n\t\t\t// Go back to the start of ``refdate``s week (i.e. day 1 of week 1)\n\t\t\tlet weekDayDiff = _mod(DateTimeProtocol.weekday(refDate) - firstweekday, 7);\n\t\t\tlet weekStartYear = refDate.getFullYear();\n\t\t\tlet weekStartMonth = refDate.getMonth();\n\t\t\tlet weekStartDay = refDate.getDate() - weekDayDiff;\n\t\t\tlet weekStart = new Date(weekStartYear, weekStartMonth, weekStartDay);\n\t\t\t// Is our date ``obj`` at or after day 1 of week 1?\n\t\t\tif (obj.getTime() >= weekStart.getTime())\n\t\t\t{\n\t\t\t\tlet diff = SubAST.prototype._do(obj, weekStart);\n\t\t\t\t// Add 1, because the first week is week 1, not week 0\n\t\t\t\tlet week = Math.floor(diff.days()/7) + 1;\n\t\t\t\treturn [year, week, DateTimeProtocol.weekday(obj)];\n\t\t\t}\n\t\t}\n\t},\n\n\tweek: function week(obj, firstweekday=0, mindaysinfirstweek=4)\n\t{\n\t\treturn DateTimeProtocol.calendar(obj, firstweekday, mindaysinfirstweek)[1];\n\t},\n\n\tday: function day(obj)\n\t{\n\t\treturn obj.getDate();\n\t},\n\n\tmonth: function month(obj)\n\t{\n\t\treturn obj.getMonth()+1;\n\t},\n\n\tyear: function year(obj)\n\t{\n\t\treturn obj.getFullYear();\n\t},\n\n\thour: function hour(obj)\n\t{\n\t\treturn obj.getHours();\n\t},\n\n\tminute: function minute(obj)\n\t{\n\t\treturn obj.getMinutes();\n\t},\n\n\tsecond: function second(obj)\n\t{\n\t\treturn obj.getSeconds();\n\t},\n\n\tmicrosecond: function microsecond(obj)\n\t{\n\t\treturn obj.getMilliseconds() * 1000;\n\t},\n\n\tdate: function date(obj)\n\t{\n\t\treturn new Date_(DateTimeProtocol.year(obj), DateTimeProtocol.month(obj), DateTimeProtocol.day(obj));\n\t},\n\n\tmimeformat: function mimeformat(obj)\n\t{\n\t\tlet weekdayname = [\"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\"];\n\t\tlet monthname = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\n\n\t\treturn weekdayname[DateTimeProtocol.weekday(obj)] + \", \" + _lpad(obj.getDate(), \"0\", 2) + \" \" + monthname[obj.getMonth()] + \" \" + obj.getFullYear() + \" \" + _lpad(obj.getHours(), \"0\", 2) + \":\" + _lpad(obj.getMinutes(), \"0\", 2) + \":\" + _lpad(obj.getSeconds(), \"0\", 2) + \" GMT\";\n\t},\n\n\tisoformat: function isoformat(obj)\n\t{\n\t\tlet year = obj.getFullYear();\n\t\tlet month = obj.getMonth()+1;\n\t\tlet day = obj.getDate();\n\t\tlet hour = obj.getHours();\n\t\tlet minute = obj.getMinutes();\n\t\tlet second = obj.getSeconds();\n\t\tlet ms = obj.getMilliseconds();\n\t\tlet result = year + \"-\" + _lpad(month.toString(), \"0\", 2) + \"-\" + _lpad(day.toString(), \"0\", 2) + \"T\" + _lpad(hour.toString(), \"0\", 2) + \":\" + _lpad(minute.toString(), \"0\", 2) + \":\" + _lpad(second.toString(), \"0\", 2);\n\t\tif (ms)\n\t\t\tresult += \".\" + _lpad(ms.toString(), \"0\", 3) + \"000\";\n\t\treturn result;\n\t},\n\n\tyearday: function yearday(obj)\n\t{\n\t\tlet leap = _isleap(obj) ? 1 : 0;\n\t\tlet day = obj.getDate();\n\t\tswitch (obj.getMonth())\n\t\t{\n\t\t\tcase 0:\n\t\t\t\treturn day;\n\t\t\tcase 1:\n\t\t\t\treturn 31 + day;\n\t\t\tcase 2:\n\t\t\t\treturn 31 + 28 + leap + day;\n\t\t\tcase 3:\n\t\t\t\treturn 31 + 28 + leap + 31 + day;\n\t\t\tcase 4:\n\t\t\t\treturn 31 + 28 + leap + 31 + 30 + day;\n\t\t\tcase 5:\n\t\t\t\treturn 31 + 28 + leap + 31 + 30 + 31 + day;\n\t\t\tcase 6:\n\t\t\t\treturn 31 + 28 + leap + 31 + 30 + 31 + 30 + day;\n\t\t\tcase 7:\n\t\t\t\treturn 31 + 28 + leap + 31 + 30 + 31 + 30 + 31 + day;\n\t\t\tcase 8:\n\t\t\t\treturn 31 + 28 + leap + 31 + 30 + 31 + 30 + 31 + 31 + day;\n\t\t\tcase 9:\n\t\t\t\treturn 31 + 28 + leap + 31 + 30 + 31 + 30 + 31 + 31 + 30 + day;\n\t\t\tcase 10:\n\t\t\t\treturn 31 + 28 + leap + 31 + 30 + 31 + 30 + 31 + 31 + 30 + 31 + day;\n\t\t\tcase 11:\n\t\t\t\treturn 31 + 28 + leap + 31 + 30 + 31 + 30 + 31 + 31 + 30 + 31 + 30 + day;\n\t\t}\n\t}\n});\n\nexpose(DateTimeProtocol.weekday, []);\nexpose(DateTimeProtocol.calendar, [\"firstweekday\", \"pk=\", 0, \"mindaysinfirstweek\", \"pk=\", 4]);\nexpose(DateTimeProtocol.week, [\"firstweekday\", \"pk=\", 0, \"mindaysinfirstweek\", \"pk=\", 4]);\nexpose(DateTimeProtocol.day, []);\nexpose(DateTimeProtocol.month, []);\nexpose(DateTimeProtocol.year, []);\nexpose(DateTimeProtocol.hour, []);\nexpose(DateTimeProtocol.minute, []);\nexpose(DateTimeProtocol.second, []);\nexpose(DateTimeProtocol.microsecond, []);\nexpose(DateTimeProtocol.date, []);\nexpose(DateTimeProtocol.mimeformat, []);\nexpose(DateTimeProtocol.isoformat, []);\nexpose(DateTimeProtocol.yearday, []);\n\n\nexport let ObjectProtocol = _extend(Protocol,\n{\n\tattrs: _makeset(\"get\", \"items\", \"values\", \"update\", \"clear\"),\n\n\tul4type: function ul4type(obj)\n\t{\n\t\treturn \"dict\";\n\t},\n\n\tgetattr: function getattr(obj, attrname)\n\t{\n\t\tlet result;\n\t\tif (obj && typeof(obj.__getattr__) === \"function\") // test this before the generic object test\n\t\t\tresult = obj.__getattr__(attrname);\n\t\telse\n\t\t\tresult = obj[attrname];\n\t\tif (typeof(result) !== \"function\")\n\t\t\treturn result;\n\t\tlet realresult = function(...args) {\n\t\t\t// We can use ``apply`` here, as we know that ``obj`` is a real object.\n\t\t\treturn result.apply(obj, args);\n\t\t};\n\t\trealresult._ul4_name = result._ul4_name || result.name;\n\t\trealresult._ul4_signature = result._ul4_signature;\n\t\trealresult._ul4_needsobject = result._ul4_needsobject;\n\t\trealresult._ul4_needscontext = result._ul4_needscontext;\n\t\treturn realresult;\n\t},\n\n\tget: function get(obj, key, default_=null)\n\t{\n\t\tlet result = obj[key];\n\t\tif (result === undefined)\n\t\t\treturn default_;\n\t\treturn result;\n\t},\n\n\titems: function items(obj)\n\t{\n\t\tlet result = [];\n\t\tfor (let key in obj)\n\t\t\tresult.push([key, obj[key]]);\n\t\treturn result;\n\t},\n\n\tvalues: function values(obj)\n\t{\n\t\tlet result = [];\n\t\tfor (let key in obj)\n\t\t\tresult.push(obj[key]);\n\t\treturn result;\n\t},\n\n\tclear: function clear(obj)\n\t{\n\t\tfor (let key in obj)\n\t\t\tdelete obj[key];\n\t}\n});\n\nexpose(ObjectProtocol.get, [\"key\", \"p\", \"default\", \"p=\", null]);\nexpose(ObjectProtocol.items, []);\nexpose(ObjectProtocol.values, []);\nexpose(ObjectProtocol.clear, []);\n\n\nexport class Context\n{\n\tconstructor(vars=null, globals=null)\n\t{\n\t\tthis.vars = vars || {};\n\t\tthis.globals = _extend(builtins, globals || {});\n\t\tthis.indents = [];\n\t\tthis.escapes = [];\n\t\tthis._output = [];\n\t}\n\n\t/* Return a clone of the ``Context``, but with a fresh empty ``vars`` objects that inherits from the previous one.\n\t * This is used by the various comprehensions to avoid leaking loop variables.\n\t */\n\tinheritvars()\n\t{\n\t\tlet context = Object.create(this);\n\t\tcontext.vars = Object.create(this.vars);\n\t\treturn context;\n\t}\n\n\t/* Return a clone of the ``Context`` with one additional indentation (this is used by ``RenderAST``) */\n\twithindent(indent)\n\t{\n\t\tlet context = Object.create(this);\n\t\tif (indent !== null)\n\t\t{\n\t\t\tcontext.indents = this.indents.slice();\n\t\t\tcontext.indents.push(indent);\n\t\t}\n\t\treturn context;\n\t}\n\n\t/* Return a clone of the ``Context`` with the output buffer replaced (this is used by ``renders`` to collect the output in a separate buffer) */\n\treplaceoutput()\n\t{\n\t\tlet context = Object.create(this);\n\t\tcontext._output = [];\n\t\treturn context;\n\t}\n\n\treplacevars(vars)\n\t{\n\t\tlet context = Object.create(this);\n\t\tcontext.vars = vars;\n\t\treturn context;\n\t}\n\n\toutput(value)\n\t{\n\t\tfor (let escape of this.escapes)\n\t\t\tvalue = escape(value);\n\t\tthis._output.push(value);\n\t}\n\n\tgetoutput()\n\t{\n\t\treturn this._output.join(\"\");\n\t}\n\n\tget(name)\n\t{\n\t\tlet result = this.vars[name];\n\t\tif (result === undefined)\n\t\t\tresult = this.globals[name];\n\t\treturn result;\n\t}\n\n\tset(name, value)\n\t{\n\t\tthis.vars[name] = value;\n\t}\n};\n\n/// Exceptions\n\n// Note that extending ``Error`` doesn't work, so we do it the \"classic\" way\nexport function Exception(message, fileName, lineNumber)\n{\n\tlet instance = new Error(message, fileName, lineNumber);\n\tif (Object.setPrototypeOf)\n\t\tObject.setPrototypeOf(instance, Object.getPrototypeOf(this));\n\telse\n\t\tinstance.__proto = this;\n\tinstance.__id__ = _nextid++;\n\tinstance.context = null;\n\treturn instance;\n};\n\nException.prototype = Object.create(Error.prototype, {\n\tconstructor: {\n\t\tvalue: Error,\n\t\tenumerable: false,\n\t\twritable: true,\n\t\tconfigurable: true\n\t}\n});\n\nif (Object.setPrototypeOf)\n\tObject.setPrototypeOf(Exception, Error);\nelse\n\tException.__proto__ = Error;\n\nException.prototype.__getattr__ = function __getattr__(attrname)\n{\n\tswitch (attrname)\n\t{\n\t\tcase \"context\":\n\t\t\treturn this.context;\n\t\tdefault:\n\t\t\tthrow new AttributeError(this, attrname);\n\t}\n};\n\n// Exceptions used internally by UL4 for flow control\nexport class InternalException extends Exception\n{\n};\n\n// Control flow exceptions\nexport class ReturnException extends InternalException\n{\n\tconstructor(result)\n\t{\n\t\tsuper(\"return\");\n\t\tthis.result = result;\n\t}\n};\n\nexport class BreakException extends InternalException\n{\n\tconstructor()\n\t{\n\t\tsuper(\"break\");\n\t}\n};\n\nexport class ContinueException extends InternalException\n{\n\tconstructor()\n\t{\n\t\tsuper(\"continue\");\n\t}\n};\n\n// Real exceptions raised by various parts of UL4\nexport class SyntaxError extends Exception\n{\n};\n\nexport class LValueRequiredError extends SyntaxError\n{\n\tconstructor()\n\t{\n\t\tsuper(\"lvalue required\");\n\t}\n};\n\nexport class TypeError extends Exception\n{\n};\n\nexport class ValueError extends Exception\n{\n};\n\nexport class ArgumentError extends Exception\n{\n};\n\nexport class ParameterError extends Exception\n{\n};\n\nexport class NotSubscriptableError extends Exception\n{\n\tconstructor(obj)\n\t{\n\t\tsuper(\"Object of type \" + _type(obj) + \" is not subscriptable\");\n\t\tthis.obj = obj;\n\t}\n\n\ttoString()\n\t{\n\t\treturn \"Object of type \" + _type(this.obj) + \" is not subscriptable\";\n\t}\n};\n\nexport class ZeroDivisionError extends Exception\n{\n\tconstructor()\n\t{\n\t\tsuper(\"division by zero\");\n\t}\n};\n\nexport class IndexError extends Exception\n{\n\tconstructor(obj, index)\n\t{\n\t\tsuper(\"index \" + _repr(index) + \" out of range\");\n\t\tthis.obj = obj;\n\t\tthis.index = index;\n\t}\n\n\ttoString()\n\t{\n\t\treturn \"index \" + this.index + \" out of range for \" + _type(this.obj);\n\t}\n};\n\nexport class AttributeError extends Exception\n{\n\tconstructor(obj, attrname)\n\t{\n\t\tsuper(\"object of type \" + _type(obj) + \" has no attribute \" + _repr(attrname));\n\t\tthis.obj = obj;\n\t\tthis.attrname = attrname;\n\t}\n};\n\nexport class KeyError extends Exception\n{\n\tconstructor(obj, key)\n\t{\n\t\tsuper(\"key \"  + _repr(key) + \" not found in object of type \" + _type(obj));\n\t\tthis.obj = obj;\n\t\tthis.key = key;\n\t}\n};\n\nexport class NotImplementedError extends Exception\n{\n};\n\n/// Exception that wraps other exceptions while they bubble up the stack\nexport class LocationError extends Exception\n{\n\tconstructor(location)\n\t{\n\t\tsuper(\"nested exception in \" + _repr(location));\n\t\tthis.location = location;\n\t}\n\n\t_templateprefix()\n\t{\n\t\tlet template = this.location.template;\n\t\tlet out = [];\n\t\tif (template.parenttemplate !== null)\n\t\t\tout.push(\"in local template \");\n\t\telse\n\t\t\tout.push(\"in template \");\n\t\tlet first = true;\n\t\twhile (template != null)\n\t\t{\n\t\t\tif (first)\n\t\t\t\tfirst = false;\n\t\t\telse\n\t\t\t\tout.push(\" in \");\n\t\t\tout.push(template.name ? _repr(template.name) : \"(unnamed)\");\n\t\t\ttemplate = template.parenttemplate;\n\t\t}\n\t\treturn out.join(\"\");\n\t}\n\n\ttoString()\n\t{\n\t\tlet template = this.location.template;\n\t\tlet templateprefix = this._templateprefix();\n\n\t\tlet prefix = this.location.startsourceprefix;\n\t\tlet code = this.location.startsource;\n\t\tlet suffix = this.location.startsourcesuffix;\n\t\tprefix = _repr(prefix).slice(1, -1);\n\t\tcode = _repr(code).slice(1, -1);\n\t\tsuffix = _repr(suffix).slice(1, -1);\n\n\t\tlet text = prefix + code + suffix;\n\t\tlet underline = _str_repeat(\"\\u00a0\", prefix.length) + _str_repeat(\"~\", code.length);\n\n\t\tlet pos = \"offset \" + this.location.pos.start + \":\" + this.location.pos.stop + \"; line \" + this.location.startline + \"; col \" + this.location.startcol;\n\n\t\tlet message = templateprefix + \": \" + pos + \"\\n\" + text + \"\\n\" + underline;\n\t\treturn message;\n\t}\n\n\t__getattr__(attrname)\n\t{\n\t\tswitch (attrname)\n\t\t{\n\t\t\tcase \"context\":\n\t\t\t\treturn this.context;\n\t\t\tcase \"location\":\n\t\t\t\treturn this.location;\n\t\t\tdefault:\n\t\t\t\tthrow new AttributeError(this, attrname);\n\t\t}\n\t}\n};\n\n/// Classes for the syntax tree\nexport class AST extends Proto\n{\n\tconstructor(template, startpos, stoppos=null)\n\t{\n\t\tsuper();\n\t\tthis.template = template;\n\t\tthis.startpos = startpos;\n\t\tthis._startline = null;\n\t\tthis._startcol = null;\n\t\tthis.stoppos = stoppos;\n\t\tthis._stopline = null;\n\t\tthis._stopcol = null;\n\t}\n\n\tget startline()\n\t{\n\t\tif (this._startline === null)\n\t\t\t[this._startline, this._startcol] = _lineColFromPos(this.template._source, this.startpos.start);\n\t\treturn this._startline;\n\t}\n\n\tget startcol()\n\t{\n\t\tif (this._startcol === null)\n\t\t\t[this._startline, this._startcol] = _lineColFromPos(this.template._source, this.startpos.start);\n\t\treturn this._startcol;\n\t}\n\n\tget startsource()\n\t{\n\t\treturn this.startpos.of(this.template._source);\n\t}\n\n\tget startsourceprefix()\n\t{\n\t\treturn _sourceprefix(this.template._source, this.startpos.start);\n\t}\n\n\tget startsourcesuffix()\n\t{\n\t\treturn _sourcesuffix(this.template._source, this.startpos.stop);\n\t}\n\n\tget fullsource()\n\t{\n\t\treturn this.template._source;\n\t}\n\n\tget pos()\n\t{\n\t\tif (this.stoppos === null)\n\t\t\treturn this.startpos;\n\t\telse\n\t\t\treturn new slice(this.startpos.start, this.stoppos.stop);\n\t}\n\n\tget source()\n\t{\n\t\treturn this.pos.of(this.template._source);\n\t}\n\n\tget sourceprefix()\n\t{\n\t\treturn _sourceprefix(this.template._source, this.pos.start);\n\t}\n\n\tget sourcesuffix()\n\t{\n\t\treturn _sourcesuffix(this.template._source, this.pos.stop);\n\t}\n\n\tget stopline()\n\t{\n\t\tif (this._stopline === null)\n\t\t\t[this._stopline, this._stopcol] = _lineColFromPos(this.template._source, this.stoppos.stop);\n\t\treturn this._stopline;\n\t}\n\n\tget stopcol()\n\t{\n\t\tif (this._stopcol === null)\n\t\t\t[this._stopline, this._stopcol] = _lineColFromPos(this.template._source, this.stoppos.stop);\n\t\treturn this._stopcol;\n\t}\n\n\tget stopsource()\n\t{\n\t\treturn this.stoppos != null ? this.stoppos.of(this.template._source) : null;\n\t}\n\n\tget stopsourceprefix()\n\t{\n\t\treturn this.stoppos != null ? _sourceprefix(this.template._source, this.stoppos.start) : null;\n\t}\n\n\tget stopsourcesuffix()\n\t{\n\t\treturn this.stoppos != null ? _sourcesuffix(this.template._source, this.stoppos.stop) : null;\n\t}\n\n\t__getattr__(attrname)\n\t{\n\t\tif (\n\t\t\tattrname === \"type\" ||\n\t\t\tattrname === \"startpos\" ||\n\t\t\tattrname === \"startline\" ||\n\t\t\tattrname === \"startcol\" ||\n\t\t\tattrname === \"startsource\" ||\n\t\t\tattrname === \"startsourceprefix\" ||\n\t\t\tattrname === \"startsourcesuffix\" ||\n\t\t\tattrname === \"pos\" ||\n\t\t\tattrname === \"source\" ||\n\t\t\tattrname === \"sourceprefix\" ||\n\t\t\tattrname === \"sourcesuffix\" ||\n\t\t\tattrname === \"fullsource\"\n\t\t)\n\t\t\treturn this[attrname];\n\t\telse if (this._ul4onattrs.indexOf(attrname) >= 0)\n\t\t\treturn this[attrname];\n\t\tthrow new AttributeError(this, attrname);\n\t}\n\n\t__setitem__(attrname, value)\n\t{\n\t\tthrow new TypeError(\"object is immutable\");\n\t}\n\n\t__str__()\n\t{\n\t\tlet out = [];\n\t\tthis._str(out);\n\t\treturn _formatsource(out);\n\t}\n\n\t__repr__()\n\t{\n\t\tlet out = [];\n\t\tthis._repr(out);\n\t\treturn _formatsource(out);\n\t}\n\n\t_decorate_exception(exc)\n\t{\n\t\twhile (exc.context !== undefined && exc.context !== null)\n\t\t\texc = exc.context;\n\t\texc.context = new LocationError(this);\n\t}\n\n\t_handle_eval(context)\n\t{\n\t\ttry\n\t\t{\n\t\t\treturn this._eval(context);\n\t\t}\n\t\tcatch (exc)\n\t\t{\n\t\t\tif (!(exc instanceof InternalException) && !(exc instanceof LocationError))\n\t\t\t\tthis._decorate_exception(exc);\n\t\t\tthrow exc;\n\t\t}\n\t}\n\n\t_handle_eval_set(context, value)\n\t{\n\t\ttry\n\t\t{\n\t\t\treturn this._eval_set(context, value);\n\t\t}\n\t\tcatch (exc)\n\t\t{\n\t\t\tif (!(exc instanceof LocationError))\n\t\t\t\tthis._decorate_exception(exc);\n\t\t\tthrow exc;\n\t\t}\n\t}\n\n\t_eval_set(context, value)\n\t{\n\t\tthrow new LValueRequiredError();\n\t}\n\n\t_handle_eval_modify(context, operator, value)\n\t{\n\t\ttry\n\t\t{\n\t\t\treturn this._eval_modify(context, operator, value);\n\t\t}\n\t\tcatch (exc)\n\t\t{\n\t\t\tif (!(exc instanceof LocationError))\n\t\t\t\tthis._decorate_exception(exc);\n\t\t\tthrow exc;\n\t\t}\n\t}\n\n\t_eval_modify(context, operator, value)\n\t{\n\t\tthrow new LValueRequiredError();\n\t}\n\n\t_repr(out)\n\t{\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(this.source.replace(/\\r?\\n/g, ' '));\n\t}\n\n\tul4ondump(encoder)\n\t{\n\t\tfor (let attrname of this._ul4onattrs)\n\t\t\tencoder.dump(this[attrname]);\n\t}\n\n\tul4onload(decoder)\n\t{\n\t\tfor (let attrname of this._ul4onattrs)\n\t\t\tthis[attrname] = decoder.load();\n\t}\n};\n\n// used in ul4ondump/ul4ondump to automatically dump these attributes\nAST.prototype._ul4onattrs = [\"template\", \"startpos\"];\n\nexport class TextAST extends AST\n{\n\tconstructor(template, pos)\n\t{\n\t\tsuper(template, pos);\n\t}\n\n\tget text()\n\t{\n\t\treturn this.source;\n\t}\n\n\t_eval(context)\n\t{\n\t\tcontext.output(this.text);\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(\"text \");\n\t\tout.push(_repr(this.text));\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<TextAST \");\n\t\tout.push(_repr(this.text));\n\t\tout.push(\">\");\n\t}\n};\n\nexport class IndentAST extends TextAST\n{\n\tconstructor(template, pos, text)\n\t{\n\t\tsuper(template, pos);\n\t\tthis._text = text;\n\t}\n\n\tget text()\n\t{\n\t\tif (this.template !== undefined)\n\t\t\treturn this._text === null ? this.source : this._text;\n\t\telse\n\t\t\treturn null;\n\t}\n\n\t_eval(context)\n\t{\n\t\tfor (let indent of context.indents)\n\t\t\tcontext.output(indent);\n\t\tcontext.output(this.text);\n\t}\n\n\tul4ondump(encoder)\n\t{\n\t\tsuper.ul4ondump(encoder);\n\n\t\tif (this._text === this.source)\n\t\t\tencoder.dump(null);\n\t\telse\n\t\t\tencoder.dump(this._text);\n\t}\n\n\tul4onload(decoder)\n\t{\n\t\tsuper.ul4onload(decoder);\n\t\tthis._text = decoder.load();\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(\"indent \");\n\t\tout.push(_repr(this.text));\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<IndentAST \");\n\t\tout.push(_repr(this.text));\n\t\tout.push(\">\");\n\t}\n};\n\nexport class LineEndAST extends TextAST\n{\n\t_str(out)\n\t{\n\t\tout.push(\"lineend \");\n\t\tout.push(_repr(this.text));\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<LineEndAST \");\n\t\tout.push(_repr(this.text));\n\t\tout.push(\">\");\n\t}\n};\n\nexport class CodeAST extends AST\n{\n};\n\nexport class ConstAST extends CodeAST\n{\n\tconstructor(template, pos, value)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.value = value;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<ConstAST value=\");\n\t\tout.push(_repr(this.value));\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\treturn this.value;\n\t}\n};\n\nConstAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"value\"]);\n\nexport class ItemArgBase extends CodeAST\n{\n\t_handle_eval_list(context, result)\n\t{\n\t\ttry\n\t\t{\n\t\t\treturn this._eval_list(context, result);\n\t\t}\n\t\tcatch (exc)\n\t\t{\n\t\t\tif (!(exc instanceof InternalException) && !(exc instanceof LocationError))\n\t\t\t\tthis._decorate_exception(exc);\n\t\t\tthrow exc;\n\t\t}\n\t}\n\n\t_handle_eval_set(context, result)\n\t{\n\t\ttry\n\t\t{\n\t\t\treturn this._eval_set(context, result);\n\t\t}\n\t\tcatch (exc)\n\t\t{\n\t\t\tif (!(exc instanceof InternalException) && !(exc instanceof LocationError))\n\t\t\t\tthis._decorate_exception(exc);\n\t\t\tthrow exc;\n\t\t}\n\t}\n\n\t_handle_eval_dict(context, result)\n\t{\n\t\ttry\n\t\t{\n\t\t\treturn this._eval_dict(context, result);\n\t\t}\n\t\tcatch (exc)\n\t\t{\n\t\t\tif (!(exc instanceof InternalException) && !(exc instanceof LocationError))\n\t\t\t\tthis._decorate_exception(exc);\n\t\t\tthrow exc;\n\t\t}\n\t}\n\n\t_handle_eval_call(context, args, kwargs)\n\t{\n\t\ttry\n\t\t{\n\t\t\treturn this._eval_call(context, args, kwargs);\n\t\t}\n\t\tcatch (exc)\n\t\t{\n\t\t\tif (!(exc instanceof InternalException) && !(exc instanceof LocationError))\n\t\t\t\tthis._decorate_exception(exc);\n\t\t\tthrow exc;\n\t\t}\n\t}\n};\n\nexport class SeqItemAST extends ItemArgBase\n{\n\tconstructor(template, pos, value)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.value = value;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<SeqItemAST value=\");\n\t\tout.push(_repr(this.value));\n\t\tout.push(\">\");\n\t}\n\n\t_eval_list(context, result)\n\t{\n\t\tlet value = this.value._handle_eval(context);\n\t\tresult.push(value);\n\t}\n\n\t_eval_set(context, result)\n\t{\n\t\tlet value = this.value._handle_eval(context);\n\t\tresult.add(value);\n\t}\n};\n\nSeqItemAST.prototype._ul4onattrs = ItemArgBase.prototype._ul4onattrs.concat([\"value\"]);\n\nexport class UnpackSeqItemAST extends ItemArgBase\n{\n\tconstructor(template, pos, value)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.value = value;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<UnpackSeqItemAST value=\");\n\t\tout.push(_repr(this.value));\n\t\tout.push(\">\");\n\t}\n\n\t_eval_list(context, result)\n\t{\n\t\tlet value = this.value._handle_eval(context);\n\t\tfor (let iter = _iter(value);;)\n\t\t{\n\t\t\tlet item = iter.next();\n\t\t\tif (item.done)\n\t\t\t\tbreak;\n\t\t\tresult.push(item.value);\n\t\t}\n\t}\n\n\t_eval_set(context, result)\n\t{\n\t\tlet value = this.value._handle_eval(context);\n\t\tfor (let iter = _iter(value);;)\n\t\t{\n\t\t\tlet item = iter.next();\n\t\t\tif (item.done)\n\t\t\t\tbreak;\n\t\t\tresult.add(item.value);\n\t\t}\n\t}\n};\n\nUnpackSeqItemAST.prototype._ul4onattrs = ItemArgBase.prototype._ul4onattrs.concat([\"value\"]);\n\nexport class DictItemAST extends ItemArgBase\n{\n\tconstructor(template, pos, key, value)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.key = key;\n\t\tthis.value = value;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<DictItemAST key=\");\n\t\tout.push(_repr(this.key));\n\t\tout.push(\" value=\");\n\t\tout.push(_repr(this.value));\n\t\tout.push(\">\");\n\t}\n\n\t_eval_dict(context, result)\n\t{\n\t\tlet key = this.key._handle_eval(context);\n\t\tlet value = this.value._handle_eval(context);\n\t\t_setmap(result, key, value);\n\t}\n};\n\nDictItemAST.prototype._ul4onattrs = ItemArgBase.prototype._ul4onattrs.concat([\"key\", \"value\"]);\n\nexport class UnpackDictItemAST extends ItemArgBase\n{\n\tconstructor(template, pos, item)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.item = item;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<UnpackDictItemAST item=\");\n\t\tout.push(_repr(this.item));\n\t\tout.push(\">\");\n\t}\n\n\t_eval_dict(context, result)\n\t{\n\t\tlet item = this.item._handle_eval(context);\n\t\tif (_islist(item))\n\t\t{\n\t\t\tfor (let subitem of item)\n\t\t\t{\n\t\t\t\tif (!_islist(subitem) || subitem.length != 2)\n\t\t\t\t\tthrow new ArgumentError(\"** requires a list of (key, value) pairs\");\n\t\t\t\t_setmap(result, subitem[0], subitem[1]);\n\t\t\t}\n\t\t}\n\t\telse if (_ismap(item))\n\t\t{\n\t\t\titem.forEach(function(value, key) {\n\t\t\t\t_setmap(result, key, value);\n\t\t\t});\n\t\t}\n\t\telse if (_isobject(item))\n\t\t{\n\t\t\tfor (let key in item)\n\t\t\t\t_setmap(result, key, item[key]);\n\t\t}\n\t}\n};\n\nUnpackDictItemAST.prototype._ul4onattrs = ItemArgBase.prototype._ul4onattrs.concat([\"item\"]);\n\nexport class PosArgAST extends ItemArgBase\n{\n\tconstructor(template, pos, value)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.value = value;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<PosArgAST value=\");\n\t\tthis.value._repr(out);\n\t\tout.push(\">\");\n\t}\n\n\t_eval_call(context, args, kwargs)\n\t{\n\t\tlet value = this.value._handle_eval(context);\n\t\targs.push(value);\n\t}\n};\n\nPosArgAST.prototype._ul4onattrs = ItemArgBase.prototype._ul4onattrs.concat([\"value\"]);\n\nexport class KeywordArgAST extends ItemArgBase\n{\n\tconstructor(template, pos, name, value)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.name = name;\n\t\tthis.value = value;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<KeywordArgAST name=\");\n\t\tout.push(_repr(this.name));\n\t\tout.push(\" value=\");\n\t\tthis.value._repr(out);\n\t\tout.push(\">\");\n\t}\n\n\t_eval_call(context, args, kwargs)\n\t{\n\t\tif (kwargs.hasOwnProperty(this.name))\n\t\t\tthrow new ArgumentError(\"duplicate keyword argument \" + this.name);\n\t\tlet value = this.value._handle_eval(context);\n\t\tkwargs[this.name] = value;\n\t}\n};\n\nKeywordArgAST.prototype._ul4onattrs = ItemArgBase.prototype._ul4onattrs.concat([\"name\", \"value\"]);\n\nexport class UnpackListArgAST extends ItemArgBase\n{\n\tconstructor(template, pos, item)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.item = item;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<UnpackListArgAST item=\");\n\t\tthis.item._repr(out);\n\t\tout.push(\">\");\n\t}\n\n\t_eval_call(context, args, kwargs)\n\t{\n\t\tlet item = this.item._handle_eval(context);\n\t\targs.push(...item);\n\t}\n};\n\nUnpackListArgAST.prototype._ul4onattrs = ItemArgBase.prototype._ul4onattrs.concat([\"item\"]);\n\nexport class UnpackDictArgAST extends ItemArgBase\n{\n\tconstructor(template, pos, item)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.item = item;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<UnpackDictArgAST item=\");\n\t\tthis.item._repr(out);\n\t\tout.push(\">\");\n\t}\n\n\t_eval_call(context, args, kwargs)\n\t{\n\t\tlet item = this.item._handle_eval(context);\n\t\tif (_islist(item))\n\t\t{\n\t\t\tfor (let subitem of item)\n\t\t\t{\n\t\t\t\tif (!_islist(subitem) || subitem.length != 2)\n\t\t\t\t\tthrow new ArgumentError(\"** requires a list of (key, value) pairs\");\n\t\t\t\tlet [key, value] = subitem;\n\t\t\t\tif (kwargs.hasOwnProperty(key))\n\t\t\t\t\tthrow new ArgumentError(\"duplicate keyword argument \" + key);\n\t\t\t\tkwargs[key] = value;\n\t\t\t}\n\t\t}\n\t\telse if (_ismap(item))\n\t\t{\n\t\t\titem.forEach(function(value, key) {\n\t\t\t\tif (kwargs.hasOwnProperty(key))\n\t\t\t\t\tthrow new ArgumentError(\"duplicate keyword argument \" + key);\n\t\t\t\tkwargs[key] = value;\n\t\t\t});\n\t\t}\n\t\telse if (_isobject(item))\n\t\t{\n\t\t\tfor (let key in item)\n\t\t\t{\n\t\t\t\tif (kwargs.hasOwnProperty(key))\n\t\t\t\t\tthrow new ArgumentError(\"duplicate keyword argument \" + key);\n\t\t\t\tkwargs[key] = item[key];\n\t\t\t}\n\t\t}\n\t}\n};\n\nUnpackDictArgAST.prototype._ul4onattrs = ItemArgBase.prototype._ul4onattrs.concat([\"item\"]);\n\nexport class ListAST extends CodeAST\n{\n\tconstructor(template, pos)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.items = [];\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<ListAST\");\n\t\tfor (let item of this.items)\n\t\t{\n\t\t\tout.push(\" \");\n\t\t\titem._repr(out);\n\t\t}\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet result = [];\n\t\tfor (let item of this.items)\n\t\t\titem._handle_eval_list(context, result);\n\t\treturn result;\n\t}\n};\n\nListAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"items\"]);\n\nexport class ListCompAST extends CodeAST\n{\n\tconstructor(template, pos, item, varname, container, condition)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.item = item;\n\t\tthis.varname = varname;\n\t\tthis.container = container;\n\t\tthis.condition = condition;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<ListCompAST\");\n\t\tout.push(\" item=\");\n\t\tthis.item._repr(out);\n\t\tout.push(\" varname=\");\n\t\tout.push(_repr(this.varname));\n\t\tout.push(\" container=\");\n\t\tthis.container._repr(out);\n\t\tif (this.condition !== null)\n\t\t{\n\t\t\tout.push(\" condition=\");\n\t\t\tthis.condition._repr(out);\n\t\t}\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet container = this.container._handle_eval(context);\n\n\t\tlet localcontext = context.inheritvars();\n\n\t\tlet result = [];\n\t\tfor (let iter = _iter(container);;)\n\t\t{\n\t\t\tlet item = iter.next();\n\t\t\tif (item.done)\n\t\t\t\tbreak;\n\t\t\tlet varitems = _unpackvar(this.varname, item.value);\n\t\t\tfor (let [lvalue, value] of varitems)\n\t\t\t\tlvalue._handle_eval_set(localcontext, value);\n\t\t\tif (this.condition === null || _bool(this.condition._handle_eval(localcontext)))\n\t\t\t\tresult.push(this.item._handle_eval(localcontext));\n\t\t}\n\t\treturn result;\n\t}\n};\n\nListCompAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"item\", \"varname\", \"container\", \"condition\"]);\n\nexport class SetAST extends CodeAST\n{\n\tconstructor(template, pos)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.items = [];\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<SetAST\");\n\t\tfor (let item of this.items)\n\t\t{\n\t\t\tout.push(\" \");\n\t\t\titem._repr(out);\n\t\t}\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet result = _emptyset();\n\n\t\tfor (let item of this.items)\n\t\t\titem._handle_eval_set(context, result);\n\n\t\treturn result;\n\t}\n};\n\nSetAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"items\"]);\n\nexport class SetCompAST extends CodeAST\n{\n\tconstructor(template, pos, item, varname, container, condition)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.item = item;\n\t\tthis.varname = varname;\n\t\tthis.container = container;\n\t\tthis.condition = condition;\n\t}\n\n\t__getattr__(attrname)\n\t{\n\t\tswitch (attrname)\n\t\t{\n\t\t\tcase \"item\":\n\t\t\t\treturn this.item;\n\t\t\tcase \"varname\":\n\t\t\t\treturn this.varname;\n\t\t\tcase \"container\":\n\t\t\t\treturn this.container;\n\t\t\tcase \"condition\":\n\t\t\t\treturn this.condition;\n\t\t\tdefault:\n\t\t\t\treturn super.__getattr__(attrname);\n\t\t}\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<SetCompAST\");\n\t\tout.push(\" item=\");\n\t\tthis.item._repr(out);\n\t\tout.push(\" varname=\");\n\t\tthis.varname._repr(out);\n\t\tout.push(\" container=\");\n\t\tthis.container._repr(out);\n\t\tif (this.condition !== null)\n\t\t{\n\t\t\tout.push(\" condition=\");\n\t\t\tthis.condition._repr(out);\n\t\t}\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet container = this.container._handle_eval(context);\n\n\t\tlet localcontext = context.inheritvars();\n\n\t\tlet result = _emptyset();\n\t\tfor (let iter = _iter(container);;)\n\t\t{\n\t\t\tlet item = iter.next();\n\t\t\tif (item.done)\n\t\t\t\tbreak;\n\t\t\tlet varitems = _unpackvar(this.varname, item.value);\n\t\t\tfor (let [lvalue, value] of varitems)\n\t\t\t\tlvalue._handle_eval_set(localcontext, value);\n\t\t\tif (this.condition === null || _bool(this.condition._handle_eval(localcontext)))\n\t\t\t\tresult.add(this.item._handle_eval(localcontext));\n\t\t}\n\n\t\treturn result;\n\t}\n};\n\nSetCompAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"item\", \"varname\", \"container\", \"condition\"]);\n\nexport class DictAST extends CodeAST\n{\n\tconstructor(template, pos)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.items = [];\n\t}\n\n\t__getattr__(attrname)\n\t{\n\t\tswitch (attrname)\n\t\t{\n\t\t\tcase \"items\":\n\t\t\t\treturn this.items;\n\t\t\tdefault:\n\t\t\t\treturn super.__getattr__(attrname);\n\t\t}\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<DictAST\");\n\t\tfor (let item of this.items)\n\t\t{\n\t\t\tout.push(\" \");\n\t\t\titem._repr(out);\n\t\t}\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet result = _emptymap();\n\t\tfor (let item of this.items)\n\t\t\titem._handle_eval_dict(context, result);\n\t\treturn result;\n\t}\n};\n\nDictAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"items\"]);\n\nexport class DictCompAST extends CodeAST\n{\n\tconstructor(template, pos, key, value, varname, container, condition)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.key = key;\n\t\tthis.value = value;\n\t\tthis.varname = varname;\n\t\tthis.container = container;\n\t\tthis.condition = condition;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<DictCompAST\");\n\t\tout.push(\" key=\");\n\t\tthis.key._repr(out);\n\t\tout.push(\" value=\");\n\t\tthis.value._repr(out);\n\t\tout.push(\" varname=\");\n\t\tthis.varname._repr(out);\n\t\tout.push(\" container=\");\n\t\tthis.container._repr(out);\n\t\tif (this.condition !== null)\n\t\t{\n\t\t\tout.push(\" condition=\");\n\t\t\tthis.condition._repr(out);\n\t\t}\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet container = this.container._handle_eval(context);\n\n\t\tlet localcontext = context.inheritvars();\n\n\t\tlet result = _emptymap();\n\n\t\tfor (let iter = _iter(container);;)\n\t\t{\n\t\t\tlet item = iter.next();\n\t\t\tif (item.done)\n\t\t\t\tbreak;\n\t\t\tlet varitems = _unpackvar(this.varname, item.value);\n\t\t\tfor (let [lvalue, value] of varitems)\n\t\t\t\tlvalue._handle_eval_set(localcontext, value);\n\t\t\tif (this.condition === null || _bool(this.condition._handle_eval(localcontext)))\n\t\t\t{\n\t\t\t\tlet key = this.key._handle_eval(localcontext);\n\t\t\t\tlet value = this.value._handle_eval(localcontext);\n\t\t\t\t_setmap(result, key, value);\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n};\n\nDictCompAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"key\", \"value\", \"varname\", \"container\", \"condition\"]);\n\nexport class GenExprAST extends CodeAST\n{\n\tconstructor(template, pos, item, varname, container, condition)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.item = item;\n\t\tthis.varname = varname;\n\t\tthis.container = container;\n\t\tthis.condition = condition;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<GenExprAST\");\n\t\tout.push(\" item=\");\n\t\tthis.item._repr(out);\n\t\tout.push(\" varname=\");\n\t\tthis.varname._repr(out);\n\t\tout.push(\" container=\");\n\t\tthis.container._repr(out);\n\t\tif (this.condition !== null)\n\t\t{\n\t\t\tout.push(\" condition=\");\n\t\t\tthis.condition._repr(out);\n\t\t}\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet container = this.container._handle_eval(context);\n\t\tlet iter = _iter(container);\n\n\t\tlet localcontext = context.inheritvars();\n\n\t\tlet self = this;\n\n\t\tlet result = {\n\t\t\tnext: function(){\n\t\t\t\twhile (true)\n\t\t\t\t{\n\t\t\t\t\tlet item = iter.next();\n\t\t\t\t\tif (item.done)\n\t\t\t\t\t\treturn item;\n\t\t\t\t\tlet varitems = _unpackvar(self.varname, item.value);\n\t\t\t\t\tfor (let [lvalue, value] of varitems)\n\t\t\t\t\t\tlvalue._handle_eval_set(localcontext, value);\n\t\t\t\t\tif (self.condition === null || _bool(self.condition._handle_eval(localcontext)))\n\t\t\t\t\t{\n\t\t\t\t\t\tlet value = self.item._handle_eval(localcontext);\n\t\t\t\t\t\treturn {value: value, done: false};\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\treturn result;\n\t}\n};\n\nGenExprAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"item\", \"varname\", \"container\", \"condition\"]);\n\nexport class VarAST extends CodeAST\n{\n\tconstructor(template, pos, name)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.name = name;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<VarAST name=\");\n\t\tout.push(_repr(this.name));\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\treturn this._get(context, this.name);\n\t}\n\n\t_eval_set(context, value)\n\t{\n\t\tthis._set(context, this.name, value);\n\t}\n\n\t_eval_modify(context, operator, value)\n\t{\n\t\tthis._modify(context, operator, this.name, value);\n\t}\n\n\t_get(context, name)\n\t{\n\t\treturn context.get(name);\n\t}\n\n\t_set(context, name, value)\n\t{\n\t\tcontext.set(name, value);\n\t}\n\n\t_modify(context, operator, name, value)\n\t{\n\t\tlet newvalue = operator._ido(context.get(name), value);\n\t\tcontext.set(name, newvalue);\n\t}\n};\n\nVarAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"name\"]);\n\nexport class UnaryAST extends CodeAST\n{\n\tconstructor(template, pos, obj)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.obj = obj;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<\");\n\t\tout.push(this.constructor.name);\n\t\tout.push(\" obj=\");\n\t\tthis.obj._repr(out);\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet obj = this.obj._handle_eval(context);\n\t\treturn this._do(obj);\n\t}\n};\n\nUnaryAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"obj\"]);\n\n// Negation\nexport class NegAST extends UnaryAST\n{\n\t_do(obj)\n\t{\n\t\tif (obj !== null && typeof(obj.__neg__) === \"function\")\n\t\t\treturn obj.__neg__();\n\t\treturn -obj;\n\t}\n};\n\n// Bitwise not\nexport class BitNotAST extends UnaryAST\n{\n\t_do(obj)\n\t{\n\t\treturn -obj-1;\n\t}\n};\n\n// Not\nexport class NotAST extends UnaryAST\n{\n\t_do(obj)\n\t{\n\t\treturn !_bool(obj);\n\t}\n};\n\n// If expression\nexport class IfAST extends CodeAST\n{\n\tconstructor(template, pos, objif, objcond, objelse)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.objif = objif;\n\t\tthis.objcond = objcond;\n\t\tthis.objelse = objelse;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<\");\n\t\tout.push(this.constructor.name);\n\t\tout.push(+1);\n\t\tout.push(\"objif=\");\n\t\tthis.objif._repr(out);\n\t\tout.push(0);\n\t\tout.push(\"objcond=\");\n\t\tthis.objcond._repr(out);\n\t\tout.push(0);\n\t\tout.push(\"objelse=\");\n\t\tthis.objelse._repr(out);\n\t\tout.push(-1);\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet result;\n\t\tlet condvalue = this.objcond._handle_eval(context);\n\t\tif (_bool(condvalue))\n\t\t\tresult = this.objif._handle_eval(context);\n\t\telse\n\t\t\tresult = this.objelse._handle_eval(context);\n\t\treturn result;\n\t}\n};\n\nIfAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"objif\", \"objcond\", \"objelse\"]);\n\nexport class ReturnAST extends UnaryAST\n{\n\t_eval(context)\n\t{\n\t\tlet result = this.obj._handle_eval(context);\n\t\tthrow new ReturnException(result);\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(\"return \");\n\t\tthis.obj._str(out);\n\t}\n};\n\nexport class PrintAST extends UnaryAST\n{\n\t_eval(context)\n\t{\n\t\tlet obj = this.obj._handle_eval(context);\n\t\tlet output = _str(obj);\n\t\tcontext.output(output);\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(\"print \");\n\t\tthis.obj._str(out);\n\t}\n};\n\nexport class PrintXAST extends UnaryAST\n{\n\t_eval(context)\n\t{\n\t\tlet obj = this.obj._handle_eval(context);\n\t\tlet output = _xmlescape(obj);\n\t\tcontext.output(output);\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(\"printx \");\n\t\tthis.obj._str(out);\n\t}\n};\n\nexport class BinaryAST extends CodeAST\n{\n\tconstructor(template, pos, obj1, obj2)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.obj1 = obj1;\n\t\tthis.obj2 = obj2;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<\");\n\t\tout.push(this.constructor.name);\n\t\tout.push(\" obj1=\");\n\t\tthis.obj1._repr(out);\n\t\tout.push(\" obj2=\");\n\t\tthis.obj2._repr(out);\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet obj1 = this.obj1._handle_eval(context);\n\t\tlet obj2 = this.obj2._handle_eval(context);\n\t\treturn this._do(obj1, obj2);\n\t}\n};\n\nBinaryAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"obj1\", \"obj2\"]);\n\n// Item access and assignment: dict[key], list[index], string[index], color[index]\nexport class ItemAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\tlet result = this._get(obj1, obj2);\n\t\treturn result;\n\t}\n\n\t_eval_set(context, value)\n\t{\n\t\tlet obj1 = this.obj1._handle_eval(context);\n\t\tlet obj2 = this.obj2._handle_eval(context);\n\t\tthis._set(obj1, obj2, value);\n\t}\n\n\t_eval_modify(context, operator, value)\n\t{\n\t\tlet obj1 = this.obj1._handle_eval(context);\n\t\tlet obj2 = this.obj2._handle_eval(context);\n\t\tthis._modify(operator, obj1, obj2, value);\n\t}\n\n\t_get(container, key)\n\t{\n\t\tif (typeof(container) === \"string\" || _islist(container))\n\t\t{\n\t\t\tif (key instanceof slice)\n\t\t\t{\n\t\t\t\tlet start = key.start, stop = key.stop;\n\t\t\t\tif (start === undefined || start === null)\n\t\t\t\t\tstart = 0;\n\t\t\t\tif (stop === undefined || stop === null)\n\t\t\t\t\tstop = container.length;\n\t\t\t\treturn container.slice(start, stop);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlet orgkey = key;\n\t\t\t\tif (key < 0)\n\t\t\t\t\tkey += container.length;\n\t\t\t\tif (key < 0 || key >= container.length)\n\t\t\t\t\tthrow new IndexError(container, orgkey);\n\t\t\t\treturn container[key];\n\t\t\t}\n\t\t}\n\t\telse if (container && typeof(container.__getitem__) === \"function\") // objects without ``_getitem__`` don't support item access\n\t\t\treturn container.__getitem__(key);\n\t\telse if (_ismap(container))\n\t\t\treturn container.get(key);\n\t\telse\n\t\t\tthrow new TypeError(_type(container) + \" object is not subscriptable\");\n\t}\n\n\t_set(container, key, value)\n\t{\n\t\tif (_islist(container))\n\t\t{\n\t\t\tif (key instanceof slice)\n\t\t\t{\n\t\t\t\tlet start = key.start, stop = key.stop;\n\t\t\t\tif (start === null)\n\t\t\t\t\tstart = 0;\n\t\t\t\telse if (start < 0)\n\t\t\t\t\tstart += container.length;\n\t\t\t\tif (start < 0)\n\t\t\t\t\tstart = 0;\n\t\t\t\telse if (start > container.length)\n\t\t\t\t\tstart = container.length;\n\t\t\t\tif (stop === null)\n\t\t\t\t\tstop = container.length;\n\t\t\t\telse if (stop < 0)\n\t\t\t\t\tstop += container.length;\n\t\t\t\tif (stop < 0)\n\t\t\t\t\tstop = 0;\n\t\t\t\telse if (stop > container.length)\n\t\t\t\t\tstop = container.length;\n\t\t\t\tif (stop < start)\n\t\t\t\t\tstop = start;\n\t\t\t\tcontainer.splice(start, stop-start); // Remove old element\n\t\t\t\tfor (let iter = _iter(value);;)\n\t\t\t\t{\n\t\t\t\t\tlet item = iter.next();\n\t\t\t\t\tif (item.done)\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcontainer.splice(start++, 0, item.value);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlet orgkey = key;\n\t\t\t\tif (key < 0)\n\t\t\t\t\tkey += container.length;\n\t\t\t\tif (key < 0 || key >= container.length)\n\t\t\t\t\tthrow new IndexError(container, orgkey);\n\t\t\t\tcontainer[key] = value;\n\t\t\t}\n\t\t}\n\t\telse if (container && typeof(container.__setitem__) === \"function\") // test this before the generic object test\n\t\t\tcontainer.__setitem__(key, value);\n\t\telse if (_ismap(container))\n\t\t\tcontainer.set(key, value);\n\t\telse if (_isobject(container))\n\t\t\tcontainer[key] = value;\n\t\telse\n\t\t\tthrow new NotSubscriptableError(container);\n\t}\n\n\t_modify(operator, container, key, value)\n\t{\n\t\tthis._set(container, key, operator._ido(this._get(container, key), value));\n\t}\n};\n\n// Identifty test operator ``is``\nexport class IsAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\treturn obj1 === obj2;\n\t}\n};\n\n// Inverted identity test operator ``is not``\nexport class IsNotAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\treturn obj1 !== obj2;\n\t}\n};\n\n// Comparison operator ==\nexport class EQAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\treturn _eq(obj1, obj2);\n\t}\n};\n\n// Comparison operator !=\nexport class NEAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\treturn _ne(obj1, obj2);\n\t}\n};\n\n// Comparison operator <\nexport class LTAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\treturn _lt(obj1, obj2);\n\t}\n};\n\n// Comparison operator <=\nexport class LEAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\treturn _le(obj1, obj2);\n\t}\n};\n\n// Comparison operator >\nexport class GTAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\treturn _gt(obj1, obj2);\n\t}\n};\n\n// Comparison operator >=\nexport class GEAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\treturn _ge(obj1, obj2);\n\t}\n};\n\n// Containment test: string in string, obj in list, key in dict, value in rgb\nexport class ContainsAST extends BinaryAST\n{\n\t_do(obj, container)\n\t{\n\t\tif (typeof(obj) === \"string\" && typeof(container) === \"string\")\n\t\t{\n\t\t\treturn container.indexOf(obj) !== -1;\n\t\t}\n\t\telse if (_islist(container))\n\t\t{\n\t\t\treturn container.indexOf(obj) !== -1;\n\t\t}\n\t\telse if (container && typeof(container.__contains__) === \"function\") // test this before the generic object test\n\t\t\treturn container.__contains__(obj);\n\t\telse if (_ismap(container) || _isset(container))\n\t\t\treturn container.has(obj);\n\t\telse if (_isobject(container))\n\t\t{\n\t\t\tfor (let key in container)\n\t\t\t{\n\t\t\t\tif (key === obj)\n\t\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\telse if (_iscolor(container))\n\t\t{\n\t\t\treturn container._r === obj || container._g === obj || container._b === obj || container._a === obj;\n\t\t}\n\t\tthrow new TypeError(_type(container) + \" object is not iterable\");\n\t}\n};\n\n// Inverted containment test\nexport class NotContainsAST extends BinaryAST\n{\n\t_do(obj, container)\n\t{\n\t\treturn !ContainsAST.prototype._do(obj, container);\n\t}\n};\n\n// Addition: num + num, string + string\nexport class AddAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\tif (obj1 && typeof(obj1.__add__) === \"function\")\n\t\t\treturn obj1.__add__(obj2);\n\t\telse if (obj2 && typeof(obj2.__radd__) === \"function\")\n\t\t\treturn obj2.__radd__(obj1);\n\t\tif (obj1 === null || obj1 === undefined || obj2 === null || obj2 === undefined)\n\t\t\tthrow new TypeError(_type(obj1) + \" + \" + _type(obj2) + \" is not supported\");\n\t\tif (_islist(obj1) && _islist(obj2))\n\t\t\treturn [...obj1, ...obj2];\n\t\telse\n\t\t\treturn obj1 + obj2;\n\t}\n\n\t_ido(obj1, obj2)\n\t{\n\t\tif (_islist(obj1) && _islist(obj2))\n\t\t{\n\t\t\tListProtocol.append(obj1, obj2);\n\t\t\treturn obj1;\n\t\t}\n\t\telse\n\t\t\treturn this._do(obj1, obj2);\n\t}\n};\n\n// Substraction: num - num\nexport class SubAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\tif (obj1 && typeof(obj1.__sub__) === \"function\")\n\t\t\treturn obj1.__sub__(obj2);\n\t\telse if (obj2 && typeof(obj2.__rsub__) === \"function\")\n\t\t\treturn obj2.__rsub__(obj1);\n\t\telse if (_isdate(obj1) && _isdate(obj2))\n\t\t\treturn this._date_sub(obj1, obj2);\n\t\telse if (_isdatetime(obj1) && _isdatetime(obj2))\n\t\t\treturn this._datetime_sub(obj1, obj2);\n\t\tif (obj1 === null || obj1 === undefined || obj2 === null || obj2 === undefined)\n\t\t\tthrow new TypeError(_type(obj1) + \" - \" + _type(obj2) + \" is not supported\");\n\t\treturn obj1 - obj2;\n\t}\n\n\t_date_sub(obj1, obj2)\n\t{\n\t\treturn this._datetime_sub(obj1._date, obj2._date);\n\t}\n\n\t_datetime_sub(obj1, obj2)\n\t{\n\t\tlet swap = (obj2 > obj1);\n\n\t\tif (swap)\n\t\t{\n\t\t\tlet t = obj1;\n\t\t\tobj1 = obj2;\n\t\t\tobj2 = t;\n\t\t}\n\t\t// From now on obj1 is > than obj2\n\n\t\tlet year1 = obj1.getFullYear();\n\t\tlet yearday1 = DateTimeProtocol.yearday(obj1);\n\t\tlet year2 = obj2.getFullYear();\n\t\tlet yearday2 = DateTimeProtocol.yearday(obj2);\n\n\t\tlet diffdays = 0;\n\n\t\twhile (year1 > year2)\n\t\t{\n\t\t\tdiffdays += DateProtocol.yearday(_date(year2, 12, 31));\n\t\t\t++year2;\n\t\t}\n\t\tdiffdays += yearday1 - yearday2;\n\n\t\tlet hours1 = obj1.getHours();\n\t\tlet minutes1 = obj1.getMinutes();\n\t\tlet seconds1 = obj1.getSeconds();\n\t\tlet hours2 = obj2.getHours();\n\t\tlet minutes2 = obj2.getMinutes();\n\t\tlet seconds2 = obj2.getSeconds();\n\n\t\tlet diffseconds = (seconds1 - seconds2) + 60 * ((minutes1 - minutes2) + 60 * (hours1 - hours2));\n\n\t\tlet diffmilliseconds = obj1.getMilliseconds() - obj2.getMilliseconds();\n\n\t\tif (swap)\n\t\t{\n\t\t\tdiffdays = -diffdays;\n\t\t\tdiffseconds = -diffseconds;\n\t\t\tdiffmilliseconds = -diffmilliseconds;\n\t\t}\n\t\treturn new TimeDelta(diffdays, diffseconds, 1000*diffmilliseconds);\n\t}\n\n\t_ido(obj1, obj2)\n\t{\n\t\treturn this._do(obj1, obj2);\n\t}\n};\n\n\n// Multiplication: num * num, int * str, str * int, int * list, list * int\nexport class MulAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\tif (obj1 && typeof(obj1.__mul__) === \"function\")\n\t\t\treturn obj1.__mul__(obj2);\n\t\telse if (obj2 && typeof(obj2.__rmul__) === \"function\")\n\t\t\treturn obj2.__rmul__(obj1);\n\t\tif (obj1 === null || obj1 === undefined || obj2 === null || obj2 === undefined)\n\t\t\tthrow new TypeError(obj1 + \" * \" + obj2 + \" not supported\");\n\t\telse if (_isint(obj1) || _isbool(obj1))\n\t\t{\n\t\t\tif (typeof(obj2) === \"string\")\n\t\t\t{\n\t\t\t\tif (obj1 < 0)\n\t\t\t\t\tthrow new ValueError(\"repetition counter must be positive\");\n\t\t\t\treturn _str_repeat(obj2, obj1);\n\t\t\t}\n\t\t\telse if (_islist(obj2))\n\t\t\t{\n\t\t\t\tif (obj1 < 0)\n\t\t\t\t\tthrow new ValueError(\"repetition counter must be positive\");\n\t\t\t\treturn _list_repeat(obj2, obj1);\n\t\t\t}\n\t\t}\n\t\telse if (_isint(obj2) || _isbool(obj2))\n\t\t{\n\t\t\tif (typeof(obj1) === \"string\")\n\t\t\t{\n\t\t\t\tif (obj2 < 0)\n\t\t\t\t\tthrow new ValueError(\"repetition counter must be positive\");\n\t\t\t\treturn _str_repeat(obj1, obj2);\n\t\t\t}\n\t\t\telse if (_islist(obj1))\n\t\t\t{\n\t\t\t\tif (obj2 < 0)\n\t\t\t\t\tthrow new ValueError(\"repetition counter must be positive\");\n\t\t\t\treturn _list_repeat(obj1, obj2);\n\t\t\t}\n\t\t}\n\t\treturn obj1 * obj2;\n\t}\n\n\t_ido(obj1, obj2)\n\t{\n\t\tif (_islist(obj1) && _isint(obj2))\n\t\t{\n\t\t\tif (obj2 > 0)\n\t\t\t{\n\t\t\t\tlet i = 0;\n\t\t\t\tlet targetsize = obj1.length * obj2;\n\t\t\t\twhile (obj1.length < targetsize)\n\t\t\t\t\tobj1.push(obj1[i++]);\n\t\t\t}\n\t\t\telse\n\t\t\t\tobj1.splice(0, obj1.length);\n\t\t\treturn obj1;\n\t\t}\n\t\telse\n\t\t\treturn this._do(obj1, obj2);\n\t}\n};\n\n// Truncating division\nexport class FloorDivAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\tif (obj1 && typeof(obj1.__floordiv__) === \"function\")\n\t\t\treturn obj1.__floordiv__(obj2);\n\t\telse if (obj2 && typeof(obj2.__rfloordiv__) === \"function\")\n\t\t\treturn obj2.__rfloordiv__(obj1);\n\t\tif (obj1 === null || obj1 === undefined || obj2 === null || obj2 === undefined)\n\t\t\tthrow new TypeError(_type(obj1) + \" // \" + _type(obj2) + \" not supported\");\n\t\telse if ((typeof(obj1) === \"number\" || typeof(obj1) === \"boolean\") && (typeof(obj2) === \"number\" || typeof(obj2) === \"boolean\") && obj2 == 0)\n\t\t\tthrow new ZeroDivisionError();\n\t\treturn Math.floor(obj1 / obj2);\n\t}\n\n\t_ido(obj1, obj2)\n\t{\n\t\treturn this._do(obj1, obj2);\n\t}\n};\n\n// \"Real\" division\nexport class TrueDivAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\tif (obj1 && typeof(obj1.__truediv__) === \"function\")\n\t\t\treturn obj1.__truediv__(obj2);\n\t\telse if (obj2 && typeof(obj2.__rtruediv__) === \"function\")\n\t\t\treturn obj2.__rtruediv__(obj1);\n\t\tif (obj1 === null || obj1 === undefined || obj2 === null || obj2 === undefined)\n\t\t\tthrow new TypeError(_type(obj1) + \" / \" + _type(obj2) + \" not supported\");\n\t\telse if ((typeof(obj1) === \"number\" || typeof(obj1) === \"boolean\") && (typeof(obj2) === \"number\" || typeof(obj2) === \"boolean\") && obj2 == 0)\n\t\t\tthrow new ZeroDivisionError();\n\t\treturn obj1 / obj2;\n\t}\n\n\t_ido(obj1, obj2)\n\t{\n\t\treturn this._do(obj1, obj2);\n\t}\n};\n\n// Modulo\nexport class ModAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\treturn _mod(obj1, obj2);\n\t}\n\n\t_ido(obj1, obj2)\n\t{\n\t\treturn this._do(obj1, obj2);\n\t}\n};\n\n// Bitwise left shift\nexport class ShiftLeftAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\tif (obj2 === false)\n\t\t\tobj2 = 0;\n\t\telse if (obj2 === true)\n\t\t\tobj2 = 1;\n\t\tif (obj2 < 0)\n\t\t\treturn ShiftRightAST.prototype._do(obj1, -obj2);\n\t\tif (obj1 === false)\n\t\t\tobj1 = 0;\n\t\telse if (obj1 === true)\n\t\t\tobj1 = 1;\n\t\twhile (obj2--)\n\t\t\tobj1 *= 2;\n\t\treturn obj1;\n\t}\n\n\t_ido(obj1, obj2)\n\t{\n\t\treturn this._do(obj1, obj2);\n\t}\n};\n\n// Bitwise right shift\nexport class ShiftRightAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\tif (obj2 === false)\n\t\t\tobj2 = 0;\n\t\telse if (obj2 === true)\n\t\t\tobj2 = 1;\n\t\tif (obj2 < 0)\n\t\t\treturn ShiftLeftAST.prototype._do(obj1, -obj2);\n\t\tif (obj1 === false)\n\t\t\tobj1 = 0;\n\t\telse if (obj1 === true)\n\t\t\tobj1 = 1;\n\t\twhile (obj2--)\n\t\t\tobj1 /= 2;\n\t\treturn Math.floor(obj1);\n\t}\n\n\t_ido(obj1, obj2)\n\t{\n\t\treturn this._do(obj1, obj2);\n\t}\n};\n\n// Bitwise and\nexport class BitAndAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\tif (obj2 === false)\n\t\t\tobj2 = 0;\n\t\telse if (obj2 === true)\n\t\t\tobj2 = 1;\n\t\treturn obj1 & obj2;\n\t}\n\n\t_ido(obj1, obj2)\n\t{\n\t\treturn this._do(obj1, obj2);\n\t}\n};\n\n// Bitwise exclusive or\nexport class BitXOrAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\tif (obj2 === false)\n\t\t\tobj2 = 0;\n\t\telse if (obj2 === true)\n\t\t\tobj2 = 1;\n\t\treturn obj1 ^ obj2;\n\t}\n\n\t_ido(obj1, obj2)\n\t{\n\t\treturn this._do(obj1, obj2);\n\t}\n};\n\n// Bitwise or\nexport class BitOrAST extends BinaryAST\n{\n\t_do(obj1, obj2)\n\t{\n\t\tif (obj2 === false)\n\t\t\tobj2 = 0;\n\t\telse if (obj2 === true)\n\t\t\tobj2 = 1;\n\t\treturn obj1 | obj2;\n\t}\n\n\t_ido(obj1, obj2)\n\t{\n\t\treturn this._do(obj1, obj2);\n\t}\n};\n\nexport class AndAST extends BinaryAST\n{\n\t_eval(context)\n\t{\n\t\tlet obj1 = this.obj1._handle_eval(context);\n\t\tif (!_bool(obj1))\n\t\t\treturn obj1;\n\t\tlet obj2 = this.obj2._handle_eval(context);\n\t\treturn obj2;\n\t}\n};\n\nexport class OrAST extends BinaryAST\n{\n\t_eval(context)\n\t{\n\t\tlet obj1 = this.obj1._handle_eval(context);\n\t\tif (_bool(obj1))\n\t\t\treturn obj1;\n\t\tlet obj2 = this.obj2._handle_eval(context);\n\t\treturn obj2;\n\t}\n};\n\nexport class AttrAST extends CodeAST\n{\n\tconstructor(template, pos, obj, attrname)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.obj = obj;\n\t\tthis.attrname = attrname;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<AttrAST\");\n\t\tout.push(\" obj=\");\n\t\tthis.obj._repr(out);\n\t\tout.push(\" attrname=\");\n\t\tout.push(_repr(this.attrname));\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet obj = this.obj._handle_eval(context);\n\t\tlet result = this._get(obj, this.attrname);\n\t\treturn result;\n\t}\n\n\t_eval_set(context, value)\n\t{\n\t\tlet obj = this.obj._handle_eval(context);\n\t\tthis._set(obj, this.attrname, value);\n\t}\n\n\t_eval_modify(context, operator, value)\n\t{\n\t\tlet obj = this.obj._handle_eval(context);\n\t\tthis._modify(operator, obj, this.attrname, value);\n\t}\n\n\t_get(object, attrname)\n\t{\n\t\tlet proto = Protocol.get(object);\n\t\ttry\n\t\t{\n\t\t\treturn proto.getattr(object, attrname);\n\t\t}\n\t\tcatch (exc)\n\t\t{\n\t\t\tif (exc instanceof AttributeError && exc.obj === object)\n\t\t\t\treturn undefined;\n\t\t\telse\n\t\t\t\tthrow exc;\n\t\t}\n\t}\n\n\t_set(object, attrname, value)\n\t{\n\t\tif (typeof(object) === \"object\" && typeof(object.__setattr__) === \"function\")\n\t\t\tobject.__setattr__(attrname, value);\n\t\telse if (_ismap(object))\n\t\t\tobject.set(attrname, value);\n\t\telse if (_isobject(object))\n\t\t\tobject[attrname] = value;\n\t\telse\n\t\t\tthrow new TypeError(_type(object) + \" object has no writable attributes\");\n\t}\n\n\t_modify(operator, object, attrname, value)\n\t{\n\t\tlet oldvalue = this._get(object, attrname);\n\t\tlet newvalue = operator._ido(oldvalue, value);\n\t\tthis._set(object, attrname, newvalue);\n\t}\n};\n\nAttrAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"obj\", \"attrname\"]);\n\nexport class CallAST extends CodeAST\n{\n\tconstructor(template, pos, obj, args)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.obj = obj;\n\t\tthis.args = args;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<CallAST\");\n\t\tout.push(\" obj=\");\n\t\tthis.obj._repr(out);\n\t\tfor (let arg of this.args)\n\t\t{\n\t\t\tout.push(\" \");\n\t\t\targ._repr(out);\n\t\t}\n\t\tout.push(\">\");\n\t}\n\n\t_makeargs(context)\n\t{\n\t\tlet args = [], kwargs = {};\n\t\tfor (let arg of this.args)\n\t\t\targ._handle_eval_call(context, args, kwargs);\n\t\treturn [args, kwargs];\n\t}\n\n\t_handle_eval(context)\n\t{\n\t\ttry\n\t\t{\n\t\t\treturn this._eval(context);\n\t\t}\n\t\tcatch (exc)\n\t\t{\n\t\t\tthis._decorate_exception(exc);\n\t\t\tthrow exc;\n\t\t}\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet obj = this.obj._handle_eval(context);\n\t\tlet [args, kwargs] = this._makeargs(context);\n\t\tlet result = _call(context, obj, args, kwargs);\n\t\treturn result;\n\t}\n};\n\nCallAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"obj\", \"args\"]);\n\nexport class RenderAST extends CallAST\n{\n\tconstructor(template, pos, obj, args)\n\t{\n\t\tsuper(template, pos, obj, args);\n\t\tthis.indent = null;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<\");\n\t\tout.push(this._reprname);\n\t\tout.push(\"<RenderAST\");\n\t\tout.push(\" indent=\");\n\t\tout.push(_repr(this.indent));\n\t\tout.push(\" obj=\");\n\t\tthis.obj._repr(out);\n\t\tout.push(0);\n\t\tfor (let arg of this.args)\n\t\t{\n\t\t\tout.push(\" \");\n\t\t\targ._repr(out);\n\t\t\tout.push(0);\n\t\t}\n\t\tout.push(-1);\n\t\tout.push(\">\");\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(\"render \");\n\t\tout.push(this.tag.code.replace(/\\r?\\n/g, ' '));\n\t\tif (this.indent !== null)\n\t\t{\n\t\t\tout.push(\" with indent \");\n\t\t\tout.push(_repr(this.indent.text));\n\t\t}\n\t}\n\n\t_handle_eval(context)\n\t{\n\t\tlet localcontext = context.withindent(this.indent !== null ? this.indent.text : null);\n\t\tlet obj = this.obj._handle_eval(localcontext);\n\t\tlet [args, kwargs] = this._makeargs(localcontext);\n\t\tthis._handle_additional_arguments(localcontext, args, kwargs);\n\n\t\ttry\n\t\t{\n\t\t\tlet result = _callrender(localcontext, obj, args, kwargs);\n\t\t\treturn result;\n\t\t}\n\t\tcatch (exc)\n\t\t{\n\t\t\tthis._decorate_exception(exc);\n\t\t\tthrow exc;\n\t\t}\n\t}\n\n\t_handle_additional_arguments(context, args)\n\t{\n\t}\n};\n\nRenderAST.prototype._ul4onattrs = CallAST.prototype._ul4onattrs.concat([\"indent\"]);\nRenderAST.prototype._reprname = \"RenderAST\";\n\nexport class RenderXAST extends RenderAST\n{\n\t_handle_eval(context)\n\t{\n\t\tcontext.escapes.push(_xmlescape);\n\n\t\tlet result = null;\n\t\ttry\n\t\t{\n\t\t\tresult = super._handle_eval(context);\n\t\t}\n\t\tfinally\n\t\t{\n\t\t\tcontext.escapes.splice(context.escapes.length-1, 1);\n\t\t}\n\t\treturn result;\n\t}\n};\n\nexport class RenderBlockAST extends RenderAST\n{\n\t_handle_additional_arguments(context, args, kwargs)\n\t{\n\t\tif (kwargs.hasOwnProperty(\"content\"))\n\t\t\tthrow new ArgumentError(\"duplicate keyword argument content\");\n\t\tlet closure = new TemplateClosure(this.content, this.content.signature, context.vars);\n\t\tkwargs.content = closure;\n\t}\n\n\t__getattr__(attrname)\n\t{\n\t\tif (\n\t\t\tattrname === \"stoppos\" ||\n\t\t\tattrname === \"stopsource\" ||\n\t\t\tattrname === \"stopsourceprefix\" ||\n\t\t\tattrname === \"stopsourcesuffix\"\n\t\t)\n\t\t\treturn this[attrname];\n\t\telse\n\t\t\treturn super.__getattr__(attrname);\n\t}\n};\n\nRenderBlockAST.prototype._ul4onattrs = RenderAST.prototype._ul4onattrs.concat([\"stoppos\", \"content\"]);\n\nexport class RenderBlocksAST extends RenderAST\n{\n\t_handle_additional_arguments(context, args, kwargs)\n\t{\n\t\tlet localcontext = context.inheritvars();\n\t\tBlockAST.prototype._eval.call(this, localcontext);\n\n\t\tfor (let key in localcontext.vars)\n\t\t{\n\t\t\tif (localcontext.vars.hasOwnProperty(key))\n\t\t\t{\n\t\t\t\tif (key in kwargs)\n\t\t\t\t\tthrow new ArgumentError(\"duplicate keyword argument \" + key);\n\t\t\t\tkwargs[key] = localcontext.get(key);\n\t\t\t}\n\t\t}\n\t}\n\n\t__getattr__(attrname)\n\t{\n\t\tif (\n\t\t\tattrname === \"stoppos\" ||\n\t\t\tattrname === \"stopsource\" ||\n\t\t\tattrname === \"stopsourceprefix\" ||\n\t\t\tattrname === \"stopsourcesuffix\"\n\t\t)\n\t\t\treturn this[attrname];\n\t\telse\n\t\t\treturn super.__getattr__(attrname);\n\t}\n};\n\nRenderBlocksAST.prototype._ul4onattrs = RenderAST.prototype._ul4onattrs.concat([\"stoppos\", \"content\"]);\n\n// Slice object\nexport class slice extends Proto\n{\n\tconstructor(start, stop)\n\t{\n\t\tsuper();\n\t\tthis.start = start;\n\t\tthis.stop = stop;\n\t}\n\n\tof(string)\n\t{\n\t\tlet start = this.start || 0;\n\t\tlet stop = this.stop === null ? string.length : this.stop;\n\t\treturn string.slice(start, stop);\n\t}\n\n\t__repr__()\n\t{\n\t\treturn \"slice(\" + _repr(this.start) + \", \" + _repr(this.stop) + \", None)\";\n\t}\n\n\t__getattr__(attrname)\n\t{\n\t\tswitch (attrname)\n\t\t{\n\t\t\tcase \"start\":\n\t\t\t\treturn this.start;\n\t\t\tcase \"stop\":\n\t\t\t\treturn this.stop;\n\t\t\tdefault:\n\t\t\t\tthrow new AttributeError(this, attrname);\n\t\t}\n\t}\n};\n\n\n// List/String slice\nexport class SliceAST extends CodeAST\n{\n\tconstructor(template, pos, index1, index2)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.index1 = index1;\n\t\tthis.index2 = index2;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<SliceAST\");\n\t\tif (this.index1 !== null)\n\t\t{\n\t\t\tout.push(\" index1=\");\n\t\t\tthis.index1._repr(out);\n\t\t}\n\t\tif (this.index2 !== null)\n\t\t{\n\t\t\tout.push(\" index2=\");\n\t\t\tthis.index2._repr(out);\n\t\t}\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet index1 = this.index1 !== null ? this.index1._handle_eval(context) : null;\n\t\tlet index2 = this.index2 !== null ? this.index2._handle_eval(context) : null;\n\t\treturn new slice(index1, index2);\n\t}\n};\n\nSliceAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"index1\", \"index2\"]);\n\nexport class SetVarAST extends CodeAST\n{\n\tconstructor(template, pos, lvalue, value)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.lvalue = lvalue;\n\t\tthis.value = value;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<\");\n\t\tout.push(this.constructor.name);\n\t\tout.push(\" lvalue=\");\n\t\tout.push(_repr(this.lvalue));\n\t\tout.push(\" value=\");\n\t\tthis.value._repr(out);\n\t\tout.push(\">\");\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet value = this.value._handle_eval(context);\n\t\tlet items = _unpackvar(this.lvalue, value);\n\t\tfor (let [lvalue, value] of items)\n\t\t\tlvalue._handle_eval_set(context, value);\n\t}\n};\n\nSetVarAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"lvalue\", \"value\"]);\n\nexport class ModifyVarAST extends SetVarAST\n{\n\t_eval(context)\n\t{\n\t\tlet value = this.value._handle_eval(context);\n\t\tlet items = _unpackvar(this.lvalue, value);\n\t\tfor (let [lvalue, value] of items)\n\t\t\tlvalue._handle_eval_modify(context, this._operator, value);\n\t}\n};\n\nexport class AddVarAST extends ModifyVarAST\n{\n};\n\nAddVarAST.prototype._operator = AddAST.prototype;\n\nexport class SubVarAST extends ModifyVarAST\n{\n};\n\nSubVarAST.prototype._operator = SubAST.prototype;\n\nexport class MulVarAST extends ModifyVarAST\n{\n};\n\nMulVarAST.prototype._operator = MulAST.prototype;\n\nexport class TrueDivVarAST extends ModifyVarAST\n{\n};\n\nTrueDivVarAST.prototype._operator = TrueDivAST.prototype;\n\nexport class FloorDivVarAST extends ModifyVarAST\n{\n};\n\nFloorDivVarAST.prototype._operator = FloorDivAST.prototype;\n\nexport class ModVarAST extends ModifyVarAST\n{\n};\n\nModVarAST.prototype._operator = ModAST.prototype;\n\nexport class ShiftLeftVarAST extends ModifyVarAST\n{\n};\n\nShiftLeftVarAST.prototype._operator = ShiftLeftAST.prototype;\n\nexport class ShiftRightVarAST extends ModifyVarAST\n{\n};\n\nShiftRightVarAST.prototype._operator = ShiftRightAST.prototype;\n\nexport class BitAndVarAST extends ModifyVarAST\n{\n};\n\nBitAndVarAST.prototype._operator = BitAndAST.prototype;\n\nexport class BitXOrVarAST extends ModifyVarAST\n{\n};\n\nBitXOrVarAST.prototype._operator = BitXOrAST.prototype;\n\nexport class BitOrVarAST extends ModifyVarAST\n{\n};\n\nBitOrVarAST.prototype._operator = BitOrAST.prototype;\n\nexport class BlockAST extends CodeAST\n{\n\tconstructor(template, startpos, stoppos)\n\t{\n\t\tsuper(template, startpos, stoppos);\n\t\tthis.content = [];\n\t}\n\n\t_eval(context)\n\t{\n\t\tfor (let item of this.content)\n\t\t\titem._handle_eval(context);\n\t}\n\n\t_str(out)\n\t{\n\t\tif (this.content.length)\n\t\t{\n\t\t\tfor (let item of this.content)\n\t\t\t{\n\t\t\t\titem._str(out);\n\t\t\t\tout.push(0);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tout.push(\"pass\");\n\t\t\tout.push(0);\n\t\t}\n\t}\n\n\t__getattr__(attrname)\n\t{\n\t\tif (\n\t\t\tattrname === \"stoppos\" ||\n\t\t\tattrname === \"stopsource\" ||\n\t\t\tattrname === \"stopsourceprefix\" ||\n\t\t\tattrname === \"stopsourcesuffix\"\n\t\t)\n\t\t\treturn this[attrname];\n\t\telse\n\t\t\treturn super.__getattr__(attrname);\n\t}\n};\n\nBlockAST.prototype._ul4onattrs = CodeAST.prototype._ul4onattrs.concat([\"stoppos\", \"content\"]);\n\nexport class ForBlockAST extends BlockAST\n{\n\tconstructor(template, pos, varname, container)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.varname = varname;\n\t\tthis.container = container;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<ForBlockAST\");\n\t\tout.push(\" varname=\");\n\t\tout.push(_repr(this.varname));\n\t\tout.push(\" container=\");\n\t\tthis.container._repr(out);\n\t\tout.push(\">\");\n\t}\n\n\t_str_varname(out, varname)\n\t{\n\t\tif (_islist(varname))\n\t\t{\n\t\t\tout.push(\"(\");\n\t\t\tlet first = truel\n\t\t\tfor (let subname of varname)\n\t\t\t{\n\t\t\t\tif (first)\n\t\t\t\t\tfirst = false;\n\t\t\t\telse\n\t\t\t\t\tout.push(\", \");\n\t\t\t\tthis._str_varname(out, subname);\n\t\t\t}\n\t\t\tif (varname.length == 1)\n\t\t\t\tout.push(\",\");\n\t\t\tout.push(\")\");\n\t\t}\n\t\telse\n\t\t\tvarname._str(out);\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet container = this.container._handle_eval(context);\n\n\t\tfor (let iter = _iter(container);;)\n\t\t{\n\t\t\tlet value = iter.next();\n\t\t\tif (value.done)\n\t\t\t\tbreak;\n\t\t\tlet varitems = _unpackvar(this.varname, value.value);\n\t\t\tfor (let [lvalue, value] of varitems)\n\t\t\t\tlvalue._handle_eval_set(context, value);\n\t\t\ttry\n\t\t\t{\n\t\t\t\t// We can't call _handle_eval() here, as this would in turn call this function again, leading to infinite recursion\n\t\t\t\t// But we don't have to, as wrapping original exception in ``Error`` has already been done by the lower levels\n\t\t\t\tsuper._eval(context);\n\t\t\t}\n\t\t\tcatch (exc)\n\t\t\t{\n\t\t\t\tif (exc instanceof BreakException)\n\t\t\t\t\tbreak;\n\t\t\t\telse if (exc instanceof ContinueException)\n\t\t\t\t\t;\n\t\t\t\telse\n\t\t\t\t\tthrow exc;\n\t\t\t}\n\t\t}\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(\"for \");\n\t\tthis._str_varname(out, this.varname);\n\t\tout.push(\" in \");\n\t\tthis.container._str(out);\n\t\tout.push(\":\");\n\t\tout.push(+1);\n\t\tBlockAST.prototype._str.call(this, out);\n\t\tout.push(-1);\n\t}\n};\n\nForBlockAST.prototype._ul4onattrs = BlockAST.prototype._ul4onattrs.concat([\"varname\", \"container\"]);\n\nexport class WhileBlockAST extends BlockAST\n{\n\tconstructor(template, pos, condition)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.condition = condition;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<WhileAST\");\n\t\tout.push(\" condition=\");\n\t\tthis.condition._repr(out);\n\t\tout.push(\">\");\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(\"while \");\n\t\tthis.condition._repr(out);\n\t\tout.push(\":\");\n\t\tout.push(+1);\n\t\tBlockAST.prototype._str.call(this, out);\n\t\tout.push(-1);\n\t}\n\n\t_eval(context)\n\t{\n\t\twhile (true)\n\t\t{\n\t\t\tlet cond = this.condition._handle_eval(context);\n\t\t\tif (!_bool(cond))\n\t\t\t\tbreak;\n\t\t\ttry\n\t\t\t{\n\t\t\t\t// We can't call _handle_eval() here, as this would in turn call this function again, leading to infinite recursion\n\t\t\t\t// But we don't have to, as wrapping the original exception in ``Error`` has already been done by the lower levels\n\t\t\t\tsuper._eval(context);\n\t\t\t}\n\t\t\tcatch (exc)\n\t\t\t{\n\t\t\t\tif (exc instanceof BreakException)\n\t\t\t\t\tbreak;\n\t\t\t\telse if (exc instanceof ContinueException)\n\t\t\t\t\t;\n\t\t\t\telse\n\t\t\t\t\tthrow exc;\n\t\t\t}\n\t\t}\n\t}\n};\n\nWhileBlockAST.prototype._ul4onattrs = BlockAST.prototype._ul4onattrs.concat([\"condition\"]);\n\nexport class BreakAST extends CodeAST\n{\n\t_eval(context)\n\t{\n\t\tthrow new BreakException();\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(\"break\");\n\t\tout.push(0);\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<BreakAST>\");\n\t}\n};\n\nexport class ContinueAST extends CodeAST\n{\n\t_eval(context)\n\t{\n\t\tthrow new ContinueException();\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(\"continue\");\n\t\tout.push(0);\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<ContinueAST>\");\n\t}\n};\n\nexport class CondBlockAST extends BlockAST\n{\n\t_eval(context)\n\t{\n\t\tfor (let block of this.content)\n\t\t{\n\t\t\tlet execute = block._execute(context);\n\t\t\tif (execute)\n\t\t\t{\n\t\t\t\tblock._handle_eval(context);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n};\n\nexport class ConditionalBlockAST extends  BlockAST\n{\n\tconstructor(template, pos, condition)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.condition = condition;\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<\");\n\t\tout.push(this.constructor.name);\n\t\tout.push(\" condition=\");\n\t\tthis.condition._repr(out);\n\t\tout.push(\">\");\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(this._strname);\n\t\tout.push(\" \");\n\t\tthis.condition._str(out);\n\t\tout.push(\":\");\n\t\tout.push(+1);\n\t\tBlockAST.prototype._str.call(this, out);\n\t\tout.push(-1);\n\t}\n\n\t_execute(context)\n\t{\n\t\tlet cond = this.condition._handle_eval(context);\n\t\tlet result = _bool(cond);\n\t\treturn result;\n\t}\n};\n\nConditionalBlockAST.prototype._ul4onattrs = BlockAST.prototype._ul4onattrs.concat([\"condition\"]);\n\nexport class IfBlockAST extends ConditionalBlockAST\n{\n};\n\nIfBlockAST.prototype._strname = \"if\";\n\nexport class ElIfBlockAST extends ConditionalBlockAST\n{\n};\n\nElIfBlockAST.prototype._strname = \"else if\";\n\nexport class ElseBlockAST extends BlockAST\n{\n\t_repr(out)\n\t{\n\t\tout.push(\"<ElseAST\");\n\t\tout.push(\">\");\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(\"else:\");\n\t\tout.push(+1);\n\t\tBlockAST.prototype._str.call(this, out);\n\t\tout.push(-1);\n\t}\n\n\t_execute(context)\n\t{\n\t\treturn true;\n\t}\n};\n\nexport class Template extends BlockAST\n{\n\tconstructor(template, pos, source, name, whitespace, startdelim, enddelim, signature)\n\t{\n\t\tsuper(template, pos);\n\t\tthis._source = source;\n\t\tthis.name = name;\n\t\tthis.whitespace = whitespace;\n\t\tthis.startdelim = startdelim;\n\t\tthis.enddelim = enddelim;\n\t\tthis.docpos = null;\n\t\tthis.signature = signature;\n\t\tthis._asts = null;\n\t\tthis._ul4_callsignature = signature;\n\t\tthis._ul4_rendersignature = signature;\n\t\tthis.parenttemplate = null;\n\t}\n\n\t__getattr__(attrname)\n\t{\n\t\tlet self = this;\n\t\tswitch (attrname)\n\t\t{\n\t\t\tcase \"content\":\n\t\t\t\treturn this.content;\n\t\t\tcase \"source\":\n\t\t\t\treturn this.source;\n\t\t\tcase \"name\":\n\t\t\t\treturn this.name;\n\t\t\tcase \"whitespace\":\n\t\t\t\treturn this.whitespace;\n\t\t\tcase \"startdelim\":\n\t\t\t\treturn this.startdelim;\n\t\t\tcase \"enddelim\":\n\t\t\t\treturn this.enddelim;\n\t\t\tcase \"doc\":\n\t\t\t\treturn this.doc();\n\t\t\tcase \"signature\":\n\t\t\t\treturn this.signature;\n\t\t\tcase \"parenttemplate\":\n\t\t\t\treturn this.parenttemplate;\n\t\t\tcase \"render\":\n\t\t\t\tlet render = function render(context, vars){ self._renderbound(context, vars); };\n\t\t\t\texpose(render, this.signature, {needscontext: true, needsobject: true});\n\t\t\t\treturn render;\n\t\t\tcase \"renders\":\n\t\t\t\tlet renders = function renders(context, vars){ return self._rendersbound(context, vars); };\n\t\t\t\texpose(renders, this.signature, {needscontext: true, needsobject: true});\n\t\t\t\treturn renders;\n\t\t\tdefault:\n\t\t\t\treturn super.__getattr__(attrname);\n\t\t}\n\t}\n\n\tul4ondump(encoder)\n\t{\n\t\tlet signature;\n\t\tencoder.dump(api_version);\n\t\tencoder.dump(this.name);\n\t\tencoder.dump(this._source);\n\t\tencoder.dump(this.whitespace);\n\t\tencoder.dump(this.startdelim);\n\t\tencoder.dump(this.enddelim);\n\t\tencoder.dump(this.docpos);\n\t\tencoder.dump(this.parenttemplate);\n\t\tif (this.signature === null || this.signature instanceof SignatureAST)\n\t\t\tsignature = this.signature;\n\t\telse\n\t\t{\n\t\t\tsignature = [];\n\t\t\tfor (let param of this.signature.params)\n\t\t\t{\n\t\t\t\tsignature.push(param.name);\n\t\t\t\tsignature.push(param.type);\n\t\t\t\tif (param.type.endsWith(\"=\"))\n\t\t\t\t\tsignature.push(param.defaultValue);\n\t\t\t}\n\t\t}\n\t\tencoder.dump(signature);\n\t\tsuper.ul4ondump(encoder);\n\t}\n\n\tul4onload(decoder)\n\t{\n\t\tlet loaded_api_version = decoder.load();\n\t\tlet signature;\n\n\t\tif (loaded_api_version === null)\n\t\t\tthrow new ValueError(\"UL4ON doesn't support templates in 'source' format in Javascript implementation\");\n\n\t\tif (loaded_api_version !== api_version)\n\t\t\tthrow new ValueError(\"invalid version, expected \" + api_version + \", got \" + loaded_api_version);\n\n\t\tthis.name = decoder.load();\n\t\tthis._source = decoder.load();\n\t\tthis.whitespace = decoder.load();\n\t\tthis.startdelim = decoder.load();\n\t\tthis.enddelim = decoder.load();\n\t\tthis.docpos = decoder.load();\n\t\tthis.parenttemplate = decoder.load();\n\t\tsignature = decoder.load();\n\t\tif (_islist(signature))\n\t\t\tsignature = new Signature(...signature);\n\t\tthis.signature = signature;\n\t\tthis._ul4_callsignature = signature;\n\t\tthis._ul4_rendersignature = signature;\n\t\tsuper.ul4onload(decoder);\n\t}\n\n\tloads(string)\n\t{\n\t\treturn loads(string);\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet signature = null;\n\t\tif (this.signature !== null)\n\t\t\tsignature = this.signature._handle_eval(context);\n\t\tlet closure = new TemplateClosure(this, signature, context.vars);\n\t\tcontext.set(this.name, closure);\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<Template\");\n\t\tif (this.name !== null)\n\t\t{\n\t\t\tout.push(\" name=\");\n\t\t\tout.push(_repr(this.name));\n\t\t}\n\t\tout.push(\" whitespace=\");\n\t\tout.push(_repr(this.whitespace));\n\t\tif (this.startdelim !== \"<?\")\n\t\t{\n\t\t\tout.push(\" startdelim=\");\n\t\t\tout.push(_repr(this.startdelim));\n\t\t}\n\t\tif (this.enddelim !== \"?>\")\n\t\t{\n\t\t\tout.push(\" enddelim=\");\n\t\t\tout.push(_repr(this.enddelim));\n\t\t}\n\t\tout.push(\">\");\n\t}\n\n\t_str(out)\n\t{\n\t\tout.push(\"def \");\n\t\tout.push(this.name ? this.name : \"unnamed\");\n\t\tout.push(\":\");\n\t\tout.push(+1);\n\t\tBlockAST.prototype._str.call(this, out);\n\t\tout.push(-1);\n\t}\n\n\t_renderbound(context, vars)\n\t{\n\t\tlet localcontext = context.replacevars(vars);\n\t\ttry\n\t\t{\n\t\t\tBlockAST.prototype._eval.call(this, localcontext);\n\t\t}\n\t\tcatch (exc)\n\t\t{\n\t\t\tif (!(exc instanceof ReturnException))\n\t\t\t\tthrow exc;\n\t\t}\n\t}\n\n\t__render__(context, vars)\n\t{\n\t\tthis._renderbound(context, vars);\n\t}\n\n\trender(context, vars)\n\t{\n\t\tthis._renderbound(context, vars);\n\t}\n\n\t_rendersbound(context, vars)\n\t{\n\t\tlet localcontext = context.replaceoutput();\n\t\tthis._renderbound(localcontext, vars);\n\t\treturn localcontext.getoutput();\n\t}\n\n\trenders(vars=null, globals=null)\n\t{\n\t\tlet context = new Context({}, globals);\n\t\tvars = vars || {};\n\t\tif (this.signature !== null)\n\t\t\tvars = this.signature.bindObject(this.name, [], vars);\n\t\treturn this._rendersbound(context, vars);\n\t}\n\n\tdoc()\n\t{\n\t\treturn this.docpos != null ? this.docpos.of(this._source) : null;\n\t}\n\n\t_callbound(context, vars)\n\t{\n\t\tlet localcontext = context.replacevars(vars);\n\t\ttry\n\t\t{\n\t\t\tBlockAST.prototype._eval.call(this, localcontext);\n\t\t}\n\t\tcatch (exc)\n\t\t{\n\t\t\tif (exc instanceof ReturnException)\n\t\t\t\treturn exc.result;\n\t\t\telse\n\t\t\t\tthrow exc;\n\t\t}\n\t\treturn null;\n\t}\n\n\tcall(vars=null, globals=null)\n\t{\n\t\tlet context = new Context({}, globals);\n\t\tvars = vars || {};\n\t\tif (this.signature !== null)\n\t\t\tvars = this.signature.bindObject(this.name, [], vars);\n\t\treturn this._callbound(context, vars);\n\t}\n\n\t__call__(context, vars)\n\t{\n\t\treturn this._callbound(context, vars);\n\t}\n\n\tul4type()\n\t{\n\t\treturn \"template\";\n\t}\n};\n\nTemplate.prototype._ul4_callneedsobject = true;\nTemplate.prototype._ul4_callneedscontext = true;\nTemplate.prototype._ul4_renderneedsobject = true;\nTemplate.prototype._ul4_renderneedscontext = true;\n\nexport class SignatureAST extends CodeAST\n{\n\tconstructor(template, pos)\n\t{\n\t\tsuper(template, pos);\n\t\tthis.params = [];\n\t}\n\n\tul4ondump(encoder)\n\t{\n\t\tsuper.ul4ondump(encoder);\n\n\t\tlet dump = [];\n\n\t\tfor (let param of this.params)\n\t\t{\n\t\t\tdump.push(param[0]);\n\t\t\tdump.push(param[1]);\n\t\t\tif (param[1].endsWith(\"=\"))\n\t\t\t\tdump.push(param[2]);\n\t\t}\n\t\tencoder.dump(dump);\n\t}\n\n\tul4onload(decoder)\n\t{\n\t\tsuper.ul4onload(decoder);\n\t\tlet dump = decoder.load();\n\t\tthis.params = [];\n\t\tlet name;\n\t\tlet type;\n\t\tlet state = 0;\n\t\tfor (let param of dump)\n\t\t{\n\t\t\tif (state == 0)\n\t\t\t{\n\t\t\t\tname = param;\n\t\t\t\tstate = 1;\n\t\t\t}\n\t\t\telse if (state == 1)\n\t\t\t{\n\t\t\t\ttype = param;\n\t\t\t\tif (type.endsWith(\"=\"))\n\t\t\t\t\tstate = 2;\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.params.push({name: name, type: type, defaultValue: null});\n\t\t\t\t\tstate = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.params.push({name: name, type: type, defaultValue: param});\n\t\t\t\tstate = 0;\n\t\t\t}\n\t\t}\n\t}\n\n\t_eval(context)\n\t{\n\t\tlet args = [];\n\t\tfor (let param of this.params)\n\t\t{\n\t\t\targs.push(param.name);\n\t\t\targs.push(param.type);\n\t\t\tif (param.type.endsWith(\"=\"))\n\t\t\t\targs.push(param.defaultValue._handle_eval(context));\n\t\t}\n\t\treturn new Signature(...args);\n\t}\n\n\t_repr(out)\n\t{\n\t\tout.push(\"<\");\n\t\tout.push(this.constructor.name);\n\t\tout.push(\" params=\");\n\t\tthis.params._repr(out);\n\t\tout.push(\">\");\n\t}\n};\n\nexport class TemplateClosure extends Proto\n{\n\tconstructor(template, signature, vars)\n\t{\n\t\tsuper();\n\t\tthis.template = template;\n\t\tthis.signature = signature;\n\t\tthis.vars = vars;\n\t\tthis._ul4_callsignature = signature;\n\t\tthis._ul4_rendersignature = signature;\n\t\t// Copy over the required attribute from the template\n\t\tthis.name = template.name;\n\t\tthis.tag = template.tag;\n\t\tthis.endtag = template.endtag;\n\t\tthis._source = template._source;\n\t\tthis.startdelim = template.startdelim;\n\t\tthis.enddelim = template.enddelim;\n\t\tthis.docpos = template.docpos;\n\t\tthis.content = template.content;\n\t}\n\n\t__render__(context, vars)\n\t{\n\t\tthis.template._renderbound(context, _extend(this.vars, vars));\n\t}\n\n\trender(context, vars)\n\t{\n\t\tthis.template._renderbound(context, _extend(this.vars, vars));\n\t}\n\n\t__call__(context, vars)\n\t{\n\t\treturn this.template._callbound(context, _extend(this.vars, vars));\n\t}\n\n\t_renderbound(context, vars)\n\t{\n\t\tthis.template._renderbound(context, _extend(this.vars, vars));\n\t}\n\n\t_rendersbound(context, vars)\n\t{\n\t\treturn this.template._rendersbound(context, _extend(this.vars, vars));\n\t}\n\n\t__getattr__(attrname)\n\t{\n\t\tlet self = this;\n\t\tswitch (attrname)\n\t\t{\n\t\t\tcase \"render\":\n\t\t\t\tlet render = function render(context, vars){ self._renderbound(context, vars); };\n\t\t\t\texpose(render, this.signature, {needscontext: true, needsobject: true});\n\t\t\t\treturn render;\n\t\t\tcase \"renders\":\n\t\t\t\tlet renders = function renders(context, vars){ return self._rendersbound(context, vars); };\n\t\t\t\texpose(renders, this.signature, {needscontext: true, needsobject: true});\n\t\t\t\treturn renders;\n\t\t\tcase \"signature\":\n\t\t\t\treturn this.signature;\n\t\t\tdefault:\n\t\t\t\treturn this.template.__getattr__(attrname);\n\t\t}\n\t}\n\n\tul4type()\n\t{\n\t\treturn \"template\";\n\t}\n};\n\nTemplateClosure.prototype._ul4_callneedsobject = true;\nTemplateClosure.prototype._ul4_callneedscontext = true;\nTemplateClosure.prototype._ul4_renderneedsobject = true;\nTemplateClosure.prototype._ul4_renderneedscontext = true;\n\n// Create a color object from the red, green, blue and alpha values ``r``, ``g``, ``b`` and ``b``\nexport function _rgb(r, g, b, a)\n{\n\treturn new Color(255*r, 255*g, 255*b, 255*a);\n};\n\n// Convert ``obj`` to a string and escape the characters ``&``, ``<``, ``>``, ``'`` and ``\"`` with their XML character/entity reference\nexport function _xmlescape(obj)\n{\n\tobj = _str(obj);\n\tobj = obj.replace(/&/g, \"&amp;\");\n\tobj = obj.replace(/</g, \"&lt;\");\n\tobj = obj.replace(/>/g, \"&gt;\");\n\tobj = obj.replace(/'/g, \"&#39;\");\n\tobj = obj.replace(/\"/g, \"&quot;\");\n\treturn obj;\n};\n\n// Convert ``obj`` to a string suitable for output into a CSV file\nexport function _csv(obj)\n{\n\tif (obj === null)\n\t\treturn \"\";\n\telse if (typeof(obj) !== \"string\")\n\t\tobj = _repr(obj);\n\tif (obj.indexOf(\",\") !== -1 || obj.indexOf('\"') !== -1 || obj.indexOf(\"\\n\") !== -1)\n\t\tobj = '\"' + obj.replace(/\"/g, '\"\"') + '\"';\n\treturn obj;\n};\n\n// Return a string containing one character with the codepoint ``i``\nexport function _chr(i)\n{\n\tif (typeof(i) !== \"number\")\n\t\tthrow new TypeError(\"chr() requires an int\");\n\treturn String.fromCharCode(i);\n};\n\n// Return the codepoint for the one and only character in the string ``c``\nexport function _ord(c)\n{\n\tif (typeof(c) !== \"string\" || c.length != 1)\n\t\tthrow new TypeError(\"ord() requires a string of length 1\");\n\treturn c.charCodeAt(0);\n};\n\n// Convert an integer to a hexadecimal string\nexport function _hex(number)\n{\n\tif (typeof(number) !== \"number\")\n\t\tthrow new TypeError(\"hex() requires an int\");\n\tif (number < 0)\n\t\treturn \"-0x\" + number.toString(16).substr(1);\n\telse\n\t\treturn \"0x\" + number.toString(16);\n};\n\n// Convert an integer to a octal string\nexport function _oct(number)\n{\n\tif (typeof(number) !== \"number\")\n\t\tthrow new TypeError(\"oct() requires an int\");\n\tif (number < 0)\n\t\treturn \"-0o\" + number.toString(8).substr(1);\n\telse\n\t\treturn \"0o\" + number.toString(8);\n};\n\n// Convert an integer to a binary string\nexport function _bin(number)\n{\n\tif (typeof(number) !== \"number\")\n\t\tthrow new TypeError(\"bin() requires an int\");\n\tif (number < 0)\n\t\treturn \"-0b\" + number.toString(2).substr(1);\n\telse\n\t\treturn \"0b\" + number.toString(2);\n};\n\n// Return the minimum value\nexport function _min(context, defaultValue=Object, key=null, args=[])\n{\n\tif (args.length == 0)\n\t\tthrow new ArgumentError(\"min() requires at least 1 argument, 0 given\");\n\telse if (args.length == 1)\n\t\targs = args[0];\n\tlet iter = _iter(args);\n\tlet result;\n\tlet minvalue;\n\tlet first = true;\n\twhile (true)\n\t{\n\t\tlet item = iter.next();\n\t\tif (item.done)\n\t\t{\n\t\t\tif (first)\n\t\t\t{\n\t\t\t\tif (defaultValue === Object)\n\t\t\t\t\tthrow new ValueError(\"min() argument is an empty sequence!\");\n\t\t\t\treturn defaultValue;\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\t\tlet testvalue = item.value;\n\t\tif (key !== null)\n\t\t\ttestvalue = _call(context, key, [testvalue], {});\n\t\tif (first || (testvalue < minvalue))\n\t\t{\n\t\t\tresult = item.value;\n\t\t\tminvalue = testvalue;\n\t\t}\n\t\tfirst = false;\n\t}\n};\n\n// Return the maximum value\nexport function _max(context, defaultValue=Object, key=null, args=[])\n{\n\tif (args.length == 0)\n\t\tthrow new ArgumentError(\"max() requires at least 1 argument, 0 given\");\n\telse if (args.length == 1)\n\t\targs = args[0];\n\tlet iter = _iter(args);\n\tlet result;\n\tlet minvalue;\n\tlet first = true;\n\twhile (true)\n\t{\n\t\tlet item = iter.next();\n\t\tif (item.done)\n\t\t{\n\t\t\tif (first)\n\t\t\t{\n\t\t\t\tif (defaultValue === Object)\n\t\t\t\t\tthrow new ValueError(\"max() argument is an empty sequence!\");\n\t\t\t\treturn defaultValue;\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\t\tlet testvalue = item.value;\n\t\tif (key !== null)\n\t\t\ttestvalue = _call(context, key, [testvalue], {});\n\t\tif (first || (testvalue > minvalue))\n\t\t{\n\t\t\tresult = item.value;\n\t\t\tminvalue = testvalue;\n\t\t}\n\t\tfirst = false;\n\t}\n};\n\n// Return the of the values from the iterable starting with ``start`` (default ``0``)\nexport function _sum(iterable, start=0)\n{\n\tfor (let iter = _iter(iterable);;)\n\t{\n\t\tlet item = iter.next();\n\t\tif (item.done)\n\t\t\tbreak;\n\t\tstart += item.value;\n\t}\n\treturn start;\n};\n\n// Return the first value produced by iterating through ``iterable`` (defaulting to ``defaultValue`` if the iterator is empty)\nexport function _first(iterable, defaultValue=null)\n{\n\tlet item = _iter(iterable).next();\n\treturn item.done ? defaultValue : item.value;\n};\n\n// Return the last value produced by iterating through ``iterable`` (defaulting to ``defaultValue`` if the iterator is empty)\nexport function _last(iterable, defaultValue=null)\n{\n\tlet value = defaultValue;\n\n\tfor (let iter = _iter(iterable);;)\n\t{\n\t\tlet item = iter.next();\n\t\tif (item.done)\n\t\t\tbreak;\n\t\tvalue = item.value;\n\t}\n\treturn value;\n};\n\n// Return a sorted version of ``iterable``\nexport function _sorted(context, iterable, key=null, reverse=false)\n{\n\tif (key === null)\n\t{\n\t\t// FIXME: stability\n\t\tlet cmp = reverse ? function cmp(a, b)\n\t\t{\n\t\t\treturn -_cmp(\"<=>\", a, b);\n\t\t} : function cmp(a, b)\n\t\t{\n\t\t\treturn _cmp(\"<=>\", a, b);\n\t\t};\n\t\tlet result = _list(iterable);\n\t\tresult.sort(cmp);\n\t\treturn result;\n\t}\n\telse\n\t{\n\t\tlet sort = [];\n\n\t\tfor (let i = 0, iter = _iter(iterable);;++i)\n\t\t{\n\t\t\tlet item = iter.next();\n\t\t\tif (item.done)\n\t\t\t\tbreak;\n\t\t\tlet keyvalue = _call(context, key, [item.value], {});\n\t\t\t// For a stable sorting we have to use the negative index if\n\t\t\t// reverse sorting is specified\n\t\t\tsort.push([keyvalue, reverse ? -i : i, item.value]);\n\t\t}\n\t\tfunction cmp(s1, s2)\n\t\t{\n\t\t\tlet res = _cmp(\"<=>\", s1[0], s2[0]);\n\t\t\tif (res)\n\t\t\t\treturn reverse ? -res : res;\n\t\t\tres = _cmp(\"<=>\", s1[1], s2[1]);\n\t\t\treturn reverse ? -res : res;\n\t\t};\n\n\t\tsort.sort(cmp);\n\n\t\tlet result = [];\n\t\tfor (let item of sort)\n\t\t\tresult.push(item[2]);\n\t\treturn result;\n\t}\n};\n\n// Return a iterable object iterating from ``start`` up to (but not including) ``stop`` with a step size of ``step``\nexport function _range(start, stop=Object, step=Object)\n{\n\tif (step === Object)\n\t\tstep = 1;\n\tif (stop === Object)\n\t{\n\t\tstop = start;\n\t\tstart = 0;\n\t}\n\tlet lower, higher;\n\tif (step === 0)\n\t\tthrow new ValueError(\"range() requires a step argument != 0\");\n\telse if (step > 0)\n\t{\n\t\tlower = start;\n\t\thigher = stop;\n\t}\n\telse\n\t{\n\t\tlower = stop;\n\t\thigher = start;\n\t}\n\tlet length = (lower < higher) ? Math.floor((higher - lower - 1)/Math.abs(step)) + 1 : 0;\n\n\treturn {\n\t\tindex: 0,\n\t\tnext: function()\n\t\t{\n\t\t\tif (this.index >= length)\n\t\t\t\treturn {done: true};\n\t\t\treturn {value: start + (this.index++) * step, done: false};\n\t\t}\n\t};\n};\n\n// Return a iterable object returning a slice from the argument\nexport function _slice(iterable, start, stop=Object, step=Object)\n{\n\tif (step === Object)\n\t\tstep = 1;\n\tif (stop === Object)\n\t{\n\t\tstop = start;\n\t\tstart = 0;\n\t}\n\tif (start < 0)\n\t\tthrow new ValueError(\"slice() requires a start argument >= 0\");\n\tif (stop < 0)\n\t\tthrow new ValueError(\"slice() requires a stop argument >= 0\");\n\tif (step <= 0)\n\t\tthrow new ValueError(\"slice() requires a step argument > 0\");\n\n\tlet next = start, count = 0;\n\tlet iter = _iter(iterable);\n\treturn {\n\t\tnext: function() {\n\t\t\tlet result;\n\t\t\twhile (count < next)\n\t\t\t{\n\t\t\t\tresult = iter.next();\n\t\t\t\tif (result.done)\n\t\t\t\t\treturn result;\n\t\t\t\t++count;\n\t\t\t}\n\t\t\tif (stop !== null && count >= stop)\n\t\t\t\treturn {done: true};\n\t\t\tresult = iter.next();\n\t\t\tif (result.done)\n\t\t\t\treturn result;\n\t\t\t++count;\n\t\t\tnext += step;\n\t\t\tif (stop !== null && next > stop)\n\t\t\t\tnext = stop;\n\t\t\treturn result;\n\t\t}\n\t};\n};\n\n// ``%`` escape unsafe characters in the string ``string``\nexport function _urlquote(string)\n{\n\treturn encodeURIComponent(string);\n};\n\n// The inverse function of ``urlquote``\nexport function _urlunquote(string)\n{\n\treturn decodeURIComponent(string);\n};\n\n// Return a reverse iterator over ``sequence``\nexport function _reversed(sequence)\n{\n\tif (typeof(sequence) !== \"string\" && !_islist(sequence)) // We don't have to materialize strings or lists\n\t\tsequence = _list(sequence);\n\treturn {\n\t\tindex: sequence.length-1,\n\t\tnext: function() {\n\t\t\treturn this.index >= 0 ? {value: sequence[this.index--], done: false} : {done: true};\n\t\t}\n\t};\n};\n\n// Returns a random number in the interval ``[0;1[``\nexport function _random()\n{\n\treturn Math.random();\n};\n\n// Return a randomly select item from ``range(start, stop, step)``\nexport function _randrange(start, stop=Object, step=Object)\n{\n\tif (step === Object)\n\t\tstep = 1;\n\tif (stop === Object)\n\t{\n\t\tstop = start;\n\t\tstart = 0;\n\t}\n\tlet width = stop-start;\n\n\tlet value = Math.random();\n\n\tlet n;\n\tif (step > 0)\n\t\tn = Math.floor((width + step - 1) / step);\n\telse if (step < 0)\n\t\tn = Math.floor((width + step + 1) / step);\n\telse\n\t\tthrow new ValueError(\"randrange() requires a step argument != 0\");\n\treturn start + step*Math.floor(value * n);\n};\n\n// Return a random item/char from the list/string ``sequence``\nexport function _randchoice(sequence)\n{\n\tlet iscolor = _iscolor(sequence);\n\tif (typeof(sequence) !== \"string\" && !_islist(sequence) && !iscolor)\n\t\tthrow new TypeError(\"randchoice() requires a string or list\");\n\tif (iscolor)\n\t\tsequence = _list(sequence);\n\treturn sequence[Math.floor(Math.random() * sequence.length)];\n};\n\n// Round a number ``x`` to ``digits`` decimal places (may be negative)\nexport function _round(x, digits=0)\n{\n\tif (digits)\n\t{\n\t\tlet threshold = Math.pow(10, digits);\n\t\treturn Math.round(x*threshold)/threshold;\n\t}\n\telse\n\t\treturn Math.round(x);\n};\n\n// Round a number ``x`` down to ``digits`` decimal places (may be negative)\nexport function _floor(x, digits=0)\n{\n\tif (digits)\n\t{\n\t\tlet threshold = Math.pow(10, digits);\n\t\treturn Math.floor(x*threshold)/threshold;\n\t}\n\telse\n\t\treturn Math.floor(x);\n};\n\n// Round a number ``x`` up to ``digits`` decimal places (may be negative)\nexport function _ceil(x, digits=0)\n{\n\tif (digits)\n\t{\n\t\tlet threshold = Math.pow(10, digits);\n\t\treturn Math.ceil(x*threshold)/threshold;\n\t}\n\telse\n\t\treturn Math.ceil(x);\n};\n\n// Return a hex-encode MD5 hash of the argument\n// This uses the md5 function from https://github.com/blueimp/JavaScript-MD5\nimport md5 from 'blueimp-md5';\n\nexport function _md5(string)\n{\n\treturn md5(string);\n}\n\nexport function _scrypt(string, salt)\n{\n\tthrow new NotImplementedError(\"scrypt() is not implemented\");\n}\n\n// Return an iterator over ``[index, item]`` lists from the iterable object ``iterable``. ``index`` starts at ``start`` (defaulting to 0)\nexport function _enumerate(iterable, start=0)\n{\n\treturn {\n\t\titer: _iter(iterable),\n\t\tindex: start,\n\t\tnext: function() {\n\t\t\tlet item = this.iter.next();\n\t\t\treturn item.done ? item : {value: [this.index++, item.value], done: false};\n\t\t}\n\t};\n};\n\n// Return an iterator over ``[isfirst, item]`` lists from the iterable object ``iterable`` (``isfirst`` is true for the first item, false otherwise)\nexport function _isfirst(iterable)\n{\n\tlet iter = _iter(iterable);\n\tlet isfirst = true;\n\treturn {\n\t\tnext: function() {\n\t\t\tlet item = iter.next();\n\t\t\tlet result = item.done ? item : {value: [isfirst, item.value], done: false};\n\t\t\tisfirst = false;\n\t\t\treturn result;\n\t\t}\n\t};\n};\n\n// Return an iterator over ``[islast, item]`` lists from the iterable object ``iterable`` (``islast`` is true for the last item, false otherwise)\nexport function _islast(iterable)\n{\n\tlet iter = _iter(iterable);\n\tlet lastitem = iter.next();\n\treturn {\n\t\tnext: function() {\n\t\t\tif (lastitem.done)\n\t\t\t\treturn lastitem;\n\t\t\tlet item = iter.next();\n\t\t\tlet result = {value: [item.done, lastitem.value], done: false};\n\t\t\tlastitem = item;\n\t\t\treturn result;\n\t\t}\n\t};\n};\n\n// Return an iterator over ``[isfirst, islast, item]`` lists from the iterable object ``iterable`` (``isfirst`` is true for the first item, ``islast`` is true for the last item. Both are false otherwise)\nexport function _isfirstlast(iterable)\n{\n\tlet iter = _iter(iterable);\n\tlet isfirst = true;\n\tlet lastitem = iter.next();\n\treturn {\n\t\tnext: function() {\n\t\t\tif (lastitem.done)\n\t\t\t\treturn lastitem;\n\t\t\tlet item = iter.next();\n\t\t\tlet result = {value: [isfirst, item.done, lastitem.value], done: false};\n\t\t\tlastitem = item;\n\t\t\tisfirst = false;\n\t\t\treturn result;\n\t\t}\n\t};\n};\n\n// Return an iterator over ``[index, isfirst, islast, item]`` lists from the iterable object ``iterable`` (``isfirst`` is true for the first item, ``islast`` is true for the last item. Both are false otherwise)\nexport function _enumfl(iterable, start=0)\n{\n\tlet iter = _iter(iterable);\n\tlet i = start;\n\tlet isfirst = true;\n\tlet lastitem = iter.next();\n\treturn {\n\t\tnext: function() {\n\t\t\tif (lastitem.done)\n\t\t\t\treturn lastitem;\n\t\t\tlet item = iter.next();\n\t\t\tlet result = {value: [i++, isfirst, item.done, lastitem.value], done: false};\n\t\t\tlastitem = item;\n\t\t\tisfirst = false;\n\t\t\treturn result;\n\t\t}\n\t};\n};\n\n// Return an iterator over lists, where the i'th list consists of all i'th items from the arguments (terminating when the shortest argument ends)\nexport function _zip(iterables)\n{\n\tlet result;\n\tif (iterables.length)\n\t{\n\t\tlet iters = [];\n\t\tfor (let iterable of iterables)\n\t\t\titers.push(_iter(iterable));\n\n\t\treturn {\n\t\t\tnext: function() {\n\t\t\t\tlet items = [];\n\t\t\t\tfor (let iter of iters)\n\t\t\t\t{\n\t\t\t\t\tlet item = iter.next();\n\t\t\t\t\tif (item.done)\n\t\t\t\t\t\treturn item;\n\t\t\t\t\titems.push(item.value);\n\t\t\t\t}\n\t\t\t\treturn {value: items, done: false};\n\t\t\t}\n\t\t};\n\t}\n\telse\n\t{\n\t\treturn {\n\t\t\tnext: function() {\n\t\t\t\treturn {done: true};\n\t\t\t}\n\t\t};\n\t}\n};\n\n// Return the absolute value for the number ``number``\nexport function _abs(number)\n{\n\tif (number !== null && typeof(number.__abs__) === \"function\")\n\t\treturn number.__abs__();\n\treturn Math.abs(number);\n};\n\n// Return a ``Date`` object from the arguments passed in\nexport function _date(year, month, day)\n{\n\treturn new Date_(year, month, day);\n};\n\nexport function _datetime(year, month, day, hour=0, minute=0, second=0, microsecond=0)\n{\n\treturn new Date(year, month-1, day, hour, minute, second, microsecond/1000);\n};\n\n// Return a ``TimeDelta`` object from the arguments passed in\nexport function _timedelta(days=0, seconds=0, microseconds=0)\n{\n\treturn new TimeDelta(days, seconds, microseconds);\n};\n\n// Return a ``MonthDelta`` object from the arguments passed in\nexport function _monthdelta(months=0)\n{\n\treturn new MonthDelta(months);\n};\n\n// Return a ``Color`` object from the hue, luminescence, saturation and alpha values ``h``, ``l``, ``s`` and ``a`` (i.e. using the HLS color model)\nexport function _hls(h, l, s, a)\n{\n\tlet _v = function _v(m1, m2, hue)\n\t{\n\t\thue = hue % 1.0;\n\t\tif (hue < 1/6)\n\t\t\treturn m1 + (m2-m1)*hue*6.0;\n\t\telse if (hue < 0.5)\n\t\t\treturn m2;\n\t\telse if (hue < 2/3)\n\t\t\treturn m1 + (m2-m1)*(2/3-hue)*6.0;\n\t\treturn m1;\n\t};\n\n\tlet m1, m2;\n\tif (a === undefined)\n\t\ta = 1;\n\tif (s === 0.0)\n\t\treturn _rgb(l, l, l, a);\n\tif (l <= 0.5)\n\t\tm2 = l * (1.0+s);\n\telse\n\t\tm2 = l+s-(l*s);\n\tm1 = 2.0*l - m2;\n\treturn _rgb(_v(m1, m2, h+1/3), _v(m1, m2, h), _v(m1, m2, h-1/3), a);\n};\n\n// Return a ``Color`` object from the hue, saturation, value and alpha values ``h``, ``s``, ``v`` and ``a`` (i.e. using the HSV color model)\nexport function _hsv(h, s, v, a)\n{\n\tif (s === 0.0)\n\t\treturn _rgb(v, v, v, a);\n\tlet i = Math.floor(h*6.0);\n\tlet f = (h*6.0) - i;\n\tlet p = v*(1.0 - s);\n\tlet q = v*(1.0 - s*f);\n\tlet t = v*(1.0 - s*(1.0-f));\n\tswitch (i%6)\n\t{\n\t\tcase 0:\n\t\t\treturn _rgb(v, t, p, a);\n\t\tcase 1:\n\t\t\treturn _rgb(q, v, p, a);\n\t\tcase 2:\n\t\t\treturn _rgb(p, v, t, a);\n\t\tcase 3:\n\t\t\treturn _rgb(p, q, v, a);\n\t\tcase 4:\n\t\t\treturn _rgb(t, p, v, a);\n\t\tcase 5:\n\t\t\treturn _rgb(v, p, q, a);\n\t}\n};\n\n// Return the item with the key ``key`` from the dict ``container``. If ``container`` doesn't have this key, return ``defaultvalue``\nexport function _get(container, key, defaultvalue)\n{\n\tif (_ismap(container))\n\t{\n\t\tif (container.has(key))\n\t\t\treturn container.get(key);\n\t\treturn defaultvalue;\n\t}\n\telse if (_isobject(container))\n\t{\n\t\tlet result = container[key];\n\t\tif (result === undefined)\n\t\t\treturn defaultvalue;\n\t\treturn result;\n\t}\n\tthrow new TypeError(\"get() requires a dict\");\n};\n\n// Return a ``Date`` object for the current time\nexport function now()\n{\n\treturn new Date();\n};\n\n// Return a ``Date`` object for the current time in UTC\nexport function utcnow()\n{\n\tlet now = new Date();\n\t// FIXME: The timezone is wrong for the new ``Date`` object.\n\treturn new Date(now.getUTCFullYear(), now.getUTCMonth(), now.getUTCDate(), now.getUTCHours(), now.getUTCMinutes(), now.getUTCSeconds(), now.getUTCMilliseconds());\n};\n\n// Return an ``Date`` object for today\nexport function today()\n{\n\tlet now = new Date();\n\treturn new Date_(now.getFullYear(), now.getMonth()+1, now.getDate());\n};\n\nexport class Module\n{\n\tconstructor(name, doc, content={})\n\t{\n\t\tthis.__name__ = name;\n\t\tthis.__doc__ = doc;\n\t\tfor (let [key, value] of Object.entries(content))\n\t\t\tthis[key] = value;\n\t}\n\n\t__getattr__(attrname)\n\t{\n\t\tif (this.hasOwnProperty(attrname))\n\t\t\treturn this[attrname];\n\t\tthrow new ul4.AttributeError(this, attrname);\n\t}\n};\n\nfunction _ul4on_loads(dump)\n{\n\treturn loads(dump);\n};\n\nexpose(_ul4on_loads, [\"dump\", \"p\"], {name: \"loads\"});\n\nfunction _ul4on_dumps(obj, indent=null)\n{\n\treturn dumps(obj, indent);\n};\n\nexpose(_ul4on_dumps, [\"obj\", \"p\", \"indent\", \"pk=\", null], {name: \"dumps\"});\n\nfunction _ul4on_encoder(indent=null)\n{\n\treturn new Encoder(indent);\n}\n\nexpose(_ul4on_encoder, [\"indent\", \"pk=\", null], {name: \"Encoder\"});\n\nfunction _ul4on_decoder()\n{\n\treturn new Decoder();\n}\n\nexpose(_ul4on_decoder, [], {name: \"Decoder\"});\n\nexport const _ul4on = new Module(\n\t\"ul4on\",\n\t\"Object serialization\",\n\t{\n\t\tloads: _ul4on_loads,\n\t\tdumps: _ul4on_dumps,\n\t\tEncoder: _ul4on_encoder,\n\t\tDecoder: _ul4on_decoder\n\t}\n);\n\nfunction isclose(a, b, rel_tol=1e-9, abs_tol=0.0)\n{\n\tif (a === b)\n\t\treturn true;\n\n\tif (a === Infinity || a === -Infinity || b === Infinity || b === -Infinity)\n\t\treturn false;\n\n\tlet diff = Math.abs(b - a);\n\n\tif (diff <= Math.abs(rel_tol * a))\n\t\treturn true;\n\tif (diff <= Math.abs(rel_tol * b))\n\t\treturn true;\n\tif (diff <= abs_tol)\n\t\treturn true;\n\treturn false;\n}\n\nexpose(Math.cos, [\"x\", \"p\"]);\nexpose(Math.sin, [\"x\", \"p\"]);\nexpose(Math.tan, [\"x\", \"p\"]);\nexpose(Math.sqrt, [\"x\", \"p\"]);\nexpose(isclose, [\"a\", \"pk\", \"b\", \"pk\", \"rel_tol\", \"k=\", 1e-9, \"abs_tol\", \"k=\", 0.0]);\n\nexport const _math = new Module(\n\t\"math\",\n\t\"Math related functions and constants\",\n\t{\n\t\tpi: Math.PI,\n\t\te: Math.E,\n\t\ttau: 2 * Math.PI,\n\t\tcos: Math.cos,\n\t\tsin: Math.sin,\n\t\ttan: Math.tan,\n\t\tsqrt: Math.sqrt,\n\t\tisclose: isclose\n\t}\n);\n\n\nexport function _attrgetter(attrnames)\n{\n\tfunction getone(obj, dottedname)\n\t{\n\t\tlet result = obj;\n\t\tfor (let name of dottedname.split(\".\"))\n\t\t\tresult = AttrAST.prototype._get(result, name);\n\t\treturn result;\n\t}\n\n\tfunction get(obj)\n\t{\n\t\tif (attrnames.length === 1)\n\t\t\treturn getone(obj, attrnames[0]);\n\t\telse\n\t\t{\n\t\t\tlet result = [];\n\t\t\tfor (let dottedattrname of attrnames)\n\t\t\t\tresult.push(getone(obj, dottedattrname));\n\t\t\treturn result;\n\t\t}\n\t}\n\texpose(get, [\"obj\", \"p\"]);\n\treturn get;\n}\n\nexpose(_attrgetter, [\"attrs\", \"*\"]);\n\nexport const _operator = new Module(\n\t\"operator\",\n\t\"Various operators as functions\",\n\t{\n\t\tattrgetter: _attrgetter\n\t}\n);\n\nexport const _ul4 = new Module(\n\t\"ul4\",\n\t\"UL4 - a templating language\",\n\t{\n\t}\n);\n\nexport let builtins = {\n\trepr: _repr,\n\tascii: _ascii,\n\tstr: _str,\n\tint: _int,\n\tfloat: _float,\n\tlist: _list,\n\tset: _set,\n\tbool: _bool,\n\tlen: _len,\n\ttype: _type,\n\tformat: _format,\n\tany: _any,\n\tall: _all,\n\tzip: _zip,\n\tgetattr: _getattr,\n\thasattr: _hasattr,\n\tdir: _dir,\n\tisundefined: _isundefined,\n\tisdefined: _isdefined,\n\tisnone: _isnone,\n\tisbool: _isbool,\n\tisint: _isint,\n\tisfloat: _isfloat,\n\tisstr: _isstr,\n\tisdate: _isdate,\n\tisdatetime: _isdatetime,\n\tiscolor: _iscolor,\n\tistimedelta: _istimedelta,\n\tismonthdelta: _ismonthdelta,\n\tistemplate: _istemplate,\n\tisfunction: _isfunction,\n\tislist: _islist,\n\tisset: _isanyset,\n\tisdict: _isdict,\n\tisexception: _isexception,\n\tasjson: _asjson,\n\tfromjson: _fromjson,\n\tasul4on: _asul4on,\n\tfromul4on: _fromul4on,\n\tnow: now,\n\tutcnow: utcnow,\n\ttoday: today,\n\tenumerate: _enumerate,\n\tisfirst: _isfirst,\n\tislast: _islast,\n\tisfirstlast: _isfirstlast,\n\tenumfl: _enumfl,\n\tabs: _abs,\n\tdate: _date,\n\tdatetime: _datetime,\n\ttimedelta: _timedelta,\n\tmonthdelta: _monthdelta,\n\trgb: _rgb,\n\thls: _hls,\n\thsv: _hsv,\n\txmlescape: _xmlescape,\n\tcsv: _csv,\n\tchr: _chr,\n\tord: _ord,\n\thex: _hex,\n\toct: _oct,\n\tbin: _bin,\n\tmin: _min,\n\tmax: _max,\n\tsum: _sum,\n\tfirst: _first,\n\tlast: _last,\n\tsorted: _sorted,\n\trange: _range,\n\tslice: _slice,\n\turlquote: _urlquote,\n\turlunquote: _urlunquote,\n\treversed: _reversed,\n\trandom: _random,\n\trandrange: _randrange,\n\trandchoice: _randchoice,\n\tround: _round,\n\tfloor: _floor,\n\tceil: _ceil,\n\tmd5: _md5,\n\tscrypt: _scrypt,\n\tul4on: _ul4on,\n\tul4: _ul4,\n\tmath: _math,\n\toperator: _operator\n};\n\nexpose(_repr, [\"obj\", \"p\"], {name: \"repr\"});\nexpose(_ascii, [\"obj\", \"p\"], {name: \"ascii\"});\nexpose(_str, [\"obj\", \"p=\", \"\"], {name: \"str\"});\nexpose(_int, [\"obj\", \"p=\", 0, \"base\", \"pk=\", null], {name: \"int\"});\nexpose(_float, [\"obj\", \"p=\", 0.0], {name: \"float\"});\nexpose(_list, [\"iterable\", \"p=\", []], {name: \"list\"});\nexpose(_set, [\"iterable\", \"p=\", []], {name: \"set\"});\nexpose(_bool, [\"obj\", \"p=\", false], {name: \"bool\"});\nexpose(_len, [\"sequence\", \"p\"], {name: \"len\"});\nexpose(_type, [\"obj\", \"p\"], {name: \"type\"});\nexpose(_format, [\"obj\", \"pk\", \"fmt\", \"pk\", \"lang\", \"pk=\", null], {name: \"format\"});\nexpose(_any, [\"iterable\", \"p\"], {name: \"any\"});\nexpose(_all, [\"iterable\", \"p\"], {name: \"all\"});\nexpose(_zip, [\"iterables\", \"*\"], {name: \"zip\"});\nexpose(_getattr, [\"obj\", \"p\", \"attrname\", \"p\", \"default\", \"p=\", null], {name: \"getattr\"});\nexpose(_hasattr, [\"obj\", \"p\", \"attrname\", \"p\"], {name: \"hasattr\"});\nexpose(_dir, [\"obj\", \"p\"], {name: \"dir\"});\nexpose(_isundefined, [\"obj\", \"p\"], {name: \"isundefined\"});\nexpose(_isdefined, [\"obj\", \"p\"], {name: \"isdefined\"});\nexpose(_isnone, [\"obj\", \"p\"], {name: \"isnone\"});\nexpose(_isbool, [\"obj\", \"p\"], {name: \"isbool\"});\nexpose(_isint, [\"obj\", \"p\"], {name: \"isint\"});\nexpose(_isfloat, [\"obj\", \"p\"], {name: \"isfloat\"});\nexpose(_isstr, [\"obj\", \"p\"], {name: \"isstr\"});\nexpose(_isdate, [\"obj\", \"p\"], {name: \"isdate\"});\nexpose(_isdatetime, [\"obj\", \"p\"], {name: \"isdatetime\"});\nexpose(_iscolor, [\"obj\", \"p\"], {name: \"iscolor\"});\nexpose(_istimedelta, [\"obj\", \"p\"], {name: \"istimedelta\"});\nexpose(_ismonthdelta, [\"obj\", \"p\"], {name: \"ismonthdelta\"});\nexpose(_istemplate, [\"obj\", \"p\"], {name: \"istemplate\"});\nexpose(_isfunction, [\"obj\", \"p\"], {name: \"isfunction\"});\nexpose(_islist, [\"obj\", \"p\"], {name: \"islist\"});\nexpose(_isanyset, [\"obj\", \"p\"], {name: \"isset\"});\nexpose(_isdict, [\"obj\", \"p\"], {name: \"isdict\"});\nexpose(_isexception, [\"obj\", \"p\"], {name: \"isexception\"});\nexpose(_asjson, [\"obj\", \"p\"], {name: \"asjson\"});\nexpose(_fromjson, [\"string\", \"p\"], {name: \"fromjson\"});\nexpose(_asul4on, [\"obj\", \"p\", \"indent\", \"pk=\",null], {name: \"asul4on\"});\nexpose(_fromul4on, [\"dump\", \"p\"], {name: \"fromul4on\"});\nexpose(now, []);\nexpose(utcnow, []);\nexpose(today, []);\nexpose(_enumerate, [\"iterable\", \"pk\", \"start\", \"pk=\", 0], {name: \"enumerate\"});\nexpose(_isfirst, [\"iterable\", \"p\"], {name: \"isfirst\"});\nexpose(_islast, [\"iterable\", \"p\"], {name: \"islast\"});\nexpose(_isfirstlast, [\"iterable\", \"p\"], {name: \"isfirstlast\"});\nexpose(_enumfl, [\"iterable\", \"p\", \"start\", \"pk=\", 0], {name: \"enumfl\"});\nexpose(_abs, [\"number\", \"p\"], {name: \"abs\"});\nexpose(_date, [\"year\", \"pk\", \"month\", \"pk\", \"day\", \"pk\"], {name: \"date\"});\nexpose(_datetime, [\"year\", \"pk\", \"month\", \"pk\", \"day\", \"pk\", \"hour\", \"pk=\", 0, \"minute\", \"pk=\", 0, \"second\", \"pk=\", 0, \"microsecond\", \"pk=\", 0], {name: \"datetime\"});\nexpose(_timedelta, [\"days\", \"pk=\", 0, \"seconds\", \"pk=\", 0, \"microseconds\", \"pk=\", 0], {name: \"timedelta\"});\nexpose(_monthdelta, [\"months\", \"p=\", 0], {name: \"monthdelta\"});\nexpose(_rgb, [\"r\", \"pk\", \"g\", \"pk\", \"b\", \"pk\", \"a\", \"pk=\", 1.0], {name: \"rgb\"});\nexpose(_hls, [\"h\", \"pk\", \"l\", \"pk\", \"s\", \"pk\", \"a\", \"pk=\", 1.0], {name: \"hls\"});\nexpose(_hsv, [\"h\", \"pk\", \"s\", \"pk\", \"v\", \"pk\", \"a\", \"pk=\", 1.0], {name: \"hsv\"});\nexpose(_xmlescape, [\"obj\", \"p\"], {name: \"xmlescape\"});\nexpose(_csv, [\"obj\", \"p\"], {name: \"csv\"});\nexpose(_chr, [\"i\", \"p\"], {name: \"chr\"});\nexpose(_ord, [\"c\", \"p\"], {name: \"ord\"});\nexpose(_hex, [\"number\", \"p\"], {name: \"hex\"});\nexpose(_oct, [\"number\", \"p\"], {name: \"oct\"});\nexpose(_bin, [\"number\", \"p\"], {name: \"bin\"});\nexpose(_min, [\"default\", \"k=\", Object, \"key\", \"k=\", null, \"args\", \"*\"], {name: \"min\", needscontext: true});\nexpose(_max, [\"default\", \"k=\", Object, \"key\", \"k=\", null, \"args\", \"*\"], {name: \"max\", needscontext: true});\nexpose(_sum, [\"iterable\", \"p\", \"start\", \"pk=\", 0], {name: \"sum\"});\nexpose(_first, [\"iterable\", \"p\", \"default\", \"pk=\", null], {name: \"first\"});\nexpose(_last, [\"iterable\", \"p\", \"default\", \"pk=\", null], {name: \"last\"});\nexpose(_sorted, [\"iterable\", \"p\", \"key\", \"pk=\", null, \"reverse\", \"pk=\", false], {name: \"sorted\", needscontext: true});\nexpose(_range, [\"start\", \"p\", \"stop\", \"p=\", Object, \"step\", \"p=\", Object], {name: \"range\"});\nexpose(_slice, [\"iterable\", \"p\", \"start\", \"p\", \"stop\", \"p=\", Object, \"step\", \"p=\", Object], {name: \"slice\"});\nexpose(_urlquote, [\"string\", \"pk\"], {name: \"urlquote\"});\nexpose(_urlunquote, [\"string\", \"pk\"], {name: \"urlunquote\"});\nexpose(_reversed, [\"sequence\", \"p\"], {name: \"reversed\"});\nexpose(_random, [], {name: \"random\"});\nexpose(_randrange, [\"start\", \"p\", \"stop\", \"p=\", Object, \"step\", \"p=\", Object], {name: \"randrange\"});\nexpose(_randchoice, [\"seq\", \"pk\"], {name: \"randchoice\"});\nexpose(_round, [\"x\", \"p\", \"digit\", \"pk=\", 0], {name: \"round\"});\nexpose(_floor, [\"x\", \"p\", \"digit\", \"pk=\", 0], {name: \"floor\"});\nexpose(_ceil, [\"x\", \"p\", \"digit\", \"pk=\", 0], {name: \"ceil\"});\nexpose(_md5, [\"string\", \"p\"], {name: \"md5\"});\nexpose(_scrypt, [\"string\", \"p\", \"salt\", \"pk\"], {name: \"scrypt\"});\n\n// Functions implementing UL4 methods\nexport function _count(obj, sub, start=null, end=null)\n{\n\tif (start < 0)\n\t\tstart += obj.length;\n\tif (start === null)\n\t\tstart = 0;\n\n\tif (end < 0)\n\t\tend += obj.length;\n\tif (end === null)\n\t\tend = obj.length;\n\n\tlet isstr = _isstr(obj);\n\n\tif (isstr && !sub.length)\n\t{\n\t\tif (end < 0 || start > obj.length || start > end)\n\t\t\treturn 0;\n\t\tlet result = end - start + 1;\n\t\tif (result > obj.length + 1)\n\t\t\tresult = obj.length + 1;\n\t\treturn result;\n\t}\n\n\tstart = _bound(start, obj.length);\n\tend = _bound(end, obj.length);\n\n\tlet count = 0;\n\tif (_islist(obj))\n\t{\n\t\tfor (let i = start; i < end; ++i)\n\t\t{\n\t\t\tif (_eq(obj[i], sub))\n\t\t\t\t++count;\n\t\t}\n\t\treturn count;\n\t}\n\telse // string\n\t{\n\t\tlet lastIndex = start;\n\n\t\tfor (;;)\n\t\t{\n\t\t\tlastIndex = obj.indexOf(sub, lastIndex);\n\t\t\tif (lastIndex == -1)\n\t\t\t\tbreak;\n\t\t\tif (lastIndex + sub.length > end)\n\t\t\t\tbreak;\n\t\t\t++count;\n\t\t\tlastIndex += sub.length;\n\t\t}\n\t\treturn count;\n\t}\n};\n\nexport function _find(obj, sub, start=null, end=null)\n{\n\tif (start < 0)\n\t\tstart += obj.length;\n\tif (start === null)\n\t\tstart = 0;\n\tif (end < 0)\n\t\tend += obj.length;\n\tif (end === null)\n\t\tend = obj.length;\n\tstart = _bound(start, obj.length);\n\tend = _bound(end, obj.length);\n\n\tif (start !== 0 || end !== obj.length)\n\t{\n\t\tif (typeof(obj) === \"string\")\n\t\t\tobj = obj.substring(start, end);\n\t\telse\n\t\t\tobj = obj.slice(start, end);\n\t}\n\tlet result = obj.indexOf(sub);\n\tif (result !== -1)\n\t\tresult += start;\n\treturn result;\n};\n\nexport function _rfind(obj, sub, start=null, end=null)\n{\n\tif (start < 0)\n\t\tstart += obj.length;\n\tif (start === null)\n\t\tstart = 0;\n\tif (end < 0)\n\t\tend += obj.length;\n\tif (end === null)\n\t\tend = obj.length;\n\tstart = _bound(start, obj.length);\n\tend = _bound(end, obj.length);\n\n\tif (start !== 0 || end !== obj.length)\n\t{\n\t\tif (typeof(obj) === \"string\")\n\t\t\tobj = obj.substring(start, end);\n\t\telse\n\t\t\tobj = obj.slice(start, end);\n\t}\n\tlet result = obj.lastIndexOf(sub);\n\tif (result !== -1)\n\t\tresult += start;\n\treturn result;\n};\n\nexport function _week4format(obj, firstweekday=null)\n{\n\tif (firstweekday === null)\n\t\tfirstweekday = 0;\n\telse\n\t\tfirstweekday %= 7;\n\n\tlet yearday = DateTimeProtocol.yearday(obj)+6;\n\tlet jan1 = new Date(obj.getFullYear(), 0, 1);\n\tlet jan1weekday = jan1.getDay();\n\tif (--jan1weekday < 0)\n\t\tjan1weekday = 6;\n\n\twhile (jan1weekday != firstweekday)\n\t{\n\t\t--yearday;\n\t\tif (++jan1weekday == 7)\n\t\t\tjan1weekday = 0;\n\t}\n\treturn Math.floor(yearday/7);\n};\n\nexport function _isleap(obj)\n{\n\treturn new Date(obj.getFullYear(), 1, 29).getMonth() === 1;\n};\n\nexport function _update(obj, others, kwargs)\n{\n\tif (!_isdict(obj))\n\t\tthrow new TypeError(\"update() requires a dict\");\n\tfor (let other of others)\n\t{\n\t\tif (_ismap(other))\n\t\t{\n\t\t\tother.forEach(function(value, key) {\n\t\t\t\t_setmap(obj, key, value);\n\t\t\t});\n\t\t}\n\t\telse if (_isobject(other))\n\t\t{\n\t\t\tfor (let key in other)\n\t\t\t\t_setmap(obj, key, other[key]);\n\t\t}\n\t\telse if (_islist(other))\n\t\t{\n\t\t\tfor (let item of other)\n\t\t\t{\n\t\t\t\tif (!_islist(item) || (item.length != 2))\n\t\t\t\t\tthrow new TypeError(\"update() requires a dict or a list of (key, value) pairs\");\n\t\t\t\t_setmap(obj, item[0], item[1]);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\tthrow new TypeError(\"update() requires a dict or a list of (key, value) pairs\");\n\t}\n\tkwargs.forEach(function(value, key) {\n\t\t_setmap(obj, key, value);\n\t});\n\treturn null;\n};\n\nexport class Color extends Proto\n{\n\tconstructor(r=0, g=0, b=0, a=255)\n\t{\n\t\tsuper();\n\t\tthis._r = r;\n\t\tthis._g = g;\n\t\tthis._b = b;\n\t\tthis._a = a;\n\t}\n\n\t__repr__()\n\t{\n\t\tlet r = _lpad(this._r.toString(16), \"0\", 2);\n\t\tlet g = _lpad(this._g.toString(16), \"0\", 2);\n\t\tlet b = _lpad(this._b.toString(16), \"0\", 2);\n\t\tlet a = _lpad(this._a.toString(16), \"0\", 2);\n\t\tif (this._a !== 0xff)\n\t\t{\n\t\t\tif (r[0] === r[1] && g[0] === g[1] && b[0] === b[1] && a[0] === a[1])\n\t\t\t\treturn \"#\" + r[0] + g[0] + b[0] + a[0];\n\t\t\telse\n\t\t\t\treturn \"#\" + r + g + b + a;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (r[0] === r[1] && g[0] === g[1] && b[0] === b[1])\n\t\t\t\treturn \"#\" + r[0] + g[0] + b[0];\n\t\t\telse\n\t\t\t\treturn \"#\" + r + g + b;\n\t\t}\n\t}\n\n\t__str__()\n\t{\n\t\tif (this._a !== 0xff)\n\t\t{\n\t\t\treturn \"rgba(\" + this._r + \", \" + this._g + \", \" + this._b + \", \" + (this._a/255) + \")\";\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlet r = _lpad(this._r.toString(16), \"0\", 2);\n\t\t\tlet g = _lpad(this._g.toString(16), \"0\", 2);\n\t\t\tlet b = _lpad(this._b.toString(16), \"0\", 2);\n\t\t\tif (r[0] === r[1] && g[0] === g[1] && b[0] === b[1])\n\t\t\t\treturn \"#\" + r[0] + g[0] + b[0];\n\t\t\telse\n\t\t\t\treturn \"#\" + r + g + b;\n\t\t}\n\t}\n\n\t__iter__()\n\t{\n\t\treturn {\n\t\t\tobj: this,\n\t\t\tindex: 0,\n\t\t\tnext: function() {\n\t\t\t\tif (this.index == 0)\n\t\t\t\t{\n\t\t\t\t\t++this.index;\n\t\t\t\t\treturn {value: this.obj._r, done: false};\n\t\t\t\t}\n\t\t\t\telse if (this.index == 1)\n\t\t\t\t{\n\t\t\t\t\t++this.index;\n\t\t\t\t\treturn {value: this.obj._g, done: false};\n\t\t\t\t}\n\t\t\t\telse if (this.index == 2)\n\t\t\t\t{\n\t\t\t\t\t++this.index;\n\t\t\t\t\treturn {value: this.obj._b, done: false};\n\t\t\t\t}\n\t\t\t\telse if (this.index == 3)\n\t\t\t\t{\n\t\t\t\t\t++this.index;\n\t\t\t\t\treturn {value: this.obj._a, done: false};\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\treturn {done: true};\n\t\t\t}\n\t\t};\n\t}\n\n\t__getattr__(attrname)\n\t{\n\t\tlet self = this;\n\t\tswitch (attrname)\n\t\t{\n\t\t\tcase \"r\":\n\t\t\t\tlet r = function r(){ return self._r; };\n\t\t\t\texpose(r, []);\n\t\t\t\treturn r;\n\t\t\tcase \"g\":\n\t\t\t\tlet g = function g(){ return self._g; };\n\t\t\t\texpose(g, []);\n\t\t\t\treturn g;\n\t\t\tcase \"b\":\n\t\t\t\tlet b = function b(){ return self._b; };\n\t\t\t\texpose(b, []);\n\t\t\t\treturn b;\n\t\t\tcase \"a\":\n\t\t\t\tlet a = function a(){ return self._a; };\n\t\t\t\texpose(a, []);\n\t\t\t\treturn a;\n\t\t\tcase \"lum\":\n\t\t\t\treturn expose(this.lum.bind(this), []);\n\t\t\tcase \"hls\":\n\t\t\t\treturn expose(this.hls.bind(this), []);\n\t\t\tcase \"hlsa\":\n\t\t\t\treturn expose(this.hlsa.bind(this), []);\n\t\t\tcase \"hsv\":\n\t\t\t\treturn expose(this.hsv.bind(this), []);\n\t\t\tcase \"hsva\":\n\t\t\t\treturn expose(this.hsva.bind(this), []);\n\t\t\tcase \"witha\":\n\t\t\t\treturn expose(this.witha.bind(this), [\"a\", \"pk\"]);\n\t\t\tcase \"withlum\":\n\t\t\t\treturn expose(this.withlum.bind(this), [\"lum\", \"pk\"]);\n\t\t\tcase \"abslum\":\n\t\t\t\treturn expose(this.abslum.bind(this), [\"lum\", \"pk\"]);\n\t\t\tcase \"rellum\":\n\t\t\t\treturn expose(this.rellum.bind(this), [\"lum\", \"pk\"]);\n\t\t\tdefault:\n\t\t\t\tthrow new AttributeError(this, attrname);\n\t\t}\n\t}\n\n\t__getitem__(key)\n\t{\n\t\tlet orgkey = key;\n\t\tif (key < 0)\n\t\t\tkey += 4;\n\t\tswitch (key)\n\t\t{\n\t\t\tcase 0:\n\t\t\t\treturn this._r;\n\t\t\tcase 1:\n\t\t\t\treturn this._g;\n\t\t\tcase 2:\n\t\t\t\treturn this._b;\n\t\t\tcase 3:\n\t\t\t\treturn this._a;\n\t\t\tdefault:\n\t\t\t\tthrow new IndexError(this, orgkey);\n\t\t}\n\t}\n\n\t__eq__(other)\n\t{\n\t\tif (other instanceof Color)\n\t\t\treturn this._r == other._r && this._g == other._g && this._b == other._b && this._a == other._a;\n\t\treturn false;\n\t}\n\n\tr()\n\t{\n\t\t\treturn this._r;\n\t}\n\n\tg()\n\t{\n\t\treturn this._g;\n\t}\n\n\tb()\n\t{\n\t\treturn this._b;\n\t}\n\n\ta()\n\t{\n\t\treturn this._a;\n\t}\n\n\tlum()\n\t{\n\t\treturn this.hls()[1];\n\t}\n\n\thls()\n\t{\n\t\tlet r = this._r/255.0;\n\t\tlet g = this._g/255.0;\n\t\tlet b = this._b/255.0;\n\t\tlet maxc = Math.max(r, g, b);\n\t\tlet minc = Math.min(r, g, b);\n\t\tlet h, l, s;\n\t\tlet rc, gc, bc;\n\n\t\tl = (minc+maxc)/2.0;\n\t\tif (minc == maxc)\n\t\t\treturn [0.0, l, 0.0];\n\t\tif (l <= 0.5)\n\t\t\ts = (maxc-minc) / (maxc+minc);\n\t\telse\n\t\t\ts = (maxc-minc) / (2.0-maxc-minc);\n\t\trc = (maxc-r) / (maxc-minc);\n\t\tgc = (maxc-g) / (maxc-minc);\n\t\tbc = (maxc-b) / (maxc-minc);\n\t\tif (r == maxc)\n\t\t\th = bc-gc;\n\t\telse if (g == maxc)\n\t\t\th = 2.0+rc-bc;\n\t\telse\n\t\t\th = 4.0+gc-rc;\n\t\th = (h/6.0) % 1.0;\n\t\treturn [h, l, s];\n\t}\n\n\thlsa()\n\t{\n\t\tlet hls = this.hls();\n\t\treturn hls.concat(this._a/255.0);\n\t}\n\n\thsv()\n\t{\n\t\tlet r = this._r/255.0;\n\t\tlet g = this._g/255.0;\n\t\tlet b = this._b/255.0;\n\t\tlet maxc = Math.max(r, g, b);\n\t\tlet minc = Math.min(r, g, b);\n\t\tlet v = maxc;\n\t\tif (minc == maxc)\n\t\t\treturn [0.0, 0.0, v];\n\t\tlet s = (maxc-minc) / maxc;\n\t\tlet rc = (maxc-r) / (maxc-minc);\n\t\tlet gc = (maxc-g) / (maxc-minc);\n\t\tlet bc = (maxc-b) / (maxc-minc);\n\t\tlet h;\n\t\tif (r == maxc)\n\t\t\th = bc-gc;\n\t\telse if (g == maxc)\n\t\t\th = 2.0+rc-bc;\n\t\telse\n\t\t\th = 4.0+gc-rc;\n\t\th = (h/6.0) % 1.0;\n\t\treturn [h, s, v];\n\t}\n\n\thsva()\n\t{\n\t\tlet hsv = this.hsv();\n\t\treturn hsv.concat(this._a/255.0);\n\t}\n\n\twitha(a)\n\t{\n\t\tif (typeof(a) !== \"number\")\n\t\t\tthrow new TypeError(\"witha() requires a number\");\n\t\treturn new Color(this._r, this._g, this._b, a);\n\t}\n\n\twithlum(lum)\n\t{\n\t\tif (typeof(lum) !== \"number\")\n\t\t\tthrow new TypeError(\"witha() requires a number\");\n\t\tlet hlsa = this.hlsa();\n\t\treturn _hls(hlsa[0], lum, hlsa[2], hlsa[3]);\n\t}\n\n\tul4type()\n\t{\n\t\treturn \"color\";\n\t}\n};\n\nexpose(Color.prototype.r, []);\nexpose(Color.prototype.g, []);\nexpose(Color.prototype.b, []);\nexpose(Color.prototype.a, []);\nexpose(Color.prototype.lum, []);\nexpose(Color.prototype.hls, []);\nexpose(Color.prototype.hlsa, []);\nexpose(Color.prototype.hsv, []);\nexpose(Color.prototype.hsva, []);\nexpose(Color.prototype.witha, [\"a\", \"pk\"]);\nexpose(Color.prototype.withlum, [\"lum\", \"pk\"]);\n\nexport class Date_ extends Proto\n{\n\tconstructor(year, month, day)\n\t{\n\t\tsuper();\n\t\tthis._date = new Date(year, month-1, day);\n\t}\n\n\t__repr__()\n\t{\n\t\treturn '@(' + this.__str__() + \")\";\n\t}\n\n\t__str__()\n\t{\n\t\treturn _lpad(this._date.getFullYear(), \"0\", 4) + \"-\" + _lpad(this._date.getMonth()+1, \"0\", 2) + \"-\" + _lpad(this._date.getDate(), \"0\", 2);\n\t}\n\n\t__eq__(other)\n\t{\n\t\tif (other instanceof Date_)\n\t\t\treturn this._date.getTime() === other._date.getTime();\n\t\treturn false;\n\t}\n\n\t__lt__(other)\n\t{\n\t\tif (other instanceof Date_)\n\t\t\treturn this._date < other._date;\n\t\t_unorderable(\"<\", this, other);\n\t}\n\n\t__le__(other)\n\t{\n\t\tif (other instanceof Date_)\n\t\t\treturn this._date <= other._date;\n\t\t_unorderable(\"<=\", this, other);\n\t}\n\n\t__gt__(other)\n\t{\n\t\tif (other instanceof Date_)\n\t\t\treturn this._date > other._date;\n\t\t_unorderable(\">\", this, other);\n\t}\n\n\t__ge__(other)\n\t{\n\t\tif (other instanceof Date_)\n\t\t\treturn this._date >= other._date;\n\t\t_unorderable(\">=\", this, other);\n\t}\n\n\tyear()\n\t{\n\t\treturn this._date.getFullYear();\n\t}\n\n\tmonth()\n\t{\n\t\treturn this._date.getMonth()+1;\n\t}\n\n\tday()\n\t{\n\t\treturn this._date.getDate();\n\t}\n\n\tul4type()\n\t{\n\t\treturn \"date\";\n\t}\n};\n\n\nexport class TimeDelta extends Proto\n{\n\tconstructor(days=0, seconds=0, microseconds=0)\n\t{\n\t\tsuper();\n\t\tlet total_microseconds = Math.floor((days * 86400 + seconds)*1000000 + microseconds);\n\n\t\tmicroseconds = ModAST.prototype._do(total_microseconds, 1000000);\n\t\tlet total_seconds = Math.floor(total_microseconds / 1000000);\n\t\tseconds = ModAST.prototype._do(total_seconds, 86400);\n\t\tdays = Math.floor(total_seconds / 86400);\n\t\tif (seconds < 0)\n\t\t{\n\t\t\tseconds += 86400;\n\t\t\t--days;\n\t\t}\n\n\t\tthis._microseconds = microseconds;\n\t\tthis._seconds = seconds;\n\t\tthis._days = days;\n\t}\n\n\ttotal_seconds()\n\t{\n\t\treturn this._days * 24 * 60 * 60 + this._seconds;\n\t}\n\n\t__repr__()\n\t{\n\t\tlet v = [], first = true;\n\t\tv.push(\"timedelta(\");\n\t\tif (this._days)\n\t\t{\n\t\t\tv.push(\"days=\" + this._days);\n\t\t\tfirst = false;\n\t\t}\n\t\tif (this._seconds)\n\t\t{\n\t\t\tif (!first)\n\t\t\t\tv.push(\", \");\n\t\t\tv.push(\"seconds=\" + this._seconds);\n\t\t\tfirst = false;\n\t\t}\n\t\tif (this._microseconds)\n\t\t{\n\t\t\tif (!first)\n\t\t\t\tv.push(\", \");\n\t\t\tv.push(\"microseconds=\" + this._microseconds);\n\t\t}\n\t\tv.push(\")\");\n\t\treturn v.join(\"\");\n\t}\n\n\t__str__()\n\t{\n\t\tlet v = [];\n\t\tif (this._days)\n\t\t{\n\t\t\tv.push(this._days + \" day\");\n\t\t\tif (this._days !== -1 && this._days !== 1)\n\t\t\t\tv.push(\"s\");\n\t\t\tv.push(\", \");\n\t\t}\n\t\tlet seconds = this._seconds % 60;\n\t\tlet minutes = Math.floor(this._seconds / 60);\n\t\tlet hours = Math.floor(minutes / 60);\n\t\tminutes = minutes % 60;\n\n\t\tv.push(\"\" + hours);\n\t\tv.push(\":\");\n\t\tv.push(_lpad(minutes.toString(), \"0\", 2));\n\t\tv.push(\":\");\n\t\tv.push(_lpad(seconds.toString(), \"0\", 2));\n\t\tif (this._microseconds)\n\t\t{\n\t\t\tv.push(\".\");\n\t\t\tv.push(_lpad(this._microseconds.toString(), \"0\", 6));\n\t\t}\n\t\treturn v.join(\"\");\n\t}\n\n\t__bool__()\n\t{\n\t\treturn this._days !== 0 || this._seconds !== 0 || this._microseconds !== 0;\n\t}\n\n\t__abs__()\n\t{\n\t\treturn this._days < 0 ? new TimeDelta(-this._days, -this._seconds, -this._microseconds) : this;\n\t}\n\n\t__eq__(other)\n\t{\n\t\tif (other instanceof TimeDelta)\n\t\t\treturn (this._days === other._days) && (this._seconds === other._seconds) && (this._microseconds === other._microseconds);\n\t\treturn false;\n\t}\n\n\t__lt__(other)\n\t{\n\t\tif (other instanceof TimeDelta)\n\t\t{\n\t\t\tif (this._days != other._days)\n\t\t\t\treturn this._days < other._days;\n\t\t\tif (this._seconds != other._seconds)\n\t\t\t\treturn this._seconds < other._seconds;\n\t\t\treturn this._microseconds < other._microseconds;\n\t\t}\n\t\t_unorderable(\"<\", this, other);\n\t}\n\n\t__le__(other)\n\t{\n\t\tif (other instanceof TimeDelta)\n\t\t{\n\t\t\tif (this._days != other._days)\n\t\t\t\treturn this._days < other._days;\n\t\t\tif (this._seconds != other._seconds)\n\t\t\t\treturn this._seconds < other._seconds;\n\t\t\treturn this._microseconds <= other._microseconds;\n\t\t}\n\t\t_unorderable(\"<=\", this, other);\n\t}\n\n\t__gt__(other)\n\t{\n\t\tif (other instanceof TimeDelta)\n\t\t{\n\t\t\tif (this._days != other._days)\n\t\t\t\treturn this._days > other._days;\n\t\t\tif (this._seconds != other._seconds)\n\t\t\t\treturn this._seconds > other._seconds;\n\t\t\treturn this._microseconds > other._microseconds;\n\t\t}\n\t\t_unorderable(\">\", this, other);\n\t}\n\n\t__ge__(other)\n\t{\n\t\tif (other instanceof TimeDelta)\n\t\t{\n\t\t\tif (this._days != other._days)\n\t\t\t\treturn this._days > other._days;\n\t\t\tif (this._seconds != other._seconds)\n\t\t\t\treturn this._seconds > other._seconds;\n\t\t\treturn this._microseconds >= other._microseconds;\n\t\t}\n\t\t_unorderable(\">=\", this, other);\n\t}\n\n\t__neg__()\n\t{\n\t\treturn new TimeDelta(-this._days, -this._seconds, -this._microseconds);\n\t}\n\n\t_adddate(date, days)\n\t{\n\t\tlet year = date._date.getFullYear();\n\t\tlet month = date._date.getMonth();\n\t\tlet day = date._date.getDate() + days;\n\t\treturn new Date(year, month, day);\n\t}\n\n\t_adddatetime(date, days, seconds, microseconds)\n\t{\n\t\tlet year = date.getFullYear();\n\t\tlet month = date.getMonth();\n\t\tlet day = date.getDate() + days;\n\t\tlet hour = date.getHours();\n\t\tlet minute = date.getMinutes();\n\t\tlet second = date.getSeconds() + seconds;\n\t\tlet millisecond = date.getMilliseconds() + microseconds/1000;\n\t\treturn new Date(year, month, day, hour, minute, second, millisecond);\n\t}\n\n\t__add__(other)\n\t{\n\t\tif (other instanceof TimeDelta)\n\t\t\treturn new TimeDelta(this._days + other._days, this._seconds + other._seconds, this._microseconds + other._microseconds);\n\t\telse if (_isdate(other))\n\t\t\treturn this._adddate(other, this._days);\n\t\telse if (_isdatetime(other))\n\t\t\treturn this._adddatetime(other, this._days, this._seconds, this._microseconds);\n\t\tthrow new TypeError(_type(this) + \" + \" + _type(other) + \" not supported\");\n\t}\n\n\t__radd__(other)\n\t{\n\t\tif (_isdate(other))\n\t\t\treturn this._adddate(other, this._days);\n\t\telse if (_isdatetime(other))\n\t\t\treturn this._adddatetime(other, this._days, this._seconds, this._microseconds);\n\t\tthrow new TypeError(_type(this) + \" + \" + _type(other) + \" not supported\");\n\t}\n\n\t__sub__(other)\n\t{\n\t\tif (other instanceof TimeDelta)\n\t\t\treturn new TimeDelta(this._days - other._days, this._seconds - other._seconds, this._microseconds - other._microseconds);\n\t\tthrow new TypeError(_type(this) + \" - \" + _type(other) + \" not supported\");\n\t}\n\n\t__rsub__(other)\n\t{\n\t\tif (_isdate(other))\n\t\t\treturn this._adddate(other, -this._days);\n\t\telse if (_isdatetime(other))\n\t\t\treturn this._adddatetime(other, -this._days, -this._seconds, -this._microseconds);\n\t\tthrow new TypeError(_type(this) + \" - \" + _type(other) + \" not supported\");\n\t}\n\n\t__mul__(other)\n\t{\n\t\tif (typeof(other) === \"number\")\n\t\t\treturn new TimeDelta(this._days * other, this._seconds * other, this._microseconds * other);\n\t\tthrow new TypeError(_type(this) + \" * \" + _type(other) + \" not supported\");\n\t}\n\n\t__rmul__(other)\n\t{\n\t\tif (typeof(other) === \"number\")\n\t\t\treturn new TimeDelta(this._days * other, this._seconds * other, this._microseconds * other);\n\t\tthrow new TypeError(_type(this) + \" * \" + _type(other) + \" not supported\");\n\t}\n\n\t__truediv__(other)\n\t{\n\t\tif (typeof(other) === \"number\" || typeof(other) === \"boolean\")\n\t\t{\n\t\t\tif (other == 0)\n\t\t\t\tthrow new ZeroDivisionError();\n\t\t\treturn new TimeDelta(this._days / other, this._seconds / other, this._microseconds / other);\n\t\t}\n\t\telse if (other instanceof TimeDelta)\n\t\t{\n\t\t\tlet myValue = this._days;\n\t\t\tlet otherValue = other._days;\n\t\t\tlet hasSeconds = this._seconds || other._seconds;\n\t\t\tlet hasMicroseconds = this._microseconds || other._microseconds;\n\t\t\tif (hasSeconds || hasMicroseconds)\n\t\t\t{\n\t\t\t\tmyValue = myValue*86400+this._seconds;\n\t\t\t\totherValue = otherValue*86400 + other._seconds;\n\t\t\t\tif (hasMicroseconds)\n\t\t\t\t{\n\t\t\t\t\tmyValue = myValue * 1000000 + this._microseconds;\n\t\t\t\t\totherValue = otherValue * 1000000 + other._microseconds;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (otherValue == 0)\n\t\t\t\tthrow new ZeroDivisionError();\n\t\t\treturn myValue/otherValue;\n\t\t}\n\t\tthrow new TypeError(_type(this) + \" / \" + _type(other) + \" not supported\");\n\t}\n\n\t__floordiv__(other)\n\t{\n\t\tif (typeof(other) === \"number\" || typeof(other) === \"boolean\")\n\t\t{\n\t\t\tif (other == 0)\n\t\t\t\tthrow new ZeroDivisionError();\n\t\t\tif (_isint(other))\n\t\t\t{\n\t\t\t\treturn new TimeDelta(this._days / other, this._seconds / other, this._microseconds / other);\n\t\t\t}\n\t\t}\n\t\telse if (other instanceof TimeDelta)\n\t\t{\n\t\t\tlet result = this.__truediv__(other);\n\t\t\treturn Math.floor(result);\n\t\t}\n\t}\n\n\t__getattr__(attrname)\n\t{\n\t\tlet self = this;\n\t\tswitch (attrname)\n\t\t{\n\t\t\tcase \"days\":\n\t\t\t\tlet days = function days(){ return self._days; };\n\t\t\t\texpose(days, []);\n\t\t\t\treturn days;\n\t\t\tcase \"seconds\":\n\t\t\t\tlet seconds = function seconds(){ return self._seconds; };\n\t\t\t\texpose(seconds, []);\n\t\t\t\treturn seconds;\n\t\t\tcase \"microseconds\":\n\t\t\t\tlet microseconds = function microseconds(){ return self._microseconds; };\n\t\t\t\texpose(microseconds, []);\n\t\t\t\treturn microseconds;\n\t\t\tdefault:\n\t\t\t\tthrow new AttributeError(this, attrname);\n\t\t}\n\t}\n\n\tdays()\n\t{\n\t\treturn this._days;\n\t}\n\n\tseconds()\n\t{\n\t\treturn this._seconds;\n\t}\n\n\tmicroseconds()\n\t{\n\t\treturn this._microseconds;\n\t}\n\n\tul4type()\n\t{\n\t\treturn \"timedelta\";\n\t}\n};\n\n\nexport class MonthDelta extends Proto\n{\n\tconstructor(months=0)\n\t{\n\t\tsuper();\n\t\tthis._months = months;\n\t}\n\n\t__repr__()\n\t{\n\t\tif (!this._months)\n\t\t\treturn \"monthdelta()\";\n\t\treturn \"monthdelta(\" + this._months + \")\";\n\t}\n\n\t__str__()\n\t{\n\t\tif (this._months)\n\t\t{\n\t\t\tif (this._months !== -1 && this._months !== 1)\n\t\t\t\treturn this._months + \" months\";\n\t\t\treturn this._months + \" month\";\n\t\t}\n\t\treturn \"0 months\";\n\t}\n\n\ttoString()\n\t{\n\t\treturn this.__str__();\n\t}\n\n\t__bool__()\n\t{\n\t\treturn this._months !== 0;\n\t}\n\n\t__abs__()\n\t{\n\t\treturn this._months < 0 ? new MonthDelta(-this._months) : this;\n\t}\n\n\t__eq__(other)\n\t{\n\t\tif (other instanceof MonthDelta)\n\t\t\treturn this._months === other._months;\n\t\treturn false;\n\t}\n\n\t__lt__(other)\n\t{\n\t\tif (other instanceof MonthDelta)\n\t\t\treturn this._months < other._months;\n\t\t_unorderable(\"<\", this, other);\n\t}\n\n\t__le__(other)\n\t{\n\t\tif (other instanceof MonthDelta)\n\t\t\treturn this._months <= other._months;\n\t\t_unorderable(\"<=\", this, other);\n\t}\n\n\t__gt__(other)\n\t{\n\t\tif (other instanceof MonthDelta)\n\t\t\treturn this._months > other._months;\n\t\t_unorderable(\">\", this, other);\n\t}\n\n\t__ge__(other)\n\t{\n\t\tif (other instanceof MonthDelta)\n\t\t\treturn this._months >= other._months;\n\t\t_unorderable(\">=\", this, other);\n\t}\n\n\t__neg__()\n\t{\n\t\treturn new MonthDelta(-this._months);\n\t}\n\n\t_adddate(date, months)\n\t{\n\t\tlet result = this._adddatetime(date._date, months);\n\t\treturn new Date_(result.getFullYear(), result.getMonth()+1, result.getDate());\n\t}\n\n\t_adddatetime(date, months)\n\t{\n\t\tlet year = date.getFullYear();\n\t\tlet month = date.getMonth() + months;\n\t\tlet day = date.getDate();\n\t\tlet hour = date.getHours();\n\t\tlet minute = date.getMinutes();\n\t\tlet second = date.getSeconds();\n\t\tlet millisecond = date.getMilliseconds();\n\n\t\twhile (true)\n\t\t{\n\t\t\t// As the month might be out of bounds, we have to find out what the real target month is\n\t\t\tlet targetmonth = new Date(year, month, 1, hour, minute, second, millisecond).getMonth();\n\t\t\tlet result = new Date(year, month, day, hour, minute, second, millisecond);\n\t\t\tif (result.getMonth() === targetmonth)\n\t\t\t\treturn result;\n\t\t\t--day;\n\t\t}\n\t}\n\n\t__add__(other)\n\t{\n\t\tif (_ismonthdelta(other))\n\t\t\treturn new MonthDelta(this._months + other._months);\n\t\telse if (_isdate(other))\n\t\t\treturn this._adddate(other, this._months);\n\t\telse if (_isdatetime(other))\n\t\t\treturn this._adddatetime(other, this._months);\n\t\tthrow new ArgumentError(_type(this) + \" + \" + _type(other) + \" not supported\");\n\t}\n\n\t__radd__(other)\n\t{\n\t\tif (_isdate(other))\n\t\t\treturn this._adddate(other, this._months);\n\t\telse if (_isdatetime(other))\n\t\t\treturn this._adddatetime(other, this._months);\n\t\tthrow new ArgumentError(_type(this) + \" + \" + _type(other) + \" not supported\");\n\t}\n\n\t__sub__(other)\n\t{\n\t\tif (_ismonthdelta(other))\n\t\t\treturn new MonthDelta(this._months - other._months);\n\t\tthrow new ArgumentError(_type(this) + \" - \" + _type(other) + \" not supported\");\n\t}\n\n\t__rsub__(other)\n\t{\n\t\tif (_isdate(other))\n\t\t\treturn this._adddate(other, -this._months);\n\t\telse if (_isdatetime(other))\n\t\t\treturn this._adddatetime(other, -this._months);\n\t\tthrow new ArgumentError(_type(this) + \" - \" + _type(other) + \" not supported\");\n\t}\n\n\t__mul__(other)\n\t{\n\t\tif (typeof(other) === \"number\" || typeof(other) === \"boolean\")\n\t\t\treturn new MonthDelta(this._months * Math.floor(other));\n\t\tthrow new ArgumentError(_type(this) + \" * \" + _type(other) + \" not supported\");\n\t}\n\n\t__rmul__(other)\n\t{\n\t\tif (typeof(other) === \"number\" || typeof(other) === \"boolean\")\n\t\t\treturn new MonthDelta(this._months * Math.floor(other));\n\t\tthrow new ArgumentError(_type(this) + \" * \" + _type(other) + \" not supported\");\n\t}\n\n\t__truediv__(other)\n\t{\n\t\tif (_ismonthdelta(other))\n\t\t\treturn this._months / other._months;\n\t\tthrow new ArgumentError(_type(this) + \" / \" + _type(other) + \" not supported\");\n\t}\n\n\t__floordiv__(other)\n\t{\n\t\tif (typeof(other) === \"number\" || typeof(other) === \"boolean\")\n\t\t{\n\t\t\tif (other == 0)\n\t\t\t\tthrow new ZeroDivisionError();\n\t\t\tif (_isint(other))\n\t\t\t\treturn new MonthDelta(Math.floor(this._months / other));\n\t\t}\n\t\telse if (_ismonthdelta(other))\n\t\t{\n\t\t\tif (other._months == 0)\n\t\t\t\tthrow new ZeroDivisionError();\n\t\t\treturn Math.floor(this._months / other._months);\n\t\t}\n\t\tthrow new ArgumentError(_type(this) + \" // \" + _type(other) + \" not supported\");\n\t}\n\n\t__getattr__(attrname)\n\t{\n\t\tlet self = this;\n\t\tswitch (attrname)\n\t\t{\n\t\t\tcase \"months\":\n\t\t\t\tlet months = function months(){ return self._months; };\n\t\t\t\texpose(months, []);\n\t\t\t\treturn months;\n\t\t\tdefault:\n\t\t\t\tthrow new AttributeError(this, attrname);\n\t\t}\n\t}\n\n\tmonths()\n\t{\n\t\treturn this._months;\n\t}\n\n\tul4type()\n\t{\n\t\treturn \"monthdelta\";\n\t}\n};\n\nconst constructors = [\n\t[TextAST, \"text\"],\n\t[IndentAST, \"indent\"],\n\t[LineEndAST, \"lineend\"],\n\t[ConstAST, \"const\"],\n\t[SeqItemAST, \"seqitem\"],\n\t[UnpackSeqItemAST, \"unpackseqitem\"],\n\t[DictItemAST, \"dictitem\"],\n\t[UnpackDictItemAST, \"unpackdictitem\"],\n\t[PosArgAST, \"posarg\"],\n\t[KeywordArgAST, \"keywordarg\"],\n\t[UnpackListArgAST, \"unpacklistarg\"],\n\t[UnpackDictArgAST, \"unpackdictarg\"],\n\t[ListAST, \"list\"],\n\t[ListCompAST, \"listcomp\"],\n\t[DictAST, \"dict\"],\n\t[DictCompAST, \"dictcomp\"],\n\t[SetAST, \"set\"],\n\t[SetCompAST, \"setcomp\"],\n\t[GenExprAST, \"genexpr\"],\n\t[VarAST, \"var\"],\n\t[NotAST, \"not\"],\n\t[NegAST, \"neg\"],\n\t[BitNotAST, \"bitnot\"],\n\t[IfAST, \"if\"],\n\t[ReturnAST, \"return\"],\n\t[PrintAST, \"print\"],\n\t[PrintXAST, \"printx\"],\n\t[ItemAST, \"item\"],\n\t[IsAST, \"is\"],\n\t[IsNotAST, \"isnot\"],\n\t[EQAST, \"eq\"],\n\t[NEAST, \"ne\"],\n\t[LTAST, \"lt\"],\n\t[LEAST, \"le\"],\n\t[GTAST, \"gt\"],\n\t[GEAST, \"ge\"],\n\t[NotContainsAST, \"notcontains\"],\n\t[ContainsAST, \"contains\"],\n\t[AddAST, \"add\"],\n\t[SubAST, \"sub\"],\n\t[MulAST, \"mul\"],\n\t[FloorDivAST, \"floordiv\"],\n\t[TrueDivAST, \"truediv\"],\n\t[ModAST, \"mod\"],\n\t[ShiftLeftAST, \"shiftleft\"],\n\t[ShiftRightAST, \"shiftright\"],\n\t[BitAndAST, \"bitand\"],\n\t[BitXOrAST, \"bitxor\"],\n\t[BitOrAST, \"bitor\"],\n\t[AndAST, \"and\"],\n\t[OrAST, \"or\"],\n\t[SliceAST, \"slice\"],\n\t[AttrAST, \"attr\"],\n\t[CallAST, \"call\"],\n\t[RenderAST, \"render\"],\n\t[RenderXAST, \"renderx\"],\n\t[RenderBlockAST, \"renderblock\"],\n\t[RenderBlocksAST, \"renderblocks\"],\n\t[SetVarAST, \"setvar\"],\n\t[AddVarAST, \"addvar\"],\n\t[SubVarAST, \"subvar\"],\n\t[MulVarAST, \"mulvar\"],\n\t[TrueDivVarAST, \"truedivvar\"],\n\t[FloorDivVarAST, \"floordivvar\"],\n\t[ModVarAST, \"modvar\"],\n\t[ShiftLeftVarAST, \"shiftleftvar\"],\n\t[ShiftRightVarAST, \"shiftrightvar\"],\n\t[BitAndVarAST, \"bitandvar\"],\n\t[BitXOrVarAST, \"bitxorvar\"],\n\t[BitOrVarAST, \"bitorvar\"],\n\t[ForBlockAST, \"forblock\"],\n\t[WhileBlockAST, \"whileblock\"],\n\t[BreakAST, \"break\"],\n\t[ContinueAST, \"continue\"],\n\t[CondBlockAST, \"condblock\"],\n\t[IfBlockAST, \"ifblock\"],\n\t[ElIfBlockAST, \"elifblock\"],\n\t[ElseBlockAST, \"elseblock\"],\n\t[SignatureAST, \"signature\"],\n\t[Template, \"template\"],\n];\n\nfor (let [constructor, name] of constructors)\n{\n\tconstructor.prototype.type = name;\n\tregister(\"de.livinglogic.ul4.\" + name, constructor);\n}\n\n// Report an exception `exc` originating from an UL4 on the browser console.\nexport function report_exc(exc)\n{\n\tlet original_exc = exc;\n\tif (console && console.error)\n\t{\n\t\tlet errors = [];\n\t\tfor (;;) \n\t\t{\n\t\t\terrors.unshift(exc);\n\t\t\tif (exc.context !== undefined && exc.context !== null)\n\t\t\t\texc = exc.context;\n\t\t\telse\n\t\t\t\tbreak;\n\t\t}\n\n\t\tlet texts = [];\n\t\tlet args = [];\n\n\t\tfunction text(s)\n\t\t{\n\t\t\ttexts.push(s);\n\t\t}\n\n\t\tfunction css(text, style)\n\t\t{\n\t\t\ttexts.push(\"%c\");\n\t\t\targs.push(style);\n\t\t\ttexts.push(text);\n\t\t\ttexts.push(\"%c\");\n\t\t\targs.push(\"\");\n\t\t}\n\n\t\tfunction em(s)\n\t\t{\n\t\t\tcss(s, \"font-weight: bold\");\n\t\t}\n\n\t\tfunction focus(s)\n\t\t{\n\t\t\tcss(s, \"border-bottom: 2px solid #b22\");\n\t\t}\n\n\t\tfor (let exc of errors)\n\t\t{\n\t\t\tif (texts.length)\n\t\t\t\ttext(\"\\n\\n\");\n\n\t\t\tif (exc instanceof ul4.LocationError)\n\t\t\t{\n\t\t\t\tlet template = exc.location.template;\n\t\t\t\tif (template.parenttemplate !== null)\n\t\t\t\t\ttext(\"in local template \");\n\t\t\t\telse\n\t\t\t\t\ttext(\"in template \");\n\t\t\t\tlet first = true;\n\t\t\t\twhile (template != null)\n\t\t\t\t{\n\t\t\t\t\tif (first)\n\t\t\t\t\t\tfirst = false;\n\t\t\t\t\telse\n\t\t\t\t\t\ttext(\" in \");\n\t\t\t\t\tem(template.name ? _repr(template.name) : \"(unnamed)\");\n\t\t\t\t\ttemplate = template.parenttemplate;\n\t\t\t\t}\n\t\t\t\ttext(\" offset \");\n\t\t\t\tem(exc.location.pos.start + \"\");\n\t\t\t\ttext(\":\");\n\t\t\t\tem(exc.location.pos.stop + \"\");\n\t\t\t\ttext(\"; line \");\n\t\t\t\tem(exc.location.startline + \"\");\n\t\t\t\ttext(\"; column \");\n\t\t\t\tem(exc.location.startcol + \"\");\n\t\t\t\ttext(\"\\n\");\n\t\t\t\ttext(exc.location.startsourceprefix);\n\t\t\t\tfocus(exc.location.startsource);\n\t\t\t\ttext(exc.location.startsourcesuffix);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tem(exc.constructor.name);\n\t\t\t\ttext(\": \");\n\t\t\t\ttext(exc.message);\n\t\t\t}\n\t\t}\n\t\tconsole.error(texts.join(\"\"), ...args);\n\t}\n};","/*\n * JavaScript MD5\n * https://github.com/blueimp/JavaScript-MD5\n *\n * Copyright 2011, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n *\n * Based on\n * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message\n * Digest Algorithm, as defined in RFC 1321.\n * Version 2.2 Copyright (C) Paul Johnston 1999 - 2009\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n * Distributed under the BSD License\n * See http://pajhome.org.uk/crypt/md5 for more info.\n */\n\n/* global define */\n\n/* eslint-disable strict */\n\n;(function ($) {\n  'use strict'\n\n  /**\n   * Add integers, wrapping at 2^32.\n   * This uses 16-bit operations internally to work around bugs in interpreters.\n   *\n   * @param {number} x First integer\n   * @param {number} y Second integer\n   * @returns {number} Sum\n   */\n  function safeAdd(x, y) {\n    var lsw = (x & 0xffff) + (y & 0xffff)\n    var msw = (x >> 16) + (y >> 16) + (lsw >> 16)\n    return (msw << 16) | (lsw & 0xffff)\n  }\n\n  /**\n   * Bitwise rotate a 32-bit number to the left.\n   *\n   * @param {number} num 32-bit number\n   * @param {number} cnt Rotation count\n   * @returns {number} Rotated number\n   */\n  function bitRotateLeft(num, cnt) {\n    return (num << cnt) | (num >>> (32 - cnt))\n  }\n\n  /**\n   * Basic operation the algorithm uses.\n   *\n   * @param {number} q q\n   * @param {number} a a\n   * @param {number} b b\n   * @param {number} x x\n   * @param {number} s s\n   * @param {number} t t\n   * @returns {number} Result\n   */\n  function md5cmn(q, a, b, x, s, t) {\n    return safeAdd(bitRotateLeft(safeAdd(safeAdd(a, q), safeAdd(x, t)), s), b)\n  }\n  /**\n   * Basic operation the algorithm uses.\n   *\n   * @param {number} a a\n   * @param {number} b b\n   * @param {number} c c\n   * @param {number} d d\n   * @param {number} x x\n   * @param {number} s s\n   * @param {number} t t\n   * @returns {number} Result\n   */\n  function md5ff(a, b, c, d, x, s, t) {\n    return md5cmn((b & c) | (~b & d), a, b, x, s, t)\n  }\n  /**\n   * Basic operation the algorithm uses.\n   *\n   * @param {number} a a\n   * @param {number} b b\n   * @param {number} c c\n   * @param {number} d d\n   * @param {number} x x\n   * @param {number} s s\n   * @param {number} t t\n   * @returns {number} Result\n   */\n  function md5gg(a, b, c, d, x, s, t) {\n    return md5cmn((b & d) | (c & ~d), a, b, x, s, t)\n  }\n  /**\n   * Basic operation the algorithm uses.\n   *\n   * @param {number} a a\n   * @param {number} b b\n   * @param {number} c c\n   * @param {number} d d\n   * @param {number} x x\n   * @param {number} s s\n   * @param {number} t t\n   * @returns {number} Result\n   */\n  function md5hh(a, b, c, d, x, s, t) {\n    return md5cmn(b ^ c ^ d, a, b, x, s, t)\n  }\n  /**\n   * Basic operation the algorithm uses.\n   *\n   * @param {number} a a\n   * @param {number} b b\n   * @param {number} c c\n   * @param {number} d d\n   * @param {number} x x\n   * @param {number} s s\n   * @param {number} t t\n   * @returns {number} Result\n   */\n  function md5ii(a, b, c, d, x, s, t) {\n    return md5cmn(c ^ (b | ~d), a, b, x, s, t)\n  }\n\n  /**\n   * Calculate the MD5 of an array of little-endian words, and a bit length.\n   *\n   * @param {Array} x Array of little-endian words\n   * @param {number} len Bit length\n   * @returns {Array<number>} MD5 Array\n   */\n  function binlMD5(x, len) {\n    /* append padding */\n    x[len >> 5] |= 0x80 << len % 32\n    x[(((len + 64) >>> 9) << 4) + 14] = len\n\n    var i\n    var olda\n    var oldb\n    var oldc\n    var oldd\n    var a = 1732584193\n    var b = -271733879\n    var c = -1732584194\n    var d = 271733878\n\n    for (i = 0; i < x.length; i += 16) {\n      olda = a\n      oldb = b\n      oldc = c\n      oldd = d\n\n      a = md5ff(a, b, c, d, x[i], 7, -680876936)\n      d = md5ff(d, a, b, c, x[i + 1], 12, -389564586)\n      c = md5ff(c, d, a, b, x[i + 2], 17, 606105819)\n      b = md5ff(b, c, d, a, x[i + 3], 22, -1044525330)\n      a = md5ff(a, b, c, d, x[i + 4], 7, -176418897)\n      d = md5ff(d, a, b, c, x[i + 5], 12, 1200080426)\n      c = md5ff(c, d, a, b, x[i + 6], 17, -1473231341)\n      b = md5ff(b, c, d, a, x[i + 7], 22, -45705983)\n      a = md5ff(a, b, c, d, x[i + 8], 7, 1770035416)\n      d = md5ff(d, a, b, c, x[i + 9], 12, -1958414417)\n      c = md5ff(c, d, a, b, x[i + 10], 17, -42063)\n      b = md5ff(b, c, d, a, x[i + 11], 22, -1990404162)\n      a = md5ff(a, b, c, d, x[i + 12], 7, 1804603682)\n      d = md5ff(d, a, b, c, x[i + 13], 12, -40341101)\n      c = md5ff(c, d, a, b, x[i + 14], 17, -1502002290)\n      b = md5ff(b, c, d, a, x[i + 15], 22, 1236535329)\n\n      a = md5gg(a, b, c, d, x[i + 1], 5, -165796510)\n      d = md5gg(d, a, b, c, x[i + 6], 9, -1069501632)\n      c = md5gg(c, d, a, b, x[i + 11], 14, 643717713)\n      b = md5gg(b, c, d, a, x[i], 20, -373897302)\n      a = md5gg(a, b, c, d, x[i + 5], 5, -701558691)\n      d = md5gg(d, a, b, c, x[i + 10], 9, 38016083)\n      c = md5gg(c, d, a, b, x[i + 15], 14, -660478335)\n      b = md5gg(b, c, d, a, x[i + 4], 20, -405537848)\n      a = md5gg(a, b, c, d, x[i + 9], 5, 568446438)\n      d = md5gg(d, a, b, c, x[i + 14], 9, -1019803690)\n      c = md5gg(c, d, a, b, x[i + 3], 14, -187363961)\n      b = md5gg(b, c, d, a, x[i + 8], 20, 1163531501)\n      a = md5gg(a, b, c, d, x[i + 13], 5, -1444681467)\n      d = md5gg(d, a, b, c, x[i + 2], 9, -51403784)\n      c = md5gg(c, d, a, b, x[i + 7], 14, 1735328473)\n      b = md5gg(b, c, d, a, x[i + 12], 20, -1926607734)\n\n      a = md5hh(a, b, c, d, x[i + 5], 4, -378558)\n      d = md5hh(d, a, b, c, x[i + 8], 11, -2022574463)\n      c = md5hh(c, d, a, b, x[i + 11], 16, 1839030562)\n      b = md5hh(b, c, d, a, x[i + 14], 23, -35309556)\n      a = md5hh(a, b, c, d, x[i + 1], 4, -1530992060)\n      d = md5hh(d, a, b, c, x[i + 4], 11, 1272893353)\n      c = md5hh(c, d, a, b, x[i + 7], 16, -155497632)\n      b = md5hh(b, c, d, a, x[i + 10], 23, -1094730640)\n      a = md5hh(a, b, c, d, x[i + 13], 4, 681279174)\n      d = md5hh(d, a, b, c, x[i], 11, -358537222)\n      c = md5hh(c, d, a, b, x[i + 3], 16, -722521979)\n      b = md5hh(b, c, d, a, x[i + 6], 23, 76029189)\n      a = md5hh(a, b, c, d, x[i + 9], 4, -640364487)\n      d = md5hh(d, a, b, c, x[i + 12], 11, -421815835)\n      c = md5hh(c, d, a, b, x[i + 15], 16, 530742520)\n      b = md5hh(b, c, d, a, x[i + 2], 23, -995338651)\n\n      a = md5ii(a, b, c, d, x[i], 6, -198630844)\n      d = md5ii(d, a, b, c, x[i + 7], 10, 1126891415)\n      c = md5ii(c, d, a, b, x[i + 14], 15, -1416354905)\n      b = md5ii(b, c, d, a, x[i + 5], 21, -57434055)\n      a = md5ii(a, b, c, d, x[i + 12], 6, 1700485571)\n      d = md5ii(d, a, b, c, x[i + 3], 10, -1894986606)\n      c = md5ii(c, d, a, b, x[i + 10], 15, -1051523)\n      b = md5ii(b, c, d, a, x[i + 1], 21, -2054922799)\n      a = md5ii(a, b, c, d, x[i + 8], 6, 1873313359)\n      d = md5ii(d, a, b, c, x[i + 15], 10, -30611744)\n      c = md5ii(c, d, a, b, x[i + 6], 15, -1560198380)\n      b = md5ii(b, c, d, a, x[i + 13], 21, 1309151649)\n      a = md5ii(a, b, c, d, x[i + 4], 6, -145523070)\n      d = md5ii(d, a, b, c, x[i + 11], 10, -1120210379)\n      c = md5ii(c, d, a, b, x[i + 2], 15, 718787259)\n      b = md5ii(b, c, d, a, x[i + 9], 21, -343485551)\n\n      a = safeAdd(a, olda)\n      b = safeAdd(b, oldb)\n      c = safeAdd(c, oldc)\n      d = safeAdd(d, oldd)\n    }\n    return [a, b, c, d]\n  }\n\n  /**\n   * Convert an array of little-endian words to a string\n   *\n   * @param {Array<number>} input MD5 Array\n   * @returns {string} MD5 string\n   */\n  function binl2rstr(input) {\n    var i\n    var output = ''\n    var length32 = input.length * 32\n    for (i = 0; i < length32; i += 8) {\n      output += String.fromCharCode((input[i >> 5] >>> i % 32) & 0xff)\n    }\n    return output\n  }\n\n  /**\n   * Convert a raw string to an array of little-endian words\n   * Characters >255 have their high-byte silently ignored.\n   *\n   * @param {string} input Raw input string\n   * @returns {Array<number>} Array of little-endian words\n   */\n  function rstr2binl(input) {\n    var i\n    var output = []\n    output[(input.length >> 2) - 1] = undefined\n    for (i = 0; i < output.length; i += 1) {\n      output[i] = 0\n    }\n    var length8 = input.length * 8\n    for (i = 0; i < length8; i += 8) {\n      output[i >> 5] |= (input.charCodeAt(i / 8) & 0xff) << i % 32\n    }\n    return output\n  }\n\n  /**\n   * Calculate the MD5 of a raw string\n   *\n   * @param {string} s Input string\n   * @returns {string} Raw MD5 string\n   */\n  function rstrMD5(s) {\n    return binl2rstr(binlMD5(rstr2binl(s), s.length * 8))\n  }\n\n  /**\n   * Calculates the HMAC-MD5 of a key and some data (raw strings)\n   *\n   * @param {string} key HMAC key\n   * @param {string} data Raw input string\n   * @returns {string} Raw MD5 string\n   */\n  function rstrHMACMD5(key, data) {\n    var i\n    var bkey = rstr2binl(key)\n    var ipad = []\n    var opad = []\n    var hash\n    ipad[15] = opad[15] = undefined\n    if (bkey.length > 16) {\n      bkey = binlMD5(bkey, key.length * 8)\n    }\n    for (i = 0; i < 16; i += 1) {\n      ipad[i] = bkey[i] ^ 0x36363636\n      opad[i] = bkey[i] ^ 0x5c5c5c5c\n    }\n    hash = binlMD5(ipad.concat(rstr2binl(data)), 512 + data.length * 8)\n    return binl2rstr(binlMD5(opad.concat(hash), 512 + 128))\n  }\n\n  /**\n   * Convert a raw string to a hex string\n   *\n   * @param {string} input Raw input string\n   * @returns {string} Hex encoded string\n   */\n  function rstr2hex(input) {\n    var hexTab = '0123456789abcdef'\n    var output = ''\n    var x\n    var i\n    for (i = 0; i < input.length; i += 1) {\n      x = input.charCodeAt(i)\n      output += hexTab.charAt((x >>> 4) & 0x0f) + hexTab.charAt(x & 0x0f)\n    }\n    return output\n  }\n\n  /**\n   * Encode a string as UTF-8\n   *\n   * @param {string} input Input string\n   * @returns {string} UTF8 string\n   */\n  function str2rstrUTF8(input) {\n    return unescape(encodeURIComponent(input))\n  }\n\n  /**\n   * Encodes input string as raw MD5 string\n   *\n   * @param {string} s Input string\n   * @returns {string} Raw MD5 string\n   */\n  function rawMD5(s) {\n    return rstrMD5(str2rstrUTF8(s))\n  }\n  /**\n   * Encodes input string as Hex encoded string\n   *\n   * @param {string} s Input string\n   * @returns {string} Hex encoded string\n   */\n  function hexMD5(s) {\n    return rstr2hex(rawMD5(s))\n  }\n  /**\n   * Calculates the raw HMAC-MD5 for the given key and data\n   *\n   * @param {string} k HMAC key\n   * @param {string} d Input string\n   * @returns {string} Raw MD5 string\n   */\n  function rawHMACMD5(k, d) {\n    return rstrHMACMD5(str2rstrUTF8(k), str2rstrUTF8(d))\n  }\n  /**\n   * Calculates the Hex encoded HMAC-MD5 for the given key and data\n   *\n   * @param {string} k HMAC key\n   * @param {string} d Input string\n   * @returns {string} Raw MD5 string\n   */\n  function hexHMACMD5(k, d) {\n    return rstr2hex(rawHMACMD5(k, d))\n  }\n\n  /**\n   * Calculates MD5 value for a given string.\n   * If a key is provided, calculates the HMAC-MD5 value.\n   * Returns a Hex encoded string unless the raw argument is given.\n   *\n   * @param {string} string Input string\n   * @param {string} [key] HMAC key\n   * @param {boolean} [raw] Raw output switch\n   * @returns {string} MD5 output\n   */\n  function md5(string, key, raw) {\n    if (!key) {\n      if (!raw) {\n        return hexMD5(string)\n      }\n      return rawMD5(string)\n    }\n    if (!raw) {\n      return hexHMACMD5(key, string)\n    }\n    return rawHMACMD5(key, string)\n  }\n\n  if (typeof define === 'function' && define.amd) {\n    define(function () {\n      return md5\n    })\n  } else if (typeof module === 'object' && module.exports) {\n    module.exports = md5\n  } else {\n    $.md5 = md5\n  }\n})(this)\n"],"names":["_makemap","_setmap","_emptymap","_getmap","_emptyset","$","safeAdd","x","y","lsw","md5cmn","q","a","b","s","t","bitRotateLeft","num","cnt","md5ff","c","d","md5gg","md5hh","md5ii","binlMD5","len","i","olda","oldb","oldc","oldd","length","binl2rstr","input","output","length32","String","fromCharCode","rstr2binl","undefined","length8","charCodeAt","rstr2hex","charAt","str2rstrUTF8","unescape","encodeURIComponent","rawMD5","rstrMD5","rawHMACMD5","k","rstrHMACMD5","key","data","hash","bkey","ipad","opad","concat","md5","string","raw","hexHMACMD5","hexMD5","module","exports","this","api_version","_registry","_havemap","Map","prototype","forEach","_haveset","size","error","Set","map","items","value","set","__proto__","get","_Set","_makeset","item","add","register","name","f","ul4onname","dumps","obj","indent","Encoder","dump","join","loads","registry","Decoder","_level","_strings2index","_ids2index","_backrefs","line","push","args","oldindent","arg","_line","type","Math","round","index","_str_repr","replace","_iscolor","r","g","_isdate","year","month","day","_isdatetime","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getMilliseconds","_istimedelta","days","seconds","microseconds","_ismonthdelta","months","slice","start","stop","ul4ondump","__id__","ul4onid","_islist","_ismap","_isdict","_isset","ValueError","_repr","attrname","bind","expose","ul4","AttributeError","pos","backrefs","persistent_objects","stack","re_white","match","result","substring","re_digits","readcharoreof","parseFloat","isNaN","oldpos","escapechar","chars","read","codepoint","parseInt","load","typecode","readblackchar","readnumber","readchar","delimiter","c2","_readescape","Color","_r","_g","_b","_a","Date_","Date","setFullYear","setDate","setMonth","setHours","setMinutes","setSeconds","setMilliseconds","TimeDelta","_days","_seconds","_microseconds","MonthDelta","_months","backup","pop","_beginfakeloading","constructor","_endfakeloading","ul4onload","id","self","next","done","_rvalidchars","_rvalidescape","_rvalidtokens","_rvalidbraces","_map2object","newobj","TypeError","_bound","upper","_stacktrace","exc","Exception","toString","context","_internal_call","functioncontext","signature","needscontext","needsobject","kwargs","finalargs","ArgumentError","bindObject","bindArray","unshift","apply","_callfunction","_ul4_name","_ul4_signature","_ul4_needsobject","_ul4_needscontext","_callobject","_ul4_callsignature","_ul4_callneedsobject","_ul4_callneedscontext","__call__","_callrender","_ul4_rendersignature","_ul4_renderneedsobject","_ul4_renderneedscontext","__render__","_call","_type","_unpackvar","lvalue","newvalue","iter","_iter","_formatsource","out","finalout","level","needlf","part","j","_sourceprefix","source","outerstartpos","innerstartpos","maxprefix","preprefix","_sourcesuffix","outerstoppos","innerstoppos","maxsuffix","postsuffix","_lineColFromPos","col","_eq","obj1","obj2","numbertypes","__eq__","indexOf","getTime","_isobject","hasOwnProperty","has","_ne","__ne__","_unorderable","operator","_cmp","v1","v2","res","_isul4set","in1only","in2only","_lt","__lt__","_le","__le__","_gt","__gt__","_ge","__ge__","_isiter","__iter__","keys","values","str","ascii","squote","dquote","quote","code","escape","test","_lpad","_map_repr","v","_repr_internal","_list_repr","first","_set_repr","_object_repr","_date_repr","_date","_datetime_repr","hour","minute","second","ms","_typeof","__repr__","_ascii","_str","_date_str","_datetime_str","__str__","_bool","__bool__","_int","base","_isint","floor","_float","_list","_set","_len","sequence","ul4type","Protocol","_mod","div","mod","_getattr","default_","proto","getattr","_hasattr","hasattr","_dir","dir","_any","iterable","_all","_isundefined","_isdefined","_isnone","_isbool","_isfloat","_isstr","Object","call","_istemplate","Template","TemplateClosure","_isfunction","_isexception","_isanyset","__type__","Proto","_str_repeat","rep","_list_repeat","list","_asjson","_str_json","_fromjson","StrProtocol","strip","JSON","parse","Function","_asul4on","_fromul4on","_format_datetime","fmt","lang","translation","de","ml","ws","wl","xf","Xf","cf","en","fr","es","it","da","sv","nl","pt","cs","sk","pl","hr","sr","ro","hu","tr","ru","zh","ko","ja","inspec","getDay","_format","DateTimeProtocol","yearday","_week4format","_format_int","work","fill","align","sign","alternate","minimumwidth","minimumwidthStr","exec","neg","toUpperCase","pad","padBefore","padAfter","translations","toLowerCase","split","_rpad","_nextid","other","Signature","paramsByPos","paramsByName","countpos","countposdef","countposkw","countposkwdef","countkw","countkwdef","varpos","varkw","state","params","endsWith","defaultValue","param","ParameterError","count","Array","haveValues","count_nodef","count_def","entries","argname","argvalue","argObject","buffer","lasttype","sep","includes","_appendParam","options","_extend","baseobj","attrs","assign","create","ListProtocol","DateProtocol","SetProtocol","MapProtocol","ObjectProtocol","__getattr__","attr","realattr","object","sub","_count","find","_find","rfind","_rfind","old","new_","substr","lstrip","rstrip","maxsplit","splice","rsplit","lastIndexOf","splitlines","startpos","keepends","lookingAtLineEnd","lineendlen","endpos","lower","capitalize","resultlist","startswith","prefix","singlepre","endswith","suffix","singlesuf","append","insert","update","others","_update","clear","KeyError","weekday","calendar","firstweekday","mindaysinfirstweek","week","date","mimeformat","isoformat","offset","refDate","weekDayDiff","weekStartYear","weekStartMonth","weekStartDay","weekStart","diff","SubAST","_do","microsecond","leap","_isleap","realresult","Context","vars","globals","builtins","indents","escapes","_output","message","fileName","lineNumber","instance","Error","setPrototypeOf","getPrototypeOf","__proto","enumerable","writable","configurable","InternalException","ReturnException","BreakException","ContinueException","SyntaxError","LValueRequiredError","NotSubscriptableError","ZeroDivisionError","IndexError","NotImplementedError","LocationError","location","template","parenttemplate","templateprefix","_templateprefix","startsourceprefix","startsource","startsourcesuffix","text","underline","startline","startcol","AST","stoppos","_startline","_startcol","_stopline","_stopcol","_ul4onattrs","_eval","_decorate_exception","_eval_set","_eval_modify","encoder","decoder","_source","of","TextAST","IndentAST","_text","LineEndAST","CodeAST","ConstAST","ItemArgBase","_eval_list","_eval_dict","_eval_call","SeqItemAST","_handle_eval","UnpackSeqItemAST","DictItemAST","UnpackDictItemAST","subitem","PosArgAST","KeywordArgAST","UnpackListArgAST","UnpackDictArgAST","ListAST","_handle_eval_list","ListCompAST","varname","container","condition","localcontext","inheritvars","_handle_eval_set","SetAST","SetCompAST","DictAST","_handle_eval_dict","DictCompAST","GenExprAST","VarAST","_get","_modify","_ido","UnaryAST","NegAST","__neg__","BitNotAST","NotAST","IfAST","objif","objcond","objelse","ReturnAST","PrintAST","PrintXAST","_xmlescape","BinaryAST","ItemAST","orgkey","__getitem__","__setitem__","IsAST","IsNotAST","EQAST","NEAST","LTAST","LEAST","GTAST","GEAST","ContainsAST","__contains__","NotContainsAST","AddAST","__add__","__radd__","__sub__","__rsub__","_date_sub","_datetime_sub","swap","year1","yearday1","year2","yearday2","diffdays","hours1","minutes1","seconds1","hours2","minutes2","diffseconds","diffmilliseconds","MulAST","__mul__","__rmul__","targetsize","FloorDivAST","__floordiv__","__rfloordiv__","TrueDivAST","__truediv__","__rtruediv__","ModAST","ShiftLeftAST","ShiftRightAST","BitAndAST","BitXOrAST","BitOrAST","AndAST","OrAST","AttrAST","__setattr__","oldvalue","CallAST","_handle_eval_call","_makeargs","RenderAST","_reprname","tag","withindent","_handle_additional_arguments","RenderXAST","RenderBlockAST","closure","content","RenderBlocksAST","BlockAST","SliceAST","index1","index2","SetVarAST","ModifyVarAST","_handle_eval_modify","_operator","AddVarAST","SubVarAST","MulVarAST","TrueDivVarAST","FloorDivVarAST","ModVarAST","ShiftLeftVarAST","ShiftRightVarAST","BitAndVarAST","BitXOrVarAST","BitOrVarAST","ForBlockAST","truel","subname","_str_varname","WhileBlockAST","BreakAST","ContinueAST","CondBlockAST","block","_execute","ConditionalBlockAST","_strname","IfBlockAST","ElIfBlockAST","ElseBlockAST","whitespace","startdelim","enddelim","docpos","_asts","doc","render","_renderbound","renders","_rendersbound","SignatureAST","loaded_api_version","replacevars","replaceoutput","getoutput","_callbound","endtag","_rgb","_csv","_chr","_ord","_hex","number","_oct","_bin","_min","minvalue","testvalue","_max","_sum","_first","_last","_sorted","reverse","cmp","sort","keyvalue","s1","s2","_range","higher","step","abs","_slice","_urlquote","_urlunquote","decodeURIComponent","_reversed","_random","random","_randrange","n","width","_randchoice","iscolor","_round","digits","threshold","pow","_floor","_ceil","ceil","_md5","_scrypt","salt","_enumerate","_isfirst","isfirst","_islast","lastitem","_isfirstlast","_enumfl","_zip","iterables","iters","_abs","__abs__","_datetime","_timedelta","_monthdelta","_hls","h","l","m1","m2","_v","hue","_hsv","p","defaultvalue","now","utcnow","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCMilliseconds","today","Module","__name__","__doc__","_ul4on_loads","_ul4on_dumps","_ul4on_encoder","_ul4on_decoder","_ul4on","isclose","rel_tol","abs_tol","Infinity","cos","sin","tan","sqrt","_math","pi","PI","e","E","tau","_attrgetter","attrnames","getone","dottedname","dottedattrname","attrgetter","_ul4","repr","bool","format","any","all","zip","isundefined","isdefined","isnone","isbool","isint","isfloat","isstr","isdate","isdatetime","istimedelta","ismonthdelta","istemplate","isfunction","islist","isset","isdict","isexception","asjson","fromjson","asul4on","fromul4on","enumerate","islast","isfirstlast","enumfl","datetime","timedelta","monthdelta","rgb","hls","hsv","xmlescape","csv","chr","ord","hex","oct","bin","min","max","sum","last","sorted","range","urlquote","urlunquote","reversed","randrange","randchoice","scrypt","ul4on","math","end","lastIndex","jan1weekday","lum","hlsa","hsva","witha","withlum","abslum","rellum","rc","gc","bc","maxc","minc","total_microseconds","total_seconds","minutes","hours","millisecond","_adddate","_adddatetime","myValue","otherValue","hasSeconds","hasMicroseconds","targetmonth","report_exc","console","texts","css","style","em","focus","errors"],"mappings":"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"}