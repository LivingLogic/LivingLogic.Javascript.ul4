var _get2=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined;}else{return get(parent,property,receiver);}}else if("value"in desc){return desc.value;}else{var getter=desc.get;if(getter===undefined){return undefined;}return getter.call(receiver);}};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break;}}catch(err){_d=true;_e=err;}finally{try{if(!_n&&_i["return"])_i["return"]();}finally{if(_d)throw _e;}}return _arr;}return function(arr,i){if(Array.isArray(arr)){return arr;}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i);}else{throw new TypeError("Invalid attempt to destructure non-iterable instance");}};}();function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else{return Array.from(arr);}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}};(function(){var root=this,ul4={};var isamd=typeof define==="function"&&define.amd;var iscommon=typeof module==="object"&&module.exports;if(isamd){define(['blueimp-md5'],function(md5F){window.md5=md5F;return ul4;});}else if(iscommon){module.exports.ul4=ul4;}else{root.ul4=ul4;}ul4.version="46";ul4._registry={};ul4._havemap=typeof Map==="function"&&typeof Map.prototype.forEach==="function";ul4._havemapconstructor=function(){if(ul4._havemap){try{if(new Map([[1,2]]).size==1)return true;}catch(error){}}return false;}();ul4._haveset=typeof Set==="function"&&typeof Set.prototype.forEach==="function";ul4._havesetconstructor=function(){if(ul4._haveset){try{if(new Set([1,2]).size==2)return true;}catch(error){}return false;}else return false;}();if(ul4._havemap){ul4._makemap=function _makemap(){var map=new Map();for(var _len2=arguments.length,items=Array(_len2),_key=0;_key<_len2;_key++){items[_key]=arguments[_key];}var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=items[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var _step$value=_slicedToArray(_step.value,2),key=_step$value[0],value=_step$value[1];map.set(key,value);}}catch(err){_didIteratorError=true;_iteratorError=err;}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return();}}finally{if(_didIteratorError){throw _iteratorError;}}}return map;};ul4._setmap=function _setmap(map,key,value){if(map.__proto__===Map.prototype)map.set(key,value);else map[key]=value;};ul4._emptymap=function _emptymap(){return new Map();};ul4._getmap=function _getmap(map,key,value){if(map.__proto__===Map.prototype)return map.get(key);else return map[key];};}else{ul4._makemap=function _makemap(){var map={};for(var _len3=arguments.length,items=Array(_len3),_key2=0;_key2<_len3;_key2++){items[_key2]=arguments[_key2];}var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=items[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var _step2$value=_slicedToArray(_step2.value,2),key=_step2$value[0],value=_step2$value[1];map[key]=value;}}catch(err){_didIteratorError2=true;_iteratorError2=err;}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return){_iterator2.return();}}finally{if(_didIteratorError2){throw _iteratorError2;}}}return map;};ul4._setmap=function _setmap(map,key,value){map[key]=value;};ul4._emptymap=function _emptymap(){return{};};ul4._getmap=function _getmap(map,key,value){return map[key];};}if(ul4._haveset){ul4._emptyset=function _emptyset(){return new Set();};}else{ul4._emptyset=function _emptyset(){return new ul4._Set();};}ul4._makeset=function _makeset(){var set=ul4._emptyset();for(var _len4=arguments.length,items=Array(_len4),_key3=0;_key3<_len4;_key3++){items[_key3]=arguments[_key3];}var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{for(var _iterator3=items[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){var item=_step3.value;set.add(item);}}catch(err){_didIteratorError3=true;_iteratorError3=err;}finally{try{if(!_iteratorNormalCompletion3&&_iterator3.return){_iterator3.return();}}finally{if(_didIteratorError3){throw _iteratorError3;}}}return set;};ul4.register=function register(name,f){f.prototype.ul4onname=name;ul4._registry[name]=f;};ul4.dumps=function dumps(obj,indent){var encoder=new ul4.Encoder(indent);encoder.dump(obj);return encoder.finish();};ul4.loads=function loads(data,registry){var decoder=new ul4.Decoder(data,registry);return decoder.load();};ul4.Encoder=function(){function Encoder(){var indent=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;_classCallCheck(this,Encoder);this.indent=indent;this.data=[];this._level=0;this._strings2index={};this._ids2index={};this._backrefs=0;}_createClass(Encoder,[{key:"_line",value:function _line(line){if(this.indent!==null){for(var i=0;i<this._level;++i){this.data.push(this.indent);}}else{if(this.data.length)this.data.push(" ");}this.data.push(line);for(var _len5=arguments.length,args=Array(_len5>1?_len5-1:0),_key4=1;_key4<_len5;_key4++){args[_key4-1]=arguments[_key4];}if(args.length){var oldindent=this.indent;this.indent=null;var _iteratorNormalCompletion4=true;var _didIteratorError4=false;var _iteratorError4=undefined;try{for(var _iterator4=args[Symbol.iterator](),_step4;!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=true){var arg=_step4.value;this.dump(arg);}}catch(err){_didIteratorError4=true;_iteratorError4=err;}finally{try{if(!_iteratorNormalCompletion4&&_iterator4.return){_iterator4.return();}}finally{if(_didIteratorError4){throw _iteratorError4;}}}this.indent=oldindent;}if(this.indent!==null)this.data.push("\n");}},{key:"finish",value:function finish(){return this.data.join("");}},{key:"dump",value:function dump(obj){if(obj===null)this._line("n");else if(typeof obj=="boolean")this._line(obj?"bT":"bF");else if(typeof obj=="number"){var type=Math.round(obj)==obj?"i":"f";this._line(type+obj);}else if(typeof obj=="string"){var index=this._strings2index[obj];if(typeof index!=="undefined"){this._line("^"+index);}else{this._strings2index[obj]=this._backrefs++;var dump=ul4._str_repr(obj).replace("<","\\x3c");this._line("S"+dump);}}else if(ul4._iscolor(obj))this._line("c",obj.r(),obj.g(),obj.b(),obj.a());else if(ul4._isdate(obj))this._line("x",obj.year(),obj.month(),obj.day());else if(ul4._isdatetime(obj))this._line("z",obj.getFullYear(),obj.getMonth()+1,obj.getDate(),obj.getHours(),obj.getMinutes(),obj.getSeconds(),obj.getMilliseconds()*1000);else if(ul4._istimedelta(obj))this._line("t",obj.days(),obj.seconds(),obj.microseconds());else if(ul4._ismonthdelta(obj))this._line("m",obj.months());else if(obj instanceof ul4.slice)this._line("r",obj.start,obj.stop);else if(obj.ul4onname&&obj.ul4ondump){if(obj.__id__){var _index=this._ids2index[obj.__id__];if(typeof _index!="undefined"){this._line("^"+_index);return;}this._ids2index[obj.__id__]=this._backrefs++;}this._line("O",obj.ul4onname);++this._level;obj.ul4ondump(this);--this._level;this._line(")");}else if(ul4._islist(obj)){this._line("l");++this._level;var _iteratorNormalCompletion5=true;var _didIteratorError5=false;var _iteratorError5=undefined;try{for(var _iterator5=obj[Symbol.iterator](),_step5;!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=true){var item=_step5.value;this.dump(item);}}catch(err){_didIteratorError5=true;_iteratorError5=err;}finally{try{if(!_iteratorNormalCompletion5&&_iterator5.return){_iterator5.return();}}finally{if(_didIteratorError5){throw _iteratorError5;}}}--this._level;this._line("]");}else if(ul4._ismap(obj)){this._line("e");++this._level;var _iteratorNormalCompletion6=true;var _didIteratorError6=false;var _iteratorError6=undefined;try{for(var _iterator6=obj.entries()[Symbol.iterator](),_step6;!(_iteratorNormalCompletion6=(_step6=_iterator6.next()).done);_iteratorNormalCompletion6=true){var _step6$value=_slicedToArray(_step6.value,2),key=_step6$value[0],value=_step6$value[1];this.dump(key);this.dump(value);}}catch(err){_didIteratorError6=true;_iteratorError6=err;}finally{try{if(!_iteratorNormalCompletion6&&_iterator6.return){_iterator6.return();}}finally{if(_didIteratorError6){throw _iteratorError6;}}}--this._level;this._line("}");}else if(ul4._isdict(obj)){this._line("d");++this._level;for(var _key5 in obj){this.dump(_key5);this.dump(obj[_key5]);}--this._level;this._line("}");}else if(ul4._isset(obj)){this._line("y");++this._level;var _iteratorNormalCompletion7=true;var _didIteratorError7=false;var _iteratorError7=undefined;try{for(var _iterator7=obj.values()[Symbol.iterator](),_step7;!(_iteratorNormalCompletion7=(_step7=_iterator7.next()).done);_iteratorNormalCompletion7=true){var _item=_step7.value;this.dump(_item);}}catch(err){_didIteratorError7=true;_iteratorError7=err;}finally{try{if(!_iteratorNormalCompletion7&&_iterator7.return){_iterator7.return();}}finally{if(_didIteratorError7){throw _iteratorError7;}}}--this._level;this._line("}");}else throw new ul4.ValueError("can't create UL4ON dump of object "+ul4._repr(obj));}}]);return Encoder;}();ul4.Decoder=function(){function Decoder(data,registry){_classCallCheck(this,Decoder);this.data=data;this.pos=0;this.backrefs=[];this.registry=typeof registry==="undefined"?null:registry;this.stack=[];}_createClass(Decoder,[{key:"readchar",value:function readchar(){if(this.pos>=this.data.length)throw new ul4.ValueError("UL4 decoder at EOF");return this.data.charAt(this.pos++);}},{key:"readcharoreof",value:function readcharoreof(){if(this.pos>=this.data.length)return null;return this.data.charAt(this.pos++);}},{key:"readblackchar",value:function readblackchar(){var re_white=/\s/;for(;;){if(this.pos>=this.data.length)throw new ul4.ValueError("UL4 decoder at EOF at position "+this.pos+" with path "+this.stack.join("/"));var c=this.data.charAt(this.pos++);if(!c.match(re_white))return c;}}},{key:"read",value:function read(size){if(this.pos+size>this.length)size=this.length-this.pos;var result=this.data.substring(this.pos,this.pos+size);this.pos+=size;return result;}},{key:"backup",value:function backup(){--this.pos;}},{key:"readnumber",value:function readnumber(){var re_digits=/[-+0123456789.eE]/,value="";for(;;){var c=this.readcharoreof();if(c!==null&&c.match(re_digits))value+=c;else{var result=parseFloat(value);if(isNaN(result))throw new ul4.ValueError("invalid number, got "+ul4._repr("value")+" at position "+this.pos+" with path "+this.stack.join("/"));return result;}}}},{key:"_beginfakeloading",value:function _beginfakeloading(){var oldpos=this.backrefs.length;this.backrefs.push(null);return oldpos;}},{key:"_endfakeloading",value:function _endfakeloading(oldpos,value){this.backrefs[oldpos]=value;}},{key:"_readescape",value:function _readescape(escapechar,length){var chars=this.read(length);if(chars.length!=length)throw new ul4.ValueError("broken escape "+ul4._repr("\\"+escapechar+chars)+" at position "+this.pos+" with path "+this.stack.join("/"));var codepoint=parseInt(chars,16);if(isNaN(codepoint))throw new ul4.ValueError("broken escape "+ul4._repr("\\"+escapechar+chars)+" at position "+this.pos+" with path "+this.stack.join("/"));return String.fromCharCode(codepoint);}},{key:"load",value:function load(){var typecode=this.readblackchar();var result=void 0;switch(typecode){case"^":return this.backrefs[this.readnumber()];case"n":case"N":if(typecode==="N")this.backrefs.push(null);return null;case"b":case"B":result=this.readchar();if(result==="T")result=true;else if(result==="F")result=false;else throw new ul4.ValueError("wrong value for boolean, expected 'T' or 'F', got "+ul4._repr(result)+" at position "+this.pos+" with path "+this.stack.join("/"));if(typecode==="B")this.backrefs.push(result);return result;case"i":case"I":case"f":case"F":result=this.readnumber();if(typecode==="I"||typecode==="F")this.backrefs.push(result);return result;case"s":case"S":result=[];var delimiter=this.readblackchar();for(;;){var c=this.readchar();if(c==delimiter)break;if(c=="\\"){var c2=this.readchar();if(c2=="\\")result.push("\\");else if(c2=="n")result.push("\n");else if(c2=="r")result.push("\r");else if(c2=="t")result.push("\t");else if(c2=="f")result.push("\f");else if(c2=="b")result.push("\b");else if(c2=="a")result.push("\x07");else if(c2=="'")result.push("'");else if(c2=='"')result.push('"');else if(c2=="x")result.push(this._readescape("x",2));else if(c2=="u")result.push(this._readescape("u",4));else if(c2=="U")result.push(this._readescape("U",8));else result.push("\\"+c2);}else result.push(c);}result=result.join("");if(typecode==="S")this.backrefs.push(result);return result;case"c":case"C":result=new ul4.Color();if(typecode==="C")this.backrefs.push(result);result._r=this.load();result._g=this.load();result._b=this.load();result._a=this.load();return result;case"x":case"X":{var year=this.load();var month=this.load();var day=this.load();result=new ul4.Date(year,month,day);if(typecode==="X")this.backrefs.push(result);return result;}case"z":case"Z":result=new Date();result.setFullYear(this.load());result.setDate(1);result.setMonth(this.load()-1);result.setDate(this.load());result.setHours(this.load());result.setMinutes(this.load());result.setSeconds(this.load());result.setMilliseconds(this.load()/1000);if(typecode==="Z")this.backrefs.push(result);return result;case"t":case"T":result=new ul4.TimeDelta();result._days=this.load();result._seconds=this.load();result._microseconds=this.load();if(typecode==="T")this.backrefs.push(result);return result;case"r":case"R":result=new ul4.slice();if(typecode==="R")this.backrefs.push(result);result.start=this.load();result.stop=this.load();return result;case"m":case"M":result=new ul4.MonthDelta();if(typecode==="M")this.backrefs.push(result);result._months=this.load();return result;case"l":case"L":this.stack.push("list");result=[];if(typecode==="L")this.backrefs.push(result);for(;;){typecode=this.readblackchar();if(typecode==="]")break;this.backup();result.push(this.load());}this.stack.pop();return result;case"d":case"D":case"e":case"E":if(!ul4._havemap&&(typecode=="e"||typecode=="E"))throw new ul4.ValueError("ordered dictionaries are not supported at position "+this.pos+" with path "+this.stack.join("/"));result=ul4._emptymap();this.stack.push(typecode==="d"||typecode==="D"?"dict":"odict");if(typecode==="D"||typecode==="E")this.backrefs.push(result);for(;;){typecode=this.readblackchar();if(typecode==="}")break;this.backup();var key=this.load();var value=this.load();ul4._setmap(result,key,value);}this.stack.pop();return result;case"y":case"Y":this.stack.push("set");result=ul4._makeset();if(typecode==="Y")this.backrefs.push(result);for(;;){typecode=this.readblackchar();if(typecode==="}")break;this.backup();result.add(this.load());}this.stack.pop();return result;case"o":case"O":{var oldpos=void 0;if(typecode==="O")oldpos=this._beginfakeloading();var name=this.load();this.stack.push(name);var _constructor=void 0;if(this.registry!==null){_constructor=this.registry[name];if(typeof _constructor==="undefined")_constructor=ul4._registry[name];}else _constructor=ul4._registry[name];if(typeof _constructor==="undefined")throw new ul4.ValueError("can't load object of type "+ul4._repr(name)+" at position "+this.pos+" with path "+this.stack.join("/"));result=new _constructor();if(typecode==="O")this._endfakeloading(oldpos,result);result.ul4onload(this);typecode=this.readblackchar();if(typecode!==")")throw new ul4.ValueError("object terminator ')' for object of type '"+name+"' expected, got "+ul4._repr(typecode)+" at position "+this.pos+" with path "+this.stack.join("/"));this.stack.pop();return result;}default:throw new ul4.ValueError("unknown typecode "+ul4._repr(typecode)+" at position "+this.pos+" with path "+this.stack.join("/"));}}},{key:"loadcontent",value:function loadcontent(){var self=this;return{next:function(){var typecode=self.readblackchar();self.backup();if(typecode==")")return{done:true};else return{done:false,value:self.load()};}};}}]);return Decoder;}();ul4._rvalidchars=/^[\],:{}\s]*$/;ul4._rvalidescape=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g;ul4._rvalidtokens=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g;ul4._rvalidbraces=/(?:^|:|,)(?:\s*\[)+/g;ul4._inherit=function _inherit(baseobj,attrs){return Object.assign(Object.create(baseobj),attrs);};ul4._map2object=function _map2object(obj){if(ul4._ismap(obj)){var newobj={};var _iteratorNormalCompletion8=true;var _didIteratorError8=false;var _iteratorError8=undefined;try{for(var _iterator8=obj.entries()[Symbol.iterator](),_step8;!(_iteratorNormalCompletion8=(_step8=_iterator8.next()).done);_iteratorNormalCompletion8=true){var _step8$value=_slicedToArray(_step8.value,2),key=_step8$value[0],value=_step8$value[1];if(typeof key!=="string")throw new ul4.TypeError("keys must be strings");newobj[key]=value;}}catch(err){_didIteratorError8=true;_iteratorError8=err;}finally{try{if(!_iteratorNormalCompletion8&&_iterator8.return){_iterator8.return();}}finally{if(_didIteratorError8){throw _iteratorError8;}}}return newobj;}return obj;};ul4._bound=function _bound(value,upper){if(value<0)return 0;else if(value>upper)return upper;else return value;};ul4._stacktrace=function _stacktrace(exc){var output=(exc instanceof ul4.Exception?exc.constructor.name+": ":"")+exc.toString();if(exc.context)output=ul4._stacktrace(exc.context)+"\n\n"+output;return output;};ul4._internal_call=function _internal_call(context,f,name,functioncontext,signature,needscontext,needsobject,args,kwargs){var finalargs=void 0;if(needsobject){if(signature===null){if(args.length)throw new ul4.ArgumentError(ul4._repr(f)+" doesn't support positional arguments!");finalargs=[kwargs];}else finalargs=[signature.bindObject(name,args,kwargs)];}else{if(signature===null)throw new ul4.ArgumentError(ul4._repr(f)+" doesn't support positional arguments!");finalargs=signature.bindArray(name,args,kwargs);}if(needscontext)finalargs.unshift(context);return f.apply(functioncontext,finalargs);};ul4._callfunction=function _callfunction(context,f,args,kwargs){var name=f._ul4_name||f.name;if(typeof f._ul4_signature==="undefined"||typeof f._ul4_needsobject==="undefined"||typeof f._ul4_needscontext==="undefined")throw new ul4.TypeError(ul4._repr(f)+" is not callable by UL4");return ul4._internal_call(context,f,name,ul4,f._ul4_signature,f._ul4_needscontext,f._ul4_needsobject,args,kwargs);};ul4._callobject=function _callobject(context,obj,args,kwargs){if(typeof obj._ul4_callsignature==="undefined"||typeof obj._ul4_callneedsobject==="undefined"||typeof obj._ul4_callneedscontext==="undefined")throw new ul4.TypeError(ul4._repr(obj)+" is not callable by UL4");return ul4._internal_call(context,obj.__call__,obj.name,obj,obj._ul4_callsignature,obj._ul4_callneedscontext,obj._ul4_callneedsobject,args,kwargs);};ul4._callrender=function _callrender(context,obj,args,kwargs){if(typeof obj._ul4_rendersignature==="undefined"||typeof obj._ul4_renderneedsobject==="undefined"||typeof obj._ul4_renderneedscontext==="undefined")throw new ul4.TypeError(ul4._repr(obj)+" is not renderable by UL4");return ul4._internal_call(context,obj.__render__,obj.name,obj,obj._ul4_rendersignature,obj._ul4_renderneedscontext,obj._ul4_renderneedsobject,args,kwargs);};ul4._call=function _call(context,f,args,kwargs){if(typeof f==="function")return ul4._callfunction(context,f,args,kwargs);else if(f&&typeof f.__call__==="function")return ul4._callobject(context,f,args,kwargs);else throw new ul4.TypeError(ul4._type(f)+" is not callable");};ul4._unpackvar=function _unpackvar(lvalue,value){if(!ul4._islist(lvalue))return[[lvalue,value]];else{var newvalue=[];var iter=ul4._iter(value);for(var i=0;;++i){var item=iter.next();if(item.done){if(i===lvalue.length)break;else throw new ul4.ValueError("need "+lvalue.length+" value"+(lvalue.length===1?"":"s")+" to unpack, got "+i);}else{if(i<lvalue.length)newvalue=newvalue.concat(ul4._unpackvar(lvalue[i],item.value));else throw new ul4.ValueError("too many values to unpack (expected "+lvalue.length+")");}}return newvalue;}};ul4._formatsource=function _formatsource(out){var finalout=[];var level=0,needlf=false;var _iteratorNormalCompletion9=true;var _didIteratorError9=false;var _iteratorError9=undefined;try{for(var _iterator9=out[Symbol.iterator](),_step9;!(_iteratorNormalCompletion9=(_step9=_iterator9.next()).done);_iteratorNormalCompletion9=true){var part=_step9.value;if(typeof part==="number"){level+=part;needlf=true;}else{if(needlf){finalout.push("\n");for(var j=0;j<level;++j){finalout.push("\t");}needlf=false;}finalout.push(part);}}}catch(err){_didIteratorError9=true;_iteratorError9=err;}finally{try{if(!_iteratorNormalCompletion9&&_iterator9.return){_iterator9.return();}}finally{if(_didIteratorError9){throw _iteratorError9;}}}if(needlf)finalout.push("\n");return finalout.join("");};ul4._eq=function _eq(obj1,obj2){var numbertypes=["boolean","number"];if(obj1&&typeof obj1.__eq__==="function")return obj1.__eq__(obj2);else if(obj2&&typeof obj2.__eq__==="function")return obj2.__eq__(obj1);else if(obj1===null)return obj2===null;else if(numbertypes.indexOf(typeof obj1)!=-1){if(numbertypes.indexOf(typeof obj2)!=-1)return obj1==obj2;else return false;}else if(typeof obj1==="string"){if(typeof obj2==="string")return obj1==obj2;else return false;}else if(ul4._isdatetime(obj1)){if(ul4._isdatetime(obj2))return obj1.getTime()==obj2.getTime();else return false;}else if(ul4._islist(obj1)){if(ul4._islist(obj2)){if(obj1===obj2)return true;if(obj1.length!=obj2.length)return false;for(var i=0;i<obj1.length;++i){if(!ul4._eq(obj1[i],obj2[i]))return false;}return true;}else return false;}else if(ul4._isobject(obj1)){if(ul4._isobject(obj2)){if(obj1===obj2)return true;for(var key in obj1){if(obj2.hasOwnProperty(key)){if(!ul4._eq(obj1[key],obj2[key]))return false;}else return false;}for(var _key6 in obj2){if(!obj1.hasOwnProperty(_key6))return false;}return true;}else if(ul4._ismap(obj2)){for(var _key7 in obj1){if(obj2.has(_key7)){if(!ul4._eq(obj1[_key7],obj2.get(_key7)))return false;}else return false;}var result=true;var _iteratorNormalCompletion10=true;var _didIteratorError10=false;var _iteratorError10=undefined;try{for(var _iterator10=obj2.keys()[Symbol.iterator](),_step10;!(_iteratorNormalCompletion10=(_step10=_iterator10.next()).done);_iteratorNormalCompletion10=true){var _key8=_step10.value;if(!obj1.hasOwnProperty(_key8))result=false;}}catch(err){_didIteratorError10=true;_iteratorError10=err;}finally{try{if(!_iteratorNormalCompletion10&&_iterator10.return){_iterator10.return();}}finally{if(_didIteratorError10){throw _iteratorError10;}}}return result;}else return false;}else if(ul4._ismap(obj1)){if(ul4._isobject(obj2)){var _iteratorNormalCompletion11=true;var _didIteratorError11=false;var _iteratorError11=undefined;try{for(var _iterator11=obj1.keys()[Symbol.iterator](),_step11;!(_iteratorNormalCompletion11=(_step11=_iterator11.next()).done);_iteratorNormalCompletion11=true){var _key9=_step11.value;if(!obj2.hasOwnProperty(_key9))return false;else if(!ul4._eq(obj1.get(_key9),obj2[_key9]))return false;}}catch(err){_didIteratorError11=true;_iteratorError11=err;}finally{try{if(!_iteratorNormalCompletion11&&_iterator11.return){_iterator11.return();}}finally{if(_didIteratorError11){throw _iteratorError11;}}}for(var _key10 in obj2){if(!obj1.has(_key10))return false;}return true;}else if(ul4._ismap(obj2)){if(obj1===obj2)return true;if(obj1.size!=obj2.size)return false;var _iteratorNormalCompletion12=true;var _didIteratorError12=false;var _iteratorError12=undefined;try{for(var _iterator12=obj1.keys()[Symbol.iterator](),_step12;!(_iteratorNormalCompletion12=(_step12=_iterator12.next()).done);_iteratorNormalCompletion12=true){var _key11=_step12.value;if(!obj2.has(_key11))return false;else if(!ul4._eq(obj1.get(_key11),obj2.get(_key11)))return false;}}catch(err){_didIteratorError12=true;_iteratorError12=err;}finally{try{if(!_iteratorNormalCompletion12&&_iterator12.return){_iterator12.return();}}finally{if(_didIteratorError12){throw _iteratorError12;}}}return true;}else return false;}else if(ul4._isset(obj1)){if(ul4._isset(obj2)){if(obj1===obj2)return true;if(obj1.size!=obj2.size)return false;var _iteratorNormalCompletion13=true;var _didIteratorError13=false;var _iteratorError13=undefined;try{for(var _iterator13=obj1[Symbol.iterator](),_step13;!(_iteratorNormalCompletion13=(_step13=_iterator13.next()).done);_iteratorNormalCompletion13=true){var value=_step13.value;if(!obj2.has(value))return false;}}catch(err){_didIteratorError13=true;_iteratorError13=err;}finally{try{if(!_iteratorNormalCompletion13&&_iterator13.return){_iterator13.return();}}finally{if(_didIteratorError13){throw _iteratorError13;}}}return true;}else return false;}else return obj1===obj2;};ul4._ne=function _ne(obj1,obj2){if(obj1&&typeof obj1.__ne__==="function")return obj1.__ne__(obj2);else if(obj2&&typeof obj2.__ne__==="function")return obj2.__ne__(obj1);else return!ul4._eq(obj1,obj2);};ul4._unorderable=function _unorderable(operator,obj1,obj2){throw new ul4.TypeError("unorderable types: "+ul4._type(obj1)+" "+operator+" "+ul4._type(obj2));};ul4._cmp=function _cmp(operator,obj1,obj2){var numbertypes=["boolean","number"];if(numbertypes.indexOf(typeof obj1)!=-1){if(numbertypes.indexOf(typeof obj2)!=-1)return(obj1>obj2)-(obj1<obj2);}else if(typeof obj1==="string"){if(typeof obj2==="string")return(obj1>obj2)-(obj1<obj2);}else if(ul4._isdatetime(obj1)){if(ul4._isdatetime(obj2)){var v1=obj1.getTime(),v2=obj2.getTime();return(v1>v2)-(v1<v2);}}else if(ul4._islist(obj1)){if(ul4._islist(obj2)){if(obj1===obj2)return 0;for(var i=0;i<obj1.length;++i){if(i>=obj2.length)return 1;var res=ul4._cmp(operator,obj1[i],obj2[i]);if(res)return res;}return obj2.length>obj1.length?-1:0;}}else if(ul4._isset(obj1)||ul4._isul4set(obj1)){if(ul4._isset(obj2)||ul4._isul4set(obj2)){var _in1only=false;var _in2only=false;for(var iter=_iter(obj1);;){var item=iter.next();if(item.done)break;if(!obj2.has(item.value)){_in1only=true;break;}}for(var _iter2=_iter(obj2);;){var _item2=_iter2.next();if(_item2.done)break;if(!obj1.has(_item2.value)){_in2only=true;break;}}if(_in1only){if(_in2only)return null;else return 1;}else{if(_in2only)return-1;else return 0;}}}return ul4._unorderable(operator,obj1,obj2);};ul4._lt=function _lt(obj1,obj2){var numbertypes=["boolean","number"];if(obj1&&typeof obj1.__lt__==="function")return obj1.__lt__(obj2);else if(numbertypes.indexOf(typeof obj1)!=-1){if(numbertypes.indexOf(typeof obj2)!=-1)return obj1<obj2;}else if(typeof obj1==="string"){if(typeof obj2==="string")return obj1<obj2;}else if(ul4._isdatetime(obj1)){if(ul4._isdatetime(obj2))return obj1.getTime()<obj2.getTime();}else if(ul4._islist(obj1)){if(ul4._islist(obj2)){if(obj1===obj2)return false;for(var i=0;i<obj1.length;++i){if(i>=obj2.length)return false;var eq=ul4._eq(obj1[i],obj2[i]);if(!eq)return ul4._lt(obj1[i],obj2[i]);}return obj1.length<obj2.length;}}else if(ul4._isset(obj1)){if(ul4._isset(obj2)){if(ul4._isset(obj2)){var _iteratorNormalCompletion14=true;var _didIteratorError14=false;var _iteratorError14=undefined;try{for(var _iterator14=obj1[Symbol.iterator](),_step14;!(_iteratorNormalCompletion14=(_step14=_iterator14.next()).done);_iteratorNormalCompletion14=true){var value=_step14.value;if(!obj2.has(value))in1only=true;}}catch(err){_didIteratorError14=true;_iteratorError14=err;}finally{try{if(!_iteratorNormalCompletion14&&_iterator14.return){_iterator14.return();}}finally{if(_didIteratorError14){throw _iteratorError14;}}}var _iteratorNormalCompletion15=true;var _didIteratorError15=false;var _iteratorError15=undefined;try{for(var _iterator15=obj2[Symbol.iterator](),_step15;!(_iteratorNormalCompletion15=(_step15=_iterator15.next()).done);_iteratorNormalCompletion15=true){var _value=_step15.value;if(!obj1.has(_value))in2only=true;}}catch(err){_didIteratorError15=true;_iteratorError15=err;}finally{try{if(!_iteratorNormalCompletion15&&_iterator15.return){_iterator15.return();}}finally{if(_didIteratorError15){throw _iteratorError15;}}}}else if(ul4._isul4set(obj2)){var _iteratorNormalCompletion16=true;var _didIteratorError16=false;var _iteratorError16=undefined;try{for(var _iterator16=obj1[Symbol.iterator](),_step16;!(_iteratorNormalCompletion16=(_step16=_iterator16.next()).done);_iteratorNormalCompletion16=true){var _value2=_step16.value;if(!obj2.items[_value2])in1only=true;}}catch(err){_didIteratorError16=true;_iteratorError16=err;}finally{try{if(!_iteratorNormalCompletion16&&_iterator16.return){_iterator16.return();}}finally{if(_didIteratorError16){throw _iteratorError16;}}}for(var _value3 in obj2.items){if(!obj1.has(_value3)){in2only=true;break;}}}}else if(ul4._isul4set(obj2)){if(ul4._isset(obj2)){for(var _value4 in obj1.items){if(!obj2.has(_value4)){in1only=true;break;}}var _iteratorNormalCompletion17=true;var _didIteratorError17=false;var _iteratorError17=undefined;try{for(var _iterator17=obj2[Symbol.iterator](),_step17;!(_iteratorNormalCompletion17=(_step17=_iterator17.next()).done);_iteratorNormalCompletion17=true){var _value5=_step17.value;if(!obj1.items[_value5])in2only=true;}}catch(err){_didIteratorError17=true;_iteratorError17=err;}finally{try{if(!_iteratorNormalCompletion17&&_iterator17.return){_iterator17.return();}}finally{if(_didIteratorError17){throw _iteratorError17;}}}}else if(ul4._isul4set(obj2)){for(var _value6 in obj1.items){if(!obj2.items[_value6]){in1only=true;break;}}for(var _value7 in obj2.items){if(!obj1.items[_value7]){in2only=true;break;}}}}else ul4._unorderable(operator,obj1,obj2);if(in1only){if(in2only)return null;else return 1;}else{if(in2only)return-1;else return 0;}}ul4._unorderable("<",obj1,obj2);};ul4._le=function _le(obj1,obj2){var numbertypes=["boolean","number"];if(obj1&&typeof obj1.__le__==="function")return obj1.__le__(obj2);if(numbertypes.indexOf(typeof obj1)!=-1){if(numbertypes.indexOf(typeof obj2)!=-1)return obj1<=obj2;}else if(typeof obj1==="string"){if(typeof obj2==="string")return obj1<=obj2;}else if(ul4._isdatetime(obj1)){if(ul4._isdatetime(obj2))return obj1.getTime()<=obj2.getTime();}else if(ul4._islist(obj1)){if(ul4._islist(obj2)){if(obj1===obj2)return true;for(var i=0;i<obj1.length;++i){if(i>=obj2.length)return false;var eq=ul4._eq(obj1[i],obj2[i]);if(!eq)return ul4._lt(obj1[i],obj2[i]);}return obj1.length<=obj2.length;}}else if(ul4._isset(obj1)||ul4._isul4set(obj1)){var _in1only2=false;var _in2only2=false;if(ul4._isset(obj2)){if(ul4._isset(obj2)){var _iteratorNormalCompletion18=true;var _didIteratorError18=false;var _iteratorError18=undefined;try{for(var _iterator18=obj1[Symbol.iterator](),_step18;!(_iteratorNormalCompletion18=(_step18=_iterator18.next()).done);_iteratorNormalCompletion18=true){var value=_step18.value;if(!obj2.has(value))_in1only2=true;}}catch(err){_didIteratorError18=true;_iteratorError18=err;}finally{try{if(!_iteratorNormalCompletion18&&_iterator18.return){_iterator18.return();}}finally{if(_didIteratorError18){throw _iteratorError18;}}}var _iteratorNormalCompletion19=true;var _didIteratorError19=false;var _iteratorError19=undefined;try{for(var _iterator19=obj2[Symbol.iterator](),_step19;!(_iteratorNormalCompletion19=(_step19=_iterator19.next()).done);_iteratorNormalCompletion19=true){var _value8=_step19.value;if(!obj1.has(_value8))_in2only2=true;}}catch(err){_didIteratorError19=true;_iteratorError19=err;}finally{try{if(!_iteratorNormalCompletion19&&_iterator19.return){_iterator19.return();}}finally{if(_didIteratorError19){throw _iteratorError19;}}}}else if(ul4._isul4set(obj2)){var _iteratorNormalCompletion20=true;var _didIteratorError20=false;var _iteratorError20=undefined;try{for(var _iterator20=obj1[Symbol.iterator](),_step20;!(_iteratorNormalCompletion20=(_step20=_iterator20.next()).done);_iteratorNormalCompletion20=true){var _value9=_step20.value;if(!obj2.items[_value9])_in1only2=true;}}catch(err){_didIteratorError20=true;_iteratorError20=err;}finally{try{if(!_iteratorNormalCompletion20&&_iterator20.return){_iterator20.return();}}finally{if(_didIteratorError20){throw _iteratorError20;}}}for(var _value10 in obj2.items){if(!obj1.has(_value10)){_in2only2=true;break;}}}}else if(ul4._isul4set(obj2)){if(ul4._isset(obj2)){for(var _value11 in obj1.items){if(!obj2.has(_value11)){_in1only2=true;break;}}var _iteratorNormalCompletion21=true;var _didIteratorError21=false;var _iteratorError21=undefined;try{for(var _iterator21=obj2[Symbol.iterator](),_step21;!(_iteratorNormalCompletion21=(_step21=_iterator21.next()).done);_iteratorNormalCompletion21=true){var _value12=_step21.value;if(!obj1.items[_value12])_in2only2=true;}}catch(err){_didIteratorError21=true;_iteratorError21=err;}finally{try{if(!_iteratorNormalCompletion21&&_iterator21.return){_iterator21.return();}}finally{if(_didIteratorError21){throw _iteratorError21;}}}}else if(ul4._isul4set(obj2)){for(var _value13 in obj1.items){if(!obj2.items[_value13]){_in1only2=true;break;}}for(var _value14 in obj2.items){if(!obj1.items[_value14]){_in2only2=true;break;}}}}else ul4._unorderable(operator,obj1,obj2);if(_in1only2){if(_in2only2)return null;else return 1;}else{if(_in2only2)return-1;else return 0;}}ul4._unorderable("<=",obj1,obj2);};ul4._gt=function _gt(obj1,obj2){var numbertypes=["boolean","number"];if(obj1&&typeof obj1.__gt__==="function")return obj1.__gt__(obj2);if(numbertypes.indexOf(typeof obj1)!=-1){if(numbertypes.indexOf(typeof obj2)!=-1)return obj1>obj2;}else if(typeof obj1==="string"){if(typeof obj2==="string")return obj1>obj2;}else if(ul4._isdatetime(obj1)){if(ul4._isdatetime(obj2))return obj1.getTime()>obj2.getTime();}else if(ul4._islist(obj1)){if(ul4._islist(obj2)){if(obj1===obj2)return false;for(var i=0;i<obj1.length;++i){if(i>=obj2.length)return true;var eq=ul4._eq(obj1[i],obj2[i]);if(!eq)return ul4._gt(obj1[i],obj2[i]);}return obj1.length>obj2.length;}}else if(ul4._isset(obj1)||ul4._isul4set(obj1)){var _in1only3=false;var _in2only3=false;if(ul4._isset(obj2)){if(ul4._isset(obj2)){var _iteratorNormalCompletion22=true;var _didIteratorError22=false;var _iteratorError22=undefined;try{for(var _iterator22=obj1[Symbol.iterator](),_step22;!(_iteratorNormalCompletion22=(_step22=_iterator22.next()).done);_iteratorNormalCompletion22=true){var value=_step22.value;if(!obj2.has(value))_in1only3=true;}}catch(err){_didIteratorError22=true;_iteratorError22=err;}finally{try{if(!_iteratorNormalCompletion22&&_iterator22.return){_iterator22.return();}}finally{if(_didIteratorError22){throw _iteratorError22;}}}var _iteratorNormalCompletion23=true;var _didIteratorError23=false;var _iteratorError23=undefined;try{for(var _iterator23=obj2[Symbol.iterator](),_step23;!(_iteratorNormalCompletion23=(_step23=_iterator23.next()).done);_iteratorNormalCompletion23=true){var _value15=_step23.value;if(!obj1.has(_value15))_in2only3=true;}}catch(err){_didIteratorError23=true;_iteratorError23=err;}finally{try{if(!_iteratorNormalCompletion23&&_iterator23.return){_iterator23.return();}}finally{if(_didIteratorError23){throw _iteratorError23;}}}}else if(ul4._isul4set(obj2)){var _iteratorNormalCompletion24=true;var _didIteratorError24=false;var _iteratorError24=undefined;try{for(var _iterator24=obj1[Symbol.iterator](),_step24;!(_iteratorNormalCompletion24=(_step24=_iterator24.next()).done);_iteratorNormalCompletion24=true){var _value16=_step24.value;if(!obj2.items[_value16])_in1only3=true;}}catch(err){_didIteratorError24=true;_iteratorError24=err;}finally{try{if(!_iteratorNormalCompletion24&&_iterator24.return){_iterator24.return();}}finally{if(_didIteratorError24){throw _iteratorError24;}}}for(var _value17 in obj2.items){if(!obj1.has(_value17)){_in2only3=true;break;}}}}else if(ul4._isul4set(obj2)){if(ul4._isset(obj2)){for(var _value18 in obj1.items){if(!obj2.has(_value18)){_in1only3=true;break;}}var _iteratorNormalCompletion25=true;var _didIteratorError25=false;var _iteratorError25=undefined;try{for(var _iterator25=obj2[Symbol.iterator](),_step25;!(_iteratorNormalCompletion25=(_step25=_iterator25.next()).done);_iteratorNormalCompletion25=true){var _value19=_step25.value;if(!obj1.items[_value19])_in2only3=true;}}catch(err){_didIteratorError25=true;_iteratorError25=err;}finally{try{if(!_iteratorNormalCompletion25&&_iterator25.return){_iterator25.return();}}finally{if(_didIteratorError25){throw _iteratorError25;}}}}else if(ul4._isul4set(obj2)){for(var _value20 in obj1.items){if(!obj2.items[_value20]){_in1only3=true;break;}}for(var _value21 in obj2.items){if(!obj1.items[_value21]){_in2only3=true;break;}}}}else ul4._unorderable(operator,obj1,obj2);if(_in1only3){if(_in2only3)return null;else return 1;}else{if(_in2only3)return-1;else return 0;}}ul4._unorderable(">",obj1,obj2);};ul4._ge=function _ge(obj1,obj2){var numbertypes=["boolean","number"];if(obj1&&typeof obj1.__ge__==="function")return obj1.__ge__(obj2);else if(numbertypes.indexOf(typeof obj1)!=-1){if(numbertypes.indexOf(typeof obj2)!=-1)return obj1>=obj2;}else if(typeof obj1==="string"){if(typeof obj2==="string")return obj1>=obj2;}else if(ul4._isdatetime(obj1)){if(ul4._isdatetime(obj2))return obj1.getTime()>=obj2.getTime();}else if(ul4._islist(obj1)){if(ul4._islist(obj2)){if(obj1===obj2)return true;for(var i=0;i<obj1.length;++i){if(i>=obj2.length)return true;var eq=ul4._eq(obj1[i],obj2[i]);if(!eq)return ul4._gt(obj1[i],obj2[i]);}return obj1.length>=obj2.length;}}else if(ul4._isset(obj1)||ul4._isul4set(obj1)){var _in1only4=false;var _in2only4=false;if(ul4._isset(obj2)){if(ul4._isset(obj2)){var _iteratorNormalCompletion26=true;var _didIteratorError26=false;var _iteratorError26=undefined;try{for(var _iterator26=obj1[Symbol.iterator](),_step26;!(_iteratorNormalCompletion26=(_step26=_iterator26.next()).done);_iteratorNormalCompletion26=true){var value=_step26.value;if(!obj2.has(value))_in1only4=true;}}catch(err){_didIteratorError26=true;_iteratorError26=err;}finally{try{if(!_iteratorNormalCompletion26&&_iterator26.return){_iterator26.return();}}finally{if(_didIteratorError26){throw _iteratorError26;}}}var _iteratorNormalCompletion27=true;var _didIteratorError27=false;var _iteratorError27=undefined;try{for(var _iterator27=obj2[Symbol.iterator](),_step27;!(_iteratorNormalCompletion27=(_step27=_iterator27.next()).done);_iteratorNormalCompletion27=true){var _value22=_step27.value;if(!obj1.has(_value22))_in2only4=true;}}catch(err){_didIteratorError27=true;_iteratorError27=err;}finally{try{if(!_iteratorNormalCompletion27&&_iterator27.return){_iterator27.return();}}finally{if(_didIteratorError27){throw _iteratorError27;}}}}else if(ul4._isul4set(obj2)){var _iteratorNormalCompletion28=true;var _didIteratorError28=false;var _iteratorError28=undefined;try{for(var _iterator28=obj1[Symbol.iterator](),_step28;!(_iteratorNormalCompletion28=(_step28=_iterator28.next()).done);_iteratorNormalCompletion28=true){var _value23=_step28.value;if(!obj2.items[_value23])_in1only4=true;}}catch(err){_didIteratorError28=true;_iteratorError28=err;}finally{try{if(!_iteratorNormalCompletion28&&_iterator28.return){_iterator28.return();}}finally{if(_didIteratorError28){throw _iteratorError28;}}}for(var _value24 in obj2.items){if(!obj1.has(_value24)){_in2only4=true;break;}}}}else if(ul4._isul4set(obj2)){if(ul4._isset(obj2)){for(var _value25 in obj1.items){if(!obj2.has(_value25)){_in1only4=true;break;}}var _iteratorNormalCompletion29=true;var _didIteratorError29=false;var _iteratorError29=undefined;try{for(var _iterator29=obj2[Symbol.iterator](),_step29;!(_iteratorNormalCompletion29=(_step29=_iterator29.next()).done);_iteratorNormalCompletion29=true){var _value26=_step29.value;if(!obj1.items[_value26])_in2only4=true;}}catch(err){_didIteratorError29=true;_iteratorError29=err;}finally{try{if(!_iteratorNormalCompletion29&&_iterator29.return){_iterator29.return();}}finally{if(_didIteratorError29){throw _iteratorError29;}}}}else if(ul4._isul4set(obj2)){for(var _value27 in obj1.items){if(!obj2.items[_value27]){_in1only4=true;break;}}for(var _value28 in obj2.items){if(!obj1.items[_value28]){_in2only4=true;break;}}}}else ul4._unorderable(operator,obj1,obj2);if(_in1only4){if(_in2only4)return null;else return 1;}else{if(_in2only4)return-1;else return 0;}}ul4._unorderable(">=",obj1,obj2);};ul4._iter=function _iter(obj){if(typeof obj==="string"||ul4._islist(obj)){return{index:0,next:function(){if(this.index<obj.length)return{value:obj[this.index++],done:false};else return{done:true};}};}else if(ul4._isiter(obj))return obj;else if(obj!==null&&typeof obj.__iter__==="function")return obj.__iter__();else if(ul4._ismap(obj)){var keys=[];var _iteratorNormalCompletion30=true;var _didIteratorError30=false;var _iteratorError30=undefined;try{for(var _iterator30=obj.keys()[Symbol.iterator](),_step30;!(_iteratorNormalCompletion30=(_step30=_iterator30.next()).done);_iteratorNormalCompletion30=true){var key=_step30.value;keys.push(key);}}catch(err){_didIteratorError30=true;_iteratorError30=err;}finally{try{if(!_iteratorNormalCompletion30&&_iterator30.return){_iterator30.return();}}finally{if(_didIteratorError30){throw _iteratorError30;}}}return{index:0,next:function(){if(this.index>=keys.length)return{done:true};return{value:keys[this.index++],done:false};}};}else if(ul4._isset(obj)){var values=[];var _iteratorNormalCompletion31=true;var _didIteratorError31=false;var _iteratorError31=undefined;try{for(var _iterator31=obj[Symbol.iterator](),_step31;!(_iteratorNormalCompletion31=(_step31=_iterator31.next()).done);_iteratorNormalCompletion31=true){var item=_step31.value;values.push(item);}}catch(err){_didIteratorError31=true;_iteratorError31=err;}finally{try{if(!_iteratorNormalCompletion31&&_iterator31.return){_iterator31.return();}}finally{if(_didIteratorError31){throw _iteratorError31;}}}return{index:0,next:function(){if(this.index>=values.length)return{done:true};return{value:values[this.index++],done:false};}};}else if(ul4._isul4set(obj)){return ul4._iter(obj.items);}else if(ul4._isobject(obj)){var _keys=[];for(var _key12 in obj){_keys.push(_key12);}return{index:0,next:function(){if(this.index>=_keys.length)return{done:true};return{value:_keys[this.index++],done:false};}};}throw new ul4.TypeError(ul4._type(obj)+" object is not iterable");};ul4._str_repr=function _str_repr(str,ascii){var result="";var squote=false,dquote=false;var _iteratorNormalCompletion32=true;var _didIteratorError32=false;var _iteratorError32=undefined;try{for(var _iterator32=str[Symbol.iterator](),_step32;!(_iteratorNormalCompletion32=(_step32=_iterator32.next()).done);_iteratorNormalCompletion32=true){var c=_step32.value;if(c=='"'){dquote=true;if(squote)break;}else if(c=="'"){squote=true;if(dquote)break;}}}catch(err){_didIteratorError32=true;_iteratorError32=err;}finally{try{if(!_iteratorNormalCompletion32&&_iterator32.return){_iterator32.return();}}finally{if(_didIteratorError32){throw _iteratorError32;}}}var quote=squote&&!dquote?'"':"'";var _iteratorNormalCompletion33=true;var _didIteratorError33=false;var _iteratorError33=undefined;try{for(var _iterator33=str[Symbol.iterator](),_step33;!(_iteratorNormalCompletion33=(_step33=_iterator33.next()).done);_iteratorNormalCompletion33=true){var _c=_step33.value;switch(_c){case'"':result+=quote==_c?'\\"':_c;break;case"'":result+=quote==_c?"\\'":_c;break;case"\\":result+="\\\\";break;case"\t":result+="\\t";break;case"\n":result+="\\n";break;case"\r":result+="\\r";break;default:var code=_c.charCodeAt(0);var _escape=void 0;if(code<32)_escape=2;else if(code<0x7f)_escape=0;else if(!ascii&&!/[\u007f-\u00a0\u00ad\u0378-\u0379\u0380-\u0383\u038b\u038d\u03a2\u0530\u0557-\u0558\u0560\u0588\u058b-\u058c\u0590\u05c8-\u05cf\u05eb-\u05ef\u05f5-\u0605\u061c-\u061d\u06dd\u070e-\u070f\u074b-\u074c\u07b2-\u07bf\u07fb-\u07ff\u082e-\u082f\u083f\u085c-\u085d\u085f-\u089f\u08b5-\u08e2\u0984\u098d-\u098e\u0991-\u0992\u09a9\u09b1\u09b3-\u09b5\u09ba-\u09bb\u09c5-\u09c6\u09c9-\u09ca\u09cf-\u09d6\u09d8-\u09db\u09de\u09e4-\u09e5\u09fc-\u0a00\u0a04\u0a0b-\u0a0e\u0a11-\u0a12\u0a29\u0a31\u0a34\u0a37\u0a3a-\u0a3b\u0a3d\u0a43-\u0a46\u0a49-\u0a4a\u0a4e-\u0a50\u0a52-\u0a58\u0a5d\u0a5f-\u0a65\u0a76-\u0a80\u0a84\u0a8e\u0a92\u0aa9\u0ab1\u0ab4\u0aba-\u0abb\u0ac6\u0aca\u0ace-\u0acf\u0ad1-\u0adf\u0ae4-\u0ae5\u0af2-\u0af8\u0afa-\u0b00\u0b04\u0b0d-\u0b0e\u0b11-\u0b12\u0b29\u0b31\u0b34\u0b3a-\u0b3b\u0b45-\u0b46\u0b49-\u0b4a\u0b4e-\u0b55\u0b58-\u0b5b\u0b5e\u0b64-\u0b65\u0b78-\u0b81\u0b84\u0b8b-\u0b8d\u0b91\u0b96-\u0b98\u0b9b\u0b9d\u0ba0-\u0ba2\u0ba5-\u0ba7\u0bab-\u0bad\u0bba-\u0bbd\u0bc3-\u0bc5\u0bc9\u0bce-\u0bcf\u0bd1-\u0bd6\u0bd8-\u0be5\u0bfb-\u0bff\u0c04\u0c0d\u0c11\u0c29\u0c3a-\u0c3c\u0c45\u0c49\u0c4e-\u0c54\u0c57\u0c5b-\u0c5f\u0c64-\u0c65\u0c70-\u0c77\u0c80\u0c84\u0c8d\u0c91\u0ca9\u0cb4\u0cba-\u0cbb\u0cc5\u0cc9\u0cce-\u0cd4\u0cd7-\u0cdd\u0cdf\u0ce4-\u0ce5\u0cf0\u0cf3-\u0d00\u0d04\u0d0d\u0d11\u0d3b-\u0d3c\u0d45\u0d49\u0d4f-\u0d56\u0d58-\u0d5e\u0d64-\u0d65\u0d76-\u0d78\u0d80-\u0d81\u0d84\u0d97-\u0d99\u0db2\u0dbc\u0dbe-\u0dbf\u0dc7-\u0dc9\u0dcb-\u0dce\u0dd5\u0dd7\u0de0-\u0de5\u0df0-\u0df1\u0df5-\u0e00\u0e3b-\u0e3e\u0e5c-\u0e80\u0e83\u0e85-\u0e86\u0e89\u0e8b-\u0e8c\u0e8e-\u0e93\u0e98\u0ea0\u0ea4\u0ea6\u0ea8-\u0ea9\u0eac\u0eba\u0ebe-\u0ebf\u0ec5\u0ec7\u0ece-\u0ecf\u0eda-\u0edb\u0ee0-\u0eff\u0f48\u0f6d-\u0f70\u0f98\u0fbd\u0fcd\u0fdb-\u0fff\u10c6\u10c8-\u10cc\u10ce-\u10cf\u1249\u124e-\u124f\u1257\u1259\u125e-\u125f\u1289\u128e-\u128f\u12b1\u12b6-\u12b7\u12bf\u12c1\u12c6-\u12c7\u12d7\u1311\u1316-\u1317\u135b-\u135c\u137d-\u137f\u139a-\u139f\u13f6-\u13f7\u13fe-\u13ff\u1680\u169d-\u169f\u16f9-\u16ff\u170d\u1715-\u171f\u1737-\u173f\u1754-\u175f\u176d\u1771\u1774-\u177f\u17de-\u17df\u17ea-\u17ef\u17fa-\u17ff\u180e-\u180f\u181a-\u181f\u1878-\u187f\u18ab-\u18af\u18f6-\u18ff\u191f\u192c-\u192f\u193c-\u193f\u1941-\u1943\u196e-\u196f\u1975-\u197f\u19ac-\u19af\u19ca-\u19cf\u19db-\u19dd\u1a1c-\u1a1d\u1a5f\u1a7d-\u1a7e\u1a8a-\u1a8f\u1a9a-\u1a9f\u1aae-\u1aaf\u1abf-\u1aff\u1b4c-\u1b4f\u1b7d-\u1b7f\u1bf4-\u1bfb\u1c38-\u1c3a\u1c4a-\u1c4c\u1c80-\u1cbf\u1cc8-\u1ccf\u1cf7\u1cfa-\u1cff\u1df6-\u1dfb\u1f16-\u1f17\u1f1e-\u1f1f\u1f46-\u1f47\u1f4e-\u1f4f\u1f58\u1f5a\u1f5c\u1f5e\u1f7e-\u1f7f\u1fb5\u1fc5\u1fd4-\u1fd5\u1fdc\u1ff0-\u1ff1\u1ff5\u1fff-\u200f\u2028-\u202f\u205f-\u206f\u2072-\u2073\u208f\u209d-\u209f\u20bf-\u20cf\u20f1-\u20ff\u218c-\u218f\u23fb-\u23ff\u2427-\u243f\u244b-\u245f\u2b74-\u2b75\u2b96-\u2b97\u2bba-\u2bbc\u2bc9\u2bd2-\u2beb\u2bf0-\u2bff\u2c2f\u2c5f\u2cf4-\u2cf8\u2d26\u2d28-\u2d2c\u2d2e-\u2d2f\u2d68-\u2d6e\u2d71-\u2d7e\u2d97-\u2d9f\u2da7\u2daf\u2db7\u2dbf\u2dc7\u2dcf\u2dd7\u2ddf\u2e43-\u2e7f\u2e9a\u2ef4-\u2eff\u2fd6-\u2fef\u2ffc-\u3000\u3040\u3097-\u3098\u3100-\u3104\u312e-\u3130\u318f\u31bb-\u31bf\u31e4-\u31ef\u321f\u32ff\u4db6-\u4dbf\u9fd6-\u9fff\ua48d-\ua48f\ua4c7-\ua4cf\ua62c-\ua63f\ua6f8-\ua6ff\ua7ae-\ua7af\ua7b8-\ua7f6\ua82c-\ua82f\ua83a-\ua83f\ua878-\ua87f\ua8c5-\ua8cd\ua8da-\ua8df\ua8fe-\ua8ff\ua954-\ua95e\ua97d-\ua97f\ua9ce\ua9da-\ua9dd\ua9ff\uaa37-\uaa3f\uaa4e-\uaa4f\uaa5a-\uaa5b\uaac3-\uaada\uaaf7-\uab00\uab07-\uab08\uab0f-\uab10\uab17-\uab1f\uab27\uab2f\uab66-\uab6f\uabee-\uabef\uabfa-\uabff\ud7a4-\ud7af\ud7c7-\ud7ca\ud7fc-\uf8ff\ufa6e-\ufa6f\ufada-\ufaff\ufb07-\ufb12\ufb18-\ufb1c\ufb37\ufb3d\ufb3f\ufb42\ufb45\ufbc2-\ufbd2\ufd40-\ufd4f\ufd90-\ufd91\ufdc8-\ufdef\ufdfe-\ufdff\ufe1a-\ufe1f\ufe53\ufe67\ufe6c-\ufe6f\ufe75\ufefd-\uff00\uffbf-\uffc1\uffc8-\uffc9\uffd0-\uffd1\uffd8-\uffd9\uffdd-\uffdf\uffe7\uffef-\ufffb\ufffe-\uffff]/.test(_c))_escape=0;else if(code<=0xff)_escape=2;else if(code<=0xffff)_escape=4;else _escape=8;if(_escape===0)result+=_c;else if(_escape===2)result+="\\x"+ul4._lpad(code.toString(16),"0",2);else if(_escape===4)result+="\\u"+ul4._lpad(code.toString(16),"0",4);else result+="\\U"+ul4._lpad(code.toString(16),"0",8);break;}}}catch(err){_didIteratorError33=true;_iteratorError33=err;}finally{try{if(!_iteratorNormalCompletion33&&_iterator33.return){_iterator33.return();}}finally{if(_didIteratorError33){throw _iteratorError33;}}}return quote+result+quote;};ul4._date_repr=function _date_repr(obj,ascii){var year=obj._date.getFullYear();var month=obj._date.getMonth()+1;var day=obj._date.getDate();var result="@("+year+"-"+ul4._lpad(month.toString(),"0",2)+"-"+ul4._lpad(day.toString(),"0",2)+")";return result;};ul4._datetime_repr=function _datetime_repr(obj,ascii){var year=obj.getFullYear();var month=obj.getMonth()+1;var day=obj.getDate();var hour=obj.getHours();var minute=obj.getMinutes();var second=obj.getSeconds();var ms=obj.getMilliseconds();var result="@("+year+"-"+ul4._lpad(month.toString(),"0",2)+"-"+ul4._lpad(day.toString(),"0",2)+"T";if(hour||minute||second||ms){result+=ul4._lpad(hour.toString(),"0",2)+":"+ul4._lpad(minute.toString(),"0",2);if(second||ms){result+=":"+ul4._lpad(second.toString(),"0",2);if(ms)result+="."+ul4._lpad(ms.toString(),"0",3)+"000";}}result+=")";return result;};ul4._map_repr=function _map_repr(obj,ascii){var v=[];v.push("{");var i=0;var _iteratorNormalCompletion34=true;var _didIteratorError34=false;var _iteratorError34=undefined;try{for(var _iterator34=obj.entries()[Symbol.iterator](),_step34;!(_iteratorNormalCompletion34=(_step34=_iterator34.next()).done);_iteratorNormalCompletion34=true){var _step34$value=_slicedToArray(_step34.value,2),key=_step34$value[0],value=_step34$value[1];if(i++)v.push(", ");v.push(ul4._repr_internal(key,ascii));v.push(": ");v.push(ul4._repr_internal(value,ascii));}}catch(err){_didIteratorError34=true;_iteratorError34=err;}finally{try{if(!_iteratorNormalCompletion34&&_iterator34.return){_iterator34.return();}}finally{if(_didIteratorError34){throw _iteratorError34;}}}v.push("}");return v.join("");};ul4._list_repr=function _list_repr(obj,ascii){var v=[];v.push("[");var i=0;var _iteratorNormalCompletion35=true;var _didIteratorError35=false;var _iteratorError35=undefined;try{for(var _iterator35=obj[Symbol.iterator](),_step35;!(_iteratorNormalCompletion35=(_step35=_iterator35.next()).done);_iteratorNormalCompletion35=true){var item=_step35.value;if(i++)v.push(", ");v.push(ul4._repr_internal(item,ascii));}}catch(err){_didIteratorError35=true;_iteratorError35=err;}finally{try{if(!_iteratorNormalCompletion35&&_iterator35.return){_iterator35.return();}}finally{if(_didIteratorError35){throw _iteratorError35;}}}v.push("]");return v.join("");};ul4._set_repr=function _set_repr(obj,ascii){var v=[];v.push("{");if(!obj.size)v.push("/");else{var i=0;var _iteratorNormalCompletion36=true;var _didIteratorError36=false;var _iteratorError36=undefined;try{for(var _iterator36=obj[Symbol.iterator](),_step36;!(_iteratorNormalCompletion36=(_step36=_iterator36.next()).done);_iteratorNormalCompletion36=true){var value=_step36.value;if(i++)v.push(", ");v.push(ul4._repr_internal(value,ascii));}}catch(err){_didIteratorError36=true;_iteratorError36=err;}finally{try{if(!_iteratorNormalCompletion36&&_iterator36.return){_iterator36.return();}}finally{if(_didIteratorError36){throw _iteratorError36;}}}}v.push("}");return v.join("");};ul4._object_repr=function _object_repr(obj,ascii){var v=[];v.push("{");var i=0;for(var key in obj){if(!obj.hasOwnProperty(key))continue;if(i++)v.push(", ");v.push(ul4._repr_internal(key,ascii));v.push(": ");v.push(ul4._repr_internal(obj[key],ascii));}v.push("}");return v.join("");};ul4._repr_internal=function _repr_internal(obj,ascii){if(obj===null)return"None";else if(obj===false)return"False";else if(obj===true)return"True";else if(typeof obj==="string")return ul4._str_repr(obj,ascii);else if(typeof obj==="number")return""+obj;else if(typeof obj==="function"){if(obj._ul4_name||obj.name)return"<function "+(obj._ul4_name||obj.name)+">";else return"<anonymous function>";}else if(ul4._isdate(obj))return ul4._date_repr(obj,ascii);else if(ul4._isdatetime(obj))return ul4._datetime_repr(obj,ascii);else if(typeof obj==="undefined")return"<undefined>";else if(typeof obj==="object"&&typeof obj.__repr__==="function")return obj.__repr__();else if(ul4._islist(obj))return ul4._list_repr(obj,ascii);else if(ul4._ismap(obj))return ul4._map_repr(obj,ascii);else if(ul4._isset(obj))return ul4._set_repr(obj,ascii);else if(ul4._isobject(obj))return ul4._object_repr(obj,ascii);return"?";};ul4._repr=function _repr(obj){return ul4._repr_internal(obj,false);};ul4._ascii=function _ascii(obj){return ul4._repr_internal(obj,true);};ul4._date_str=function _date_str(obj){var year=obj._date.getFullYear();var month=obj._date.getMonth()+1;var day=obj._date.getDate();return year+"-"+ul4._lpad(month.toString(),"0",2)+"-"+ul4._lpad(day.toString(),"0",2);};ul4._datetime_str=function _datetime_str(obj){var year=obj.getFullYear();var month=obj.getMonth()+1;var day=obj.getDate();var hour=obj.getHours();var minute=obj.getMinutes();var second=obj.getSeconds();var ms=obj.getMilliseconds();var result=year+"-"+ul4._lpad(month.toString(),"0",2)+"-"+ul4._lpad(day.toString(),"0",2)+" "+ul4._lpad(hour.toString(),"0",2)+":"+ul4._lpad(minute.toString(),"0",2);if(second||ms){result+=":"+ul4._lpad(second.toString(),"0",2);if(ms)result+="."+ul4._lpad(ms.toString(),"0",3)+"000";}return result;};ul4._str=function _str(obj){if(typeof obj==="undefined")return"";else if(obj===null)return"";else if(obj===false)return"False";else if(obj===true)return"True";else if(typeof obj==="string")return obj;else if(typeof obj==="number")return obj.toString();else if(ul4._isdate(obj))return ul4._date_str(obj);else if(ul4._isdatetime(obj))return ul4._datetime_str(obj);else if(ul4._islist(obj))return ul4._list_repr(obj);else if(ul4._isset(obj))return ul4._set_repr(obj);else if(ul4._ismap(obj))return ul4._map_repr(obj);else if(typeof obj==="object"&&typeof obj.__str__==="function")return obj.__str__();else if(typeof obj==="object"&&typeof obj.__repr__==="function")return obj.__repr__();else if(ul4._isobject(obj))return ul4._object_repr(obj);return"?";};ul4._bool=function _bool(obj){if(typeof obj==="undefined"||obj===null||obj===false||obj===0||obj==="")return false;else{if(typeof obj==="object",typeof obj.__bool__==="function")return obj.__bool__();if(ul4._islist(obj))return obj.length!==0;else if(ul4._ismap(obj)||ul4._isset(obj))return obj.size!=0;else if(ul4._isobject(obj)){for(var key in obj){if(!obj.hasOwnProperty(key))continue;return true;}return false;}return true;}};ul4._int=function _int(obj,base){var result=void 0;if(base!==null){if(typeof obj!=="string"||!ul4._isint(base))throw new ul4.TypeError("int() requires a string and an integer");result=parseInt(obj,base);if(result.toString()=="NaN")throw new ul4.TypeError("invalid literal for int()");return result;}else{if(typeof obj=="string"){result=parseInt(obj);if(result.toString()=="NaN")throw new ul4.TypeError("invalid literal for int()");return result;}else if(typeof obj=="number")return Math.floor(obj);else if(obj===true)return 1;else if(obj===false)return 0;throw new ul4.TypeError("int() argument must be a string or a number");}};ul4._float=function _float(obj){if(typeof obj==="string")return parseFloat(obj);else if(typeof obj==="number")return obj;else if(obj===true)return 1.0;else if(obj===false)return 0.0;throw new ul4.TypeError("float() argument must be a string or a number");};ul4._list=function _list(obj){var iter=ul4._iter(obj);var result=[];for(;;){var value=iter.next();if(value.done)return result;result.push(value.value);}};ul4._set=function _set(obj){var iter=ul4._iter(obj);var result=ul4._emptyset();for(;;){var value=iter.next();if(value.done)return result;result.add(value.value);}};ul4._len=function _len(sequence){if(typeof sequence=="string"||ul4._islist(sequence))return sequence.length;else if(ul4._ismap(sequence)||ul4._isset(sequence))return sequence.size;else if(ul4._isobject(sequence)){var i=0;for(var key in sequence){++i;}return i;}throw new ul4.TypeError("object of type '"+ul4._type(sequence)+"' has no len()");};ul4._type=function _type(obj){if(obj===null)return"none";else if(obj===false||obj===true)return"bool";else if(typeof obj==="undefined")return"undefined";else if(typeof obj==="number")return Math.round(obj)==obj?"int":"float";else if(typeof obj==="function")return"function";else{if(typeof obj.ul4type==="function")return obj.ul4type();else return ul4.Protocol.get(obj).ul4type(obj);}};ul4._mod=function _mod(obj1,obj2){var div=Math.floor(obj1/obj2);var mod=obj1-div*obj2;if(mod!==0&&(obj2<0&&mod>0||obj2>0&&mod<0)){mod+=obj2;--div;}return obj1-div*obj2;},ul4._getattr=function _getattr(obj,attrname){var default_=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var proto=ul4.Protocol.get(obj);try{return proto.getattr(obj,attrname);}catch(exc){if(exc instanceof ul4.AttributeError&&exc.obj===obj)return default_;else throw exc;}};ul4._hasattr=function _hasattr(obj,attrname){var proto=ul4.Protocol.get(obj);return proto.hasattr(obj,attrname);};ul4._dir=function _dir(obj){var proto=ul4.Protocol.get(obj);return proto.dir();};ul4._any=function _any(iterable){if(typeof iterable=="string"){var _iteratorNormalCompletion37=true;var _didIteratorError37=false;var _iteratorError37=undefined;try{for(var _iterator37=iterable[Symbol.iterator](),_step37;!(_iteratorNormalCompletion37=(_step37=_iterator37.next()).done);_iteratorNormalCompletion37=true){var c=_step37.value;if(c!=='\x00')return true;}}catch(err){_didIteratorError37=true;_iteratorError37=err;}finally{try{if(!_iteratorNormalCompletion37&&_iterator37.return){_iterator37.return();}}finally{if(_didIteratorError37){throw _iteratorError37;}}}return false;}else{for(var iter=ul4._iter(iterable);;){var item=iter.next();if(item.done)return false;if(ul4._bool(item.value))return true;}}};ul4._all=function _all(iterable){if(typeof iterable=="string"){var _iteratorNormalCompletion38=true;var _didIteratorError38=false;var _iteratorError38=undefined;try{for(var _iterator38=iterable[Symbol.iterator](),_step38;!(_iteratorNormalCompletion38=(_step38=_iterator38.next()).done);_iteratorNormalCompletion38=true){var c=_step38.value;if(c==='\x00')return false;}}catch(err){_didIteratorError38=true;_iteratorError38=err;}finally{try{if(!_iteratorNormalCompletion38&&_iterator38.return){_iterator38.return();}}finally{if(_didIteratorError38){throw _iteratorError38;}}}return true;}else{for(var iter=ul4._iter(iterable);;){var item=iter.next();if(item.done)return true;if(!ul4._bool(item.value))return false;}}};ul4._isundefined=function _isundefined(obj){return typeof obj==="undefined";};ul4._isdefined=function _isdefined(obj){return typeof obj!=="undefined";};ul4._isnone=function _isnone(obj){return obj===null;};ul4._isbool=function _isbool(obj){return typeof obj=="boolean";};ul4._isint=function _isint(obj){return typeof obj=="number"&&Math.round(obj)==obj;};ul4._isfloat=function _isfloat(obj){return typeof obj=="number"&&Math.round(obj)!=obj;};ul4._isstr=function _isstr(obj){return typeof obj=="string";};ul4._isdatetime=function _isdate(obj){return Object.prototype.toString.call(obj)=="[object Date]";};ul4._isdate=function _isdate(obj){return obj instanceof ul4.Date;};ul4._iscolor=function _iscolor(obj){return obj instanceof ul4.Color;};ul4._istimedelta=function _istimedelta(obj){return obj instanceof ul4.TimeDelta;};ul4._ismonthdelta=function _ismonthdelta(obj){return obj instanceof ul4.MonthDelta;};ul4._istemplate=function _istemplate(obj){return obj instanceof ul4.Template||obj instanceof ul4.TemplateClosure;};ul4._isfunction=function _isfunction(obj){return typeof obj==="function"||Object.prototype.toString.call(obj)=="[object Object]"&&(obj instanceof ul4.Template||obj instanceof ul4.TemplateClosure);};ul4._islist=function _islist(obj){return Object.prototype.toString.call(obj)=="[object Array]";};ul4._isset=function _isset(obj){return Object.prototype.toString.call(obj)=="[object Set]";};ul4._isexception=function _isexception(obj){return obj instanceof ul4.Exception;};ul4._isul4set=function _isul4set(obj){return obj instanceof ul4._Set;};ul4._isanyset=function _isanyset(obj){return ul4._isset(obj)||ul4._isul4set(obj);};ul4._isiter=function _isiter(obj){return obj!==null&&typeof obj==="object"&&typeof obj.next==="function";};ul4._isobject=function _isobject(obj){return Object.prototype.toString.call(obj)=="[object Object]"&&typeof obj.__type__==="undefined"&&!(obj instanceof ul4.Proto);};if(ul4._havemap){ul4._ismap=function _ismap(obj){return obj!==null&&typeof obj==="object"&&typeof obj.__proto__==="object"&&obj.__proto__===Map.prototype;};ul4._isdict=function _isdict(obj){return ul4._isobject(obj)||ul4._ismap(obj);};}else{ul4._ismap=function _ismap(obj){return false;};ul4._isdict=function _isdict(obj){return ul4._isobject(obj);};}ul4._str_repeat=function _str_repeat(str,rep){var result="";for(;rep>0;--rep){result+=str;}return result;};ul4._list_repeat=function _list_repeat(list,rep){var result=[];for(;rep>0;--rep){for(var i=0;i<list.length;++i){result.push(list[i]);}}return result;};ul4._str_json=function _str_json(str){var result="";var _iteratorNormalCompletion39=true;var _didIteratorError39=false;var _iteratorError39=undefined;try{for(var _iterator39=str[Symbol.iterator](),_step39;!(_iteratorNormalCompletion39=(_step39=_iterator39.next()).done);_iteratorNormalCompletion39=true){var c=_step39.value;switch(c){case"\r":result+="\\r";break;case"\n":result+="\\n";break;case"\t":result+="\\t";break;case"\\":result+="\\\\";break;case'"':result+='\\"';break;case'<':result+="\\u003c";break;default:var code=c.charCodeAt(0);if(code>=32&&code<128)result+=c;else result+="\\u"+ul4._lpad(code.toString(16),"0",4);break;}}}catch(err){_didIteratorError39=true;_iteratorError39=err;}finally{try{if(!_iteratorNormalCompletion39&&_iterator39.return){_iterator39.return();}}finally{if(_didIteratorError39){throw _iteratorError39;}}}return'"'+result+'"';};ul4._asjson=function _asjson(obj){if(obj===null)return"null";else if(typeof obj==="undefined")return"undefined";else if(obj===false)return"false";else if(obj===true)return"true";else if(typeof obj==="string")return ul4._str_json(obj);else if(typeof obj==="number"){return""+obj;}else if(ul4._islist(obj)){var v=[];v.push("[");for(var i=0;i<obj.length;++i){if(i!=0)v.push(", ");v.push(ul4._asjson(obj[i]));}v.push("]");return v.join("");}else if(ul4._ismap(obj)){var _v2=[];_v2.push("{");var _i=0;var _iteratorNormalCompletion40=true;var _didIteratorError40=false;var _iteratorError40=undefined;try{for(var _iterator40=obj.entries()[Symbol.iterator](),_step40;!(_iteratorNormalCompletion40=(_step40=_iterator40.next()).done);_iteratorNormalCompletion40=true){var _step40$value=_slicedToArray(_step40.value,2),key=_step40$value[0],value=_step40$value[1];if(_i++)_v2.push(", ");_v2.push(ul4._asjson(key));_v2.push(": ");_v2.push(ul4._asjson(value));}}catch(err){_didIteratorError40=true;_iteratorError40=err;}finally{try{if(!_iteratorNormalCompletion40&&_iterator40.return){_iterator40.return();}}finally{if(_didIteratorError40){throw _iteratorError40;}}}_v2.push("}");return _v2.join("");}else if(ul4._isobject(obj)){var _v3=[];_v3.push("{");var _i2=0;for(var _key13 in obj){if(_i2++)_v3.push(", ");_v3.push(ul4._asjson(_key13));_v3.push(": ");_v3.push(ul4._asjson(obj[_key13]));}_v3.push("}");return _v3.join("");}else if(ul4._isdate(obj)){return"new ul4.Date("+obj._date.getFullYear()+", "+(obj._date.getMonth()+1)+", "+obj._date.getDate()+")";}else if(ul4._isdatetime(obj)){return"new Date("+obj.getFullYear()+", "+obj.getMonth()+", "+obj.getDate()+", "+obj.getHours()+", "+obj.getMinutes()+", "+obj.getSeconds()+", "+obj.getMilliseconds()+")";}else if(ul4._istimedelta(obj)){return"new ul4.TimeDelta("+obj._days+", "+obj._seconds+", "+obj._microseconds+")";}else if(ul4._ismonthdelta(obj)){return"new ul4.MonthDelta("+obj._months+")";}else if(ul4._iscolor(obj)){return"new ul4.Color("+obj._r+", "+obj._g+", "+obj._b+", "+obj._a+")";}else if(ul4._istemplate(obj)){return"ul4.Template.loads("+ul4._repr(obj.dumps())+")";}throw new ul4.TypeError("asjson() requires a serializable object");};ul4._fromjson=function _fromjson(string){string=ul4.StrProtocol.strip(string);if(root.JSON&&root.JSON.parse)return root.JSON.parse(string);if(ul4._rvalidchars.test(string.replace(ul4._rvalidescape,"@").replace(ul4._rvalidtokens,"]").replace(ul4._rvalidbraces,"")))return new Function("return "+string)();throw new ul4.TypeError("invalid JSON");};ul4._asul4on=function _asul4on(obj){return ul4.dumps(obj);};ul4._fromul4on=function _fromul4on(string){return ul4.loads(string);};ul4._format_datetime=function _format_datetime(obj,fmt,lang){var translations={de:{ms:["Jan","Feb","M\xE4r","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],ml:["Januar","Februar","M\xE4rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],ws:["So","Mo","Di","Mi","Do","Fr","Sa"],wl:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],xf:"%d.%m.%Y",Xf:"%H:%M:%S",cf:"%a %d %b %Y %H:%M:%S"},en:{ms:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ml:["January","February","March","April","May","June","July","August","September","October","November","December"],ws:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wl:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],xf:"%m/%d/%Y",Xf:"%H:%M:%S",cf:"%a %d %b %Y %I:%M:%S %p"},fr:{ms:["janv.","f\xE9vr.","mars","avril","mai","juin","juil.","ao\xFBt","sept.","oct.","nov.","d\xE9c."],ml:["janvier","f\xE9vrier","mars","avril","mai","juin","juillet","ao\xFBt","septembre","octobre","novembre","d\xE9cembre"],ws:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wl:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],xf:"%d/%m/%Y",Xf:"%H:%M:%S",cf:"%a %d %b %Y %H:%M:%S"},es:{ms:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],ml:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],ws:["dom","lun","mar","mi\xE9","jue","vie","s\xE1b"],wl:["domingo","lunes","martes","mi\xE9rcoles","jueves","viernes","s\xE1bado"],xf:"%d/%m/%y",Xf:"%H:%M:%S",cf:"%a %d %b %Y %H:%M:%S"},it:{ms:["gen","feb","mar","apr","mag","giu","lug","ago","set","ott","nov","dic"],ml:["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre"],ws:["dom","lun","mar","mer","gio","ven","sab"],wl:["domenica","luned\xEC","marted\xEC","mercoled\xEC","gioved\xEC","venerd\xEC","sabato"],xf:"%d/%m/%Y",Xf:"%H:%M:%S",cf:"%a %d %b %Y %H:%M:%S"},da:{ms:["jan","feb","mar","apr","maj","jun","jul","aug","sep","okt","nov","dec"],ml:["januar","februar","marts","april","maj","juni","juli","august","september","oktober","november","december"],ws:["s\xF8n","man","tir","ons","tor","fre","l\xF8r"],wl:["s\xF8ndag","mandag","tirsdag","onsdag","torsdag","fredag","l\xF8rdag"],xf:"%d-%m-%Y",Xf:"%H:%M:%S",cf:"%a %d %b %Y %H:%M:%S"},sv:{ms:["jan","feb","mar","apr","maj","jun","jul","aug","sep","okt","nov","dec"],ml:["januari","februari","mars","april","maj","juni","juli","augusti","september","oktober","november","december"],ws:["s\xF6n","m\xE5n","tis","ons","tor","fre","l\xF6r"],wl:["s\xF6ndag","m\xE5ndag","tisdag","onsdag","torsdag","fredag","l\xF6rdag"],xf:"%Y-%m-%d",Xf:"%H.%M.%S",cf:"%a %d %b %Y %H.%M.%S"},nl:{ms:["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec"],ml:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],ws:["zo","ma","di","wo","do","vr","za"],wl:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],xf:"%d-%m-%y",Xf:"%H:%M:%S",cf:"%a %d %b %Y %H:%M:%S"},pt:{ms:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],ml:["Janeiro","Fevereiro","Mar\xE7o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],ws:["Dom","Seg","Ter","Qua","Qui","Sex","S\xE1b"],wl:["Domingo","Segunda","Ter\xE7a","Quarta","Quinta","Sexta","S\xE1bado"],xf:"%d-%m-%Y",Xf:"%H:%M:%S",cf:"%a %d %b %Y %H:%M:%S"},cs:{ms:["led","\xFAno","b\u0159e","dub","kv\u011B","\u010Den","\u010Dec","srp","z\xE1\u0159","\u0159\xEDj","lis","pro"],ml:["leden","\xFAnor","b\u0159ezen","duben","kv\u011Bten","\u010Derven","\u010Dervenec","srpen","z\xE1\u0159\xED","\u0159\xEDjen","listopad","prosinec"],ws:["Ne","Po","\xDAt","St","\u010Ct","P\xE1","So"],wl:["Ned\u011Ble","Pond\u011Bl\xED","\xDAter\xFD","St\u0159eda","\u010Ctvrtek","P\xE1tek","Sobota"],xf:"%d.%m.%Y",Xf:"%H:%M:%S",cf:"%a\xA0%d.\xA0%B\xA0%Y,\xA0%H:%M:%S"},sk:{ms:["jan","feb","mar","apr","m\xE1j","j\xFAn","j\xFAl","aug","sep","okt","nov","dec"],ml:["janu\xE1r","febru\xE1r","marec","apr\xEDl","m\xE1j","j\xFAn","j\xFAl","august","september","okt\xF3ber","november","december"],ws:["Ne","Po","Ut","St","\u0160t","Pi","So"],wl:["Nede\u013Ea","Pondelok","Utorok","Streda","\u0160tvrtok","Piatok","Sobota"],xf:"%d.%m.%Y",Xf:"%H:%M:%S",cf:"%a\xA0%d.\xA0%B\xA0%Y,\xA0%H:%M:%S"},pl:{ms:["sty","lut","mar","kwi","maj","cze","lip","sie","wrz","pa\u017A","lis","gru"],ml:["stycze\u0144","luty","marzec","kwiecie\u0144","maj","czerwiec","lipiec","sierpie\u0144","wrzesie\u0144","pa\u017Adziernik","listopad","grudzie\u0144"],ws:["nie","pon","wto","\u015Bro","czw","pi\u0105","sob"],wl:["niedziela","poniedzia\u0142ek","wtorek","\u015Broda","czwartek","pi\u0105tek","sobota"],xf:"%d.%m.%Y",Xf:"%H:%M:%S",cf:"%a, %d %b %Y, %H:%M:%S"},hr:{ms:["Sij","Vel","O\u017Eu","Tra","Svi","Lip","Srp","Kol","Ruj","Lis","Stu","Pro"],ml:["Sije\u010Danj","Velja\u010Da","O\u017Eujak","Travanj","Svibanj","Lipanj","Srpanj","Kolovoz","Rujan","Listopad","Studeni","Prosinac"],ws:["Ned","Pon","Uto","Sri","\u010Cet","Pet","Sub"],wl:["Nedjelja","Ponedjeljak","Utorak","Srijeda","\u010Cetvrtak","Petak","Subota"],xf:"%d.%m.%Y",Xf:"%H:%M:%S",cf:"%a %d %b %Y %H:%M:%S"},sr:{ms:["\u0458\u0430\u043D","\u0444\u0435\u0431","\u043C\u0430\u0440","\u0430\u043F\u0440","\u043C\u0430\u0458","\u0458\u0443\u043D","\u0458\u0443\u043B","\u0430\u0432\u0433","\u0441\u0435\u043F","\u043E\u043A\u0442","\u043D\u043E\u0432","\u0434\u0435\u0446"],ml:["\u0458\u0430\u043D\u0443\u0430\u0440","\u0444\u0435\u0431\u0440\u0443\u0430\u0440","\u043C\u0430\u0440\u0442","\u0430\u043F\u0440\u0438\u043B","\u043C\u0430\u0458","\u0458\u0443\u043D","\u0458\u0443\u043B","\u0430\u0432\u0433\u0443\u0441\u0442","\u0441\u0435\u043F\u0442\u0435\u043C\u0431\u0430\u0440","\u043E\u043A\u0442\u043E\u0431\u0430\u0440","\u043D\u043E\u0432\u0435\u043C\u0431\u0430\u0440","\u0434\u0435\u0446\u0435\u043C\u0431\u0430\u0440"],ws:["\u043D\u0435\u0434","\u043F\u043E\u043D","\u0443\u0442\u043E","\u0441\u0440\u0435","\u0447\u0435\u0442","\u043F\u0435\u0442","\u0441\u0443\u0431"],wl:["\u043D\u0435\u0434\u0435\u0459\u0430","\u043F\u043E\u043D\u0435\u0434\u0435\u0459\u0430\u043A","\u0443\u0442\u043E\u0440\u0430\u043A","\u0441\u0440\u0435\u0434\u0430","\u0447\u0435\u0442\u0432\u0440\u0442\u0430\u043A","\u043F\u0435\u0442\u0430\u043A","\u0441\u0443\u0431\u043E\u0442\u0430"],xf:"%d.%m.%Y.",Xf:"%H:%M:%S",cf:"%A, %d. %B %Y. %H:%M:%S"},ro:{ms:["ian","feb","mar","apr","mai","iun","iul","aug","sep","oct","nov","dec"],ml:["ianuarie","februarie","martie","aprilie","mai","iunie","iulie","august","septembrie","octombrie","noiembrie","decembrie"],ws:["Du","Lu","Ma","Mi","Jo","Vi","Sb"],wl:["duminic\u0103","luni","mar\u0163i","miercuri","joi","vineri","s\xE2mb\u0103t\u0103"],xf:"%d.%m.%Y",Xf:"%H:%M:%S",cf:"%a %d %b %Y %H:%M:%S"},hu:{ms:["jan","febr","m\xE1rc","\xE1pr","m\xE1j","j\xFAn","j\xFAl","aug","szept","okt","nov","dec"],ml:["janu\xE1r","febru\xE1r","m\xE1rcius","\xE1prilis","m\xE1jus","j\xFAnius","j\xFAlius","augusztus","szeptember","okt\xF3ber","november","december"],ws:["v","h","k","sze","cs","p","szo"],wl:["vas\xE1rnap","h\xE9tf\u0151","kedd","szerda","cs\xFCt\xF6rt\xF6k","p\xE9ntek","szombat"],xf:"%Y-%m-%d",Xf:"%H.%M.%S",cf:"%Y. %b. %d., %A, %H.%M.%S"},tr:{ms:["Oca","\u015Eub","Mar","Nis","May","Haz","Tem","A\u011Fu","Eyl","Eki","Kas","Ara"],ml:["Ocak","\u015Eubat","Mart","Nisan","May\u0131s","Haziran","Temmuz","A\u011Fustos","Eyl\xFCl","Ekim","Kas\u0131m","Aral\u0131k"],ws:["Paz","Pzt","Sal","\xC7r\u015F","Pr\u015F","Cum","Cts"],wl:["Pazar","Pazartesi","Sal\u0131","\xC7ar\u015Famba","Per\u015Fembe","Cuma","Cumartesi"],xf:"%d-%m-%Y",Xf:"%H:%M:%S",cf:"%a %d %b %Y %H:%M:%S"},ru:{ms:["\u042F\u043D\u0432","\u0424\u0435\u0432","\u041C\u0430\u0440","\u0410\u043F\u0440","\u041C\u0430\u0439","\u0418\u044E\u043D","\u0418\u044E\u043B","\u0410\u0432\u0433","\u0421\u0435\u043D","\u041E\u043A\u0442","\u041D\u043E\u044F","\u0414\u0435\u043A"],ml:["\u042F\u043D\u0432\u0430\u0440\u044C","\u0424\u0435\u0432\u0440\u0430\u043B\u044C","\u041C\u0430\u0440\u0442","\u0410\u043F\u0440\u0435\u043B\u044C","\u041C\u0430\u0439","\u0418\u044E\u043D\u044C","\u0418\u044E\u043B\u044C","\u0410\u0432\u0433\u0443\u0441\u0442","\u0421\u0435\u043D\u0442\u044F\u0431\u0440\u044C","\u041E\u043A\u0442\u044F\u0431\u0440\u044C","\u041D\u043E\u044F\u0431\u0440\u044C","\u0414\u0435\u043A\u0430\u0431\u0440\u044C"],ws:["\u0412\u0441\u043A","\u041F\u043D\u0434","\u0412\u0442\u0440","\u0421\u0440\u0434","\u0427\u0442\u0432","\u041F\u0442\u043D","\u0421\u0431\u0442"],wl:["\u0412\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u0435","\u041F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A","\u0412\u0442\u043E\u0440\u043D\u0438\u043A","\u0421\u0440\u0435\u0434\u0430","\u0427\u0435\u0442\u0432\u0435\u0440\u0433","\u041F\u044F\u0442\u043D\u0438\u0446\u0430","\u0421\u0443\u0431\u0431\u043E\u0442\u0430"],xf:"%d.%m.%Y",Xf:"%H:%M:%S",cf:"%a %d %b %Y %H:%M:%S"},zh:{ms:[" 1\u6708"," 2\u6708"," 3\u6708"," 4\u6708"," 5\u6708"," 6\u6708"," 7\u6708"," 8\u6708"," 9\u6708","10\u6708","11\u6708","12\u6708"],ml:["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"],ws:["\u65E5","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D"],wl:["\u661F\u671F\u65E5","\u661F\u671F\u4E00","\u661F\u671F\u4E8C","\u661F\u671F\u4E09","\u661F\u671F\u56DB","\u661F\u671F\u4E94","\u661F\u671F\u516D"],xf:"%Y\u5E74%b%d\u65E5",Xf:"%H\u65F6%M\u5206%S\u79D2",cf:"%Y\u5E74%b%d\u65E5 %A %H\u65F6%M\u5206%S\u79D2"},ko:{ms:[" 1\uC6D4"," 2\uC6D4"," 3\uC6D4"," 4\uC6D4"," 5\uC6D4"," 6\uC6D4"," 7\uC6D4"," 8\uC6D4"," 9\uC6D4","10\uC6D4","11\uC6D4","12\uC6D4"],ml:["1\uC6D4","2\uC6D4","3\uC6D4","4\uC6D4","5\uC6D4","6\uC6D4","7\uC6D4","8\uC6D4","9\uC6D4","10\uC6D4","11\uC6D4","12\uC6D4"],ws:["\uC77C","\uC6D4","\uD654","\uC218","\uBAA9","\uAE08","\uD1A0"],wl:["\uC77C\uC694\uC77C","\uC6D4\uC694\uC77C","\uD654\uC694\uC77C","\uC218\uC694\uC77C","\uBAA9\uC694\uC77C","\uAE08\uC694\uC77C","\uD1A0\uC694\uC77C"],xf:"%Y\uB144 %B %d\uC77C",Xf:"%H\uC2DC %M\uBD84 %S\uCD08",cf:"%Y\uB144 %B %d\uC77C (%a) %p %I\uC2DC %M\uBD84 %S\uCD08"},ja:{ms:[" 1\u6708"," 2\u6708"," 3\u6708"," 4\u6708"," 5\u6708"," 6\u6708"," 7\u6708"," 8\u6708"," 9\u6708","10\u6708","11\u6708","12\u6708"],ml:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],ws:["\u65E5","\u6708","\u706B","\u6C34","\u6728","\u91D1","\u571F"],wl:["\u65E5\u66DC\u65E5","\u6708\u66DC\u65E5","\u706B\u66DC\u65E5","\u6C34\u66DC\u65E5","\u6728\u66DC\u65E5","\u91D1\u66DC\u65E5","\u571F\u66DC\u65E5"],xf:"%Y\u5E74%B%d\u65E5",Xf:"%H\u6642%M\u5206%S\u79D2",cf:"%Y\u5E74%B%d\u65E5 %H\u6642%M\u5206%S\u79D2"}};var translation=translations[lang];var result=[];var inspec=false;var _iteratorNormalCompletion41=true;var _didIteratorError41=false;var _iteratorError41=undefined;try{for(var _iterator41=fmt[Symbol.iterator](),_step41;!(_iteratorNormalCompletion41=(_step41=_iterator41.next()).done);_iteratorNormalCompletion41=true){var c=_step41.value;if(inspec){switch(c){case"a":c=translation.ws[obj.getDay()];break;case"A":c=translation.wl[obj.getDay()];break;case"b":c=translation.ms[obj.getMonth()];break;case"B":c=translation.ml[obj.getMonth()];break;case"c":c=ul4._format(obj,translation.cf,lang);break;case"d":c=ul4._lpad(obj.getDate(),"0",2);break;case"f":c=ul4._lpad(obj.getMilliseconds(),"0",3)+"000";break;case"H":c=ul4._lpad(obj.getHours(),"0",2);break;case"I":c=ul4._lpad((obj.getHours()-1)%12+1,"0",2);break;case"j":c=ul4._lpad(ul4.DateTimeProtocol.yearday(obj),"0",3);break;case"m":c=ul4._lpad(obj.getMonth()+1,"0",2);break;case"M":c=ul4._lpad(obj.getMinutes(),"0",2);break;case"p":c=obj.getHours()<12?"AM":"PM";break;case"S":c=ul4._lpad(obj.getSeconds(),"0",2);break;case"U":c=ul4._lpad(ul4._week4format(obj,6),"0",2);break;case"w":c=obj.getDay();break;case"W":c=ul4._lpad(ul4._week4format(obj,0),"0",2);break;case"x":c=ul4._format(obj,translation.xf,lang);break;case"X":c=ul4._format(obj,translation.Xf,lang);break;case"y":c=(obj.getFullYear()%100).toString();break;case"Y":c=obj.getFullYear().toString();break;case"z":c="";break;case"Z":c="";break;}result.push(c);inspec=false;}else{if(c=="%")inspec=true;else result.push(c);}}}catch(err){_didIteratorError41=true;_iteratorError41=err;}finally{try{if(!_iteratorNormalCompletion41&&_iterator41.return){_iterator41.return();}}finally{if(_didIteratorError41){throw _iteratorError41;}}}return result.join("");};ul4._format_int=function _format_int(obj,fmt,lang){var work=fmt;var fill=' ';var align='>';var sign='-';var alternate=false;var minimumwidth=0;var type='d';if(/[bcdoxXn]$/.test(work)){type=work.substring(work.length-1);work=work.substring(0,work.length-1);}if(/\d+$/.test(work)){var minimumwidthStr=/\d+$/.exec(work);work=work.replace(/\d+$/,"");if(/^0/.test(minimumwidthStr)){align='=';fill='0';}minimumwidth=parseInt(minimumwidthStr);}if(/#$/.test(work)){alternate=true;work=work.substring(0,work.length-1);}if(/[+ -]$/.test(work)){if(type=='c')throw new ul4.ValueError("sign not allowed for integer format type 'c'");sign=work.substring(work.length-1);work=work.substring(0,work.length-1);}if(work.length>=3)throw new ul4.ValueError("illegal integer format string "+ul4._repr(fmt));else if(work.length==2){if(/[<>=^]$/.test(work)){align=work[1];fill=work[0];}else throw new ul4.ValueError("illegal integer format string "+ul4._repr(fmt));}else if(work.length==1){if(/^[<>=^]$/.test(work))align=work;else throw new ul4.ValueError("illegal integer format string "+ul4._repr(fmt));}var neg=obj<0;if(neg)obj=-obj;var output=void 0;switch(type){case'b':output=obj.toString(2);break;case'c':if(neg||obj>65535)throw new ul4.ValueError("value out of bounds for c format");output=String.fromCharCode(obj);break;case'd':output=obj.toString();break;case'o':output=obj.toString(8);break;case'x':output=obj.toString(16);break;case'X':output=obj.toString(16).toUpperCase();break;case'n':output=obj.toString();break;}if(align==='='){if(neg||sign!=='-')--minimumwidth;if(alternate&&(type==='b'||type==='o'||type==='x'||type==='X'))minimumwidth-=2;if(output.length<minimumwidth)output=ul4._str_repeat(fill,minimumwidth-output.length)+output;if(alternate&&(type==='b'||type==='o'||type==='x'||type==='X'))output="0"+type+output;if(neg)output="-"+output;else if(sign!='-')output=sign+output;}else{if(alternate&&(type=='b'||type=='o'||type=='x'||type=='X'))output="0"+type+output;if(neg)output="-"+output;else if(sign!='-')output=sign+output;if(output.length<minimumwidth){if(align=='<')output=output+ul4._str_repeat(fill,minimumwidth-output.length);else if(align=='>')output=ul4._str_repeat(fill,minimumwidth-output.length)+output;else{var pad=minimumwidth-output.length;var padBefore=Math.floor(pad/2);var padAfter=pad-padBefore;output=ul4._str_repeat(fill,padBefore)+output+ul4._str_repeat(fill,padAfter);}}}return output;};ul4._format=function _format(obj,fmt,lang){if(typeof lang==="undefined"||lang===null)lang="en";else{var translations={de:null,en:null,fr:null,es:null,it:null,da:null,sv:null,nl:null,pt:null,cs:null,sk:null,pl:null,hr:null,sr:null,ro:null,hu:null,tr:null,ru:null,zh:null,ko:null,ja:null};lang=lang.toLowerCase();if(typeof translations[lang]==="undefined"){lang=lang.split(/_/)[0];if(typeof translations[lang]==="undefined")lang="en";}}if(ul4._isdate(obj))return ul4._format_datetime(obj._date,fmt,lang);if(ul4._isdatetime(obj))return ul4._format_datetime(obj,fmt,lang);else if(ul4._isint(obj))return ul4._format_int(obj,fmt,lang);else if(obj===true)return ul4._format_int(1,fmt,lang);else if(obj===false)return ul4._format_int(0,fmt,lang);};ul4._lpad=function _lpad(string,pad,len){if(typeof string==="number")string=string.toString();while(string.length<len){string=pad+string;}return string;};ul4._rpad=function _rpad(string,pad,len){if(typeof string==="number")string=string.toString();while(string.length<len){string=string+pad;}return string;};var _nextid=1;ul4.Proto=function(){function Proto(){_classCallCheck(this,Proto);this.__id__=_nextid++;}_createClass(Proto,[{key:"ul4type",value:function ul4type(){return this.constructor.name;}},{key:"__eq__",value:function __eq__(other){return this===other;}},{key:"__ne__",value:function __ne__(other){return!this.__eq__(other);}},{key:"__bool__",value:function __bool__(){return true;}}]);return Proto;}();ul4.Signature=function(_ul4$Proto){_inherits(Signature,_ul4$Proto);function Signature(){_classCallCheck(this,Signature);var _this=_possibleConstructorReturn(this,(Signature.__proto__||Object.getPrototypeOf(Signature)).call(this));_this.args=[];_this.argNames={};_this.remargs=null;_this.remkwargs=null;var nextDefault=false;var lastArgname=null;for(var _len6=arguments.length,args=Array(_len6),_key14=0;_key14<_len6;_key14++){args[_key14]=arguments[_key14];}var _iteratorNormalCompletion42=true;var _didIteratorError42=false;var _iteratorError42=undefined;try{for(var _iterator42=args[Symbol.iterator](),_step42;!(_iteratorNormalCompletion42=(_step42=_iterator42.next()).done);_iteratorNormalCompletion42=true){var argName=_step42.value;if(nextDefault){_this.args.push({name:lastArgname,defaultValue:argName});_this.argNames[lastArgname]=true;nextDefault=false;}else{if(argName.substr(argName.length-1)==="="){lastArgname=argName.substr(0,argName.length-1);nextDefault=true;}else if(argName.substr(0,2)==="**")_this.remkwargs=argName.substr(2);else if(argName.substr(0,1)==="*")_this.remargs=argName.substr(1);else{_this.args.push({name:argName});_this.argNames[argName]=true;}}}}catch(err){_didIteratorError42=true;_iteratorError42=err;}finally{try{if(!_iteratorNormalCompletion42&&_iterator42.return){_iterator42.return();}}finally{if(_didIteratorError42){throw _iteratorError42;}}}return _this;}_createClass(Signature,[{key:"bindArray",value:function bindArray(name,args,kwargs){var finalargs=[];var decname=name!==null?name+"() ":"";for(var i=0;i<this.args.length;++i){var arg=this.args[i];if(i<args.length){if(kwargs.hasOwnProperty(arg.name))throw new ul4.ArgumentError(decname+"argument "+ul4._repr(arg.name)+" (position "+i+") specified multiple times");finalargs.push(args[i]);}else{if(kwargs.hasOwnProperty(arg.name))finalargs.push(kwargs[arg.name]);else{if(arg.hasOwnProperty("defaultValue"))finalargs.push(arg.defaultValue);else throw new ul4.ArgumentError("required "+decname+"argument "+ul4._repr(arg.name)+" (position "+i+") missing");}}}if(this.remargs===null){if(args.length>this.args.length){var prefix=name===null?"expected":name+"() expects";throw new ul4.ArgumentError(prefix+" at most "+this.args.length+" positional argument"+(this.args.length!=1?"s":"")+", "+args.length+" given");}}else{finalargs.push(args.slice(this.args.length));}if(this.remkwargs===null){for(var key in kwargs){if(!this.argNames[key]){if(name===null)throw new ul4.ArgumentError("an argument named "+ul4._repr(key)+" isn't supported");else throw new ul4.ArgumentError(name+"() doesn't support an argument named "+ul4._repr(key));}}}else{var remkwargs=ul4._emptymap();for(var _key15 in kwargs){if(!this.argNames[_key15])ul4._setmap(remkwargs,_key15,kwargs[_key15]);}finalargs.push(remkwargs);}return finalargs;}},{key:"bindObject",value:function bindObject(name,args,kwargs){args=this.bindArray(name,args,kwargs);var argObject={};var i=void 0;for(i=0;i<this.args.length;++i){argObject[this.args[i].name]=args[i];}if(this.remargs!==null)argObject[this.remargs]=args[i++];if(this.remkwargs!==null)argObject[this.remkwargs]=args[i++];return argObject;}},{key:"__repr__",value:function __repr__(){return"<Signature "+this.toString()+">";}},{key:"__str__",value:function __str__(){return this.toString();}},{key:"toString",value:function toString(){var v=[];var _iteratorNormalCompletion43=true;var _didIteratorError43=false;var _iteratorError43=undefined;try{for(var _iterator43=this.args[Symbol.iterator](),_step43;!(_iteratorNormalCompletion43=(_step43=_iterator43.next()).done);_iteratorNormalCompletion43=true){var arg=_step43.value;if(arg.hasOwnProperty("defaultValue"))v.push(arg.name+"="+ul4._repr(arg.defaultValue));else v.push(arg.name);}}catch(err){_didIteratorError43=true;_iteratorError43=err;}finally{try{if(!_iteratorNormalCompletion43&&_iterator43.return){_iterator43.return();}}finally{if(_didIteratorError43){throw _iteratorError43;}}}if(this.remargs!==null)v.push("*"+this.remargs);if(this.remkwargs!==null)v.push("**"+this.remkwargs);return"("+v.join(", ")+")";}}]);return Signature;}(ul4.Proto);ul4._Set=function(){function _Set(){_classCallCheck(this,_Set);this.items={};this.add.apply(this,arguments);}_createClass(_Set,[{key:"add",value:function add(){for(var _len7=arguments.length,items=Array(_len7),_key16=0;_key16<_len7;_key16++){items[_key16]=arguments[_key16];}var _iteratorNormalCompletion44=true;var _didIteratorError44=false;var _iteratorError44=undefined;try{for(var _iterator44=items[Symbol.iterator](),_step44;!(_iteratorNormalCompletion44=(_step44=_iterator44.next()).done);_iteratorNormalCompletion44=true){var item=_step44.value;this.items[item]=true;}}catch(err){_didIteratorError44=true;_iteratorError44=err;}finally{try{if(!_iteratorNormalCompletion44&&_iterator44.return){_iterator44.return();}}finally{if(_didIteratorError44){throw _iteratorError44;}}}}},{key:"clear",value:function clear(){this.items={};}},{key:"__getattr__",value:function __getattr__(attrname){var self=this;switch(attrname){case"add":return ul4.expose(function add(items){self.add.apply(self,_toConsumableArray(items));},["*items"]);default:throw new ul4.AttributeError(this,attrname);}}},{key:"__contains__",value:function __contains__(item){return this.items[item]||false;}},{key:"has",value:function has(item){return this.items[item]||false;}},{key:"__bool__",value:function __bool__(){for(var item in this.items){if(!this.items.hasOwnProperty(item))continue;return true;}return false;}},{key:"__repr__",value:function __repr__(){var v=[];v.push("{");var i=0;for(var item in this.items){if(!this.items.hasOwnProperty(item))continue;if(i++)v.push(", ");v.push(ul4._repr(item));}if(!i)v.push("/");v.push("}");return v.join("");}},{key:"__eq__",value:function __eq__(other){if(ul4._isset(other)){var count=0;for(var item in this.items){if(!other.has(item))return false;++count;}return other.size==count;}else if(ul4._isul4set(other)){var _count2=0;for(var _item3 in this.items){if(!other[_item3])return false;++_count2;}for(var _item4 in other.items){--_count2;}return _count2==0;}else return false;}},{key:"__le__",value:function __le__(other){if(ul4._isset(other)){var count=0;for(var item in this.items){if(!other.has(item))return false;}return true;}else if(ul4._isul4set(other)){var _count3=0;for(var _item5 in this.items){if(!other.items[_item5])return false;}return true;}else ul4._unorderable("<",this,other);}},{key:"__ge__",value:function __ge__(other){if(ul4._isset(other)){var _iteratorNormalCompletion45=true;var _didIteratorError45=false;var _iteratorError45=undefined;try{for(var _iterator45=other[Symbol.iterator](),_step45;!(_iteratorNormalCompletion45=(_step45=_iterator45.next()).done);_iteratorNormalCompletion45=true){var value=_step45.value;if(!this.items[value])return false;}}catch(err){_didIteratorError45=true;_iteratorError45=err;}finally{try{if(!_iteratorNormalCompletion45&&_iterator45.return){_iterator45.return();}}finally{if(_didIteratorError45){throw _iteratorError45;}}}return true;}else if(ul4._isul4set(other)){var count=0;for(var item in other.items){if(!this.items[item])return false;}return true;}else ul4._unorderable("<=",this,other);}}]);return _Set;}();ul4._Set.prototype.__type__="set";ul4.expose=function expose(f,signature,options){options=options||{};if(options.name)f._ul4_name=options.name;if(ul4._islist(signature))signature=new(Function.prototype.bind.apply(ul4.Signature,[null].concat(_toConsumableArray(signature))))();f._ul4_signature=signature;f._ul4_needsobject=options.needsobject||false;f._ul4_needscontext=options.needscontext||false;};ul4.Protocol=function(){function Protocol(){_classCallCheck(this,Protocol);}_createClass(Protocol,[{key:"ul4type",value:function ul4type(){return this.constructor.name;}},{key:"dir",value:function dir(){return this.attrs;}},{key:"get",value:function get(obj){if(ul4._isstr(obj))return ul4.StrProtocol;else if(ul4._islist(obj))return ul4.ListProtocol;else if(ul4._isdate(obj))return ul4.DateProtocol;else if(ul4._isset(obj))return ul4.SetProtocol;else if(ul4._ismap(obj))return ul4.MapProtocol;else if(ul4._isdatetime(obj))return ul4.DateTimeProtocol;else if(ul4._isobject(obj))return ul4.ObjectProtocol;else return ul4.Protocol;}},{key:"getattr",value:function getattr(obj,attrname){if(obj===null||typeof obj==="undefined")throw new ul4.AttributeError(obj,attrname);else if(typeof obj.__getattr__==="function")return obj.__getattr__(attrname);else if(this.attrs.has(attrname)){var attr=this[attrname];var realattr=function realattr(){for(var _len8=arguments.length,args=Array(_len8),_key17=0;_key17<_len8;_key17++){args[_key17]=arguments[_key17];}return attr.apply(this,[obj].concat(args));};realattr.name=attr.name;realattr._ul4_name=attr._ul4_name||attr.name;realattr._ul4_signature=attr._ul4_signature;realattr._ul4_needsobject=attr._ul4_needsobject;realattr._ul4_needscontext=attr._ul4_needscontext;return realattr;}else throw new ul4.AttributeError(obj,attrname);}},{key:"hasattr",value:function hasattr(obj,attrname){if(obj===null||typeof obj==="undefined")return false;else if(typeof obj.__getattr__==="function"){try{obj.__getattr__(attrname);return true;}catch(exc){if(exc instanceof ul4.AttributeError&&exc.obj===object)return false;else throw exc;}}else return this.attrs.has(attrname);}}]);return Protocol;}();ul4.Protocol=ul4.Protocol.prototype;ul4.Protocol.attrs=ul4._emptyset();ul4.StrProtocol=function(_ul4$Protocol$constru){_inherits(StrProtocol,_ul4$Protocol$constru);function StrProtocol(){_classCallCheck(this,StrProtocol);return _possibleConstructorReturn(this,(StrProtocol.__proto__||Object.getPrototypeOf(StrProtocol)).apply(this,arguments));}_createClass(StrProtocol,[{key:"ul4type",value:function ul4type(obj){return"str";}},{key:"count",value:function count(obj,sub){var start=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var end=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;return ul4._count(obj,sub,start,end);}},{key:"find",value:function find(obj,sub){var start=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var end=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;return ul4._find(obj,sub,start,end);}},{key:"rfind",value:function rfind(obj,sub){var start=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var end=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;return ul4._rfind(obj,sub,start,end);}},{key:"replace",value:function replace(obj,old,new_){var count=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;if(count===null)count=obj.length;var result=[];while(obj.length){var _pos=obj.indexOf(old);if(_pos===-1||!count--){result.push(obj);break;}result.push(obj.substr(0,_pos));result.push(new_);obj=obj.substr(_pos+old.length);}return result.join("");}},{key:"strip",value:function strip(obj){var chars=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;chars=chars||" \r\n\t";if(typeof chars!=="string")throw new ul4.TypeError("strip() requires a string argument");while(obj&&chars.indexOf(obj[0])>=0){obj=obj.substr(1);}while(obj&&chars.indexOf(obj[obj.length-1])>=0){obj=obj.substr(0,obj.length-1);}return obj;}},{key:"lstrip",value:function lstrip(obj){var chars=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;chars=chars||" \r\n\t";if(typeof chars!=="string")throw new ul4.TypeError("lstrip() requires a string argument");while(obj&&chars.indexOf(obj[0])>=0){obj=obj.substr(1);}return obj;}},{key:"rstrip",value:function rstrip(obj){var chars=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;chars=chars||" \r\n\t";if(typeof chars!=="string")throw new ul4.TypeError("rstrip() requires a string argument");while(obj&&chars.indexOf(obj[obj.length-1])>=0){obj=obj.substr(0,obj.length-1);}return obj;}},{key:"split",value:function split(obj){var sep=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var count=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;if(sep!==null&&typeof sep!=="string")throw new ul4.TypeError("split() requires a string");if(count===null){var result=obj.split(sep!==null?sep:/[ \n\r\t]+/);if(sep===null){if(result.length&&!result[0].length)result.splice(0,1);if(result.length&&!result[result.length-1].length)result.splice(-1);}return result;}else{if(sep!==null){var _result=[];while(obj.length){var _pos2=obj.indexOf(sep);if(_pos2===-1||!count--){_result.push(obj);break;}_result.push(obj.substr(0,_pos2));obj=obj.substr(_pos2+sep.length);}return _result;}else{var _result2=[];while(obj.length){obj=ul4.StrProtocol.lstrip(obj,null);var part=void 0;if(!count--)part=obj;else part=obj.split(/[ \n\r\t]+/,1)[0];if(part.length)_result2.push(part);obj=obj.substr(part.length);}return _result2;}}}},{key:"rsplit",value:function rsplit(obj){var sep=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var count=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;if(sep!==null&&typeof sep!=="string")throw new ul4.TypeError("rsplit() requires a string as second argument");if(count===null){var result=obj.split(sep!==null?sep:/[ \n\r\t]+/);if(sep===null){if(result.length&&!result[0].length)result.splice(0,1);if(result.length&&!result[result.length-1].length)result.splice(-1);}return result;}else{if(sep!==null){var _result3=[];while(obj.length){var _pos3=obj.lastIndexOf(sep);if(_pos3===-1||!count--){_result3.unshift(obj);break;}_result3.unshift(obj.substr(_pos3+sep.length));obj=obj.substr(0,_pos3);}return _result3;}else{var _result4=[];while(obj.length){obj=ul4.StrProtocol.rstrip(obj);var part=void 0;if(!count--)part=obj;else{part=obj.split(/[ \n\r\t]+/);part=part[part.length-1];}if(part.length)_result4.unshift(part);obj=obj.substr(0,obj.length-part.length);}return _result4;}}}},{key:"splitlines",value:function splitlines(obj){var keepends=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var pos=0;var lookingAtLineEnd=function lookingAtLineEnd(){var c=obj[pos];if(c==='\n'||c=="\x0B"||c=="\f"||c=="\x1C"||c=="\x1D"||c=="\x1E"||c=="\x85"||c=="\u2028"||c=="\u2029")return 1;if(c==='\r'){if(pos==length-1)return 1;if(obj[pos+1]==='\n')return 2;return 1;}return 0;};var result=[],length=obj.length;for(pos=0,startpos=0;;){if(pos>=length){if(startpos!=pos)result.push(obj.substring(startpos));return result;}var lineendlen=lookingAtLineEnd();if(!lineendlen)++pos;else{var endpos=pos+(keepends?lineendlen:0);result.push(obj.substring(startpos,endpos));pos+=lineendlen;startpos=pos;}}}},{key:"lower",value:function lower(obj){return obj.toLowerCase();}},{key:"upper",value:function upper(obj){return obj.toUpperCase();}},{key:"capitalize",value:function capitalize(obj){if(obj.length)obj=obj[0].toUpperCase()+obj.slice(1).toLowerCase();return obj;}},{key:"join",value:function join(obj,iterable){var resultlist=[];for(var iter=ul4._iter(iterable);;){var item=iter.next();if(item.done)break;resultlist.push(item.value);}return resultlist.join(obj);}},{key:"startswith",value:function startswith(obj,prefix){if(typeof prefix==="string")return obj.substr(0,prefix.length)===prefix;else if(ul4._islist(prefix)){var _iteratorNormalCompletion46=true;var _didIteratorError46=false;var _iteratorError46=undefined;try{for(var _iterator46=prefix[Symbol.iterator](),_step46;!(_iteratorNormalCompletion46=(_step46=_iterator46.next()).done);_iteratorNormalCompletion46=true){var singlepre=_step46.value;if(obj.substr(0,singlepre.length)===singlepre)return true;}}catch(err){_didIteratorError46=true;_iteratorError46=err;}finally{try{if(!_iteratorNormalCompletion46&&_iterator46.return){_iterator46.return();}}finally{if(_didIteratorError46){throw _iteratorError46;}}}return false;}else throw new ul4.TypeError("startswith() argument must be string");}},{key:"endswith",value:function endswith(obj,suffix){if(typeof suffix==="string")return obj.substr(obj.length-suffix.length)===suffix;else if(ul4._islist(suffix)){var _iteratorNormalCompletion47=true;var _didIteratorError47=false;var _iteratorError47=undefined;try{for(var _iterator47=suffix[Symbol.iterator](),_step47;!(_iteratorNormalCompletion47=(_step47=_iterator47.next()).done);_iteratorNormalCompletion47=true){var singlesuf=_step47.value;if(obj.substr(obj.length-singlesuf.length)===singlesuf)return true;}}catch(err){_didIteratorError47=true;_iteratorError47=err;}finally{try{if(!_iteratorNormalCompletion47&&_iterator47.return){_iterator47.return();}}finally{if(_didIteratorError47){throw _iteratorError47;}}}return false;}else throw new ul4.TypeError("endswith() argument must be string or list of strings");}}]);return StrProtocol;}(ul4.Protocol.constructor);ul4.StrProtocol=ul4.StrProtocol.prototype;ul4.StrProtocol.attrs=ul4._makeset("split","rsplit","splitlines","strip","lstrip","rstrip","upper","lower","capitalize","startswith","endswith","replace","count","find","rfind","join");ul4.expose(ul4.StrProtocol.count,["sub","start=",null,"end=",null]);ul4.expose(ul4.StrProtocol.find,["sub","start=",null,"end=",null]);ul4.expose(ul4.StrProtocol.rfind,["sub","start=",null,"end=",null]);ul4.expose(ul4.StrProtocol.replace,["old","new","count=",null]);ul4.expose(ul4.StrProtocol.strip,["chars=",null]);ul4.expose(ul4.StrProtocol.lstrip,["chars=",null]);ul4.expose(ul4.StrProtocol.rstrip,["chars=",null]);ul4.expose(ul4.StrProtocol.split,["sep=",null,"count=",null]);ul4.expose(ul4.StrProtocol.rsplit,["sep=",null,"count=",null]);ul4.expose(ul4.StrProtocol.splitlines,["keepends=",false]);ul4.expose(ul4.StrProtocol.lower,[]);ul4.expose(ul4.StrProtocol.upper,[]);ul4.expose(ul4.StrProtocol.capitalize,[]);ul4.expose(ul4.StrProtocol.join,["iterable"]);ul4.expose(ul4.StrProtocol.startswith,["prefix"]);ul4.expose(ul4.StrProtocol.endswith,["suffix"]);ul4.ListProtocol=function(_ul4$Protocol$constru2){_inherits(ListProtocol,_ul4$Protocol$constru2);function ListProtocol(){_classCallCheck(this,ListProtocol);return _possibleConstructorReturn(this,(ListProtocol.__proto__||Object.getPrototypeOf(ListProtocol)).apply(this,arguments));}_createClass(ListProtocol,[{key:"ul4type",value:function ul4type(obj){return"list";}},{key:"append",value:function append(obj,items){var _iteratorNormalCompletion48=true;var _didIteratorError48=false;var _iteratorError48=undefined;try{for(var _iterator48=items[Symbol.iterator](),_step48;!(_iteratorNormalCompletion48=(_step48=_iterator48.next()).done);_iteratorNormalCompletion48=true){var item=_step48.value;obj.push(item);}}catch(err){_didIteratorError48=true;_iteratorError48=err;}finally{try{if(!_iteratorNormalCompletion48&&_iterator48.return){_iterator48.return();}}finally{if(_didIteratorError48){throw _iteratorError48;}}}return null;}},{key:"insert",value:function insert(obj,pos,items){if(pos<0)pos+=obj.length;var _iteratorNormalCompletion49=true;var _didIteratorError49=false;var _iteratorError49=undefined;try{for(var _iterator49=items[Symbol.iterator](),_step49;!(_iteratorNormalCompletion49=(_step49=_iterator49.next()).done);_iteratorNormalCompletion49=true){var item=_step49.value;obj.splice(pos++,0,item);}}catch(err){_didIteratorError49=true;_iteratorError49=err;}finally{try{if(!_iteratorNormalCompletion49&&_iterator49.return){_iterator49.return();}}finally{if(_didIteratorError49){throw _iteratorError49;}}}return null;}},{key:"pop",value:function pop(obj,pos){if(pos<0)pos+=obj.length;var result=obj[pos];obj.splice(pos,1);return result;}},{key:"count",value:function count(obj,sub){var start=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var end=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;return ul4._count(obj,sub,start,end);}},{key:"find",value:function find(obj,sub){var start=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var end=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;return ul4._find(obj,sub,start,end);}},{key:"rfind",value:function rfind(obj,sub){var start=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var end=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;return ul4._rfind(obj,sub,start,end);}}]);return ListProtocol;}(ul4.Protocol.constructor);ul4.ListProtocol=ul4.ListProtocol.prototype;ul4.ListProtocol.attrs=ul4._makeset("append","insert","pop","count","find","rfind");ul4.expose(ul4.ListProtocol.append,["*items"]);ul4.expose(ul4.ListProtocol.insert,["pos","*items"]);ul4.expose(ul4.ListProtocol.pop,["pos=",-1]);ul4.expose(ul4.ListProtocol.count,["sub","start=",null,"end=",null]);ul4.expose(ul4.ListProtocol.find,["sub","start=",null,"end=",null]);ul4.expose(ul4.ListProtocol.rfind,["sub","start=",null,"end=",null]);ul4.MapProtocol=function(_ul4$Protocol$constru3){_inherits(MapProtocol,_ul4$Protocol$constru3);function MapProtocol(){_classCallCheck(this,MapProtocol);return _possibleConstructorReturn(this,(MapProtocol.__proto__||Object.getPrototypeOf(MapProtocol)).apply(this,arguments));}_createClass(MapProtocol,[{key:"ul4type",value:function ul4type(obj){return"dict";}},{key:"getattr",value:function getattr(obj,attrname){if(this.attrs.has(attrname)){var attr=this[attrname];var realattr=function realattr(){for(var _len9=arguments.length,args=Array(_len9),_key18=0;_key18<_len9;_key18++){args[_key18]=arguments[_key18];}return attr.apply(this,[obj].concat(args));};realattr.name=attr.name;realattr._ul4_name=attr._ul4_name||attr.name;realattr._ul4_signature=attr._ul4_signature;realattr._ul4_needsobject=attr._ul4_needsobject;realattr._ul4_needscontext=attr._ul4_needscontext;return realattr;}else return obj.get(attrname);}},{key:"get",value:function get(obj,key){var default_=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;if(obj.has(key))return obj.get(key);return default_;}},{key:"items",value:function items(obj){var result=[];var _iteratorNormalCompletion50=true;var _didIteratorError50=false;var _iteratorError50=undefined;try{for(var _iterator50=obj.entries()[Symbol.iterator](),_step50;!(_iteratorNormalCompletion50=(_step50=_iterator50.next()).done);_iteratorNormalCompletion50=true){var item=_step50.value;result.push(item);}}catch(err){_didIteratorError50=true;_iteratorError50=err;}finally{try{if(!_iteratorNormalCompletion50&&_iterator50.return){_iterator50.return();}}finally{if(_didIteratorError50){throw _iteratorError50;}}}return result;}},{key:"values",value:function values(obj){var result=[];var _iteratorNormalCompletion51=true;var _didIteratorError51=false;var _iteratorError51=undefined;try{for(var _iterator51=obj.values()[Symbol.iterator](),_step51;!(_iteratorNormalCompletion51=(_step51=_iterator51.next()).done);_iteratorNormalCompletion51=true){var value=_step51.value;result.push(value);}}catch(err){_didIteratorError51=true;_iteratorError51=err;}finally{try{if(!_iteratorNormalCompletion51&&_iterator51.return){_iterator51.return();}}finally{if(_didIteratorError51){throw _iteratorError51;}}}return result;}},{key:"update",value:function update(obj,other,kwargs){return ul4._update(obj,other,kwargs);}},{key:"clear",value:function clear(obj){obj.clear();return null;}}]);return MapProtocol;}(ul4.Protocol.constructor);ul4.MapProtocol=ul4.MapProtocol.prototype;ul4.MapProtocol.attrs=ul4._makeset("get","items","values","update","clear");ul4.expose(ul4.MapProtocol.get,["key","default=",null]);ul4.expose(ul4.MapProtocol.items,[]);ul4.expose(ul4.MapProtocol.values,[]);ul4.expose(ul4.MapProtocol.update,["*other","**kwargs"]);ul4.expose(ul4.MapProtocol.clear,[]);ul4.SetProtocol=function(_ul4$Protocol$constru4){_inherits(SetProtocol,_ul4$Protocol$constru4);function SetProtocol(){_classCallCheck(this,SetProtocol);return _possibleConstructorReturn(this,(SetProtocol.__proto__||Object.getPrototypeOf(SetProtocol)).apply(this,arguments));}_createClass(SetProtocol,[{key:"ul4type",value:function ul4type(obj){return"set";}},{key:"add",value:function add(obj,items){var _iteratorNormalCompletion52=true;var _didIteratorError52=false;var _iteratorError52=undefined;try{for(var _iterator52=items[Symbol.iterator](),_step52;!(_iteratorNormalCompletion52=(_step52=_iterator52.next()).done);_iteratorNormalCompletion52=true){var item=_step52.value;obj.add(item);}}catch(err){_didIteratorError52=true;_iteratorError52=err;}finally{try{if(!_iteratorNormalCompletion52&&_iterator52.return){_iterator52.return();}}finally{if(_didIteratorError52){throw _iteratorError52;}}}}},{key:"clear",value:function clear(obj){obj.clear();return null;}}]);return SetProtocol;}(ul4.Protocol.constructor);ul4.SetProtocol=ul4.SetProtocol.prototype;ul4.SetProtocol.attrs=ul4._makeset("add","clear");ul4.expose(ul4.SetProtocol.add,["*items"]);ul4.expose(ul4.SetProtocol.clear,[]);ul4.DateProtocol=function(_ul4$Protocol$constru5){_inherits(DateProtocol,_ul4$Protocol$constru5);function DateProtocol(){_classCallCheck(this,DateProtocol);return _possibleConstructorReturn(this,(DateProtocol.__proto__||Object.getPrototypeOf(DateProtocol)).apply(this,arguments));}_createClass(DateProtocol,[{key:"ul4type",value:function ul4type(obj){return"date";}},{key:"weekday",value:function weekday(obj){return ul4.DateTimeProtocol.weekday(obj._date);}},{key:"calendar",value:function calendar(obj){var firstweekday=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var mindaysinfirstweek=arguments.length>2&&arguments[2]!==undefined?arguments[2]:4;return ul4.DateTimeProtocol.calendar(obj._date,firstweekday,mindaysinfirstweek);}},{key:"week",value:function week(obj){var firstweekday=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var mindaysinfirstweek=arguments.length>2&&arguments[2]!==undefined?arguments[2]:4;return ul4.DateProtocol.calendar(obj,firstweekday,mindaysinfirstweek)[1];}},{key:"day",value:function day(obj){return obj._date.getDate();}},{key:"month",value:function month(obj){return obj._date.getMonth()+1;}},{key:"year",value:function year(obj){return obj._date.getFullYear();}},{key:"mimeformat",value:function mimeformat(obj){var weekdayname=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];var monthname=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var d=obj._date;return weekdayname[ul4.DateTimeProtocol.weekday(d)]+", "+ul4._lpad(d.getDate(),"0",2)+" "+monthname[d.getMonth()]+" "+d.getFullYear();}},{key:"isoformat",value:function isoformat(obj){var d=obj._date;return d.getFullYear()+"-"+ul4._lpad((d.getMonth()+1).toString(),"0",2)+"-"+ul4._lpad(d.getDate().toString(),"0",2);}},{key:"yearday",value:function yearday(obj){return ul4.DateTimeProtocol.yearday(obj._date);}}]);return DateProtocol;}(ul4.Protocol.constructor);ul4.DateProtocol=ul4.DateProtocol.prototype;ul4.DateProtocol.attrs=ul4._makeset("weekday","week","calendar","day","month","year","mimeformat","isoformat","yearday");ul4.expose(ul4.DateProtocol.weekday,[]);ul4.expose(ul4.DateProtocol.calendar,["firstweekday=",0,"mindaysinfirstweek=",4]);ul4.expose(ul4.DateProtocol.week,["firstweekday=",0,"mindaysinfirstweek=",4]);ul4.expose(ul4.DateProtocol.day,[]);ul4.expose(ul4.DateProtocol.month,[]);ul4.expose(ul4.DateProtocol.year,[]);ul4.expose(ul4.DateProtocol.mimeformat,[]);ul4.expose(ul4.DateProtocol.isoformat,[]);ul4.expose(ul4.DateProtocol.yearday,[]);ul4.DateTimeProtocol=function(_ul4$Protocol$constru6){_inherits(DatetimeProtocol,_ul4$Protocol$constru6);function DatetimeProtocol(){_classCallCheck(this,DatetimeProtocol);return _possibleConstructorReturn(this,(DatetimeProtocol.__proto__||Object.getPrototypeOf(DatetimeProtocol)).apply(this,arguments));}_createClass(DatetimeProtocol,[{key:"ul4type",value:function ul4type(obj){return"datetime";}},{key:"weekday",value:function weekday(obj){var d=obj.getDay();return d?d-1:6;}},{key:"calendar",value:function calendar(obj){var firstweekday=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var mindaysinfirstweek=arguments.length>2&&arguments[2]!==undefined?arguments[2]:4;firstweekday=ul4._mod(firstweekday,7);if(mindaysinfirstweek<1)mindaysinfirstweek=1;else if(mindaysinfirstweek>7)mindaysinfirstweek=7;for(var offset=+1;offset>=-1;--offset){var year=obj.getFullYear()+offset;var refDate=new Date(year,0,mindaysinfirstweek);var weekDayDiff=ul4._mod(ul4.DateTimeProtocol.weekday(refDate)-firstweekday,7);var weekStartYear=refDate.getFullYear();var weekStartMonth=refDate.getMonth();var weekStartDay=refDate.getDate()-weekDayDiff;var weekStart=new Date(weekStartYear,weekStartMonth,weekStartDay);if(obj.getTime()>=weekStart.getTime()){var diff=ul4.SubAST.prototype._do(obj,weekStart);var week=Math.floor(diff.days()/7)+1;return[year,week,ul4.DateTimeProtocol.weekday(obj)];}}}},{key:"week",value:function week(obj){var firstweekday=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var mindaysinfirstweek=arguments.length>2&&arguments[2]!==undefined?arguments[2]:4;return ul4.DateTimeProtocol.calendar(obj,firstweekday,mindaysinfirstweek)[1];}},{key:"day",value:function day(obj){return obj.getDate();}},{key:"month",value:function month(obj){return obj.getMonth()+1;}},{key:"year",value:function year(obj){return obj.getFullYear();}},{key:"hour",value:function hour(obj){return obj.getHours();}},{key:"minute",value:function minute(obj){return obj.getMinutes();}},{key:"second",value:function second(obj){return obj.getSeconds();}},{key:"microsecond",value:function microsecond(obj){return obj.getMilliseconds()*1000;}},{key:"mimeformat",value:function mimeformat(obj){var weekdayname=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];var monthname=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return weekdayname[ul4.DateTimeProtocol.weekday(obj)]+", "+ul4._lpad(obj.getDate(),"0",2)+" "+monthname[obj.getMonth()]+" "+obj.getFullYear()+" "+ul4._lpad(obj.getHours(),"0",2)+":"+ul4._lpad(obj.getMinutes(),"0",2)+":"+ul4._lpad(obj.getSeconds(),"0",2)+" GMT";}},{key:"isoformat",value:function isoformat(obj){var year=obj.getFullYear();var month=obj.getMonth()+1;var day=obj.getDate();var hour=obj.getHours();var minute=obj.getMinutes();var second=obj.getSeconds();var ms=obj.getMilliseconds();var result=year+"-"+ul4._lpad(month.toString(),"0",2)+"-"+ul4._lpad(day.toString(),"0",2)+"T"+ul4._lpad(hour.toString(),"0",2)+":"+ul4._lpad(minute.toString(),"0",2)+":"+ul4._lpad(second.toString(),"0",2);if(ms)result+="."+ul4._lpad(ms.toString(),"0",3)+"000";return result;}},{key:"yearday",value:function yearday(obj){var leap=ul4._isleap(obj)?1:0;var day=obj.getDate();switch(obj.getMonth()){case 0:return day;case 1:return 31+day;case 2:return 31+28+leap+day;case 3:return 31+28+leap+31+day;case 4:return 31+28+leap+31+30+day;case 5:return 31+28+leap+31+30+31+day;case 6:return 31+28+leap+31+30+31+30+day;case 7:return 31+28+leap+31+30+31+30+31+day;case 8:return 31+28+leap+31+30+31+30+31+31+day;case 9:return 31+28+leap+31+30+31+30+31+31+30+day;case 10:return 31+28+leap+31+30+31+30+31+31+30+31+day;case 11:return 31+28+leap+31+30+31+30+31+31+30+31+30+day;}}}]);return DatetimeProtocol;}(ul4.Protocol.constructor);ul4.DateTimeProtocol=ul4.DateTimeProtocol.prototype;ul4.DateTimeProtocol.attrs=ul4._makeset("weekday","week","calendar","day","month","year","hour","minute","second","microsecond","mimeformat","isoformat","yearday");ul4.expose(ul4.DateTimeProtocol.weekday,[]);ul4.expose(ul4.DateTimeProtocol.calendar,["firstweekday=",0,"mindaysinfirstweek=",4]);ul4.expose(ul4.DateTimeProtocol.week,["firstweekday=",0,"mindaysinfirstweek=",4]);ul4.expose(ul4.DateTimeProtocol.day,[]);ul4.expose(ul4.DateTimeProtocol.month,[]);ul4.expose(ul4.DateTimeProtocol.year,[]);ul4.expose(ul4.DateTimeProtocol.hour,[]);ul4.expose(ul4.DateTimeProtocol.minute,[]);ul4.expose(ul4.DateTimeProtocol.second,[]);ul4.expose(ul4.DateTimeProtocol.microsecond,[]);ul4.expose(ul4.DateTimeProtocol.mimeformat,[]);ul4.expose(ul4.DateTimeProtocol.isoformat,[]);ul4.expose(ul4.DateTimeProtocol.yearday,[]);ul4.ObjectProtocol=function(_ul4$Protocol$constru7){_inherits(ObjectProtocol,_ul4$Protocol$constru7);function ObjectProtocol(){_classCallCheck(this,ObjectProtocol);return _possibleConstructorReturn(this,(ObjectProtocol.__proto__||Object.getPrototypeOf(ObjectProtocol)).apply(this,arguments));}_createClass(ObjectProtocol,[{key:"ul4type",value:function ul4type(obj){return"dict";}},{key:"getattr",value:function getattr(obj,attrname){var result=void 0;if(obj&&typeof obj.__getattr__==="function")result=obj.__getattr__(attrname);else result=obj[attrname];if(typeof result!=="function")return result;var realresult=function(){for(var _len10=arguments.length,args=Array(_len10),_key19=0;_key19<_len10;_key19++){args[_key19]=arguments[_key19];}return result.apply(obj,args);};realresult._ul4_name=result._ul4_name||result.name;realresult._ul4_signature=result._ul4_signature;realresult._ul4_needsobject=result._ul4_needsobject;realresult._ul4_needscontext=result._ul4_needscontext;return realresult;}},{key:"get",value:function get(obj,key){var default_=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var result=obj[key];if(typeof result==="undefined")return default_;return result;}},{key:"items",value:function items(obj){var result=[];for(var key in obj){result.push([key,obj[key]]);}return result;}},{key:"values",value:function values(obj){var result=[];for(var key in obj){result.push(obj[key]);}return result;}},{key:"clear",value:function clear(obj){for(var key in obj){delete obj[key];}}}]);return ObjectProtocol;}(ul4.Protocol.constructor);ul4.ObjectProtocol=ul4.ObjectProtocol.prototype;ul4.ObjectProtocol.attrs=ul4._makeset("get","items","values","update","clear");ul4.expose(ul4.ObjectProtocol.get,["key","default=",null]);ul4.expose(ul4.ObjectProtocol.items,[]);ul4.expose(ul4.ObjectProtocol.values,[]);ul4.expose(ul4.ObjectProtocol.clear,[]);ul4.Context=function(){function Context(vars){_classCallCheck(this,Context);if(vars===null||typeof vars==="undefined")vars={};this.vars=vars;this.indents=[];this.escapes=[];this._output=[];}_createClass(Context,[{key:"inheritvars",value:function inheritvars(){var context=Object.create(this);context.vars=Object.create(this.vars);return context;}},{key:"withindent",value:function withindent(indent){var context=Object.create(this);if(indent!==null){context.indents=this.indents.slice();context.indents.push(indent);}return context;}},{key:"replaceoutput",value:function replaceoutput(){var context=Object.create(this);context._output=[];return context;}},{key:"clone",value:function clone(vars){return Object.create(this);}},{key:"output",value:function output(value){var _iteratorNormalCompletion53=true;var _didIteratorError53=false;var _iteratorError53=undefined;try{for(var _iterator53=this.escapes[Symbol.iterator](),_step53;!(_iteratorNormalCompletion53=(_step53=_iterator53.next()).done);_iteratorNormalCompletion53=true){var _escape2=_step53.value;value=_escape2(value);}}catch(err){_didIteratorError53=true;_iteratorError53=err;}finally{try{if(!_iteratorNormalCompletion53&&_iterator53.return){_iterator53.return();}}finally{if(_didIteratorError53){throw _iteratorError53;}}}this._output.push(value);}},{key:"getoutput",value:function getoutput(){return this._output.join("");}},{key:"get",value:function get(name){return this.vars[name];}},{key:"set",value:function set(name,value){this.vars[name]=value;}}]);return Context;}();ul4.Exception=function Exception(message,fileName,lineNumber){var instance=new Error(message,fileName,lineNumber);Object.setPrototypeOf(instance,Object.getPrototypeOf(this));instance.__id__=_nextid++;instance.context=null;return instance;};ul4.Exception.prototype=Object.create(Error.prototype,{constructor:{value:Error,enumerable:false,writable:true,configurable:true}});if(Object.setPrototypeOf)Object.setPrototypeOf(ul4.Exception,Error);else ul4.Exception.__proto__=Error;ul4.Exception.prototype.__getattr__=function __getattr__(attrname){switch(attrname){case"context":return this.context;default:throw new ul4.AttributeError(this,attrname);}};ul4.InternalException=function(_ul4$Exception){_inherits(InternalException,_ul4$Exception);function InternalException(){_classCallCheck(this,InternalException);return _possibleConstructorReturn(this,(InternalException.__proto__||Object.getPrototypeOf(InternalException)).apply(this,arguments));}return InternalException;}(ul4.Exception);ul4.ReturnException=function(_ul4$InternalExceptio){_inherits(ReturnException,_ul4$InternalExceptio);function ReturnException(result){_classCallCheck(this,ReturnException);var _this10=_possibleConstructorReturn(this,(ReturnException.__proto__||Object.getPrototypeOf(ReturnException)).call(this,"return"));_this10.result=result;return _this10;}return ReturnException;}(ul4.InternalException);ul4.BreakException=function(_ul4$InternalExceptio2){_inherits(BreakException,_ul4$InternalExceptio2);function BreakException(){_classCallCheck(this,BreakException);return _possibleConstructorReturn(this,(BreakException.__proto__||Object.getPrototypeOf(BreakException)).call(this,"break"));}return BreakException;}(ul4.InternalException);ul4.ContinueException=function(_ul4$InternalExceptio3){_inherits(ContinueException,_ul4$InternalExceptio3);function ContinueException(){_classCallCheck(this,ContinueException);return _possibleConstructorReturn(this,(ContinueException.__proto__||Object.getPrototypeOf(ContinueException)).call(this,"continue"));}return ContinueException;}(ul4.InternalException);ul4.SyntaxError=function(_ul4$Exception2){_inherits(SyntaxError,_ul4$Exception2);function SyntaxError(){_classCallCheck(this,SyntaxError);return _possibleConstructorReturn(this,(SyntaxError.__proto__||Object.getPrototypeOf(SyntaxError)).apply(this,arguments));}return SyntaxError;}(ul4.Exception);ul4.LValueRequiredError=function(_ul4$SyntaxError){_inherits(LValueRequiredError,_ul4$SyntaxError);function LValueRequiredError(){_classCallCheck(this,LValueRequiredError);return _possibleConstructorReturn(this,(LValueRequiredError.__proto__||Object.getPrototypeOf(LValueRequiredError)).call(this,"lvalue required"));}return LValueRequiredError;}(ul4.SyntaxError);ul4.TypeError=function(_ul4$Exception3){_inherits(TypeError,_ul4$Exception3);function TypeError(){_classCallCheck(this,TypeError);return _possibleConstructorReturn(this,(TypeError.__proto__||Object.getPrototypeOf(TypeError)).apply(this,arguments));}return TypeError;}(ul4.Exception);ul4.ValueError=function(_ul4$Exception4){_inherits(ValueError,_ul4$Exception4);function ValueError(){_classCallCheck(this,ValueError);return _possibleConstructorReturn(this,(ValueError.__proto__||Object.getPrototypeOf(ValueError)).apply(this,arguments));}return ValueError;}(ul4.Exception);ul4.ArgumentError=function(_ul4$Exception5){_inherits(ArgumentError,_ul4$Exception5);function ArgumentError(){_classCallCheck(this,ArgumentError);return _possibleConstructorReturn(this,(ArgumentError.__proto__||Object.getPrototypeOf(ArgumentError)).apply(this,arguments));}return ArgumentError;}(ul4.Exception);ul4.NotSubscriptableError=function(_ul4$Exception6){_inherits(NotSubscriptableError,_ul4$Exception6);function NotSubscriptableError(obj){_classCallCheck(this,NotSubscriptableError);var _this18=_possibleConstructorReturn(this,(NotSubscriptableError.__proto__||Object.getPrototypeOf(NotSubscriptableError)).call(this,"Object of type "+_type(obj)+" is not subscriptable"));_this18.obj=obj;return _this18;}_createClass(NotSubscriptableError,[{key:"toString",value:function toString(){return"Object of type "+_type(this.obj)+" is not subscriptable";}}]);return NotSubscriptableError;}(ul4.Exception);ul4.ZeroDivisionError=function(_ul4$Exception7){_inherits(ZeroDivisionError,_ul4$Exception7);function ZeroDivisionError(){_classCallCheck(this,ZeroDivisionError);return _possibleConstructorReturn(this,(ZeroDivisionError.__proto__||Object.getPrototypeOf(ZeroDivisionError)).call(this,"division by zero"));}return ZeroDivisionError;}(ul4.Exception);ul4.IndexError=function(_ul4$Exception8){_inherits(IndexError,_ul4$Exception8);function IndexError(obj,index){_classCallCheck(this,IndexError);var _this20=_possibleConstructorReturn(this,(IndexError.__proto__||Object.getPrototypeOf(IndexError)).call(this,"index "+ul4._repr(index)+" out of range"));_this20.obj=obj;_this20.index=index;return _this20;}_createClass(IndexError,[{key:"toString",value:function toString(){return"index "+this.index+" out of range for "+ul4._type(this.obj);}}]);return IndexError;}(ul4.Exception);ul4.AttributeError=function(_ul4$Exception9){_inherits(AttributeError,_ul4$Exception9);function AttributeError(obj,attrname){_classCallCheck(this,AttributeError);var _this21=_possibleConstructorReturn(this,(AttributeError.__proto__||Object.getPrototypeOf(AttributeError)).call(this,"object of type "+ul4._type(obj)+" has no attribute "+ul4._repr(attrname)));_this21.obj=obj;_this21.attrname=attrname;return _this21;}return AttributeError;}(ul4.Exception);ul4.LocationError=function(_ul4$Exception10){_inherits(LocationError,_ul4$Exception10);function LocationError(location){_classCallCheck(this,LocationError);var _this22=_possibleConstructorReturn(this,(LocationError.__proto__||Object.getPrototypeOf(LocationError)).call(this,"nested exception in "+ul4._repr(location)));_this22.location=location;return _this22;}_createClass(LocationError,[{key:"_templateprefix",value:function _templateprefix(){var template=this.location.template;var out=[];if(template.parenttemplate!==null)out.push("in local template ");else out.push("in template ");var first=true;while(template!=null){if(first)first=false;else out.push(" in ");out.push(template.name?ul4._repr(template.name):"(unnamed)");template=template.parenttemplate;}return out.join("");}},{key:"toString",value:function toString(){var template=this.location.template;var templateprefix=this._templateprefix();var outerstartpos=this.location.pos.start;var innerstartpos=outerstartpos;var outerstoppos=this.location.pos.stop;var innerstoppos=outerstoppos;var maxprefix=40;while(maxprefix>0&&outerstartpos>0&&template.source.charAt(outerstartpos-1)!="\n"){maxprefix--;outerstartpos--;}var maxsuffix=40;while(maxsuffix>0&&outerstartpos<template.source.length-1&&template.source.charAt(outerstoppos)!="\n"){maxsuffix--;outerstoppos++;}var prefix=template.source.substring(outerstartpos,innerstartpos);var code=template.source.substring(innerstartpos,innerstoppos);var suffix=template.source.substring(innerstoppos,outerstoppos);prefix=ul4._repr(prefix).slice(1,-1);code=ul4._repr(code).slice(1,-1);suffix=ul4._repr(suffix).slice(1,-1);var text=prefix+code+suffix;var underline=ul4._str_repeat("\xA0",prefix.length)+ul4._str_repeat("~",code.length);var lineno=1,colno=1;for(var i=0;i<innerstartpos;++i){if(template.source[i]==="\n"){++lineno;colno=1;}else++colno;}pos="offset "+this.location.pos.start+":"+this.location.pos.stop+"; line "+lineno+"; col "+colno;var message=templateprefix+": "+pos+"\n"+text+"\n"+underline;return message;}},{key:"__getattr__",value:function __getattr__(attrname){switch(attrname){case"context":return this.context;case"location":return this.location;default:throw new ul4.AttributeError(this,attrname);}}}]);return LocationError;}(ul4.Exception);ul4.AST=function(_ul4$Proto2){_inherits(AST,_ul4$Proto2);function AST(template,pos){_classCallCheck(this,AST);var _this23=_possibleConstructorReturn(this,(AST.__proto__||Object.getPrototypeOf(AST)).call(this));_this23.template=template;_this23.pos=pos;return _this23;}_createClass(AST,[{key:"__getattr__",value:function __getattr__(attrname){if(attrname==="type")return this.type;else if(attrname==="source")return this.source;else if(this._ul4onattrs.indexOf(attrname)>=0)return this[attrname];throw new ul4.AttributeError(this,attrname);}},{key:"__setitem__",value:function __setitem__(attrname,value){throw new ul4.TypeError("object is immutable");}},{key:"__str__",value:function __str__(){var out=[];this._str(out);return ul4._formatsource(out);}},{key:"__repr__",value:function __repr__(){var out=[];this._repr(out);return ul4._formatsource(out);}},{key:"_decorate_exception",value:function _decorate_exception(exc){while(exc.context!==undefined&&exc.context!==null){exc=exc.context;}exc.context=new ul4.LocationError(this);}},{key:"_handle_eval",value:function _handle_eval(context){try{return this._eval(context);}catch(exc){if(!(exc instanceof ul4.InternalException)&&!(exc instanceof ul4.LocationError))this._decorate_exception(exc);throw exc;}}},{key:"_handle_eval_set",value:function _handle_eval_set(context,value){try{return this._eval_set(context,value);}catch(exc){if(!(exc instanceof ul4.LocationError))this._decorate_exception(exc);throw exc;}}},{key:"_eval_set",value:function _eval_set(context,value){throw new ul4.LValueRequiredError();}},{key:"_handle_eval_modify",value:function _handle_eval_modify(context,operator,value){try{return this._eval_modify(context,operator,value);}catch(exc){if(!(exc instanceof ul4.LocationError))this._decorate_exception(exc);throw exc;}}},{key:"_eval_modify",value:function _eval_modify(context,operator,value){throw new ul4.LValueRequiredError();}},{key:"_repr",value:function _repr(out){}},{key:"_str",value:function _str(out){out.push(this.source.replace(/\r?\n/g,' '));}},{key:"ul4ondump",value:function ul4ondump(encoder){var _iteratorNormalCompletion54=true;var _didIteratorError54=false;var _iteratorError54=undefined;try{for(var _iterator54=this._ul4onattrs[Symbol.iterator](),_step54;!(_iteratorNormalCompletion54=(_step54=_iterator54.next()).done);_iteratorNormalCompletion54=true){var attrname=_step54.value;encoder.dump(this[attrname]);}}catch(err){_didIteratorError54=true;_iteratorError54=err;}finally{try{if(!_iteratorNormalCompletion54&&_iterator54.return){_iterator54.return();}}finally{if(_didIteratorError54){throw _iteratorError54;}}}}},{key:"ul4onload",value:function ul4onload(decoder){var _iteratorNormalCompletion55=true;var _didIteratorError55=false;var _iteratorError55=undefined;try{for(var _iterator55=this._ul4onattrs[Symbol.iterator](),_step55;!(_iteratorNormalCompletion55=(_step55=_iterator55.next()).done);_iteratorNormalCompletion55=true){var attrname=_step55.value;this[attrname]=decoder.load();}}catch(err){_didIteratorError55=true;_iteratorError55=err;}finally{try{if(!_iteratorNormalCompletion55&&_iterator55.return){_iterator55.return();}}finally{if(_didIteratorError55){throw _iteratorError55;}}}}},{key:"source",get:function(){return this.pos.of(this.template._source);}}]);return AST;}(ul4.Proto);ul4.AST.prototype._ul4onattrs=["template","pos"];ul4.TextAST=function(_ul4$AST){_inherits(TextAST,_ul4$AST);function TextAST(template,pos){_classCallCheck(this,TextAST);return _possibleConstructorReturn(this,(TextAST.__proto__||Object.getPrototypeOf(TextAST)).call(this,template,pos));}_createClass(TextAST,[{key:"_eval",value:function _eval(context){context.output(this.text);}},{key:"_str",value:function _str(out){out.push("text ");out.push(ul4._repr(this.text));}},{key:"_repr",value:function _repr(out){out.push("<TextAST ");out.push(ul4._repr(this.text));out.push(">");}},{key:"text",get:function(){return this.source;}}]);return TextAST;}(ul4.AST);ul4.IndentAST=function(_ul4$TextAST){_inherits(IndentAST,_ul4$TextAST);function IndentAST(template,pos,text){_classCallCheck(this,IndentAST);var _this25=_possibleConstructorReturn(this,(IndentAST.__proto__||Object.getPrototypeOf(IndentAST)).call(this,template,pos));_this25._text=text;return _this25;}_createClass(IndentAST,[{key:"_eval",value:function _eval(context){var _iteratorNormalCompletion56=true;var _didIteratorError56=false;var _iteratorError56=undefined;try{for(var _iterator56=context.indents[Symbol.iterator](),_step56;!(_iteratorNormalCompletion56=(_step56=_iterator56.next()).done);_iteratorNormalCompletion56=true){var indent=_step56.value;context.output(indent);}}catch(err){_didIteratorError56=true;_iteratorError56=err;}finally{try{if(!_iteratorNormalCompletion56&&_iterator56.return){_iterator56.return();}}finally{if(_didIteratorError56){throw _iteratorError56;}}}context.output(this.text);}},{key:"ul4ondump",value:function ul4ondump(encoder){_get2(IndentAST.prototype.__proto__||Object.getPrototypeOf(IndentAST.prototype),"ul4ondump",this).call(this,encoder);if(this._text===this.source)encoder.dump(null);else encoder.dump(this._text);}},{key:"ul4onload",value:function ul4onload(decoder){_get2(IndentAST.prototype.__proto__||Object.getPrototypeOf(IndentAST.prototype),"ul4onload",this).call(this,decoder);this._text=decoder.load();}},{key:"_str",value:function _str(out){out.push("indent ");out.push(ul4._repr(this.text));}},{key:"_repr",value:function _repr(out){out.push("<IndentAST ");out.push(ul4._repr(this.text));out.push(">");}},{key:"text",get:function(){if(typeof this.template!=="undefined")return this._text===null?this.source:this._text;else return null;}}]);return IndentAST;}(ul4.TextAST);ul4.LineEndAST=function(_ul4$TextAST2){_inherits(LineEndAST,_ul4$TextAST2);function LineEndAST(){_classCallCheck(this,LineEndAST);return _possibleConstructorReturn(this,(LineEndAST.__proto__||Object.getPrototypeOf(LineEndAST)).apply(this,arguments));}_createClass(LineEndAST,[{key:"_str",value:function _str(out){out.push("lineend ");out.push(ul4._repr(this.text));}},{key:"_repr",value:function _repr(out){out.push("<LineEndAST ");out.push(ul4._repr(this.text));out.push(">");}}]);return LineEndAST;}(ul4.TextAST);ul4.CodeAST=function(_ul4$AST2){_inherits(CodeAST,_ul4$AST2);function CodeAST(){_classCallCheck(this,CodeAST);return _possibleConstructorReturn(this,(CodeAST.__proto__||Object.getPrototypeOf(CodeAST)).apply(this,arguments));}return CodeAST;}(ul4.AST);ul4.ConstAST=function(_ul4$CodeAST){_inherits(ConstAST,_ul4$CodeAST);function ConstAST(template,pos,value){_classCallCheck(this,ConstAST);var _this28=_possibleConstructorReturn(this,(ConstAST.__proto__||Object.getPrototypeOf(ConstAST)).call(this,template,pos));_this28.value=value;return _this28;}_createClass(ConstAST,[{key:"_repr",value:function _repr(out){out.push("<ConstAST value=");out.push(ul4._repr(this.value));out.push(">");}},{key:"_eval",value:function _eval(context){return this.value;}}]);return ConstAST;}(ul4.CodeAST);ul4.ConstAST.prototype._ul4onattrs=ul4.CodeAST.prototype._ul4onattrs.concat(["value"]);ul4.ItemArgBase=function(_ul4$CodeAST2){_inherits(ItemArgBase,_ul4$CodeAST2);function ItemArgBase(){_classCallCheck(this,ItemArgBase);return _possibleConstructorReturn(this,(ItemArgBase.__proto__||Object.getPrototypeOf(ItemArgBase)).apply(this,arguments));}_createClass(ItemArgBase,[{key:"_handle_eval_list",value:function _handle_eval_list(context,result){try{return this._eval_list(context,result);}catch(exc){if(!(exc instanceof ul4.InternalException)&&!(exc instanceof ul4.LocationError))this._decorate_exception(exc);throw exc;}}},{key:"_handle_eval_set",value:function _handle_eval_set(context,result){try{return this._eval_set(context,result);}catch(exc){if(!(exc instanceof ul4.InternalException)&&!(exc instanceof ul4.LocationError))this._decorate_exception(exc);throw exc;}}},{key:"_handle_eval_dict",value:function _handle_eval_dict(context,result){try{return this._eval_dict(context,result);}catch(exc){if(!(exc instanceof ul4.InternalException)&&!(exc instanceof ul4.LocationError))this._decorate_exception(exc);throw exc;}}},{key:"_handle_eval_call",value:function _handle_eval_call(context,args,kwargs){try{return this._eval_call(context,args,kwargs);}catch(exc){if(!(exc instanceof ul4.InternalException)&&!(exc instanceof ul4.LocationError))this._decorate_exception(exc);throw exc;}}}]);return ItemArgBase;}(ul4.CodeAST);ul4.SeqItemAST=function(_ul4$ItemArgBase){_inherits(SeqItemAST,_ul4$ItemArgBase);function SeqItemAST(template,pos,value){_classCallCheck(this,SeqItemAST);var _this30=_possibleConstructorReturn(this,(SeqItemAST.__proto__||Object.getPrototypeOf(SeqItemAST)).call(this,template,pos));_this30.value=value;return _this30;}_createClass(SeqItemAST,[{key:"_repr",value:function _repr(out){out.push("<SeqItemAST value=");out.push(ul4._repr(this.value));out.push(">");}},{key:"_eval_list",value:function _eval_list(context,result){var value=this.value._handle_eval(context);result.push(value);}},{key:"_eval_set",value:function _eval_set(context,result){var value=this.value._handle_eval(context);result.add(value);}}]);return SeqItemAST;}(ul4.ItemArgBase);ul4.SeqItemAST.prototype._ul4onattrs=ul4.ItemArgBase.prototype._ul4onattrs.concat(["value"]);ul4.UnpackSeqItemAST=function(_ul4$ItemArgBase2){_inherits(UnpackSeqItemAST,_ul4$ItemArgBase2);function UnpackSeqItemAST(template,pos,value){_classCallCheck(this,UnpackSeqItemAST);var _this31=_possibleConstructorReturn(this,(UnpackSeqItemAST.__proto__||Object.getPrototypeOf(UnpackSeqItemAST)).call(this,template,pos));_this31.value=value;return _this31;}_createClass(UnpackSeqItemAST,[{key:"_repr",value:function _repr(out){out.push("<UnpackSeqItemAST value=");out.push(ul4._repr(this.value));out.push(">");}},{key:"_eval_list",value:function _eval_list(context,result){var value=this.value._handle_eval(context);for(var iter=ul4._iter(value);;){var item=iter.next();if(item.done)break;result.push(item.value);}}},{key:"_eval_set",value:function _eval_set(context,result){var value=this.value._handle_eval(context);for(var iter=ul4._iter(value);;){var item=iter.next();if(item.done)break;result.add(item.value);}}}]);return UnpackSeqItemAST;}(ul4.ItemArgBase);ul4.UnpackSeqItemAST.prototype._ul4onattrs=ul4.ItemArgBase.prototype._ul4onattrs.concat(["value"]);ul4.DictItemAST=function(_ul4$ItemArgBase3){_inherits(DictItemAST,_ul4$ItemArgBase3);function DictItemAST(template,pos,key,value){_classCallCheck(this,DictItemAST);var _this32=_possibleConstructorReturn(this,(DictItemAST.__proto__||Object.getPrototypeOf(DictItemAST)).call(this,template,pos));_this32.key=key;_this32.value=value;return _this32;}_createClass(DictItemAST,[{key:"_repr",value:function _repr(out){out.push("<DictItemAST key=");out.push(ul4._repr(this.key));out.push(" value=");out.push(ul4._repr(this.value));out.push(">");}},{key:"_eval_dict",value:function _eval_dict(context,result){var key=this.key._handle_eval(context);var value=this.value._handle_eval(context);ul4._setmap(result,key,value);}}]);return DictItemAST;}(ul4.ItemArgBase);ul4.DictItemAST.prototype._ul4onattrs=ul4.ItemArgBase.prototype._ul4onattrs.concat(["key","value"]),ul4.UnpackDictItemAST=function(_ul4$ItemArgBase4){_inherits(UnpackDictItemAST,_ul4$ItemArgBase4);function UnpackDictItemAST(template,pos,item){_classCallCheck(this,UnpackDictItemAST);var _this33=_possibleConstructorReturn(this,(UnpackDictItemAST.__proto__||Object.getPrototypeOf(UnpackDictItemAST)).call(this,template,pos));_this33.item=item;return _this33;}_createClass(UnpackDictItemAST,[{key:"_repr",value:function _repr(out){out.push("<UnpackDictItemAST item=");out.push(ul4._repr(this.item));out.push(">");}},{key:"_eval_dict",value:function _eval_dict(context,result){var item=this.item._handle_eval(context);if(ul4._islist(item)){var _iteratorNormalCompletion57=true;var _didIteratorError57=false;var _iteratorError57=undefined;try{for(var _iterator57=item[Symbol.iterator](),_step57;!(_iteratorNormalCompletion57=(_step57=_iterator57.next()).done);_iteratorNormalCompletion57=true){var subitem=_step57.value;if(!ul4._islist(subitem)||subitem.length!=2)throw new ul4.ArgumentError("** requires a list of (key, value) pairs");ul4._setmap(result,subitem[0],subitem[1]);}}catch(err){_didIteratorError57=true;_iteratorError57=err;}finally{try{if(!_iteratorNormalCompletion57&&_iterator57.return){_iterator57.return();}}finally{if(_didIteratorError57){throw _iteratorError57;}}}}else if(ul4._ismap(item)){var _iteratorNormalCompletion58=true;var _didIteratorError58=false;var _iteratorError58=undefined;try{for(var _iterator58=item.entries()[Symbol.iterator](),_step58;!(_iteratorNormalCompletion58=(_step58=_iterator58.next()).done);_iteratorNormalCompletion58=true){var _step58$value=_slicedToArray(_step58.value,2),key=_step58$value[0],value=_step58$value[1];ul4._setmap(result,key,value);}}catch(err){_didIteratorError58=true;_iteratorError58=err;}finally{try{if(!_iteratorNormalCompletion58&&_iterator58.return){_iterator58.return();}}finally{if(_didIteratorError58){throw _iteratorError58;}}}}else if(ul4._isobject(item)){for(var _key20 in item){ul4._setmap(result,_key20,item[_key20]);}}}}]);return UnpackDictItemAST;}(ul4.ItemArgBase);ul4.UnpackDictItemAST.prototype._ul4onattrs=ul4.ItemArgBase.prototype._ul4onattrs.concat(["item"]);ul4.PosArgAST=function(_ul4$ItemArgBase5){_inherits(PosArgAST,_ul4$ItemArgBase5);function PosArgAST(template,pos,value){_classCallCheck(this,PosArgAST);var _this34=_possibleConstructorReturn(this,(PosArgAST.__proto__||Object.getPrototypeOf(PosArgAST)).call(this,template,pos));_this34.value=value;return _this34;}_createClass(PosArgAST,[{key:"_repr",value:function _repr(out){out.push("<PosArgAST value=");this.value._repr(out);out.push(">");}},{key:"_eval_call",value:function _eval_call(context,args,kwargs){var value=this.value._handle_eval(context);args.push(value);}}]);return PosArgAST;}(ul4.ItemArgBase);ul4.PosArgAST.prototype._ul4onattrs=ul4.ItemArgBase.prototype._ul4onattrs.concat(["value"]);ul4.KeywordArgAST=function(_ul4$ItemArgBase6){_inherits(KeywordArgAST,_ul4$ItemArgBase6);function KeywordArgAST(template,pos,name,value){_classCallCheck(this,KeywordArgAST);var _this35=_possibleConstructorReturn(this,(KeywordArgAST.__proto__||Object.getPrototypeOf(KeywordArgAST)).call(this,template,pos));_this35.name=name;_this35.value=value;return _this35;}_createClass(KeywordArgAST,[{key:"_repr",value:function _repr(out){out.push("<KeywordArgAST name=");out.push(ul4._repr(this.name));out.push(" value=");this.value._repr(out);out.push(">");}},{key:"_eval_call",value:function _eval_call(context,args,kwargs){if(kwargs.hasOwnProperty(this.name))throw new ul4.ArgumentError("duplicate keyword argument "+this.name);var value=this.value._handle_eval(context);kwargs[this.name]=value;}}]);return KeywordArgAST;}(ul4.ItemArgBase);ul4.KeywordArgAST.prototype._ul4onattrs=ul4.ItemArgBase.prototype._ul4onattrs.concat(["name","value"]);ul4.UnpackListArgAST=function(_ul4$ItemArgBase7){_inherits(UnpackListArgAST,_ul4$ItemArgBase7);function UnpackListArgAST(template,pos,item){_classCallCheck(this,UnpackListArgAST);var _this36=_possibleConstructorReturn(this,(UnpackListArgAST.__proto__||Object.getPrototypeOf(UnpackListArgAST)).call(this,template,pos));_this36.item=item;return _this36;}_createClass(UnpackListArgAST,[{key:"_repr",value:function _repr(out){out.push("<UnpackListArgAST item=");this.item._repr(out);out.push(">");}},{key:"_eval_call",value:function _eval_call(context,args,kwargs){var item=this.item._handle_eval(context);args.push.apply(args,_toConsumableArray(item));}}]);return UnpackListArgAST;}(ul4.ItemArgBase);ul4.UnpackListArgAST.prototype._ul4onattrs=ul4.ItemArgBase.prototype._ul4onattrs.concat(["item"]);ul4.UnpackDictArgAST=function(_ul4$ItemArgBase8){_inherits(UnpackDictArgAST,_ul4$ItemArgBase8);function UnpackDictArgAST(template,pos,item){_classCallCheck(this,UnpackDictArgAST);var _this37=_possibleConstructorReturn(this,(UnpackDictArgAST.__proto__||Object.getPrototypeOf(UnpackDictArgAST)).call(this,template,pos));_this37.item=item;return _this37;}_createClass(UnpackDictArgAST,[{key:"_repr",value:function _repr(out){out.push("<UnpackDictArgAST item=");this.item._repr(out);out.push(">");}},{key:"_eval_call",value:function _eval_call(context,args,kwargs){var item=this.item._handle_eval(context);if(ul4._islist(item)){var _iteratorNormalCompletion59=true;var _didIteratorError59=false;var _iteratorError59=undefined;try{for(var _iterator59=item[Symbol.iterator](),_step59;!(_iteratorNormalCompletion59=(_step59=_iterator59.next()).done);_iteratorNormalCompletion59=true){var subitem=_step59.value;if(!ul4._islist(subitem)||subitem.length!=2)throw new ul4.ArgumentError("** requires a list of (key, value) pairs");var _subitem=_slicedToArray(subitem,2),key=_subitem[0],value=_subitem[1];if(kwargs.hasOwnProperty(key))throw new ul4.ArgumentError("duplicate keyword argument "+key);kwargs[key]=value;}}catch(err){_didIteratorError59=true;_iteratorError59=err;}finally{try{if(!_iteratorNormalCompletion59&&_iterator59.return){_iterator59.return();}}finally{if(_didIteratorError59){throw _iteratorError59;}}}}else if(ul4._ismap(item)){var _iteratorNormalCompletion60=true;var _didIteratorError60=false;var _iteratorError60=undefined;try{for(var _iterator60=item.entries()[Symbol.iterator](),_step60;!(_iteratorNormalCompletion60=(_step60=_iterator60.next()).done);_iteratorNormalCompletion60=true){var _step60$value=_slicedToArray(_step60.value,2),_key21=_step60$value[0],_value29=_step60$value[1];if(kwargs.hasOwnProperty(_key21))throw new ul4.ArgumentError("duplicate keyword argument "+_key21);kwargs[_key21]=_value29;}}catch(err){_didIteratorError60=true;_iteratorError60=err;}finally{try{if(!_iteratorNormalCompletion60&&_iterator60.return){_iterator60.return();}}finally{if(_didIteratorError60){throw _iteratorError60;}}};}else if(ul4._isobject(item)){for(var _key22 in item){if(kwargs.hasOwnProperty(_key22))throw new ul4.ArgumentError("duplicate keyword argument "+_key22);kwargs[_key22]=item[_key22];}}}}]);return UnpackDictArgAST;}(ul4.ItemArgBase);ul4.UnpackDictArgAST.prototype._ul4onattrs=ul4.ItemArgBase.prototype._ul4onattrs.concat(["item"]);ul4.ListAST=function(_ul4$CodeAST3){_inherits(ListAST,_ul4$CodeAST3);function ListAST(template,pos){_classCallCheck(this,ListAST);var _this38=_possibleConstructorReturn(this,(ListAST.__proto__||Object.getPrototypeOf(ListAST)).call(this,template,pos));_this38.items=[];return _this38;}_createClass(ListAST,[{key:"_repr",value:function _repr(out){out.push("<ListAST");var _iteratorNormalCompletion61=true;var _didIteratorError61=false;var _iteratorError61=undefined;try{for(var _iterator61=this.items[Symbol.iterator](),_step61;!(_iteratorNormalCompletion61=(_step61=_iterator61.next()).done);_iteratorNormalCompletion61=true){var item=_step61.value;out.push(" ");item._repr(out);}}catch(err){_didIteratorError61=true;_iteratorError61=err;}finally{try{if(!_iteratorNormalCompletion61&&_iterator61.return){_iterator61.return();}}finally{if(_didIteratorError61){throw _iteratorError61;}}}out.push(">");}},{key:"_eval",value:function _eval(context){var result=[];var _iteratorNormalCompletion62=true;var _didIteratorError62=false;var _iteratorError62=undefined;try{for(var _iterator62=this.items[Symbol.iterator](),_step62;!(_iteratorNormalCompletion62=(_step62=_iterator62.next()).done);_iteratorNormalCompletion62=true){var item=_step62.value;item._handle_eval_list(context,result);}}catch(err){_didIteratorError62=true;_iteratorError62=err;}finally{try{if(!_iteratorNormalCompletion62&&_iterator62.return){_iterator62.return();}}finally{if(_didIteratorError62){throw _iteratorError62;}}}return result;}}]);return ListAST;}(ul4.CodeAST);ul4.ListAST.prototype._ul4onattrs=ul4.CodeAST.prototype._ul4onattrs.concat(["items"]);ul4.ListCompAST=function(_ul4$CodeAST4){_inherits(ListCompAST,_ul4$CodeAST4);function ListCompAST(template,pos,item,varname,container,condition){_classCallCheck(this,ListCompAST);var _this39=_possibleConstructorReturn(this,(ListCompAST.__proto__||Object.getPrototypeOf(ListCompAST)).call(this,template,pos));_this39.item=item;_this39.varname=varname;_this39.container=container;_this39.condition=condition;return _this39;}_createClass(ListCompAST,[{key:"_repr",value:function _repr(out){out.push("<ListCompAST");out.push(" item=");this.item._repr(out);out.push(" varname=");out.push(ul4._repr(this.varname));out.push(" container=");this.container._repr(out);if(this.condition!==null){out.push(" condition=");this.condition._repr(out);}out.push(">");}},{key:"_eval",value:function _eval(context){var container=this.container._handle_eval(context);var localcontext=context.inheritvars();var result=[];for(var iter=ul4._iter(container);;){var item=iter.next();if(item.done)break;var varitems=ul4._unpackvar(this.varname,item.value);var _iteratorNormalCompletion63=true;var _didIteratorError63=false;var _iteratorError63=undefined;try{for(var _iterator63=varitems[Symbol.iterator](),_step63;!(_iteratorNormalCompletion63=(_step63=_iterator63.next()).done);_iteratorNormalCompletion63=true){var _step63$value=_slicedToArray(_step63.value,2),lvalue=_step63$value[0],value=_step63$value[1];lvalue._handle_eval_set(localcontext,value);}}catch(err){_didIteratorError63=true;_iteratorError63=err;}finally{try{if(!_iteratorNormalCompletion63&&_iterator63.return){_iterator63.return();}}finally{if(_didIteratorError63){throw _iteratorError63;}}}if(this.condition===null||ul4._bool(this.condition._handle_eval(localcontext)))result.push(this.item._handle_eval(localcontext));}return result;}}]);return ListCompAST;}(ul4.CodeAST);ul4.ListCompAST.prototype._ul4onattrs=ul4.CodeAST.prototype._ul4onattrs.concat(["item","varname","container","condition"]);ul4.SetAST=function(_ul4$CodeAST5){_inherits(SetAST,_ul4$CodeAST5);function SetAST(template,pos){_classCallCheck(this,SetAST);var _this40=_possibleConstructorReturn(this,(SetAST.__proto__||Object.getPrototypeOf(SetAST)).call(this,template,pos));_this40.items=[];return _this40;}_createClass(SetAST,[{key:"_repr",value:function _repr(out){out.push("<SetAST");var _iteratorNormalCompletion64=true;var _didIteratorError64=false;var _iteratorError64=undefined;try{for(var _iterator64=this.items[Symbol.iterator](),_step64;!(_iteratorNormalCompletion64=(_step64=_iterator64.next()).done);_iteratorNormalCompletion64=true){var item=_step64.value;out.push(" ");item._repr(out);}}catch(err){_didIteratorError64=true;_iteratorError64=err;}finally{try{if(!_iteratorNormalCompletion64&&_iterator64.return){_iterator64.return();}}finally{if(_didIteratorError64){throw _iteratorError64;}}}out.push(">");}},{key:"_eval",value:function _eval(context){var result=ul4._emptyset();var _iteratorNormalCompletion65=true;var _didIteratorError65=false;var _iteratorError65=undefined;try{for(var _iterator65=this.items[Symbol.iterator](),_step65;!(_iteratorNormalCompletion65=(_step65=_iterator65.next()).done);_iteratorNormalCompletion65=true){var item=_step65.value;item._handle_eval_set(context,result);}}catch(err){_didIteratorError65=true;_iteratorError65=err;}finally{try{if(!_iteratorNormalCompletion65&&_iterator65.return){_iterator65.return();}}finally{if(_didIteratorError65){throw _iteratorError65;}}}return result;}}]);return SetAST;}(ul4.CodeAST);ul4.SetAST.prototype._ul4onattrs=ul4.CodeAST.prototype._ul4onattrs.concat(["items"]);ul4.SetCompAST=function(_ul4$CodeAST6){_inherits(SetCompAST,_ul4$CodeAST6);function SetCompAST(template,pos,item,varname,container,condition){_classCallCheck(this,SetCompAST);var _this41=_possibleConstructorReturn(this,(SetCompAST.__proto__||Object.getPrototypeOf(SetCompAST)).call(this,template,pos));_this41.item=item;_this41.varname=varname;_this41.container=container;_this41.condition=condition;return _this41;}_createClass(SetCompAST,[{key:"__getattr__",value:function __getattr__(attrname){switch(attrname){case"item":return this.item;case"varname":return this.varname;case"container":return this.container;case"condition":return this.condition;default:return _get2(SetCompAST.prototype.__proto__||Object.getPrototypeOf(SetCompAST.prototype),"__getattr__",this).call(this,attrname);}}},{key:"_repr",value:function _repr(out){out.push("<SetCompAST");out.push(" item=");this.item._repr(out);out.push(" varname=");this.varname._repr(out);out.push(" container=");this.container._repr(out);if(this.condition!==null){out.push(" condition=");this.condition._repr(out);}out.push(">");}},{key:"_eval",value:function _eval(context){var container=this.container._handle_eval(context);var localcontext=context.inheritvars();var result=ul4._emptyset();for(var iter=ul4._iter(container);;){var item=iter.next();if(item.done)break;var varitems=ul4._unpackvar(this.varname,item.value);var _iteratorNormalCompletion66=true;var _didIteratorError66=false;var _iteratorError66=undefined;try{for(var _iterator66=varitems[Symbol.iterator](),_step66;!(_iteratorNormalCompletion66=(_step66=_iterator66.next()).done);_iteratorNormalCompletion66=true){var _step66$value=_slicedToArray(_step66.value,2),lvalue=_step66$value[0],value=_step66$value[1];lvalue._handle_eval_set(localcontext,value);}}catch(err){_didIteratorError66=true;_iteratorError66=err;}finally{try{if(!_iteratorNormalCompletion66&&_iterator66.return){_iterator66.return();}}finally{if(_didIteratorError66){throw _iteratorError66;}}}if(this.condition===null||ul4._bool(this.condition._handle_eval(localcontext)))result.add(this.item._handle_eval(localcontext));}return result;}}]);return SetCompAST;}(ul4.CodeAST);ul4.SetCompAST.prototype._ul4onattrs=ul4.CodeAST.prototype._ul4onattrs.concat(["item","varname","container","condition"]);ul4.DictAST=function(_ul4$CodeAST7){_inherits(DictAST,_ul4$CodeAST7);function DictAST(template,pos){_classCallCheck(this,DictAST);var _this42=_possibleConstructorReturn(this,(DictAST.__proto__||Object.getPrototypeOf(DictAST)).call(this,template,pos));_this42.items=[];return _this42;}_createClass(DictAST,[{key:"__getattr__",value:function __getattr__(attrname){switch(attrname){case"items":return this.items;default:return _get2(DictAST.prototype.__proto__||Object.getPrototypeOf(DictAST.prototype),"__getattr__",this).call(this,attrname);}}},{key:"_repr",value:function _repr(out){out.push("<DictAST");var _iteratorNormalCompletion67=true;var _didIteratorError67=false;var _iteratorError67=undefined;try{for(var _iterator67=this.items[Symbol.iterator](),_step67;!(_iteratorNormalCompletion67=(_step67=_iterator67.next()).done);_iteratorNormalCompletion67=true){var item=_step67.value;out.push(" ");item._repr(out);}}catch(err){_didIteratorError67=true;_iteratorError67=err;}finally{try{if(!_iteratorNormalCompletion67&&_iterator67.return){_iterator67.return();}}finally{if(_didIteratorError67){throw _iteratorError67;}}}out.push(">");}},{key:"_eval",value:function _eval(context){var result=ul4._emptymap();var _iteratorNormalCompletion68=true;var _didIteratorError68=false;var _iteratorError68=undefined;try{for(var _iterator68=this.items[Symbol.iterator](),_step68;!(_iteratorNormalCompletion68=(_step68=_iterator68.next()).done);_iteratorNormalCompletion68=true){var item=_step68.value;item._handle_eval_dict(context,result);}}catch(err){_didIteratorError68=true;_iteratorError68=err;}finally{try{if(!_iteratorNormalCompletion68&&_iterator68.return){_iterator68.return();}}finally{if(_didIteratorError68){throw _iteratorError68;}}}return result;}}]);return DictAST;}(ul4.CodeAST);ul4.DictAST.prototype._ul4onattrs=ul4.CodeAST.prototype._ul4onattrs.concat(["items"]);ul4.DictCompAST=function(_ul4$CodeAST8){_inherits(DictCompAST,_ul4$CodeAST8);function DictCompAST(template,pos,key,value,varname,container,condition){_classCallCheck(this,DictCompAST);var _this43=_possibleConstructorReturn(this,(DictCompAST.__proto__||Object.getPrototypeOf(DictCompAST)).call(this,template,pos));_this43.key=key;_this43.value=value;_this43.varname=varname;_this43.container=container;_this43.condition=condition;return _this43;}_createClass(DictCompAST,[{key:"_repr",value:function _repr(out){out.push("<DictCompAST");out.push(" key=");this.key._repr(out);out.push(" value=");this.value._repr(out);out.push(" varname=");this.varname._repr(out);out.push(" container=");this.container._repr(out);if(this.condition!==null){out.push(" condition=");this.condition._repr(out);}out.push(">");}},{key:"_eval",value:function _eval(context){var container=this.container._handle_eval(context);var localcontext=context.inheritvars();var result=ul4._emptymap();for(var iter=ul4._iter(container);;){var item=iter.next();if(item.done)break;var varitems=ul4._unpackvar(this.varname,item.value);var _iteratorNormalCompletion69=true;var _didIteratorError69=false;var _iteratorError69=undefined;try{for(var _iterator69=varitems[Symbol.iterator](),_step69;!(_iteratorNormalCompletion69=(_step69=_iterator69.next()).done);_iteratorNormalCompletion69=true){var _step69$value=_slicedToArray(_step69.value,2),lvalue=_step69$value[0],value=_step69$value[1];lvalue._handle_eval_set(localcontext,value);}}catch(err){_didIteratorError69=true;_iteratorError69=err;}finally{try{if(!_iteratorNormalCompletion69&&_iterator69.return){_iterator69.return();}}finally{if(_didIteratorError69){throw _iteratorError69;}}}if(this.condition===null||ul4._bool(this.condition._handle_eval(localcontext))){var key=this.key._handle_eval(localcontext);var _value30=this.value._handle_eval(localcontext);ul4._setmap(result,key,_value30);}}return result;}}]);return DictCompAST;}(ul4.CodeAST);ul4.DictCompAST.prototype._ul4onattrs=ul4.CodeAST.prototype._ul4onattrs.concat(["key","value","varname","container","condition"]);ul4.GenExprAST=function(_ul4$CodeAST9){_inherits(GenExprAST,_ul4$CodeAST9);function GenExprAST(template,pos,item,varname,container,condition){_classCallCheck(this,GenExprAST);var _this44=_possibleConstructorReturn(this,(GenExprAST.__proto__||Object.getPrototypeOf(GenExprAST)).call(this,template,pos));_this44.item=item;_this44.varname=varname;_this44.container=container;_this44.condition=condition;return _this44;}_createClass(GenExprAST,[{key:"_repr",value:function _repr(out){out.push("<GenExprAST");out.push(" item=");this.item._repr(out);out.push(" varname=");this.varname._repr(out);out.push(" container=");this.container._repr(out);if(this.condition!==null){out.push(" condition=");this.condition._repr(out);}out.push(">");}},{key:"_eval",value:function _eval(context){var container=this.container._handle_eval(context);var iter=ul4._iter(container);var localcontext=context.inheritvars();var self=this;var result={next:function(){while(true){var item=iter.next();if(item.done)return item;var varitems=ul4._unpackvar(self.varname,item.value);var _iteratorNormalCompletion70=true;var _didIteratorError70=false;var _iteratorError70=undefined;try{for(var _iterator70=varitems[Symbol.iterator](),_step70;!(_iteratorNormalCompletion70=(_step70=_iterator70.next()).done);_iteratorNormalCompletion70=true){var _step70$value=_slicedToArray(_step70.value,2),lvalue=_step70$value[0],value=_step70$value[1];lvalue._handle_eval_set(localcontext,value);}}catch(err){_didIteratorError70=true;_iteratorError70=err;}finally{try{if(!_iteratorNormalCompletion70&&_iterator70.return){_iterator70.return();}}finally{if(_didIteratorError70){throw _iteratorError70;}}}if(self.condition===null||ul4._bool(self.condition._handle_eval(localcontext))){var _value31=self.item._handle_eval(localcontext);return{value:_value31,done:false};}}}};return result;}}]);return GenExprAST;}(ul4.CodeAST);ul4.GenExprAST.prototype._ul4onattrs=ul4.CodeAST.prototype._ul4onattrs.concat(["item","varname","container","condition"]);ul4.VarAST=function(_ul4$CodeAST10){_inherits(VarAST,_ul4$CodeAST10);function VarAST(template,pos,name){_classCallCheck(this,VarAST);var _this45=_possibleConstructorReturn(this,(VarAST.__proto__||Object.getPrototypeOf(VarAST)).call(this,template,pos));_this45.name=name;return _this45;}_createClass(VarAST,[{key:"_repr",value:function _repr(out){out.push("<VarAST name=");out.push(ul4._repr(this.name));out.push(">");}},{key:"_eval",value:function _eval(context){return this._get(context,this.name);}},{key:"_eval_set",value:function _eval_set(context,value){this._set(context,this.name,value);}},{key:"_eval_modify",value:function _eval_modify(context,operator,value){this._modify(context,operator,this.name,value);}},{key:"_get",value:function _get(context,name){var result=context.get(name);if(typeof result==="undefined")result=ul4.functions[name];return result;}},{key:"_set",value:function _set(context,name,value){context.set(name,value);}},{key:"_modify",value:function _modify(context,operator,name,value){var newvalue=operator._ido(context.get(name),value);context.set(name,newvalue);}}]);return VarAST;}(ul4.CodeAST);ul4.VarAST.prototype._ul4onattrs=ul4.CodeAST.prototype._ul4onattrs.concat(["name"]);ul4.UnaryAST=function(_ul4$CodeAST11){_inherits(UnaryAST,_ul4$CodeAST11);function UnaryAST(template,pos,obj){_classCallCheck(this,UnaryAST);var _this46=_possibleConstructorReturn(this,(UnaryAST.__proto__||Object.getPrototypeOf(UnaryAST)).call(this,template,pos));_this46.obj=obj;return _this46;}_createClass(UnaryAST,[{key:"_repr",value:function _repr(out){out.push("<");out.push(this.constructor.name);out.push(" obj=");this.obj._repr(out);out.push(">");}},{key:"_eval",value:function _eval(context){var obj=this.obj._handle_eval(context);return this._do(obj);}}]);return UnaryAST;}(ul4.CodeAST);ul4.UnaryAST.prototype._ul4onattrs=ul4.CodeAST.prototype._ul4onattrs.concat(["obj"]);ul4.NegAST=function(_ul4$UnaryAST){_inherits(NegAST,_ul4$UnaryAST);function NegAST(){_classCallCheck(this,NegAST);return _possibleConstructorReturn(this,(NegAST.__proto__||Object.getPrototypeOf(NegAST)).apply(this,arguments));}_createClass(NegAST,[{key:"_do",value:function _do(obj){if(obj!==null&&typeof obj.__neg__==="function")return obj.__neg__();return-obj;}}]);return NegAST;}(ul4.UnaryAST);ul4.BitNotAST=function(_ul4$UnaryAST2){_inherits(BitNotAST,_ul4$UnaryAST2);function BitNotAST(){_classCallCheck(this,BitNotAST);return _possibleConstructorReturn(this,(BitNotAST.__proto__||Object.getPrototypeOf(BitNotAST)).apply(this,arguments));}_createClass(BitNotAST,[{key:"_do",value:function _do(obj){return-obj-1;}}]);return BitNotAST;}(ul4.UnaryAST);ul4.NotAST=function(_ul4$UnaryAST3){_inherits(NotAST,_ul4$UnaryAST3);function NotAST(){_classCallCheck(this,NotAST);return _possibleConstructorReturn(this,(NotAST.__proto__||Object.getPrototypeOf(NotAST)).apply(this,arguments));}_createClass(NotAST,[{key:"_do",value:function _do(obj){return!ul4._bool(obj);}}]);return NotAST;}(ul4.UnaryAST);ul4.IfAST=function(_ul4$CodeAST12){_inherits(IfAST,_ul4$CodeAST12);function IfAST(template,pos,objif,objcond,objelse){_classCallCheck(this,IfAST);var _this50=_possibleConstructorReturn(this,(IfAST.__proto__||Object.getPrototypeOf(IfAST)).call(this,template,pos));_this50.objif=objif;_this50.objcond=objcond;_this50.objelse=objelse;return _this50;}_createClass(IfAST,[{key:"_repr",value:function _repr(out){out.push("<");out.push(this.constructor.name);out.push(+1);out.push("objif=");this.objif._repr(out);out.push(0);out.push("objcond=");this.objcond._repr(out);out.push(0);out.push("objelse=");this.objelse._repr(out);out.push(-1);out.push(">");}},{key:"_eval",value:function _eval(context){var result=void 0;var condvalue=this.objcond._handle_eval(context);if(ul4._bool(condvalue))result=this.objif._handle_eval(context);else result=this.objelse._handle_eval(context);return result;}}]);return IfAST;}(ul4.CodeAST);ul4.IfAST.prototype._ul4onattrs=ul4.CodeAST.prototype._ul4onattrs.concat(["objif","objcond","objelse"]);ul4.ReturnAST=function(_ul4$UnaryAST4){_inherits(ReturnAST,_ul4$UnaryAST4);function ReturnAST(){_classCallCheck(this,ReturnAST);return _possibleConstructorReturn(this,(ReturnAST.__proto__||Object.getPrototypeOf(ReturnAST)).apply(this,arguments));}_createClass(ReturnAST,[{key:"_eval",value:function _eval(context){var result=this.obj._handle_eval(context);throw new ul4.ReturnException(result);}},{key:"_str",value:function _str(out){out.push("return ");this.obj._str(out);}}]);return ReturnAST;}(ul4.UnaryAST);ul4.PrintAST=function(_ul4$UnaryAST5){_inherits(PrintAST,_ul4$UnaryAST5);function PrintAST(){_classCallCheck(this,PrintAST);return _possibleConstructorReturn(this,(PrintAST.__proto__||Object.getPrototypeOf(PrintAST)).apply(this,arguments));}_createClass(PrintAST,[{key:"_eval",value:function _eval(context){var obj=this.obj._handle_eval(context);var output=ul4._str(obj);context.output(output);}},{key:"_str",value:function _str(out){out.push("print ");this.obj._str(out);}}]);return PrintAST;}(ul4.UnaryAST);ul4.PrintXAST=function(_ul4$UnaryAST6){_inherits(PrintXAST,_ul4$UnaryAST6);function PrintXAST(){_classCallCheck(this,PrintXAST);return _possibleConstructorReturn(this,(PrintXAST.__proto__||Object.getPrototypeOf(PrintXAST)).apply(this,arguments));}_createClass(PrintXAST,[{key:"_eval",value:function _eval(context){var obj=this.obj._handle_eval(context);var output=ul4._xmlescape(obj);context.output(output);}},{key:"_str",value:function _str(out){out.push("printx ");this.obj._str(out);}}]);return PrintXAST;}(ul4.UnaryAST);ul4.BinaryAST=function(_ul4$CodeAST13){_inherits(BinaryAST,_ul4$CodeAST13);function BinaryAST(template,pos,obj1,obj2){_classCallCheck(this,BinaryAST);var _this54=_possibleConstructorReturn(this,(BinaryAST.__proto__||Object.getPrototypeOf(BinaryAST)).call(this,template,pos));_this54.obj1=obj1;_this54.obj2=obj2;return _this54;}_createClass(BinaryAST,[{key:"_repr",value:function _repr(out){out.push("<");out.push(this.constructor.name);out.push(" obj1=");this.obj1._repr(out);out.push(" obj2=");this.obj2._repr(out);out.push(">");}},{key:"_eval",value:function _eval(context){var obj1=this.obj1._handle_eval(context);var obj2=this.obj2._handle_eval(context);return this._do(obj1,obj2);}}]);return BinaryAST;}(ul4.CodeAST);ul4.BinaryAST.prototype._ul4onattrs=ul4.CodeAST.prototype._ul4onattrs.concat(["obj1","obj2"]);ul4.ItemAST=function(_ul4$BinaryAST){_inherits(ItemAST,_ul4$BinaryAST);function ItemAST(){_classCallCheck(this,ItemAST);return _possibleConstructorReturn(this,(ItemAST.__proto__||Object.getPrototypeOf(ItemAST)).apply(this,arguments));}_createClass(ItemAST,[{key:"_do",value:function _do(obj1,obj2){var result=this._get(obj1,obj2);return result;}},{key:"_eval_set",value:function _eval_set(context,value){var obj1=this.obj1._handle_eval(context);var obj2=this.obj2._handle_eval(context);this._set(obj1,obj2,value);}},{key:"_eval_modify",value:function _eval_modify(context,operator,value){var obj1=this.obj1._handle_eval(context);var obj2=this.obj2._handle_eval(context);this._modify(operator,obj1,obj2,value);}},{key:"_get",value:function _get(container,key){if(typeof container==="string"||ul4._islist(container)){if(key instanceof ul4.slice){var start=key.start,stop=key.stop;if(typeof start==="undefined"||start===null)start=0;if(typeof stop==="undefined"||stop===null)stop=container.length;return container.slice(start,stop);}else{var orgkey=key;if(key<0)key+=container.length;if(key<0||key>=container.length)throw new ul4.IndexError(container,orgkey);return container[key];}}else if(container&&typeof container.__getitem__==="function")return container.__getitem__(key);else if(ul4._ismap(container))return container.get(key);else throw new ul4.TypeError(ul4._type(container)+" object is not subscriptable");}},{key:"_set",value:function _set(container,key,value){if(ul4._islist(container)){if(key instanceof ul4.slice){var start=key.start,stop=key.stop;if(start===null)start=0;else if(start<0)start+=container.length;if(start<0)start=0;else if(start>container.length)start=container.length;if(stop===null)stop=container.length;else if(stop<0)stop+=container.length;if(stop<0)stop=0;else if(stop>container.length)stop=container.length;if(stop<start)stop=start;container.splice(start,stop-start);for(var iter=ul4._iter(value);;){var item=iter.next();if(item.done)break;container.splice(start++,0,item.value);}}else{var orgkey=key;if(key<0)key+=container.length;if(key<0||key>=container.length)throw new ul4.IndexError(container,orgkey);container[key]=value;}}else if(container&&typeof container.__setitem__==="function")container.__setitem__(key,value);else if(ul4._ismap(container))container.set(key,value);else if(ul4._isobject(container))container[key]=value;else throw new ul4.NotSubscriptableError(container);}},{key:"_modify",value:function _modify(operator,container,key,value){this._set(container,key,operator._ido(this._get(container,key),value));}}]);return ItemAST;}(ul4.BinaryAST);ul4.IsAST=function(_ul4$BinaryAST2){_inherits(IsAST,_ul4$BinaryAST2);function IsAST(){_classCallCheck(this,IsAST);return _possibleConstructorReturn(this,(IsAST.__proto__||Object.getPrototypeOf(IsAST)).apply(this,arguments));}_createClass(IsAST,[{key:"_do",value:function _do(obj1,obj2){return obj1===obj2;}}]);return IsAST;}(ul4.BinaryAST);ul4.IsNotAST=function(_ul4$BinaryAST3){_inherits(IsNotAST,_ul4$BinaryAST3);function IsNotAST(){_classCallCheck(this,IsNotAST);return _possibleConstructorReturn(this,(IsNotAST.__proto__||Object.getPrototypeOf(IsNotAST)).apply(this,arguments));}_createClass(IsNotAST,[{key:"_do",value:function _do(obj1,obj2){return obj1!==obj2;}}]);return IsNotAST;}(ul4.BinaryAST);ul4.EQAST=function(_ul4$BinaryAST4){_inherits(EQAST,_ul4$BinaryAST4);function EQAST(){_classCallCheck(this,EQAST);return _possibleConstructorReturn(this,(EQAST.__proto__||Object.getPrototypeOf(EQAST)).apply(this,arguments));}_createClass(EQAST,[{key:"_do",value:function _do(obj1,obj2){return ul4._eq(obj1,obj2);}}]);return EQAST;}(ul4.BinaryAST);ul4.NEAST=function(_ul4$BinaryAST5){_inherits(NEAST,_ul4$BinaryAST5);function NEAST(){_classCallCheck(this,NEAST);return _possibleConstructorReturn(this,(NEAST.__proto__||Object.getPrototypeOf(NEAST)).apply(this,arguments));}_createClass(NEAST,[{key:"_do",value:function _do(obj1,obj2){return ul4._ne(obj1,obj2);}}]);return NEAST;}(ul4.BinaryAST);ul4.LTAST=function(_ul4$BinaryAST6){_inherits(LTAST,_ul4$BinaryAST6);function LTAST(){_classCallCheck(this,LTAST);return _possibleConstructorReturn(this,(LTAST.__proto__||Object.getPrototypeOf(LTAST)).apply(this,arguments));}_createClass(LTAST,[{key:"_do",value:function _do(obj1,obj2){return ul4._lt(obj1,obj2);}}]);return LTAST;}(ul4.BinaryAST);ul4.LEAST=function(_ul4$BinaryAST7){_inherits(LEAST,_ul4$BinaryAST7);function LEAST(){_classCallCheck(this,LEAST);return _possibleConstructorReturn(this,(LEAST.__proto__||Object.getPrototypeOf(LEAST)).apply(this,arguments));}_createClass(LEAST,[{key:"_do",value:function _do(obj1,obj2){return ul4._le(obj1,obj2);}}]);return LEAST;}(ul4.BinaryAST);ul4.GTAST=function(_ul4$BinaryAST8){_inherits(GTAST,_ul4$BinaryAST8);function GTAST(){_classCallCheck(this,GTAST);return _possibleConstructorReturn(this,(GTAST.__proto__||Object.getPrototypeOf(GTAST)).apply(this,arguments));}_createClass(GTAST,[{key:"_do",value:function _do(obj1,obj2){return ul4._gt(obj1,obj2);}}]);return GTAST;}(ul4.BinaryAST);ul4.GEAST=function(_ul4$BinaryAST9){_inherits(GEAST,_ul4$BinaryAST9);function GEAST(){_classCallCheck(this,GEAST);return _possibleConstructorReturn(this,(GEAST.__proto__||Object.getPrototypeOf(GEAST)).apply(this,arguments));}_createClass(GEAST,[{key:"_do",value:function _do(obj1,obj2){return ul4._ge(obj1,obj2);}}]);return GEAST;}(ul4.BinaryAST);ul4.ContainsAST=function(_ul4$BinaryAST10){_inherits(ContainsAST,_ul4$BinaryAST10);function ContainsAST(){_classCallCheck(this,ContainsAST);return _possibleConstructorReturn(this,(ContainsAST.__proto__||Object.getPrototypeOf(ContainsAST)).apply(this,arguments));}_createClass(ContainsAST,[{key:"_do",value:function _do(obj,container){if(typeof obj==="string"&&typeof container==="string"){return container.indexOf(obj)!==-1;}else if(ul4._islist(container)){return container.indexOf(obj)!==-1;}else if(container&&typeof container.__contains__==="function")return container.__contains__(obj);else if(ul4._ismap(container)||ul4._isset(container))return container.has(obj);else if(ul4._isobject(container)){for(var key in container){if(key===obj)return true;}return false;}else if(ul4._iscolor(container)){return container._r===obj||container._g===obj||container._b===obj||container._a===obj;}throw new ul4.TypeError(ul4._type(container)+" object is not iterable");}}]);return ContainsAST;}(ul4.BinaryAST);ul4.NotContainsAST=function(_ul4$BinaryAST11){_inherits(NotContainsAST,_ul4$BinaryAST11);function NotContainsAST(){_classCallCheck(this,NotContainsAST);return _possibleConstructorReturn(this,(NotContainsAST.__proto__||Object.getPrototypeOf(NotContainsAST)).apply(this,arguments));}_createClass(NotContainsAST,[{key:"_do",value:function _do(obj,container){return!ul4.ContainsAST.prototype._do(obj,container);}}]);return NotContainsAST;}(ul4.BinaryAST);ul4.AddAST=function(_ul4$BinaryAST12){_inherits(AddAST,_ul4$BinaryAST12);function AddAST(){_classCallCheck(this,AddAST);return _possibleConstructorReturn(this,(AddAST.__proto__||Object.getPrototypeOf(AddAST)).apply(this,arguments));}_createClass(AddAST,[{key:"_do",value:function _do(obj1,obj2){if(obj1&&typeof obj1.__add__==="function")return obj1.__add__(obj2);else if(obj2&&typeof obj2.__radd__==="function")return obj2.__radd__(obj1);if(obj1===null||obj2===null)throw new ul4.TypeError(ul4._type(this.obj1)+" + "+ul4._type(this.obj2)+" is not supported");if(ul4._islist(obj1)&&ul4._islist(obj2))return[].concat(_toConsumableArray(obj1),_toConsumableArray(obj2));else return obj1+obj2;}},{key:"_ido",value:function _ido(obj1,obj2){if(ul4._islist(obj1)&&ul4._islist(obj2)){ul4.ListProtocol.append(obj1,obj2);return obj1;}else return this._do(obj1,obj2);}}]);return AddAST;}(ul4.BinaryAST);ul4.SubAST=function(_ul4$BinaryAST13){_inherits(SubAST,_ul4$BinaryAST13);function SubAST(){_classCallCheck(this,SubAST);return _possibleConstructorReturn(this,(SubAST.__proto__||Object.getPrototypeOf(SubAST)).apply(this,arguments));}_createClass(SubAST,[{key:"_do",value:function _do(obj1,obj2){if(obj1&&typeof obj1.__sub__==="function")return obj1.__sub__(obj2);else if(obj2&&typeof obj2.__rsub__==="function")return obj2.__rsub__(obj1);else if(ul4._isdate(obj1)&&ul4._isdate(obj2))return this._date_sub(obj1,obj2);else if(ul4._isdatetime(obj1)&&ul4._isdatetime(obj2))return this._datetime_sub(obj1,obj2);if(obj1===null||obj2===null)throw new ul4.TypeError(ul4._type(this.obj1)+" - "+ul4._type(this.obj2)+" is not supported");return obj1-obj2;}},{key:"_date_sub",value:function _date_sub(obj1,obj2){return this._datetime_sub(obj1._date,obj2._date);}},{key:"_datetime_sub",value:function _datetime_sub(obj1,obj2){var swap=obj2>obj1;if(swap){var t=obj1;obj1=obj2;obj2=t;}var year1=obj1.getFullYear();var yearday1=ul4.DateTimeProtocol.yearday(obj1);var year2=obj2.getFullYear();var yearday2=ul4.DateTimeProtocol.yearday(obj2);var diffdays=0;while(year1>year2){diffdays+=ul4.DateProtocol.yearday(ul4._date(year2,12,31));++year2;}diffdays+=yearday1-yearday2;var hours1=obj1.getHours();var minutes1=obj1.getMinutes();var seconds1=obj1.getSeconds();var hours2=obj2.getHours();var minutes2=obj2.getMinutes();var seconds2=obj2.getSeconds();var diffseconds=seconds1-seconds2+60*(minutes1-minutes2+60*(hours1-hours2));var diffmilliseconds=obj1.getMilliseconds()-obj2.getMilliseconds();if(swap){diffdays=-diffdays;diffseconds=-diffseconds;diffmilliseconds=-diffmilliseconds;}return new ul4.TimeDelta(diffdays,diffseconds,1000*diffmilliseconds);}},{key:"_ido",value:function _ido(obj1,obj2){return this._do(obj1,obj2);}}]);return SubAST;}(ul4.BinaryAST);ul4.MulAST=function(_ul4$BinaryAST14){_inherits(MulAST,_ul4$BinaryAST14);function MulAST(){_classCallCheck(this,MulAST);return _possibleConstructorReturn(this,(MulAST.__proto__||Object.getPrototypeOf(MulAST)).apply(this,arguments));}_createClass(MulAST,[{key:"_do",value:function _do(obj1,obj2){if(obj1&&typeof obj1.__mul__==="function")return obj1.__mul__(obj2);else if(obj2&&typeof obj2.__rmul__==="function")return obj2.__rmul__(obj1);if(obj1===null||obj2===null)throw new ul4.TypeError(ul4._type(obj1)+" * "+ul4._type(obj2)+" not supported");else if(ul4._isint(obj1)||ul4._isbool(obj1)){if(typeof obj2==="string"){if(obj1<0)throw new ul4.ValueError("repetition counter must be positive");return ul4._str_repeat(obj2,obj1);}else if(ul4._islist(obj2)){if(obj1<0)throw new ul4.ValueError("repetition counter must be positive");return ul4._list_repeat(obj2,obj1);}}else if(ul4._isint(obj2)||ul4._isbool(obj2)){if(typeof obj1==="string"){if(obj2<0)throw new ul4.ValueError("repetition counter must be positive");return ul4._str_repeat(obj1,obj2);}else if(ul4._islist(obj1)){if(obj2<0)throw new ul4.ValueError("repetition counter must be positive");return ul4._list_repeat(obj1,obj2);}}return obj1*obj2;}},{key:"_ido",value:function _ido(obj1,obj2){if(ul4._islist(obj1)&&ul4._isint(obj2)){if(obj2>0){var i=0;var targetsize=obj1.length*obj2;while(obj1.length<targetsize){obj1.push(obj1[i++]);}}else obj1.splice(0,obj1.length);return obj1;}else return this._do(obj1,obj2);}}]);return MulAST;}(ul4.BinaryAST);ul4.FloorDivAST=function(_ul4$BinaryAST15){_inherits(FloorDivAST,_ul4$BinaryAST15);function FloorDivAST(){_classCallCheck(this,FloorDivAST);return _possibleConstructorReturn(this,(FloorDivAST.__proto__||Object.getPrototypeOf(FloorDivAST)).apply(this,arguments));}_createClass(FloorDivAST,[{key:"_do",value:function _do(obj1,obj2){if(obj1&&typeof obj1.__floordiv__==="function")return obj1.__floordiv__(obj2);else if(obj2&&typeof obj2.__rfloordiv__==="function")return obj2.__rfloordiv__(obj1);if(obj1===null||obj2===null)throw new ul4.TypeError(ul4._type(obj1)+" // "+ul4._type(obj2)+" not supported");else if(typeof obj1==="number"&&typeof obj2==="number"&&obj2===0)throw new ul4.ZeroDivisionError();return Math.floor(obj1/obj2);}},{key:"_ido",value:function _ido(obj1,obj2){return this._do(obj1,obj2);}}]);return FloorDivAST;}(ul4.BinaryAST);ul4.TrueDivAST=function(_ul4$BinaryAST16){_inherits(TrueDivAST,_ul4$BinaryAST16);function TrueDivAST(){_classCallCheck(this,TrueDivAST);return _possibleConstructorReturn(this,(TrueDivAST.__proto__||Object.getPrototypeOf(TrueDivAST)).apply(this,arguments));}_createClass(TrueDivAST,[{key:"_do",value:function _do(obj1,obj2){if(obj1&&typeof obj1.__truediv__==="function")return obj1.__truediv__(obj2);else if(obj2&&typeof obj2.__rtruediv__==="function")return obj2.__rtruediv__(obj1);if(obj1===null||obj2===null)throw new ul4.TypeError(ul4._type(obj1)+" / "+ul4._type(obj2)+" not supported");else if(typeof obj1==="number"&&typeof obj2==="number"&&obj2===0)throw new ul4.ZeroDivisionError();return obj1/obj2;}},{key:"_ido",value:function _ido(obj1,obj2){return this._do(obj1,obj2);}}]);return TrueDivAST;}(ul4.BinaryAST);ul4.ModAST=function(_ul4$BinaryAST17){_inherits(ModAST,_ul4$BinaryAST17);function ModAST(){_classCallCheck(this,ModAST);return _possibleConstructorReturn(this,(ModAST.__proto__||Object.getPrototypeOf(ModAST)).apply(this,arguments));}_createClass(ModAST,[{key:"_do",value:function _do(obj1,obj2){return ul4._mod(obj1,obj2);}},{key:"_ido",value:function _ido(obj1,obj2){return this._do(obj1,obj2);}}]);return ModAST;}(ul4.BinaryAST);ul4.ShiftLeftAST=function(_ul4$BinaryAST18){_inherits(ShiftLeftAST,_ul4$BinaryAST18);function ShiftLeftAST(){_classCallCheck(this,ShiftLeftAST);return _possibleConstructorReturn(this,(ShiftLeftAST.__proto__||Object.getPrototypeOf(ShiftLeftAST)).apply(this,arguments));}_createClass(ShiftLeftAST,[{key:"_do",value:function _do(obj1,obj2){if(obj2===false)obj2=0;else if(obj2===true)obj2=1;if(obj2<0)return ul4.ShiftRightAST.prototype._do(obj1,-obj2);if(obj1===false)obj1=0;else if(obj1===true)obj1=1;while(obj2--){obj1*=2;}return obj1;}},{key:"_ido",value:function _ido(obj1,obj2){return this._do(obj1,obj2);}}]);return ShiftLeftAST;}(ul4.BinaryAST);ul4.ShiftRightAST=function(_ul4$BinaryAST19){_inherits(ShiftRightAST,_ul4$BinaryAST19);function ShiftRightAST(){_classCallCheck(this,ShiftRightAST);return _possibleConstructorReturn(this,(ShiftRightAST.__proto__||Object.getPrototypeOf(ShiftRightAST)).apply(this,arguments));}_createClass(ShiftRightAST,[{key:"_do",value:function _do(obj1,obj2){if(obj2===false)obj2=0;else if(obj2===true)obj2=1;if(obj2<0)return ul4.ShiftLeftAST.prototype._do(obj1,-obj2);if(obj1===false)obj1=0;else if(obj1===true)obj1=1;while(obj2--){obj1/=2;}return Math.floor(obj1);}},{key:"_ido",value:function _ido(obj1,obj2){return this._do(obj1,obj2);}}]);return ShiftRightAST;}(ul4.BinaryAST);ul4.BitAndAST=function(_ul4$BinaryAST20){_inherits(BitAndAST,_ul4$BinaryAST20);function BitAndAST(){_classCallCheck(this,BitAndAST);return _possibleConstructorReturn(this,(BitAndAST.__proto__||Object.getPrototypeOf(BitAndAST)).apply(this,arguments));}_createClass(BitAndAST,[{key:"_do",value:function _do(obj1,obj2){if(obj2===false)obj2=0;else if(obj2===true)obj2=1;return obj1&obj2;}},{key:"_ido",value:function _ido(obj1,obj2){return this._do(obj1,obj2);}}]);return BitAndAST;}(ul4.BinaryAST);ul4.BitXOrAST=function(_ul4$BinaryAST21){_inherits(BitXOrAST,_ul4$BinaryAST21);function BitXOrAST(){_classCallCheck(this,BitXOrAST);return _possibleConstructorReturn(this,(BitXOrAST.__proto__||Object.getPrototypeOf(BitXOrAST)).apply(this,arguments));}_createClass(BitXOrAST,[{key:"_do",value:function _do(obj1,obj2){if(obj2===false)obj2=0;else if(obj2===true)obj2=1;return obj1^obj2;}},{key:"_ido",value:function _ido(obj1,obj2){return this._do(obj1,obj2);}}]);return BitXOrAST;}(ul4.BinaryAST);ul4.BitOrAST=function(_ul4$BinaryAST22){_inherits(BitOrAST,_ul4$BinaryAST22);function BitOrAST(){_classCallCheck(this,BitOrAST);return _possibleConstructorReturn(this,(BitOrAST.__proto__||Object.getPrototypeOf(BitOrAST)).apply(this,arguments));}_createClass(BitOrAST,[{key:"_do",value:function _do(obj1,obj2){if(obj2===false)obj2=0;else if(obj2===true)obj2=1;return obj1|obj2;}},{key:"_ido",value:function _ido(obj1,obj2){return this._do(obj1,obj2);}}]);return BitOrAST;}(ul4.BinaryAST);ul4.AndAST=function(_ul4$BinaryAST23){_inherits(AndAST,_ul4$BinaryAST23);function AndAST(){_classCallCheck(this,AndAST);return _possibleConstructorReturn(this,(AndAST.__proto__||Object.getPrototypeOf(AndAST)).apply(this,arguments));}_createClass(AndAST,[{key:"_eval",value:function _eval(context){var obj1=this.obj1._handle_eval(context);if(!ul4._bool(obj1))return obj1;var obj2=this.obj2._handle_eval(context);return obj2;}}]);return AndAST;}(ul4.BinaryAST);ul4.OrAST=function(_ul4$BinaryAST24){_inherits(OrAST,_ul4$BinaryAST24);function OrAST(){_classCallCheck(this,OrAST);return _possibleConstructorReturn(this,(OrAST.__proto__||Object.getPrototypeOf(OrAST)).apply(this,arguments));}_createClass(OrAST,[{key:"_eval",value:function _eval(context){var obj1=this.obj1._handle_eval(context);if(ul4._bool(obj1))return obj1;var obj2=this.obj2._handle_eval(context);return obj2;}}]);return OrAST;}(ul4.BinaryAST);ul4.AttrAST=function(_ul4$CodeAST14){_inherits(AttrAST,_ul4$CodeAST14);function AttrAST(template,pos,obj,attrname){_classCallCheck(this,AttrAST);var _this79=_possibleConstructorReturn(this,(AttrAST.__proto__||Object.getPrototypeOf(AttrAST)).call(this,template,pos));_this79.obj=obj;_this79.attrname=attrname;return _this79;}_createClass(AttrAST,[{key:"_repr",value:function _repr(out){out.push("<AttrAST");out.push(" obj=");this.obj._repr(out);out.push(" attrname=");out.push(ul4._repr(this.attrname));out.push(">");}},{key:"_eval",value:function _eval(context){var obj=this.obj._handle_eval(context);var result=this._get(obj,this.attrname);return result;}},{key:"_eval_set",value:function _eval_set(context,value){var obj=this.obj._handle_eval(context);this._set(obj,this.attrname,value);}},{key:"_eval_modify",value:function _eval_modify(context,operator,value){var obj=this.obj._handle_eval(context);this._modify(operator,obj,this.attrname,value);}},{key:"_get",value:function _get(object,attrname){var proto=ul4.Protocol.get(object);try{return proto.getattr(object,attrname);}catch(exc){if(exc instanceof ul4.AttributeError&&exc.obj===object)return undefined;else throw exc;}}},{key:"_set",value:function _set(object,attrname,value){if(typeof object==="object"&&typeof object.__setattr__==="function")object.__setattr__(attrname,value);else if(ul4._ismap(object))object.set(attrname,value);else if(ul4._isobject(object))object[attrname]=value;else throw new ul4.TypeError(ul4._type(object)+" object has no writable attributes");}},{key:"_modify",value:function _modify(operator,object,attrname,value){var oldvalue=this._get(object,attrname);var newvalue=operator._ido(oldvalue,value);this._set(object,attrname,newvalue);}}]);return AttrAST;}(ul4.CodeAST);ul4.AttrAST.prototype._ul4onattrs=ul4.CodeAST.prototype._ul4onattrs.concat(["obj","attrname"]);ul4.CallAST=function(_ul4$CodeAST15){_inherits(CallAST,_ul4$CodeAST15);function CallAST(template,pos,obj,args){_classCallCheck(this,CallAST);var _this80=_possibleConstructorReturn(this,(CallAST.__proto__||Object.getPrototypeOf(CallAST)).call(this,template,pos));_this80.obj=obj;_this80.args=args;return _this80;}_createClass(CallAST,[{key:"_repr",value:function _repr(out){out.push("<CallAST");out.push(" obj=");this.obj._repr(out);var _iteratorNormalCompletion71=true;var _didIteratorError71=false;var _iteratorError71=undefined;try{for(var _iterator71=this.args[Symbol.iterator](),_step71;!(_iteratorNormalCompletion71=(_step71=_iterator71.next()).done);_iteratorNormalCompletion71=true){var arg=_step71.value;out.push(" ");arg._repr(out);}}catch(err){_didIteratorError71=true;_iteratorError71=err;}finally{try{if(!_iteratorNormalCompletion71&&_iterator71.return){_iterator71.return();}}finally{if(_didIteratorError71){throw _iteratorError71;}}}out.push(">");}},{key:"_makeargs",value:function _makeargs(context){var args=[],kwargs={};var _iteratorNormalCompletion72=true;var _didIteratorError72=false;var _iteratorError72=undefined;try{for(var _iterator72=this.args[Symbol.iterator](),_step72;!(_iteratorNormalCompletion72=(_step72=_iterator72.next()).done);_iteratorNormalCompletion72=true){var arg=_step72.value;arg._handle_eval_call(context,args,kwargs);}}catch(err){_didIteratorError72=true;_iteratorError72=err;}finally{try{if(!_iteratorNormalCompletion72&&_iterator72.return){_iterator72.return();}}finally{if(_didIteratorError72){throw _iteratorError72;}}}return{args:args,kwargs:kwargs};}},{key:"_handle_eval",value:function _handle_eval(context){try{return this._eval(context);}catch(exc){this._decorate_exception(exc);throw exc;}}},{key:"_eval",value:function _eval(context){var obj=this.obj._handle_eval(context);var args=this._makeargs(context);var result=ul4._call(context,obj,args.args,args.kwargs);return result;}}]);return CallAST;}(ul4.CodeAST);ul4.CallAST.prototype._ul4onattrs=ul4.CodeAST.prototype._ul4onattrs.concat(["obj","args"]);ul4.RenderAST=function(_ul4$CallAST){_inherits(RenderAST,_ul4$CallAST);function RenderAST(template,pos,obj,args){_classCallCheck(this,RenderAST);var _this81=_possibleConstructorReturn(this,(RenderAST.__proto__||Object.getPrototypeOf(RenderAST)).call(this,template,pos,obj,args));_this81.indent=null;return _this81;}_createClass(RenderAST,[{key:"_repr",value:function _repr(out){out.push("<");out.push(this._reprname);out.push("<RenderAST");out.push(" indent=");out.push(ul4._repr(this.indent));out.push(" obj=");this.obj._repr(out);out.push(0);var _iteratorNormalCompletion73=true;var _didIteratorError73=false;var _iteratorError73=undefined;try{for(var _iterator73=this.args[Symbol.iterator](),_step73;!(_iteratorNormalCompletion73=(_step73=_iterator73.next()).done);_iteratorNormalCompletion73=true){var arg=_step73.value;out.push(" ");arg._repr(out);out.push(0);}}catch(err){_didIteratorError73=true;_iteratorError73=err;}finally{try{if(!_iteratorNormalCompletion73&&_iterator73.return){_iterator73.return();}}finally{if(_didIteratorError73){throw _iteratorError73;}}}out.push(-1);out.push(">");}},{key:"_str",value:function _str(out){out.push("render ");out.push(this.tag.code.replace(/\r?\n/g,' '));if(this.indent!==null){out.push(" with indent ");out.push(ul4._repr(this.indent.text));}}},{key:"_handle_eval",value:function _handle_eval(context){var localcontext=context.withindent(this.indent!==null?this.indent.text:null);var obj=this.obj._handle_eval(localcontext);var args=this._makeargs(localcontext);this._handle_additional_arguments(localcontext,args);try{var result=ul4._callrender(localcontext,obj,args.args,args.kwargs);return result;}catch(exc){this._decorate_exception(exc);throw exc;}}},{key:"_handle_additional_arguments",value:function _handle_additional_arguments(context,args){}}]);return RenderAST;}(ul4.CallAST);ul4.RenderAST.prototype._ul4onattrs=ul4.CallAST.prototype._ul4onattrs.concat(["indent"]);ul4.RenderAST.prototype._reprname="RenderAST";ul4.RenderXAST=function(_ul4$RenderAST){_inherits(RenderXAST,_ul4$RenderAST);function RenderXAST(){_classCallCheck(this,RenderXAST);return _possibleConstructorReturn(this,(RenderXAST.__proto__||Object.getPrototypeOf(RenderXAST)).apply(this,arguments));}_createClass(RenderXAST,[{key:"_handle_eval",value:function _handle_eval(context){context.escapes.push(ul4._xmlescape);var result=null;try{result=_get2(RenderXAST.prototype.__proto__||Object.getPrototypeOf(RenderXAST.prototype),"_handle_eval",this).call(this,context);}finally{context.escapes.splice(context.escapes.length-1,1);}return result;}}]);return RenderXAST;}(ul4.RenderAST);ul4.RenderBlockAST=function(_ul4$RenderAST2){_inherits(RenderBlockAST,_ul4$RenderAST2);function RenderBlockAST(){_classCallCheck(this,RenderBlockAST);return _possibleConstructorReturn(this,(RenderBlockAST.__proto__||Object.getPrototypeOf(RenderBlockAST)).apply(this,arguments));}_createClass(RenderBlockAST,[{key:"_handle_additional_arguments",value:function _handle_additional_arguments(context,args){if(args.kwargs.hasOwnProperty("content"))throw new ul4.ArgumentError("duplicate keyword argument content");var closure=new ul4.TemplateClosure(this.content,this.content.signature,context.vars);args.kwargs.content=closure;}}]);return RenderBlockAST;}(ul4.RenderAST);ul4.RenderBlockAST.prototype._ul4onattrs=ul4.RenderAST.prototype._ul4onattrs.concat(["content"]);ul4.RenderBlocksAST=function(_ul4$RenderAST3){_inherits(RenderBlocksAST,_ul4$RenderAST3);function RenderBlocksAST(){_classCallCheck(this,RenderBlocksAST);return _possibleConstructorReturn(this,(RenderBlocksAST.__proto__||Object.getPrototypeOf(RenderBlocksAST)).apply(this,arguments));}_createClass(RenderBlocksAST,[{key:"_handle_additional_arguments",value:function _handle_additional_arguments(context,args){var localcontext=context.inheritvars();ul4.BlockAST.prototype._eval.call(this,localcontext);for(var key in localcontext.vars){if(localcontext.vars.hasOwnProperty(key)){if(key in args.kwargs)throw new ul4.ArgumentError("duplicate keyword argument "+key);args.kwargs[key]=localcontext.get(key);}}}}]);return RenderBlocksAST;}(ul4.RenderAST);ul4.RenderBlocksAST.prototype._ul4onattrs=ul4.RenderAST.prototype._ul4onattrs.concat(["content"]);ul4.slice=function(_ul4$Proto3){_inherits(slice,_ul4$Proto3);function slice(start,stop){_classCallCheck(this,slice);var _this85=_possibleConstructorReturn(this,(slice.__proto__||Object.getPrototypeOf(slice)).call(this));_this85.start=start;_this85.stop=stop;return _this85;}_createClass(slice,[{key:"of",value:function of(string){var start=this.start||0;var stop=this.stop===null?string.length:this.stop;return string.slice(start,stop);}},{key:"__repr__",value:function __repr__(){return"slice("+ul4._repr(this.start)+", "+ul4._repr(this.stop)+")";}},{key:"__getattr__",value:function __getattr__(attrname){switch(attrname){case"start":return this.start;case"stop":return this.stop;default:throw new ul4.AttributeError(this,attrname);}}}]);return slice;}(ul4.Proto);ul4.SliceAST=function(_ul4$CodeAST16){_inherits(SliceAST,_ul4$CodeAST16);function SliceAST(template,pos,index1,index2){_classCallCheck(this,SliceAST);var _this86=_possibleConstructorReturn(this,(SliceAST.__proto__||Object.getPrototypeOf(SliceAST)).call(this,template,pos));_this86.index1=index1;_this86.index2=index2;return _this86;}_createClass(SliceAST,[{key:"_repr",value:function _repr(out){out.push("<SliceAST");if(this.index1!==null){out.push(" index1=");this.index1._repr(out);}if(this.index2!==null){out.push(" index2=");this.index2._repr(out);}out.push(">");}},{key:"_eval",value:function _eval(context){var index1=this.index1!==null?this.index1._handle_eval(context):null;var index2=this.index2!==null?this.index2._handle_eval(context):null;return new ul4.slice(index1,index2);}}]);return SliceAST;}(ul4.CodeAST);ul4.SliceAST.prototype._ul4onattrs=ul4.CodeAST.prototype._ul4onattrs.concat(["index1","index2"]);ul4.SetVarAST=function(_ul4$CodeAST17){_inherits(SetVarAST,_ul4$CodeAST17);function SetVarAST(template,pos,lvalue,value){_classCallCheck(this,SetVarAST);var _this87=_possibleConstructorReturn(this,(SetVarAST.__proto__||Object.getPrototypeOf(SetVarAST)).call(this,template,pos));_this87.lvalue=lvalue;_this87.value=value;return _this87;}_createClass(SetVarAST,[{key:"_repr",value:function _repr(out){out.push("<");out.push(this.constructor.name);out.push(" lvalue=");out.push(ul4._repr(this.lvalue));out.push(" value=");this.value._repr(out);out.push(">");}},{key:"_eval",value:function _eval(context){var value=this.value._handle_eval(context);var items=ul4._unpackvar(this.lvalue,value);var _iteratorNormalCompletion74=true;var _didIteratorError74=false;var _iteratorError74=undefined;try{for(var _iterator74=items[Symbol.iterator](),_step74;!(_iteratorNormalCompletion74=(_step74=_iterator74.next()).done);_iteratorNormalCompletion74=true){var _step74$value=_slicedToArray(_step74.value,2),lvalue=_step74$value[0],_value32=_step74$value[1];lvalue._handle_eval_set(context,_value32);}}catch(err){_didIteratorError74=true;_iteratorError74=err;}finally{try{if(!_iteratorNormalCompletion74&&_iterator74.return){_iterator74.return();}}finally{if(_didIteratorError74){throw _iteratorError74;}}}}}]);return SetVarAST;}(ul4.CodeAST);ul4.SetVarAST.prototype._ul4onattrs=ul4.CodeAST.prototype._ul4onattrs.concat(["lvalue","value"]);ul4.ModifyVarAST=function(_ul4$SetVarAST){_inherits(ModifyVarAST,_ul4$SetVarAST);function ModifyVarAST(){_classCallCheck(this,ModifyVarAST);return _possibleConstructorReturn(this,(ModifyVarAST.__proto__||Object.getPrototypeOf(ModifyVarAST)).apply(this,arguments));}_createClass(ModifyVarAST,[{key:"_eval",value:function _eval(context){var value=this.value._handle_eval(context);var items=ul4._unpackvar(this.lvalue,value);var _iteratorNormalCompletion75=true;var _didIteratorError75=false;var _iteratorError75=undefined;try{for(var _iterator75=items[Symbol.iterator](),_step75;!(_iteratorNormalCompletion75=(_step75=_iterator75.next()).done);_iteratorNormalCompletion75=true){var _step75$value=_slicedToArray(_step75.value,2),lvalue=_step75$value[0],_value33=_step75$value[1];lvalue._handle_eval_modify(context,this._operator,_value33);}}catch(err){_didIteratorError75=true;_iteratorError75=err;}finally{try{if(!_iteratorNormalCompletion75&&_iterator75.return){_iterator75.return();}}finally{if(_didIteratorError75){throw _iteratorError75;}}}}}]);return ModifyVarAST;}(ul4.SetVarAST);ul4.AddVarAST=function(_ul4$ModifyVarAST){_inherits(AddVarAST,_ul4$ModifyVarAST);function AddVarAST(){_classCallCheck(this,AddVarAST);return _possibleConstructorReturn(this,(AddVarAST.__proto__||Object.getPrototypeOf(AddVarAST)).apply(this,arguments));}return AddVarAST;}(ul4.ModifyVarAST);ul4.AddVarAST.prototype._operator=ul4.AddAST.prototype;ul4.SubVarAST=function(_ul4$ModifyVarAST2){_inherits(SubVarAST,_ul4$ModifyVarAST2);function SubVarAST(){_classCallCheck(this,SubVarAST);return _possibleConstructorReturn(this,(SubVarAST.__proto__||Object.getPrototypeOf(SubVarAST)).apply(this,arguments));}return SubVarAST;}(ul4.ModifyVarAST);ul4.SubVarAST.prototype._operator=ul4.SubAST.prototype;ul4.MulVarAST=function(_ul4$ModifyVarAST3){_inherits(MulVarAST,_ul4$ModifyVarAST3);function MulVarAST(){_classCallCheck(this,MulVarAST);return _possibleConstructorReturn(this,(MulVarAST.__proto__||Object.getPrototypeOf(MulVarAST)).apply(this,arguments));}return MulVarAST;}(ul4.ModifyVarAST);ul4.MulVarAST.prototype._operator=ul4.MulAST.prototype;ul4.TrueDivVarAST=function(_ul4$ModifyVarAST4){_inherits(TrueDivVarAST,_ul4$ModifyVarAST4);function TrueDivVarAST(){_classCallCheck(this,TrueDivVarAST);return _possibleConstructorReturn(this,(TrueDivVarAST.__proto__||Object.getPrototypeOf(TrueDivVarAST)).apply(this,arguments));}return TrueDivVarAST;}(ul4.ModifyVarAST);ul4.TrueDivVarAST.prototype._operator=ul4.TrueDivAST.prototype;ul4.FloorDivVarAST=function(_ul4$ModifyVarAST5){_inherits(FloorDivVarAST,_ul4$ModifyVarAST5);function FloorDivVarAST(){_classCallCheck(this,FloorDivVarAST);return _possibleConstructorReturn(this,(FloorDivVarAST.__proto__||Object.getPrototypeOf(FloorDivVarAST)).apply(this,arguments));}return FloorDivVarAST;}(ul4.ModifyVarAST);ul4.FloorDivVarAST.prototype._operator=ul4.FloorDivAST.prototype;ul4.ModVarAST=function(_ul4$ModifyVarAST6){_inherits(ModVarAST,_ul4$ModifyVarAST6);function ModVarAST(){_classCallCheck(this,ModVarAST);return _possibleConstructorReturn(this,(ModVarAST.__proto__||Object.getPrototypeOf(ModVarAST)).apply(this,arguments));}return ModVarAST;}(ul4.ModifyVarAST);ul4.ModVarAST.prototype._operator=ul4.ModAST.prototype;ul4.ShiftLeftVarAST=function(_ul4$ModifyVarAST7){_inherits(ShiftLeftVarAST,_ul4$ModifyVarAST7);function ShiftLeftVarAST(){_classCallCheck(this,ShiftLeftVarAST);return _possibleConstructorReturn(this,(ShiftLeftVarAST.__proto__||Object.getPrototypeOf(ShiftLeftVarAST)).apply(this,arguments));}return ShiftLeftVarAST;}(ul4.ModifyVarAST);ul4.ShiftLeftVarAST.prototype._operator=ul4.ShiftLeftAST.prototype;ul4.ShiftRightVarAST=function(_ul4$ModifyVarAST8){_inherits(ShiftRightVarAST,_ul4$ModifyVarAST8);function ShiftRightVarAST(){_classCallCheck(this,ShiftRightVarAST);return _possibleConstructorReturn(this,(ShiftRightVarAST.__proto__||Object.getPrototypeOf(ShiftRightVarAST)).apply(this,arguments));}return ShiftRightVarAST;}(ul4.ModifyVarAST);ul4.ShiftRightVarAST.prototype._operator=ul4.ShiftRightAST.prototype;ul4.BitAndVarAST=function(_ul4$ModifyVarAST9){_inherits(BitAndVarAST,_ul4$ModifyVarAST9);function BitAndVarAST(){_classCallCheck(this,BitAndVarAST);return _possibleConstructorReturn(this,(BitAndVarAST.__proto__||Object.getPrototypeOf(BitAndVarAST)).apply(this,arguments));}return BitAndVarAST;}(ul4.ModifyVarAST);ul4.BitAndVarAST.prototype._operator=ul4.BitAndAST.prototype;ul4.BitXOrVarAST=function(_ul4$ModifyVarAST10){_inherits(BitXOrVarAST,_ul4$ModifyVarAST10);function BitXOrVarAST(){_classCallCheck(this,BitXOrVarAST);return _possibleConstructorReturn(this,(BitXOrVarAST.__proto__||Object.getPrototypeOf(BitXOrVarAST)).apply(this,arguments));}return BitXOrVarAST;}(ul4.ModifyVarAST);ul4.BitXOrVarAST.prototype._operator=ul4.BitXOrAST.prototype;ul4.BitOrVarAST=function(_ul4$ModifyVarAST11){_inherits(BitOrVarAST,_ul4$ModifyVarAST11);function BitOrVarAST(){_classCallCheck(this,BitOrVarAST);return _possibleConstructorReturn(this,(BitOrVarAST.__proto__||Object.getPrototypeOf(BitOrVarAST)).apply(this,arguments));}return BitOrVarAST;}(ul4.ModifyVarAST);ul4.BitOrVarAST.prototype._operator=ul4.BitOrAST.prototype;ul4.BlockAST=function(_ul4$CodeAST18){_inherits(BlockAST,_ul4$CodeAST18);function BlockAST(template,pos){_classCallCheck(this,BlockAST);var _this100=_possibleConstructorReturn(this,(BlockAST.__proto__||Object.getPrototypeOf(BlockAST)).call(this,template,pos));_this100.content=[];return _this100;}_createClass(BlockAST,[{key:"_eval",value:function _eval(context){var _iteratorNormalCompletion76=true;var _didIteratorError76=false;var _iteratorError76=undefined;try{for(var _iterator76=this.content[Symbol.iterator](),_step76;!(_iteratorNormalCompletion76=(_step76=_iterator76.next()).done);_iteratorNormalCompletion76=true){var item=_step76.value;item._handle_eval(context);}}catch(err){_didIteratorError76=true;_iteratorError76=err;}finally{try{if(!_iteratorNormalCompletion76&&_iterator76.return){_iterator76.return();}}finally{if(_didIteratorError76){throw _iteratorError76;}}}}},{key:"_str",value:function _str(out){if(this.content.length){var _iteratorNormalCompletion77=true;var _didIteratorError77=false;var _iteratorError77=undefined;try{for(var _iterator77=this.content[Symbol.iterator](),_step77;!(_iteratorNormalCompletion77=(_step77=_iterator77.next()).done);_iteratorNormalCompletion77=true){var item=_step77.value;item._str(out);out.push(0);}}catch(err){_didIteratorError77=true;_iteratorError77=err;}finally{try{if(!_iteratorNormalCompletion77&&_iterator77.return){_iterator77.return();}}finally{if(_didIteratorError77){throw _iteratorError77;}}}}else{out.push("pass");out.push(0);}}}]);return BlockAST;}(ul4.CodeAST);ul4.BlockAST.prototype._ul4onattrs=ul4.CodeAST.prototype._ul4onattrs.concat(["content"]);ul4.ForBlockAST=function(_ul4$BlockAST){_inherits(ForBlockAST,_ul4$BlockAST);function ForBlockAST(template,pos,varname,container){_classCallCheck(this,ForBlockAST);var _this101=_possibleConstructorReturn(this,(ForBlockAST.__proto__||Object.getPrototypeOf(ForBlockAST)).call(this,template,pos));_this101.varname=varname;_this101.container=container;return _this101;}_createClass(ForBlockAST,[{key:"_repr",value:function _repr(out){out.push("<ForBlockAST");out.push(" varname=");out.push(ul4._repr(this.varname));out.push(" container=");this.container._repr(out);out.push(">");}},{key:"_str_varname",value:function _str_varname(out,varname){if(ul4._islist(varname)){out.push("(");for(var i=0;i<varname.length;++i){if(i)out.push(", ");this._str_varname(out,varname[i]);}if(varname.length==1)out.push(",");out.push(")");}else varname._str(out);}},{key:"_eval",value:function _eval(context){var container=this.container._handle_eval(context);for(var iter=ul4._iter(container);;){var value=iter.next();if(value.done)break;var varitems=ul4._unpackvar(this.varname,value.value);var _iteratorNormalCompletion78=true;var _didIteratorError78=false;var _iteratorError78=undefined;try{for(var _iterator78=varitems[Symbol.iterator](),_step78;!(_iteratorNormalCompletion78=(_step78=_iterator78.next()).done);_iteratorNormalCompletion78=true){var _step78$value=_slicedToArray(_step78.value,2),lvalue=_step78$value[0],_value34=_step78$value[1];lvalue._handle_eval_set(context,_value34);}}catch(err){_didIteratorError78=true;_iteratorError78=err;}finally{try{if(!_iteratorNormalCompletion78&&_iterator78.return){_iterator78.return();}}finally{if(_didIteratorError78){throw _iteratorError78;}}}try{_get2(ForBlockAST.prototype.__proto__||Object.getPrototypeOf(ForBlockAST.prototype),"_eval",this).call(this,context);}catch(exc){if(exc instanceof ul4.BreakException)break;else if(exc instanceof ul4.ContinueException);else throw exc;}}}},{key:"_str",value:function _str(out){out.push("for ");this._str_varname(out,this.varname);out.push(" in ");this.container._str(out);out.push(":");out.push(+1);ul4.BlockAST.prototype._str.call(this,out);out.push(-1);}}]);return ForBlockAST;}(ul4.BlockAST);ul4.ForBlockAST.prototype._ul4onattrs=ul4.BlockAST.prototype._ul4onattrs.concat(["varname","container"]);ul4.WhileBlockAST=function(_ul4$BlockAST2){_inherits(WhileBlockAST,_ul4$BlockAST2);function WhileBlockAST(template,pos,condition){_classCallCheck(this,WhileBlockAST);var _this102=_possibleConstructorReturn(this,(WhileBlockAST.__proto__||Object.getPrototypeOf(WhileBlockAST)).call(this,template,pos));_this102.condition=condition;return _this102;}_createClass(WhileBlockAST,[{key:"_repr",value:function _repr(out){out.push("<WhileAST");out.push(" condition=");this.condition._repr(out);out.push(">");}},{key:"_str",value:function _str(out){out.push("while ");this.condition._repr(out);out.push(":");out.push(+1);ul4.BlockAST.prototype._str.call(this,out);out.push(-1);}},{key:"_eval",value:function _eval(context){while(true){var cond=this.condition._handle_eval(context);if(!ul4._bool(cond))break;try{_get2(WhileBlockAST.prototype.__proto__||Object.getPrototypeOf(WhileBlockAST.prototype),"_eval",this).call(this,context);}catch(exc){if(exc instanceof ul4.BreakException)break;else if(exc instanceof ul4.ContinueException);else throw exc;}}}}]);return WhileBlockAST;}(ul4.BlockAST);ul4.WhileBlockAST.prototype._ul4onattrs=ul4.BlockAST.prototype._ul4onattrs.concat(["condition"]);ul4.BreakAST=function(_ul4$CodeAST19){_inherits(BreakAST,_ul4$CodeAST19);function BreakAST(){_classCallCheck(this,BreakAST);return _possibleConstructorReturn(this,(BreakAST.__proto__||Object.getPrototypeOf(BreakAST)).apply(this,arguments));}_createClass(BreakAST,[{key:"_eval",value:function _eval(context){throw new ul4.BreakException();}},{key:"_str",value:function _str(out){out.push("break");out.push(0);}},{key:"_repr",value:function _repr(out){out.push("<BreakAST>");}}]);return BreakAST;}(ul4.CodeAST);ul4.ContinueAST=function(_ul4$CodeAST20){_inherits(ContinueAST,_ul4$CodeAST20);function ContinueAST(){_classCallCheck(this,ContinueAST);return _possibleConstructorReturn(this,(ContinueAST.__proto__||Object.getPrototypeOf(ContinueAST)).apply(this,arguments));}_createClass(ContinueAST,[{key:"_eval",value:function _eval(context){throw new ul4.ContinueException();}},{key:"_str",value:function _str(out){out.push("continue");out.push(0);}},{key:"_repr",value:function _repr(out){out.push("<ContinueAST>");}}]);return ContinueAST;}(ul4.CodeAST);ul4.CondBlockAST=function(_ul4$BlockAST3){_inherits(CondBlockAST,_ul4$BlockAST3);function CondBlockAST(){_classCallCheck(this,CondBlockAST);return _possibleConstructorReturn(this,(CondBlockAST.__proto__||Object.getPrototypeOf(CondBlockAST)).apply(this,arguments));}_createClass(CondBlockAST,[{key:"_eval",value:function _eval(context){var _iteratorNormalCompletion79=true;var _didIteratorError79=false;var _iteratorError79=undefined;try{for(var _iterator79=this.content[Symbol.iterator](),_step79;!(_iteratorNormalCompletion79=(_step79=_iterator79.next()).done);_iteratorNormalCompletion79=true){var block=_step79.value;var execute=block._execute(context);if(execute){block._handle_eval(context);break;}}}catch(err){_didIteratorError79=true;_iteratorError79=err;}finally{try{if(!_iteratorNormalCompletion79&&_iterator79.return){_iterator79.return();}}finally{if(_didIteratorError79){throw _iteratorError79;}}}}}]);return CondBlockAST;}(ul4.BlockAST);ul4.ConditionalBlockAST=function(_ul4$BlockAST4){_inherits(ConditionalBlockAST,_ul4$BlockAST4);function ConditionalBlockAST(template,pos,condition){_classCallCheck(this,ConditionalBlockAST);var _this106=_possibleConstructorReturn(this,(ConditionalBlockAST.__proto__||Object.getPrototypeOf(ConditionalBlockAST)).call(this,template,pos));_this106.condition=condition;return _this106;}_createClass(ConditionalBlockAST,[{key:"_repr",value:function _repr(out){out.push("<");out.push(this.constructor.name);out.push(" condition=");this.condition._repr(out);out.push(">");}},{key:"_str",value:function _str(out){out.push(this._strname);out.push(" ");this.condition._str(out);out.push(":");out.push(+1);ul4.BlockAST.prototype._str.call(this,out);out.push(-1);}},{key:"_execute",value:function _execute(context){var cond=this.condition._handle_eval(context);var result=ul4._bool(cond);return result;}}]);return ConditionalBlockAST;}(ul4.BlockAST);ul4.ConditionalBlockAST.prototype._ul4onattrs=ul4.BlockAST.prototype._ul4onattrs.concat(["condition"]);ul4.IfBlockAST=function(_ul4$ConditionalBlock){_inherits(IfBlockAST,_ul4$ConditionalBlock);function IfBlockAST(){_classCallCheck(this,IfBlockAST);return _possibleConstructorReturn(this,(IfBlockAST.__proto__||Object.getPrototypeOf(IfBlockAST)).apply(this,arguments));}return IfBlockAST;}(ul4.ConditionalBlockAST);ul4.IfBlockAST.prototype._strname="if";ul4.ElIfBlockAST=function(_ul4$ConditionalBlock2){_inherits(ElIfBlockAST,_ul4$ConditionalBlock2);function ElIfBlockAST(){_classCallCheck(this,ElIfBlockAST);return _possibleConstructorReturn(this,(ElIfBlockAST.__proto__||Object.getPrototypeOf(ElIfBlockAST)).apply(this,arguments));}return ElIfBlockAST;}(ul4.ConditionalBlockAST);ul4.ElIfBlockAST.prototype._strname="else if";ul4.ElseBlockAST=function(_ul4$BlockAST5){_inherits(ElseBlockAST,_ul4$BlockAST5);function ElseBlockAST(){_classCallCheck(this,ElseBlockAST);return _possibleConstructorReturn(this,(ElseBlockAST.__proto__||Object.getPrototypeOf(ElseBlockAST)).apply(this,arguments));}_createClass(ElseBlockAST,[{key:"_repr",value:function _repr(out){out.push("<ElseAST");out.push(">");}},{key:"_str",value:function _str(out){out.push("else:");out.push(+1);ul4.BlockAST.prototype._str.call(this,out);out.push(-1);}},{key:"_execute",value:function _execute(context){return true;}}]);return ElseBlockAST;}(ul4.BlockAST);ul4.Template=function(_ul4$BlockAST6){_inherits(Template,_ul4$BlockAST6);function Template(template,pos,source,name,whitespace,startdelim,enddelim,signature){_classCallCheck(this,Template);var _this110=_possibleConstructorReturn(this,(Template.__proto__||Object.getPrototypeOf(Template)).call(this,template,pos));_this110._source=source;_this110.name=name;_this110.whitespace=whitespace;_this110.startdelim=startdelim;_this110.enddelim=enddelim;_this110.docpos=null;_this110.signature=signature;_this110._asts=null;_this110._ul4_callsignature=signature;_this110._ul4_rendersignature=signature;_this110.parenttemplate=null;return _this110;}_createClass(Template,[{key:"__getattr__",value:function __getattr__(attrname){var self=this;switch(attrname){case"content":return this.content;case"source":return this.source;case"name":return this.name;case"whitespace":return this.whitespace;case"startdelim":return this.startdelim;case"enddelim":return this.enddelim;case"doc":return this.doc();case"signature":return this.signature;case"parenttemplate":return this.parenttemplate;case"render":var render=function render(context,vars){self._renderbound(context,vars);};ul4.expose(render,this.signature,{needscontext:true,needsobject:true});return render;case"renders":var renders=function renders(context,vars){return self._rendersbound(context,vars);};ul4.expose(renders,this.signature,{needscontext:true,needsobject:true});return renders;default:return _get2(Template.prototype.__proto__||Object.getPrototypeOf(Template.prototype),"__getattr__",this).call(this,attrname);}}},{key:"ul4ondump",value:function ul4ondump(encoder){var signature=void 0;encoder.dump(ul4.version);encoder.dump(this.name);encoder.dump(this._source);encoder.dump(this.whitespace);encoder.dump(this.startdelim);encoder.dump(this.enddelim);encoder.dump(this.docpos);encoder.dump(this.parenttemplate);if(this.signature===null||this.signature instanceof ul4.SignatureAST)signature=this.signature;else{signature=[];var _iteratorNormalCompletion80=true;var _didIteratorError80=false;var _iteratorError80=undefined;try{for(var _iterator80=this.signature.args[Symbol.iterator](),_step80;!(_iteratorNormalCompletion80=(_step80=_iterator80.next()).done);_iteratorNormalCompletion80=true){var arg=_step80.value;if(typeof arg.defaultValue==="undefined")signature.push(arg.name);else signature.push(arg.name+"=",arg.defaultValue);}}catch(err){_didIteratorError80=true;_iteratorError80=err;}finally{try{if(!_iteratorNormalCompletion80&&_iterator80.return){_iterator80.return();}}finally{if(_didIteratorError80){throw _iteratorError80;}}}if(this.signature.remargs!==null)signature.push("*"+this.signature.remargs);if(this.signature.remkwargs!==null)signature.push("**"+this.signature.remkwargs);}encoder.dump(signature);_get2(Template.prototype.__proto__||Object.getPrototypeOf(Template.prototype),"ul4ondump",this).call(this,encoder);}},{key:"ul4onload",value:function ul4onload(decoder){var version=decoder.load();var signature=void 0;if(version===null)throw new ul4.ValueError("UL4ON doesn't support templates in 'source' format in Javascript implementation");if(version!==ul4.version)throw new ul4.ValueError("invalid version, expected "+ul4.version+", got "+version);this.name=decoder.load();this._source=decoder.load();this.whitespace=decoder.load();this.startdelim=decoder.load();this.enddelim=decoder.load();this.docpos=decoder.load();this.parenttemplate=decoder.load();signature=decoder.load();if(ul4._islist(signature))signature=new(Function.prototype.bind.apply(ul4.Signature,[null].concat(_toConsumableArray(signature))))();this.signature=signature;this._ul4_callsignature=signature;this._ul4_rendersignature=signature;_get2(Template.prototype.__proto__||Object.getPrototypeOf(Template.prototype),"ul4onload",this).call(this,decoder);}},{key:"loads",value:function loads(string){return ul4.loads(string);}},{key:"_eval",value:function _eval(context){var signature=null;if(this.signature!==null)signature=this.signature._handle_eval(context);var closure=new ul4.TemplateClosure(this,signature,context.vars);context.set(this.name,closure);}},{key:"_repr",value:function _repr(out){out.push("<Template");if(this.name!==null){out.push(" name=");out.push(ul4._repr(this.name));}out.push(" whitespace=");out.push(ul4._repr(this.whitespace));if(this.startdelim!=="<?"){out.push(" startdelim=");out.push(ul4._repr(this.startdelim));}if(this.enddelim!=="?>"){out.push(" enddelim=");out.push(ul4._repr(this.enddelim));}out.push(">");}},{key:"_str",value:function _str(out){out.push("def ");out.push(this.name?this.name:"unnamed");out.push(":");out.push(+1);ul4.BlockAST.prototype._str.call(this,out);out.push(-1);}},{key:"_renderbound",value:function _renderbound(context,vars){var localcontext=context.clone();localcontext.vars=vars;try{ul4.BlockAST.prototype._eval.call(this,localcontext);}catch(exc){if(!(exc instanceof ul4.ReturnException))throw exc;}}},{key:"__render__",value:function __render__(context,vars){this._renderbound(context,vars);}},{key:"render",value:function render(context,vars){this._renderbound(context,vars);}},{key:"_rendersbound",value:function _rendersbound(context,vars){var localcontext=context.replaceoutput();this._renderbound(localcontext,vars);return localcontext.getoutput();}},{key:"renders",value:function renders(vars){vars=vars||{};var context=new ul4.Context();if(this.signature!==null)vars=this.signature.bindObject(this.name,[],vars);return this._rendersbound(context,vars);}},{key:"doc",value:function doc(){return this.docpos!=null?this.docpos.of(this._source):null;}},{key:"_callbound",value:function _callbound(context,vars){var localcontext=context.clone();localcontext.vars=vars;try{ul4.BlockAST.prototype._eval.call(this,localcontext);}catch(exc){if(exc instanceof ul4.ReturnException)return exc.result;else throw exc;}return null;}},{key:"call",value:function call(vars){vars=vars||{};var context=new ul4.Context();if(this.signature!==null)vars=this.signature.bindObject(this.name,[],vars);return this._callbound(context,vars);}},{key:"__call__",value:function __call__(context,vars){return this._callbound(context,vars);}},{key:"ul4type",value:function ul4type(){return"template";}}]);return Template;}(ul4.BlockAST);ul4.Template.prototype._ul4_callneedsobject=true;ul4.Template.prototype._ul4_callneedscontext=true;ul4.Template.prototype._ul4_renderneedsobject=true;ul4.Template.prototype._ul4_renderneedscontext=true;ul4.SignatureAST=function(_ul4$CodeAST21){_inherits(SignatureAST,_ul4$CodeAST21);function SignatureAST(template,pos){_classCallCheck(this,SignatureAST);var _this111=_possibleConstructorReturn(this,(SignatureAST.__proto__||Object.getPrototypeOf(SignatureAST)).call(this,template,pos));_this111.params=[];return _this111;}_createClass(SignatureAST,[{key:"ul4ondump",value:function ul4ondump(encoder){_get2(SignatureAST.prototype.__proto__||Object.getPrototypeOf(SignatureAST.prototype),"ul4ondump",this).call(this,encoder);var dump=[];var _iteratorNormalCompletion81=true;var _didIteratorError81=false;var _iteratorError81=undefined;try{for(var _iterator81=this.params[Symbol.iterator](),_step81;!(_iteratorNormalCompletion81=(_step81=_iterator81.next()).done);_iteratorNormalCompletion81=true){var param=_step81.value;if(param[1]===null)dump.push(param[0]);else dump.push(param);}}catch(err){_didIteratorError81=true;_iteratorError81=err;}finally{try{if(!_iteratorNormalCompletion81&&_iterator81.return){_iterator81.return();}}finally{if(_didIteratorError81){throw _iteratorError81;}}}encoder.dump(dump);}},{key:"ul4onload",value:function ul4onload(decoder){_get2(SignatureAST.prototype.__proto__||Object.getPrototypeOf(SignatureAST.prototype),"ul4onload",this).call(this,decoder);var dump=decoder.load();this.params=[];var _iteratorNormalCompletion82=true;var _didIteratorError82=false;var _iteratorError82=undefined;try{for(var _iterator82=dump[Symbol.iterator](),_step82;!(_iteratorNormalCompletion82=(_step82=_iterator82.next()).done);_iteratorNormalCompletion82=true){var param=_step82.value;if(typeof param==="string")this.params.push([param,null]);else this.params.push(param);}}catch(err){_didIteratorError82=true;_iteratorError82=err;}finally{try{if(!_iteratorNormalCompletion82&&_iterator82.return){_iterator82.return();}}finally{if(_didIteratorError82){throw _iteratorError82;}}}}},{key:"_eval",value:function _eval(context){var args=[];var _iteratorNormalCompletion83=true;var _didIteratorError83=false;var _iteratorError83=undefined;try{for(var _iterator83=this.params[Symbol.iterator](),_step83;!(_iteratorNormalCompletion83=(_step83=_iterator83.next()).done);_iteratorNormalCompletion83=true){var param=_step83.value;if(param[1]===null)args.push(param[0]);else{args.push(param[0]+"=");args.push(param[1]._handle_eval(context));}}}catch(err){_didIteratorError83=true;_iteratorError83=err;}finally{try{if(!_iteratorNormalCompletion83&&_iterator83.return){_iterator83.return();}}finally{if(_didIteratorError83){throw _iteratorError83;}}}return new(Function.prototype.bind.apply(ul4.Signature,[null].concat(args)))();}},{key:"_repr",value:function _repr(out){out.push("<");out.push(this.constructor.name);out.push(" params=");this.params._repr(out);out.push(">");}}]);return SignatureAST;}(ul4.CodeAST);ul4.TemplateClosure=function(_ul4$Proto4){_inherits(TemplateClosure,_ul4$Proto4);function TemplateClosure(template,signature,vars){_classCallCheck(this,TemplateClosure);var _this112=_possibleConstructorReturn(this,(TemplateClosure.__proto__||Object.getPrototypeOf(TemplateClosure)).call(this));_this112.template=template;_this112.signature=signature;_this112.vars=vars;_this112._ul4_callsignature=signature;_this112._ul4_rendersignature=signature;_this112.name=template.name;_this112.tag=template.tag;_this112.endtag=template.endtag;_this112._source=template._source;_this112.startdelim=template.startdelim;_this112.enddelim=template.enddelim;_this112.docpos=template.docpos;_this112.content=template.content;return _this112;}_createClass(TemplateClosure,[{key:"__render__",value:function __render__(context,vars){this.template._renderbound(context,ul4._inherit(this.vars,vars));}},{key:"render",value:function render(context,vars){this.template._renderbound(context,ul4._inherit(this.vars,vars));}},{key:"__call__",value:function __call__(context,vars){return this.template._callbound(context,ul4._inherit(this.vars,vars));}},{key:"_renderbound",value:function _renderbound(context,vars){this.template._renderbound(context,ul4._inherit(this.vars,vars));}},{key:"_rendersbound",value:function _rendersbound(context,vars){return this.template._rendersbound(context,ul4._inherit(this.vars,vars));}},{key:"__getattr__",value:function __getattr__(attrname){var self=this;switch(attrname){case"render":var render=function render(context,vars){self._renderbound(context,vars);};ul4.expose(render,this.signature,{needscontext:true,needsobject:true});return render;case"renders":var renders=function renders(context,vars){return self._rendersbound(context,vars);};ul4.expose(renders,this.signature,{needscontext:true,needsobject:true});return renders;case"signature":return this.signature;default:return this.template.__getattr__(attrname);}}},{key:"ul4type",value:function ul4type(){return"template";}}]);return TemplateClosure;}(ul4.Proto);ul4.TemplateClosure.prototype._ul4_callneedsobject=true;ul4.TemplateClosure.prototype._ul4_callneedscontext=true;ul4.TemplateClosure.prototype._ul4_renderneedsobject=true;ul4.TemplateClosure.prototype._ul4_renderneedscontext=true;ul4._rgb=function _rgb(r,g,b,a){return new this.Color(255*r,255*g,255*b,255*a);};ul4._xmlescape=function _xmlescape(obj){obj=ul4._str(obj);obj=obj.replace(/&/g,"&amp;");obj=obj.replace(/</g,"&lt;");obj=obj.replace(/>/g,"&gt;");obj=obj.replace(/'/g,"&#39;");obj=obj.replace(/"/g,"&quot;");return obj;};ul4._csv=function _csv(obj){if(obj===null)return"";else if(typeof obj!=="string")obj=ul4._repr(obj);if(obj.indexOf(",")!==-1||obj.indexOf('"')!==-1||obj.indexOf("\n")!==-1)obj='"'+obj.replace(/"/g,'""')+'"';return obj;};ul4._chr=function _chr(i){if(typeof i!="number")throw new ul4.TypeError("chr() requires an int");return String.fromCharCode(i);};ul4._ord=function _ord(c){if(typeof c!="string"||c.length!=1)throw new ul4.TypeError("ord() requires a string of length 1");return c.charCodeAt(0);};ul4._hex=function _hex(number){if(typeof number!="number")throw new ul4.TypeError("hex() requires an int");if(number<0)return"-0x"+number.toString(16).substr(1);else return"0x"+number.toString(16);};ul4._oct=function _oct(number){if(typeof number!="number")throw new ul4.TypeError("oct() requires an int");if(number<0)return"-0o"+number.toString(8).substr(1);else return"0o"+number.toString(8);};ul4._bin=function _bin(number){if(typeof number!="number")throw new ul4.TypeError("bin() requires an int");if(number<0)return"-0b"+number.toString(2).substr(1);else return"0b"+number.toString(2);};ul4._min=function _min(obj){if(obj.length==0)throw new ul4.ArgumentError("min() requires at least 1 argument, 0 given");else if(obj.length==1)obj=obj[0];var iter=ul4._iter(obj);var result=void 0;var first=true;while(true){var item=iter.next();if(item.done){if(first)throw new ul4.ValueError("min() argument is an empty sequence!");return result;}if(first||item.value<result)result=item.value;first=false;}};ul4._max=function _max(obj){if(obj.length==0)throw new ul4.ArgumentError("max() requires at least 1 argument, 0 given");else if(obj.length==1)obj=obj[0];var iter=ul4._iter(obj);var result=void 0;var first=true;while(true){var item=iter.next();if(item.done){if(first)throw new ul4.ValueError("max() argument is an empty sequence!");return result;}if(first||item.value>result)result=item.value;first=false;}};ul4._sum=function _sum(iterable){var start=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;for(var iter=ul4._iter(iterable);;){var item=iter.next();if(item.done)break;start+=item.value;}return start;};ul4._first=function _first(iterable){var defaultValue=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var item=ul4._iter(iterable).next();return item.done?defaultValue:item.value;};ul4._last=function _last(iterable){var defaultValue=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var value=defaultValue;for(var iter=ul4._iter(iterable);;){var item=iter.next();if(item.done)break;value=item.value;}return value;};ul4._sorted=function _sorted(context,iterable){var key=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var reverse=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;if(key===null){var _cmp2=reverse?function cmp(a,b){return-ul4._cmp("<=>",a,b);}:function cmp(a,b){return ul4._cmp("<=>",a,b);};var result=ul4._list(iterable);result.sort(_cmp2);return result;}else{var sort=[];for(var i=0,iter=ul4._iter(iterable);;++i){var item=iter.next();if(item.done)break;var keyvalue=ul4._call(context,key,[item.value],{});sort.push([keyvalue,reverse?-i:i,item.value]);}cmp=function cmp(s1,s2){var res=ul4._cmp("<=>",s1[0],s2[0]);if(res)return reverse?-res:res;res=ul4._cmp("<=>",s1[1],s2[1]);return reverse?-res:res;};sort.sort(cmp);var _result5=[];var _iteratorNormalCompletion84=true;var _didIteratorError84=false;var _iteratorError84=undefined;try{for(var _iterator84=sort[Symbol.iterator](),_step84;!(_iteratorNormalCompletion84=(_step84=_iterator84.next()).done);_iteratorNormalCompletion84=true){var _item6=_step84.value;_result5.push(_item6[2]);}}catch(err){_didIteratorError84=true;_iteratorError84=err;}finally{try{if(!_iteratorNormalCompletion84&&_iterator84.return){_iterator84.return();}}finally{if(_didIteratorError84){throw _iteratorError84;}}}return _result5;}};ul4._range=function _range(args){var start=void 0,stop=void 0,step=void 0;if(args.length<1)throw new ul4.ArgumentError("required range() argument missing");else if(args.length>3)throw new ul4.ArgumentError("range() expects at most 3 positional arguments, "+args.length+" given");else if(args.length==1){start=0;stop=args[0];step=1;}else if(args.length==2){start=args[0];stop=args[1];step=1;}else if(args.length==3){start=args[0];stop=args[1];step=args[2];}var lower=void 0,higher=void 0;if(step===0)throw new ul4.ValueError("range() requires a step argument != 0");else if(step>0){lower=start;higher=stop;}else{lower=stop;higher=start;}var length=lower<higher?Math.floor((higher-lower-1)/Math.abs(step))+1:0;return{index:0,next:function(){if(this.index>=length)return{done:true};return{value:start+this.index++*step,done:false};}};};ul4._slice=function _slice(args){var iterable=void 0,start=void 0,stop=void 0,step=void 0;if(args.length<2)throw new ul4.ArgumentError("required slice() argument missing");else if(args.length>4)throw new ul4.ArgumentError("slice() expects at most 4 positional arguments, "+args.length+" given");else if(args.length==2){iterable=args[0];start=0;stop=args[1];step=1;}else if(args.length==3){iterable=args[0];start=args[1]!==null?args[1]:0;stop=args[2];step=1;}else if(args.length==4){iterable=args[0];start=args[1]!==null?args[1]:0;stop=args[2];step=args[3]!==null?args[3]:1;}if(start<0)throw new ul4.ValueError("slice() requires a start argument >= 0");if(stop<0)throw new ul4.ValueError("slice() requires a stop argument >= 0");if(step<=0)throw new ul4.ValueError("slice() requires a step argument > 0");var next=start,count=0;var iter=ul4._iter(iterable);return{next:function(){var result=void 0;while(count<next){result=iter.next();if(result.done)return result;++count;}if(stop!==null&&count>=stop)return{done:true};result=iter.next();if(result.done)return result;++count;next+=step;if(stop!==null&&next>stop)next=stop;return result;}};};ul4._urlquote=function _urlquote(string){return encodeURIComponent(string);};ul4._urlunquote=function _urlunquote(string){return decodeURIComponent(string);};ul4._reversed=function _reversed(sequence){if(typeof sequence!="string"&&!ul4._islist(sequence))sequence=ul4._list(sequence);return{index:sequence.length-1,next:function(){return this.index>=0?{value:sequence[this.index--],done:false}:{done:true};}};};ul4._random=function _random(){return Math.random();};ul4._randrange=function _randrange(args){var start=void 0,stop=void 0,step=void 0;if(args.length<1)throw new ul4.ArgumentError("required randrange() argument missing");else if(args.length>3)throw new ul4.ArgumentError("randrange() expects at most 3 positional arguments, "+args.length+" given");else if(args.length==1){start=0;stop=args[0];step=1;}else if(args.length==2){start=args[0];stop=args[1];step=1;}else if(args.length==3){start=args[0];stop=args[1];step=args[2];}var width=stop-start;var value=Math.random();var n=void 0;if(step>0)n=Math.floor((width+step-1)/step);else if(step<0)n=Math.floor((width+step+1)/step);else throw new ul4.ValueError("randrange() requires a step argument != 0");return start+step*Math.floor(value*n);};ul4._randchoice=function _randchoice(sequence){var iscolor=ul4._iscolor(sequence);if(typeof sequence!=="string"&&!ul4._islist(sequence)&&!iscolor)throw new ul4.TypeError("randchoice() requires a string or list");if(iscolor)sequence=ul4._list(sequence);return sequence[Math.floor(Math.random()*sequence.length)];};ul4._round=function _round(x){var digits=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;if(digits){var threshold=Math.pow(10,digits);return Math.round(x*threshold)/threshold;}else return Math.round(x);};if(iscommon){ul4._md5=function _md5(string){var md5=require('blueimp-md5');return md5(string);};}else{ul4._md5=function _md5(string){return md5(string);};}ul4._enumerate=function _enumerate(iterable){var start=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return{iter:ul4._iter(iterable),index:start,next:function(){var item=this.iter.next();return item.done?item:{value:[this.index++,item.value],done:false};}};};ul4._isfirst=function _isfirst(iterable){var iter=ul4._iter(iterable);var isfirst=true;return{next:function(){var item=iter.next();var result=item.done?item:{value:[isfirst,item.value],done:false};isfirst=false;return result;}};};ul4._islast=function _islast(iterable){var iter=ul4._iter(iterable);var lastitem=iter.next();return{next:function(){if(lastitem.done)return lastitem;var item=iter.next();var result={value:[item.done,lastitem.value],done:false};lastitem=item;return result;}};};ul4._isfirstlast=function _isfirstlast(iterable){var iter=ul4._iter(iterable);var isfirst=true;var lastitem=iter.next();return{next:function(){if(lastitem.done)return lastitem;var item=iter.next();var result={value:[isfirst,item.done,lastitem.value],done:false};lastitem=item;isfirst=false;return result;}};};ul4._enumfl=function _enumfl(iterable){var start=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var iter=ul4._iter(iterable);var i=start;var isfirst=true;var lastitem=iter.next();return{next:function(){if(lastitem.done)return lastitem;var item=iter.next();var result={value:[i++,isfirst,item.done,lastitem.value],done:false};lastitem=item;isfirst=false;return result;}};};ul4._zip=function _zip(iterables){var result=void 0;if(iterables.length){var iters=[];var _iteratorNormalCompletion85=true;var _didIteratorError85=false;var _iteratorError85=undefined;try{for(var _iterator85=iterables[Symbol.iterator](),_step85;!(_iteratorNormalCompletion85=(_step85=_iterator85.next()).done);_iteratorNormalCompletion85=true){var item=_step85.value;iters.push(ul4._iter(item));}}catch(err){_didIteratorError85=true;_iteratorError85=err;}finally{try{if(!_iteratorNormalCompletion85&&_iterator85.return){_iterator85.return();}}finally{if(_didIteratorError85){throw _iteratorError85;}}}return{next:function(){var items=[];for(var i=0;i<iters.length;++i){var _item7=iters[i].next();if(_item7.done)return _item7;items.push(_item7.value);}return{value:items,done:false};}};}else{return{next:function(){return{done:true};}};}};ul4._abs=function _abs(number){if(number!==null&&typeof number.__abs__==="function")return number.__abs__();return Math.abs(number);};ul4._date=function _date(year,month,day){return new ul4.Date(year,month,day);};ul4._datetime=function _datetime(year,month,day){var hour=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;var minute=arguments.length>4&&arguments[4]!==undefined?arguments[4]:0;var second=arguments.length>5&&arguments[5]!==undefined?arguments[5]:0;var microsecond=arguments.length>6&&arguments[6]!==undefined?arguments[6]:0;return new Date(year,month-1,day,hour,minute,second,microsecond/1000);};ul4._timedelta=function _timedelta(){var days=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var seconds=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var microseconds=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;return new this.TimeDelta(days,seconds,microseconds);};ul4._monthdelta=function _monthdelta(){var months=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;return new this.MonthDelta(months);};ul4._hls=function _hls(h,l,s,a){var _v=function(m1,m2,hue){hue=hue%1.0;if(hue<1/6)return m1+(m2-m1)*hue*6.0;else if(hue<0.5)return m2;else if(hue<2/3)return m1+(m2-m1)*(2/3-hue)*6.0;return m1;};var m1=void 0,m2=void 0;if(typeof a==="undefined")a=1;if(s===0.0)return ul4._rgb(l,l,l,a);if(l<=0.5)m2=l*(1.0+s);else m2=l+s-l*s;m1=2.0*l-m2;return ul4._rgb(_v(m1,m2,h+1/3),_v(m1,m2,h),_v(m1,m2,h-1/3),a);};ul4._hsv=function _hsv(h,s,v,a){if(s===0.0)return ul4._rgb(v,v,v,a);var i=Math.floor(h*6.0);var f=h*6.0-i;var p=v*(1.0-s);var q=v*(1.0-s*f);var t=v*(1.0-s*(1.0-f));switch(i%6){case 0:return ul4._rgb(v,t,p,a);case 1:return ul4._rgb(q,v,p,a);case 2:return ul4._rgb(p,v,t,a);case 3:return ul4._rgb(p,q,v,a);case 4:return ul4._rgb(t,p,v,a);case 5:return ul4._rgb(v,p,q,a);}};ul4._get=function _get(container,key,defaultvalue){if(ul4._ismap(container)){if(container.has(key))return container.get(key);return defaultvalue;}else if(ul4._isobject(container)){var result=container[key];if(typeof result==="undefined")return defaultvalue;return result;}throw new ul4.TypeError("get() requires a dict");};ul4.now=function now(){return new Date();};ul4.utcnow=function utcnow(){var now=new Date();return new Date(now.getUTCFullYear(),now.getUTCMonth(),now.getUTCDate(),now.getUTCHours(),now.getUTCMinutes(),now.getUTCSeconds(),now.getUTCMilliseconds());};ul4.today=function today(){var now=new Date();return new ul4.Date(now.getFullYear(),now.getMonth()+1,now.getDate());};ul4.functions={repr:ul4._repr,ascii:ul4._ascii,str:ul4._str,int:ul4._int,float:ul4._float,list:ul4._list,set:ul4._set,bool:ul4._bool,len:ul4._len,type:ul4._type,format:ul4._format,any:ul4._any,all:ul4._all,zip:ul4._zip,getattr:ul4._getattr,hasattr:ul4._hasattr,dir:ul4._dir,isundefined:ul4._isundefined,isdefined:ul4._isdefined,isnone:ul4._isnone,isbool:ul4._isbool,isint:ul4._isint,isfloat:ul4._isfloat,isstr:ul4._isstr,isdate:ul4._isdate,isdatetime:ul4._isdatetime,iscolor:ul4._iscolor,istimedelta:ul4._istimedelta,ismonthdelta:ul4._ismonthdelta,istemplate:ul4._istemplate,isfunction:ul4._isfunction,islist:ul4._islist,isset:ul4._isanyset,isdict:ul4._isdict,isexception:ul4._isexception,asjson:ul4._asjson,fromjson:ul4._fromjson,asul4on:ul4._asul4on,fromul4on:ul4._fromul4on,now:ul4.now,utcnow:ul4.utcnow,today:ul4.today,enumerate:ul4._enumerate,isfirst:ul4._isfirst,islast:ul4._islast,isfirstlast:ul4._isfirstlast,enumfl:ul4._enumfl,abs:ul4._abs,date:ul4._date,datetime:ul4._datetime,timedelta:ul4._timedelta,monthdelta:ul4._monthdelta,rgb:ul4._rgb,hls:ul4._hls,hsv:ul4._hsv,xmlescape:ul4._xmlescape,csv:ul4._csv,chr:ul4._chr,ord:ul4._ord,hex:ul4._hex,oct:ul4._oct,bin:ul4._bin,min:ul4._min,max:ul4._max,sum:ul4._sum,first:ul4._first,last:ul4._last,sorted:ul4._sorted,range:ul4._range,slice:ul4._slice,urlquote:ul4._urlquote,urlunquote:ul4._urlunquote,reversed:ul4._reversed,random:ul4._random,randrange:ul4._randrange,randchoice:ul4._randchoice,round:ul4._round,md5:ul4._md5};ul4.expose(ul4._repr,["obj"],{name:"repr"});ul4.expose(ul4._ascii,["obj"],{name:"ascii"});ul4.expose(ul4._str,["obj=",""],{name:"str"});ul4.expose(ul4._int,["obj=",0,"base=",null],{name:"int"});ul4.expose(ul4._float,["obj=",0.0],{name:"float"});ul4.expose(ul4._list,["iterable=",[]],{name:"list"});ul4.expose(ul4._set,["iterable=",[]],{name:"set"});ul4.expose(ul4._bool,["obj=",false],{name:"bool"});ul4.expose(ul4._len,["sequence"],{name:"len"});ul4.expose(ul4._type,["obj"],{name:"type"});ul4.expose(ul4._format,["obj","fmt","lang=",null],{name:"format"});ul4.expose(ul4._any,["iterable"],{name:"any"});ul4.expose(ul4._all,["iterable"],{name:"all"});ul4.expose(ul4._zip,["*iterables"],{name:"zip"});ul4.expose(ul4._getattr,["obj","attrname","default=",null],{name:"getattr"});ul4.expose(ul4._hasattr,["obj","attrname"],{name:"hasattr"});ul4.expose(ul4._dir,["obj"],{name:"dir"});ul4.expose(ul4._isundefined,["obj"],{name:"isundefined"});ul4.expose(ul4._isdefined,["obj"],{name:"isdefined"});ul4.expose(ul4._isnone,["obj"],{name:"isnone"});ul4.expose(ul4._isbool,["obj"],{name:"isbool"});ul4.expose(ul4._isint,["obj"],{name:"isint"});ul4.expose(ul4._isfloat,["obj"],{name:"isfloat"});ul4.expose(ul4._isstr,["obj"],{name:"isstr"});ul4.expose(ul4._isdate,["obj"],{name:"isdate"});ul4.expose(ul4._isdatetime,["obj"],{name:"isdatetime"});ul4.expose(ul4._iscolor,["obj"],{name:"iscolor"});ul4.expose(ul4._istimedelta,["obj"],{name:"istimedelta"});ul4.expose(ul4._ismonthdelta,["obj"],{name:"ismonthdelta"});ul4.expose(ul4._istemplate,["obj"],{name:"istemplate"});ul4.expose(ul4._isfunction,["obj"],{name:"isfunction"});ul4.expose(ul4._islist,["obj"],{name:"islist"});ul4.expose(ul4._isanyset,["obj"],{name:"isset"});ul4.expose(ul4._isdict,["obj"],{name:"isdict"});ul4.expose(ul4._isexception,["obj"],{name:"isexception"});ul4.expose(ul4._asjson,["obj"],{name:"asjson"});ul4.expose(ul4._fromjson,["string"],{name:"fromjson"});ul4.expose(ul4._asul4on,["obj"],{name:"asul4on"});ul4.expose(ul4._fromul4on,["string"],{name:"fromul4on"});ul4.expose(ul4.now,[]);ul4.expose(ul4.utcnow,[]);ul4.expose(ul4.today,[]);ul4.expose(ul4._enumerate,["iterable","start=",0],{name:"enumerate"});ul4.expose(ul4._isfirst,["iterable"],{name:"isfirst"});ul4.expose(ul4._islast,["iterable"],{name:"islast"});ul4.expose(ul4._isfirstlast,["iterable"],{name:"isfirstlast"});ul4.expose(ul4._enumfl,["iterable","start=",0],{name:"enumfl"});ul4.expose(ul4._abs,["number"],{name:"abs"});ul4.expose(ul4._date,["year","month","day"],{name:"date"});ul4.expose(ul4._datetime,["year","month","day","hour=",0,"minute=",0,"second=",0,"microsecond=",0],{name:"datetime"});ul4.expose(ul4._timedelta,["days=",0,"seconds=",0,"microseconds=",0],{name:"timedelta"});ul4.expose(ul4._monthdelta,["months=",0],{name:"monthdelta"});ul4.expose(ul4._rgb,["r","g","b","a=",1.0],{name:"rgb"});ul4.expose(ul4._hls,["h","l","s","a=",1.0],{name:"hls"});ul4.expose(ul4._hsv,["h","s","v","a=",1.0],{name:"hsv"});ul4.expose(ul4._xmlescape,["obj"],{name:"xmlescape"});ul4.expose(ul4._csv,["obj"],{name:"csv"});ul4.expose(ul4._chr,["i"],{name:"chr"});ul4.expose(ul4._ord,["c"],{name:"ord"});ul4.expose(ul4._hex,["number"],{name:"hex"});ul4.expose(ul4._oct,["number"],{name:"oct"});ul4.expose(ul4._bin,["number"],{name:"bin"});ul4.expose(ul4._min,["*obj"],{name:"min"});ul4.expose(ul4._max,["*obj"],{name:"max"});ul4.expose(ul4._sum,["iterable","start=",0],{name:"sum"});ul4.expose(ul4._first,["iterable","default=",null],{name:"first"});ul4.expose(ul4._last,["iterable","default=",null],{name:"last"});ul4.expose(ul4._sorted,["iterable","key=",null,"reverse=",false],{name:"sorted",needscontext:true});ul4.expose(ul4._range,["*args"],{name:"range"});ul4.expose(ul4._slice,["*args"],{name:"slice"});ul4.expose(ul4._urlquote,["string"],{name:"urlquote"});ul4.expose(ul4._urlunquote,["string"],{name:"urlunquote"});ul4.expose(ul4._reversed,["sequence"],{name:"reversed"});ul4.expose(ul4._random,[],{name:"random"});ul4.expose(ul4._randrange,["*args"],{name:"randrange"});ul4.expose(ul4._randchoice,["sequence"],{name:"randchoice"});ul4.expose(ul4._round,["x","digit=",0],{name:"round"});ul4.expose(ul4._md5,["string"],{name:"md5"});ul4._count=function _count(obj,sub){var start=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var end=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;if(start<0)start+=obj.length;if(start===null)start=0;if(end<0)end+=obj.length;if(end===null)end=obj.length;var isstr=ul4._isstr(obj);if(isstr&&!sub.length){if(end<0||start>obj.length||start>end)return 0;var result=end-start+1;if(result>obj.length+1)result=obj.length+1;return result;}start=ul4._bound(start,obj.length);end=ul4._bound(end,obj.length);var count=0;if(ul4._islist(obj)){for(var i=start;i<end;++i){if(ul4._eq(obj[i],sub))++count;}return count;}else{var lastIndex=start;for(;;){lastIndex=obj.indexOf(sub,lastIndex);if(lastIndex==-1)break;if(lastIndex+sub.length>end)break;++count;lastIndex+=sub.length;}return count;}};ul4._find=function _find(obj,sub){var start=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var end=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;if(start<0)start+=obj.length;if(start===null)start=0;if(end<0)end+=obj.length;if(end===null)end=obj.length;start=ul4._bound(start,obj.length);end=ul4._bound(end,obj.length);if(start!==0||end!==obj.length){if(typeof obj=="string")obj=obj.substring(start,end);else obj=obj.slice(start,end);}var result=obj.indexOf(sub);if(result!==-1)result+=start;return result;};ul4._rfind=function _rfind(obj,sub){var start=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var end=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;if(start<0)start+=obj.length;if(start===null)start=0;if(end<0)end+=obj.length;if(end===null)end=obj.length;start=ul4._bound(start,obj.length);end=ul4._bound(end,obj.length);if(start!==0||end!==obj.length){if(typeof obj=="string")obj=obj.substring(start,end);else obj=obj.slice(start,end);}var result=obj.lastIndexOf(sub);if(result!==-1)result+=start;return result;};ul4._week4format=function _week(obj){var firstweekday=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(firstweekday===null)firstweekday=0;else firstweekday%=7;var yearday=ul4.DateTimeProtocol.yearday(obj)+6;var jan1=new Date(obj.getFullYear(),0,1);var jan1weekday=jan1.getDay();if(--jan1weekday<0)jan1weekday=6;while(jan1weekday!=firstweekday){--yearday;if(++jan1weekday==7)jan1weekday=0;}return Math.floor(yearday/7);};ul4._isleap=function _isleap(obj){return new Date(obj.getFullYear(),1,29).getMonth()===1;};ul4._update=function _update(obj,others,kwargs){if(!ul4._isdict(obj))throw new ul4.TypeError("update() requires a dict");var _iteratorNormalCompletion86=true;var _didIteratorError86=false;var _iteratorError86=undefined;try{for(var _iterator86=others[Symbol.iterator](),_step86;!(_iteratorNormalCompletion86=(_step86=_iterator86.next()).done);_iteratorNormalCompletion86=true){var other=_step86.value;if(ul4._ismap(other)){var _iteratorNormalCompletion88=true;var _didIteratorError88=false;var _iteratorError88=undefined;try{for(var _iterator88=other.entries()[Symbol.iterator](),_step88;!(_iteratorNormalCompletion88=(_step88=_iterator88.next()).done);_iteratorNormalCompletion88=true){var _step88$value=_slicedToArray(_step88.value,2),_key23=_step88$value[0],_value35=_step88$value[1];ul4._setmap(obj,_key23,_value35);}}catch(err){_didIteratorError88=true;_iteratorError88=err;}finally{try{if(!_iteratorNormalCompletion88&&_iterator88.return){_iterator88.return();}}finally{if(_didIteratorError88){throw _iteratorError88;}}}}else if(ul4._isobject(other)){for(var _key24 in other){ul4._setmap(obj,_key24,other[_key24]);}}else if(ul4._islist(other)){var _iteratorNormalCompletion89=true;var _didIteratorError89=false;var _iteratorError89=undefined;try{for(var _iterator89=other[Symbol.iterator](),_step89;!(_iteratorNormalCompletion89=(_step89=_iterator89.next()).done);_iteratorNormalCompletion89=true){var item=_step89.value;if(!ul4._islist(item)||item.length!=2)throw new ul4.TypeError("update() requires a dict or a list of (key, value) pairs");ul4._setmap(obj,item[0],item[1]);}}catch(err){_didIteratorError89=true;_iteratorError89=err;}finally{try{if(!_iteratorNormalCompletion89&&_iterator89.return){_iterator89.return();}}finally{if(_didIteratorError89){throw _iteratorError89;}}}}else throw new ul4.TypeError("update() requires a dict or a list of (key, value) pairs");}}catch(err){_didIteratorError86=true;_iteratorError86=err;}finally{try{if(!_iteratorNormalCompletion86&&_iterator86.return){_iterator86.return();}}finally{if(_didIteratorError86){throw _iteratorError86;}}}var _iteratorNormalCompletion87=true;var _didIteratorError87=false;var _iteratorError87=undefined;try{for(var _iterator87=kwargs.entries()[Symbol.iterator](),_step87;!(_iteratorNormalCompletion87=(_step87=_iterator87.next()).done);_iteratorNormalCompletion87=true){var _step87$value=_slicedToArray(_step87.value,2),key=_step87$value[0],value=_step87$value[1];ul4._setmap(obj,key,value);}}catch(err){_didIteratorError87=true;_iteratorError87=err;}finally{try{if(!_iteratorNormalCompletion87&&_iterator87.return){_iterator87.return();}}finally{if(_didIteratorError87){throw _iteratorError87;}}}return null;};ul4.Color=function(_ul4$Proto5){_inherits(Color,_ul4$Proto5);function Color(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var g=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var b=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var a=arguments.length>3&&arguments[3]!==undefined?arguments[3]:255;_classCallCheck(this,Color);var _this113=_possibleConstructorReturn(this,(Color.__proto__||Object.getPrototypeOf(Color)).call(this));_this113._r=r;_this113._g=g;_this113._b=b;_this113._a=a;return _this113;}_createClass(Color,[{key:"__repr__",value:function __repr__(){var r=ul4._lpad(this._r.toString(16),"0",2);var g=ul4._lpad(this._g.toString(16),"0",2);var b=ul4._lpad(this._b.toString(16),"0",2);var a=ul4._lpad(this._a.toString(16),"0",2);if(this._a!==0xff){if(r[0]===r[1]&&g[0]===g[1]&&b[0]===b[1]&&a[0]===a[1])return"#"+r[0]+g[0]+b[0]+a[0];else return"#"+r+g+b+a;}else{if(r[0]===r[1]&&g[0]===g[1]&&b[0]===b[1])return"#"+r[0]+g[0]+b[0];else return"#"+r+g+b;}}},{key:"__str__",value:function __str__(){if(this._a!==0xff){return"rgba("+this._r+", "+this._g+", "+this._b+", "+this._a/255+")";}else{var r=ul4._lpad(this._r.toString(16),"0",2);var g=ul4._lpad(this._g.toString(16),"0",2);var b=ul4._lpad(this._b.toString(16),"0",2);if(r[0]===r[1]&&g[0]===g[1]&&b[0]===b[1])return"#"+r[0]+g[0]+b[0];else return"#"+r+g+b;}}},{key:"__iter__",value:function __iter__(){return{obj:this,index:0,next:function(){if(this.index==0){++this.index;return{value:this.obj._r,done:false};}else if(this.index==1){++this.index;return{value:this.obj._g,done:false};}else if(this.index==2){++this.index;return{value:this.obj._b,done:false};}else if(this.index==3){++this.index;return{value:this.obj._a,done:false};}else return{done:true};}};}},{key:"__getattr__",value:function __getattr__(attrname){var self=this;switch(attrname){case"r":var r=function r(){return self._r;};ul4.expose(r,[]);return r;case"g":var g=function g(){return self._g;};ul4.expose(g,[]);return g;case"b":var b=function b(){return self._b;};ul4.expose(b,[]);return b;case"a":var a=function a(){return self._a;};ul4.expose(a,[]);return a;case"lum":var lum=function lum(){return self.lum();};ul4.expose(lum,[]);return lum;case"hls":var hls=function hls(){return self.hls();};ul4.expose(hls,[]);return hls;case"hlsa":var hlsa=function hlsa(){return self.hlsa();};ul4.expose(hlsa,[]);return hlsa;case"hsv":var hsv=function hsv(){return self.hsv();};ul4.expose(hsv,[]);return hsv;case"hsva":var hsva=function hsva(){return self.hsva();};ul4.expose(hsva,[]);return hsva;case"witha":var witha=function witha(a){return self.witha(a);};ul4.expose(witha,["a"]);return witha;case"withlum":var withlum=function withlum(lum){return self.withlum(lum);};ul4.expose(withlum,["lum"]);return withlum;case"abslum":var abslum=function abslum(lum){return self.abslum(lum);};ul4.expose(abslum,["lum"]);return abslum;case"rellum":var rellum=function rellum(lum){return self.rellum(lum);};ul4.expose(rellum,["lum"]);return rellum;default:throw new ul4.AttributeError(this,attrname);}}},{key:"__getitem__",value:function __getitem__(key){var orgkey=key;if(key<0)key+=4;switch(key){case 0:return this._r;case 1:return this._g;case 2:return this._b;case 3:return this._a;default:throw new ul4.IndexError(this,orgkey);}}},{key:"__eq__",value:function __eq__(other){if(other instanceof ul4.Color)return this._r==other._r&&this._g==other._g&&this._b==other._b&&this._a==other._a;return false;}},{key:"r",value:function r(){return this._r;}},{key:"g",value:function g(){return this._g;}},{key:"b",value:function b(){return this._b;}},{key:"a",value:function a(){return this._a;}},{key:"lum",value:function lum(){return this.hls()[1];}},{key:"hls",value:function hls(){var r=this._r/255.0;var g=this._g/255.0;var b=this._b/255.0;var maxc=Math.max(r,g,b);var minc=Math.min(r,g,b);var h=void 0,l=void 0,s=void 0;var rc=void 0,gc=void 0,bc=void 0;l=(minc+maxc)/2.0;if(minc==maxc)return[0.0,l,0.0];if(l<=0.5)s=(maxc-minc)/(maxc+minc);else s=(maxc-minc)/(2.0-maxc-minc);rc=(maxc-r)/(maxc-minc);gc=(maxc-g)/(maxc-minc);bc=(maxc-b)/(maxc-minc);if(r==maxc)h=bc-gc;else if(g==maxc)h=2.0+rc-bc;else h=4.0+gc-rc;h=h/6.0%1.0;return[h,l,s];}},{key:"hlsa",value:function hlsa(){var hls=this.hls();return hls.concat(this._a/255.0);}},{key:"hsv",value:function hsv(){var r=this._r/255.0;var g=this._g/255.0;var b=this._b/255.0;var maxc=Math.max(r,g,b);var minc=Math.min(r,g,b);var v=maxc;if(minc==maxc)return[0.0,0.0,v];var s=(maxc-minc)/maxc;var rc=(maxc-r)/(maxc-minc);var gc=(maxc-g)/(maxc-minc);var bc=(maxc-b)/(maxc-minc);var h=void 0;if(r==maxc)h=bc-gc;else if(g==maxc)h=2.0+rc-bc;else h=4.0+gc-rc;h=h/6.0%1.0;return[h,s,v];}},{key:"hsva",value:function hsva(){var hsv=this.hsv();return hsv.concat(this._a/255.0);}},{key:"witha",value:function witha(a){if(typeof a!=="number")throw new ul4.TypeError("witha() requires a number");return new ul4.Color(this._r,this._g,this._b,a);}},{key:"withlum",value:function withlum(lum){if(typeof lum!=="number")throw new ul4.TypeError("witha() requires a number");var hlsa=this.hlsa();return ul4._hls(hlsa[0],lum,hlsa[2],hlsa[3]);}},{key:"ul4type",value:function ul4type(){return"color";}}]);return Color;}(ul4.Proto);ul4.expose(ul4.Color.prototype.r,[]);ul4.expose(ul4.Color.prototype.g,[]);ul4.expose(ul4.Color.prototype.b,[]);ul4.expose(ul4.Color.prototype.a,[]);ul4.expose(ul4.Color.prototype.lum,[]);ul4.expose(ul4.Color.prototype.hls,[]);ul4.expose(ul4.Color.prototype.hlsa,[]);ul4.expose(ul4.Color.prototype.hsv,[]);ul4.expose(ul4.Color.prototype.hsva,[]);ul4.expose(ul4.Color.prototype.witha,["a"]);ul4.expose(ul4.Color.prototype.withlum,["lum"]);_js_Date=Date;ul4.Date=function(_ul4$Proto6){_inherits(Date,_ul4$Proto6);function Date(year,month,day){_classCallCheck(this,Date);var _this114=_possibleConstructorReturn(this,(Date.__proto__||Object.getPrototypeOf(Date)).call(this));_this114._date=new _js_Date(year,month-1,day);return _this114;}_createClass(Date,[{key:"__repr__",value:function __repr__(){return'@('+this.__str__()+")";}},{key:"__str__",value:function __str__(){return ul4._lpad(this._date.getFullYear(),"0",4)+"-"+ul4._lpad(this._date.getMonth()+1,"0",2)+"-"+ul4._lpad(this._date.getDate(),"0",2);}},{key:"__eq__",value:function __eq__(other){if(other instanceof ul4.Date)return this._date.getTime()===other._date.getTime();return false;}},{key:"__lt__",value:function __lt__(other){if(other instanceof ul4.Date)return this._date<other._date;ul4._unorderable("<",this,other);}},{key:"__le__",value:function __le__(other){if(other instanceof ul4.Date)return this._date<=other._date;ul4._unorderable("<=",this,other);}},{key:"__gt__",value:function __gt__(other){if(other instanceof ul4.Date)return this._date>other._date;ul4._unorderable(">",this,other);}},{key:"__ge__",value:function __ge__(other){if(other instanceof ul4.Date)return this._date>=other._date;ul4._unorderable(">=",this,other);}},{key:"year",value:function year(){return this._date.getFullYear();}},{key:"month",value:function month(){return this._date.getMonth()+1;}},{key:"day",value:function day(){return this._date.getDate();}},{key:"ul4type",value:function ul4type(){return"date";}}]);return Date;}(ul4.Proto);ul4.TimeDelta=function(_ul4$Proto7){_inherits(TimeDelta,_ul4$Proto7);function TimeDelta(){var days=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var seconds=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var microseconds=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;_classCallCheck(this,TimeDelta);var _this115=_possibleConstructorReturn(this,(TimeDelta.__proto__||Object.getPrototypeOf(TimeDelta)).call(this));var total_microseconds=Math.floor((days*86400+seconds)*1000000+microseconds);microseconds=ul4.ModAST.prototype._do(total_microseconds,1000000);var total_seconds=Math.floor(total_microseconds/1000000);seconds=ul4.ModAST.prototype._do(total_seconds,86400);days=Math.floor(total_seconds/86400);if(seconds<0){seconds+=86400;--days;}_this115._microseconds=microseconds;_this115._seconds=seconds;_this115._days=days;return _this115;}_createClass(TimeDelta,[{key:"__repr__",value:function __repr__(){var v=[],first=true;v.push("timedelta(");if(this._days){v.push("days="+this._days);first=false;}if(this._seconds){if(!first)v.push(", ");v.push("seconds="+this._seconds);first=false;}if(this._microseconds){if(!first)v.push(", ");v.push("microseconds="+this._microseconds);}v.push(")");return v.join("");}},{key:"__str__",value:function __str__(){var v=[];if(this._days){v.push(this._days+" day");if(this._days!==-1&&this._days!==1)v.push("s");v.push(", ");}var seconds=this._seconds%60;var minutes=Math.floor(this._seconds/60);var hours=Math.floor(minutes/60);minutes=minutes%60;v.push(""+hours);v.push(":");v.push(ul4._lpad(minutes.toString(),"0",2));v.push(":");v.push(ul4._lpad(seconds.toString(),"0",2));if(this._microseconds){v.push(".");v.push(ul4._lpad(this._microseconds.toString(),"0",6));}return v.join("");}},{key:"__bool__",value:function __bool__(){return this._days!==0||this._seconds!==0||this._microseconds!==0;}},{key:"__abs__",value:function __abs__(){return this._days<0?new ul4.TimeDelta(-this._days,-this._seconds,-this._microseconds):this;}},{key:"__eq__",value:function __eq__(other){if(other instanceof ul4.TimeDelta)return this._days===other._days&&this._seconds===other._seconds&&this._microseconds===other._microseconds;return false;}},{key:"__lt__",value:function __lt__(other){if(other instanceof ul4.TimeDelta){if(this._days!=other._days)return this._days<other._days;if(this._seconds!=other._seconds)return this._seconds<other._seconds;return this._microseconds<other._microseconds;}ul4._unorderable("<",this,other);}},{key:"__le__",value:function __le__(other){if(other instanceof ul4.TimeDelta){if(this._days!=other._days)return this._days<other._days;if(this._seconds!=other._seconds)return this._seconds<other._seconds;return this._microseconds<=other._microseconds;}ul4._unorderable("<=",this,other);}},{key:"__gt__",value:function __gt__(other){if(other instanceof ul4.TimeDelta){if(this._days!=other._days)return this._days>other._days;if(this._seconds!=other._seconds)return this._seconds>other._seconds;return this._microseconds>other._microseconds;}ul4._unorderable(">",this,other);}},{key:"__ge__",value:function __ge__(other){if(other instanceof ul4.TimeDelta){if(this._days!=other._days)return this._days>other._days;if(this._seconds!=other._seconds)return this._seconds>other._seconds;return this._microseconds>=other._microseconds;}ul4._unorderable(">=",this,other);}},{key:"__neg__",value:function __neg__(){return new ul4.TimeDelta(-this._days,-this._seconds,-this._microseconds);}},{key:"adddate",value:function adddate(date,days){var year=date._date.getFullYear();var month=date._date.getMonth();var day=date._date.getDate()+days;return new ul4.Date(year,month,day);}},{key:"_adddatetime",value:function _adddatetime(date,days,seconds,microseconds){var year=date.getFullYear();var month=date.getMonth();var day=date.getDate()+days;var hour=date.getHours();var minute=date.getMinutes();var second=date.getSeconds()+seconds;var millisecond=date.getMilliseconds()+microseconds/1000;return new Date(year,month,day,hour,minute,second,millisecond);}},{key:"__add__",value:function __add__(other){if(other instanceof ul4.TimeDelta)return new ul4.TimeDelta(this._days+other._days,this._seconds+other._seconds,this._microseconds+other._microseconds);else if(ul4._isdate(other))return this._adddate(other,this._days);else if(ul4._isdatetime(other))return this._adddatetime(other,this._days,this._seconds,this._microseconds);throw new ul4.TypeError(ul4._type(this)+" + "+ul4._type(other)+" not supported");}},{key:"__radd__",value:function __radd__(other){if(ul4._isdate(other))return this._adddate(other,this._days);else if(ul4._isdatetime(other))return this._adddatetime(other,this._days,this._seconds,this._microseconds);throw new ul4.TypeError(ul4._type(this)+" + "+ul4._type(other)+" not supported");}},{key:"__sub__",value:function __sub__(other){if(other instanceof ul4.TimeDelta)return new ul4.TimeDelta(this._days-other._days,this._seconds-other._seconds,this._microseconds-other._microseconds);throw new ul4.TypeError(ul4._type(this)+" - "+ul4._type(other)+" not supported");}},{key:"__rsub__",value:function __rsub__(other){if(ul4._isdate(other))return this._adddate(other,-this._days);else if(ul4._isdatetime(other))return this._adddatetime(other,-this._days,-this._seconds,-this._microseconds);throw new ul4.TypeError(ul4._type(this)+" - "+ul4._type(other)+" not supported");}},{key:"__mul__",value:function __mul__(other){if(typeof other==="number")return new ul4.TimeDelta(this._days*other,this._seconds*other,this._microseconds*other);throw new ul4.TypeError(ul4._type(this)+" * "+ul4._type(other)+" not supported");}},{key:"__rmul__",value:function __rmul__(other){if(typeof other==="number")return new ul4.TimeDelta(this._days*other,this._seconds*other,this._microseconds*other);throw new ul4.TypeError(ul4._type(this)+" * "+ul4._type(other)+" not supported");}},{key:"__truediv__",value:function __truediv__(other){if(typeof other==="number"){return new ul4.TimeDelta(this._days/other,this._seconds/other,this._microseconds/other);}else if(other instanceof ul4.TimeDelta){var myValue=this._days;var otherValue=other._days;var hasSeconds=this._seconds||other._seconds;var hasMicroseconds=this._microseconds||other._microseconds;if(hasSeconds||hasMicroseconds){myValue=myValue*86400+this._seconds;otherValue=otherValue*86400+other._seconds;if(hasMicroseconds){myValue=myValue*1000000+this._microseconds;otherValue=otherValue*1000000+other._microseconds;}}return myValue/otherValue;}throw new ul4.TypeError(ul4._type(this)+" / "+ul4._type(other)+" not supported");}},{key:"__getattr__",value:function __getattr__(attrname){var self=this;switch(attrname){case"days":var days=function days(){return self._days;};ul4.expose(days,[]);return days;case"seconds":var seconds=function seconds(){return self._seconds;};ul4.expose(seconds,[]);return seconds;case"microseconds":var microseconds=function microseconds(){return self._microseconds;};ul4.expose(microseconds,[]);return microseconds;default:throw new ul4.AttributeError(this,attrname);}}},{key:"days",value:function days(){return this._days;}},{key:"seconds",value:function seconds(){return this._seconds;}},{key:"microseconds",value:function microseconds(){return this._microseconds;}},{key:"ul4type",value:function ul4type(){return"timedelta";}}]);return TimeDelta;}(ul4.Proto);ul4.MonthDelta=function(_ul4$Proto8){_inherits(MonthDelta,_ul4$Proto8);function MonthDelta(){var months=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;_classCallCheck(this,MonthDelta);var _this116=_possibleConstructorReturn(this,(MonthDelta.__proto__||Object.getPrototypeOf(MonthDelta)).call(this));_this116._months=months;return _this116;}_createClass(MonthDelta,[{key:"__repr__",value:function __repr__(){if(!this._months)return"monthdelta()";return"monthdelta("+this._months+")";}},{key:"__str__",value:function __str__(){if(this._months){if(this._months!==-1&&this._months!==1)return this._months+" months";return this._months+" month";}return"0 months";}},{key:"toString",value:function toString(){return this.__str__();}},{key:"__bool__",value:function __bool__(){return this._months!==0;}},{key:"__abs__",value:function __abs__(){return this._months<0?new ul4.MonthDelta(-this._months):this;}},{key:"__eq__",value:function __eq__(other){if(other instanceof MonthDelta)return this._months===other._months;return false;}},{key:"__lt__",value:function __lt__(other){if(other instanceof ul4.MonthDelta)return this._months<other._months;ul4._unorderable("<",this,other);}},{key:"__le__",value:function __le__(other){if(other instanceof ul4.MonthDelta)return this._months<=other._months;ul4._unorderable("<=",this,other);}},{key:"__gt__",value:function __gt__(other){if(other instanceof ul4.MonthDelta)return this._months>other._months;ul4._unorderable(">",this,other);}},{key:"__ge__",value:function __ge__(other){if(other instanceof ul4.MonthDelta)return this._months>=other._months;ul4._unorderable(">=",this,other);}},{key:"__neg__",value:function __neg__(){return new ul4.MonthDelta(-this._months);}},{key:"_adddate",value:function _adddate(date,months){var result=this._adddatetime(date._date,months);return new ul4.Date(result.getFullYear(),result.getMonth()+1,result.getDate());}},{key:"_adddatetime",value:function _adddatetime(date,months){var year=date.getFullYear();var month=date.getMonth()+months;var day=date.getDate();var hour=date.getHours();var minute=date.getMinutes();var second=date.getSeconds();var millisecond=date.getMilliseconds();while(true){var targetmonth=new Date(year,month,1,hour,minute,second,millisecond).getMonth();var result=new Date(year,month,day,hour,minute,second,millisecond);if(result.getMonth()===targetmonth)return result;--day;}}},{key:"__add__",value:function __add__(other){if(ul4._ismonthdelta(other))return new ul4.MonthDelta(this._months+other._months);else if(ul4._isdate(other))return this._adddate(other,this._months);else if(ul4._isdatetime(other))return this._adddatetime(other,this._months);throw new ul4.ArgumentError(ul4._type(this)+" + "+ul4._type(other)+" not supported");}},{key:"__radd__",value:function __radd__(other){if(ul4._isdate(other))return this._adddate(other,this._months);else if(ul4._isdatetime(other))return this._adddatetime(other,this._months);throw new ul4.ArgumentError(ul4._type(this)+" + "+ul4._type(other)+" not supported");}},{key:"__sub__",value:function __sub__(other){if(ul4._ismonthdelta(other))return new ul4.MonthDelta(this._months-other._months);throw new ul4.ArgumentError(ul4._type(this)+" - "+ul4._type(other)+" not supported");}},{key:"__rsub__",value:function __rsub__(other){if(ul4._isdate(other))return this._adddate(other,-this._months);else if(ul4._isdatetime(other))return this._adddatetime(other,-this._months);throw new ul4.ArgumentError(ul4._type(this)+" - "+ul4._type(other)+" not supported");}},{key:"__mul__",value:function __mul__(other){if(typeof other==="number")return new ul4.MonthDelta(this._months*Math.floor(other));throw new ul4.ArgumentError(ul4._type(this)+" * "+ul4._type(other)+" not supported");}},{key:"__rmul__",value:function __rmul__(other){if(typeof other==="number")return new ul4.MonthDelta(this._months*Math.floor(other));throw new ul4.ArgumentError(ul4._type(this)+" * "+ul4._type(other)+" not supported");}},{key:"__floordiv__",value:function __floordiv__(other){if(typeof other==="number")return new ul4.MonthDelta(Math.floor(this._months/other));else if(ul4._ismonthdelta(other))return Math.floor(this._months/other._months);throw new ul4.ArgumentError(ul4._type(this)+" // "+ul4._type(other)+" not supported");}},{key:"__truediv__",value:function __truediv__(other){if(ul4._ismonthdelta(other))return this._months/other._months;throw new ul4.ArgumentError(ul4._type(this)+" / "+ul4._type(other)+" not supported");}},{key:"__getattr__",value:function __getattr__(attrname){var self=this;switch(attrname){case"months":var months=function months(){return self._months;};ul4.expose(months,[]);return months;default:throw new ul4.AttributeError(this,attrname);}}},{key:"months",value:function months(){return this._months;}},{key:"ul4type",value:function ul4type(){return"monthdelta";}}]);return MonthDelta;}(ul4.Proto);var classes=[ul4.TextAST,ul4.IndentAST,ul4.LineEndAST,ul4.ConstAST,ul4.SeqItemAST,ul4.UnpackSeqItemAST,ul4.DictItemAST,ul4.UnpackDictItemAST,ul4.PosArgAST,ul4.KeywordArgAST,ul4.UnpackListArgAST,ul4.UnpackDictArgAST,ul4.ListAST,ul4.ListCompAST,ul4.DictAST,ul4.DictCompAST,ul4.SetAST,ul4.SetCompAST,ul4.GenExprAST,ul4.VarAST,ul4.NotAST,ul4.NegAST,ul4.BitNotAST,ul4.IfAST,ul4.ReturnAST,ul4.PrintAST,ul4.PrintXAST,ul4.ItemAST,ul4.IsAST,ul4.IsNotAST,ul4.EQAST,ul4.NEAST,ul4.LTAST,ul4.LEAST,ul4.GTAST,ul4.GEAST,ul4.NotContainsAST,ul4.ContainsAST,ul4.AddAST,ul4.SubAST,ul4.MulAST,ul4.FloorDivAST,ul4.TrueDivAST,ul4.ModAST,ul4.ShiftLeftAST,ul4.ShiftRightAST,ul4.BitAndAST,ul4.BitXOrAST,ul4.BitOrAST,ul4.AndAST,ul4.OrAST,ul4.SliceAST,ul4.AttrAST,ul4.CallAST,ul4.RenderAST,ul4.RenderXAST,ul4.RenderBlockAST,ul4.RenderBlocksAST,ul4.SetVarAST,ul4.AddVarAST,ul4.SubVarAST,ul4.MulVarAST,ul4.TrueDivVarAST,ul4.FloorDivVarAST,ul4.ModVarAST,ul4.ShiftLeftVarAST,ul4.ShiftRightVarAST,ul4.BitAndVarAST,ul4.BitXOrVarAST,ul4.BitOrVarAST,ul4.ForBlockAST,ul4.WhileBlockAST,ul4.BreakAST,ul4.ContinueAST,ul4.CondBlockAST,ul4.IfBlockAST,ul4.ElIfBlockAST,ul4.ElseBlockAST,ul4.SignatureAST,ul4.Template];var _iteratorNormalCompletion90=true;var _didIteratorError90=false;var _iteratorError90=undefined;try{for(var _iterator90=classes[Symbol.iterator](),_step90;!(_iteratorNormalCompletion90=(_step90=_iterator90.next()).done);_iteratorNormalCompletion90=true){var _constructor2=_step90.value;var ul4onname=_constructor2.name;if(ul4onname.substr(ul4onname.length-3)==="AST")ul4onname=ul4onname.substr(0,ul4onname.length-3);ul4onname=ul4onname.toLowerCase();_constructor2.prototype.type=ul4onname;ul4.register("de.livinglogic.ul4."+ul4onname,_constructor2);}}catch(err){_didIteratorError90=true;_iteratorError90=err;}finally{try{if(!_iteratorNormalCompletion90&&_iterator90.return){_iterator90.return();}}finally{if(_didIteratorError90){throw _iteratorError90;}}}})();
//# sourceMappingURL=ul4.js.map